(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[143],{788:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(15),o=i.n(n),r=i(645),s=i.n(r)()(o());s.push([t.id,'.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 2px solid blue;\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: rgba(0,60,136,0.3);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n.ol-scale-line-inner {\n  border: 1px solid #eee;\n  border-top: none;\n  color: #eee;\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n  transition: all 0.25s;\n}\n.ol-scale-bar {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n}\n.ol-scale-step-marker {\n  width: 1px;\n  height: 15px;\n  background-color: #000000;\n  float: right;\n  z-Index: 10;\n}\n.ol-scale-step-text {\n  position: absolute;\n  bottom: -5px;\n  font-size: 12px;\n  z-Index: 11;\n  color: #000000;\n  text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\n}\n.ol-scale-text {\n  position: absolute;\n  font-size: 14px;\n  text-align: center;\n  bottom: 25px;\n  color: #000000;\n  text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\n}\n.ol-scale-singlebar {\n  position: relative;\n  height: 10px;\n  z-Index: 9;\n  box-sizing: border-box;\n  border: 1px solid black;\n}\n\n.ol-unsupported {\n  display: none;\n}\n.ol-viewport, .ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n.ol-control {\n  position: absolute;\n  background-color: rgba(255,255,255,0.4);\n  border-radius: 4px;\n  padding: 2px;\n}\n.ol-control:hover {\n  background-color: rgba(255,255,255,0.6);\n}\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: white;\n  font-size: 1.14em;\n  font-weight: bold;\n  text-decoration: none;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: rgba(0,60,136,0.5);\n  border: none;\n  border-radius: 2px;\n}\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  font-size: 1.2em;\n  will-change: transform;\n}\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  background-color: rgba(0,60,136,0.7);\n}\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 0 .5em;\n  color: #000;\n  text-shadow: 0 0 2px #fff;\n}\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n}\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n.ol-attribution ul, .ol-attribution button {\n  display: inline-block;\n}\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n.ol-attribution:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n}\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: inline-block;\n}\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid #7b98bc;\n  height: 150px;\n  margin: 2px;\n  width: 150px;\n}\n.ol-overviewmap:not(.ol-collapsed) button{\n  bottom: 1px;\n  left: 2px;\n  position: absolute;\n}\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n.ol-overviewmap:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n.ol-overviewmap-box {\n  border: 2px dotted rgba(0,60,136,0.7);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n',"",{version:3,sources:["webpack://./node_modules/ol/ol.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,kBAAkB;EAClB,sBAAsB;AACxB;;AAEA;EACE,QAAQ;EACR,UAAU;EACV,kBAAkB;AACpB;;AAEA;EACE,8BAA8B;EAC9B,kBAAkB;EAClB,WAAW;EACX,SAAS;EACT,YAAY;EACZ,kBAAkB;AACpB;AACA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,WAAW;EACX,4BAA4B;EAC5B,qBAAqB;AACvB;AACA;EACE,kBAAkB;EAClB,WAAW;EACX,SAAS;AACX;AACA;EACE,UAAU;EACV,YAAY;EACZ,yBAAyB;EACzB,YAAY;EACZ,WAAW;AACb;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,eAAe;EACf,WAAW;EACX,cAAc;EACd,yEAAyE;AAC3E;AACA;EACE,kBAAkB;EAClB,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,cAAc;EACd,yEAAyE;AAC3E;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,UAAU;EACV,sBAAsB;EACtB,uBAAuB;AACzB;;AAEA;EACE,aAAa;AACf;AACA;EACE,2BAA2B;EAC3B,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;EACjB,0CAA0C;AAC5C;AACA;EACE,8BAA8B;EAC9B,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;AACA;EACE,wBAAwB;EACxB,qBAAqB;EACrB,gBAAgB;AAClB;AACA;EACE,YAAY;EACZ,oBAAoB;EACpB,iBAAiB;EACjB,YAAY;AACd;AACA;EACE,kBAAkB;EAClB,uCAAuC;EACvC,kBAAkB;EAClB,YAAY;AACd;AACA;EACE,uCAAuC;AACzC;AACA;EACE,SAAS;EACT,UAAU;AACZ;AACA;EACE,SAAS;EACT,WAAW;EACX,qDAAqD;AACvD;AACA;EACE,UAAU;EACV,kBAAkB;EAClB,0DAA0D;AAC5D;AACA;EACE,YAAY;EACZ,UAAU;AACZ;AACA;EACE,WAAW;EACX,SAAS;AACX;;AAEA;EACE,cAAc;EACd,WAAW;EACX,UAAU;EACV,YAAY;EACZ,iBAAiB;EACjB,iBAAiB;EACjB,qBAAqB;EACrB,kBAAkB;EAClB,eAAe;EACf,cAAc;EACd,iBAAiB;EACjB,oCAAoC;EACpC,YAAY;EACZ,kBAAkB;AACpB;AACA;EACE,YAAY;EACZ,UAAU;AACZ;AACA;EACE,kBAAkB;AACpB;AACA;EACE,cAAc;EACd,mBAAmB;EACnB,gBAAgB;EAChB,sBAAsB;AACxB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,UAAU;AACZ;AACA;;EAEE,qBAAqB;EACrB,oCAAoC;AACtC;AACA;EACE,0BAA0B;AAC5B;AACA;EACE,0BAA0B;AAC5B;;;AAGA;EACE,iBAAiB;EACjB,YAAY;EACZ,WAAW;EACX,6BAA6B;AAC/B;;AAEA;EACE,SAAS;EACT,eAAe;EACf,WAAW;EACX,yBAAyB;AAC3B;AACA;EACE,eAAe;EACf,gBAAgB;AAClB;AACA;EACE,YAAY;AACd;AACA;EACE,eAAe;EACf,kBAAkB;EAClB,sBAAsB;AACxB;AACA;EACE,qBAAqB;AACvB;AACA;EACE,aAAa;AACf;AACA;EACE,iCAAiC;AACnC;AACA;EACE,SAAS;EACT,QAAQ;EACR,sBAAsB;AACxB;AACA;EACE,iBAAiB;EACjB,iBAAiB;AACnB;AACA;EACE,aAAa;AACf;;AAEA;EACE,UAAU;EACV,UAAU;EACV,aAAa;AACf;AACA;EACE,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,WAAW;EACX,aAAa;AACf;AACA;EACE,SAAS;EACT,OAAO;EACP,wBAAwB;AAC1B;AACA;;EAEE,qBAAqB;AACvB;AACA;EACE,yBAAyB;EACzB,aAAa;EACb,WAAW;EACX,YAAY;AACd;AACA;EACE,WAAW;EACX,SAAS;EACT,kBAAkB;AACpB;AACA;;EAEE,aAAa;AACf;AACA;EACE,iCAAiC;AACnC;AACA;EACE,qCAAqC;AACvC;;AAEA;EACE,YAAY;AACd",sourcesContent:['.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 2px solid blue;\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: rgba(0,60,136,0.3);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n.ol-scale-line-inner {\n  border: 1px solid #eee;\n  border-top: none;\n  color: #eee;\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n  transition: all 0.25s;\n}\n.ol-scale-bar {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n}\n.ol-scale-step-marker {\n  width: 1px;\n  height: 15px;\n  background-color: #000000;\n  float: right;\n  z-Index: 10;\n}\n.ol-scale-step-text {\n  position: absolute;\n  bottom: -5px;\n  font-size: 12px;\n  z-Index: 11;\n  color: #000000;\n  text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\n}\n.ol-scale-text {\n  position: absolute;\n  font-size: 14px;\n  text-align: center;\n  bottom: 25px;\n  color: #000000;\n  text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\n}\n.ol-scale-singlebar {\n  position: relative;\n  height: 10px;\n  z-Index: 9;\n  box-sizing: border-box;\n  border: 1px solid black;\n}\n\n.ol-unsupported {\n  display: none;\n}\n.ol-viewport, .ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n.ol-control {\n  position: absolute;\n  background-color: rgba(255,255,255,0.4);\n  border-radius: 4px;\n  padding: 2px;\n}\n.ol-control:hover {\n  background-color: rgba(255,255,255,0.6);\n}\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: white;\n  font-size: 1.14em;\n  font-weight: bold;\n  text-decoration: none;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: rgba(0,60,136,0.5);\n  border: none;\n  border-radius: 2px;\n}\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  font-size: 1.2em;\n  will-change: transform;\n}\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  background-color: rgba(0,60,136,0.7);\n}\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 0 .5em;\n  color: #000;\n  text-shadow: 0 0 2px #fff;\n}\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n}\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n.ol-attribution ul, .ol-attribution button {\n  display: inline-block;\n}\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n.ol-attribution:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n}\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: inline-block;\n}\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid #7b98bc;\n  height: 150px;\n  margin: 2px;\n  width: 150px;\n}\n.ol-overviewmap:not(.ol-collapsed) button{\n  bottom: 1px;\n  left: 2px;\n  position: absolute;\n}\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n.ol-overviewmap:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n.ol-overviewmap-box {\n  border: 2px dotted rgba(0,60,136,0.7);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n'],sourceRoot:""}]);const a=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);n&&o[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},15:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}t.exports=function(t){var i,n,o=(n=4,function(t){if(Array.isArray(t))return t}(i=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}}(i,n)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0}}(i,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[1],s=o[3];if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),h="/*# ".concat(l," */"),u=s.sources.map((function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")}));return[r].concat(u).concat([h]).join("\n")}return[r].join("\n")}},79:function(t){t.exports=function(){"use strict";function t(t,i,o,r,s){e(t,i,o||0,r||t.length-1,s||n)}function e(t,n,o,r,s){for(;r>o;){if(r-o>600){var a=r-o+1,l=n-o+1,h=Math.log(a),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(a-u)/a)*(l-a/2<0?-1:1);e(t,n,Math.max(o,Math.floor(n-l*u/a+c)),Math.min(r,Math.floor(n+(a-l)*u/a+c)),s)}var p=t[n],d=o,f=r;for(i(t,o,n),s(t[r],p)>0&&i(t,o,r);d<f;){for(i(t,d,f),d++,f--;s(t[d],p)<0;)d++;for(;s(t[f],p)>0;)f--}0===s(t[o],p)?i(t,o,f):i(t,++f,r),f<=n&&(o=f+1),n<=f&&(r=f-1)}}function i(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function n(t,e){return t<e?-1:t>e?1:0}var o=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,o){o||(o=g(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r=e;r<i;r++){var s=t.children[r];l(o,t.leaf?n(s):s)}return o}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(e,i,n,o,r){for(var s=[i,n];s.length;)if(!((n=s.pop())-(i=s.pop())<=o)){var a=i+Math.ceil((n-i)/o/2)*o;t(e,a,i,n,r),s.push(i,a,a,n)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var n=this.toBBox,o=[];e;){for(var r=0;r<e.children.length;r++){var s=e.children[r],a=e.leaf?n(s):s;f(t,a)&&(e.leaf?i.push(s):d(t,a)?this._all(s,i):o.push(s))}e=o.pop()}return i},o.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var o=e.children[n],r=e.leaf?this.toBBox(o):o;if(f(t,r)){if(e.leaf||d(t,r))return!0;i.push(o)}}e=i.pop()}return!1},o.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},o.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},o.prototype.clear=function(){return this.data=g([]),this},o.prototype.remove=function(t,e){if(!t)return this;for(var i,n,o,s=this.data,a=this.toBBox(t),l=[],h=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],i=h.pop(),o=!0),s.leaf){var u=r(t,s.children,e);if(-1!==u)return s.children.splice(u,1),l.push(s),this._condense(l),this}o||s.leaf||!d(s,a)?n?(i++,s=n.children[i],o=!1):s=null:(l.push(s),h.push(i),i=0,n=s,s=s.children[0])}return this},o.prototype.toBBox=function(t){return t},o.prototype.compareMinX=function(t,e){return t.minX-e.minX},o.prototype.compareMinY=function(t,e){return t.minY-e.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(t){return this.data=t,this},o.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},o.prototype._build=function(t,e,i,n){var o,r=i-e+1,a=this._maxEntries;if(r<=a)return s(o=g(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,n-1))),(o=g([])).leaf=!1,o.height=n;var l=Math.ceil(r/a),h=l*Math.ceil(Math.sqrt(a));_(t,e,i,h,this.compareMinX);for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i);_(t,u,c,l,this.compareMinY);for(var p=u;p<=c;p+=l){var d=Math.min(p+l-1,c);o.children.push(this._build(t,p,d,n-1))}}return s(o,this.toBBox),o},o.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var o=1/0,r=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],h=c(l),u=(p=t,d=l,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-h);u<r?(r=u,o=h<o?h:o,s=l):u===r&&h<o&&(o=h,s=l)}e=s||e.children[0]}var p,d;return e},o.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),o=[],r=this._chooseSubtree(n,this.data,e,o);for(r.children.push(t),l(r,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},o.prototype._split=function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var r=this._chooseSplitIndex(i,o,n),a=g(i.children.splice(r,i.children.length-r));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},o.prototype._splitRoot=function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(t,e,i){for(var n,o=1/0,r=1/0,s=e;s<=i-e;s++){var l=a(t,0,s,this.toBBox),h=a(t,s,i,this.toBBox),u=(d=l,f=h,g=void 0,_=void 0,y=void 0,m=void 0,g=Math.max(d.minX,f.minX),_=Math.max(d.minY,f.minY),y=Math.min(d.maxX,f.maxX),m=Math.min(d.maxY,f.maxY),Math.max(0,y-g)*Math.max(0,m-_)),p=c(l)+c(h);u<o?(o=u,n=s,r=p<r?p:r):u===o&&p<r&&(r=p,n=s)}var d,f,g,_,y,m;return n||i-e},o.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:h,o=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},o.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var o=this.toBBox,r=a(t,0,e,o),s=a(t,i-e,i,o),h=p(r)+p(s),u=e;u<i-e;u++){var c=t.children[u];l(r,t.leaf?o(c):c),h+=p(r)}for(var d=i-e-1;d>=e;d--){var f=t.children[d];l(s,t.leaf?o(f):f),h+=p(s)}return h},o.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)l(e[n],t)},o.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():s(t[e],this.toBBox)},o}()},379:(t,e,i)=>{"use strict";var n,o=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),r=[];function s(t){for(var e=-1,i=0;i<r.length;i++)if(r[i].identifier===t){e=i;break}return e}function a(t,e){for(var i={},n=[],o=0;o<t.length;o++){var a=t[o],l=e.base?a[0]+e.base:a[0],h=i[l]||0,u="".concat(l," ").concat(h);i[l]=h+1;var c=s(u),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==c?(r[c].references++,r[c].updater(p)):r.push({identifier:u,updater:g(p,e),references:1}),n.push(u)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var h,u=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function c(t,e,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function p(t,e,i){var n=i.css,o=i.media,r=i.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var d=null,f=0;function g(t,e){var i,n,o;if(e.singleton){var r=f++;i=d||(d=l(e)),n=c.bind(null,i,r,!1),o=c.bind(null,i,r,!0)}else i=l(e),n=p.bind(null,i,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var i=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var o=s(i[n]);r[o].references--}for(var l=a(t,e),h=0;h<i.length;h++){var u=s(i[h]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}i=l}}}},742:(t,e,i)=>{"use strict";var n=i(379),o=i.n(n),r=i(788);o()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;const s="Point",a="LineString",l="Polygon",h="MultiPoint",u="MultiLineString",c="MultiPolygon",p="GeometryCollection",d="Circle",f=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),g="propertychange",_=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function y(t,e){return t>e?1:t<e?-1:0}function m(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var o=void 0;if(i>0){for(o=1;o<n;++o)if(t[o]<e)return o-1}else if(i<0){for(o=1;o<n;++o)if(t[o]<=e)return o}else for(o=1;o<n;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return n-1}function v(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function C(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,o=0;o<n;o++)t[t.length]=i[o]}function x(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function A(){return!0}function E(){return!1}function w(){}var S="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,o=arguments.length;n<o;++n){var r=arguments[n];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])}return i};function b(t){for(var e in t)delete t[e]}var T="function"==typeof Object.values?Object.values:function(t){var e=[];for(var i in t)e.push(t[i]);return e};function R(t){var e;for(e in t)return!1;return!e}var P,O=(P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const I=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return O(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new f(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var n,o=this.listeners_&&this.listeners_[i];if(o){var r=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});i in r||(r[i]=0,s[i]=0),++r[i];for(var a=0,l=o.length;a<l;++a)if(!1===(n="handleEvent"in o[a]?o[a].handleEvent(e):o[a].call(this,e))||e.propagationStopped){n=!1;break}if(--r[i],0===r[i]){var h=s[i];for(delete s[i];h--;)this.removeEventListener(i,w);delete r[i]}return n}},e.prototype.disposeInternal=function(){this.listeners_&&b(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var i=this.listeners_&&this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=w,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(_),F="change",L="contextmenu",M="click",k="keydown",D="keypress",j="resize",G="touchmove",B="wheel";function z(t,e,i,n,o){if(n&&n!==t&&(i=i.bind(n)),o){var r=i;i=function(){t.removeEventListener(e,i),r.apply(this,arguments)}}var s={target:t,type:e,listener:i};return t.addEventListener(e,i),s}function N(t,e,i,n){return z(t,e,i,n,!0)}function W(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),b(t))}var V=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Y(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)W(t[e]);else W(t)}const K=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return V(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(F)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=z(this,t[o],e);return n}return z(this,t,e)},e.prototype.once=function(t,e){var i;if(Array.isArray(t)){var n=t.length;i=new Array(n);for(var o=0;o<n;++o)i[o]=N(this,t[o],e)}else i=N(this,t,e);return e.ol_key=i,i},e.prototype.un=function(t,e){var i=e.ol_key;if(i)Y(i);else if(Array.isArray(t))for(var n=0,o=t.length;n<o;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(I);function X(){return function(){throw new Error("Unimplemented abstract method.")}()}var U=0;function Z(t){return t.ol_uid||(t.ol_uid=String(++U))}var H=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),q=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.key=i,o.oldValue=n,o}return H(e,t),e}(f),J=function(t){function e(e){var i=t.call(this)||this;return Z(i),i.values_=null,void 0!==e&&i.setProperties(e),i}return H(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&S({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var i;i=$(t),this.dispatchEvent(new q(i,t,e)),i=g,this.dispatchEvent(new q(i,t,e))},e.prototype.set=function(t,e,i){var n=this.values_||(this.values_={});if(i)n[t]=e;else{var o=n[t];n[t]=e,o!==e&&this.notify(t,o)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],R(this.values_)&&(this.values_=null),e||this.notify(t,i)}},e}(K),Q={};function $(t){return Q.hasOwnProperty(t)?Q[t]:Q[t]="change:"+t}const tt=J;var et={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},it={};it[et.DEGREES]=2*Math.PI*6370997/360,it[et.FEET]=.3048,it[et.METERS]=1,it[et.USFEET]=1200/3937;const nt=et;var ot=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const rt=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/v"+"6.4.3".split("-")[0]+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return ot(e,t),e}(Error);function st(t,e){if(!t)throw new rt(e)}var at=new Array(6);function lt(t){return ut(t,1,0,0,1,0,0)}function ht(t,e){var i=t[0],n=t[1],o=t[2],r=t[3],s=t[4],a=t[5],l=e[0],h=e[1],u=e[2],c=e[3],p=e[4],d=e[5];return t[0]=i*l+o*h,t[1]=n*l+r*h,t[2]=i*u+o*c,t[3]=n*u+r*c,t[4]=i*p+o*d+s,t[5]=n*p+r*d+a,t}function ut(t,e,i,n,o,r,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=o,t[4]=r,t[5]=s,t}function ct(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function pt(t,e,i){return ht(t,ut(at,e,0,0,i,0,0))}function dt(t,e,i,n,o,r,s,a){var l=Math.sin(r),h=Math.cos(r);return t[0]=n*h,t[1]=o*l,t[2]=-n*l,t[3]=o*h,t[4]=s*n*h-a*n*l+e,t[5]=s*o*l+a*o*h+i,t}function ft(t,e){var i,n=(i=e)[0]*i[3]-i[1]*i[2];st(0!==n,32);var o=e[0],r=e[1],s=e[2],a=e[3],l=e[4],h=e[5];return t[0]=a/n,t[1]=-r/n,t[2]=-s/n,t[3]=o/n,t[4]=(s*h-a*l)/n,t[5]=-(o*h-r*l)/n,t}function gt(t){return"matrix("+t.join(", ")+")"}const _t="top-left";function yt(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,n=t.length;i<n;++i)Pt(e,t[i]);return e}function mt(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function vt(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Ct(t,e,i){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*o}function xt(t,e){return Et(t,e[0],e[1])}function At(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Et(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function wt(t,e){var i=t[0],n=t[1],o=t[2],r=t[3],s=e[0],a=e[1],l=0;return s<i?l|=16:s>o&&(l|=4),a<n?l|=8:a>r&&(l|=2),0===l&&(l=1),l}function St(t,e,i,n,o){return o?(o[0]=t,o[1]=e,o[2]=i,o[3]=n,o):[t,e,i,n]}function bt(t){return St(1/0,1/0,-1/0,-1/0,t)}function Tt(t,e){var i=t[0],n=t[1];return St(i,n,i,n,e)}function Rt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Pt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Ot(t,e,i,n,o){for(;i<n;i+=o)It(t,e[i],e[i+1]);return t}function It(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function Ft(t,e){var i;return(i=e(Mt(t)))||(i=e(kt(t)))||(i=e(Wt(t)))?i:(i=e(Nt(t)))||!1}function Lt(t){var e=0;return Kt(t)||(e=Vt(t)*Bt(t)),e}function Mt(t){return[t[0],t[1]]}function kt(t){return[t[2],t[1]]}function Dt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function jt(t,e){var i;return"bottom-left"===e?i=Mt(t):"bottom-right"===e?i=kt(t):e===_t?i=Nt(t):"top-right"===e?i=Wt(t):st(!1,13),i}function Gt(t,e,i,n,o){var r=e*n[0]/2,s=e*n[1]/2,a=Math.cos(i),l=Math.sin(i),h=r*a,u=r*l,c=s*a,p=s*l,d=t[0],f=t[1],g=d-h+p,_=d-h-p,y=d+h-p,m=d+h+p,v=f-u-c,C=f-u+c,x=f+u+c,A=f+u-c;return St(Math.min(g,_,y,m),Math.min(v,C,x,A),Math.max(g,_,y,m),Math.max(v,C,x,A),o)}function Bt(t){return t[3]-t[1]}function zt(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return Yt(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):bt(n),n}function Nt(t){return[t[0],t[3]]}function Wt(t){return[t[2],t[3]]}function Vt(t){return t[2]-t[0]}function Yt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Kt(t){return t[2]<t[0]||t[3]<t[1]}const Xt=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||it[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();function Ut(t,e,i){return Math.min(Math.max(t,e),i)}var Zt="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},Ht="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function qt(t,e,i,n,o,r){var s=o-i,a=r-n;if(0!==s||0!==a){var l=((t-i)*s+(e-n)*a)/(s*s+a*a);l>1?(i=o,n=r):l>0&&(i+=s*l,n+=a*l)}return Jt(t,e,i,n)}function Jt(t,e,i,n){var o=i-t,r=n-e;return o*o+r*r}function Qt(t){return 180*t/Math.PI}function $t(t){return t*Math.PI/180}function te(t,e){var i=t%e;return i*e<0?i+e:i}function ee(t,e,i){return t+i*(e-t)}var ie=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ne=6378137,oe=Math.PI*ne,re=[-oe,-oe,oe,oe],se=[-180,-85,180,85],ae=function(t){function e(e){return t.call(this,{code:e,units:nt.METERS,extent:re,global:!0,worldExtent:se,getPointResolution:function(t,e){return t/Zt(e[1]/ne)}})||this}return ie(e,t),e}(Xt),le=[new ae("EPSG:3857"),new ae("EPSG:102100"),new ae("EPSG:102113"),new ae("EPSG:900913"),new ae("urn:ogc:def:crs:EPSG:6.18:3:3857"),new ae("urn:ogc:def:crs:EPSG::3857"),new ae("http://www.opengis.net/gml/srs/epsg.xml#3857")];var he=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ue=[-180,-90,180,90],ce=6378137*Math.PI/180,pe=function(t){function e(e,i){return t.call(this,{code:e,units:nt.DEGREES,extent:ue,axisOrientation:i,global:!0,metersPerUnit:ce,worldExtent:ue})||this}return he(e,t),e}(Xt),de=[new pe("CRS:84"),new pe("EPSG:4326","neu"),new pe("urn:ogc:def:crs:EPSG::4326","neu"),new pe("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new pe("urn:ogc:def:crs:OGC:1.3:CRS84"),new pe("urn:ogc:def:crs:OGC:2:84"),new pe("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new pe("urn:x-ogc:def:crs:EPSG:4326","neu")],fe={},ge={};function _e(t,e,i){var n=t.getCode(),o=e.getCode();n in ge||(ge[n]={}),ge[n][o]=i}var ye=6371008.8;function me(t,e,i){var n=i||ye,o=$t(t[1]),r=$t(e[1]),s=(r-o)/2,a=$t(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(o)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function ve(t,e,i,n){var o=n||ye,r=$t(t[1]),s=$t(t[0]),a=e/o,l=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(i));return[Qt(s+Math.atan2(Math.sin(i)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(l))),Qt(l)]}function Ce(t,e,i){var n;if(void 0!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];n=e}else n=t.slice();return n}function xe(t,e,i){if(void 0!==e&&t!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];t=e}return t}function Ae(t){!function(t,e){fe[t]=e}(t.getCode(),t),_e(t,t,Ce)}function Ee(t){return"string"==typeof t?fe[t]||null:t||null}function we(t,e,i,n){var o,r=(t=Ee(t)).getPointResolutionFunc();if(r)o=r(e,i),n&&n!==t.getUnits()&&(s=t.getMetersPerUnit())&&(o=o*s/it[n]);else if(t.getUnits()==nt.DEGREES&&!n||n==nt.DEGREES)o=e;else{var s,a=Re(t,Ee("EPSG:4326")),l=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];o=(me((l=a(l,l,2)).slice(0,2),l.slice(2,4))+me(l.slice(4,6),l.slice(6,8)))/2,void 0!==(s=n?it[n]:t.getMetersPerUnit())&&(o/=s)}return o}function Se(t){!function(t){t.forEach(Ae)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&_e(e,t,Ce)}))}))}function be(t,e){return t?"string"==typeof t?Ee(t):t:Ee(e)}function Te(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Re(t,e)===Ce)&&i}function Re(t,e){var i=function(t,e){var i;return t in ge&&e in ge[t]&&(i=ge[t][e]),i}(t.getCode(),e.getCode());return i||(i=xe),i}function Pe(t,e){return Re(Ee(t),Ee(e))}function Oe(t,e,i){return Pe(e,i)(t,void 0,t.length)}function Ie(t,e,i,n){return function(t,e,i,n){var o=[];if(n>1)for(var r=t[2]-t[0],s=t[3]-t[1],a=0;a<n;++a)o.push(t[0]+r*a/n,t[1],t[2],t[1]+s*a/n,t[2]-r*a/n,t[3],t[0],t[3]-s*a/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);for(var l=[],h=[],u=(a=0,o.length);a<u;a+=2)l.push(o[a]),h.push(o[a+1]);return function(t,e,i){return St(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(l,h,i)}(t,Pe(e,i),void 0,n)}var Fe,Le,Me,ke=null;function De(){return ke}function je(t,e){return t}function Ge(t,e){return t}function Be(t,e){return t}function ze(t,e){return t}function Ne(t,e,i,n,o,r){for(var s=r||[],a=0,l=e;l<i;l+=n){var h=t[l],u=t[l+1];s[a++]=o[0]*h+o[2]*u+o[4],s[a++]=o[1]*h+o[3]*u+o[5]}return r&&s.length!=a&&(s.length=a),s}function We(t,e,i,n,o,r,s){for(var a=s||[],l=Math.cos(o),h=Math.sin(o),u=r[0],c=r[1],p=0,d=e;d<i;d+=n){var f=t[d]-u,g=t[d+1]-c;a[p++]=u+f*l-g*h,a[p++]=c+f*h+g*l;for(var _=d+2;_<d+n;++_)a[p++]=t[_]}return s&&a.length!=p&&(a.length=p),a}Se(le),Se(de),Fe=le,Le=function(t,e,i){var n=t.length,o=i>1?i:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(n));for(var s=oe,a=0;a<n;a+=o){r[a]=s*t[a]/180;var l=ne*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));l>s?l=s:l<-s&&(l=-s),r[a+1]=l}return r},Me=function(t,e,i){var n=t.length,o=i>1?i:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(n));for(var s=0;s<n;s+=o)r[s]=180*t[s]/oe,r[s+1]=360*Math.atan(Math.exp(t[s+1]/ne))/Math.PI-90;return r},de.forEach((function(t){Fe.forEach((function(e){_e(t,e,Le),_e(e,t,Me)}))}));var Ve=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ye=[1,0,0,1,0,0];const Ke=function(t){function e(){var e,i,n,o,r,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)},r=!1,function(){var t=Array.prototype.slice.call(arguments);return r&&this===o&&x(t,n)||(r=!0,o=this,n=t,i=e.apply(this,arguments)),i}),s}return Ve(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return X()},e.prototype.closestPointXY=function(t,e,i,n){return X()},e.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return X()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&bt(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){X()},e.prototype.scale=function(t,e,i){X()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return X()},e.prototype.getType=function(){return X()},e.prototype.applyTransform=function(t){X()},e.prototype.intersectsExtent=function(t){return X()},e.prototype.translate=function(t,e){X()},e.prototype.transform=function(t,e){var i=Ee(t),n=i.getUnits()==nt.TILE_PIXELS?function(t,n,o){var r=i.getExtent(),s=i.getWorldExtent(),a=Bt(s)/Bt(r);return dt(Ye,s[0],s[3],a,-a,0,0,0),Ne(t,0,t.length,o,Ye,n),Pe(i,e)(t,n,o)}:Pe(i,e);return this.applyTransform(n),this},e}(tt),Xe="XY",Ue="XYZM";var Ze=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function He(t){var e;return t==Xe?e=2:"XYZ"==t||"XYM"==t?e=3:t==Ue&&(e=4),e}const qe=function(t){function e(){var e=t.call(this)||this;return e.layout=Xe,e.stride=2,e.flatCoordinates=null,e}return Ze(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,i=this.flatCoordinates.length,n=this.stride,Ot(bt(t),e,0,i,n);var e,i,n},e.prototype.getCoordinates=function(){return X()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=He(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){X()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=He(t);else{for(var o=0;o<i;++o){if(0===e.length)return this.layout=Xe,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=Xe:3==t?e="XYZ":4==t&&(e=Ue),e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();We(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var o=i;o||(o=Dt(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();!function(t,e,i,n,o,r,s,a){for(var l=a||[],h=s[0],u=s[1],c=0,p=0;p<i;p+=n){var d=t[p]-h,f=t[p+1]-u;l[c++]=h+o*d,l[c++]=u+r*f;for(var g=p+2;g<p+n;++g)l[c++]=t[g]}a&&l.length!=c&&(l.length=c)}(r,0,r.length,s,t,n,o,r),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,o,r,s){for(var a=s||[],l=0,h=0;h<i;h+=n){a[l++]=t[h]+o,a[l++]=t[h+1]+r;for(var u=h+2;u<h+n;++u)a[l++]=t[u]}s&&a.length!=l&&(a.length=l)}(i,0,i.length,n,t,e,i),this.changed()}},e}(Ke);function Je(t,e,i,n){for(var o=0,r=i.length;o<r;++o)for(var s=i[o],a=0;a<n;++a)t[e++]=s[a];return e}var Qe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const $e=function(t){function e(e,i){var n=t.call(this)||this;return n.setCoordinates(e,i),n}return Qe(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var o=this.flatCoordinates,r=Jt(t,e,o[0],o[1]);if(r<n){for(var s=this.stride,a=0;a<s;++a)i[a]=o[a];return i.length=s,r}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Tt(this.flatCoordinates,t)},e.prototype.getType=function(){return s},e.prototype.intersectsExtent=function(t){return Et(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,i,n){for(var o=0,r=i.length;o<r;++o)t[e++]=i[o];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(qe),ti={};function ei(t,e,i){return t.on(e,i)}ti.obj=function(t){return t},ti.supportsImageRenderingPixelatedResult_=void 0,ti.imageRenderingValueResult_=void 0,ti.supportsImageRenderingPixelated=function(){if(void 0===ti.supportsImageRenderingPixelatedResult_){const t=document.createElement("canvas");t.setAttribute("style","image-rendering: -moz-crisp-edges; image-rendering: pixelated;");const e=t.style.imageRendering;ti.supportsImageRenderingPixelatedResult_=!!e,ti.supportsImageRenderingPixelatedResult_&&(ti.imageRenderingValueResult_=e)}return ti.supportsImageRenderingPixelatedResult_},ti.imageRenderingValue=function(){return ti.supportsImageRenderingPixelated(),ti.imageRenderingValueResult_||""},ti.getSourceProjection=function(t){return t.get("olcs.projection")||t.getProjection()};let ii=0;function ni(t){return t.olcs_uid||(t.olcs_uid=++ii)}function oi(t){const e=Cesium.GroundPolylinePrimitive;return e&&e.isSupported(t)}const ri=ti;function si(t){return Math.pow(t,3)}function ai(t){return 1-si(1-t)}function li(t){return 3*t*t-2*t*t*t}function hi(t){return t}const ui="opacity",ci="visible",pi="extent",di="zIndex",fi="maxResolution",gi="minResolution",_i="maxZoom",yi="minZoom",mi="source";var vi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ci=function(t){function e(e){var i=t.call(this)||this,n=S({},e);return n.opacity=void 0!==e.opacity?e.opacity:1,st("number"==typeof n.opacity,64),n.visible=void 0===e.visible||e.visible,n.zIndex=e.zIndex,n.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,n.minResolution=void 0!==e.minResolution?e.minResolution:0,n.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,n.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,i.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return vi(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=Ut(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i?i:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return X()},e.prototype.getLayerStatesArray=function(t){return X()},e.prototype.getExtent=function(){return this.get(pi)},e.prototype.getMaxResolution=function(){return this.get(fi)},e.prototype.getMinResolution=function(){return this.get(gi)},e.prototype.getMinZoom=function(){return this.get(yi)},e.prototype.getMaxZoom=function(){return this.get(_i)},e.prototype.getOpacity=function(){return this.get(ui)},e.prototype.getSourceState=function(){return X()},e.prototype.getVisible=function(){return this.get(ci)},e.prototype.getZIndex=function(){return this.get(di)},e.prototype.setExtent=function(t){this.set(pi,t)},e.prototype.setMaxResolution=function(t){this.set(fi,t)},e.prototype.setMinResolution=function(t){this.set(gi,t)},e.prototype.setMaxZoom=function(t){this.set(_i,t)},e.prototype.setMinZoom=function(t){this.set(yi,t)},e.prototype.setOpacity=function(t){st("number"==typeof t,64),this.set(ui,t)},e.prototype.setVisible=function(t){this.set(ci,t)},e.prototype.setZIndex=function(t){this.set(di,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(tt),xi="precompose",Ai="rendercomplete",Ei="undefined",wi="ready";var Si=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function bi(t,e){if(!t.visible)return!1;var i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const Ti=function(t){function e(e){var i=this,n=S({},e);delete n.source,(i=t.call(this,n)||this).mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,e.render&&(i.render=e.render),e.map&&i.setMap(e.map),i.addEventListener($(mi),i.handleSourcePropertyChange_);var o=e.source?e.source:null;return i.setSource(o),i}return Si(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(mi)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Ei},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(W(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=z(t,F,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(W(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(W(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=z(t,xi,(function(t){var e=t.frameState.layerStatesArray,i=this.getLayerState(!1);st(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=z(this,F,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(mi,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(Ci),Ri="preload",Pi="useInterimTilesOnError";var Oi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ii=function(t){function e(e){var i=this,n=e||{},o=S({},n);return delete o.preload,delete o.useInterimTilesOnError,(i=t.call(this,o)||this).setPreload(void 0!==n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return Oi(e,t),e.prototype.getPreload=function(){return this.get(Ri)},e.prototype.setPreload=function(t){this.set(Ri,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Pi)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Pi,t)},e}(Ti);var Fi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Li=function(t){function e(e){var i=t.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=e,i}return Fi(e,t),e.prototype.getFeatures=function(t){return X()},e.prototype.prepareFrame=function(t){return X()},e.prototype.renderFrame=function(t,e){return X()},e.prototype.loadedTileCallback=function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,o){var r=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,o,r)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){},e.prototype.getDataAtPixel=function(t,e,i){return X()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(F,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==wi&&t.changed()},e}(K);var Mi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ki=function(t){function e(e,i,n,o){var r=t.call(this,e)||this;return r.inversePixelTransform=i,r.frameState=n,r.context=o,r}return Mi(e,t),e}(f);var Di="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",ji=-1!==Di.indexOf("firefox"),Gi=(-1!==Di.indexOf("safari")&&Di.indexOf("chrom"),-1!==Di.indexOf("webkit")&&-1==Di.indexOf("edge")),Bi=-1!==Di.indexOf("macintosh"),zi="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ni="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Wi="undefined"!=typeof Image&&Image.prototype.decode,Vi=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function Yi(t,e,i){var n=i&&i.length?i.shift():Ni?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function Ki(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+(parseInt(i.marginLeft,10)+parseInt(i.marginRight,10))}function Xi(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+(parseInt(i.marginTop,10)+parseInt(i.marginBottom,10))}function Ui(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function Zi(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Hi(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var qi="ol-hidden",Ji="ol-control",Qi=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),$i=["style","variant","weight","size","lineHeight","family"],tn=function(t){var e=t.match(Qi);if(!e)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=$i.length;n<o;++n){var r=e[n+1];void 0!==r&&(i[$i[n]]=r)}return i.families=i.family.split(/,\s?/),i},en="10px sans-serif",nn="#000",on="round",rn=[],sn="round",an="#000",ln="center",hn="middle",un=[0,0,0,0],cn=new tt;(new I).setSize=function(){console.warn("labelCache is deprecated.")};var pn,dn,fn,gn=null,_n={},yn=function(){var t,e,i="32px ",n=["monospace","serif"],o=n.length,r="wmytzilWMYTZIL@#/&?$%10";function s(t,s,a){for(var l=!0,h=0;h<o;++h){var u=n[h];if(e=Cn(t+" "+s+" "+i+u,r),a!=u){var c=Cn(t+" "+s+" "+i+a+","+u,r);l=l&&c!=e}}return!!l}function a(){for(var e=!0,i=cn.getKeys(),n=0,o=i.length;n<o;++n){var r=i[n];cn.get(r)<100&&(s.apply(this,r.split("\n"))?(b(_n),gn=null,pn=void 0,cn.set(r,100)):(cn.set(r,cn.get(r)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var i=tn(e);if(i)for(var n=i.families,o=0,r=n.length;o<r;++o){var l=n[o],h=i.style+"\n"+i.weight+"\n"+l;void 0===cn.get(h)&&(cn.set(h,100,!0),s(i.style,i.weight,l)||(cn.set(h,0,!0),void 0===t&&(t=setInterval(a,32))))}}}(),mn=(fn=_n,function(t){var e=fn[t];if(null==e)if(Ni){var i=tn(t),n=vn(t,"g"),o=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);_n[t]=o*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else dn||((dn=document.createElement("div")).innerHTML="M",dn.style.margin="0 !important",dn.style.padding="0 !important",dn.style.position="absolute !important",dn.style.left="-99999px !important"),dn.style.font=t,document.body.appendChild(dn),e=dn.offsetHeight,fn[t]=e,document.body.removeChild(dn);return e});function vn(t,e){return gn||(gn=Yi(1,1)),t!=pn&&(gn.font=t,pn=gn.font),gn.measureText(e)}function Cn(t,e){return vn(t,e).width}function xn(t,e,i){if(e in i)return i[e];var n=Cn(t,e);return i[e]=n,n}function An(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}function En(t,e,i,n,o,r,s,a,l,h,u){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,h),t.scale(u[0],u[1]),function(t,e){for(var i=t.contextInstructions,n=0,o=i.length;n<o;n+=2)Array.isArray(i[n+1])?e[i[n]].apply(e,i[n+1]):e[i[n]]=i[n+1]}(n,t)):u[0]<0||u[1]<0?(t.translate(l,h),t.scale(u[0],u[1]),t.drawImage(n,o,r,s,a,0,0,s,a)):t.drawImage(n,o,r,s,a,l,h,s*u[0],a*u[1]),t.restore()}var wn=null;function Sn(t){return Ni?gt(t):(wn||(wn=Yi(1,1).canvas),wn.style.transform=gt(t),wn.style.transform)}var bn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Tn=function(t){function e(e){var i=t.call(this,e)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i}return bn(e,t),e.prototype.useContainer=function(t,e,i){var n,o,r=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===r&&(a=t.firstElementChild)instanceof HTMLCanvasElement&&(o=a.getContext("2d")),!o||0!==o.canvas.width&&o.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=o,this.containerReused=!0),!this.container){(n=document.createElement("div")).className=r;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var a=(o=Yi()).canvas;n.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=o}},e.prototype.clip=function(t,e,i){var n=e.pixelRatio,o=e.size[0]*n/2,r=e.size[1]*n/2,s=e.viewState.rotation,a=Nt(i),l=Wt(i),h=kt(i),u=Mt(i);ct(e.coordinateToPixelTransform,a),ct(e.coordinateToPixelTransform,l),ct(e.coordinateToPixelTransform,h),ct(e.coordinateToPixelTransform,u),t.save(),An(t,-s,o,r),t.beginPath(),t.moveTo(a[0]*n,a[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(u[0]*n,u[1]*n),t.clip(),An(t,s,o,r)},e.prototype.clipUnrotated=function(t,e,i){var n=Nt(i),o=Wt(i),r=kt(i),s=Mt(i);ct(e.coordinateToPixelTransform,n),ct(e.coordinateToPixelTransform,o),ct(e.coordinateToPixelTransform,r),ct(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;ct(a,n),ct(a,o),ct(a,r),ct(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,i){var n=this.getLayer();if(n.hasListener(t)){var o=new ki(t,this.inversePixelTransform,i,e);n.dispatchEvent(o)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,i,n,o,r,s){var a=o/2,l=r/2,h=n/e,u=-h,c=-t[0]+s,p=-t[1];return dt(this.tempTransform,a,l,h,u,-i,c,p)},e.prototype.getDataAtPixel=function(t,e,i){var n,o=ct(this.inversePixelTransform,t.slice()),r=this.context;try{var s=Math.round(o[0]),a=Math.round(o[1]),l=document.createElement("canvas"),h=l.getContext("2d");l.width=1,l.height=1,h.clearRect(0,0,1,1),h.drawImage(r.canvas,s,a,1,1,0,0,1,1),n=h.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(Li);var Rn=function(){function t(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function Pn(t,e,i,n,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=n,o):new Rn(t,e,i,n)}const On=Rn;var In=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fn=function(t){function e(e){var i=t.call(this,e)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.tmpTileRange_=new On(0,0,0,0),i}return In(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!n},e.prototype.getTile=function(t,e,i,n){var o=n.pixelRatio,r=n.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,i,o,r);return 3==a.getState()&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(2)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,i,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,i,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var i=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,r=n.resolution,s=n.center,a=n.rotation,l=t.pixelRatio,h=this.getLayer(),u=h.getSource(),c=u.getRevision(),p=u.getTileGridForProjection(o),d=p.getZForResolution(r,u.zDirection),f=p.getResolution(d),g=t.extent,_=i.extent&&ze(i.extent);_&&(g=zt(g,ze(i.extent)));var m=u.getTilePixelRatio(l),v=Math.round(t.size[0]*m),C=Math.round(t.size[1]*m);if(a){var x=Math.round(Math.sqrt(v*v+C*C));v=x,C=x}var A=f*v/2/m,E=f*C/2/m,w=[s[0]-A,s[1]-E,s[0]+A,s[1]+E],b=p.getTileRangeForExtentAndZ(g,d),T={};T[d]={};var R=this.createLoadedTileFinder(u,o,T),P=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;for(var I=b.minX;I<=b.maxX;++I)for(var F=b.minY;F<=b.maxY;++F){var L=this.getTile(d,I,F,t);if(this.isDrawableTile(L)){var M=Z(this);if(2==L.getState()){T[d][L.tileCoord.toString()]=L;var k=L.inTransition(M);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(L)||(this.newTiles_=!0)}if(1===L.getAlpha(M,t.time))continue}var D=p.getTileCoordChildTileRange(L.tileCoord,O,P),j=!1;D&&(j=R(d+1,D)),j||p.forEachTileCoordParentTileRange(L.tileCoord,R,O,P)}var G=f/r;dt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,a,-v/2,-C/2);var B=Sn(this.pixelTransform);this.useContainer(e,B,i.opacity);var z=this.context,N=z.canvas;ft(this.inversePixelTransform,this.pixelTransform),dt(this.tempTransform,v/2,C/2,G,G,0,-v/2,-C/2),N.width!=v||N.height!=C?(N.width=v,N.height=C):this.containerReused||z.clearRect(0,0,v,C),_&&this.clipUnrotated(z,t,_),S(z,u.getContextOptions()),this.preRender(z,t),this.renderedTiles.length=0;var W,V,Y,K=Object.keys(T).map(Number);K.sort(y),1!==i.opacity||this.containerReused&&!u.getOpaque(t.viewState.projection)?(W=[],V=[]):K=K.reverse();for(var X=K.length-1;X>=0;--X){var U=K[X],H=u.getTilePixelSize(U,l,o),q=p.getResolution(U)/f,J=H[0]*q*G,Q=H[1]*q*G,$=p.getTileCoordForCoordAndZ(Nt(w),U),tt=p.getTileCoordExtent($),et=ct(this.tempTransform,[m*(tt[0]-w[0])/f,m*(w[3]-tt[3])/f]),it=m*u.getGutterForProjection(o),nt=T[U];for(var ot in nt){var rt=(L=nt[ot]).tileCoord,st=et[0]-($[1]-rt[1])*J,at=Math.round(st+J),lt=et[1]-($[2]-rt[2])*Q,ht=Math.round(lt+Q),ut=at-(I=Math.round(st)),pt=ht-(F=Math.round(lt)),gt=d===U;if(!(k=gt&&1!==L.getAlpha(Z(this),t.time)))if(W){z.save(),Y=[I,F,I+ut,F,I+ut,F+pt,I,F+pt];for(var _t=0,yt=W.length;_t<yt;++_t)if(d!==U&&U<V[_t]){var mt=W[_t];z.beginPath(),z.moveTo(Y[0],Y[1]),z.lineTo(Y[2],Y[3]),z.lineTo(Y[4],Y[5]),z.lineTo(Y[6],Y[7]),z.moveTo(mt[6],mt[7]),z.lineTo(mt[4],mt[5]),z.lineTo(mt[2],mt[3]),z.lineTo(mt[0],mt[1]),z.clip()}W.push(Y),V.push(U)}else z.clearRect(I,F,ut,pt);this.drawTileImage(L,t,I,F,ut,pt,it,gt,i.opacity),W&&!k&&z.restore(),this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,u,L)}}return this.renderedRevision=c,this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!Rt(this.renderedExtent_,w),this.renderedExtent_=w,this.renderedPixelRatio=l,this.renderedProjection=o,this.manageTilePyramid(t,u,p,l,o,g,d,h.getPreload()),this.scheduleExpireCache(t,u),this.postRender(z,t),i.extent&&z.restore(),B!==N.style.transform&&(N.style.transform=B),this.container},e.prototype.drawTileImage=function(t,e,i,n,o,r,s,a,l){var h=this.getTileImage(t);if(h){var u=Z(this),c=a?t.getAlpha(u,e.time):1,p=l*c,d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(h,s,s,h.width-2*s,h.height-2*s,i,n,o,r),d&&this.context.restore(),1!==c?e.animate=!0:a&&t.endTransition(u)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var n=Z(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i){var n=Z(e);n in t||(t[n]={}),t[n][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,i,n,o,r,s,a,l){var h=Z(e);h in t.wantedTiles||(t.wantedTiles[h]={});var u,c,p,d,f,g,_=t.wantedTiles[h],y=t.tileQueue,m=0;for(g=i.getMinZoom();g<=s;++g)for(c=i.getTileRangeForExtentAndZ(r,g,c),p=i.getResolution(g),d=c.minX;d<=c.maxX;++d)for(f=c.minY;f<=c.maxY;++f)s-g<=a?(++m,0==(u=e.getTile(g,d,f,n,o)).getState()&&(_[u.getKey()]=!0,y.isKeyQueued(u.getKey())||y.enqueue([u,h,i.getTileCoordCenter(u.tileCoord),p])),void 0!==l&&l(u)):e.useTile(g,d,f,o);e.updateCacheSize(m,o)},e}(Tn);Fn.prototype.getLayer;const Ln=Fn;var Mn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const kn=function(t){function e(e){return t.call(this,e)||this}return Mn(e,t),e.prototype.createRenderer=function(){return new Ln(this)},e}(Ii);var Dn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const jn=function(t){function e(e){var i=e||{};return t.call(this,i)||this}return Dn(e,t),e}(Ti);var Gn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Bn=function(t){function e(e){var i=t.call(this,e)||this;return i.image_=null,i}return Gn(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,n=t.viewState,o=n.resolution,r=this.getLayer().getSource(),s=t.viewHints,a=t.extent;if(void 0!==e.extent&&(a=zt(a,ze(e.extent,n.projection))),!s[0]&&!s[1]&&!Kt(a))if(r){var l=n.projection,h=r.getImage(a,o,i,l);h&&this.loadImage(h)&&(this.image_=h)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var i=this.image_,n=i.getExtent(),o=i.getResolution(),r=i.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,l=t.viewState,h=l.center,u=l.resolution,c=t.size,p=a*o/(u*r),d=Math.round(c[0]*a),f=Math.round(c[1]*a),g=l.rotation;if(g){var _=Math.round(Math.sqrt(d*d+f*f));d=_,f=_}dt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,g,-d/2,-f/2),ft(this.inversePixelTransform,this.pixelTransform);var y=Sn(this.pixelTransform);this.useContainer(e,y,s.opacity);var m=this.context,v=m.canvas;v.width!=d||v.height!=f?(v.width=d,v.height=f):this.containerReused||m.clearRect(0,0,d,f);var C=!1;if(s.extent){var x=ze(s.extent,l.projection);(C=!At(x,t.extent)&&Yt(x,t.extent))&&this.clipUnrotated(m,t,x)}var A=i.getImage(),E=dt(this.tempTransform,d/2,f/2,p,p,0,r*(n[0]-h[0])/o,r*(h[1]-n[3])/o);this.renderedResolution=o*a/r;var w=E[4],b=E[5],T=A.width*E[0],R=A.height*E[3];if(S(m,this.getLayer().getSource().getContextOptions()),this.preRender(m,t),T>=.5&&R>=.5){var P=s.opacity,O=void 0;1!==P&&(O=this.context.globalAlpha,this.context.globalAlpha=P),this.context.drawImage(A,0,0,+A.width,+A.height,Math.round(w),Math.round(b),Math.round(T),Math.round(R)),1!==P&&(this.context.globalAlpha=O)}return this.postRender(m,t),C&&m.restore(),y!==v.style.transform&&(v.style.transform=y),this.container},e}(Tn);var zn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Nn=function(t){function e(e){return t.call(this,e)||this}return zn(e,t),e.prototype.createRenderer=function(){return new Bn(this)},e}(jn);var Wn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Vn=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.extent=e,r.pixelRatio_=n,r.resolution=i,r.state=o,r}return Wn(e,t),e.prototype.changed=function(){this.dispatchEvent(F)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return X()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){X()},e}(I),Yn=function(){function t(t,e,i,n,o,r){this.sourceProj_=t,this.targetProj_=e;var s={},a=Pe(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Vt(n)==Vt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Vt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Vt(this.targetProj_.getExtent()):null;var l=Nt(i),h=Wt(i),u=kt(i),c=Mt(i),p=this.transformInv_(l),d=this.transformInv_(h),f=this.transformInv_(u),g=this.transformInv_(c),_=10+(r?Math.max(0,Math.ceil(Ht(Lt(i)/(r*r*256*256)))):0);if(this.addQuad_(l,h,u,c,p,d,f,g,_),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach((function(t,e,i){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-y>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-y>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-y>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,i,n,o,r){this.triangles_.push({source:[n,o,r],target:[t,e,i]})},t.prototype.addQuad_=function(t,e,i,n,o,r,s,a,l){var h=yt([o,r,s,a]),u=this.sourceWorldWidth_?Vt(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1,d=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=Vt(yt([t,e,i,n]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&u&&(d=u>.25||d)),!(!d&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3]))||Yt(h,this.maxSourceExtent_)){var f=0;if(!(d||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)d=!0;else if(1!=(f=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=f&&4!=f&&8!=f)return;if(l>0){if(!d){var g=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(g),y=void 0;y=p?(te(o[0],c)+te(s[0],c))/2-te(_[0],c):(o[0]+s[0])/2-_[0];var m=(o[1]+s[1])/2-_[1];d=y*y+m*m>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var v=[(e[0]+i[0])/2,(e[1]+i[1])/2],C=this.transformInv_(v),x=[(n[0]+t[0])/2,(n[1]+t[1])/2],A=this.transformInv_(x);this.addQuad_(t,e,v,x,o,r,C,A,l-1),this.addQuad_(x,v,i,n,A,C,s,a,l-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],w=this.transformInv_(E),S=[(i[0]+n[0])/2,(i[1]+n[1])/2],b=this.transformInv_(S);this.addQuad_(t,E,S,n,o,w,b,a,l-1),this.addQuad_(E,e,i,S,w,r,s,b,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&f)&&this.addTriangle_(t,i,n,o,s,a),0==(14&f)&&this.addTriangle_(t,i,e,o,s,r),f&&(0==(13&f)&&this.addTriangle_(e,n,t,r,a,o),0==(7&f)&&this.addTriangle_(e,n,i,r,a,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,i,n){var o=e.source;Pt(t,o[0]),Pt(t,o[1]),Pt(t,o[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var Kn,Xn="1.3.0",Un={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function Zn(t,e,i,n,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,o)),t.restore()}function Hn(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function qn(t,e,i,n){var o=Oe(i,e,t),r=we(e,n,i),s=e.getMetersPerUnit();void 0!==s&&(r*=s);var a=t.getMetersPerUnit();void 0!==a&&(r/=a);var l=t.getExtent();if(!l||xt(l,o)){var h=we(t,r,o)/r;isFinite(h)&&h>0&&(r/=h)}return r}function Jn(t,e,i,n,o,r,s,a,l,h,u,c){var p=Yi(Math.round(i*t),Math.round(i*e));if(S(p,c),0===l.length)return p.canvas;function d(t){return Math.round(t*i)/i}p.scale(i,i),p.globalCompositeOperation="lighter";var f=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,i){var n,o;n=f,(o=t.extent)[0]<n[0]&&(n[0]=o[0]),o[2]>n[2]&&(n[2]=o[2]),o[1]<n[1]&&(n[1]=o[1]),o[3]>n[3]&&(n[3]=o[3])}));var g=Vt(f),_=Bt(f),y=Yi(Math.round(i*g/n),Math.round(i*_/n));S(y,c);var m=i/n;l.forEach((function(t,e,i){var n=t.extent[0]-f[0],o=-(t.extent[3]-f[3]),r=Vt(t.extent),s=Bt(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,n*m,o*m,r*m,s*m)}));var v=Nt(s);return a.getTriangles().forEach((function(t,e,o){var s=t.source,a=t.target,l=s[0][0],h=s[0][1],u=s[1][0],g=s[1][1],_=s[2][0],m=s[2][1],C=d((a[0][0]-v[0])/r),x=d(-(a[0][1]-v[1])/r),A=d((a[1][0]-v[0])/r),E=d(-(a[1][1]-v[1])/r),w=d((a[2][0]-v[0])/r),S=d(-(a[2][1]-v[1])/r),b=l,T=h;l=0,h=0;var R=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,o=Math.abs(t[i][i]),r=i+1;r<e;r++){var s=Math.abs(t[r][i]);s>o&&(o=s,n=r)}if(0===o)return null;var a=t[n];t[n]=t[i],t[i]=a;for(var l=i+1;l<e;l++)for(var h=-t[l][i]/t[i][i],u=i;u<e+1;u++)i==u?t[l][u]=0:t[l][u]+=h*t[i][u]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*c[p]}return c}([[u-=b,g-=T,0,0,A-C],[_-=b,m-=T,0,0,w-C],[0,0,u,g,E-x],[0,0,_,m,S-x]]);if(R){if(p.save(),p.beginPath(),function(){if(void 0===Kn){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Zn(t,4,5,4,0),Zn(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;Kn=Hn(e,0)||Hn(e,4)||Hn(e,8)}return Kn}()||c===Un){p.moveTo(A,E);for(var P=C-A,O=x-E,I=0;I<4;I++)p.lineTo(A+d((I+1)*P/4),E+d(I*O/3)),3!=I&&p.lineTo(A+d((I+1)*P/4),E+d((I+1)*O/3));p.lineTo(w,S)}else p.moveTo(A,E),p.lineTo(C,x),p.lineTo(w,S);p.clip(),p.transform(R[0],R[2],R[1],R[3],C,x),p.translate(f[0]-b,f[3]-T),p.scale(n/i,-n/i),p.drawImage(y.canvas,0,0),p.restore()}})),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach((function(t,e,i){var n=t.target,o=(n[0][0]-v[0])/r,s=-(n[0][1]-v[1])/r,a=(n[1][0]-v[0])/r,l=-(n[1][1]-v[1])/r,h=(n[2][0]-v[0])/r,u=-(n[2][1]-v[1])/r;p.beginPath(),p.moveTo(a,l),p.lineTo(o,s),p.lineTo(h,u),p.closePath(),p.stroke()})),p.restore()),p.canvas}var Qn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const $n=function(t){function e(e,i,n,o,r,s,a){var l=this,h=e.getExtent(),u=i.getExtent(),c=u?zt(n,u):n,p=qn(e,i,Dt(c),o),d=new Yn(e,i,c,h,.5*p,o),f=s(d.calculateSourceExtent(),p,r),g=f?0:4,_=f?f.getPixelRatio():1;return(l=t.call(this,n,o,_,g)||this).targetProj_=i,l.maxSourceExtent_=h,l.triangulation_=d,l.targetResolution_=o,l.targetExtent_=n,l.sourceImage_=f,l.sourcePixelRatio_=_,l.contextOptions_=a,l.canvas_=null,l.sourceListenerKey_=null,l}return Qn(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(2==t){var e=Vt(this.targetExtent_)/this.targetResolution_,i=Bt(this.targetExtent_)/this.targetResolution_;this.canvas_=Jn(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=t,this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=this.sourceImage_.getState();2==t||3==t?this.reproject_():(this.sourceListenerKey_=z(this.sourceImage_,F,(function(t){var e=this.sourceImage_.getState();2!=e&&3!=e||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){W(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(Vn);var to=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function eo(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const io=function(t){function e(e){var i=t.call(this)||this;return i.projection_=Ee(e.projection),i.attributions_=eo(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:wi,i.wrapX_=void 0!==e.wrapX&&e.wrapX,i}return to(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return X()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=eo(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(tt);var no=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),oo=function(t){function e(e,i){var n=t.call(this,e)||this;return n.image=i,n}return no(e,t),e}(f);function ro(t,e){t.getImage().src=e}const so=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return i.resolutions_=void 0!==e.resolutions?e.resolutions:null,i.reprojectedImage_=null,i.reprojectedRevision_=0,i.contextOptions_=!1===e.imageSmoothing?Un:void 0,i}return no(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=m(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,n){var o=this.getProjection();if(o&&n&&!Te(o,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Te(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&Rt(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new $n(o,n,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,o)}.bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return o&&(n=o),this.getImageInternal(t,e,i,n)},e.prototype.getImageInternal=function(t,e,i,n){return X()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case 1:this.loading=!0,this.dispatchEvent(new oo("imageloadstart",e));break;case 2:this.loading=!1,this.dispatchEvent(new oo("imageloadend",e));break;case 3:this.loading=!1,this.dispatchEvent(new oo("imageloaderror",e))}},e}(io);var ao=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function lo(t,e,i){var n=t;if(n.src&&Wi){var o=n.decode(),r=!0;return o.then((function(){r&&e()})).catch((function(t){r&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())})),function(){r=!1}}var s=[N(n,"load",e),N(n,"error",i)];return function(){s.forEach(W)}}const ho=function(t){function e(e,i,n,o,r,s){var a=t.call(this,e,i,n,0)||this;return a.src_=o,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}return ao(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Bt(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=lo(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Vn);var uo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const co=function(t){function e(e){var i=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,o=void 0!==e.imageLoadFunction?e.imageLoadFunction:ro;return(i=t.call(this,{attributions:e.attributions,imageSmoothing:e.imageSmoothing,projection:Ee(e.projection)})||this).url_=e.url,i.imageExtent_=e.imageExtent,i.image_=new ho(i.imageExtent_,void 0,1,i.url_,n,o),i.imageSize_=e.imageSize?e.imageSize:null,i.image_.addEventListener(F,i.handleImageChange.bind(i)),i}return uo(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,i,n){return Yt(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(2==this.image_.getState()){var i=this.image_.getExtent(),n=this.image_.getImage(),o=void 0,r=void 0;this.imageSize_?(o=this.imageSize_[0],r=this.imageSize_[1]):(o=n.width,r=n.height);var s=Bt(i)/r,a=Math.ceil(Vt(i)/s);if(a!=o){var l=Yi(a,r);S(l,this.getContextOptions());var h=l.canvas;l.drawImage(n,0,0,o,r,0,0,h.width,h.height),this.image_.setImage(h)}}t.prototype.handleImageChange.call(this,e)},e}(so),po="carmentaserver",fo="geoserver",go="mapserver",_o="qgis";function yo(t,e){var i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));var n=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}function mo(t,e){for(var i=(""+t).split("."),n=(""+e).split("."),o=0;o<Math.max(i.length,n.length);o++){var r=parseInt(i[o]||"0",10),s=parseInt(n[o]||"0",10);if(r>s)return 1;if(s>r)return-1}return 0}var vo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Co=[101,101];const xo=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,imageSmoothing:n.imageSmoothing,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,i.url_=n.url,i.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:ro,i.params_=n.params||{},i.v13_=!0,i.updateV13_(),i.serverType_=n.serverType,i.hidpi_=void 0===n.hidpi||n.hidpi,i.image_=null,i.imageSize_=[0,0],i.renderedRevision_=0,i.ratio_=void 0!==n.ratio?n.ratio:1.5,i}return vo(e,t),e.prototype.getFeatureInfoUrl=function(t,e,i,n){if(void 0!==this.url_){var o=Ee(i),r=this.getProjection();r&&r!==o&&(e=qn(r,o,t,e),t=Oe(t,o,r));var s=Gt(t,e,0,Co),a={SERVICE:"WMS",VERSION:Xn,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};S(a,this.params_,n);var l=Math.floor((t[0]-s[0])/e),h=Math.floor((s[3]-t[1])/e);return a[this.v13_?"I":"X"]=l,a[this.v13_?"J":"Y"]=h,this.getRequestUrl_(s,Co,1,r||o,a)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var i={SERVICE:"WMS",VERSION:Xn,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;i.LAYER=n}if(void 0!==t){var o=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*o*39.37*(25.4/.28)}return S(i,e),yo(this.url_,i)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var o=e/i,r=Dt(t),s=Gt(r,o,0,[Math.ceil(Vt(t)/o),Math.ceil(Bt(t)/o)]),a=Gt(r,o,0,[Math.ceil(this.ratio_*Vt(t)/o),Math.ceil(this.ratio_*Bt(t)/o)]),l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==i&&At(l.getExtent(),s))return l;var h={SERVICE:"WMS",VERSION:Xn,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};S(h,this.params_),this.imageSize_[0]=Math.round(Vt(a)/o),this.imageSize_[1]=Math.round(Bt(a)/o);var u=this.getRequestUrl_(a,this.imageSize_,i,n,h);return this.image_=new ho(a,e,i,u,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(F,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,n,o){if(st(void 0!==this.url_,9),o[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=i)switch(this.serverType_){case fo:var r=90*i+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+r:o.FORMAT_OPTIONS="dpi:"+r;break;case go:o.MAP_RESOLUTION=90*i;break;case po:case _o:o.DPI=90*i;break;default:st(!1,8)}o.WIDTH=e[0],o.HEIGHT=e[1];var s,a=n.getAxisOrientation();return s=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,o.BBOX=s.join(","),yo(this.url_,o)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){S(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||Xn;this.v13_=mo(t,"1.3")>=0},e}(so);var Ao=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Eo=function(t){function e(e,i,n){var o=t.call(this)||this,r=n||{};return o.tileCoord=e,o.state=i,o.interimTile=null,o.hifi=!0,o.key="",o.transition_=void 0===r.transition?250:r.transition,o.transitionStarts_={},o}return Ao(e,t),e.prototype.changed=function(){this.dispatchEvent(F)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){X()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:si(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(I);var wo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const So=function(t){function e(e,i,n,o,r,s){var a=t.call(this,e,i,s)||this;return a.crossOrigin_=o,a.src_=n,a.image_=new Image,null!==o&&(a.image_.crossOrigin=o),a.unlisten_=null,a.tileLoadFunction_=r,a}return wo(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=Yi(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=lo(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Eo);var bo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const To=function(t){function e(e,i,n,o,r,s,a,l,h,u,c,p){var d=t.call(this,r,0)||this;d.renderEdges_=void 0!==c&&c,d.contextOptions_=p,d.pixelRatio_=a,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=i,d.targetTileGrid_=o,d.wrappedTileCoord_=s||r,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var f=o.getTileCoordExtent(d.wrappedTileCoord_),g=d.targetTileGrid_.getExtent(),_=d.sourceTileGrid_.getExtent(),y=g?zt(f,g):f;if(0===Lt(y))return d.state=4,d;var m=e.getExtent();m&&(_=_?zt(_,m):m);var v=o.getResolution(d.wrappedTileCoord_[0]),C=function(t,e,i,n){var o=Dt(i),r=qn(t,e,o,n);return(!isFinite(r)||r<=0)&&Ft(i,(function(i){return r=qn(t,e,i,n),isFinite(r)&&r>0})),r}(e,n,y,v);if(!isFinite(C)||C<=0)return d.state=4,d;var x=void 0!==u?u:.5;if(d.triangulation_=new Yn(e,n,y,_,C*x,v),0===d.triangulation_.getTriangles().length)return d.state=4,d;d.sourceZ_=i.getZForResolution(C);var A=d.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(A[1]=Ut(A[1],_[1],_[3]),A[3]=Ut(A[3],_[1],_[3])):A=zt(A,_)),Lt(A)){for(var E=i.getTileRangeForExtentAndZ(A,d.sourceZ_),w=E.minX;w<=E.maxX;w++)for(var S=E.minY;S<=E.maxY;S++){var b=h(d.sourceZ_,w,S,a);b&&d.sourceTiles_.push(b)}0===d.sourceTiles_.length&&(d.state=4)}else d.state=4;return d}return bo(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Jn(n,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){var o=e.getState();if(0==o||1==o){t++;var r=z(e,F,(function(i){var n=e.getState();2!=n&&3!=n&&4!=n||(W(r),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,i){0==t.getState()&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(W),this.sourcesListenerKeys_=null},e}(Eo),Ro=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var i=this.entries_[t];return st(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},t.prototype.remove=function(t){var e=this.entries_[t];return st(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){st(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Po(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function Oo(t,e,i){return t+"/"+e+"/"+i}function Io(t){return Oo(t[0],t[1],t[2])}function Fo(t){return(t[1]<<t[0])+t[2]}var Lo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Lo(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=(e=this.peekFirstKey(),e.split("/").map(Number))[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Io(e.tileCoord)),e.release())}.bind(this))}var e},e}(Ro);function ko(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function Do(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function jo(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var Go=[0,0,0];const Bo=function(){function t(t){var e,i,n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,st((e=this.resolutions_,!0,i=function(t,e){return e-t}||y,e.every((function(t,n){if(0===n)return!0;var o=i(e[n-1],t);return!(o>0||0===o)}))),17),!t.origins)for(var o=0,r=this.resolutions_.length-1;o<r;++o)if(n){if(this.resolutions_[o]/this.resolutions_[o+1]!==n){n=void 0;break}}else n=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,st(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0===s||this.origin_||this.origins_||(this.origin_=Nt(s)),st(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,st(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,st(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new On(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):s&&this.calculateTileRanges_(s)}return t.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),o=n.minX,r=n.maxX;o<=r;++o)for(var s=n.minY,a=n.maxY;s<=a;++s)i([e,o,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,i,n){var o,r,s=null,a=t[0]-1;for(2===this.zoomFactor_?(o=t[1],r=t[2]):s=this.getTileCoordExtent(t,n);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?Pn(o=Math.floor(o/2),o,r=Math.floor(r/2),r,i):this.getTileRangeForExtentAndZ(s,a,i)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],o=2*t[2];return Pn(n,n+1,o,o+1,e)}var r=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),o=this.getResolution(t),r=jo(this.getTileSize(t),this.tmpSize_),s=n[0]+e.minX*r[0]*o,a=n[0]+(e.maxX+1)*r[0]*o;return St(s,n[1]+e.minY*r[1]*o,a,n[1]+(e.maxY+1)*r[1]*o,i)},t.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=Go;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var o=n[1],r=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),Pn(o,n[1],r,n[2],i)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=jo(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]},t.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=jo(this.getTileSize(t[0]),this.tmpSize_),r=i[0]+t[1]*o[0]*n,s=i[1]-(t[2]+1)*o[1]*n;return St(r,s,r+o[0]*n,s+o[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,o){var r=this.getZForResolution(i),s=i/this.getResolution(r),a=this.getOrigin(r),l=jo(this.getTileSize(r),this.tmpSize_),h=n?.5:0,u=n?.5:0,c=Math.floor((t-a[0])/i+h),p=Math.floor((a[1]-e)/i+u),d=s*c/l[0],f=s*p/l[1];return n?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),Po(r,d,f,o)},t.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,o){var r=this.getOrigin(i),s=this.getResolution(i),a=jo(this.getTileSize(i),this.tmpSize_),l=n?.5:0,h=n?.5:0,u=Math.floor((t-r[0])/s+l),c=Math.floor((r[1]-e)/s+h),p=u/a[0],d=c/a[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Po(i,p,d,o)},t.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return Ut(m(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},t}();function zo(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){var o=No(t,undefined,i);return new Bo({extent:t,origin:jt(t,"top-left"),resolutions:o,tileSize:i})}(Wo(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function No(t,e,i,n){for(var o=void 0!==e?e:42,r=Bt(t),s=Vt(t),a=jo(void 0!==i?i:256),l=n>0?n:Math.max(s/a[0],r/a[1]),h=o+1,u=new Array(h),c=0;c<h;++c)u[c]=l/Math.pow(2,c);return u}function Wo(t){var e=(t=Ee(t)).getExtent();if(!e){var i=180*it[nt.DEGREES]/t.getMetersPerUnit();e=St(-i,-i,i,i)}return e}var Vo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yo=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=e.tileGrid;return n&&jo(n.getTileSize(n.getMinZoom()),[256,256]),i.tileCache=new Mo(e.cacheSize||0),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition},i.zDirection=e.zDirection?e.zDirection:0,i}return Vo(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var r,s,a,l=!0,h=i.minX;h<=i.maxX;++h)for(var u=i.minY;u<=i.maxY;++u)s=Oo(e,h,u),a=!1,o.containsKey(s)&&(a=2===(r=o.get(s)).getState())&&(a=!1!==n(r)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,n,o){return X()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:zo(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Te(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),r=jo(n.getTileSize(t),this.tmpSize);return 1==o?r:Do(r,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],o=t.getTileCoordCenter(e),r=Wo(i);if(xt(r,o))return e;var s=Vt(r),a=Math.ceil((r[0]-o[0])/s);return o[0]+=s*a,t.getTileCoordForCoordAndZ(o,n)}(n,t,i)),function(t,e){var i=t[0],n=t[1],o=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var r,s=e.getExtent();return!(r=s?e.getTileRangeForExtentAndZ(s,i):e.getFullTileRange(i))||r.containsXY(n,o)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,e,i,n){},e}(io),Ko=function(t){function e(e,i){var n=t.call(this,e)||this;return n.tile=i,n}return Vo(e,t),e}(f);const Xo=Yo;function Uo(t,e){var i=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(o,s[2].toString()).replace(r,(function(){var t=s[0],i=e.getFullTileRange(t);return st(i,55),(i.getHeight()-s[2]-1).toString()})):void 0}}var Zo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ho=function(t){function e(i){var n=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(n.tileUrlFunction=i.tileUrlFunction.bind(n)),n.urls=null,i.urls?n.setUrls(i.urls):i.url&&n.setUrl(i.url),n.tileLoadingKeys_={},n}return Zo(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=Z(i),o=i.getState();1==o?(this.tileLoadingKeys_[n]=!0,e="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=3==o?"tileloaderror":2==o?"tileloadend":void 0),null!=e&&this.dispatchEvent(new Ko(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n=i[1].charCodeAt(0),o=i[2].charCodeAt(0),r=void 0;for(r=n;r<=o;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=Uo(t[o],e);return function(t){return 1===t.length?t[0]:function(e,i,n){if(e){var o=te(Fo(e),t.length);return t[o](e,i,n)}}}(n)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,i){},e.prototype.useTile=function(t,e,i){var n=Oo(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Xo);var qo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Jo(t,e){t.getImage().src=e}const Qo=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Jo,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:So,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.contextOptions_=!1===e.imageSmoothing?Un:void 0,i.renderReprojectionEdges_=!1,i}return qo(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==i?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Te(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Te(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Te(e,t)){var i=Z(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=zo(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Te(e,t))return this.tileCache;var i=Z(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Mo(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,n,o,r){var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,o),l=a?this.tileUrlFunction(a,n,o):void 0,h=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=r,h.addEventListener(F,this.handleTileChange.bind(this)),h},e.prototype.getTile=function(t,e,i,n,o){var r=this.getProjection();if(r&&o&&!Te(r,o)){var s=this.getTileCacheForProjection(o),a=[t,e,i],l=void 0,h=Io(a);s.containsKey(h)&&(l=s.get(h));var u=this.getKey();if(l&&l.key==u)return l;var c=this.getTileGridForProjection(r),p=this.getTileGridForProjection(o),d=this.getTileCoordForTileUrlFunction(a,o),f=new To(r,c,o,p,a,d,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return f.key=u,l?(f.interimTile=l,f.refreshInterimChain(),s.replace(h,f)):s.set(h,f),f}return this.getTileInternal(t,e,i,n,r||o)},e.prototype.getTileInternal=function(t,e,i,n,o){var r=null,s=Oo(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){var l=r;r=this.createTile_(t,e,i,n,o,a),0==l.getState()?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,i,n,o,a),this.tileCache.set(s,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=Ee(t);if(i){var n=Z(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(Ho);var $o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const tr=function(t){function e(e){var i=this,n=e||{},o=n.params||{},r=!("TRANSPARENT"in o)||o.TRANSPARENT;return(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:!r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).gutter_=void 0!==n.gutter?n.gutter:0,i.params_=o,i.v13_=!0,i.serverType_=n.serverType,i.hidpi_=void 0===n.hidpi||n.hidpi,i.tmpExtent_=[1/0,1/0,-1/0,-1/0],i.updateV13_(),i.setKey(i.getKeyForParams_()),i}return $o(e,t),e.prototype.getFeatureInfoUrl=function(t,e,i,n){var o=Ee(i),r=this.getProjection(),s=this.getTileGrid();s||(s=this.getTileGridForProjection(o));var a=s.getZForResolution(e,this.zDirection),l=s.getTileCoordForCoordAndZ(t,a);if(!(s.getResolutions().length<=l[0])){var h=s.getResolution(l[0]),u=s.getTileCoordExtent(l,this.tmpExtent_),c=jo(s.getTileSize(l[0]),this.tmpSize),p=this.gutter_;0!==p&&(c=ko(c,p,this.tmpSize),u=mt(u,h*p,u)),r&&r!==o&&(h=qn(r,o,t,h),u=Ie(u,o,r),t=Oe(t,o,r));var d={SERVICE:"WMS",VERSION:Xn,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};S(d,this.params_,n);var f=Math.floor((t[0]-u[0])/h),g=Math.floor((u[3]-t[1])/h);return d[this.v13_?"I":"X"]=f,d[this.v13_?"J":"Y"]=g,this.getRequestUrl_(l,c,u,1,r||o,d)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:Xn,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;i.LAYER=n}if(void 0!==t){var o=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*o*39.37*(25.4/.28)}return S(i,e),yo(this.urls[0],i)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,n,o,r){var s=this.urls;if(s){if(r.WIDTH=e[0],r.HEIGHT=e[1],r[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=n)switch(this.serverType_){case fo:var a=90*n+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+a:r.FORMAT_OPTIONS="dpi:"+a;break;case go:r.MAP_RESOLUTION=90*n;break;case po:case _o:r.DPI=90*n;break;default:st(!1,52)}var l=o.getAxisOrientation(),h=i;if(this.v13_&&"ne"==l.substr(0,2)){var u=void 0;u=i[0],h[0]=i[1],h[1]=u,u=i[2],h[2]=i[3],h[3]=u}return r.BBOX=h.join(","),yo(1==s.length?s[0]:s[te(Fo(t),s.length)],r)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.updateParams=function(t){S(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||Xn;this.v13_=mo(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,e,i){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var o=n.getResolution(t[0]),r=n.getTileCoordExtent(t,this.tmpExtent_),s=jo(n.getTileSize(t[0]),this.tmpSize),a=this.gutter_;0!==a&&(s=ko(s,a,this.tmpSize),r=mt(r,o*a,r)),1!=e&&(s=Do(s,e,this.tmpSize));var l={SERVICE:"WMS",VERSION:Xn,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return S(l,this.params_),this.getRequestUrl_(t,s,r,e,i,l)}},e}(Qo),er=function(){const t=new Xo({projection:"EPSG:3857",wrapX:!0}).getTileCoordForTileUrlFunction([6,-31,22]);return t&&33===t[1]&&22===t[2]}();class ir{constructor(t,e,i){this.source_=e,this.projection_=null,this.fallbackProj_=i||null,this.ready_=!1,this.tilingScheme_=null,this.rectangle_=null,this.map_=t,this.shouldRequestNextLevel=!1;const n=this.source_.get("olcs.proxy");n&&("function"==typeof n?this.proxy_={getURL:n}:"string"==typeof n&&(this.proxy_=new Cesium.DefaultProxy(n))),this.errorEvent_=new Cesium.Event,this.emptyCanvas_=document.createElement("canvas"),this.emptyCanvas_.width=1,this.emptyCanvas_.height=1,this.source_.on("change",(t=>{this.handleSourceChanged_()})),this.handleSourceChanged_()}handleSourceChanged_(t){if(!this.ready_&&"ready"==this.source_.getState()){this.projection_=ri.getSourceProjection(this.source_)||this.fallbackProj_;const t={numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1};if(null!==this.source_.tileGrid&&this.source_.tileGrid.forEachTileCoord(this.projection_.getExtent(),0,(([e,i,n])=>{t.numberOfLevelZeroTilesX=i+1,t.numberOfLevelZeroTilesY=n+1})),this.projection_==Ee("EPSG:4326"))this.shouldRequestNextLevel=1===t.numberOfLevelZeroTilesX&&1===t.numberOfLevelZeroTilesY,this.tilingScheme_=new Cesium.GeographicTilingScheme(t);else{if(this.projection_!=Ee("EPSG:3857"))return;this.shouldRequestNextLevel=!1,this.tilingScheme_=new Cesium.WebMercatorTilingScheme(t)}this.rectangle_=this.tilingScheme_.rectangle,this.ready_=!0}}getTileCredits(t,e,i){const n=this.map_.getView().calculateExtent(this.map_.getSize()),o=this.map_.getView().getCenter(),r={viewState:{zoom:this.shouldRequestNextLevel?i+1:i,center:o},extent:n},s=this.source_.getAttributions();if(!s)return[];let a=s(r);return Array.isArray(a)||(a=[a]),a.map((t=>new Cesium.Credit(t,!0)))}requestImage(t,e,i){const n=this.source_.getTileUrlFunction();if(n&&this.projection_){const o=this.shouldRequestNextLevel?i+1:i;let r=e;er||(r=-e-1);let s=n.call(this.source_,[o,t,r],1,this.projection_);return this.proxy_&&(s=this.proxy_.getURL(s)),s?Cesium.ImageryProvider.loadImage(this,s):this.emptyCanvas_}return this.emptyCanvas_}}Object.defineProperties(ir.prototype,{ready:{get:function(){return this.ready_}},rectangle:{get:function(){return this.rectangle_}},tileWidth:{get:function(){const t=this.source_.getTileGrid();return t?Array.isArray(t.getTileSize(0))?t.getTileSize(0)[0]:t.getTileSize(0):256}},tileHeight:{get:function(){const t=this.source_.getTileGrid();return t?Array.isArray(t.getTileSize(0))?t.getTileSize(0)[1]:t.getTileSize(0):256}},maximumLevel:{get:function(){const t=this.source_.getTileGrid();return t?t.getMaxZoom():18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this.tilingScheme_}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this.errorEvent_}},proxy:{get:function(){return this.proxy_}},hasAlphaChannel:{get:function(){return!0}},pickFeatures:{get:function(){}}});const nr=ir,or={computePixelSizeAtCoordinate:function(t,e){const i=t.camera,n=t.canvas,o=i.frustum,r=Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(i.position,e,new Cesium.Cartesian3));return o.getPixelDimensions(n.clientWidth,n.clientHeight,r,t.pixelRatio,new Cesium.Cartesian2)},computeBoundingBoxAtTarget:function(t,e,i){const n=or.computePixelSizeAtCoordinate(t,e),o=Cesium.Transforms.eastNorthUpToFixedFrame(e),r=Cesium.Matrix4.multiplyByPoint(o,new Cesium.Cartesian3(-n.x*i,-n.y*i,0),new Cesium.Cartesian3),s=Cesium.Matrix4.multiplyByPoint(o,new Cesium.Cartesian3(n.x*i,n.y*i,0),new Cesium.Cartesian3);return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray([r,s])},applyHeightOffsetToGeometry:function(t,e){t.applyTransform(((t,i,n)=>{if(console.assert(t===i),void 0!==n&&n>=3)for(let t=0;t<i.length;t+=n)i[t+2]=i[t+2]+e;return i}))},createMatrixAtCoordinates:function(t,e=0,i=Cesium.Cartesian3.ZERO,n=new Cesium.Cartesian3(1,1,1)){const o=or.ol4326CoordinateToCesiumCartesian(t),r=Cesium.Transforms.eastNorthUpToFixedFrame(o),s=Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Z,-e),a=Cesium.Matrix4.fromTranslationQuaternionRotationScale(i,s,n);return Cesium.Matrix4.multiply(r,a,new Cesium.Matrix4)},rotateAroundAxis:function(t,e,i,n,o){const r=Cesium.Math.clamp,s=Cesium.defaultValue,a=o||{},l=s(a.duration,500),h=s(a.easing,hi),u=a.callback;let c=0;const p=new Cesium.Matrix4,d=Date.now(),f=function(){const o=Date.now(),s=h(r((o-d)/l,0,1));console.assert(s>=c),t.transform.clone(p);const a=(s-c)*e;c=s,t.lookAtTransform(n),t.rotate(i,a),t.lookAtTransform(p),s<1?window.requestAnimationFrame(f):u&&u()};window.requestAnimationFrame(f)},setHeadingUsingBottomCenter:function(t,e,i,n){const o=t.camera,r=or.computeAngleToZenith(t,i),s=o.right,a=Cesium.Quaternion.fromAxisAngle(s,r),l=Cesium.Matrix3.fromQuaternion(a),h=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(o.position,i,h);const u=new Cesium.Cartesian3;Cesium.Matrix3.multiplyByVector(l,h,u),Cesium.Cartesian3.add(u,i,u);const c=Cesium.Matrix4.fromTranslation(u);(0,or.rotateAroundAxis)(o,e,u,c,n)},pickOnTerrainOrEllipsoid:function(t,e){const i=t.camera.getPickRay(e);return t.globe.pick(i,t)||t.camera.pickEllipsoid(e)},pickBottomPoint:function(t){const e=t.canvas,i=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight);return or.pickOnTerrainOrEllipsoid(t,i)},pickCenterPoint:function(t){const e=t.canvas,i=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight/2);return or.pickOnTerrainOrEllipsoid(t,i)},computeSignedTiltAngleOnGlobe:function(t){const e=t.camera,i=new Cesium.Ray(e.position,e.direction);let n=t.globe.pick(i,t);if(!n){const t=Cesium.Ellipsoid.WGS84,e=Cesium.IntersectionTests.rayEllipsoid(i,t);e&&(n=Cesium.Ray.getPoint(i,e.start))}if(!n)return;const o=new Cesium.Cartesian3;Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(n,o);const r=(0,or.signedAngleBetween)(e.direction,o,e.right)-Math.PI;return Cesium.Math.convertLongitudeRange(r)},bottomFovRay:function(t){const e=t.camera,i=e.frustum.fovy/2,n=e.direction,o=Cesium.Quaternion.fromAxisAngle(e.right,i),r=Cesium.Matrix3.fromQuaternion(o),s=new Cesium.Cartesian3;return Cesium.Matrix3.multiplyByVector(r,n,s),new Cesium.Ray(e.position,s)},signedAngleBetween:function(t,e,i){const n=new Cesium.Cartesian3,o=new Cesium.Cartesian3,r=new Cesium.Cartesian3;Cesium.Cartesian3.normalize(t,n),Cesium.Cartesian3.normalize(e,o),Cesium.Cartesian3.cross(n,o,r);const s=Cesium.Cartesian3.dot(n,o),a=Cesium.Cartesian3.magnitude(r),l=Cesium.Cartesian3.dot(i,r),h=Math.atan2(a,s);return l>=0?h:-h},computeAngleToZenith:function(t,e){const i=t.camera,n=i.frustum.fovy/2,o=or.bottomFovRay(t),r=Cesium.Cartesian3.clone(o.direction);Cesium.Cartesian3.negate(r,r);const s=new Cesium.Cartesian3;Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(e,s);const a=new Cesium.Cartesian3;return Cesium.Cartesian3.negate(i.right,a),or.signedAngleBetween(s,r,a)+n},extentToRectangle:function(t,e){if(t&&e){const i=Ie(t,e,"EPSG:4326");return Cesium.Rectangle.fromDegrees(i[0],i[1],i[2],i[3])}return null},tileLayerToImageryLayer:function(t,e,i){if(!(e instanceof kn||e instanceof Nn))return null;let n=null,o=e.getSource();if(o instanceof xo&&o.getUrl()&&o.getImageLoadFunction()===ro){const t={"olcs.proxy":o.get("olcs.proxy"),"olcs.extent":o.get("olcs.extent"),"olcs.projection":o.get("olcs.projection"),"olcs.imagesource":o};o=new tr({url:o.getUrl(),attributions:o.getAttributions(),projection:o.getProjection(),params:o.getParams()}),o.setProperties(t)}if(o instanceof Qo){let e=ri.getSourceProjection(o);if(e||(e=i),!or.isCesiumProjection(e))return null;n=new nr(t,o,i)}else{if(!(o instanceof co))return null;{let t=ri.getSourceProjection(o);if(t||(t=i),!or.isCesiumProjection(t))return null;n=new Cesium.SingleTileImageryProvider({url:o.getUrl(),rectangle:new Cesium.Rectangle.fromDegrees(o.getImageExtent()[0],o.getImageExtent()[1],o.getImageExtent()[2],o.getImageExtent()[3])})}}const r={},s=e.get("olcs.extent")||e.getExtent();return s&&(r.rectangle=or.extentToRectangle(s,i)),new Cesium.ImageryLayer(n,r)},updateCesiumLayerProperties:function(t,e){let i=1,n=!0;[t.layer].concat(t.parents).forEach((t=>{const e=t.getOpacity();void 0!==e&&(i*=e);const o=t.getVisible();void 0!==o&&(n&=o)})),e.alpha=i,e.show=n},ol4326CoordinateToCesiumCartesian:function(t){const e=t;return e.length>2?Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]):Cesium.Cartesian3.fromDegrees(e[0],e[1])},ol4326CoordinateArrayToCsCartesians:function(t){console.assert(null!==t);const e=or.ol4326CoordinateToCesiumCartesian,i=[];for(let n=0;n<t.length;++n)i.push(e(t[n]));return i},olGeometryCloneTo4326:function(t,e){console.assert(e);const i=Ee("EPSG:4326"),n=Ee(e);if(n!==i){const e=t.getProperties();(t=t.clone()).transform(n,i),t.setProperties(e)}return t},convertColorToCesium:function(t){if(t=t||"black",Array.isArray(t))return new Cesium.Color(Cesium.Color.byteToFloat(t[0]),Cesium.Color.byteToFloat(t[1]),Cesium.Color.byteToFloat(t[2]),t[3]);if("string"==typeof t)return Cesium.Color.fromCssColorString(t);if(t instanceof CanvasPattern||t instanceof CanvasGradient){const e=document.createElement("canvas"),i=e.getContext("2d");return e.width=e.height=256,i.fillStyle=t,i.fillRect(0,0,e.width,e.height),new Cesium.ImageMaterialProperty({image:e})}console.assert(!1,"impossible")},convertUrlToCesium:function(t){let e="";const i=/\{(\d|[a-z])-(\d|[a-z])\}/,n=i.exec(t);if(n){t=t.replace(i,"{s}");const o=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=o;s<=r;++s)e+=String.fromCharCode(s)}return{url:t,subdomains:e}},resetToNorthZenith:function(t,e){return new Promise(((i,n)=>{const o=e.camera,r=or.pickBottomPoint(e);if(!r)return void n("Could not get bottom pivot");const s=t.getView().getRotation();if(void 0===s)return void n("The view is not initialized");const a=or.computeAngleToZenith(e,r);or.setHeadingUsingBottomCenter(e,s,r);const l=Cesium.Matrix4.fromTranslation(r),h=o.right,u={callback:()=>{const e=t.getView();or.normalizeView(e),i()}};or.rotateAroundAxis(o,-a,h,l,u)}))},rotateAroundBottomCenter:function(t,e){return new Promise(((i,n)=>{const o=t.camera,r=or.pickBottomPoint(t);if(!r)return void n("could not get bottom pivot");const s={callback:i},a=Cesium.Matrix4.fromTranslation(r),l=o.right;(0,or.rotateAroundAxis)(o,-e,l,a,s)}))},normalizeView:function(t,e=0){const i=t.getResolution();t.setRotation(e),t.constrainResolution?t.setResolution(t.constrainResolution(i)):t.setResolution(t.getConstrainedResolution(i))},isCesiumProjection:function(t){const e=t===Ee("EPSG:3857"),i=t===Ee("EPSG:4326");return e||i}},rr=or;function sr(t){return 180*t/Math.PI}function ar(t){return t*Math.PI/180}class lr{constructor(t,e){this.scene_=t,this.cam_=t.camera,this.map_=e,this.view_=null,this.viewListenKey_=null,this.toLonLat_=lr.identityProjection,this.fromLonLat_=lr.identityProjection,this.tilt_=0,this.distance_=0,this.lastCameraViewMatrix_=null,this.viewUpdateInProgress_=!1,this.map_.on("change:view",(t=>{this.setView_(this.map_.getView())})),this.setView_(this.map_.getView())}static identityProjection(t,e,i){const n=i||t.length;if(e)for(let i=0;i<n;++i)e[i]=t[i];return t}setView_(t){if(this.view_&&(Y(this.viewListenKey_),this.viewListenKey_=null),this.view_=t,t){const e=Pe(t.getProjection(),"EPSG:4326"),i=Pe("EPSG:4326",t.getProjection());console.assert(e&&i),this.toLonLat_=e,this.fromLonLat_=i,this.viewListenKey_=t.on("propertychange",(t=>this.handleViewEvent_(t))),this.readFromView()}else this.toLonLat_=lr.identityProjection,this.fromLonLat_=lr.identityProjection}handleViewEvent_(t){this.viewUpdateInProgress_||this.readFromView()}setHeading(t){this.view_&&this.view_.setRotation(t)}getHeading(){if(this.view_)return this.view_.getRotation()||0}setTilt(t){this.tilt_=t,this.updateCamera_()}getTilt(){return this.tilt_}setDistance(t){this.distance_=t,this.updateCamera_(),this.updateView()}getDistance(){return this.distance_}setCenter(t){this.view_&&this.view_.setCenter(t)}getCenter(){if(this.view_)return this.view_.getCenter()}setPosition(t){if(!this.toLonLat_)return;const e=this.toLonLat_(t);console.assert(e);const i=new Cesium.Cartographic(ar(e[0]),ar(e[1]),this.getAltitude());this.cam_.setView({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(i)}),this.updateView()}getPosition(){if(!this.fromLonLat_)return;const t=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position),e=this.fromLonLat_([sr(t.longitude),sr(t.latitude)]);return console.assert(e),e}setAltitude(t){const e=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);e.height=t,this.cam_.position=Cesium.Ellipsoid.WGS84.cartographicToCartesian(e),this.updateView()}getAltitude(){return Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position).height}updateCamera_(){if(!this.view_||!this.toLonLat_)return;const t=this.view_.getCenter();if(!t)return;const e=this.toLonLat_(t);console.assert(e);const i=new Cesium.Cartographic(ar(e[0]),ar(e[1]));if(this.scene_.globe){const t=this.scene_.globe.getHeight(i);i.height=t||0}const n=Cesium.Ellipsoid.WGS84.cartographicToCartesian(i),o={pitch:this.tilt_-Cesium.Math.PI_OVER_TWO,heading:-this.view_.getRotation(),roll:void 0};this.cam_.setView({destination:n,orientation:o}),this.cam_.moveBackward(this.distance_),this.checkCameraChange(!0)}readFromView(){if(!this.view_||!this.toLonLat_)return;const t=this.view_.getCenter();if(null==t)return;const e=this.toLonLat_(t);console.assert(e);const i=this.view_.getResolution();this.distance_=this.calcDistanceForResolution(i||0,ar(e[1])),this.updateCamera_()}updateView(){if(!this.view_||!this.fromLonLat_)return;this.viewUpdateInProgress_=!0;const t=Cesium.Ellipsoid.WGS84,e=this.scene_,i=rr.pickCenterPoint(e);let n=i;if(!n){const t=e.globe,i=this.cam_.positionCartographic.clone(),o=t.getHeight(i);i.height=o||0,n=Cesium.Ellipsoid.WGS84.cartographicToCartesian(i)}this.distance_=Cesium.Cartesian3.distance(n,this.cam_.position);const o=t.cartesianToCartographic(n);if(this.view_.setCenter(this.fromLonLat_([sr(o.longitude),sr(o.latitude)])),this.view_.setResolution(this.calcResolutionForDistance(this.distance_,o?o.latitude:0)),i){const e=this.cam_.position,n=new Cesium.Cartesian3;t.geocentricSurfaceNormal(i,n);const o=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(e,i,o),Cesium.Cartesian3.normalize(o,o);const r=this.cam_.up,s=this.cam_.right,a=new Cesium.Cartesian3(-i.y,i.x,0),l=Cesium.Cartesian3.angleBetween(s,a),h=Cesium.Cartesian3.cross(i,r,new Cesium.Cartesian3).z;this.view_.setRotation(h<0?l:-l);const u=Math.acos(Cesium.Cartesian3.dot(n,o));this.tilt_=isNaN(u)?0:u}else this.view_.setRotation(this.cam_.heading),this.tilt_=-this.cam_.pitch+Math.PI/2;this.viewUpdateInProgress_=!1}checkCameraChange(t){const e=this.lastCameraViewMatrix_,i=this.cam_.viewMatrix;e&&Cesium.Matrix4.equalsEpsilon(e,i,1e-5)||(this.lastCameraViewMatrix_=i.clone(),!0!==t&&this.updateView())}calcDistanceForResolution(t,e){const i=this.scene_.canvas,n=this.cam_.frustum.fovy;console.assert(!isNaN(n));const o=this.view_.getProjection().getMetersPerUnit();return t*i.clientHeight*o*Math.cos(Math.abs(e))/2/Math.tan(n/2)}calcResolutionForDistance(t,e){const i=this.scene_.canvas,n=this.cam_.frustum.fovy,o=this.view_.getProjection().getMetersPerUnit();return 2*t*Math.tan(n/2)/o/Math.cos(Math.abs(e))/i.clientHeight}}const hr=lr,ur="add",cr="remove";var pr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dr="length",fr=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.element=i,o.index=n,o}return pr(e,t),e}(f);const gr=function(t){function e(e,i){var n=t.call(this)||this,o=i||{};if(n.unique_=!!o.unique,n.array_=e||[],n.unique_)for(var r=0,s=n.array_.length;r<s;++r)n.assertUnique_(n.array_[r],r);return n.updateLength_(),n}return pr(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(dr)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new fr(ur,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new fr(cr,e,t)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new fr(cr,n,t)),this.dispatchEvent(new fr(ur,e,t))}else{for(var o=i;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(dr,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new rt(58)},e}(tt);var _r=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yr="layers";const mr=function(t){function e(e){var i=this,n=e||{},o=S({},n);delete o.layers;var r=n.layers;return(i=t.call(this,o)||this).layersListenerKeys_=[],i.listenerKeys_={},i.addEventListener($(yr),i.handleLayersChanged_),r?Array.isArray(r)?r=new gr(r.slice(),{unique:!0}):st("function"==typeof r.getArray,43):r=new gr(void 0,{unique:!0}),i.setLayers(r),i}return _r(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(W),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(z(t,ur,this.handleLayersAdd_,this),z(t,cr,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(W);b(this.listenerKeys_);for(var i=t.getArray(),n=0,o=i.length;n<o;n++){var r=i[n];this.listenerKeys_[Z(r)]=[z(r,g,this.handleLayerChange_,this),z(r,F,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Z(e)]=[z(e,g,this.handleLayerChange_,this),z(e,F,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=Z(t.element);this.listenerKeys_[e].forEach(W),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(yr)},e.prototype.setLayers=function(t){this.set(yr,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var n=this.getLayerState(),o=i,r=e.length;o<r;o++){var s=e[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=zt(s.extent,n.extent):s.extent=n.extent)}return e},e.prototype.getSourceState=function(){return wi},e}(Ci),vr=class{constructor(t,e){this.map=t,this.view=t.getView(),this.scene=e,this.olLayers=t.getLayerGroup().getLayers(),this.mapLayerGroup=t.getLayerGroup(),this.layerMap={},this.olLayerListenKeys={},this.olGroupListenKeys_={}}synchronize(){this.destroyAll(),this.addLayers_(this.mapLayerGroup)}orderLayers(){}addLayers_(t){const e=[{layer:t,parents:[]}];for(;e.length>0;){const t=e.splice(0,1)[0],i=t.layer,n=ni(i).toString();this.olLayerListenKeys[n]=[],console.assert(!this.layerMap[n]);let o=null;if(i instanceof mr)this.listenForGroupChanges_(i),i!==this.mapLayerGroup&&(o=this.createSingleLayerCounterparts(t)),o||i.getLayers().forEach((n=>{if(n){const o={layer:n,parents:i===this.mapLayerGroup?[]:[t.layer].concat(t.parents)};e.push(o)}}));else if(o=this.createSingleLayerCounterparts(t),!o){const e=n,i=t,o=t=>{const n=this.createSingleLayerCounterparts(i);n&&(i.layer.un("change",o),this.addCesiumObjects_(n,e,i.layer),this.orderLayers())};this.olLayerListenKeys[n].push(ei(i.layer,"change",o))}o&&this.addCesiumObjects_(o,n,i)}this.orderLayers()}addCesiumObjects_(t,e,i){this.layerMap[e]=t,this.olLayerListenKeys[e].push(ei(i,"change:zIndex",(()=>this.orderLayers()))),t.forEach((t=>{this.addCesiumObject(t)}))}removeAndDestroySingleLayer_(t){const e=ni(t).toString(),i=this.layerMap[e];return i&&(i.forEach((t=>{this.removeSingleCesiumObject(t,!1),this.destroyCesiumObject(t)})),this.olLayerListenKeys[e].forEach(Y),delete this.olLayerListenKeys[e]),delete this.layerMap[e],!!i}unlistenSingleGroup_(t){if(t===this.mapLayerGroup)return;const e=ni(t).toString();this.olGroupListenKeys_[e].forEach((t=>{Y(t)})),delete this.olGroupListenKeys_[e],delete this.layerMap[e]}removeLayer_(t){if(t){const e=[t];for(;e.length>0;){const t=e.splice(0,1)[0],i=this.removeAndDestroySingleLayer_(t);t instanceof mr&&(this.unlistenSingleGroup_(t),i||t.getLayers().forEach((t=>{e.push(t)})))}}}listenForGroupChanges_(t){const e=ni(t).toString();console.assert(void 0===this.olGroupListenKeys_[e]);const i=[];this.olGroupListenKeys_[e]=i;let n=[];const o=function(){const e=t.getLayers();e&&(n=[e.on("add",(t=>{this.addLayers_(t.element)})),e.on("remove",(t=>{this.removeLayer_(t.element)}))],i.push(...n))}.bind(this);o(),i.push(t.on("change:layers",(t=>{n.forEach((t=>{const e=i.indexOf(t);e>=0&&i.splice(e,1),Y(t)})),o()})))}destroyAll(){let t;for(t in this.removeAllCesiumObjects(!0),this.olGroupListenKeys_)this.olGroupListenKeys_[t].forEach(Y);for(t in this.olLayerListenKeys)this.olLayerListenKeys[t].forEach(Y);this.olGroupListenKeys_={},this.olLayerListenKeys={},this.layerMap={}}addCesiumObject(t){}destroyCesiumObject(t){}removeSingleCesiumObject(t,e){}removeAllCesiumObjects(t){}createSingleLayerCounterparts(t){}},Cr=class extends vr{constructor(t,e){super(t,e),this.cesiumLayers_=e.imageryLayers,this.ourLayers_=new Cesium.ImageryLayerCollection}addCesiumObject(t){this.cesiumLayers_.add(t),this.ourLayers_.add(t)}destroyCesiumObject(t){t.destroy()}removeSingleCesiumObject(t,e){this.cesiumLayers_.remove(t,e),this.ourLayers_.remove(t,!1)}removeAllCesiumObjects(t){for(let e=0;e<this.ourLayers_.length;++e)this.cesiumLayers_.remove(this.ourLayers_.get(e),t);this.ourLayers_.removeAll(!1)}convertLayerToCesiumImageries(t,e){const i=rr.tileLayerToImageryLayer(this.map,t,e);return i?[i]:null}createSingleLayerCounterparts(t){const e=t.layer,i=ni(e).toString(),n=this.view.getProjection();console.assert(n);const o=this.convertLayerToCesiumImageries(e,n);if(o){const n=[];[t.layer].concat(t.parents).forEach((e=>{n.push(e.on(["change:opacity","change:visible"],(()=>{console.assert(o);for(let e=0;e<o.length;++e)rr.updateCesiumLayerProperties(t,o[e])})))}));for(let e=0;e<o.length;++e)rr.updateCesiumLayerProperties(t,o[e]);n.push(e.on("change:extent",(t=>{for(let t=0;t<o.length;++t)this.cesiumLayers_.remove(o[t],!0),this.ourLayers_.remove(o[t],!1);delete this.layerMap[ni(e)],this.synchronize()}))),n.push(e.on("change",(t=>{for(let t=0;t<o.length;++t){const e=this.cesiumLayers_.indexOf(o[t]);e>=0&&(this.cesiumLayers_.remove(o[t],!1),this.cesiumLayers_.add(o[t],e))}}))),this.olLayerListenKeys[i].push(...n)}return Array.isArray(o)?o:null}orderLayers(){const t=[],e={},i=[this.mapLayerGroup];for(;i.length>0;){const n=i.splice(0,1)[0];if(t.push(n),e[ni(n)]=n.getZIndex()||0,n instanceof mr){const t=n.getLayers();t&&i.unshift(...t.getArray())}}!function(t,i){const n=t.length,o=Array(t.length);for(let e=0;e<n;e++)o[e]={index:e,value:t[e]};o.sort(((t,i)=>{return n=t.value,o=i.value,e[ni(n)]-e[ni(o)]||t.index-i.index;var n,o}));for(let e=0;e<t.length;e++)t[e]=o[e].value}(t),t.forEach((t=>{const e=ni(t).toString(),i=this.layerMap[e];i&&i.forEach((t=>{this.raiseToTop(t)}))}))}raiseToTop(t){this.cesiumLayers_.raiseToTop(t)}};var xr=i(79),Ar=i.n(xr);const Er=function(){function t(t){this.rbush_=new(Ar())(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Z(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,o=e.length;n<o;n++){var r=t[n],s=e[n],a={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:s};i[n]=a,this.items_[Z(s)]=a}this.rbush_.load(i)},t.prototype.remove=function(t){var e=Z(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[Z(e)];Rt([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,o=t.length;n<o;n++)if(i=e(t[n]))return i;return i},t.prototype.isEmpty=function(){return R(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return St(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),wr="addfeature",Sr="removefeature";function br(t,e){return[[-1/0,-1/0,1/0,1/0]]}const Tr="arraybuffer";function Rr(t,e){return function(t,e,i,n){return function(o,r,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(o,r,s):t,!0),e.getType()==Tr&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var r=e.getType(),l=void 0;"json"==r||"text"==r?l=a.responseText:"xml"==r?(l=a.responseXML)||(l=(new DOMParser).parseFromString(a.responseText,"application/xml")):r==Tr&&(l=a.response),l?i.call(this,e.readFeatures(l,{extent:o,featureProjection:s}),e.readProjection(l)):n.call(this)}else n.call(this)}.bind(this),a.onerror=function(){n.call(this)}.bind(this),a.send()}}(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),w)}var Pr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Or=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return Pr(e,t),e}(f);const Ir=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{attributions:n.attributions,projection:void 0,state:wi,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=w,i.format_=n.format,i.overlaps_=void 0===n.overlaps||n.overlaps,i.url_=n.url,void 0!==n.loader?i.loader_=n.loader:void 0!==i.url_&&(st(i.format_,7),i.loader_=Rr(i.url_,i.format_)),i.strategy_=void 0!==n.strategy?n.strategy:br;var o,r,s=void 0===n.useSpatialIndex||n.useSpatialIndex;return i.featuresRtree_=s?new Er:null,i.loadedExtentsRtree_=new Er,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(n.features)?r=n.features:n.features&&(r=(o=n.features).getArray()),s||void 0!==o||(o=new gr(r)),void 0!==r&&i.addFeaturesInternal(r),void 0!==o&&i.bindFeaturesCollection_(o),i}return Pr(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Z(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Or(wr,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[z(e,F,this.handleFeatureChange_,this),z(e,g,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(st(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],o=0,r=t.length;o<r;o++){var s=Z(l=t[o]);this.addToIndex_(s,l)&&i.push(l)}o=0;for(var a=i.length;o<a;o++){var l;s=Z(l=i[o]),this.setupChangeEvents_(s,l);var h=l.getGeometry();if(h){var u=h.getExtent();e.push(u),n.push(l)}else this.nullGeometryFeatures_[s]=l}this.featuresRtree_&&this.featuresRtree_.load(e,n),o=0;for(var c=i.length;o<c;o++)this.dispatchEvent(new Or(wr,i[o]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(wr,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(Sr,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(ur,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(cr,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(W);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new Or("clear");this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),R(this.nullGeometryFeatures_)||C(t,T(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],o=null,r=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],l=e||A;return this.featuresRtree_.forEachInExtent(a,(function(t){if(l(t)){var e=t.getGeometry(),h=s;if((s=e.closestPointXY(i,n,r,s))<h){o=t;var u=Math.sqrt(s);a[0]=i-u,a[1]=n-u,a[2]=i+u,a[3]=n+u}}})),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=Z(e),n=e.getGeometry();if(n){var o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var r=e.getId();if(void 0!==r){var s=r.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Or("changefeature",e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Z(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&R(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var r=function(t,r){var a=o[t];n.forEachInExtent(a,(function(t){return At(t.extent,a)}))||(s.loader_.call(s,a,e,i),n.insert(a,{extent:a.slice()}),s.loading=s.loader_!==w)},s=this,a=0,l=o.length;a<l;++a)r(a)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if(Rt(i.extent,t))return e=i,!0})),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=Z(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Z(t);this.featureChangeKeys_[e].forEach(W),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Or(Sr,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){st(this.format_,7),this.setLoader(Rr(t,this.format_))},e}(io);var Fr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Lr=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener($(i.geometryName_),i.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;i.setGeometry(n)}else{var o=e;i.setProperties(o)}return i}return Fr(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(W(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=z(t,F,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,i;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?i=e:(st("function"==typeof e.getZIndex,41),i=[e]),function(){return i}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener($(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener($(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(tt);function Mr(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function kr(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function Dr(t,e){var i=Math.cos(e),n=Math.sin(e),o=t[0]*i-t[1]*n,r=t[1]*i+t[0]*n;return t[0]=o,t[1]=r,t}function jr(t,e){return t[0]*=e,t[1]*=e,t}function Gr(t,e){if(e.canWrapX()){var i=Vt(e.getExtent()),n=function(t,e,i){var n=e.getExtent(),o=0;if(e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])){var r=i||Vt(n);o=Math.floor((t[0]-n[0])/r)}return o}(t,e,i);n&&(t[0]-=n*i)}return t}var Br=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const zr=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==e.distance?e.distance:20,i.features=[],i.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return st(e.getType()==s,10),e},i.boundRefresh_=i.refresh.bind(i),i.setSource(e.source||null),i}return Br(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(F,this.boundRefresh_),this.source=t,t&&t.addEventListener(F,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,i=this.source.getFeatures(),n={},o=0,r=i.length;o<r;o++){var s=i[o];if(!(Z(s)in n)){var a=this.geometryFunction(s);if(a){Tt(a.getCoordinates(),t),mt(t,e,t);var l=this.source.getFeaturesInExtent(t);l=l.filter((function(t){var e=Z(t);return!(e in n)&&(n[e]=!0,!0)})),this.features.push(this.createCluster(l))}}}},e.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var n=this.geometryFunction(t[i]);n?Mr(e,n.getCoordinates()):t.splice(i,1)}jr(e,1/t.length);var o=new Lr(new $e(e));return o.set("features",t),o},e}(Ir),Nr=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=jo(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return X()},t.prototype.getImage=function(t){return X()},t.prototype.getHitDetectionImage=function(){return X()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return X()},t.prototype.getImageSize=function(){return X()},t.prototype.getHitDetectionImageSize=function(){return X()},t.prototype.getOrigin=function(){return X()},t.prototype.getSize=function(){return X()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=jo(t)},t.prototype.listenImageChange=function(t){X()},t.prototype.load=function(){X()},t.prototype.unlistenImageChange=function(t){X()},t}();var Wr=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Vr=/^([a-z]*)$|^hsla?\(.*\)$/i;var Yr=function(){var t={},e=0;return function(i){var n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){var o=0;for(var r in t)0==(3&o++)&&(delete t[r],--e)}n=function(t){var e,i,n,o,r;if(Vr.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),Wr.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),o=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,l&&(o=(o<<4)+o)),r=[e,i,n,o/255]}else 0==t.indexOf("rgba(")?Xr(r=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((r=t.slice(4,-1).split(",").map(Number)).push(1),Xr(r)):st(!1,14);return r}(i),t[i]=n,++e}return n}}();function Kr(t){return Array.isArray(t)?t:Yr(t)}function Xr(t){return t[0]=Ut(t[0]+.5|0,0,255),t[1]=Ut(t[1]+.5|0,0,255),t[2]=Ut(t[2]+.5|0,0,255),t[3]=Ut(t[3],0,1),t}function Ur(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}function Zr(t){return Array.isArray(t)?Ur(t):t}var Hr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const qr=function(t){function e(e){var i=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_={},i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return Hr(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var t=this.createRenderOptions();this.createHitDetectionCanvas_(t)}return this.hitDetectionCanvas_},e.prototype.getImage=function(t){if(!this.canvas_[t||1]){var e=this.createRenderOptions(),i=Yi(e.size*t||1,e.size*t||1);this.draw_(e,i,0,0,t||1),this.canvas_[t||1]=i.canvas}return this.canvas_[t||1]},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return 2},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.createRenderOptions=function(){var t,e=on,i=sn,n=0,o=null,r=0,s=0;return this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=an),t=Zr(t),void 0===(s=this.stroke_.getWidth())&&(s=1),o=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=sn),void 0===(e=this.stroke_.getLineCap())&&(e=on),void 0===(n=this.stroke_.getMiterLimit())&&(n=10)),{strokeStyle:t,strokeWidth:s,size:2*(this.radius_+s)+1,lineCap:e,lineDash:o,lineDashOffset:r,lineJoin:i,miterLimit:n}},e.prototype.render=function(){var t=this.createRenderOptions(),e=Yi(t.size,t.size);this.draw_(t,e,0,0,1),this.canvas_[1]=e.canvas;var i=e.canvas.width,n=i,o=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t),this.anchor_=[i/2-o[0],i/2+o[1]],this.size_=[i,i],this.imageSize_=[n,n]},e.prototype.draw_=function(t,e,i,n,o){var r,s,a;e.setTransform(o,0,0,o,0,0),e.translate(i,n),e.beginPath();var l=this.points_;if(l===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(l*=2),r=0;r<=l;r++)s=2*r*Math.PI/l-Math.PI/2+this.angle_,a=r%2==0?this.radius_:h,e.lineTo(t.size/2+a*Math.cos(s),t.size/2+a*Math.sin(s))}if(this.fill_){var u=this.fill_.getColor();null===u&&(u=nn),e.fillStyle=Zr(u),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=Kr(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=Yi(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.translate(i,n),e.beginPath();var o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var r=void 0!==this.radius2_?this.radius2_:this.radius_;r!==this.radius_&&(o*=2);var s=void 0,a=void 0,l=void 0;for(s=0;s<=o;s++)l=2*s*Math.PI/o-Math.PI/2+this.angle_,a=s%2==0?this.radius_:r,e.lineTo(t.size/2+a*Math.cos(l),t.size/2+a*Math.sin(l))}e.fillStyle=nn,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(Nr);var Jr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Qr=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return Jr(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(qr),$r=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),ts=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();var es=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=os,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=os,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}(),is=null;function ns(t,e){if(!is){var i=new $r({color:"rgba(255,255,255,0.4)"}),n=new ts({color:"#3399CC",width:1.25});is=[new es({image:new Qr({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return is}function os(t){return t.getGeometry()}var rs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ss="renderOrder";const as=function(t){function e(e){var i=this,n=e||{},o=S({},n);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(i=t.call(this,o)||this).declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return rs(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(ss)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(ss,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:ns,this.styleFunction_=null===t?void 0:function(t){var e,i;"function"==typeof t?e=t:(Array.isArray(t)?i=t:(st("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i});return e}(this.style_),this.changed()},e}(Ti);var ls={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},hs=[ls.FILL],us=[ls.STROKE],cs=[ls.BEGIN_PATH],ps=[ls.CLOSE_PATH];const ds=ls,fs=function(){function t(){}return t.prototype.drawCustom=function(t,e,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}();function gs(t,e,i,n,o){for(var r=void 0!==o?o:[],s=0,a=e;a<i;a+=n)r[s++]=t.slice(a,a+n);return r.length=s,r}function _s(t,e,i,n,o){for(var r=void 0!==o?o:[],s=0,a=0,l=i.length;a<l;++a){var h=i[a];r[s++]=gs(t,e,h,n,r[s]),e=h}return r.length=s,r}function ys(t,e,i,n,o){for(var r=void 0!==o?o:[],s=0,a=0,l=i.length;a<l;++a){var h=i[a];r[s++]=_s(t,e,h,n,r[s]),e=h[h.length-1]}return r.length=s,r}var ms=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const vs=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.tolerance=e,r.maxExtent=i,r.pixelRatio=o,r.maxLineWidth=0,r.resolution=n,r.beginGeometryInstruction1_=null,r.beginGeometryInstruction2_=null,r.bufferedMaxExtent_=null,r.instructions=[],r.coordinates=[],r.tmpCoordinate_=[],r.hitDetectionInstructions=[],r.state={},r}return ms(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,i,n,o,r){var s=this.coordinates.length,a=this.getBufferedMaxExtent();r&&(e+=n);var l,h,u,c=t[e],p=t[e+1],d=this.tmpCoordinate_,f=!0;for(l=e+n;l<i;l+=n)d[0]=t[l],d[1]=t[l+1],(u=wt(a,d))!==h?(f&&(this.coordinates[s++]=c,this.coordinates[s++]=p),this.coordinates[s++]=d[0],this.coordinates[s++]=d[1],f=!1):1===u?(this.coordinates[s++]=d[0],this.coordinates[s++]=d[1],f=!1):f=!0,c=d[0],p=d[1],h=u;return(o&&f||l===e+n)&&(this.coordinates[s++]=c,this.coordinates[s++]=p),s},e.prototype.drawCustomCoordinates_=function(t,e,i,n,o){for(var r=0,s=i.length;r<s;++r){var a=i[r],l=this.appendFlatCoordinates(t,e,a,n,!1,!1);o.push(l),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,o,r,p,d,f=t.getType(),g=t.getStride(),_=this.coordinates.length;if(f==c){n=t.getOrientedFlatCoordinates(),p=[];var y=t.getEndss();d=0;for(var m=0,v=y.length;m<v;++m){var C=[];d=this.drawCustomCoordinates_(n,d,y[m],g,C),p.push(C)}this.instructions.push([ds.CUSTOM,_,p,t,i,ys])}else f==l||f==u?(r=[],n=f==l?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(n,0,t.getEnds(),g,r),this.instructions.push([ds.CUSTOM,_,r,t,i,_s])):f==a||f==h?(n=t.getFlatCoordinates(),o=this.appendFlatCoordinates(n,0,n.length,g,!1,!1),this.instructions.push([ds.CUSTOM,_,o,t,i,gs])):f==s&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),o=this.coordinates.length,this.instructions.push([ds.CUSTOM,_,o,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[ds.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ds.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,o=e.length,r=-1;for(t=0;t<o;++t)(n=(i=e[t])[0])==ds.END_GEOMETRY?r=t:n==ds.BEGIN_GEOMETRY&&(i[2]=t,v(this.hitDetectionInstructions,r,t),r=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=Zr(n||nn)}else i.fillStyle=void 0;if(e){var o=e.getColor();i.strokeStyle=Zr(o||an);var r=e.getLineCap();i.lineCap=void 0!==r?r:on;var s=e.getLineDash();i.lineDash=s?s.slice():rn;var a=e.getLineDashOffset();i.lineDashOffset=a||0;var l=e.getLineJoin();i.lineJoin=void 0!==l?l:sn;var h=e.getWidth();i.lineWidth=void 0!==h?h:1;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[ds.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[ds.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,o=t.lineDash,r=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||o!=t.currentLineDash&&!x(t.currentLineDash,o)||t.currentLineDashOffset!=r||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=r,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[ds.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=vt(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;mt(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(fs);var Cs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const xs=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.declutterGroups_=null,r.hitDetectionImage_=null,r.image_=null,r.imagePixelRatio_=void 0,r.anchorX_=void 0,r.anchorY_=void 0,r.height_=void 0,r.opacity_=void 0,r.originX_=void 0,r.originY_=void 0,r.rotateWithView_=void 0,r.rotation_=void 0,r.scale_=void 0,r.width_=void 0,r}return Cs(e,t),e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([ds.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([ds.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([ds.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([ds.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),o=t.getHitDetectionImage(),r=t.getImage(this.pixelRatio),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroups_=e,this.hitDetectionImage_=o,this.image_=r,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0]},e}(vs);var As=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Es=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return As(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var o=this.coordinates.length,r=this.appendFlatCoordinates(t,e,i,n,!1,!1),s=[ds.MOVE_TO_LINE_TO,o,r];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ds.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],cs);var r=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(r,0,r.length,s),this.hitDetectionInstructions.push(us),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,o=i.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ds.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],cs);for(var r=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),l=0,h=0,u=r.length;h<u;++h)l=this.drawFlatCoordinates_(s,l,r[h],a);this.hitDetectionInstructions.push(us),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(us),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(us),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(cs)},e}(vs);function ws(t,e){return e*Math.round(t/e)}function Ss(t,e,i,n,o,r,s){if(e==i)return s;var a,l,h=ws(t[e],o),u=ws(t[e+1],o);e+=n,r[s++]=h,r[s++]=u;do{if(a=ws(t[e],o),l=ws(t[e+1],o),(e+=n)==i)return r[s++]=a,r[s++]=l,s}while(a==h&&l==u);for(;e<i;){var c=ws(t[e],o),p=ws(t[e+1],o);if(e+=n,c!=a||p!=l){var d=a-h,f=l-u,g=c-h,_=p-u;d*_==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&_<f||f==_||f>0&&_>f)?(a=c,l=p):(r[s++]=a,r[s++]=l,h=a,u=l,a=c,l=p)}}return r[s++]=a,r[s++]=l,s}var bs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ts=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return bs(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var o=this.state,r=void 0!==o.fillStyle,s=void 0!==o.strokeStyle,a=i.length;this.instructions.push(cs),this.hitDetectionInstructions.push(cs);for(var l=0;l<a;++l){var h=i[l],u=this.coordinates.length,c=this.appendFlatCoordinates(t,e,h,n,!0,!s),p=[ds.MOVE_TO_LINE_TO,u,c];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(ps),this.hitDetectionInstructions.push(ps)),e=h}return r&&(this.instructions.push(hs),this.hitDetectionInstructions.push(hs)),s&&(this.instructions.push(us),this.hitDetectionInstructions.push(us)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ds.SET_FILL_STYLE,nn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ds.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(r,0,r.length,s,!1,!1);var l=[ds.CIRCLE,a];this.instructions.push(cs,l),this.hitDetectionInstructions.push(cs,l),void 0!==i.fillStyle&&(this.instructions.push(hs),this.hitDetectionInstructions.push(hs)),void 0!==i.strokeStyle&&(this.instructions.push(us),this.hitDetectionInstructions.push(us)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ds.SET_FILL_STYLE,nn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ds.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,r,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,o=i.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ds.SET_FILL_STYLE,nn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ds.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var r=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),l=0,h=0,u=r.length;h<u;++h)l=this.drawFlatCoordinatess_(s,l,r[h],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,o=i.length;n<o;++n)i[n]=ws(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(vs);function Rs(t,e,i,n,o){var r,s,a,l,h,u,c,p,d,f=i,g=i,_=0,y=0,m=i;for(r=i;r<n;r+=o){var v=e[r],C=e[r+1];void 0!==l&&(p=v-l,d=C-h,a=Math.sqrt(p*p+d*d),void 0!==u&&(y+=s,Math.acos((u*p+c*d)/(s*a))>t&&(y>_&&(_=y,f=m,g=r),y=0,m=r-o)),s=a,u=p,c=d),l=v,h=C}return(y+=a)>_?[m,r]:[f,g]}var Ps=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Os={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Is={Circle:Ts,Default:vs,Image:xs,LineString:Es,Polygon:Ts,Text:function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.declutterGroups_,r.labels_=null,r.text_="",r.textOffsetX_=0,r.textOffsetY_=0,r.textRotateWithView_=void 0,r.textRotation_=0,r.textFillState_=null,r.fillStates={},r.textStrokeState_=null,r.strokeStates={},r.textState_={},r.textStates={},r.textKey_="",r.fillKey_="",r.strokeKey_="",r}return Ps(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(i||n)){var r,p,f=this.coordinates.length,g=t.getType(),_=null,y=2,m=t.getStride();if("line"===o.placement){if(!Yt(this.getBufferedMaxExtent(),t.getExtent()))return;var v=void 0;if(_=t.getFlatCoordinates(),g==a)v=[_.length];else if(g==u)v=t.getEnds();else if(g==l)v=t.getEnds().slice(0,1);else if(g==c){var C=t.getEndss();for(v=[],r=0,p=C.length;r<p;++r)v.push(C[r][0])}this.beginGeometry(t,e);for(var x=o.textAlign,A=0,E=void 0,w=0,S=v.length;w<S;++w){if(null==x){var b=Rs(o.maxAngle,_,A,v[w],m);A=b[0],E=b[1]}else E=v[w];for(r=A;r<E;r+=m)this.coordinates.push(_[r],_[r+1]);y=this.coordinates.length,A=v[w];var T=this.declutterGroups_?0===w?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(f,y,T),f=y}this.endGeometry(e)}else{var R=null;switch(o.overflow||(R=[]),g){case s:case h:y=(_=t.getFlatCoordinates()).length;break;case a:_=t.getFlatMidpoint();break;case d:_=t.getCenter();break;case u:m=2,y=(_=t.getFlatMidpoints()).length;break;case l:_=t.getFlatInteriorPoint(),o.overflow||R.push(_[2]/this.resolution),m=3;break;case c:var P=t.getFlatInteriorPoints();for(_=[],r=0,p=P.length;r<p;r+=3)o.overflow||R.push(P[r+2]/this.resolution),_.push(P[r],P[r+1]);if(m=2,0==(y=_.length))return}y=this.appendFlatCoordinates(_,0,y,m,!1,!1),this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var O=o.padding;if(O!=un&&(o.scale[0]<0||o.scale[1]<0)){var I=o.padding[0],F=o.padding[1],L=o.padding[2],M=o.padding[3];o.scale[0]<0&&(F=-F,M=-M),o.scale[1]<0&&(I=-I,L=-L),O=[I,F,L,M]}var k=this.pixelRatio;this.instructions.push([ds.DRAW_IMAGE,f,y,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,O==un?un:O.map((function(t){return t*k})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]);var D=1/k;this.hitDetectionInstructions.push([ds.DRAW_IMAGE,f,y,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[D,D],NaN,O,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||ln,textBaseline:e.textBaseline||hn,scale:e.scale});var r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,o=this.textState_,r=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();var l=this.pixelRatio,h=Os[o.textBaseline],u=this.textOffsetY_*l,c=this.text_,p=n?n.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([ds.DRAW_CHARS,t,e,h,i,o.overflow,a,o.maxAngle,l,u,r,p*l,c,s,1]),this.hitDetectionInstructions.push([ds.DRAW_CHARS,t,e,h,i,o.overflow,a,o.maxAngle,1,u,r,p,c,s,1/l])},e.prototype.setTextStyle=function(t,e){var i,n,o;if(t){this.declutterGroups_=e;var r=t.getFill();r?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=Zr(r.getColor()||nn)):(n=null,this.textFillState_=n);var s=t.getStroke();if(s){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);var a=s.getLineDash(),l=s.getLineDashOffset(),h=s.getWidth(),u=s.getMiterLimit();o.lineCap=s.getLineCap()||on,o.lineDash=a?a.slice():rn,o.lineDashOffset=void 0===l?0:l,o.lineJoin=s.getLineJoin()||sn,o.lineWidth=void 0===h?1:h,o.miterLimit=void 0===u?10:u,o.strokeStyle=Zr(s.getColor()||an)}else o=null,this.textStrokeState_=o;i=this.textState_;var c=t.getFont()||en;yn(c);var p=t.getScaleArray();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||hn,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||un,i.scale=void 0===p?[1,1]:p;var d=t.getOffsetX(),f=t.getOffsetY(),g=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===_?0:_,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Z(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Z(n.fillStyle):""}else this.text_=""},e}(vs)};const Fs=function(){function t(t,e,i,n,o){this.declutter_=o,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][0]++:(e=[[1]],this.declutterGroups_=e)),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var o=i[n].finish();t[e][n]=o}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var o=n[e];return void 0===o&&(o=new(0,Is[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=o),o},t}(),Ls="Circle",Ms="Default",ks="Image",Ds="LineString",js="Polygon",Gs="Text";function Bs(t,e,i,n,o,r,s,a,l,h,u,c){var p,d=[];if(c){var f=We(t,e,i,n,c,[t[e],t[e+1]]);p=f[0]>f[f.length-n]}else p=t[e]>t[i-n];for(var g,_,y=o.length,m=t[e],v=t[e+1],C=t[e+=n],x=t[e+1],A=0,E=Math.sqrt(Math.pow(C-m,2)+Math.pow(x-v,2)),w=!1,S=0;S<y;++S){for(var b=o[g=p?y-S-1:S],T=a*l(h,b,u),R=r+T/2;e<i-n&&A+E<R;)m=C,v=x,C=t[e+=n],x=t[e+1],A+=E,E=Math.sqrt(Math.pow(C-m,2)+Math.pow(x-v,2));var P=R-A,O=Math.atan2(x-v,C-m);if(p&&(O+=O>0?-Math.PI:Math.PI),void 0!==_){var I=O-_;if(w=w||0!==I,I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>s)return null}_=O;var F=P/E,L=ee(m,C,F),M=ee(v,x,F);d[g]=[L,M,T/2,O,b],r+=T}return w?d:[[d[0][0],d[0][1],d[0][2],d[0][3],o]]}function zs(t,e,i,n){for(var o=t[e],r=t[e+1],s=0,a=e+n;a<i;a+=n){var l=t[a],h=t[a+1];s+=Math.sqrt((l-o)*(l-o)+(h-r)*(h-r)),o=l,r=h}return s}var Ns=[1/0,1/0,-1/0,-1/0],Ws=[1,0,0,1,0,0],Vs=[],Ys=[],Ks=[],Xs=[];const Us=function(){function t(t,e,i,n,o){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderBuffer_=o,this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var o=t+e+i+n;if(this.labels_[o])return this.labels_[o];var r=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],l=this.pixelRatio,h=[a.scale[0]*l,a.scale[1]*l],u=Os[a.textAlign||ln],c=n&&r.lineWidth?r.lineWidth:0,p=t.split("\n"),d=p.length,f=[],g=function(t,e,i){for(var n=e.length,o=0,r=0;r<n;++r){var s=Cn(t,e[r]);o=Math.max(o,s),i.push(s)}return o}(a.font,p,f),_=mn(a.font),y=g+c,m=[],v=(y+2)*h[0],C=(_*d+c)*h[1],x={width:v<0?Math.floor(v):Math.ceil(v),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:m};1==h[0]&&1==h[1]||m.push("scale",h),m.push("font",a.font),n&&(m.push("strokeStyle",r.strokeStyle),m.push("lineWidth",c),m.push("lineCap",r.lineCap),m.push("lineJoin",r.lineJoin),m.push("miterLimit",r.miterLimit),(Ni?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(m.push("setLineDash",[r.lineDash]),m.push("lineDashOffset",r.lineDashOffset))),i&&m.push("fillStyle",s.fillStyle),m.push("textBaseline","middle"),m.push("textAlign","center");var A,E=.5-u,w=u*y+E*c;if(n)for(A=0;A<d;++A)m.push("strokeText",[p[A],w+E*f[A],.5*(c+_)+A*_]);if(i)for(A=0;A<d;++A)m.push("fillText",[p[A],w+E*f[A],.5*(c+_)+A*_]);return this.labels_[o]=x,x},t.prototype.replayTextBackground_=function(t,e,i,n,o,r,s,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],a&&(t.fillStyle=r[1]),this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,i,n,o,r,s,a,l,h,u,c,p,d,f,g,_,y,m){var v=y||m;i-=r*=d[0],n-=s*=d[1];var C=g+u>o.width?o.width-u:g,x=l+c>o.height?o.height-c:l,A=_[3]+C*d[0]+_[1],E=_[0]+x*d[1]+_[2],w=i-_[3],S=n-_[0];(v||0!==p)&&(Vs[0]=w,Xs[0]=w,Vs[1]=S,Ys[1]=S,Ys[0]=w+A,Ks[0]=Ys[0],Ks[1]=S+E,Xs[1]=Ks[1]);var b=null;if(0!==p){var T=i+r,R=n+s;b=dt(Ws,T,R,1,1,p,-T,-R),ct(Ws,Vs),ct(Ws,Ys),ct(Ws,Ks),ct(Ws,Xs),St(Math.min(Vs[0],Ys[0],Ks[0],Xs[0]),Math.min(Vs[1],Ys[1],Ks[1],Xs[1]),Math.max(Vs[0],Ys[0],Ks[0],Xs[0]),Math.max(Vs[1],Ys[1],Ks[1],Xs[1]),Ns)}else St(w,S,w+A,S+E,Ns);var P=0,O=0;if(a){var I=this.renderBuffer_;I[0]=Math.max(I[0],Vt(Ns)),P=I[0],I[1]=Math.max(I[1],Bt(Ns)),O=I[1]}var F=t.canvas,L=m?m[2]*d[0]/2:0,M=Ns[0]-L<=(F.width+P)/e&&Ns[2]+L>=-P/e&&Ns[1]-L<=(F.height+O)/e&&Ns[3]+L>=-O/e;if(f&&(i=Math.round(i),n=Math.round(n)),a){if(!M&&1==a[0])return!1;var k=M?[t,b?b.slice(0):null,h,o,u,c,C,x,i,n,d,Ns.slice()]:null;k&&(v&&k.push(y,m,Vs.slice(0),Ys.slice(0),Ks.slice(0),Xs.slice(0)),a.push(k))}else M&&(v&&this.replayTextBackground_(t,Vs,Ys,Ks,Xs,y,m,!1),En(t,b,h,o,u,c,C,x,i,n,d));return!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=ct(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,i,n){for(var o=[],r=1,s=t.length;r<s;++r){var a=(c=t[r])[11];o.push({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:e})}n||(n=new(Ar())(9));var l=!1;for(r=0,s=o.length;r<s;++r)if(n.collides(o[r])){l=!0;break}if(!l){n.load(o);for(var h=1,u=t.length;h<u;++h){var c,p=(c=t[h])[0],d=p.globalAlpha;d!==i&&(p.globalAlpha=i),c.length>12&&this.replayTextBackground_(c[0],c[14],c[15],c[16],c[17],c[12],c[13],!0),En.apply(void 0,c),d!==i&&(p.globalAlpha=d)}}return t.length=1,n},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var o=this.textStates[e],r=this.createLabel(t,e,n,i),s=this.strokeStates[i],a=this.pixelRatio,l=Os[o.textAlign||ln],h=Os[o.textBaseline||hn],u=s&&s.lineWidth?s.lineWidth:0;return{label:r,anchorX:l*(r.width/a-2*o.scale[0])+2*(.5-l)*u,anchorY:h*r.height/a+2*(.5-h)*u}},t.prototype.execute_=function(t,e,i,n,o,r,s){var a,l,h;this.declutterItems.length=0,this.pixelCoordinates_&&x(i,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Ne(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),h=i,(l=this.renderedTransform_)[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5]);for(var u,c,p,d,f,g,_,y,m,v,C,A,E,w,S,b,T,R=0,P=n.length,O=0,I=0,F=0,L=null,M=null,k=this.coordinateCache_,D=this.viewRotation_,j=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,G={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:D},B=this.instructions!=n||this.overlaps?0:200;R<P;){var z=n[R];switch(z[0]){case ds.BEGIN_GEOMETRY:(S=z[1]).getGeometry()?void 0===s||Yt(s,z[3])?++R:R=z[2]+1:R=z[2];break;case ds.BEGIN_PATH:I>B&&(this.fill_(t),I=0),F>B&&(t.stroke(),F=0),I||F||(t.beginPath(),d=NaN,f=NaN),++R;break;case ds.CIRCLE:var N=a[O=z[1]],W=a[O+1],V=a[O+2]-N,Y=a[O+3]-W,K=Math.sqrt(V*V+Y*Y);t.moveTo(N+K,W),t.arc(N,W,K,0,2*Math.PI,!0),++R;break;case ds.CLOSE_PATH:t.closePath(),++R;break;case ds.CUSTOM:O=z[1],u=z[2];var X=z[3],U=z[4],Z=6==z.length?z[5]:void 0;G.geometry=X,G.feature=S,R in k||(k[R]=[]);var H=k[R];Z?Z(a,O,u,2,H):(H[0]=a[O],H[1]=a[O+1],H.length=2),U(H,G),++R;break;case ds.DRAW_IMAGE:O=z[1],u=z[2],v=z[3],c=z[4],p=z[5],m=r?null:z[6];var q=z[7],J=z[8],Q=z[9],$=z[10],tt=z[11],et=z[12],it=z[13],nt=z[14];if(!v&&z.length>=19){C=z[18],A=z[19],E=z[20],w=z[21];var ot=this.drawLabelWithPointPlacement_(C,A,E,w);v=ot.label,z[3]=v;var rt=z[22];c=(ot.anchorX-rt)*this.pixelRatio,z[4]=c;var st=z[23];p=(ot.anchorY-st)*this.pixelRatio,z[5]=p,q=v.height,z[7]=q,nt=v.width,z[14]=nt}var at=void 0;z.length>24&&(at=z[24]);var lt=void 0,ht=void 0,ut=void 0;z.length>16?(lt=z[15],ht=z[16],ut=z[17]):(lt=un,ht=!1,ut=!1),tt&&j?et+=D:tt||j||(et-=D);for(var ct=0,pt=0;O<u;O+=2)if(!(at&&at[ct++]<nt/this.pixelRatio)){if(m){var dt=Math.floor(pt);y=m.length<dt+1?[m[0][0]]:m[dt]}(It=this.replayImageOrLabel_(t,e,a[O],a[O+1],v,c,p,y,q,J,Q,$,et,it,o,nt,lt,ht?L:null,ut?M:null))&&y&&m[m.length-1]!==y&&m.push(y),y&&(y.length-1===y[0]&&this.declutterItems.push(this,y,S),pt+=1/y[0])}++R;break;case ds.DRAW_CHARS:var ft=z[1],gt=z[2],_t=z[3];y=r?null:z[4];var yt=z[5];w=z[6];var mt=z[7],vt=z[8],Ct=z[9];E=z[10];var xt=z[11];C=z[12],A=z[13];var At=[z[14],z[14]],Et=this.textStates[A],wt=Et.font,St=[Et.scale[0]*vt,Et.scale[1]*vt],bt=void 0;wt in this.widths_?bt=this.widths_[wt]:(bt={},this.widths_[wt]=bt);var Tt=zs(a,ft,gt,2),Rt=Math.abs(St[0])*xn(wt,C,bt);if(yt||Rt<=Tt){var Pt=this.textStates[A].textAlign,Ot=Bs(a,ft,gt,2,C,(Tt-Rt)*Os[Pt],mt,Math.abs(St[0]),xn,wt,bt,j?0:this.viewRotation_);if(Ot){var It=!1,Ft=void 0,Lt=void 0,Mt=void 0,kt=void 0,Dt=void 0;if(E)for(Ft=0,Lt=Ot.length;Ft<Lt;++Ft)Mt=(Dt=Ot[Ft])[4],kt=this.createLabel(Mt,A,"",E),c=Dt[2]+xt,p=_t*kt.height+2*(.5-_t)*xt*St[1]/St[0]-Ct,It=this.replayImageOrLabel_(t,e,Dt[0],Dt[1],kt,c,p,y,kt.height,1,0,0,Dt[3],At,!1,kt.width,un,null,null)||It;if(w)for(Ft=0,Lt=Ot.length;Ft<Lt;++Ft)Mt=(Dt=Ot[Ft])[4],kt=this.createLabel(Mt,A,w,""),c=Dt[2],p=_t*kt.height-Ct,It=this.replayImageOrLabel_(t,e,Dt[0],Dt[1],kt,c,p,y,kt.height,1,0,0,Dt[3],At,!1,kt.width,un,null,null)||It;It&&this.declutterItems.push(this,y,S)}}++R;break;case ds.END_GEOMETRY:if(void 0!==r){var jt=r(S=z[1]);if(jt)return jt}++R;break;case ds.FILL:B?I++:this.fill_(t),++R;break;case ds.MOVE_TO_LINE_TO:for(O=z[1],u=z[2],b=a[O],_=(T=a[O+1])+.5|0,(g=b+.5|0)===d&&_===f||(t.moveTo(b,T),d=g,f=_),O+=2;O<u;O+=2)g=(b=a[O])+.5|0,_=(T=a[O+1])+.5|0,O!=u-2&&g===d&&_===f||(t.lineTo(b,T),d=g,f=_);++R;break;case ds.SET_FILL_STYLE:L=z,this.alignFill_=z[2],I&&(this.fill_(t),I=0,F&&(t.stroke(),F=0)),t.fillStyle=z[1],++R;break;case ds.SET_STROKE_STYLE:M=z,F&&(t.stroke(),F=0),this.setStrokeStyle_(t,z),++R;break;case ds.STROKE:B?F++:t.stroke(),++R;break;default:++R}}I&&this.fill_(t),F&&t.stroke()},t.prototype.execute=function(t,e,i,n,o){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,o,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,i,n,o){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,o)},t}();var Zs=[js,Ls,Ds,ks,Gs,Ms],Hs=function(){function t(t,e,i,n,o,r){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e],o=[this.renderBuffer_||0,this.renderBuffer_||0];for(var r in n){var s=n[r];i[r]=new Us(this.resolution_,this.pixelRatio_,this.overlaps_,s,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,o=t.length;n<o;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o,r){var s=2*(n=Math.round(n))+1,a=dt(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Yi(s,s));var l,h=this.hitDetectionContext_;h.canvas.width!==s||h.canvas.height!==s?(h.canvas.width=s,h.canvas.height=s):h.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(Pt(l=[1/0,1/0,-1/0,-1/0],t),mt(l,e*(this.renderBuffer_+n),l));var u,c=function(t){if(void 0!==qs[t])return qs[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);for(var o=t,r=0,s=0;o>=r;)Js(i,t+o,t+r),Js(i,t+r,t+o),Js(i,t-r,t+o),Js(i,t-o,t+r),Js(i,t-o,t-r),Js(i,t-r,t-o),Js(i,t+r,t-o),Js(i,t+o,t-r),2*((s+=1+2*++r)-o)+1>0&&(s+=1-2*(o-=1));return qs[t]=i,i}(n);function p(t){for(var e=h.getImageData(0,0,s,s).data,i=0;i<s;i++)for(var n=0;n<s;n++)if(c[i][n]&&e[4*(n*s+i)+3]>0){var a=void 0;return(!r||u!=ks&&u!=Gs||-1!==r.indexOf(t))&&(a=o(t)),a||void h.clearRect(0,0,s,s)}}var d,f,g,_,m,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(y),d=v.length-1;d>=0;--d){var C=v[d].toString();for(g=this.executorsByZIndex_[C],f=Zs.length-1;f>=0;--f)if(void 0!==(_=g[u=Zs[f]])&&(m=_.executeHitDetection(h,a,i,p,l)))return m}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],o=e[2],r=e[3],s=[i,n,i,r,o,r,o,n];return Ne(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return R(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,n,o,r,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(y),this.maxExtent_&&(t.save(),this.clip(t,i));var l,h,u,c,p,d,f=r||Zs;for(l=0,h=a.length;l<h;++l){var g=a[l].toString();for(p=this.executorsByZIndex_[g],u=0,c=f.length;u<c;++u){var _=f[u];if(void 0!==(d=p[_]))if(!s||_!=ks&&_!=Gs)d.execute(t,e,i,n,o);else{var m=s[g];m?m.push(d,i.slice(0)):s[g]=[d,i.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),qs={0:[[!0]]};function Js(t,e,i){var n,o=Math.floor(t.length/2);if(e>=o)for(n=o;n<e;n++)t[n][i]=!0;else if(e<o)for(n=e+1;n<o;n++)t[n][i]=!0}function Qs(t,e,i,n,o,r){for(var s=Object.keys(t).map(Number).sort(y),a=0,l=s.length;a<l;++a)for(var h=t[s[a].toString()],u=void 0,c=0,p=h.length;c<p;){var d=h[c++],f=h[c++];d.execute(e,1,f,i,o),d!==u&&d.declutterItems.length>0&&(u=d,r.push({items:d.declutterItems,opacity:n}))}}const $s=Hs;var ta=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ea=function(t){function e(e,i,n,o,r,s,a){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=n,l.transform_=o,l.viewRotation_=r,l.squaredTolerance_=s,l.userTransform_=a,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=[1,0,0,1,0,0],l}return ta(e,t),e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var o=Ne(t,e,i,2,this.transform_,this.pixelCoordinates_),r=this.context_,s=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var h=0,u=o.length;h<u;h+=2){var c=o[h]-this.imageAnchorX_,p=o[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var d=c+this.imageAnchorX_,f=p+this.imageAnchorY_;dt(s,d,f,1,1,l,-d,-f),r.setTransform.apply(r,s),r.translate(d,f),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.setTransform(1,0,0,1,0,0)}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=Ne(t,e,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=n){var a=o[e]+this.textOffsetX_,l=o[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]){var h=dt(this.tmpLocalTransform_,a,l,1,1,s,-a,-l);r.setTransform.apply(r,h),r.translate(a,l),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&r.strokeText(this.text_,a,l),this.textFillState_&&r.fillText(this.text_,a,l)}}},e.prototype.moveToLineTo_=function(t,e,i,n,o){var r=this.context_,s=Ne(t,e,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(s[0],s[1]);var a=s.length;o&&(a-=2);for(var l=2;l<a;l+=2)r.lineTo(s[l],s[l+1]);return o&&r.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var o=0,r=i.length;o<r;++o)e=this.moveToLineTo_(t,e,i[o],n,!0);return e},e.prototype.drawCircle=function(t){if(Yt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var n=t.getFlatCoordinates();if(n){var o=t.getStride();return Ne(n,0,n.length,o,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],o=Math.sqrt(i*i+n*n),r=this.context_;r.beginPath(),r.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case s:this.drawPoint(t);break;case a:this.drawLineString(t);break;case l:this.drawPolygon(t);break;case h:this.drawMultiPoint(t);break;case u:this.drawMultiLineString(t);break;case c:this.drawMultiPolygon(t);break;case p:this.drawGeometryCollection(t);break;case d:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Yt(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Yt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),o=0,r=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,l=r.length;a<l;++a)o=this.moveToLineTo_(n,o,r[a],s,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,o=t.getEndss(),r=t.getStride();e.beginPath();for(var s=0,a=o.length;s<a;++s){var l=o[s];n=this.drawRings_(i,n,l,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(x(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:ln;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Zr(i||nn)}}else this.fillState_=null;if(e){var n=e.getColor(),o=e.getLineCap(),r=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:on,lineDash:r||rn,lineDashOffset:s||0,lineJoin:void 0!==a?a:sn,lineWidth:this.pixelRatio_*(void 0!==l?l:1),miterLimit:void 0!==h?h:10,strokeStyle:Zr(n||an)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getSize();if(e){var i=t.getAnchor(),n=t.getImage(1),o=t.getOrigin(),r=t.getScaleArray();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=e[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=[this.pixelRatio_*r[0],this.pixelRatio_*r[1]],this.imageWidth_=e[0]}else this.image_=null}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Zr(i||nn)}}else this.textFillState_=null;var n=t.getStroke();if(n){var o=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),a=n.getLineDashOffset(),l=n.getLineJoin(),h=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==r?r:on,lineDash:s||rn,lineDashOffset:a||0,lineJoin:void 0!==l?l:sn,lineWidth:void 0!==h?h:1,miterLimit:void 0!==u?u:10,strokeStyle:Zr(o||an)}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),g=t.getRotation(),_=t.getScaleArray(),y=t.getText(),m=t.getTextAlign(),v=t.getTextBaseline();this.textState_={font:void 0!==c?c:en,textAlign:void 0!==m?m:ln,textBaseline:void 0!==v?v:hn},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==g?g:0,this.textScale_=[this.pixelRatio_*_[0],this.pixelRatio_*_[1]]}else this.text_=""},e}(fs),ia="fraction",na="pixels",oa="bottom-left",ra="bottom-right",sa="top-left",aa="top-right";function la(t,e,i){return e+":"+t+":"+(i?function(t){return"string"==typeof t?t:Ur(t)}(i):"null")}var ha=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,i){var n=la(t,e,i);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,i,n){var o=la(t,e,i);this.cache_[o]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),ua=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ca=null,pa=function(t){function e(e,i,n,o,r,s){var a=t.call(this)||this;return a.hitDetectionImage_=null,a.image_=e||new Image,null!==o&&(a.image_.crossOrigin=o),a.canvas_={},a.color_=s,a.unlisten_=null,a.imageState_=r,a.size_=n,a.src_=i,a.tainted_,a}return ua(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){ca||(ca=Yi(1,1)),ca.drawImage(this.image_,0,0);try{ca.getImageData(0,0,1,1),this.tainted_=!1}catch(t){ca=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(F)},e.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=Yi(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=lo(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),this.isTainted_()){var n=this.color_;return i.globalCompositeOperation="multiply",i.fillStyle="rgb("+n[0]+","+n[1]+","+n[2]+")",i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",void i.drawImage(this.image_,0,0)}for(var o=i.getImageData(0,0,e.width,e.height),r=o.data,s=this.color_[0]/255,a=this.color_[1]/255,l=this.color_[2]/255,h=0,u=r.length;h<u;h+=4)r[h]*=s,r[h+1]*=a,r[h+2]*=l;i.putImageData(o,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(I),da=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const fa=function(t){function e(e){var i=this,n=e||{},o=void 0!==n.opacity?n.opacity:1,r=void 0!==n.rotation?n.rotation:0,s=void 0!==n.scale?n.scale:1,a=void 0!==n.rotateWithView&&n.rotateWithView;(i=t.call(this,{opacity:o,rotation:r,scale:s,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:a})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:sa,i.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:ia,i.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:ia,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var l=void 0!==n.img?n.img:null,h=void 0!==n.imgSize?n.imgSize:null,u=n.src;st(!(void 0!==u&&l),4),st(!l||l&&h,5),void 0!==u&&0!==u.length||!l||(u=l.src||Z(l)),st(void 0!==u&&u.length>0,6);var c=void 0!==n.src?0:2;return i.color_=void 0!==n.color?Kr(n.color):null,i.iconImage_=function(t,e,i,n,o,r){var s=ha.get(e,n,r);return s||(s=new pa(t,e,i,n,o,r),ha.set(e,n,r,s)),s}(l,u,h,i.crossOrigin_,c,i.color_),i.offset_=void 0!==n.offset?n.offset:[0,0],i.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:sa,i.origin_=null,i.size_=void 0!==n.size?n.size:null,i}return da(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==ia||this.anchorYUnits_==ia){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==ia&&(t[0]*=e[0]),this.anchorYUnits_==ia&&(t[1]*=e[1])}if(this.anchorOrigin_!=sa){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=aa&&this.anchorOrigin_!=ra||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=oa&&this.anchorOrigin_!=ra||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=sa){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),this.offsetOrigin_!=aa&&this.offsetOrigin_!=ra||(t[0]=n[0]-i[0]-t[0]),this.offsetOrigin_!=oa&&this.offsetOrigin_!=ra||(t[1]=n[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(F,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(F,t)},e}(Nr);function ga(t,e,i,n,o,r,s){var a=Yi(t[0]/2,t[1]/2);a.imageSmoothingEnabled=!1;for(var l=a.canvas,h=new ea(a,.5,o,null,s),u=i.length,c=Math.floor(16777215/u),p={},d=1;d<=u;++d){var f=i[d-1],g=f.getStyleFunction()||n;if(n){var _=g(f,r);if(_){Array.isArray(_)||(_=[_]);for(var m="#"+("000000"+(d*c).toString(16)).slice(-6),v=0,C=_.length;v<C;++v){var x=_[v],A=x.clone(),E=A.getFill();E&&E.setColor(m);var w=A.getStroke();w&&w.setColor(m),A.setText(void 0);var S=x.getImage();if(S){var b=S.getImageSize();if(!b)continue;var T=document.createElement("canvas");T.width=b[0],T.height=b[1];var R=T.getContext("2d",{alpha:!1});R.fillStyle=m;var P=R.canvas;R.fillRect(0,0,P.width,P.height),Yi(b?b[0]:P.width,b?b[1]:P.height).drawImage(P,0,0),A.setImage(new fa({img:P,imgSize:b,anchor:S.getAnchor(),anchorXUnits:na,anchorYUnits:na,offset:S.getOrigin(),size:S.getSize(),opacity:S.getOpacity(),scale:S.getScale(),rotation:S.getRotation(),rotateWithView:S.getRotateWithView()}))}var O=Number(A.getZIndex());(M=p[O])||(M={},p[O]=M,M.Polygon=[],M.Circle=[],M.LineString=[],M.Point=[]);var I=A.getGeometryFunction()(f);I&&Yt(o,I.getExtent())&&M[I.getType().replace("Multi","")].push(I,A)}}}}for(var F=Object.keys(p).map(Number).sort(y),L=(d=0,F.length);d<L;++d){var M=p[F[d]];for(var k in M){var D=M[k];for(v=0,C=D.length;v<C;v+=2){h.setStyle(D[v+1]);for(var j=0,G=e.length;j<G;++j)h.setTransform(e[j]),h.drawGeometry(D[v])}}}return a.getImageData(0,0,l.width,l.height)}function _a(t,e,i){var n=[];if(i){var o=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),r=i.data[o],s=i.data[o+1],a=i.data[o+2]+256*(s+256*r),l=Math.floor(16777215/e.length);a&&a%l==0&&n.push(e[a/l-1])}return n}var ya={Point:function(t,e,i,n){var o=i.getImage();if(o){if(2!=o.getImageState())return;var r=t.getBuilder(i.getZIndex(),ks);r.setImageStyle(o,t.addDeclutter(!1)),r.drawPoint(e,n)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Gs);a.setTextStyle(s,t.addDeclutter(!!o)),a.drawText(e,n)}},LineString:function(t,e,i,n){var o=i.getStroke();if(o){var r=t.getBuilder(i.getZIndex(),Ds);r.setFillStrokeStyle(null,o),r.drawLineString(e,n)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Gs);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,n)}},Polygon:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(o||r){var s=t.getBuilder(i.getZIndex(),js);s.setFillStrokeStyle(o,r),s.drawPolygon(e,n)}var a=i.getText();if(a){var l=t.getBuilder(i.getZIndex(),Gs);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,n)}},MultiPoint:function(t,e,i,n){var o=i.getImage();if(o){if(2!=o.getImageState())return;var r=t.getBuilder(i.getZIndex(),ks);r.setImageStyle(o,t.addDeclutter(!1)),r.drawMultiPoint(e,n)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Gs);a.setTextStyle(s,t.addDeclutter(!!o)),a.drawText(e,n)}},MultiLineString:function(t,e,i,n){var o=i.getStroke();if(o){var r=t.getBuilder(i.getZIndex(),Ds);r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,n)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Gs);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(r||o){var s=t.getBuilder(i.getZIndex(),js);s.setFillStrokeStyle(o,r),s.drawMultiPolygon(e,n)}var a=i.getText();if(a){var l=t.getBuilder(i.getZIndex(),Gs);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var o,r,s=e.getGeometriesArray();for(o=0,r=s.length;o<r;++o)(0,ya[s[o].getType()])(t,s[o],i,n)},Circle:function(t,e,i,n){var o=i.getFill(),r=i.getStroke();if(o||r){var s=t.getBuilder(i.getZIndex(),Ls);s.setFillStrokeStyle(o,r),s.drawCircle(e,n)}var a=i.getText();if(a){var l=t.getBuilder(i.getZIndex(),Gs);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,n)}}};function ma(t,e){return parseInt(Z(t),10)-parseInt(Z(e),10)}function va(t,e){var i=Ca(t,e);return i*i}function Ca(t,e){return.5*t/e}function xa(t,e,i,n,o,r){var s=!1,a=i.getImage();if(a){var l=a.getImageState();2==l||3==l?a.unlistenImageChange(o):(0==l&&a.load(),l=a.getImageState(),a.listenImageChange(o),s=!0)}return function(t,e,i,n,o){var r=i.getGeometryFunction()(e);if(r){var s=r.simplifyTransformed(n,o);i.getRenderer()?Aa(t,s,i,e):(0,ya[s.getType()])(t,s,i,e)}}(t,e,i,n,r),s}function Aa(t,e,i,n){if(e.getType()!=p)t.getBuilder(i.getZIndex(),Ms).drawCustom(e,n,i.getRenderer());else for(var o=e.getGeometries(),r=0,s=o.length;r<s;++r)Aa(t,o[r],i,n)}var Ea=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const wa=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=[1/0,1/0,-1/0,-1/0],i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.clipping=!0,i}return Ea(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,i){ut(t,e,0,0,i,0,0)}(this.pixelTransform,1/i,1/i),ft(this.inversePixelTransform,this.pixelTransform);var o=gt(this.pixelTransform);this.useContainer(e,o,n.opacity);var r=this.context,s=r.canvas,a=this.replayGroup_;if(!a||a.isEmpty())return!this.containerReused&&s.width>0&&(s.width=0),this.container;var l=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);s.width!=l||s.height!=h?(s.width=l,s.height=h,s.style.transform!==o&&(s.style.transform=o)):this.containerReused||r.clearRect(0,0,l,h),this.preRender(r,t);var u=t.extent,c=t.viewState,p=c.center,d=c.resolution,f=c.projection,g=c.rotation,_=f.getExtent(),y=this.getLayer().getSource(),m=!1;if(n.extent&&this.clipping){var v=ze(n.extent);(m=!At(v,t.extent)&&Yt(v,t.extent))&&this.clipUnrotated(r,t,v)}var C=t.viewHints,x=!(C[0]||C[1]),A=this.getRenderTransform(p,d,g,i,l,h,0),E=this.getLayer().getDeclutter()?{}:null;if(a.execute(r,1,A,g,x,void 0,E),y.getWrapX()&&f.canWrapX()&&!At(_,u)){for(var w=u[0],S=Vt(_),b=0,T=void 0;w<_[0];){T=S*--b;var R=this.getRenderTransform(p,d,g,i,l,h,T);a.execute(r,1,R,g,x,void 0,E),w+=S}for(b=0,w=u[2];w>_[2];){T=S*++b;var P=this.getRenderTransform(p,d,g,i,l,h,T);a.execute(r,1,P,g,x,void 0,E),w-=S}}if(E){var O=t.viewHints;Qs(E,r,g,1,!(O[0]||O[1]),t.declutterItems)}m&&r.restore(),this.postRender(r,t);var I=n.opacity,F=this.container;return I!==parseFloat(F.style.opacity)&&(F.style.opacity=1===I?"":String(I)),this.renderedRotation_!==c.rotation&&(this.renderedRotation_=c.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];ct(this.pixelTransform,n);var o=this.renderedCenter_,r=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.renderedExtent_,h=this.getLayer(),u=[],c=n[0]/2,p=n[1]/2;u.push(this.getRenderTransform(o,r,s,.5,c,p,0).slice());var d=h.getSource(),f=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!At(f,l)){for(var g=l[0],_=Vt(f),y=0,m=void 0;g<f[0];)m=_*--y,u.push(this.getRenderTransform(o,r,s,.5,c,p,m).slice()),g+=_;for(y=0,g=l[2];g>f[2];)m=_*++y,u.push(this.getRenderTransform(o,r,s,.5,c,p,m).slice()),g-=_}this.hitDetectionImageData_=ga(n,u,this.renderedFeatures_,h.getStyleFunction(),l,r,s)}e(_a(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_){var r=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,r,s,i,(function(t){var e=Z(t);if(!(e in l))return l[e]=!0,n(t,a)}),a.getDeclutter()?o:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[0],o=t.viewHints[1],r=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(!this.dirty_&&!r&&n||!s&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var a=t.extent,l=t.viewState,h=l.projection,u=l.resolution,c=t.pixelRatio,p=e.getRevision(),d=e.getRenderBuffer(),f=e.getRenderOrder();void 0===f&&(f=ma);var g=l.center.slice(),_=mt(a,d*u),y=[_.slice()],m=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!At(m,t.extent)){var v=Vt(m),C=Math.max(Vt(_)/2,v);_[0]=m[0]-C,_[2]=m[2]+C,Gr(g,h);var x=function(t,e){var i=e.getExtent(),n=Dt(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){var o=Vt(i),r=Math.floor((n[0]-i[0])/o)*o;t[0]-=r,t[2]-=r}return t}(y[0],h);x[0]<m[0]&&x[2]<m[2]?y.push([x[0]+v,x[1],x[2]+v,x[3]]):x[0]>m[0]&&x[2]>m[2]&&y.push([x[0]-v,x[1],x[2]-v,x[3]])}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==f&&At(this.renderedExtent_,_))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var A,E=new Fs(Ca(u,c),_,u,c,e.getDeclutter()),w=De();if(w){for(var S=0,b=y.length;S<b;++S)i.loadFeatures(Be(y[S]),u,w);A=Re(w,h)}else for(S=0,b=y.length;S<b;++S)i.loadFeatures(y[S],u,h);var T=va(u,c),R=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,u)),i){var o=this.renderFeature(t,T,i,E,A);this.dirty_=this.dirty_||o}}.bind(this),P=Be(_),O=i.getFeaturesInExtent(P);for(f&&O.sort(f),S=0,b=O.length;S<b;++S)R(O[S]);this.renderedFeatures_=O;var I=E.finish(),F=new $s(_,u,c,i.getOverlaps(),I,e.getRenderBuffer());return this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=f,this.renderedExtent_=_,this.renderedCenter_=g,this.renderedProjection_=h,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,o){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)r=xa(n,t,i[s],e,this.boundHandleStyleImageChange_,o)||r;else r=xa(n,t,i,e,this.boundHandleStyleImageChange_,o);return r},e}(Tn);var Sa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ba=function(t){function e(e){return t.call(this,e)||this}return Sa(e,t),e.prototype.createRenderer=function(){return new wa(this)},e}(as),Ta="image",Ra="hybrid",Pa="vector";var Oa=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ia={image:[js,Ls,Ds,ks,Gs],hybrid:[js,Ds],vector:[]},Fa={image:[Ms],hybrid:[ks,Gs,Ms],vector:[js,Ls,Ds,ks,Gs,Ms]};const La=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.dirty_=!1,i.renderedLayerRevision_,i.renderedPixelToCoordinateTransform_=null,i.renderedRotation_,i.renderTileImageQueue_={},i.tileListenerKeys_={},i.tmpTransform_=[1,0,0,1,0,0],i}return Oa(e,t),e.prototype.prepareTile=function(t,e,i,n){var o,r=Z(t),s=t.getState();return(2===s&&t.hifi||3===s)&&r in this.tileListenerKeys_&&(W(this.tileListenerKeys_[r]),delete this.tileListenerKeys_[r]),2!==s&&3!==s||(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t,e,i)&&(o=!0,n&&(this.renderTileImageQueue_[r]=t))),o},e.prototype.getTile=function(e,i,n,o){var r=o.pixelRatio,s=o.viewState,a=s.resolution,l=s.projection,h=this.getLayer(),u=h.getSource().getTile(e,i,n,r,l);if(u.getState()<2){u.wantedResolution=a;var c=Z(u);if(!(c in this.tileListenerKeys_)){var p=z(u,F,this.prepareTile.bind(this,u,r,l,!0));this.tileListenerKeys_[c]=p}}else{var d=o.viewHints;!(!d[0]&&!d[1])&&u.wantedResolution||(u.wantedResolution=a),this.prepareTile(u,r,l,!1)&&h.getRenderMode()!==Pa&&this.renderTileImage_(u,o)}return t.prototype.getTile.call(this,e,i,n,o)},e.prototype.isDrawableTile=function(e){var i=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&(i.getRenderMode()===Pa?Z(i)in e.executorGroups:e.hasContext(i))},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,i){var n=this.getLayer(),o=n.getRevision(),r=n.getRenderOrder()||null,s=t.wantedResolution,a=t.getReplayState(n);if(a.dirty||a.renderedResolution!==s||a.renderedRevision!=o||a.renderedRenderOrder!=r||a.renderedZ!==t.sourceZ){var l=n.getSource(),h=l.getTileGrid(),u=l.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),c=l.getSourceTiles(e,i,t),p=Z(n);delete t.hitDetectionImageData[p],t.executorGroups[p]=[];for(var d=function(i,o){var d=c[i];if(2!=d.getState())return"continue";var g=d.tileCoord,_=h.getTileCoordExtent(g),y=zt(u,_),m=Rt(_,y)?null:mt(y,n.getRenderBuffer()*s,f.tmpExtent);a.dirty=!1;var v=new Fs(0,y,s,e,n.getDeclutter()),C=va(s,e),x=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,s)),e){var o=this.renderFeature(t,C,e,v);this.dirty_=this.dirty_||o,a.dirty=a.dirty||o}},A=d.getFeatures();r&&r!==a.renderedRenderOrder&&A.sort(r);for(var E=0,w=A.length;E<w;++E){var S=A[E];m&&!Yt(m,S.getGeometry().getExtent())||x.call(f,S)}var b=v.finish(),T=n.getRenderMode()!==Pa&&n.getDeclutter()&&1===c.length?null:y,R=new $s(T,s,e,l.getOverlaps(),b,n.getRenderBuffer());t.executorGroups[p].push(R)},f=this,g=0,_=c.length;g<_;++g)d(g);a.renderedRevision=o,a.renderedZ=t.sourceZ,a.renderedRenderOrder=r,a.renderedResolution=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){var r=e.viewState.resolution,s=e.viewState.rotation;i=null==i?0:i;var a,l,h,u=this.getLayer(),c=u.getDeclutter(),p=u.getSource().getTileGridForProjection(e.viewState.projection),d={},f=this.renderedTiles,g=function(){var e=f[l],h=xt(p.getTileCoordExtent(e.wrappedTileCoord),t);if(!c&&!h)return"continue";for(var g=e.executorGroups[Z(u)],_=0,y=g.length;_<y;++_){var m=g[_];a=a||m.forEachFeatureAtCoordinate(t,r,s,i,(function(t){if(h||o&&-1!==o.indexOf(t)){var e=t.getId();if(void 0===e&&(e=Z(t)),!(e in d))return d[e]=!0,n(t,u)}}),u.getDeclutter()?o:null)}};for(l=0,h=f.length;l<h;++l)g();return a},e.prototype.getFeatures=function(t){return new Promise(function(e,i){for(var n,o=this.getLayer(),r=Z(o),s=o.getSource(),a=this.renderedProjection,l=a.getExtent(),h=this.renderedResolution,u=s.getTileGridForProjection(a),c=ct(this.renderedPixelToCoordinateTransform_,t.slice()),p=u.getTileCoordForCoordAndResolution(c,h),d=0,f=this.renderedTiles.length;d<f;++d)if(p.toString()===this.renderedTiles[d].tileCoord.toString()){if(2===(n=this.renderedTiles[d]).getState()&&n.hifi){var g=u.getTileCoordExtent(n.tileCoord);s.getWrapX()&&a.canWrapX()&&!At(l,g)&&Gr(c,a);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var _=Nt(u.getTileCoordExtent(n.wrappedTileCoord)),y=[(c[0]-_[0])/h,(_[1]-c[1])/h],m=n.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),v=n.hitDetectionImageData[r];if(!v&&!this.animatingOrInteracting_){var C=jo(u.getTileSize(u.getZForResolution(h))),x=[C[0]/2,C[1]/2],A=this.renderedRotation_;v=ga(C,[this.getRenderTransform(u.getTileCoordCenter(n.wrappedTileCoord),h,0,.5,x[0],x[1],0)],m,o.getStyleFunction(),u.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(o).renderedResolution,A),n.hitDetectionImageData[r]=v}e(_a(y,m,v))}}.bind(this))},e.prototype.handleFontsChanged=function(){b(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,i){var n=e.viewHints,o=!(n[0]||n[1]);this.renderQueuedTileImages_(o,e),t.prototype.renderFrame.call(this,e,i),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var r=this.getLayer(),s=r.getRenderMode();if(s===Ta)return this.container;var a=r.getSource(),l=e.usedTiles[Z(a)];for(var h in this.renderTileImageQueue_)l&&h in l||delete this.renderTileImageQueue_[h];for(var u=this.context,c=r.getDeclutter()?{}:null,p=Fa[s],d=e.pixelRatio,f=e.viewState,g=f.center,_=f.resolution,y=f.rotation,m=e.size,v=Math.round(m[0]*d),C=Math.round(m[1]*d),x=this.renderedTiles,A=a.getTileGridForProjection(e.viewState.projection),E=[],w=[],S=x.length-1;S>=0;--S)for(var b=x[S],T=b.tileCoord,R=A.getTileCoordExtent(b.wrappedTileCoord),P=A.getTileCoordExtent(T,this.tmpExtent)[0]-R[0],O=ht(pt(this.inversePixelTransform.slice(),1/d,1/d),this.getRenderTransform(g,_,y,d,v,C,P)),I=b.executorGroups[Z(r)],F=!1,L=0,M=I.length;L<M;++L){var k=I[L];if(k.hasExecutors(p)){var D=b.tileCoord[0],j=void 0;if(!c&&!F){j=k.getClipCoords(O),u.save();for(var G=0,B=E.length;G<B;++G){var z=E[G];D<w[G]&&(u.beginPath(),u.moveTo(j[0],j[1]),u.lineTo(j[2],j[3]),u.lineTo(j[4],j[5]),u.lineTo(j[6],j[7]),u.moveTo(z[6],z[7]),u.lineTo(z[4],z[5]),u.lineTo(z[2],z[3]),u.lineTo(z[0],z[1]),u.clip())}}k.execute(u,1,O,y,o,p,c),c||F||(u.restore(),E.push(j),w.push(D),F=!0)}}return c&&Qs(c,u,y,e.layerStatesArray[e.layerIndex].opacity,o,e.declutterItems),this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var i in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[i];delete this.renderTileImageQueue_[i],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var r=0,s=i.length;r<s;++r)o=xa(n,t,i[r],e,this.boundHandleStyleImageChange_)||o;else o=xa(n,t,i,e,this.boundHandleStyleImageChange_);return o},e.prototype.tileImageNeedsRender_=function(t,e,i){var n=this.getLayer(),o=t.getReplayState(n),r=n.getRevision(),s=t.sourceZ,a=t.wantedResolution;return o.renderedTileResolution!==a||o.renderedTileRevision!==r||o.renderedTileZ!==s},e.prototype.renderTileImage_=function(t,e){var i=this.getLayer(),n=t.getReplayState(i),o=i.getRevision(),r=t.executorGroups[Z(i)];n.renderedTileRevision=o,n.renderedTileZ=t.sourceZ;var s=t.wrappedTileCoord,a=s[0],l=i.getSource(),h=e.pixelRatio,u=e.viewState.projection,c=l.getTileGridForProjection(u),p=c.getResolution(t.tileCoord[0]),d=e.pixelRatio/t.wantedResolution*p,f=c.getResolution(a),g=t.getContext(i);h=Math.max(h,d/h);var _=l.getTilePixelSize(a,h,u);g.canvas.width=_[0],g.canvas.height=_[1];var y=h/d;if(1!==y){var m=lt(this.tmpTransform_);pt(m,y,y),g.setTransform.apply(g,m)}var v=c.getTileCoordExtent(s,this.tmpExtent),C=d/f,x=lt(this.tmpTransform_);pt(x,C,-C),function(t,e,i){ht(t,ut(at,1,0,0,1,e,i))}(x,-v[0],-v[3]);for(var A=0,E=r.length;A<E;++A)r[A].execute(g,y,x,0,!0,Ia[i.getRenderMode()]);n.renderedTileResolution=t.wantedResolution},e}(Ln);var Ma=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ka=function(t){function e(e){var i=this,n=e||{},o=S({},n);delete o.preload,delete o.useInterimTilesOnError,i=t.call(this,o)||this;var r=n.renderMode||Ra;return st(null==r||r==Ta||r==Ra||r==Pa,28),i.renderMode_=r,i.setPreload(n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return Ma(e,t),e.prototype.createRenderer=function(){return new La(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(Ri)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Pi)},e.prototype.setPreload=function(t){this.set(Ri,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Pi,t)},e}(as);function Da(t,e,i,n,o,r,s){var a,l=t[e],h=t[e+1],u=t[i]-l,c=t[i+1]-h;if(0===u&&0===c)a=e;else{var p=((o-l)*u+(r-h)*c)/(u*u+c*c);if(p>1)a=i;else{if(p>0){for(var d=0;d<n;++d)s[d]=ee(t[e+d],t[i+d],p);return void(s.length=n)}a=e}}for(d=0;d<n;++d)s[d]=t[a+d];s.length=n}function ja(t,e,i,n,o){var r=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var a=t[e],l=t[e+1],h=Jt(r,s,a,l);h>o&&(o=h),r=a,s=l}return o}function Ga(t,e,i,n,o,r,s,a,l,h,u){if(e==i)return h;var c,p;if(0===o){if((p=Jt(s,a,t[e],t[e+1]))<h){for(c=0;c<n;++c)l[c]=t[e+c];return l.length=n,p}return h}for(var d=u||[NaN,NaN],f=e+n;f<i;)if(Da(t,f-n,f,n,s,a,d),(p=Jt(s,a,d[0],d[1]))<h){for(h=p,c=0;c<n;++c)l[c]=d[c];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(p)-Math.sqrt(h))/o|0,1);if(r&&(Da(t,i-n,e,n,s,a,d),(p=Jt(s,a,d[0],d[1]))<h)){for(h=p,c=0;c<n;++c)l[c]=d[c];l.length=n}return h}function Ba(t,e,i,n){for(var o=0,r=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],l=t[e+1];o+=s*a-r*l,r=a,s=l}return o/2}var za=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Na=function(t){function e(e,i){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return za(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Ct(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ja(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ga(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return Ba(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return gs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=function(t,e,i,n,o,r,s){var a=(i-e)/n;if(a<3){for(;e<i;e+=n)r[s++]=t[e],r[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var h=[e,i-n],u=0;h.length>0;){for(var c=h.pop(),p=h.pop(),d=0,f=t[p],g=t[p+1],_=t[c],y=t[c+1],m=p+n;m<c;m+=n){var v=qt(t[m],t[m+1],f,g,_,y);v>d&&(u=m,d=v)}d>o&&(l[(u-e)/n]=1,p+n<u&&h.push(p,u),u+n<c&&h.push(u,c))}for(m=0;m<a;++m)l[m]&&(r[s++]=t[e+m*n],r[s++]=t[e+m*n+1]);return s}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,Xe)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Je(this.flatCoordinates,0,t,this.stride),this.changed()},e}(qe);function Wa(t,e,i,n,o){return!Ft(o,(function(o){return!Va(t,e,i,n,o[0],o[1])}))}function Va(t,e,i,n,o,r){for(var s=0,a=t[i-n],l=t[i-n+1];e<i;e+=n){var h=t[e],u=t[e+1];l<=r?u>r&&(h-a)*(r-l)-(o-a)*(u-l)>0&&s++:u<=r&&(h-a)*(r-l)-(o-a)*(u-l)<0&&s--,a=h,l=u}return 0!==s}function Ya(t,e,i,n,o,r){if(0===i.length)return!1;if(!Va(t,e,i[0],n,o,r))return!1;for(var s=1,a=i.length;s<a;++s)if(Va(t,i[s-1],i[s],n,o,r))return!1;return!0}function Ka(t,e,i,n,o){var r=Ot([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!Yt(o,r)&&(!!At(o,r)||r[0]>=o[0]&&r[2]<=o[2]||r[1]>=o[1]&&r[3]<=o[3]||function(t,e,i,n,o){for(var r,s=[t[e],t[e+1]],a=[];e+n<i;e+=n){if(a[0]=t[e+n],a[1]=t[e+n+1],r=o(s,a))return r;s[0]=a[0],s[1]=a[1]}return!1}(t,e,i,n,(function(t,e){return function(t,e,i){var n=!1,o=wt(t,e),r=wt(t,i);if(1===o||1===r)n=!0;else{var s=t[0],a=t[1],l=t[2],h=t[3],u=e[0],c=e[1],p=i[0],d=i[1],f=(d-c)/(p-u),g=void 0,_=void 0;2&r&&!(2&o)&&(n=(g=p-(d-h)/f)>=s&&g<=l),n||!(4&r)||4&o||(n=(_=d-(p-l)*f)>=a&&_<=h),n||!(8&r)||8&o||(n=(g=p-(d-a)/f)>=s&&g<=l),n||!(16&r)||16&o||(n=(_=d-(p-s)*f)>=a&&_<=h)}return n}(o,t,e)})))}function Xa(t,e,i,n){for(;e<i-n;){for(var o=0;o<n;++o){var r=t[e+o];t[e+o]=t[i-n+o],t[i-n+o]=r}e+=n,i-=n}}function Ua(t,e,i,n){for(var o=!0,r=0;r<n;++r)if(t[e+r]!==t[i-n+r]){o=!1;break}o&&(i-=n);var s=function(t,e,i,n){for(var o=-1,r=1/0,s=1/0,a=e;a<i;a+=n){var l=t[a],h=t[a+1];h>r||h==r&&l>=s||(o=a,r=h,s=l)}return o}(t,e,i,n),a=s-n;a<e&&(a=i-n);var l=s+n;l>=i&&(l=e);var h=t[a],u=t[a+1],c=t[s],p=t[s+1],d=t[l],f=t[l+1];return c*f+h*p+u*d-(u*c+p*d+h*f)<0}function Za(t,e,i,n,o){for(var r=void 0!==o&&o,s=0,a=i.length;s<a;++s){var l=i[s],h=Ua(t,e,l,n);(0===s?r&&h||!r&&!h:r&&!h||!r&&h)&&Xa(t,e,l,n),e=l}return e}var Ha=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qa=function(t){function e(e,i,n){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==i&&n?(o.setFlatCoordinates(i,e),o.ends_=n):o.setCoordinates(e,i),o}return Ha(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?C(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Ct(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,o){for(var r=0,s=i.length;r<s;++r){var a=i[r];o=ja(t,e,a,n,o),e=a}return o}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,o,r,s,a,l,h,u){for(var c=u||[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];h=Ga(t,e,f,n,o,r,s,a,l,h,c),e=f}return h}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Ya(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,n){for(var o=0,r=0,s=i.length;r<s;++r){var a=i[r];o+=Ba(t,e,a,n),e=a}return o}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Za(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,_s(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Dt(this.getExtent());this.flatInteriorPoint_=function(t,e,i,n,o,r,s){for(var a,l,h,u,c,p,d,f=o[r+1],g=[],_=0,m=i.length;_<m;++_){var v=i[_];for(u=t[v-n],p=t[v-n+1],a=e;a<v;a+=n)c=t[a],d=t[a+1],(f<=p&&d<=f||p<=f&&f<=d)&&(h=(f-p)/(d-p)*(c-u)+u,g.push(h)),u=c,p=d}var C=NaN,x=-1/0;for(g.sort(y),u=g[0],a=1,l=g.length;a<l;++a){c=g[a];var A=Math.abs(c-u);A>x&&Ya(t,e,i,n,h=(u+c)/2,f)&&(C=h,x=A),u=c}return isNaN(C)&&(C=o[r]),s?(s.push(C,f,x),s):[C,f,x]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new $e(this.getFlatInteriorPoint(),"XYM")},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Na(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],o=0,r=0,s=i.length;r<s;++r){var a=i[r],l=new Na(e.slice(o,a),t);n.push(l),o=a}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,n,o){for(var r=void 0!==o&&o,s=0,a=i.length;s<a;++s){var l=i[s],h=Ua(t,e,l,n);if(0===s){if(r&&h||!r&&!h)return!1}else if(r&&!h||!r&&h)return!1;e=l}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Za(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,o,r,s,a){for(var l=0,h=i.length;l<h;++l){var u=i[l];s=Ss(t,e,u,n,o,r,s),a.push(s),e=u}return s}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,Xe,n)},e.prototype.getType=function(){return l},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,o){if(!function(t,e,i,n,o){return!!(Ka(t,e,i,n,o)||Va(t,e,i,n,o[0],o[1])||Va(t,e,i,n,o[0],o[3])||Va(t,e,i,n,o[2],o[1])||Va(t,e,i,n,o[2],o[3]))}(t,e,i[0],n,o))return!1;if(1===i.length)return!0;for(var r=1,s=i.length;r<s;++r)if(Wa(t,i[r-1],i[r],n,o)&&!Ka(t,i[r-1],i[r],n,o))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,n,o){for(var r=o||[],s=0,a=0,l=i.length;a<l;++a){var h=Je(t,e,i[a],n);r[s++]=h,e=h}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(qe);const Ja=qa;function Qa(t){var e=t[0],i=t[1],n=t[2],o=t[3],r=[e,i,e,o,n,o,n,i,e,i];return new qa(r,Xe,[r.length])}const $a=class extends vr{constructor(t,e,i){super(t,e),this.converter=i||new class{constructor(t){this.scene=t,this.boundOnRemoveOrClearFeatureListener_=this.onRemoveOrClearFeature_.bind(this),this.defaultBillboardEyeOffset_=new Cesium.Cartesian3(0,0,10)}onRemoveOrClearFeature_(t){const e=t.target;console.assert(e instanceof Ir);const i=ri.obj(e).olcs_cancellers;if(i){const n=t.feature;if(n){const t=ni(n),e=i[t];e&&(e(),delete i[t])}else{for(const t in i)i.hasOwnProperty(t)&&i[t]();ri.obj(e).olcs_cancellers={}}}}setReferenceForPicking(t,e,i){i.olLayer=t,i.olFeature=e}createColoredPrimitive(t,e,i,n,o,r){const s={flat:!0,renderState:{depthTest:{enabled:!0}}};void 0!==r&&(s.renderState||(s.renderState={}),s.renderState.lineWidth=r);const a=function(t,e){const i=new Cesium.GeometryInstance({geometry:t});return!e||e instanceof Cesium.ImageMaterialProperty||(i.attributes={color:Cesium.ColorGeometryInstanceAttribute.fromColor(e)}),i}(n,o);let l;if(this.getHeightReference(t,e,i)===Cesium.HeightReference.CLAMP_TO_GROUND){const t=a.geometry.constructor;if(t&&!t.createShadowVolume)return null;l=new Cesium.GroundPrimitive({geometryInstances:a})}else l=new Cesium.Primitive({geometryInstances:a});if(o instanceof Cesium.ImageMaterialProperty){const t=o.image.getValue().toDataURL();l.appearance=new Cesium.MaterialAppearance({flat:!0,renderState:{depthTest:{enabled:!0}},material:new Cesium.Material({fabric:{type:"Image",uniforms:{image:t}}})})}else l.appearance=new Cesium.PerInstanceColorAppearance(s);return this.setReferenceForPicking(t,e,l),l}extractColorFromOlStyle(t,e){const i=t.getFill()?t.getFill().getColor():null,n=t.getStroke()?t.getStroke().getColor():null;let o="black";return n&&e?o=n:i&&(o=i),rr.convertColorToCesium(o)}extractLineWidthFromOlStyle(t){const e=t.getStroke()?t.getStroke().getWidth():void 0;return void 0!==e?e:1}wrapFillAndOutlineGeometries(t,e,i,n,o,r){const s=this.extractColorFromOlStyle(r,!1),a=this.extractColorFromOlStyle(r,!0),l=new Cesium.PrimitiveCollection;if(r.getFill()){const o=this.createColoredPrimitive(t,e,i,n,s);console.assert(!!o),l.add(o)}if(r.getStroke()&&o){const n=this.extractLineWidthFromOlStyle(r),s=this.createColoredPrimitive(t,e,i,o,a,n);s&&l.add(s)}return l}addTextStyle(t,e,i,n,o){let r;if(o instanceof Cesium.PrimitiveCollection?r=o:(r=new Cesium.PrimitiveCollection,r.add(o)),!n.getText())return r;const s=n.getText(),a=this.olGeometry4326TextPartToCesium(t,e,i,s);return a&&r.add(a),r}csAddBillboard(t,e,i,n,o,r){e.eyeOffset||(e.eyeOffset=this.defaultBillboardEyeOffset_);const s=t.add(e);return this.setReferenceForPicking(i,n,s),s}olCircleGeometryToCesium(t,e,i,n,o){i=rr.olGeometryCloneTo4326(i,n),console.assert("Circle"==i.getType());let r=i.getCenter();const s=3==r.length?r[2]:0;let a=r.slice();a[0]+=i.getRadius(),r=rr.ol4326CoordinateToCesiumCartesian(r),a=rr.ol4326CoordinateToCesiumCartesian(a);const l=Cesium.Cartesian3.distance(r,a),h=new Cesium.CircleGeometry({center:r,radius:l,height:s});let u,c;if(this.getHeightReference(t,e,i)===Cesium.HeightReference.CLAMP_TO_GROUND){const n=this.extractLineWidthFromOlStyle(o);if(n){const r=function(t,e,i,n){for(var o=[],r=0;r<32;++r)C(o,ve(t,e,2*Math.PI*r/32,void 0));return o.push(o[0],o[1]),new qa(o,Xe,[o.length])}(i.getCenter(),l),s=rr.ol4326CoordinateArrayToCsCartesians(r.getLinearRing(0).getCoordinates());if(oi(this.scene))u=new Cesium.GroundPolylinePrimitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.GroundPolylineGeometry({positions:s,width:n})}),appearance:new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(e,o,!0)}),classificationType:Cesium.ClassificationType.TERRAIN}),u.readyPromise.then((()=>{this.setReferenceForPicking(t,e,u._primitive)}));else{const i=this.extractColorFromOlStyle(o,!0);u=this.createStackedGroundCorridors(t,e,n,i,s)}}}else c=new Cesium.CircleOutlineGeometry({center:r,radius:l,extrudedHeight:s,height:s});const p=this.wrapFillAndOutlineGeometries(t,e,i,h,c,o);return u&&p.add(u),this.addTextStyle(t,e,i,o,p)}createStackedGroundCorridors(t,e,i,n,o){Array.isArray(o[0])||(o=[o]),i=Math.max(3,i);const r=[];let s=0;for(const t of[1e3,4e3,16e3,64e3,254e3,1e6,1e7]){const e={width:i*=2.14,vertexFormat:Cesium.VertexFormat.POSITION_ONLY};for(const i of o)e.positions=i,r.push(new Cesium.GeometryInstance({geometry:new Cesium.CorridorGeometry(e),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(n),distanceDisplayCondition:new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(s,t-1)}}));s=t}return new Cesium.GroundPrimitive({geometryInstances:r})}olLineStringGeometryToCesium(t,e,i,n,o){i=rr.olGeometryCloneTo4326(i,n),console.assert("LineString"==i.getType());const r=rr.ol4326CoordinateArrayToCsCartesians(i.getCoordinates()),s=this.extractLineWidthFromOlStyle(o);let a;const l=this.getHeightReference(t,e,i);if(l!==Cesium.HeightReference.CLAMP_TO_GROUND||oi(this.scene)){const i=new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(e,o,!0)}),n={positions:r,width:s},h={appearance:i};if(l===Cesium.HeightReference.CLAMP_TO_GROUND){const i=new Cesium.GroundPolylineGeometry(n);h.geometryInstances=new Cesium.GeometryInstance({geometry:i}),a=new Cesium.GroundPolylinePrimitive(h),a.readyPromise.then((()=>{this.setReferenceForPicking(t,e,a._primitive)}))}else{n.vertexFormat=i.vertexFormat;const t=new Cesium.PolylineGeometry(n);h.geometryInstances=new Cesium.GeometryInstance({geometry:t}),a=new Cesium.Primitive(h)}}else{const i=this.extractColorFromOlStyle(o,!0);a=this.createStackedGroundCorridors(t,e,s,i,r)}return this.setReferenceForPicking(t,e,a),this.addTextStyle(t,e,i,o,a)}olPolygonGeometryToCesium(t,e,i,n,o){i=rr.olGeometryCloneTo4326(i,n),console.assert("Polygon"==i.getType());const r=this.getHeightReference(t,e,i);let s,a,l;if(5==i.getCoordinates()[0].length&&"rectangle"===e.getGeometry().get("olcs.polygon_kind")){const t=i.getCoordinates()[0],e=yt(t),n=Cesium.Rectangle.fromDegrees(e[0],e[1],e[2],e[3]);let o=0;if(3==t[0].length)for(let e=0;e<t.length;e++)o=Math.max(o,t[e][2]);s=new Cesium.RectangleGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:n,height:o}),a=new Cesium.RectangleOutlineGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:n,height:o})}else{const n=i.getLinearRings(),h={},u=h;console.assert(n.length>0);for(let t=0;t<n.length;++t){const e=n[t].getCoordinates(),i=rr.ol4326CoordinateArrayToCsCartesians(e);console.assert(i&&i.length>0),0==t?h.positions=i:(h.holes||(h.holes=[]),h.holes.push({positions:i}))}if(s=new Cesium.PolygonGeometry({polygonHierarchy:u,perPositionHeight:!0}),r===Cesium.HeightReference.CLAMP_TO_GROUND){const i=this.extractLineWidthFromOlStyle(o);if(i>0){const n=[h.positions];if(h.holes)for(let t=0;t<h.holes.length;++t)n.push(h.holes[t].positions);if(oi(this.scene)){const r=new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(e,o,!0)}),s=[];for(const t of n){const e=new Cesium.GroundPolylineGeometry({positions:t,width:i});s.push(new Cesium.GeometryInstance({geometry:e}))}const a={appearance:r,geometryInstances:s};l=new Cesium.GroundPolylinePrimitive(a),l.readyPromise.then((()=>{this.setReferenceForPicking(t,e,l._primitive)}))}else{const r=this.extractColorFromOlStyle(o,!0);l=this.createStackedGroundCorridors(t,e,i,r,n)}}}else a=new Cesium.PolygonOutlineGeometry({polygonHierarchy:h,perPositionHeight:!0})}const h=this.wrapFillAndOutlineGeometries(t,e,i,s,a,o);return l&&h.add(l),this.addTextStyle(t,e,i,o,h)}getHeightReference(t,e,i){let n=i.get("altitudeMode");void 0===n&&(n=e.get("altitudeMode")),void 0===n&&(n=t.get("altitudeMode"));let o=Cesium.HeightReference.NONE;return"clampToGround"===n?o=Cesium.HeightReference.CLAMP_TO_GROUND:"relativeToGround"===n&&(o=Cesium.HeightReference.RELATIVE_TO_GROUND),o}createBillboardFromImage(t,e,i,n,o,r,s,a){r instanceof fa&&r.load();const l=r.getImage(1),h=function(){if(!l)return;if(!(l instanceof HTMLCanvasElement||l instanceof Image||l instanceof HTMLImageElement))return;const n=i.getCoordinates(),h=rr.ol4326CoordinateToCesiumCartesian(n);let u;const c=r.getOpacity();void 0!==c&&(u=new Cesium.Color(1,1,1,c));const p=r.getScale(),d=this.getHeightReference(t,e,i),f={image:l,color:u,scale:p,heightReference:d,position:h};if(Object.assign(f,e.get("cesiumOptions")),r instanceof fa){const t=r.getAnchor();t&&(f.pixelOffset=new Cesium.Cartesian2((l.width/2-t[0])*p,(l.height/2-t[1])*p))}const g=this.csAddBillboard(s,f,t,e,i,o);a&&a(g)}.bind(this);if(l instanceof Image&&!function(t){return""!=t.src&&0!=t.naturalHeight&&0!=t.naturalWidth&&t.complete}(l)){let i=!1;const n=t.getSource(),o=function(){i=!0};n.on(["removefeature","clear"],this.boundOnRemoveOrClearFeatureListener_);let r=ri.obj(n).olcs_cancellers;r||(r=ri.obj(n).olcs_cancellers={});const a=ni(e);r[a]&&r[a](),r[a]=o;const u=function(){l.removeEventListener("load",u),s.isDestroyed()||i||h()};l.addEventListener("load",u)}else h()}olPointGeometryToCesium(t,e,i,n,o,r,s){console.assert("Point"==i.getType()),i=rr.olGeometryCloneTo4326(i,n);let a=null;const l=o.getImage();if(l){const h=i.get("olcs_model")||e.get("olcs_model");if(h){const t=h(),e=Object.assign({},{scene:this.scene},t.cesiumOptions),i=Cesium.Model.fromGltf(e);a=new Cesium.PrimitiveCollection,a.add(i),t.debugModelMatrix&&a.add(new Cesium.DebugModelMatrixPrimitive({modelMatrix:t.debugModelMatrix}))}else this.createBillboardFromImage(t,e,i,n,o,l,r,s)}return o.getText()?this.addTextStyle(t,e,i,o,a||new Cesium.Primitive):a}olMultiGeometryToCesium(t,e,i,n,o,r,s){const a=function(i,r){const s=new Cesium.PrimitiveCollection;return i.forEach((i=>{s.add(r(t,e,i,n,o))})),s};let l;switch(i.getType()){case"MultiPoint":if(l=(i=i).getPoints(),o.getText()){const i=new Cesium.PrimitiveCollection;return l.forEach((a=>{console.assert(a);const l=this.olPointGeometryToCesium(t,e,a,n,o,r,s);l&&i.add(l)})),i}return l.forEach((i=>{console.assert(i),this.olPointGeometryToCesium(t,e,i,n,o,r,s)})),null;case"MultiLineString":return l=(i=i).getLineStrings(),a(l,this.olLineStringGeometryToCesium.bind(this));case"MultiPolygon":return l=(i=i).getPolygons(),a(l,this.olPolygonGeometryToCesium.bind(this));default:console.assert(!1,`Unhandled multi geometry type${i.getType()}`)}}olGeometry4326TextPartToCesium(t,e,i,n){const o=n.getText();if(!o)return null;const r=new Cesium.LabelCollection({scene:this.scene}),s=Dt(i.getExtent());if(i instanceof qe){const t=i.getFirstCoordinate();s[2]=3==t.length?t[2]:0}const a={};a.position=rr.ol4326CoordinateToCesiumCartesian(s),a.text=o,a.heightReference=this.getHeightReference(t,e,i);const l=n.getOffsetX(),h=n.getOffsetY();if(0!=l&&0!=h){const t=new Cesium.Cartesian2(l,h);a.pixelOffset=t}let u,c;switch(a.font=n.getFont()||"10px sans-serif",n.getFill()&&(a.fillColor=this.extractColorFromOlStyle(n,!1),u=Cesium.LabelStyle.FILL),n.getStroke()&&(a.outlineWidth=this.extractLineWidthFromOlStyle(n),a.outlineColor=this.extractColorFromOlStyle(n,!0),u=Cesium.LabelStyle.OUTLINE),n.getFill()&&n.getStroke()&&(u=Cesium.LabelStyle.FILL_AND_OUTLINE),a.style=u,n.getTextAlign()){case"left":c=Cesium.HorizontalOrigin.LEFT;break;case"right":c=Cesium.HorizontalOrigin.RIGHT;break;case"center":default:c=Cesium.HorizontalOrigin.CENTER}if(a.horizontalOrigin=c,n.getTextBaseline()){let t;switch(n.getTextBaseline()){case"top":t=Cesium.VerticalOrigin.TOP;break;case"middle":t=Cesium.VerticalOrigin.CENTER;break;case"bottom":t=Cesium.VerticalOrigin.BOTTOM;break;case"alphabetic":t=Cesium.VerticalOrigin.TOP;break;case"hanging":t=Cesium.VerticalOrigin.BOTTOM;break;default:console.assert(!1,`unhandled baseline ${n.getTextBaseline()}`)}a.verticalOrigin=t}const p=r.add(a);return this.setReferenceForPicking(t,e,p),r}olStyleToCesium(t,e,i){const n=e.getFill(),o=e.getStroke();if(i&&!o||!i&&!n)return null;let r=i?o.getColor():n.getColor();return r=rr.convertColorToCesium(r),i&&o.getLineDash()?Cesium.Material.fromType("Stripe",{horizontal:!1,repeat:500,evenColor:r,oddColor:new Cesium.Color(0,0,0,0)}):Cesium.Material.fromType("Color",{color:r})}computePlainStyle(t,e,i,n){const o=e.getStyleFunction();let r=null;return o&&(r=o(e,n)),!r&&i&&(r=i(e,n)),r?Array.isArray(r)?r:[r]:null}getGeometryFromFeature(t,e,i){if(i)return i;const n=t.get("olcs.3d_geometry");if(n&&n instanceof Ke)return n;if(e){const i=e.getGeometryFunction()(t);if(i instanceof Ke)return i}return t.getGeometry()}olFeatureToCesium(t,e,i,n,o){let r=this.getGeometryFromFeature(e,i,o);if(!r)return null;const s=n.projection,a=function(t){const i=n.featureToCesiumMap[ni(e)];i instanceof Array?i.push(t):n.featureToCesiumMap[ni(e)]=[t]};switch(r.getType()){case"GeometryCollection":const o=new Cesium.PrimitiveCollection;return r.getGeometries().forEach((r=>{if(r){const s=this.olFeatureToCesium(t,e,i,n,r);s&&o.add(s)}})),o;case"Point":r=r;const l=n.billboards;return this.olPointGeometryToCesium(t,e,r,s,i,l,a)||null;case"Circle":return r=r,this.olCircleGeometryToCesium(t,e,r,s,i);case"LineString":return r=r,this.olLineStringGeometryToCesium(t,e,r,s,i);case"Polygon":return r=r,this.olPolygonGeometryToCesium(t,e,r,s,i);case"MultiPoint":case"MultiLineString":case"MultiPolygon":return this.olMultiGeometryToCesium(t,e,r,s,i,n.billboards,a)||null;case"LinearRing":throw new Error("LinearRing should only be part of polygon.");default:throw new Error(`Ol geom type not handled : ${r.getType()}`)}}olVectorLayerToCesium(t,e,i){const n=e.getProjection(),o=e.getResolution();if(void 0===o||!n)throw console.assert(!1,"View not ready"),new Error("View not ready");let r=t.getSource();r instanceof zr&&(r=r.getSource()),console.assert(r instanceof Ir);const s=r.getFeatures(),a=new class{constructor(t,e){const i=new Cesium.BillboardCollection({scene:e}),n=new Cesium.PrimitiveCollection;this.olListenKeys=[],this.rootCollection_=new Cesium.PrimitiveCollection,this.context={projection:t,billboards:i,featureToCesiumMap:{},primitives:n},this.rootCollection_.add(i),this.rootCollection_.add(n)}destroy(){this.olListenKeys.forEach(Y),this.olListenKeys.length=0}getRootPrimitive(){return this.rootCollection_}}(n,this.scene),l=a.context;for(let e=0;e<s.length;++e){const n=s[e];if(!n)continue;const r=t.getStyleFunction(),h=this.computePlainStyle(t,n,r,o);if(!h||!h.length)continue;let u=null;for(let e=0;e<h.length;e++){const i=this.olFeatureToCesium(t,n,h[e],l);if(i)if(u){if(i){let t,e=0;for(;t=i.get(e);)u.add(t),e++}}else u=i}u&&(i[ni(n)]=u,a.getRootPrimitive().add(u))}return a}convert(t,e,i,n){const o=e.getProjection(),r=e.getResolution();if(null==r||!o)return null;const s=t.getStyleFunction(),a=this.computePlainStyle(t,i,s,r);if(!a||!a.length)return null;n.projection=o;let l=null;for(let e=0;e<a.length;e++){const o=this.olFeatureToCesium(t,i,a[e],n);if(l){if(o){let t,e=0;for(;t=o.get(e);)l.add(t),e++}}else l=o}return l}}(e),this.csAllPrimitives_=new Cesium.PrimitiveCollection,e.primitives.add(this.csAllPrimitives_),this.csAllPrimitives_.destroyPrimitives=!1}addCesiumObject(t){console.assert(t),t.getRootPrimitive().counterpart=t,this.csAllPrimitives_.add(t.getRootPrimitive())}destroyCesiumObject(t){t.getRootPrimitive().destroy()}removeSingleCesiumObject(t,e){t.destroy(),this.csAllPrimitives_.destroyPrimitives=e,this.csAllPrimitives_.remove(t.getRootPrimitive()),this.csAllPrimitives_.destroyPrimitives=!1}removeAllCesiumObjects(t){if(this.csAllPrimitives_.destroyPrimitives=t,t)for(let t=0;t<this.csAllPrimitives_.length;++t)this.csAllPrimitives_.get(t).counterpart.destroy();this.csAllPrimitives_.removeAll(),this.csAllPrimitives_.destroyPrimitives=!1}updateLayerVisibility(t,e){let i=!0;[t.layer].concat(t.parents).forEach((t=>{const e=t.getVisible();void 0!==e?i&=e:i=!1})),e.show=i}createSingleLayerCounterparts(t){const e=t.layer;if(!(e instanceof ba)||e instanceof ka)return null;console.assert(e instanceof Ti);let i=e.getSource();if(i instanceof zr&&(i=i.getSource()),!i)return null;console.assert(i instanceof Ir),console.assert(this.view);const n=this.view,o={},r=this.converter.olVectorLayerToCesium(e,n,o),s=r.getRootPrimitive(),a=r.olListenKeys;[t.layer].concat(t.parents).forEach((e=>{a.push(ei(e,"change:visible",(()=>{this.updateLayerVisibility(t,s)})))})),this.updateLayerVisibility(t,s);const l=function(t){console.assert(e instanceof ba||e instanceof Nn);const i=r.context,a=this.converter.convert(e,n,t,i);a&&(o[ni(t)]=a,s.add(a))}.bind(this),h=function(t){const e=ni(t),i=r.context,n=i.featureToCesiumMap[e];n&&(delete i.featureToCesiumMap[e],n.forEach((t=>{t instanceof Cesium.Billboard&&i.billboards.remove(t)})));const a=o[e];delete o[e],a&&s.remove(a)}.bind(this);return a.push(ei(i,"addfeature",(t=>{console.assert(t.feature),l(t.feature)}))),a.push(ei(i,"removefeature",(t=>{console.assert(t.feature),h(t.feature)}))),a.push(ei(i,"changefeature",(t=>{const e=t.feature;console.assert(e),h(e),l(e)}))),r?[r]:null}},tl="postrender",el="bottom-center",il="bottom-right",nl="center-center",ol="center-right";var rl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sl="element",al="map",ll="offset",hl="position",ul="positioning";const cl=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!=typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener($(sl),i.handleElementChanged),i.addEventListener($(al),i.handleMapChanged),i.addEventListener($(ll),i.handleOffsetChanged),i.addEventListener($(hl),i.handlePositionChanged),i.addEventListener($(ul),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&i.setPosition(e.position),i}return rl(e,t),e.prototype.getElement=function(){return this.get(sl)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(al)},e.prototype.getOffset=function(){return this.get(ll)},e.prototype.getPosition=function(){return this.get(hl)},e.prototype.getPositioning=function(){return this.get(ul)},e.prototype.handleElementChanged=function(){Hi(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Zi(this.element),W(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=z(t,tl,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(sl,t)},e.prototype.setMap=function(t){this.set(al,t)},e.prototype.setOffset=function(t){this.set(ll,t)},e.prototype.setPosition=function(t){this.set(hl,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(hl)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[Ki(n),Xi(n)]),r=t||{},s=void 0===r.margin?20:r.margin;if(!At(i,o)){var a=o[0]-i[0],l=i[2]-o[2],h=o[1]-i[1],u=i[3]-o[3],c=[0,0];if(a<0?c[0]=a-s:l<0&&(c[0]=Math.abs(l)+s),h<0?c[1]=h-s:u<0&&(c[1]=Math.abs(u)+s),0!==c[0]||0!==c[1]){var p=e.getView().getCenterInternal(),d=e.getPixelFromCoordinateInternal(p),f=[d[0]+c[0],d[1]+c[1]],g=r.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(ul,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=Math.round(t[0]+n[0])+"px",s=Math.round(t[1]+n[1])+"px",a="0%",l="0%";o==il||o==ol||"top-right"==o?a="-100%":o!=el&&o!=nl&&"top-center"!=o||(a="-50%"),"bottom-left"==o||o==el||o==il?l="-100%":"center-left"!=o&&o!=nl&&o!=ol||(l="-50%");var h="translate("+a+", "+l+") translate("+r+", "+s+")";this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h,i.msTransform=h)},e.prototype.getOptions=function(){return this.options},e}(tt),pl=class extends cl{constructor(t){const e=t.parent;super(e.getOptions()),this.scenePostRenderListenerRemover_=null,this.scene_=t.scene,this.synchronizer_=t.synchronizer,this.parent_=e,this.positionWGS84_=void 0,this.observer_=new MutationObserver(this.handleElementChanged.bind(this)),this.attributeObserver_=[],this.listenerKeys_=[];const i=t=>this.setPropertyFromEvent_(t);this.listenerKeys_.push(this.parent_.on("change:position",i)),this.listenerKeys_.push(this.parent_.on("change:element",i)),this.listenerKeys_.push(this.parent_.on("change:offset",i)),this.listenerKeys_.push(this.parent_.on("change:position",i)),this.listenerKeys_.push(this.parent_.on("change:positioning",i)),this.setProperties(this.parent_.getProperties()),this.handleMapChanged(),this.handleElementChanged()}observeTarget_(t){if(this.observer_){this.observer_.disconnect(),this.observer_.observe(t,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),this.attributeObserver_.forEach((t=>{t.disconnect()})),this.attributeObserver_.length=0;for(let e=0;e<t.childNodes.length;e++){const i=t.childNodes[e];if(1===i.nodeType){const t=new MutationObserver(this.handleElementChanged.bind(this));t.observe(i,{attributes:!0,subtree:!0}),this.attributeObserver_.push(t)}}}}setPropertyFromEvent_(t){t.target&&t.key&&this.set(t.key,t.target.get(t.key))}getScene(){return this.scene_}handleMapChanged(){var t;this.scenePostRenderListenerRemover_&&(this.scenePostRenderListenerRemover_(),(t=this.element)&&t.parentNode&&t.parentNode.removeChild(t)),this.scenePostRenderListenerRemover_=null;const e=this.getScene();if(e){this.scenePostRenderListenerRemover_=e.postRender.addEventListener(this.updatePixelPosition.bind(this)),this.updatePixelPosition();const t=this.stopEvent?this.synchronizer_.getOverlayContainerStopEvent():this.synchronizer_.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element)}}handlePositionChanged(){const t=this.getPosition();if(t){const e=this.parent_.getMap().getView().getProjection();this.positionWGS84_=Oe(t,e,"EPSG:4326")}else this.positionWGS84_=void 0;this.updatePixelPosition()}handleElementChanged(){function t(e,i){const n=e.cloneNode();i&&i.appendChild(n),e.nodeType!=Node.TEXT_NODE&&n.addEventListener("click",(t=>{e.dispatchEvent(new MouseEvent("click",t)),t.stopPropagation()}));const o=e.childNodes;for(let e=0;e<o.length;e++)o[e]&&t(o[e],n);return n}!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.element);const e=this.getElement();if(e&&e.parentNode&&e.parentNode.childNodes)for(const i of e.parentNode.childNodes){const e=t(i,null);this.element.appendChild(e)}e.parentNode&&this.observeTarget_(e.parentNode)}updatePixelPosition(){const t=this.positionWGS84_;if(!this.scene_||!t)return void this.setVisible(!1);let e=0;if(2===t.length){const i=this.scene_.globe.getHeight(Cesium.Cartographic.fromDegrees(t[0],t[1]));i&&this.scene_.globe.tilesLoaded&&(t[2]=i),i&&(e=i)}else e=t[2];const i=Cesium.Cartesian3.fromDegrees(t[0],t[1],e),n=this.scene_.camera,o=new Cesium.BoundingSphere(new Cesium.Cartesian3,6356752);if(!new Cesium.Occluder(o,n.position).isPointVisible(i))return void this.setVisible(!1);if(1!==n.frustum.computeCullingVolume(n.position,n.direction,n.up).computeVisibility(new Cesium.BoundingSphere(i)))return void this.setVisible(!1);this.setVisible(!0);const r=this.scene_.cartesianToCanvasCoordinates(i),s=[r.x,r.y],a=[this.scene_.canvas.width,this.scene_.canvas.height];this.updateRenderedPosition(s,a)}destroy(){this.scenePostRenderListenerRemover_&&this.scenePostRenderListenerRemover_(),this.observer_&&this.observer_.disconnect(),Y(this.listenerKeys_),this.listenerKeys_.splice(0),this.element.removeNode?this.element.removeNode(!0):this.element.remove(),this.element=null}},dl=class{constructor(t,e){this.map=t,this.overlays_=this.map.getOverlays(),this.scene=e,this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"].forEach((t=>{this.overlayContainerStopEvent_.addEventListener(t,(t=>t.stopPropagation()))})),this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_),this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.scene.canvas.parentElement.appendChild(this.overlayContainer_),this.overlayMap_={}}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOverlayContainer(){return this.overlayContainer_}synchronize(){this.destroyAll(),this.addOverlays(),this.overlays_.on("add",this.addOverlayFromEvent_.bind(this)),this.overlays_.on("remove",this.removeOverlayFromEvent_.bind(this))}addOverlayFromEvent_(t){const e=t.element;this.addOverlay(e)}addOverlays(){this.overlays_.forEach((t=>{this.addOverlay(t)}))}addOverlay(t){if(!t)return;const e=new pl({scene:this.scene,synchronizer:this,parent:t}),i=ni(t).toString();this.overlayMap_[i]=e}removeOverlayFromEvent_(t){const e=t.element;this.removeOverlay(e)}removeOverlay(t){const e=ni(t).toString(),i=this.overlayMap_[e];i&&(i.destroy(),delete this.overlayMap_[e])}destroyAll(){Object.keys(this.overlayMap_).forEach((t=>{this.overlayMap_[t].destroy(),delete this.overlayMap_[t]}))}};class fl{constructor(t){this.autoRenderLoop_=null,this.map_=t.map,this.time_=t.time||function(){return Cesium.JulianDate.now()},this.to4326Transform_=Pe(this.map_.getView().getProjection(),"EPSG:4326"),this.resolutionScale_=1,this.canvasClientWidth_=0,this.canvasClientHeight_=0,this.resolutionScaleChanged_=!0;const e="position:absolute;top:0;left:0;width:100%;height:100%;";this.container_=document.createElement("DIV");const i=document.createAttribute("style");i.value=`${e}visibility:hidden;`,this.container_.setAttributeNode(i);let n=t.target||this.map_.getViewport();if("string"==typeof n&&(n=document.getElementById(n)),n.appendChild(this.container_),this.isOverMap_=!n,this.isOverMap_&&t.stopOpenLayersEventsPropagation){const t=["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"];for(let e=0,i=t.length;e<i;++e)this.container_.addEventListener(t[e],(t=>t.stopPropagation()))}this.canvas_=document.createElement("CANVAS");const o=document.createAttribute("style");o.value=e,this.canvas_.setAttributeNode(o),ri.supportsImageRenderingPixelated()&&(this.canvas_.style.imageRendering=ri.imageRenderingValue()),this.canvas_.oncontextmenu=function(){return!1},this.canvas_.onselectstart=function(){return!1},this.container_.appendChild(this.canvas_),this.enabled_=!1,this.pausedInteractions_=[],this.hiddenRootGroup_=null;const r=void 0!==t.sceneOptions?t.sceneOptions:{};r.canvas=this.canvas_,r.scene3DOnly=!0,this.scene_=new Cesium.Scene(r);const s=this.scene_.screenSpaceCameraController;s.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.SHIFT}),s.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.ALT}),s.enableLook=!1,this.scene_.camera.constrainedAxis=Cesium.Cartesian3.UNIT_Z,this.camera_=new hr(this.scene_,this.map_),this.globe_=new Cesium.Globe(Cesium.Ellipsoid.WGS84),this.globe_.baseColor=Cesium.Color.WHITE,this.scene_.globe=this.globe_,this.scene_.skyAtmosphere=new Cesium.SkyAtmosphere;const a=new Cesium.SingleTileImageryProvider({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",rectangle:Cesium.Rectangle.fromDegrees(0,0,1,1)});this.globe_.imageryLayers.addImageryProvider(a,0),this.dataSourceCollection_=new Cesium.DataSourceCollection,this.dataSourceDisplay_=new Cesium.DataSourceDisplay({scene:this.scene_,dataSourceCollection:this.dataSourceCollection_});const l=t.createSynchronizers?t.createSynchronizers(this.map_,this.scene_,this.dataSourceCollection_):[new Cr(this.map_,this.scene_),new $a(this.map_,this.scene_),new dl(this.map_,this.scene_)];this.handleResize_();for(let t=l.length-1;t>=0;--t)l[t].synchronize();this.lastFrameTime_=0,this.renderId_=void 0,this.targetFrameRate_=Number.POSITIVE_INFINITY,this.blockCesiumRendering_=!1,this.warmingUp_=!1,this.trackedFeature_=null,this.trackedEntity_=null,this.entityView_=null,this.needTrackedEntityUpdate_=!1,this.boundingSphereScratch_=new Cesium.BoundingSphere,(new Cesium.EventHelper).add(this.scene_.postRender,fl.prototype.updateTrackedEntity_,this),Cesium.Camera.enableSuspendTerrainAdjustment=!1}render_(){void 0!==this.renderId_&&(cancelAnimationFrame(this.renderId_),this.renderId_=void 0),!this.enabled_&&!this.warmingUp_||this.blockCesiumRendering_||(this.renderId_=requestAnimationFrame(this.onAnimationFrame_.bind(this)))}onAnimationFrame_(t){this.renderId_=void 0;const e=1e3/this.targetFrameRate_;if(t-this.lastFrameTime_<e)return void this.render_();this.lastFrameTime_=t;const i=this.time_();if(this.scene_.initializeFrame(),this.handleResize_(),this.dataSourceDisplay_.update(i),this.entityView_){const t=this.trackedEntity_;this.dataSourceDisplay_.getBoundingSphere(t,!1,this.boundingSphereScratch_)===Cesium.BoundingSphereState.DONE&&(this.boundingSphereScratch_.radius=1,this.entityView_.update(i,this.boundingSphereScratch_))}this.scene_.render(i),this.camera_.checkCameraChange(),this.render_()}updateTrackedEntity_(){if(!this.needTrackedEntityUpdate_)return;const t=this.trackedEntity_,e=this.scene_,i=this.dataSourceDisplay_.getBoundingSphere(t,!1,this.boundingSphereScratch_);if(i===Cesium.BoundingSphereState.PENDING)return;e.screenSpaceCameraController.enableTilt=!1;const n=i!==Cesium.BoundingSphereState.FAILED?this.boundingSphereScratch_:void 0;n&&(n.radius=1),this.entityView_=new Cesium.EntityView(t,e,e.mapProjection.ellipsoid),this.entityView_.update(this.time_(),n),this.needTrackedEntityUpdate_=!1}handleResize_(){let t=this.canvas_.clientWidth,e=this.canvas_.clientHeight;if(0===t|0===e)return;if(t===this.canvasClientWidth_&&e===this.canvasClientHeight_&&!this.resolutionScaleChanged_)return;let i=this.resolutionScale_;ri.supportsImageRenderingPixelated()||(i*=window.devicePixelRatio||1),this.resolutionScaleChanged_=!1,this.canvasClientWidth_=t,this.canvasClientHeight_=e,t*=i,e*=i,this.canvas_.width=t,this.canvas_.height=e,this.scene_.camera.frustum.aspectRatio=t/e}getCamera(){return this.camera_}getOlMap(){return this.map_}getOlView(){const t=this.map_.getView();return console.assert(t),t}getCesiumScene(){return this.scene_}getDataSources(){return this.dataSourceCollection_}getDataSourceDisplay(){return this.dataSourceDisplay_}getEnabled(){return this.enabled_}setEnabled(t){if(this.enabled_===t)return;let e;if(this.enabled_=t,this.container_.style.visibility=this.enabled_?"visible":"hidden",this.enabled_){if(this.throwOnUnitializedMap_(),this.isOverMap_){e=this.map_.getInteractions(),e.forEach(((t,e,i)=>{this.pausedInteractions_.push(t)})),e.clear(),this.map_.addInteraction=t=>this.pausedInteractions_.push(t),this.map_.removeInteraction=t=>this.pausedInteractions_=this.pausedInteractions_.filter((e=>e!==t));const t=this.map_.getLayerGroup();t.getVisible()&&(this.hiddenRootGroup_=t,this.hiddenRootGroup_.setVisible(!1)),this.map_.getOverlayContainer().classList.add("olcs-hideoverlay")}this.camera_.readFromView(),this.render_()}else this.isOverMap_&&(e=this.map_.getInteractions(),this.pausedInteractions_.forEach((t=>{e.push(t)})),this.pausedInteractions_.length=0,this.map_.addInteraction=t=>this.map_.getInteractions().push(t),this.map_.removeInteraction=t=>this.map_.getInteractions().remove(t),this.map_.getOverlayContainer().classList.remove("olcs-hideoverlay"),this.hiddenRootGroup_&&(this.hiddenRootGroup_.setVisible(!0),this.hiddenRootGroup_=null)),this.camera_.updateView()}warmUp(t,e){if(this.enabled_)return;this.throwOnUnitializedMap_(),this.camera_.readFromView();const i=this.globe_.ellipsoid,n=this.scene_.camera,o=i.cartesianToCartographic(n.position);o.height<t&&(o.height=t,n.position=i.cartographicToCartesian(o)),this.warmingUp_=!0,this.render_(),setTimeout((()=>{this.warmingUp_=!1}),e)}setBlockCesiumRendering(t){this.blockCesiumRendering_!==t&&(this.blockCesiumRendering_=t,this.render_())}enableAutoRenderLoop(){this.autoRenderLoop_||(this.autoRenderLoop_=new class{constructor(t){this.ol3d=t,this.scene_=t.getCesiumScene(),this.canvas_=this.scene_.canvas,this._boundNotifyRepaintRequired=this.notifyRepaintRequired.bind(this),this.repaintEventNames_=["mousemove","mousedown","mouseup","touchstart","touchend","touchmove","pointerdown","pointerup","pointermove","wheel"],this.enable()}enable(){this.scene_.requestRenderMode=!0,this.scene_.maximumRenderTimeChange=1e3;for(const t of this.repaintEventNames_)this.canvas_.addEventListener(t,this._boundNotifyRepaintRequired,!1);window.addEventListener("resize",this._boundNotifyRepaintRequired,!1),this.ol3d.getOlMap().getLayerGroup().on("change",this._boundNotifyRepaintRequired)}disable(){for(const t of this.repaintEventNames_)this.canvas_.removeEventListener(t,this._boundNotifyRepaintRequired,!1);window.removeEventListener("resize",this._boundNotifyRepaintRequired,!1),this.ol3d.getOlMap().getLayerGroup().un("change",this._boundNotifyRepaintRequired),this.scene_.requestRenderMode=!1}restartRenderLoop(){this.notifyRepaintRequired()}notifyRepaintRequired(){this.scene_.requestRender()}}(this))}getAutoRenderLoop(){return this.autoRenderLoop_}setResolutionScale(t){(t=Math.max(0,t))!==this.resolutionScale_&&(this.resolutionScale_=Math.max(0,t),this.resolutionScaleChanged_=!0,this.autoRenderLoop_&&this.autoRenderLoop_.restartRenderLoop())}setTargetFrameRate(t){this.targetFrameRate_!==t&&(this.targetFrameRate_=t,this.render_())}throwOnUnitializedMap_(){const t=this.map_.getView(),e=t.getCenter();if(!t.isDef()||isNaN(e[0])||isNaN(e[1]))throw new Error(`The OpenLayers map is not properly initialized: ${e} / ${t.getResolution()}`)}get trackedFeature(){return this.trackedFeature_}set trackedFeature(t){if(this.trackedFeature_!==t){const e=this.scene_;if(!t||!t.getGeometry())return this.needTrackedEntityUpdate_=!1,e.screenSpaceCameraController.enableTilt=!0,this.trackedEntity_&&this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_),this.trackedEntity_=null,this.trackedFeature_=null,this.entityView_=null,void e.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);this.trackedFeature_=t,this.needTrackedEntityUpdate_=!0;const i=this.to4326Transform_,n=function(){const e=t.getGeometry();console.assert(e instanceof $e);const n=e.getCoordinates(),o=i(n,void 0,n.length);return rr.ol4326CoordinateToCesiumCartesian(o)},o={position:new Cesium.CallbackProperty(((t,e)=>n()),!1),point:{pixelSize:1,color:Cesium.Color.TRANSPARENT}};this.trackedEntity_=this.dataSourceDisplay_.defaultDataSource.entities.add(o)}}}const gl=fl,_l="center",yl="resolution",ml="rotation";function vl(t,e,i){return function(n,o,r,s){if(n){var a=e?0:r[0]*o,l=e?0:r[1]*o,h=t[0]+a/2,u=t[2]-a/2,c=t[1]+l/2,p=t[3]-l/2;h>u&&(u=h=(u+h)/2),c>p&&(p=c=(p+c)/2);var d=Ut(n[0],h,u),f=Ut(n[1],c,p),g=30*o;return s&&i&&(d+=-g*Math.log(1+Math.max(0,h-n[0])/g)+g*Math.log(1+Math.max(0,n[0]-u)/g),f+=-g*Math.log(1+Math.max(0,c-n[1])/g)+g*Math.log(1+Math.max(0,n[1]-p)/g)),[d,f]}}}function Cl(t){return t}function xl(t,e,i,n){var o=Vt(e)/i[0],r=Bt(e)/i[1];return n?Math.min(t,Math.max(o,r)):Math.min(t,Math.min(o,r))}function Al(t,e,i){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),Ut(n,i/2,2*e)}function El(t,e,i,n,o){return function(r,s,a,l){if(void 0!==r){var h=n?xl(t,n,a,o):t;return(void 0===i||i)&&l?Al(r,h,e):Ut(r,e,h)}}}function wl(t){return void 0!==t?0:void 0}function Sl(t){return void 0!==t?t:void 0}var bl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Tl(t,e){setTimeout((function(){t(e)}),0)}function Rl(t){return!(t.sourceCenter&&t.targetCenter&&!kr(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}const Pl=function(t){function e(e){var i=t.call(this)||this,n=S({},e);return i.hints_=[0,0],i.animations_=[],i.updateAnimationKey_,i.projection_=be(n.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.targetResolution_,i.targetRotation_,i.cancelAnchor_=void 0,n.center&&(n.center=Ge(n.center,i.projection_)),n.extent&&(n.extent=ze(n.extent,i.projection_)),i.applyOptions_(n),i}return bl(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,i,n,o=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,a=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,u=be(t.projection,"EPSG:3857"),c=u.getExtent(),p=t.constrainOnlyCenter,d=t.extent;if(a||d||!u.isGlobal()||(p=!1,d=c),void 0!==t.resolutions){var f=t.resolutions;i=f[o],n=void 0!==f[r]?f[r]:f[f.length-1],e=t.constrainResolution?function(t,e,i,n){return function(o,r,s,a){if(void 0!==o){var l=t[0],h=t[t.length-1],u=i?xl(l,i,s,n):l;if(a)return void 0===e||e?Al(o,u,h):Ut(o,h,u);var c=Math.min(u,o),p=Math.floor(m(t,c,r));return t[p]>u&&p<t.length-1?t[p+1]:t[p]}}}(f,l,!p&&d,h):El(i,n,l,!p&&d,h)}else{var g=(c?Math.max(Vt(c),Bt(c)):360*it[nt.DEGREES]/u.getMetersPerUnit())/256/Math.pow(2,0),_=g/Math.pow(2,28);void 0!==(i=t.maxResolution)?o=0:i=g/Math.pow(s,o),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,r):g/Math.pow(s,r):_),r=o+Math.floor(Math.log(i/n)/Math.log(s)),n=i/Math.pow(s,r-o),e=t.constrainResolution?function(t,e,i,n,o,r){return function(s,a,l,h){if(void 0!==s){var u=o?xl(e,o,l,r):e,c=void 0!==i?i:0;if(h)return void 0===n||n?Al(s,u,c):Ut(s,c,u);var p=Math.ceil(Math.log(e/u)/Math.log(t)-1e-9),d=-a*(.5-1e-9)+.5,f=Math.min(u,s),g=Math.floor(Math.log(e/f)/Math.log(t)+d),_=Math.max(p,g);return Ut(e/Math.pow(t,_),c,u)}}}(s,i,n,l,!p&&d,h):El(i,n,l,!p&&d,h)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:s}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return vl(t.extent,t.constrainOnlyCenter,e)}var i=be(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var n=i.getExtent().slice();return n[0]=-1/0,n[2]=1/0,vl(n,!1,!1)}return Cl}(t),n=e.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=$t(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=o?0:t:void 0}):!1===e?Sl:"number"==typeof e?(i=e,n=2*Math.PI/i,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):Sl}return wl;var i,n,o}(t);this.constraints_={center:i,resolution:n,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=S({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),S({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),i=0;i<e.length;++i){var n=arguments[i];n.center&&((n=S({},n)).center=Ge(n.center,this.getProjection())),n.anchor&&((n=S({},n)).anchor=Ge(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var n=arguments[i-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&Tl(e,!0))}for(var o=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_,l=[],h=0;h<i;++h){var u=arguments[h],c={start:o,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||li,callback:e};if(u.center&&(c.sourceCenter=r,c.targetCenter=u.center.slice(),r=c.targetCenter),void 0!==u.zoom?(c.sourceResolution=s,c.targetResolution=this.getResolutionForZoom(u.zoom),s=c.targetResolution):u.resolution&&(c.sourceResolution=s,c.targetResolution=u.resolution,s=c.targetResolution),void 0!==u.rotation){c.sourceRotation=a;var p=te(u.rotation-a+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=a+p,a=c.targetRotation}Rl(c)?c.complete=!0:o+=c.duration,l.push(c)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,i=this.animations_.length;e<i;++e){var n=this.animations_[e];if(n[0].callback&&Tl(n[0].callback,!1),!t)for(var o=0,r=n.length;o<r;++o){var s=n[o];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],o=!0,r=0,s=n.length;r<s;++r){var a=n[r];if(!a.complete){var l=t-a.start,h=a.duration>0?l/a.duration:1;h>=1?(a.complete=!0,h=1):o=!1;var u=a.easing(h);if(a.sourceCenter){var c=a.sourceCenter[0],p=a.sourceCenter[1],d=c+u*(a.targetCenter[0]-c),f=p+u*(a.targetCenter[1]-p);this.targetCenter_=[d,f]}if(a.sourceResolution&&a.targetResolution){var g=1===u?a.targetResolution:a.sourceResolution+u*(a.targetResolution-a.sourceResolution);if(a.anchor){var _=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(g,0,_,!0);this.targetCenter_=this.calculateCenterZoom(y,a.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var m=1===u?te(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+u*(a.targetRotation-a.sourceRotation);if(a.anchor){var v=this.constraints_.rotation(m,!0);this.targetCenter_=this.calculateCenterRotate(v,a.anchor)}this.targetRotation_=m}if(this.applyTargetState_(!0),e=!0,!a.complete)break}}if(o){this.animations_[i]=null,this.setHint(0,-1);var C=n[0].callback;C&&Tl(C,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenterInternal();return void 0!==n&&(Dr(i=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),Mr(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenterInternal(),o=this.getResolution();return void 0!==n&&void 0!==o&&(i=[e[0]-t*(e[0]-n[0])/o,e[1]-t*(e[1]-n[1])/o]),i},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?je(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(_l)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return Be(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),i=this.getCenterInternal();st(i,1);var n=this.getResolution();st(void 0!==n,2);var o=this.getRotation();return st(void 0!==o,3),Gt(i,n,o,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(yl)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(ze(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var i=e||this.getViewportSize_(),n=Vt(t)/i[0],o=Bt(t)/i[1];return Math.max(n,o)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*o)}},e.prototype.getRotation=function(){return this.get(ml)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/o}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),i=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:i,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var o=m(this.resolutions_,t,1);n=o,e=this.resolutions_[o],i=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Ut(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Ut(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var i,n=S({size:this.getViewportSize_()},e||{});if(st(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))st(!Kt(t),25),i=Qa(o=ze(t,this.getProjection()));else if(t.getType()===d){var o;(i=Qa(o=ze(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Dt(o))}else{var r=De();i=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(i,n)},e.prototype.fitInternal=function(t,e){var i=e||{},n=i.size;n||(n=this.getViewportSize_());var o,r=void 0!==i.padding?i.padding:[0,0,0,0],s=void 0!==i.nearest&&i.nearest;o=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;for(var a=t.getFlatCoordinates(),l=this.getRotation(),h=Math.cos(-l),u=Math.sin(-l),c=1/0,p=1/0,d=-1/0,f=-1/0,g=t.getStride(),_=0,y=a.length;_<y;_+=g){var m=a[_]*h-a[_+1]*u,v=a[_]*u+a[_+1]*h;c=Math.min(c,m),p=Math.min(p,v),d=Math.max(d,m),f=Math.max(f,v)}var C=this.getResolutionForExtentInternal([c,p,d,f],[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);C=isNaN(C)?o:Math.max(C,o),C=this.getConstrainedResolution(C,s?0:1),u=-u;var x=(c+d)/2,A=(p+f)/2,E=[(x+=(r[1]-r[3])/2*C)*h-(A+=(r[0]-r[2])/2*C)*u,A*h+x*u],S=i.callback?i.callback:w;void 0!==i.duration?this.animateInternal({resolution:C,center:this.getConstrainedCenter(E,C),duration:i.duration,easing:i.easing},S):(this.targetResolution_=C,this.targetCenter_=E,this.applyTargetState_(!1,!0),Tl(S,!0))},e.prototype.centerOn=function(t,e,i){this.centerOnInternal(Ge(t,this.getProjection()),e,i)},e.prototype.centerOnInternal=function(t,e,i){var n=this.getRotation(),o=Math.cos(-n),r=Math.sin(-n),s=t[0]*o-t[1]*r,a=t[1]*o+t[0]*r,l=this.getResolution(),h=(s+=(e[0]/2-i[0])*l)*o-(a+=(i[1]-e[1]/2)*l)*(r=-r),u=a*o+s*r;this.setCenterInternal([h,u])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=je(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var i=e&&Ge(e,this.getProjection());this.adjustResolutionInternal(t,i)},e.prototype.adjustResolutionInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Ge(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Ge(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,o,i),s=this.constraints_.center(this.targetCenter_,r,o,i);this.get(ml)!==n&&this.set(ml,n),this.get(yl)!==r&&this.set(yl,r),this.get(_l)&&kr(this.get(_l),s)||this.set(_l,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,i){var n=void 0!==t?t:200,o=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,o,s),l=this.constraints_.center(this.targetCenter_,a,s);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var h=i||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&kr(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:n,easing:ai,anchor:h}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,i){var n=i&&Ge(i,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,i){this.setHint(1,-1),this.resolveConstraints(t,e,i)},e.prototype.getConstrainedCenter=function(t,e){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(t,e){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))},e.prototype.getConstrainedResolution=function(t,e){var i=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)},e}(tt);var Ol=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Il(t,e){ha.expire()}const Fl=function(t){function e(e){var i=t.call(this)||this;return i.map_=e,i.declutterTree_=null,i}return Ol(e,t),e.prototype.dispatchRenderEvent=function(t,e){X()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;dt(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),ft(n,i)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o,r,s,a){var l,h=e.viewState;function u(t,e,i){return o.call(r,e,t?i:null)}var c=h.projection,p=Gr(t.slice(),c),d=[[0,0]];if(c.canWrapX()&&n){var f=Vt(c.getExtent());d.push([-f,0],[f,0])}var g,_=e.layerStatesArray,y=_.length;this.declutterTree_&&(g=this.declutterTree_.all().map((function(t){return t.value})));for(var m=[],v=0;v<d.length;v++)for(var C=y-1;C>=0;--C){var x=_[C],A=x.layer;if(A.hasRenderer()&&bi(x,h)&&s.call(a,A)){var E=A.getRenderer(),w=A.getSource();if(E&&w){var S=w.getWrapX()?p:t,b=u.bind(null,x.managed);m[0]=S[0]+d[v][0],m[1]=S[1]+d[v][1],l=E.forEachFeatureAtCoordinate(m,e,i,b,g)}if(l)return l}}},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o){return X()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,n,o,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,A,this,o,r)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=function(t,e){e&&e.clear();for(var i=t.declutterItems,n=i.length-1;n>=0;--n)for(var o=i[n],r=o.items,s=0,a=r.length;s<a;s+=3)e=r[s].renderDeclutter(r[s+1],r[s+2],o.opacity,e);return i.length=0,e}(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){ha.canExpireCache()&&t.postRenderFunctions.push(Il)},e}(_);var Ll=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ml=function(t){function e(e){var i=t.call(this,e)||this;i.fontChangeListenerKey_=z(cn,g,e.redrawText.bind(e)),i.element_=document.createElement("div");var n=i.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",i.element_.className="ol-unselectable ol-layers";var o=e.getViewport();return o.insertBefore(i.element_,o.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return Ll(e,t),e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var n=new ki(t,void 0,e);i.dispatchEvent(n)}},e.prototype.disposeInternal=function(){W(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(xi,e);var i=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=e.viewState;this.children_.length=0;for(var o=null,r=0,s=i.length;r<s;++r){var a=i[r];if(e.layerIndex=r,bi(a,n)&&(a.sourceState==wi||a.sourceState==Ei)){var l=a.layer.render(e,o);l&&l!==o&&(this.children_.push(l),o=l)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var i=t.childNodes,n=0;;++n){var o=i[n],r=e[n];if(!o&&!r)break;o!==r&&(o?r?t.insertBefore(r,o):(t.removeChild(o),--n):t.appendChild(r))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o){for(var r=e.viewState,s=e.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],h=l.layer;if(h.hasRenderer()&&bi(l,r)&&o(h)){var u=h.getRenderer().getDataAtPixel(t,e,i);if(u){var c=n(h,u);if(c)return c}}}},e}(Fl);var kl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Dl=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.map=i,o.frameState=void 0!==n?n:null,o}return kl(e,t),e}(f);var jl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Gl=function(t){function e(e,i,n,o,r){var s=t.call(this,e,i,r)||this;return s.originalEvent=n,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==o&&o,s}return jl(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Dl),Bl={SINGLECLICK:"singleclick",CLICK:M,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},zl="pointerdown";var Nl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Wl=function(t){function e(e,i){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=i?i*zi:zi,n.down_=null;var o=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=o,n.pointerdownListenerKey_=z(o,zl,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=z(o,"pointermove",n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(G,n.boundHandleTouchMove_,!!Vi&&{passive:!1}),n}return Nl(e,t),e.prototype.emulateClick_=function(t){var e=new Gl(Bl.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Gl(Bl.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Gl(Bl.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Bl.POINTERUP||e.type==Bl.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Bl.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Gl(Bl.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(W),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Gl(Bl.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.dragListenerKeys_.push(z(document,Bl.POINTERMOVE,this.handlePointerMove_,this),z(document,Bl.POINTERUP,this.handlePointerUp_,this),z(this.element_,Bl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==document&&this.dragListenerKeys_.push(z(this.element_.getRootNode(),Bl.POINTERUP,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Gl(Bl.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Gl(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(W(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(G,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(W(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(W),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(I),Vl="layergroup",Yl="size",Kl="target",Xl="view";var Ul=1/0;const Zl=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,b(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},t.prototype.enqueue=function(t){st(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=Ul&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,o=e[t],r=i[t],s=t;t<n>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),h=l<n&&i[l]<i[a]?l:a;e[t]=e[h],i[t]=i[h],t=h}e[t]=o,i[t]=r,this.siftDown_(s,t)},t.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,o=i[e],r=n[e];e>t;){var s=this.getParentIndex_(e);if(!(n[s]>r))break;i[e]=i[s],n[e]=n[s],e=s}i[e]=o,n[e]=r},t.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,o=this.elements_,r=this.priorities_,s=0,a=o.length;for(e=0;e<a;++e)(i=n(t=o[e]))==Ul?delete this.queuedElements_[this.keyFunction_(t)]:(r[s]=i,o[s++]=t);o.length=s,r.length=s,this.heapify_()},t}();var Hl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ql=function(t){function e(e,i){var n=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=i,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return Hl(e,t),e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);return i&&e[0].addEventListener(F,this.boundHandleTileChange_),i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(e.hifi&&2===i||3===i||4===i){e.removeEventListener(F,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,o=0;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=(i=this.dequeue()[0]).getKey(),0!==i.getState()||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++o,i.load())},e}(Zl);var Jl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ql=function(t){function e(e){var i=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,o,r={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new mr({layers:t.layers});return r.layergroup=s,r.target=t.target,r.view=void 0!==t.view?t.view:new Pl,void 0!==t.controls&&(Array.isArray(t.controls)?i=new gr(t.controls.slice()):(st("function"==typeof t.controls.getArray,47),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new gr(t.interactions.slice()):(st("function"==typeof t.interactions.getArray,48),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new gr(t.overlays.slice()):(st("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new gr,{controls:i,interactions:n,keyboardEventTarget:e,overlays:o,values:r}}(e);return i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,i.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:zi,i.postRenderTimeoutHandle_,i.animationDelayKey_,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=[1,0,0,1,0,0],i.pixelToCoordinateTransform_=[1,0,0,1,0,0],i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.style.pointerEvents="none",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.style.pointerEvents="none",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=null,i.moveTolerance_=e.moveTolerance,i.keyboardEventTarget_=n.keyboardEventTarget,i.keyHandlerKeys_=null,i.controls=n.controls||new gr,i.interactions=n.interactions||new gr,i.overlays_=n.overlays,i.overlayIdIndex_={},i.renderer_=null,i.handleResize_,i.postRenderFunctions_=[],i.tileQueue_=new ql(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addEventListener($(Vl),i.handleLayerGroupChanged_),i.addEventListener($(Xl),i.handleViewChanged_),i.addEventListener($(Yl),i.handleSizeChanged_),i.addEventListener($(Kl),i.handleTargetChanged_),i.setProperties(n.values),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.controls.addEventListener(ur,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(cr,function(t){t.element.setMap(null)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.addEventListener(ur,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(cr,function(t){t.element.setMap(null)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i.overlays_.addEventListener(ur,function(t){this.addOverlayInternal_(t.element)}.bind(i)),i.overlays_.addEventListener(cr,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(i)),i}return Jl(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,r=void 0!==i.layerFilter?i.layerFilter:A,s=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,s,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var n=i||{},o=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,r=n.layerFilter||A;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,e,r)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:A,o=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,r,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Kl)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return je(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?ct(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Vl)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Ge(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?ct(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Yl)},e.prototype.getView=function(){return this.get(Xl)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,n){return function(t,e,i,n,o){if(!t||!(i in t.wantedTiles))return Ul;if(!t.wantedTiles[i][e.getKey()])return Ul;var r=t.viewState.center,s=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(o)+Math.sqrt(s*s+a*a)/o}(this.frameState_,t,e,i,n)},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,n=new Gl(i,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,i=e.type;if(i===zl||i===B||i===k){var n=this.viewport_.getRootNode?this.viewport_.getRootNode():document,o=n===document?e.target:n.elementFromPoint(e.clientX,e.clientY);if(this.overlayContainerStopEvent_.contains(o)||!(n===document?document.documentElement:n).contains(o))return}t.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var s=r.length-1;s>=0;s--){var a=r[s];if(a.getActive()&&!a.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var o=t.viewHints;if(o[0]||o[1]){var r=!Wi&&Date.now()-t.time>8;i=r?0:8,n=r?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener(Ai)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(Ai,t);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,t);s.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)W(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(L,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(B,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(j,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Zi(this.viewport_)}if(t){for(var n in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Wl(this,this.moveTolerance_),Bl)this.mapBrowserEventHandler_.addEventListener(Bl[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(L,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(B,this.boundHandleBrowserEvent_,!!Vi&&{passive:!1});var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[z(o,k,this.handleBrowserEvent,this),z(o,D,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(j,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(W(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(W(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=z(t,g,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=z(t,F,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(W),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[z(t,g,this.render,this),z(t,F,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),i=this.getView(),n=this.frameState_,o=null;if(void 0!==e&&function(t){return t[0]>0&&t[1]>0}(e)&&i&&i.isDef()){var r=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=i.getState();o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:Gt(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:r,wantedTiles:{}}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),n&&(!this.previousExtent_||!Kt(this.previousExtent_)&&!Rt(o.extent,this.previousExtent_))&&(this.dispatchEvent(new Dl("movestart",this,n)),this.previousExtent_=bt(this.previousExtent_)),this.previousExtent_&&!o.viewHints[0]&&!o.viewHints[1]&&!Rt(o.extent,this.previousExtent_)&&(this.dispatchEvent(new Dl("moveend",this,o)),vt(o.extent,this.previousExtent_))),this.dispatchEvent(new Dl(tl,this,o)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Vl,t)},e.prototype.setSize=function(t){this.set(Yl,t)},e.prototype.setTarget=function(t){this.set(Kl,t)},e.prototype.setView=function(t){this.set(Xl,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}},e}(tt);var $l=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const th=function(t){function e(e){var i=t.call(this)||this,n=e.element;return!n||e.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),i.element=n||null,i.target_=null,i.map_=null,i.listenerKeys=[],e.render&&(i.render=e.render),e.target&&i.setTarget(e.target),i}return $l(e,t),e.prototype.disposeInternal=function(){Zi(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Zi(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)W(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==w&&this.listenerKeys.push(z(t,tl,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(tt);var eh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ih=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).ulElement_=document.createElement("ul"),i.collapsed_=void 0===n.collapsed||n.collapsed,i.overrideCollapsible_=void 0!==n.collapsible,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1);var o=void 0!==n.className?n.className:"ol-attribution",r=void 0!==n.tipLabel?n.tipLabel:"Attributions",s=void 0!==n.collapseLabel?n.collapseLabel:"";"string"==typeof s?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=s):i.collapseLabel_=s;var a=void 0!==n.label?n.label:"i";"string"==typeof a?(i.label_=document.createElement("span"),i.label_.textContent=a):i.label_=a;var l=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=r,h.appendChild(l),h.addEventListener(M,i.handleClick_.bind(i),!1);var u=o+" ol-unselectable "+Ji+(i.collapsed_&&i.collapsible_?" ol-collapsed":"")+(i.collapsible_?"":" ol-uncollapsible"),c=i.element;return c.className=u,c.appendChild(i.ulElement_),c.appendChild(h),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return eh(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],n=t.layerStatesArray,o=0,r=n.length;o<r;++o){var s=n[o];if(bi(s,t.viewState)){var a=s.layer.getSource();if(a){var l=a.getAttributions();if(l){var h=l(t);if(h)if(this.overrideCollapsible_||!1!==a.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(h))for(var u=0,c=h.length;u<c;++u)h[u]in e||(i.push(h[u]),e[h[u]]=!0);else h in e||(i.push(h),e[h]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!x(e,this.renderedAttributions_)){Hi(this.ulElement_);for(var n=0,o=e.length;n<o;++n){var r=document.createElement("li");r.innerHTML=e[n],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Ui(this.collapseLabel_,this.label_):Ui(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(th);var nh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const oh=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this;var o=void 0!==n.className?n.className:"ol-rotate",r=void 0!==n.label?n.label:"";i.label_=null,"string"==typeof r?(i.label_=document.createElement("span"),i.label_.className="ol-compass",i.label_.textContent=r):(i.label_=r,i.label_.classList.add("ol-compass"));var s=n.tipLabel?n.tipLabel:"Reset rotation",a=document.createElement("button");a.className=o+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(i.label_),a.addEventListener(M,i.handleClick_.bind(i),!1);var l=o+" ol-unselectable "+Ji,h=i.element;return h.className=l,h.appendChild(a),i.callResetNorth_=n.resetNorth?n.resetNorth:void 0,i.duration_=void 0!==n.duration?n.duration:250,i.autoHide_=void 0===n.autoHide||n.autoHide,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(qi),i}return nh(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:ai}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var o=this.element.classList.contains(qi);o||0!==i?o&&0!==i&&this.element.classList.remove(qi):this.element.classList.add(qi)}this.label_.style.transform=n}this.rotation_=i}},e}(th);var rh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const sh=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{element:document.createElement("div"),target:n.target})||this;var o=void 0!==n.className?n.className:"ol-zoom",r=void 0!==n.delta?n.delta:1,s=void 0!==n.zoomInLabel?n.zoomInLabel:"+",a=void 0!==n.zoomOutLabel?n.zoomOutLabel:"",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",h=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=o+"-in",u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof s?document.createTextNode(s):s),u.addEventListener(M,i.handleClick_.bind(i,r),!1);var c=document.createElement("button");c.className=o+"-out",c.setAttribute("type","button"),c.title=h,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(M,i.handleClick_.bind(i,-r),!1);var p=o+" ol-unselectable "+Ji,d=i.element;return d.className=p,d.appendChild(u),d.appendChild(c),i.duration_=void 0!==n.duration?n.duration:250,i}return rh(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getZoom();if(void 0!==i){var n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:ai})):e.setZoom(n)}}},e}(th),ah="active";var lh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function hh(t,e,i,n){var o=t.getZoom();if(void 0!==o){var r=t.getConstrainedZoom(o+e),s=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:void 0!==n?n:250,easing:ai})}}const uh=function(t){function e(e){var i=t.call(this)||this;return e&&e.handleEvent&&(i.handleEvent=e.handleEvent),i.map_=null,i.setActive(!0),i}return lh(e,t),e.prototype.getActive=function(){return this.get(ah)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(ah,t)},e.prototype.setMap=function(t){this.map_=t},e}(tt);var ch=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const ph=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:250,i}return ch(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Bl.DBLCLICK){var i=t.originalEvent,n=t.map,o=t.coordinate,r=i.shiftKey?-this.delta_:this.delta_;hh(n.getView(),r,o,this.duration_),t.preventDefault(),e=!0}return!e},e}(uh);var dh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function fh(t){for(var e=t.length,i=0,n=0,o=0;o<e;o++)i+=t[o].clientX,n+=t[o].clientY;return[i/e,n/e]}const gh=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,n)||this,n.handleDownEvent&&(i.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(i.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(i.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(i.handleUpEvent=n.handleUpEvent),n.stopDown&&(i.stopDown=n.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return dh(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Bl.POINTERDRAG)this.handleDragEvent(t),t.preventDefault();else if(t.type==Bl.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Bl.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Bl.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Bl.POINTERDOWN||e===Bl.POINTERDRAG||e===Bl.POINTERUP}(t)){var e=t.originalEvent,i=e.pointerId.toString();t.type==Bl.POINTERUP?delete this.trackedPointers_[i]:(t.type==Bl.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=T(this.trackedPointers_)}},e}(uh);function _h(t){var e=arguments;return function(t){for(var i=!0,n=0,o=e.length;n<o&&(i=i&&e[n](t));++n);return i}}var yh=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},mh=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){return t.target.getTargetElement().contains(document.activeElement)}(t)},vh=A,Ch=function(t){var e=t.originalEvent;return 0==e.button&&!(Gi&&Bi&&e.ctrlKey)},xh=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Ah=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Eh=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},wh=function(t){var e=t.originalEvent;return st(void 0!==e,56),"mouse"==e.pointerType},Sh=function(t){var e=t.originalEvent;return st(void 0!==e,56),e.isPrimary&&0===e.button},bh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Th=function(t){function e(e){var i=t.call(this,{stopDown:E})||this,n=e||{};i.kinetic_=n.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var o=n.condition?n.condition:_h(xh,Sh);return i.condition_=n.onFocusOnly?_h(mh,o):o,i.noKinetic_=!1,i}return bh(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,i=fh(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=t.map.getView();jr(n,o.getResolution()),Dr(n,o.getRotation()),o.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),r=i.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([s[0]-n*Math.cos(o),s[1]-n*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(a),duration:500,easing:ai})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(gh);var Rh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ph=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{stopDown:E})||this).condition_=n.condition?n.condition:yh,i.lastAngle_=void 0,i.duration_=void 0!==n.duration?n.duration:250,i}return Rh(e,t),e.prototype.handleDragEvent=function(t){if(wh(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==wl){var n=e.getSize(),o=t.pixel,r=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(void 0!==this.lastAngle_){var s=r-this.lastAngle_;i.adjustRotationInternal(-s)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!wh(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!wh(t)||!Ch(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(gh);var Oh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ih=function(t){function e(e){var i=t.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return Oh(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ja([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(_);var Fh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lh=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.coordinate=i,o.mapBrowserEvent=n,o}return Fh(e,t),e}(f);const Mh=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.box_=new Ih(n.className||"ol-dragbox"),i.minArea_=void 0!==n.minArea?n.minArea:64,n.onBoxEnd&&(i.onBoxEnd=n.onBoxEnd),i.startPixel_=null,i.condition_=n.condition?n.condition:Ch,i.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:i.defaultBoxEndCondition,i}return Fh(e,t),e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],o=i[1]-e[1];return n*n+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Lh("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new Lh("boxend",t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Lh("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(gh);var kh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Dh=function(t){function e(e){var i=this,n=e||{},o=n.condition?n.condition:Ah;return(i=t.call(this,{condition:o,className:n.className||"ol-dragzoom",minArea:n.minArea})||this).duration_=void 0!==n.duration?n.duration:200,i.out_=void 0!==n.out&&n.out,i}return kh(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap(),i=e.getView(),n=e.getSize(),o=this.getGeometry().getExtent();if(this.out_){var r=i.calculateExtentInternal(n),s=function(t,e){return function(t,e){for(var i=0,n=e.length;i<n;++i)Pt(t,e[i]);return t}(bt(void 0),t)}([e.getPixelFromCoordinateInternal(Mt(o)),e.getPixelFromCoordinateInternal(Wt(o))]);!function(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}(r,1/i.getResolutionForExtentInternal(s,n)),o=r}var a=i.getConstrainedResolution(i.getResolutionForExtentInternal(o,n)),l=i.getConstrainedCenter(Dt(o),a);i.animateInternal({resolution:a,center:l,duration:this.duration_,easing:ai})},e}(Mh);var jh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Gh=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.defaultCondition_=function(t){return xh(t)&&Eh(t)},i.condition_=void 0!==n.condition?n.condition:i.defaultCondition_,i.duration_=void 0!==n.duration?n.duration:100,i.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,i}return jh(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==k){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(40==i||37==i||39==i||38==i)){var n=t.map.getView(),o=n.getResolution()*this.pixelDelta_,r=0,s=0;40==i?s=-o:37==i?r=-o:39==i?r=o:s=o;var a=[r,s];Dr(a,n.getRotation()),function(t,e,i){var n=t.getCenterInternal();if(n){var o=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:hi,center:t.getConstrainedCenter(o)})}}(n,a,this.duration_),t.preventDefault(),e=!0}}return!e},e}(uh);var Bh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const zh=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.condition_=n.condition?n.condition:Eh,i.delta_=n.delta?n.delta:1,i.duration_=void 0!==n.duration?n.duration:100,i}return Bh(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==k||t.type==D){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,o=i=="+".charCodeAt(0)?this.delta_:-this.delta_;hh(n.getView(),o,void 0,this.duration_),t.preventDefault(),e=!0}}return!e},e}(uh),Nh=function(){function t(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var o=this.points_[e]-this.points_[i],r=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var Wh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vh="trackpad";const Yh=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,n)||this).totalDelta_=0,i.lastDelta_=0,i.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,i.duration_=void 0!==n.duration?n.duration:250,i.timeout_=void 0!==n.timeout?n.timeout:80,i.useAnchor_=void 0===n.useAnchor||n.useAnchor,i.constrainResolution_=void 0!==n.constrainResolution&&n.constrainResolution;var o=n.condition?n.condition:vh;return i.condition_=n.onFocusOnly?_h(mh,o):o,i.lastAnchor_=null,i.startTime_=void 0,i.timeoutId_,i.mode_=void 0,i.trackpadEventGap_=400,i.trackpadTimeoutId_,i.deltaPerZoom_=300,i}return Wh(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==B)return!0;t.preventDefault();var e,i=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==B&&(e=n.deltaY,ji&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=zi),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Vh:"wheel");var r=i.getView();if(this.mode_===Vh&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=e;var s=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),s),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=-Ut(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),hh(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(uh);var Kh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Xh=function(t){function e(e){var i=this,n=e||{},o=n;return o.stopDown||(o.stopDown=E),(i=t.call(this,o)||this).anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=void 0!==n.threshold?n.threshold:.3,i.duration_=void 0!==n.duration?n.duration:250,i}return Kh(e,t),e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var r=o-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=o;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==wl){var l=s.getViewport().getBoundingClientRect(),h=fh(this.targetPointers);h[0]-=l.left,h[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(h),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(gh);var Uh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Zh=function(t){function e(e){var i=this,n=e||{},o=n;return o.stopDown||(o.stopDown=E),(i=t.call(this,o)||this).anchor_=null,i.duration_=void 0!==n.duration?n.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return Uh(e,t),e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],o=i.clientX-n.clientX,r=i.clientY-n.clientY,s=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);var h=a.getViewport().getBoundingClientRect(),u=fh(this.targetPointers);u[0]-=h.left,u[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(u),a.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(gh);var Hh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const qh=function(t){function e(e){return(e=S({},e)).controls||(e.controls=function(t){var e={},i=new gr;return(void 0===e.zoom||e.zoom)&&i.push(new sh(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new oh(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new ih(e.attributionOptions)),i}()),e.interactions||(e.interactions=function(t){var e={onFocusOnly:!0}||{},i=new gr,n=new Nh(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new Ph),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new ph({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new Th({onFocusOnly:e.onFocusOnly,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Xh),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new Zh({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new Gh),i.push(new zh({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new Yh({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new Dh({duration:e.zoomDuration})),i}()),t.call(this,e)||this}return Hh(e,t),e.prototype.createRenderer=function(){return new Ml(this)},e}(Ql);var Jh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Qh=function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",o=void 0!==i.tileGrid?i.tileGrid:function(t){var e=t||{},i=e.extent||Ee("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:No(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Bo(n)}({extent:Wo(n),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return Jh(e,t),e}(Qo);let $h=!1,tu=document.getElementById("map");tu.style.height="100vh";let eu=document.getElementById("ganti");var iu;const nu=new gl({map:new qh({target:tu,view:new Pl({center:(iu=[106.8208828,-6.6169003],Oe(iu,"EPSG:4326","EPSG:3857")),zoom:12}),layers:[new kn({source:new Qh({url:"http://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}"})})]})});eu.addEventListener("click",(function(){$h=!$h,nu.setEnabled($h)})),window.ol3d=nu}},0,[[742,666,216]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9vbC5jc3MiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2Nzc1dpdGhNYXBwaW5nVG9TdHJpbmcuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvcmJ1c2gvcmJ1c2guanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvb2wuY3NzP2VlM2MiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeVR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL09iamVjdEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9EaXNwb3NhYmxlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2FycmF5LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9vYmouanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL1RhcmdldC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3V0aWwuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvT2JqZWN0LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovVW5pdHMuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvQXNzZXJ0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvYXNzZXJ0cy5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L0Nvcm5lci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9leHRlbnQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1Byb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvbWF0aC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2czODU3LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzQzMjYuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9wcm9qZWN0aW9ucy5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3RyYW5zZm9ybXMuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvc3BoZXJlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ouanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vR2VvbWV0cnlMYXlvdXQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvZGVmbGF0ZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvaW50LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvdXRpbC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9lYXNpbmcuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvQmFzZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9TdGF0ZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9MYXllci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvQmFzZVRpbGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VTdGF0ZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvRXZlbnQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvaGFzLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2RvbS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9jc3MuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVJhbmdlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVN0YXRlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1RpbGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvQmFzZUltYWdlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9jb21tb24uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL0ltYWdlTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvVmlld0hpbnQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VCYXNlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9Ucmlhbmd1bGF0aW9uLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9jb21tb24uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9JbWFnZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU291cmNlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9JbWFnZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvSW1hZ2VTdGF0aWMuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1dNU1NlcnZlclR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvdXJpLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3N0cmluZy5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvSW1hZ2VXTVMuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvVGlsZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZVRpbGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RpbGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvc3RydWN0cy9MUlVDYWNoZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC90aWxlY29vcmQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvVGlsZUNhY2hlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3NpemUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvVGlsZUdyaWQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvY29tbW9uLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVncmlkLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3RpbGV1cmxmdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVXJsVGlsZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUltYWdlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlV01TLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvY29yZS9PTEltYWdlcnlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbGNzL2NvcmUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2xjcy9tYXRoLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvQ2FtZXJhLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb25FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvQ29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9Hcm91cC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbGNzL0Fic3RyYWN0U3luY2hyb25pemVyLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvUmFzdGVyU3luY2hyb25pemVyLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvUkJ1c2guanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1ZlY3RvckV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9sb2FkaW5nc3RyYXRlZ3kuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZm9ybWF0L0Zvcm1hdFR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZmVhdHVyZWxvYWRlci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVmVjdG9yLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL0ZlYXR1cmUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvY29vcmRpbmF0ZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvQ2x1c3Rlci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9JbWFnZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9jb2xvci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9jb2xvcmxpa2UuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvUmVndWxhclNoYXBlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL0NpcmNsZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9GaWxsLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL1N0cm9rZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9TdHlsZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlVmVjdG9yLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvSW5zdHJ1Y3Rpb24uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL1ZlY3RvckNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2luZmxhdGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9CdWlsZGVyLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvSW1hZ2VCdWlsZGVyLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvTGluZVN0cmluZ0J1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NpbXBsaWZ5LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvUG9seWdvbkJ1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3N0cmFpZ2h0Y2h1bmsuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9UZXh0QnVpbGRlci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9UZXh0UGxhY2VtZW50LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvQnVpbGRlclR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RleHRwYXRoLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9sZW5ndGguanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9FeGVjdXRvci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXAuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9JbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkFuY2hvclVuaXRzLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL0ljb25PcmlnaW4uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkltYWdlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL0ljb24uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9oaXRkZXRlY3QuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvdmVjdG9yLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9WZWN0b3JMYXllci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9WZWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVmVjdG9yVGlsZVJlbmRlclR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvclRpbGVMYXllci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9WZWN0b3JUaWxlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jbG9zZXN0LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9hcmVhLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vTGluZWFyUmluZy5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvY29udGFpbnMuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2ludGVyc2VjdHNleHRlbnQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NlZ21lbnRzLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9yZXZlcnNlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9vcmllbnQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2x5Z29uLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcmlvcnBvaW50LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvY29yZS9WZWN0b3JMYXllckNvdW50ZXJwYXJ0LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvVmVjdG9yU3luY2hyb25pemVyLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvRmVhdHVyZUNvbnZlcnRlci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9NYXBFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvT3ZlcmxheVBvc2l0aW9uaW5nLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL092ZXJsYXkuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2xjcy9TeW5jaHJvbml6ZWRPdmVybGF5LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvT3ZlcmxheVN5bmNocm9uaXplci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbGNzL09MQ2VzaXVtLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sY3MvQXV0b1JlbmRlckxvb3AuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvVmlld1Byb3BlcnR5LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2NlbnRlcmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcm90YXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXcuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTWFwLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9Db21wb3NpdGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnQuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcG9pbnRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9NYXBQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL1ByaW9yaXR5UXVldWUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVF1ZXVlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL1BsdWdnYWJsZU1hcC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL0NvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL1pvb20uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BvaW50ZXIuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL2NvbmRpdGlvbi5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0JveC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnQm94LmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdab29tLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9LZXlDb2RlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9LaW5ldGljLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9NYXAuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvWFlaLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbIl9fX0NTU19MT0FERVJfRVhQT1JUX19fIiwicHVzaCIsIm1vZHVsZSIsImlkIiwiZXhwb3J0cyIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNvbnRlbnQiLCJjb25jYXQiLCJqb2luIiwiaSIsIm1vZHVsZXMiLCJtZWRpYVF1ZXJ5IiwiZGVkdXBlIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImxlbmd0aCIsIl9pIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJhcnIiLCJsZW4iLCJhcnIyIiwiQXJyYXkiLCJfaXRlbSIsImlzQXJyYXkiLCJfYXJyYXlXaXRoSG9sZXMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIk9iamVjdCIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJ1bmRlZmluZWQiLCJfcyIsIm5leHQiLCJkb25lIiwidmFsdWUiLCJlcnIiLCJfaXRlcmFibGVUb0FycmF5TGltaXQiLCJvIiwibWluTGVuIiwibiIsInByb3RvdHlwZSIsImNhbGwiLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsImZyb20iLCJ0ZXN0IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwiVHlwZUVycm9yIiwiX25vbkl0ZXJhYmxlUmVzdCIsImNzc01hcHBpbmciLCJidG9hIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJxdWlja3NlbGVjdCIsImsiLCJsZWZ0IiwicmlnaHQiLCJjb21wYXJlIiwicXVpY2tzZWxlY3RTdGVwIiwiZGVmYXVsdENvbXBhcmUiLCJtIiwieiIsIk1hdGgiLCJsb2ciLCJzIiwiZXhwIiwic2QiLCJzcXJ0IiwibWF4IiwiZmxvb3IiLCJtaW4iLCJ0IiwiaiIsInN3YXAiLCJ0bXAiLCJhIiwiYiIsIlJCdXNoIiwibWF4RW50cmllcyIsIl9tYXhFbnRyaWVzIiwiX21pbkVudHJpZXMiLCJjZWlsIiwiY2xlYXIiLCJmaW5kSXRlbSIsIml0ZW1zIiwiZXF1YWxzRm4iLCJpbmRleE9mIiwiY2FsY0JCb3giLCJub2RlIiwidG9CQm94IiwiZGlzdEJCb3giLCJjaGlsZHJlbiIsInAiLCJkZXN0Tm9kZSIsImNyZWF0ZU5vZGUiLCJtaW5YIiwiSW5maW5pdHkiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJjaGlsZCIsImV4dGVuZCIsImxlYWYiLCJjb21wYXJlTm9kZU1pblgiLCJjb21wYXJlTm9kZU1pblkiLCJiYm94QXJlYSIsImJib3hNYXJnaW4iLCJjb250YWlucyIsImludGVyc2VjdHMiLCJoZWlnaHQiLCJtdWx0aVNlbGVjdCIsInN0YWNrIiwicG9wIiwibWlkIiwiYWxsIiwiX2FsbCIsInNlYXJjaCIsImJib3giLCJyZXN1bHQiLCJub2Rlc1RvU2VhcmNoIiwiY2hpbGRCQm94IiwiY29sbGlkZXMiLCJsb2FkIiwiaW5zZXJ0IiwiX2J1aWxkIiwiX3NwbGl0Um9vdCIsInRtcE5vZGUiLCJfaW5zZXJ0IiwicmVtb3ZlIiwicGFyZW50IiwiZ29pbmdVcCIsInBhdGgiLCJpbmRleGVzIiwiaW5kZXgiLCJzcGxpY2UiLCJfY29uZGVuc2UiLCJjb21wYXJlTWluWCIsImNvbXBhcmVNaW5ZIiwidG9KU09OIiwiZnJvbUpTT04iLCJhcHBseSIsIk4iLCJNIiwicG93IiwiTjIiLCJOMSIsInJpZ2h0MiIsInJpZ2h0MyIsIl9jaG9vc2VTdWJ0cmVlIiwibGV2ZWwiLCJtaW5BcmVhIiwibWluRW5sYXJnZW1lbnQiLCJ0YXJnZXROb2RlIiwiYXJlYSIsImVubGFyZ2VtZW50IiwiaXNOb2RlIiwiaW5zZXJ0UGF0aCIsIl9zcGxpdCIsIl9hZGp1c3RQYXJlbnRCQm94ZXMiLCJfY2hvb3NlU3BsaXRBeGlzIiwic3BsaXRJbmRleCIsIl9jaG9vc2VTcGxpdEluZGV4IiwibmV3Tm9kZSIsIm1pbk92ZXJsYXAiLCJiYm94MSIsImJib3gyIiwib3ZlcmxhcCIsIl9hbGxEaXN0TWFyZ2luIiwic29ydCIsImxlZnRCQm94IiwicmlnaHRCQm94IiwibWFyZ2luIiwiaSQxIiwiY2hpbGQkMSIsInNpYmxpbmdzIiwiZmFjdG9yeSIsIm1lbW8iLCJnZXRUYXJnZXQiLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndpbmRvdyIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsIm1vZHVsZXNUb0RvbSIsIm9wdGlvbnMiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJiYXNlIiwiY291bnQiLCJvYmoiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInNldEF0dHJpYnV0ZSIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiQm9vbGVhbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJiaW5kIiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImF0b2IiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2luZGV4IiwiQmFzZUV2ZW50IiwidHlwZSIsInByb3BhZ2F0aW9uU3RvcHBlZCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiRGlzcG9zYWJsZSIsImRpc3Bvc2VkIiwiZGlzcG9zZSIsImRpc3Bvc2VJbnRlcm5hbCIsIm51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24iLCJsaW5lYXJGaW5kTmVhcmVzdCIsImRpcmVjdGlvbiIsInJldmVyc2VTdWJBcnJheSIsImJlZ2luIiwiZW5kIiwiZXh0ZW5zaW9uIiwiZXF1YWxzIiwiYXJyMSIsImxlbjEiLCJUUlVFIiwiVk9JRCIsImFzc2lnbiIsInZhcl9zb3VyY2VzIiwib3V0cHV0IiwiaWkiLCJhcmd1bWVudHMiLCJoYXNPd25Qcm9wZXJ0eSIsIm9iamVjdCIsInByb3BlcnR5IiwiZ2V0VmFsdWVzIiwidmFsdWVzIiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsImQiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9fIiwiY3JlYXRlIiwiX3N1cGVyIiwiVGFyZ2V0Iiwib3B0X3RhcmdldCIsIl90aGlzIiwiZXZlbnRUYXJnZXRfIiwicGVuZGluZ1JlbW92YWxzXyIsImRpc3BhdGNoaW5nXyIsImxpc3RlbmVyc18iLCJhZGRFdmVudExpc3RlbmVyIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiZGlzcGF0Y2hFdmVudCIsImV2ZW50IiwiZXZ0IiwiRXZlbnQiLCJwcm9wYWdhdGUiLCJkaXNwYXRjaGluZyIsInBlbmRpbmdSZW1vdmFscyIsImhhbmRsZUV2ZW50IiwicHIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0TGlzdGVuZXJzIiwiaGFzTGlzdGVuZXIiLCJvcHRfdHlwZSIsImxpc3RlbiIsIm9wdF90aGlzIiwib3B0X29uY2UiLCJvcmlnaW5hbExpc3RlbmVyXzEiLCJldmVudHNLZXkiLCJsaXN0ZW5PbmNlIiwidW5saXN0ZW5CeUtleSIsInVuQnlLZXkiLCJPYnNlcnZhYmxlIiwicmV2aXNpb25fIiwiY2hhbmdlZCIsIkV2ZW50VHlwZSIsImdldFJldmlzaW9uIiwib24iLCJvbmNlIiwib2xfa2V5IiwidW4iLCJ1aWRDb3VudGVyXyIsImdldFVpZCIsIm9sX3VpZCIsIlN0cmluZyIsIk9iamVjdEV2ZW50Iiwib2xkVmFsdWUiLCJCYXNlT2JqZWN0Iiwib3B0X3ZhbHVlcyIsInZhbHVlc18iLCJzZXRQcm9wZXJ0aWVzIiwiZ2V0IiwiZ2V0S2V5cyIsImdldFByb3BlcnRpZXMiLCJoYXNQcm9wZXJ0aWVzIiwibm90aWZ5IiwiZXZlbnRUeXBlIiwiZ2V0Q2hhbmdlRXZlbnRUeXBlIiwiT2JqZWN0RXZlbnRUeXBlIiwic2V0Iiwib3B0X3NpbGVudCIsInVuc2V0IiwiY2hhbmdlRXZlbnRUeXBlQ2FjaGUiLCJVbml0cyIsIkRFR1JFRVMiLCJGRUVUIiwiTUVURVJTIiwiUElYRUxTIiwiVElMRV9QSVhFTFMiLCJVU0ZFRVQiLCJNRVRFUlNfUEVSX1VOSVQiLCJQSSIsIkFzc2VydGlvbkVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzcGxpdCIsImFzc2VydGlvbiIsImVycm9yQ29kZSIsInRtcF8iLCJ0cmFuc2Zvcm0iLCJtdWx0aXBseSIsInRyYW5zZm9ybTEiLCJ0cmFuc2Zvcm0yIiwiYTEiLCJiMSIsImMxIiwiZDEiLCJlMSIsImYxIiwiYTIiLCJiMiIsImMyIiwiZDIiLCJlMiIsImYyIiwiYyIsImYiLCJjb29yZGluYXRlIiwieCIsInkiLCJzY2FsZSIsImNvbXBvc2UiLCJkeDEiLCJkeTEiLCJzeCIsInN5IiwiYW5nbGUiLCJkeDIiLCJkeTIiLCJzaW4iLCJjb3MiLCJtYWtlSW52ZXJzZSIsIm1hdCIsImRldCIsImJvdW5kaW5nRXh0ZW50IiwiY29vcmRpbmF0ZXMiLCJleHRlbnQiLCJleHRlbmRDb29yZGluYXRlIiwiYnVmZmVyIiwib3B0X2V4dGVudCIsImNsb25lIiwiY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZIiwiZHgiLCJkeSIsImNvbnRhaW5zQ29vcmRpbmF0ZSIsImNvbnRhaW5zWFkiLCJjb250YWluc0V4dGVudCIsImV4dGVudDEiLCJleHRlbnQyIiwiY29vcmRpbmF0ZVJlbGF0aW9uc2hpcCIsInJlbGF0aW9uc2hpcCIsImNyZWF0ZU9yVXBkYXRlIiwiY3JlYXRlT3JVcGRhdGVFbXB0eSIsImNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUiLCJleHRlbmRGbGF0Q29vcmRpbmF0ZXMiLCJmbGF0Q29vcmRpbmF0ZXMiLCJvZmZzZXQiLCJzdHJpZGUiLCJleHRlbmRYWSIsImZvckVhY2hDb3JuZXIiLCJjYWxsYmFjayIsInZhbCIsImdldEJvdHRvbUxlZnQiLCJnZXRCb3R0b21SaWdodCIsImdldFRvcFJpZ2h0IiwiZ2V0VG9wTGVmdCIsImdldEFyZWEiLCJnZXRIZWlnaHQiLCJnZXRDZW50ZXIiLCJnZXRDb3JuZXIiLCJjb3JuZXIiLCJDb3JuZXIiLCJnZXRGb3JWaWV3QW5kU2l6ZSIsImNlbnRlciIsInJlc29sdXRpb24iLCJyb3RhdGlvbiIsInNpemUiLCJjb3NSb3RhdGlvbiIsInNpblJvdGF0aW9uIiwieENvcyIsInhTaW4iLCJ5Q29zIiwieVNpbiIsIngwIiwieDEiLCJ4MiIsIngzIiwieTAiLCJ5MSIsInkyIiwieTMiLCJnZXRJbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3Rpb24iLCJQcm9qZWN0aW9uIiwiY29kZV8iLCJ1bml0c18iLCJleHRlbnRfIiwid29ybGRFeHRlbnRfIiwid29ybGRFeHRlbnQiLCJheGlzT3JpZW50YXRpb25fIiwiYXhpc09yaWVudGF0aW9uIiwiZ2xvYmFsXyIsImdsb2JhbCIsImNhbldyYXBYXyIsImdldFBvaW50UmVzb2x1dGlvbkZ1bmNfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uIiwiZGVmYXVsdFRpbGVHcmlkXyIsIm1ldGVyc1BlclVuaXRfIiwibWV0ZXJzUGVyVW5pdCIsImNhbldyYXBYIiwiZ2V0Q29kZSIsImdldEV4dGVudCIsImdldFVuaXRzIiwiZ2V0TWV0ZXJzUGVyVW5pdCIsImdldFdvcmxkRXh0ZW50IiwiZ2V0QXhpc09yaWVudGF0aW9uIiwiaXNHbG9iYWwiLCJzZXRHbG9iYWwiLCJnZXREZWZhdWx0VGlsZUdyaWQiLCJzZXREZWZhdWx0VGlsZUdyaWQiLCJ0aWxlR3JpZCIsInNldEV4dGVudCIsInNldFdvcmxkRXh0ZW50Iiwic2V0R2V0UG9pbnRSZXNvbHV0aW9uIiwiZnVuYyIsImdldFBvaW50UmVzb2x1dGlvbkZ1bmMiLCJjb3NoIiwibG9nMiIsIkxPRzJFIiwic3F1YXJlZFNlZ21lbnREaXN0YW5jZSIsInRvRGVncmVlcyIsImFuZ2xlSW5SYWRpYW5zIiwiYW5nbGVJbkRlZ3JlZXMiLCJyIiwibGVycCIsIlJBRElVUyIsIkhBTEZfU0laRSIsIkVYVEVOVCIsIldPUkxEX0VYVEVOVCIsIkVQU0czODU3UHJvamVjdGlvbiIsInVuaXRzIiwicG9pbnQiLCJQUk9KRUNUSU9OUyIsIkVQU0c0MzI2UHJvamVjdGlvbiIsIm9wdF9heGlzT3JpZW50YXRpb24iLCJjYWNoZSIsInRyYW5zZm9ybXMiLCJkZXN0aW5hdGlvbiIsInRyYW5zZm9ybUZuIiwic291cmNlQ29kZSIsImRlc3RpbmF0aW9uQ29kZSIsIkRFRkFVTFRfUkFESVVTIiwiZ2V0RGlzdGFuY2UiLCJvcHRfcmFkaXVzIiwicmFkaXVzIiwibGF0MSIsImxhdDIiLCJkZWx0YUxhdEJ5MiIsImRlbHRhTG9uQnkyIiwiYXRhbjIiLCJkaXN0YW5jZSIsImJlYXJpbmciLCJsb24xIiwiZEJ5UiIsImxhdCIsImFzaW4iLCJjbG9uZVRyYW5zZm9ybSIsImlucHV0Iiwib3B0X291dHB1dCIsIm9wdF9kaW1lbnNpb24iLCJpZGVudGl0eVRyYW5zZm9ybSIsImFkZFByb2plY3Rpb24iLCJwcm9qZWN0aW9uIiwiYWRkIiwicHJvamVjdGlvbkxpa2UiLCJvcHRfdW5pdHMiLCJwb2ludFJlc29sdXRpb24iLCJnZXR0ZXIiLCJ0b0VQU0c0MzI2XzEiLCJ2ZXJ0aWNlcyIsImFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyIsInByb2plY3Rpb25zIiwiYWRkUHJvamVjdGlvbnMiLCJjcmVhdGVQcm9qZWN0aW9uIiwiZGVmYXVsdENvZGUiLCJlcXVpdmFsZW50IiwicHJvamVjdGlvbjEiLCJwcm9qZWN0aW9uMiIsImVxdWFsVW5pdHMiLCJzb3VyY2VQcm9qZWN0aW9uIiwiZGVzdGluYXRpb25Qcm9qZWN0aW9uIiwidHJhbnNmb3JtRnVuYyIsImdldFRyYW5zZm9ybSIsInRyYW5zZm9ybUV4dGVudCIsIm9wdF9zdG9wcyIsIndpZHRoIiwieHMiLCJ5cyIsImwiLCJfYm91bmRpbmdFeHRlbnRYWXMiLCJwcm9qZWN0aW9uczIiLCJmb3J3YXJkVHJhbnNmb3JtIiwiaW52ZXJzZVRyYW5zZm9ybSIsInVzZXJQcm9qZWN0aW9uIiwidG9Vc2VyQ29vcmRpbmF0ZSIsImZyb21Vc2VyQ29vcmRpbmF0ZSIsImRlc3RQcm9qZWN0aW9uIiwidG9Vc2VyRXh0ZW50IiwiZnJvbVVzZXJFeHRlbnQiLCJ0cmFuc2Zvcm0yRCIsIm9wdF9kZXN0IiwiZGVzdCIsImFuY2hvciIsImFuY2hvclgiLCJhbmNob3JZIiwiZGVsdGFYIiwiZGVsdGFZIiwiZGltZW5zaW9uIiwiaGFsZlNpemUiLCJ0YW4iLCJhdGFuIiwidG1wVHJhbnNmb3JtIiwiR2VvbWV0cnkiLCJmbiIsImxhc3RSZXN1bHQiLCJsYXN0QXJncyIsImxhc3RUaGlzIiwiY2FsbGVkIiwiZXh0ZW50UmV2aXNpb25fIiwic2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSIsInNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uIiwic2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsIiwicmV2aXNpb24iLCJzcXVhcmVkVG9sZXJhbmNlIiwib3B0X3RyYW5zZm9ybSIsImdldFNpbXBsaWZpZWRHZW9tZXRyeSIsImFwcGx5VHJhbnNmb3JtIiwibmV4dEFyZ3MiLCJzaW1wbGlmeVRyYW5zZm9ybWVkIiwiY2xvc2VzdFBvaW50WFkiLCJjbG9zZXN0UG9pbnQiLCJtaW5TcXVhcmVkRGlzdGFuY2UiLCJjb29yZCIsImdldENsb3Nlc3RQb2ludCIsIm9wdF9jbG9zZXN0UG9pbnQiLCJOYU4iLCJpbnRlcnNlY3RzQ29vcmRpbmF0ZSIsImNvbXB1dGVFeHRlbnQiLCJpc05hTiIsInJldHVybk9yVXBkYXRlIiwicm90YXRlIiwib3B0X3N5Iiwib3B0X2FuY2hvciIsInNpbXBsaWZ5IiwidG9sZXJhbmNlIiwiZ2V0VHlwZSIsImludGVyc2VjdHNFeHRlbnQiLCJ0cmFuc2xhdGUiLCJzb3VyY2VQcm9qIiwiaW5Db29yZGluYXRlcyIsIm91dENvb3JkaW5hdGVzIiwicGl4ZWxFeHRlbnQiLCJwcm9qZWN0ZWRFeHRlbnQiLCJnZXRTdHJpZGVGb3JMYXlvdXQiLCJsYXlvdXQiLCJHZW9tZXRyeUxheW91dCIsIlNpbXBsZUdlb21ldHJ5IiwiZ2V0Q29vcmRpbmF0ZXMiLCJnZXRGaXJzdENvb3JkaW5hdGUiLCJnZXRGbGF0Q29vcmRpbmF0ZXMiLCJnZXRMYXN0Q29vcmRpbmF0ZSIsImdldExheW91dCIsInNpbXBsaWZpZWRHZW9tZXRyeSIsImdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsIiwiZ2V0U3RyaWRlIiwic2V0RmxhdENvb3JkaW5hdGVzIiwic2V0Q29vcmRpbmF0ZXMiLCJvcHRfbGF5b3V0Iiwic2V0TGF5b3V0IiwibmVzdGluZyIsImdldExheW91dEZvclN0cmlkZSIsImRlZmxhdGVDb29yZGluYXRlcyIsIlBvaW50Iiwic3F1YXJlZERpc3RhbmNlIiwiZGVmbGF0ZUNvb3JkaW5hdGUiLCJvbGNzTGlzdGVuIiwib2JzZXJ2YWJsZSIsInBhcmFtIiwic3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZFJlc3VsdF8iLCJpbWFnZVJlbmRlcmluZ1ZhbHVlUmVzdWx0XyIsInN1cHBvcnRzSW1hZ2VSZW5kZXJpbmdQaXhlbGF0ZWQiLCJjYW52YXMiLCJpbWFnZVJlbmRlcmluZ1ZhbHVlIiwiZ2V0U291cmNlUHJvamVjdGlvbiIsImdldFByb2plY3Rpb24iLCJvbGNzX3VpZCIsImlzR3JvdW5kUG9seWxpbmVQcmltaXRpdmVTdXBwb3J0ZWQiLCJzY2VuZSIsIkNlc2l1bSIsIkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlIiwiaXNTdXBwb3J0ZWQiLCJlYXNlSW4iLCJlYXNlT3V0IiwiaW5BbmRPdXQiLCJsaW5lYXIiLCJCYXNlTGF5ZXIiLCJwcm9wZXJ0aWVzIiwib3BhY2l0eSIsInZpc2libGUiLCJ6SW5kZXgiLCJtYXhSZXNvbHV0aW9uIiwibWluUmVzb2x1dGlvbiIsIm1pblpvb20iLCJtYXhab29tIiwiY2xhc3NOYW1lXyIsImNsYXNzTmFtZSIsInN0YXRlXyIsImdldENsYXNzTmFtZSIsImdldExheWVyU3RhdGUiLCJvcHRfbWFuYWdlZCIsInN0YXRlIiwibGF5ZXIiLCJtYW5hZ2VkIiwiZ2V0WkluZGV4Iiwicm91bmQiLCJnZXRPcGFjaXR5Iiwic291cmNlU3RhdGUiLCJnZXRTb3VyY2VTdGF0ZSIsImdldFZpc2libGUiLCJnZXRNYXhSZXNvbHV0aW9uIiwiZ2V0TWluUmVzb2x1dGlvbiIsImdldE1pblpvb20iLCJnZXRNYXhab29tIiwiZ2V0TGF5ZXJzQXJyYXkiLCJvcHRfYXJyYXkiLCJnZXRMYXllclN0YXRlc0FycmF5Iiwib3B0X3N0YXRlcyIsInNldE1heFJlc29sdXRpb24iLCJzZXRNaW5SZXNvbHV0aW9uIiwic2V0TWF4Wm9vbSIsInNldE1pblpvb20iLCJzZXRPcGFjaXR5Iiwic2V0VmlzaWJsZSIsInNldFpJbmRleCIsInppbmRleCIsImluVmlldyIsImxheWVyU3RhdGUiLCJ2aWV3U3RhdGUiLCJ6b29tIiwiTGF5ZXIiLCJiYXNlT3B0aW9ucyIsIm1hcFByZWNvbXBvc2VLZXlfIiwibWFwUmVuZGVyS2V5XyIsInNvdXJjZUNoYW5nZUtleV8iLCJyZW5kZXJlcl8iLCJyZW5kZXIiLCJzZXRNYXAiLCJoYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8iLCJzZXRTb3VyY2UiLCJhcnJheSIsInN0YXRlcyIsImdldFNvdXJjZSIsImdldFN0YXRlIiwiaGFuZGxlU291cmNlQ2hhbmdlXyIsImdldEZlYXR1cmVzIiwicGl4ZWwiLCJmcmFtZVN0YXRlIiwibGF5ZXJSZW5kZXJlciIsImdldFJlbmRlcmVyIiwicHJlcGFyZUZyYW1lIiwicmVuZGVyRnJhbWUiLCJsYXllclN0YXRlc0FycmF5Iiwic29tZSIsImFycmF5TGF5ZXJTdGF0ZSIsImNyZWF0ZVJlbmRlcmVyIiwiaGFzUmVuZGVyZXIiLCJCYXNlIiwiQmFzZVRpbGVMYXllciIsIm9wdF9vcHRpb25zIiwicHJlbG9hZCIsInVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJzZXRQcmVsb2FkIiwic2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciIsImdldFByZWxvYWQiLCJUaWxlUHJvcGVydHkiLCJnZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yIiwiTGF5ZXJSZW5kZXJlciIsImJvdW5kSGFuZGxlSW1hZ2VDaGFuZ2VfIiwiaGFuZGxlSW1hZ2VDaGFuZ2VfIiwibGF5ZXJfIiwibG9hZGVkVGlsZUNhbGxiYWNrIiwidGlsZXMiLCJ0aWxlIiwidGlsZUNvb3JkIiwiY3JlYXRlTG9hZGVkVGlsZUZpbmRlciIsInRpbGVSYW5nZSIsImZvckVhY2hMb2FkZWRUaWxlIiwiZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUiLCJoaXRUb2xlcmFuY2UiLCJkZWNsdXR0ZXJlZEZlYXR1cmVzIiwiZ2V0RGF0YUF0UGl4ZWwiLCJnZXRMYXllciIsImhhbmRsZUZvbnRzQ2hhbmdlZCIsInJlbmRlcklmUmVhZHlBbmRWaXNpYmxlIiwibG9hZEltYWdlIiwiaW1hZ2UiLCJpbWFnZVN0YXRlIiwiUmVuZGVyRXZlbnQiLCJvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtIiwib3B0X2ZyYW1lU3RhdGUiLCJvcHRfY29udGV4dCIsImludmVyc2VQaXhlbFRyYW5zZm9ybSIsImNvbnRleHQiLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiRklSRUZPWCIsIldFQktJVCIsImRldmljZVBpeGVsUmF0aW8iLCJXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyIsIldvcmtlckdsb2JhbFNjb3BlIiwiT2Zmc2NyZWVuQ2FudmFzIiwic2VsZiIsIklNQUdFX0RFQ09ERSIsIkltYWdlIiwiZGVjb2RlIiwiUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMiLCJwYXNzaXZlIiwiZGVmaW5lUHJvcGVydHkiLCJlcnJvciIsImNyZWF0ZUNhbnZhc0NvbnRleHQyRCIsIm9wdF93aWR0aCIsIm9wdF9oZWlnaHQiLCJvcHRfY2FudmFzUG9vbCIsInNoaWZ0IiwiZ2V0Q29udGV4dCIsImVsZW1lbnQiLCJvZmZzZXRXaWR0aCIsImdldENvbXB1dGVkU3R5bGUiLCJwYXJzZUludCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsIm9mZnNldEhlaWdodCIsIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSIsInJlcGxhY2VOb2RlIiwib2xkTm9kZSIsInJlcGxhY2VDaGlsZCIsImxhc3RDaGlsZCIsIkNMQVNTX0hJRERFTiIsIkNMQVNTX0NPTlRST0wiLCJmb250UmVnRXgiLCJSZWdFeHAiLCJmb250UmVnRXhNYXRjaEluZGV4IiwiZ2V0Rm9udFBhcmFtZXRlcnMiLCJmb250U3BlYyIsIm1hdGNoIiwibGluZUhlaWdodCIsIndlaWdodCIsInZhcmlhbnQiLCJmYW1pbGllcyIsImZhbWlseSIsImRlZmF1bHRGb250IiwiZGVmYXVsdEZpbGxTdHlsZSIsImRlZmF1bHRMaW5lQ2FwIiwiZGVmYXVsdExpbmVEYXNoIiwiZGVmYXVsdExpbmVKb2luIiwiZGVmYXVsdFN0cm9rZVN0eWxlIiwiZGVmYXVsdFRleHRBbGlnbiIsImRlZmF1bHRUZXh0QmFzZWxpbmUiLCJkZWZhdWx0UGFkZGluZyIsImNoZWNrZWRGb250cyIsInNldFNpemUiLCJjb25zb2xlIiwid2FybiIsIm1lYXN1cmVGb250IiwiZGl2IiwiaGVpZ2h0cyIsIm1lYXN1cmVDb250ZXh0IiwidGV4dEhlaWdodHMiLCJyZWdpc3RlckZvbnQiLCJpbnRlcnZhbCIsInJlZmVyZW5jZVdpZHRoIiwicmVmZXJlbmNlRm9udHMiLCJ0ZXh0IiwiaXNBdmFpbGFibGUiLCJmb250U3R5bGUiLCJmb250V2VpZ2h0IiwiZm9udEZhbWlseSIsImF2YWlsYWJsZSIsInJlZmVyZW5jZUZvbnQiLCJtZWFzdXJlVGV4dFdpZHRoIiwiY2hlY2siLCJmb250cyIsImZvbnQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJtZWFzdXJlVGV4dEhlaWdodCIsIm1ldHJpY3MiLCJtZWFzdXJlVGV4dCIsIk51bWJlciIsImFjdHVhbEJvdW5kaW5nQm94QXNjZW50IiwiYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50IiwiaW5uZXJIVE1MIiwicGFkZGluZyIsInBvc2l0aW9uIiwiYm9keSIsIm1lYXN1cmVBbmRDYWNoZVRleHRXaWR0aCIsInJvdGF0ZUF0T2Zmc2V0Iiwib2Zmc2V0WCIsIm9mZnNldFkiLCJkcmF3SW1hZ2VPckxhYmVsIiwibGFiZWxPckltYWdlIiwib3JpZ2luWCIsIm9yaWdpblkiLCJ3IiwiaCIsInNhdmUiLCJnbG9iYWxBbHBoYSIsInNldFRyYW5zZm9ybSIsImNvbnRleHRJbnN0cnVjdGlvbnMiLCJsYWJlbCIsImV4ZWN1dGVMYWJlbEluc3RydWN0aW9ucyIsImRyYXdJbWFnZSIsInJlc3RvcmUiLCJjcmVhdGVUcmFuc2Zvcm1TdHJpbmdDYW52YXMiLCJjcmVhdGVUcmFuc2Zvcm1TdHJpbmciLCJDYW52YXNMYXllclJlbmRlcmVyIiwiY29udGFpbmVyIiwicmVuZGVyZWRSZXNvbHV0aW9uIiwidGVtcFRyYW5zZm9ybSIsInBpeGVsVHJhbnNmb3JtIiwiY29udGFpbmVyUmV1c2VkIiwidXNlQ29udGFpbmVyIiwibGF5ZXJDbGFzc05hbWUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIkhUTUxDYW52YXNFbGVtZW50IiwidHJhbnNmb3JtT3JpZ2luIiwiY2xpcCIsInBpeGVsUmF0aW8iLCJoYWxmV2lkdGgiLCJoYWxmSGVpZ2h0IiwidG9wTGVmdCIsInRvcFJpZ2h0IiwiYm90dG9tUmlnaHQiLCJib3R0b21MZWZ0IiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0iLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbGlwVW5yb3RhdGVkIiwiaW52ZXJ0ZWQiLCJkaXNwYXRjaFJlbmRlckV2ZW50XyIsImV2ZW50XzEiLCJwcmVSZW5kZXIiLCJwb3N0UmVuZGVyIiwiZ2V0UmVuZGVyVHJhbnNmb3JtIiwicmVuZGVyUGl4ZWwiLCJuZXdDYW52YXMiLCJuZXdDb250ZXh0IiwiY2xlYXJSZWN0IiwiZ2V0SW1hZ2VEYXRhIiwiVWludDhBcnJheSIsIlRpbGVSYW5nZSIsImNvbnRhaW5zVGlsZVJhbmdlIiwiZ2V0U2l6ZSIsImdldFdpZHRoIiwiQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIiLCJ0aWxlTGF5ZXIiLCJleHRlbnRDaGFuZ2VkIiwicmVuZGVyZWRFeHRlbnRfIiwicmVuZGVyZWRQaXhlbFJhdGlvIiwicmVuZGVyZWRQcm9qZWN0aW9uIiwicmVuZGVyZWRSZXZpc2lvbiIsInJlbmRlcmVkVGlsZXMiLCJuZXdUaWxlc18iLCJ0bXBFeHRlbnQiLCJ0bXBUaWxlUmFuZ2VfIiwiaXNEcmF3YWJsZVRpbGUiLCJ0aWxlU3RhdGUiLCJnZXRUaWxlIiwic2V0U3RhdGUiLCJnZXRJbnRlcmltVGlsZSIsImxheWVySW5kZXgiLCJ2aWV3UmVzb2x1dGlvbiIsInZpZXdDZW50ZXIiLCJ0aWxlU291cmNlIiwic291cmNlUmV2aXNpb24iLCJnZXRUaWxlR3JpZEZvclByb2plY3Rpb24iLCJnZXRaRm9yUmVzb2x1dGlvbiIsInpEaXJlY3Rpb24iLCJ0aWxlUmVzb2x1dGlvbiIsImdldFJlc29sdXRpb24iLCJsYXllckV4dGVudCIsInRpbGVQaXhlbFJhdGlvIiwiZ2V0VGlsZVBpeGVsUmF0aW8iLCJjYW52YXNFeHRlbnQiLCJnZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaIiwidGlsZXNUb0RyYXdCeVoiLCJmaW5kTG9hZGVkVGlsZXMiLCJ0bXBUaWxlUmFuZ2UiLCJ1aWQiLCJpblRyYW5zaXRpb24iLCJnZXRBbHBoYSIsInRpbWUiLCJjaGlsZFRpbGVSYW5nZSIsImdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlIiwiY292ZXJlZCIsImZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UiLCJjYW52YXNTY2FsZSIsImNhbnZhc1RyYW5zZm9ybSIsImdldENvbnRleHRPcHRpb25zIiwiY2xpcHMiLCJjbGlwWnMiLCJjdXJyZW50Q2xpcCIsInpzIiwiZ2V0T3BhcXVlIiwicmV2ZXJzZSIsImN1cnJlbnRaIiwiY3VycmVudFRpbGVQaXhlbFNpemUiLCJnZXRUaWxlUGl4ZWxTaXplIiwiY3VycmVudFNjYWxlIiwiZHhfMSIsImR5XzEiLCJvcmlnaW5UaWxlQ29vcmQiLCJnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFoiLCJvcmlnaW5UaWxlRXh0ZW50IiwiZ2V0VGlsZUNvb3JkRXh0ZW50Iiwib3JpZ2luXzEiLCJ0aWxlR3V0dGVyIiwiZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiIsInRpbGVzVG9EcmF3IiwidGlsZUNvb3JkS2V5IiwiZmxvYXRYIiwibmV4dFgiLCJmbG9hdFkiLCJuZXh0WSIsInRyYW5zaXRpb24iLCJpXzEiLCJkcmF3VGlsZUltYWdlIiwidXBkYXRlVXNlZFRpbGVzIiwidXNlZFRpbGVzIiwibWFuYWdlVGlsZVB5cmFtaWQiLCJzY2hlZHVsZUV4cGlyZUNhY2hlIiwiZ3V0dGVyIiwiZ2V0VGlsZUltYWdlIiwidGlsZUFscGhhIiwiYWxwaGEiLCJhbHBoYUNoYW5nZWQiLCJhbmltYXRlIiwiZW5kVHJhbnNpdGlvbiIsImdldEltYWdlIiwiY2FuRXhwaXJlQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb24iLCJ0aWxlU291cmNlS2V5IiwiZXhwaXJlQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb25zIiwiZ2V0S2V5Iiwib3B0X3RpbGVDYWxsYmFjayIsIndhbnRlZFRpbGVzIiwidGlsZVF1ZXVlIiwidGlsZUNvdW50IiwiaXNLZXlRdWV1ZWQiLCJlbnF1ZXVlIiwiZ2V0VGlsZUNvb3JkQ2VudGVyIiwidXNlVGlsZSIsInVwZGF0ZUNhY2hlU2l6ZSIsIlRpbGVMYXllciIsIkJhc2VUaWxlIiwiQmFzZUltYWdlTGF5ZXIiLCJDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIiLCJpbWFnZUxheWVyIiwiaW1hZ2VfIiwiaW1hZ2VTb3VyY2UiLCJoaW50cyIsInZpZXdIaW50cyIsInJlbmRlcmVkRXh0ZW50IiwiaW1hZ2VFeHRlbnQiLCJpbWFnZVJlc29sdXRpb24iLCJpbWFnZVBpeGVsUmF0aW8iLCJnZXRQaXhlbFJhdGlvIiwic2l6ZV8xIiwiY2xpcHBlZCIsImltZyIsImR3IiwiZGgiLCJwcmV2aW91c0FscGhhIiwiSW1hZ2VMYXllciIsIkJhc2VJbWFnZSIsIkltYWdlQmFzZSIsInBpeGVsUmF0aW9fIiwiVHJpYW5ndWxhdGlvbiIsInRhcmdldFByb2oiLCJ0YXJnZXRFeHRlbnQiLCJtYXhTb3VyY2VFeHRlbnQiLCJlcnJvclRocmVzaG9sZCIsIm9wdF9kZXN0aW5hdGlvblJlc29sdXRpb24iLCJzb3VyY2VQcm9qXyIsInRhcmdldFByb2pfIiwidHJhbnNmb3JtSW52Q2FjaGUiLCJ0cmFuc2Zvcm1JbnYiLCJ0cmFuc2Zvcm1JbnZfIiwibWF4U291cmNlRXh0ZW50XyIsImVycm9yVGhyZXNob2xkU3F1YXJlZF8iLCJ0cmlhbmdsZXNfIiwid3JhcHNYSW5Tb3VyY2VfIiwiY2FuV3JhcFhJblNvdXJjZV8iLCJzb3VyY2VXb3JsZFdpZHRoXyIsInRhcmdldFdvcmxkV2lkdGhfIiwiZGVzdGluYXRpb25Ub3BMZWZ0IiwiZGVzdGluYXRpb25Ub3BSaWdodCIsImRlc3RpbmF0aW9uQm90dG9tUmlnaHQiLCJkZXN0aW5hdGlvbkJvdHRvbUxlZnQiLCJzb3VyY2VUb3BMZWZ0Iiwic291cmNlVG9wUmlnaHQiLCJzb3VyY2VCb3R0b21SaWdodCIsInNvdXJjZUJvdHRvbUxlZnQiLCJtYXhTdWJkaXZpc2lvbiIsImFkZFF1YWRfIiwibGVmdEJvdW5kXzEiLCJ0cmlhbmdsZSIsIm5ld1RyaWFuZ2xlIiwiYWRkVHJpYW5nbGVfIiwiYVNyYyIsImJTcmMiLCJjU3JjIiwiZFNyYyIsInNvdXJjZVF1YWRFeHRlbnQiLCJzb3VyY2VDb3ZlcmFnZVgiLCJzb3VyY2VXb3JsZFdpZHRoIiwid3JhcHNYIiwibmVlZHNTdWJkaXZpc2lvbiIsImlzRmluaXRlIiwiaXNOb3RGaW5pdGUiLCJjZW50ZXJTcmMiLCJhYnMiLCJiYyIsImJjU3JjIiwiZGEiLCJkYVNyYyIsImFiIiwiYWJTcmMiLCJjZCIsImNkU3JjIiwiY2FsY3VsYXRlU291cmNlRXh0ZW50Iiwic3JjIiwiZ2V0VHJpYW5nbGVzIiwiYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfIiwiREVGQVVMVF9XTVNfVkVSU0lPTiIsIklNQUdFX1NNT09USElOR19ESVNBQkxFRCIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsIm1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwiZHJhd1Rlc3RUcmlhbmdsZSIsImN0eCIsInUxIiwidjEiLCJ1MiIsInYyIiwiY2xvc2VQYXRoIiwiZmlsbFJlY3QiLCJ2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyIsImNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24iLCJ0YXJnZXRDZW50ZXIiLCJ0YXJnZXRSZXNvbHV0aW9uIiwic291cmNlQ2VudGVyIiwic291cmNlUmVzb2x1dGlvbiIsInRhcmdldE1ldGVyc1BlclVuaXQiLCJzb3VyY2VNZXRlcnNQZXJVbml0Iiwic291cmNlRXh0ZW50IiwiY29tcGVuc2F0aW9uRmFjdG9yIiwidHJpYW5ndWxhdGlvbiIsIm9wdF9yZW5kZXJFZGdlcyIsIm9wdF9jb250ZXh0T3B0aW9ucyIsInBpeGVsUm91bmQiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJzb3VyY2VEYXRhRXh0ZW50IiwiY2FudmFzV2lkdGhJblVuaXRzIiwiY2FudmFzSGVpZ2h0SW5Vbml0cyIsInN0aXRjaENvbnRleHQiLCJzdGl0Y2hTY2FsZSIsInhQb3MiLCJ5UG9zIiwic3JjV2lkdGgiLCJzcmNIZWlnaHQiLCJ0YXJnZXRUb3BMZWZ0IiwidTAiLCJ2MCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WSIsImFmZmluZUNvZWZzIiwibWF4Um93IiwibWF4RWwiLCJhYnNWYWx1ZSIsImNvZWYiLCJzb2x2ZUxpbmVhclN5c3RlbSIsImZpbGxTdHlsZSIsImlzQnJva2VuRGlhZ29uYWxSZW5kZXJpbmciLCJ1ZCIsInZkIiwic3RlcCIsInN0ZXBzIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJzdHJva2UiLCJSZXByb2pJbWFnZSIsImdldEltYWdlRnVuY3Rpb24iLCJtYXhUYXJnZXRFeHRlbnQiLCJsaW1pdGVkVGFyZ2V0RXh0ZW50Iiwic291cmNlSW1hZ2UiLCJzb3VyY2VQaXhlbFJhdGlvIiwidHJpYW5ndWxhdGlvbl8iLCJ0YXJnZXRSZXNvbHV0aW9uXyIsInRhcmdldEV4dGVudF8iLCJzb3VyY2VJbWFnZV8iLCJzb3VyY2VQaXhlbFJhdGlvXyIsImNvbnRleHRPcHRpb25zXyIsImNhbnZhc18iLCJzb3VyY2VMaXN0ZW5lcktleV8iLCJ1bmxpc3RlblNvdXJjZV8iLCJyZXByb2plY3RfIiwiYWRhcHRBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbkxpa2UiLCJTb3VyY2UiLCJwcm9qZWN0aW9uXyIsImF0dHJpYnV0aW9uc18iLCJhdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV8iLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSIsImxvYWRpbmciLCJ3cmFwWF8iLCJ3cmFwWCIsImdldEF0dHJpYnV0aW9ucyIsImdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIiwiZ2V0UmVzb2x1dGlvbnMiLCJnZXRXcmFwWCIsInJlZnJlc2giLCJzZXRBdHRyaWJ1dGlvbnMiLCJJbWFnZVNvdXJjZUV2ZW50IiwiZGVmYXVsdEltYWdlTG9hZEZ1bmN0aW9uIiwiSW1hZ2VTb3VyY2UiLCJyZXNvbHV0aW9uc18iLCJyZXNvbHV0aW9ucyIsInJlcHJvamVjdGVkSW1hZ2VfIiwicmVwcm9qZWN0ZWRSZXZpc2lvbl8iLCJpbWFnZVNtb290aGluZyIsImZpbmROZWFyZXN0UmVzb2x1dGlvbiIsImlkeCIsImdldEltYWdlSW50ZXJuYWwiLCJoYW5kbGVJbWFnZUNoYW5nZSIsImxpc3RlbkltYWdlIiwibG9hZEhhbmRsZXIiLCJlcnJvckhhbmRsZXIiLCJwcm9taXNlIiwibGlzdGVuaW5nXzEiLCJ0aGVuIiwiY2F0Y2giLCJsaXN0ZW5lcktleXMiLCJJbWFnZVdyYXBwZXIiLCJjcm9zc09yaWdpbiIsImltYWdlTG9hZEZ1bmN0aW9uIiwic3JjXyIsInVubGlzdGVuXyIsImltYWdlTG9hZEZ1bmN0aW9uXyIsImhhbmRsZUltYWdlRXJyb3JfIiwidW5saXN0ZW5JbWFnZV8iLCJoYW5kbGVJbWFnZUxvYWRfIiwic2V0SW1hZ2UiLCJTdGF0aWMiLCJ1cmxfIiwidXJsIiwiaW1hZ2VFeHRlbnRfIiwiaW1hZ2VTaXplXyIsImltYWdlU2l6ZSIsImdldEltYWdlRXh0ZW50IiwiZ2V0VXJsIiwiaW1hZ2VXaWR0aCIsImltYWdlSGVpZ2h0IiwidGFyZ2V0V2lkdGgiLCJhcHBlbmRQYXJhbXMiLCJ1cmkiLCJwYXJhbXMiLCJrZXlQYXJhbXMiLCJxcyIsInJlcGxhY2UiLCJjb21wYXJlVmVyc2lvbnMiLCJzMSIsInMyIiwibjEiLCJuMiIsIkdFVEZFQVRVUkVJTkZPX0lNQUdFX1NJWkUiLCJJbWFnZVdNUyIsImNyb3NzT3JpZ2luXyIsInBhcmFtc18iLCJ2MTNfIiwidXBkYXRlVjEzXyIsInNlcnZlclR5cGVfIiwiaGlkcGlfIiwiaGlkcGkiLCJyZW5kZXJlZFJldmlzaW9uXyIsInJhdGlvXyIsInJhdGlvIiwiZ2V0RmVhdHVyZUluZm9VcmwiLCJwcm9qZWN0aW9uT2JqIiwic291cmNlUHJvamVjdGlvbk9iaiIsImJhc2VQYXJhbXMiLCJnZXRSZXF1ZXN0VXJsXyIsImdldExlZ2VuZFVybCIsImxheWVycyIsIkxBWUVSUyIsIm1wdSIsImdldFBhcmFtcyIsInZpZXdFeHRlbnQiLCJyZXF1ZXN0RXh0ZW50IiwiZ2V0SW1hZ2VMb2FkRnVuY3Rpb24iLCJXTVNTZXJ2ZXJUeXBlIiwiZHBpIiwic3Vic3RyIiwic2V0SW1hZ2VMb2FkRnVuY3Rpb24iLCJzZXRVcmwiLCJ1cGRhdGVQYXJhbXMiLCJ2ZXJzaW9uIiwiVGlsZSIsImludGVyaW1UaWxlIiwiaGlmaSIsInRyYW5zaXRpb25fIiwidHJhbnNpdGlvblN0YXJ0c18iLCJyZWxlYXNlIiwicmVmcmVzaEludGVyaW1DaGFpbiIsInByZXYiLCJnZXRUaWxlQ29vcmQiLCJzdGFydCIsImRlbHRhIiwiSW1hZ2VUaWxlIiwidGlsZUxvYWRGdW5jdGlvbiIsInRpbGVMb2FkRnVuY3Rpb25fIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsIlJlcHJvalRpbGUiLCJzb3VyY2VUaWxlR3JpZCIsInRhcmdldFRpbGVHcmlkIiwid3JhcHBlZFRpbGVDb29yZCIsImdldFRpbGVGdW5jdGlvbiIsIm9wdF9lcnJvclRocmVzaG9sZCIsInJlbmRlckVkZ2VzXyIsImd1dHRlcl8iLCJzb3VyY2VUaWxlR3JpZF8iLCJ0YXJnZXRUaWxlR3JpZF8iLCJ3cmFwcGVkVGlsZUNvb3JkXyIsInNvdXJjZVRpbGVzXyIsInNvdXJjZXNMaXN0ZW5lcktleXNfIiwic291cmNlWl8iLCJzb3VyY2VQcm9qRXh0ZW50IiwiY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbiIsImVycm9yVGhyZXNob2xkSW5QaXhlbHMiLCJzb3VyY2VSYW5nZSIsInNyY1giLCJzcmNZIiwiZ2V0VGlsZVNpemUiLCJsZWZ0VG9Mb2FkXzEiLCJzb3VyY2VMaXN0ZW5LZXlfMSIsInVubGlzdGVuU291cmNlc18iLCJzZXRUaW1lb3V0IiwiTFJVQ2FjaGUiLCJvcHRfaGlnaFdhdGVyTWFyayIsImhpZ2hXYXRlck1hcmsiLCJjb3VudF8iLCJlbnRyaWVzXyIsIm9sZGVzdF8iLCJuZXdlc3RfIiwiZ2V0Q291bnQiLCJjb250YWluc0tleSIsImVudHJ5IiwidmFsdWVfIiwia2V5XyIsIm5ld2VyIiwib2xkZXIiLCJwZWVrTGFzdCIsInBlZWtMYXN0S2V5IiwicGVla0ZpcnN0S2V5Iiwib3B0X3RpbGVDb29yZCIsImdldEtleVpYWSIsImhhc2giLCJUaWxlQ2FjaGUiLCJwcnVuZUV4Y2VwdE5ld2VzdFoiLCJudW0iLCJvcHRfc2l6ZSIsInRvU2l6ZSIsInRtcFRpbGVDb29yZCIsIlRpbGVHcmlkIiwiem9vbUZhY3RvciIsImV2ZXJ5IiwiY3VycmVudFZhbCIsInJlcyIsIm9yaWdpbnMiLCJ6b29tRmFjdG9yXyIsIm9yaWdpbl8iLCJvcmlnaW4iLCJvcmlnaW5zXyIsInRpbGVTaXplc18iLCJ0aWxlU2l6ZXMiLCJ0aWxlU2l6ZV8iLCJ0aWxlU2l6ZSIsImZ1bGxUaWxlUmFuZ2VzXyIsInRtcFNpemVfIiwic2l6ZXMiLCJjYWxjdWxhdGVUaWxlUmFuZ2VzXyIsImZvckVhY2hUaWxlQ29vcmQiLCJqaiIsIm9wdF90aWxlUmFuZ2UiLCJ0aWxlQ29vcmRFeHRlbnQiLCJnZXRPcmlnaW4iLCJnZXRUaWxlUmFuZ2VFeHRlbnQiLCJnZXRUaWxlQ29vcmRGb3JYWUFuZFpfIiwiZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uIiwiZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyIsInJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kiLCJhZGp1c3RYIiwiYWRqdXN0WSIsInhGcm9tT3JpZ2luIiwieUZyb21PcmlnaW4iLCJ0aWxlQ29vcmRYIiwidGlsZUNvb3JkWSIsImdldFRpbGVDb29yZFJlc29sdXRpb24iLCJnZXRGdWxsVGlsZVJhbmdlIiwib3B0X2RpcmVjdGlvbiIsImZ1bGxUaWxlUmFuZ2VzIiwiZ2V0Rm9yUHJvamVjdGlvbiIsIm9wdF9tYXhab29tIiwib3B0X3RpbGVTaXplIiwib3B0X2Nvcm5lciIsInJlc29sdXRpb25zRnJvbUV4dGVudCIsImNyZWF0ZUZvckV4dGVudCIsImV4dGVudEZyb21Qcm9qZWN0aW9uIiwiY3JlYXRlRm9yUHJvamVjdGlvbiIsIm9wdF9tYXhSZXNvbHV0aW9uIiwiaGFsZiIsIlRpbGVTb3VyY2UiLCJvcGFxdWVfIiwib3BhcXVlIiwidGlsZVBpeGVsUmF0aW9fIiwidGlsZUNhY2hlIiwiY2FjaGVTaXplIiwidG1wU2l6ZSIsInRpbGVPcHRpb25zIiwiZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiIsImxvYWRlZCIsInNldEtleSIsImdldFRpbGVHcmlkIiwidGhpc1Byb2oiLCJnZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24iLCJvcHRfcHJvamVjdGlvbiIsInByb2plY3Rpb25FeHRlbnQiLCJ3b3JsZFdpZHRoIiwid29ybGRzQXdheSIsIndpdGhpbkV4dGVudEFuZFoiLCJUaWxlU291cmNlRXZlbnQiLCJjcmVhdGVGcm9tVGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsInpSZWdFeCIsInhSZWdFeCIsInlSZWdFeCIsImRhc2hZUmVnRXgiLCJyYW5nZSIsIlVybFRpbGUiLCJnZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8iLCJ0aWxlVXJsRnVuY3Rpb24iLCJ1cmxzIiwic2V0VXJscyIsInRpbGVMb2FkaW5nS2V5c18iLCJnZXRUaWxlTG9hZEZ1bmN0aW9uIiwiZ2V0VGlsZVVybEZ1bmN0aW9uIiwiZ2V0VXJscyIsImhhbmRsZVRpbGVDaGFuZ2UiLCJzZXRUaWxlTG9hZEZ1bmN0aW9uIiwic2V0VGlsZVVybEZ1bmN0aW9uIiwiZXhlYyIsInN0YXJ0Q2hhckNvZGUiLCJjaGFyQ29kZUF0Iiwic3RvcENoYXJDb2RlIiwiY2hhckNvZGUiLCJmcm9tQ2hhckNvZGUiLCJzdG9wXzEiLCJleHBhbmRVcmwiLCJ0ZW1wbGF0ZXMiLCJ0aWxlVXJsRnVuY3Rpb25zIiwiY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnMiLCJjcmVhdGVGcm9tVGVtcGxhdGVzIiwiZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24iLCJpbWFnZVRpbGUiLCJUaWxlSW1hZ2UiLCJ0aWxlQ2xhc3MiLCJ0aWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwidGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQiLCJyZW5kZXJSZXByb2plY3Rpb25FZGdlc18iLCJ1c2VkVGlsZUNhY2hlIiwiZ2V0R3V0dGVyIiwicHJvaktleSIsImNyZWF0ZVRpbGVfIiwidXJsVGlsZUNvb3JkIiwidGlsZVVybCIsIm5ld1RpbGUiLCJnZXRUaWxlSW50ZXJuYWwiLCJzZXRSZW5kZXJSZXByb2plY3Rpb25FZGdlcyIsInNldFRpbGVHcmlkRm9yUHJvamVjdGlvbiIsInRpbGVncmlkIiwicHJvaiIsIlRpbGVXTVMiLCJ0cmFuc3BhcmVudCIsInRtcEV4dGVudF8iLCJnZXRLZXlGb3JQYXJhbXNfIiwidGlsZUV4dGVudCIsIm9sVXNlTmV3Q29vcmRpbmF0ZXMiLCJPTEltYWdlcnlQcm92aWRlciIsIm9sTWFwIiwib3B0X2ZhbGxiYWNrUHJvaiIsInNvdXJjZV8iLCJmYWxsYmFja1Byb2pfIiwicmVhZHlfIiwidGlsaW5nU2NoZW1lXyIsInJlY3RhbmdsZV8iLCJtYXBfIiwic2hvdWxkUmVxdWVzdE5leHRMZXZlbCIsInByb3h5IiwicHJveHlfIiwiRGVmYXVsdFByb3h5IiwiZXJyb3JFdmVudF8iLCJlbXB0eUNhbnZhc18iLCJoYW5kbGVTb3VyY2VDaGFuZ2VkXyIsIm51bWJlck9mTGV2ZWxaZXJvVGlsZXNYIiwibnVtYmVyT2ZMZXZlbFplcm9UaWxlc1kiLCJ4SW5kZXgiLCJ5SW5kZXgiLCJHZW9ncmFwaGljVGlsaW5nU2NoZW1lIiwiV2ViTWVyY2F0b3JUaWxpbmdTY2hlbWUiLCJyZWN0YW5nbGUiLCJnZXRWaWV3IiwiY2FsY3VsYXRlRXh0ZW50IiwiYXR0cmlidXRpb25zRnVuY3Rpb24iLCJodG1sIiwiQ3JlZGl0Iiwiel8iLCJ5XyIsImdldFVSTCIsIkltYWdlcnlQcm92aWRlciIsImRlZmluZVByb3BlcnRpZXMiLCJ0ZyIsImNhbWVyYSIsImZydXN0dW0iLCJDYXJ0ZXNpYW4zIiwibWFnbml0dWRlIiwic3VidHJhY3QiLCJnZXRQaXhlbERpbWVuc2lvbnMiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsIkNhcnRlc2lhbjIiLCJhbW91bnQiLCJwaXhlbFNpemUiLCJjb21wdXRlUGl4ZWxTaXplQXRDb29yZGluYXRlIiwiVHJhbnNmb3JtcyIsImVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lIiwiTWF0cml4NCIsIm11bHRpcGx5QnlQb2ludCIsIkVsbGlwc29pZCIsIldHUzg0IiwiY2FydGVzaWFuQXJyYXlUb0NhcnRvZ3JhcGhpY0FycmF5IiwiZ2VvbWV0cnkiLCJhc3NlcnQiLCJ0cmFuc2xhdGlvbiIsIlpFUk8iLCJvbDQzMjZDb29yZGluYXRlVG9DZXNpdW1DYXJ0ZXNpYW4iLCJyYXdNYXRyaXgiLCJxdWF0ZXJuaW9uIiwiUXVhdGVybmlvbiIsImZyb21BeGlzQW5nbGUiLCJVTklUX1oiLCJyb3RhdGlvbk1hdHJpeCIsImZyb21UcmFuc2xhdGlvblF1YXRlcm5pb25Sb3RhdGlvblNjYWxlIiwiYXhpcyIsImNsYW1wIiwiZGVmYXVsdFZhbHVlIiwiZHVyYXRpb24iLCJlYXNpbmciLCJsYXN0UHJvZ3Jlc3MiLCJvbGRUcmFuc2Zvcm0iLCJEYXRlIiwibm93IiwidGltZXN0YW1wIiwicHJvZ3Jlc3MiLCJzdGVwQW5nbGUiLCJsb29rQXRUcmFuc2Zvcm0iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJoZWFkaW5nIiwiYm90dG9tQ2VudGVyIiwiYW5nbGVUb1plbml0aCIsImNvbXB1dGVBbmdsZVRvWmVuaXRoIiwiTWF0cml4MyIsImZyb21RdWF0ZXJuaW9uIiwidmVjdG9yIiwiemVuaXRoIiwibXVsdGlwbHlCeVZlY3RvciIsImZyb21UcmFuc2xhdGlvbiIsInJvdGF0ZUFyb3VuZEF4aXMiLCJyYXkiLCJnZXRQaWNrUmF5IiwiZ2xvYmUiLCJwaWNrIiwicGlja0VsbGlwc29pZCIsImJvdHRvbSIsInBpY2tPblRlcnJhaW5PckVsbGlwc29pZCIsIlJheSIsImVsbGlwc29pZCIsIkludGVyc2VjdGlvblRlc3RzIiwicmF5RWxsaXBzb2lkIiwiZ2V0UG9pbnQiLCJub3JtYWwiLCJnZW9jZW50cmljU3VyZmFjZU5vcm1hbCIsImFuZ2xlQmV0d2VlbiIsInNpZ25lZEFuZ2xlQmV0d2VlbiIsImNvbnZlcnRMb25naXR1ZGVSYW5nZSIsImZvdnkyIiwiZm92eSIsIm1hdHJpeCIsImZpcnN0Iiwic2Vjb25kIiwibm9ybWFsaXplIiwiY3Jvc3MiLCJjb3NpbmUiLCJkb3QiLCJzaW5lIiwic2lnbiIsInBpdm90IiwiZnkiLCJib3R0b21Gb3ZSYXkiLCJuZWdhdGUiLCJleHQiLCJSZWN0YW5nbGUiLCJmcm9tRGVncmVlcyIsIm9sTGF5ZXIiLCJ2aWV3UHJvaiIsInByb3ZpZGVyIiwic291cmNlUHJvcHMiLCJpc0Nlc2l1bVByb2plY3Rpb24iLCJTaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyIiwibGF5ZXJPcHRpb25zIiwiZXh0ZW50VG9SZWN0YW5nbGUiLCJJbWFnZXJ5TGF5ZXIiLCJvbExheWVyV2l0aFBhcmVudHMiLCJjc0xheWVyIiwicGFyZW50cyIsImxheWVyT3BhY2l0eSIsImxheWVyVmlzaWJsZSIsInNob3ciLCJjb28iLCJ0b0NhcnRlc2lhbiIsImNhcnRlc2lhbnMiLCJwcm9qNDMyNiIsIm9sQ29sb3IiLCJDb2xvciIsImJ5dGVUb0Zsb2F0IiwiZnJvbUNzc0NvbG9yU3RyaW5nIiwiQ2FudmFzUGF0dGVybiIsIkNhbnZhc0dyYWRpZW50IiwiSW1hZ2VNYXRlcmlhbFByb3BlcnR5Iiwic3ViZG9tYWlucyIsInJlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwaWNrQm90dG9tUG9pbnQiLCJjdXJyZW50SGVhZGluZyIsImdldFJvdGF0aW9uIiwic2V0SGVhZGluZ1VzaW5nQm90dG9tQ2VudGVyIiwidmlldyIsIm5vcm1hbGl6ZVZpZXciLCJzZXRSb3RhdGlvbiIsImNvbnN0cmFpblJlc29sdXRpb24iLCJzZXRSZXNvbHV0aW9uIiwiZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uIiwiaXMzODU3IiwiaXM0MzI2IiwiQ2FtZXJhIiwic2NlbmVfIiwiY2FtXyIsInZpZXdfIiwidmlld0xpc3RlbktleV8iLCJ0b0xvbkxhdF8iLCJpZGVudGl0eVByb2plY3Rpb24iLCJmcm9tTG9uTGF0XyIsInRpbHRfIiwiZGlzdGFuY2VfIiwibGFzdENhbWVyYVZpZXdNYXRyaXhfIiwidmlld1VwZGF0ZUluUHJvZ3Jlc3NfIiwic2V0Vmlld18iLCJkaW0iLCJ0b0xvbkxhdCIsImZyb21Mb25MYXQiLCJoYW5kbGVWaWV3RXZlbnRfIiwicmVhZEZyb21WaWV3IiwidGlsdCIsInVwZGF0ZUNhbWVyYV8iLCJ1cGRhdGVWaWV3Iiwic2V0Q2VudGVyIiwibGwiLCJjYXJ0byIsIkNhcnRvZ3JhcGhpYyIsImdldEFsdGl0dWRlIiwic2V0VmlldyIsImNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuIiwiY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMiLCJwb3MiLCJsb25naXR1ZGUiLCJsYXRpdHVkZSIsImFsdGl0dWRlIiwib3JpZW50YXRpb24iLCJwaXRjaCIsIlBJX09WRVJfVFdPIiwicm9sbCIsIm1vdmVCYWNrd2FyZCIsImNoZWNrQ2FtZXJhQ2hhbmdlIiwiY2FsY0Rpc3RhbmNlRm9yUmVzb2x1dGlvbiIsImJlc3RUYXJnZXQiLCJwb3NpdGlvbkNhcnRvZ3JhcGhpYyIsImJlc3RUYXJnZXRDYXJ0b2dyYXBoaWMiLCJjYWxjUmVzb2x1dGlvbkZvckRpc3RhbmNlIiwidGFyZ2V0Tm9ybWFsIiwidGFyZ2V0VG9DYW1lcmEiLCJ1cCIsInRpbHRBbmdsZSIsImFjb3MiLCJvcHRfZG9udFN5bmMiLCJvbGQiLCJjdXJyZW50Iiwidmlld01hdHJpeCIsImVxdWFsc0Vwc2lsb24iLCJDb2xsZWN0aW9uRXZlbnQiLCJvcHRfZWxlbWVudCIsIm9wdF9pbmRleCIsIkNvbGxlY3Rpb24iLCJ1bmlxdWVfIiwidW5pcXVlIiwiYXJyYXlfIiwiYXNzZXJ0VW5pcXVlXyIsInVwZGF0ZUxlbmd0aF8iLCJnZXRMZW5ndGgiLCJnZXRBcnJheSIsImluc2VydEF0IiwiZWxlbSIsIkNvbGxlY3Rpb25FdmVudFR5cGUiLCJyZW1vdmVBdCIsInNldEF0Iiwib3B0X2V4Y2VwdCIsIkxheWVyR3JvdXAiLCJsYXllcnNMaXN0ZW5lcktleXNfIiwibGlzdGVuZXJLZXlzXyIsImhhbmRsZUxheWVyc0NoYW5nZWRfIiwic2V0TGF5ZXJzIiwiaGFuZGxlTGF5ZXJDaGFuZ2VfIiwiZ2V0TGF5ZXJzIiwiaGFuZGxlTGF5ZXJzQWRkXyIsImhhbmRsZUxheWVyc1JlbW92ZV8iLCJsYXllcnNBcnJheSIsImNvbGxlY3Rpb25FdmVudCIsIm93bkxheWVyU3RhdGUiLCJvbExheWVycyIsImdldExheWVyR3JvdXAiLCJtYXBMYXllckdyb3VwIiwibGF5ZXJNYXAiLCJvbExheWVyTGlzdGVuS2V5cyIsIm9sR3JvdXBMaXN0ZW5LZXlzXyIsImRlc3Ryb3lBbGwiLCJhZGRMYXllcnNfIiwicm9vdCIsImZpZm8iLCJvbExheWVySWQiLCJjZXNpdW1PYmplY3RzIiwibGlzdGVuRm9yR3JvdXBDaGFuZ2VzXyIsImNyZWF0ZVNpbmdsZUxheWVyQ291bnRlcnBhcnRzIiwibmV3T2xMYXllcldpdGhQYXJlbnRzIiwibGF5ZXJJZCIsImxheWVyV2l0aFBhcmVudHMiLCJvbkxheWVyQ2hhbmdlIiwiY2VzaXVtT2JqcyIsImFkZENlc2l1bU9iamVjdHNfIiwib3JkZXJMYXllcnMiLCJjZXNpdW1PYmplY3QiLCJhZGRDZXNpdW1PYmplY3QiLCJjb3VudGVycGFydHMiLCJjb3VudGVycGFydCIsInJlbW92ZVNpbmdsZUNlc2l1bU9iamVjdCIsImRlc3Ryb3lDZXNpdW1PYmplY3QiLCJncm91cCIsInJlbW92ZUFuZERlc3Ryb3lTaW5nbGVMYXllcl8iLCJ1bmxpc3RlblNpbmdsZUdyb3VwXyIsInV1aWQiLCJsaXN0ZW5LZXlBcnJheSIsImNvbnRlbnRLZXlzIiwibGlzdGVuQWRkUmVtb3ZlIiwiY29sbGVjdGlvbiIsInJlbW92ZUxheWVyXyIsImVsIiwib2JqS2V5IiwicmVtb3ZlQWxsQ2VzaXVtT2JqZWN0cyIsImRlc3Ryb3kiLCJzdXBlciIsImNlc2l1bUxheWVyc18iLCJpbWFnZXJ5TGF5ZXJzIiwib3VyTGF5ZXJzXyIsIkltYWdlcnlMYXllckNvbGxlY3Rpb24iLCJyZW1vdmVBbGwiLCJjb252ZXJ0TGF5ZXJUb0Nlc2l1bUltYWdlcmllcyIsIm9sTGF5ZXJJdGVtIiwic3luY2hyb25pemUiLCJ6SW5kaWNlcyIsInF1ZXVlIiwic3VibGF5ZXJzIiwidW5zaGlmdCIsImNvbXBhcmVGbmMiLCJsYXllcjEiLCJsYXllcjIiLCJyYWlzZVRvVG9wIiwib3B0X21heEVudHJpZXMiLCJyYnVzaF8iLCJpdGVtc18iLCJleHRlbnRzIiwiZ2V0QWxsIiwiZ2V0SW5FeHRlbnQiLCJmb3JFYWNoXyIsImZvckVhY2hJbkV4dGVudCIsImlzRW1wdHkiLCJyYnVzaCIsInhociIsImZvcm1hdCIsInN1Y2Nlc3MiLCJmYWlsdXJlIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwiRm9ybWF0VHlwZSIsInJlc3BvbnNlVHlwZSIsIndpdGhDcmVkZW50aWFscyIsIm9ubG9hZCIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlWE1MIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwicmVhZEZlYXR1cmVzIiwiZmVhdHVyZVByb2plY3Rpb24iLCJyZWFkUHJvamVjdGlvbiIsIm9uZXJyb3IiLCJzZW5kIiwibG9hZEZlYXR1cmVzWGhyIiwiZmVhdHVyZXMiLCJkYXRhUHJvamVjdGlvbiIsImFkZEZlYXR1cmVzIiwiVmVjdG9yU291cmNlRXZlbnQiLCJvcHRfZmVhdHVyZSIsImZlYXR1cmUiLCJWZWN0b3JTb3VyY2UiLCJsb2FkZXJfIiwiZm9ybWF0XyIsIm92ZXJsYXBzXyIsIm92ZXJsYXBzIiwibG9hZGVyIiwic3RyYXRlZ3lfIiwic3RyYXRlZ3kiLCJ1c2VTcGF0aWFsSW5kZXgiLCJmZWF0dXJlc1J0cmVlXyIsImxvYWRlZEV4dGVudHNSdHJlZV8iLCJudWxsR2VvbWV0cnlGZWF0dXJlc18iLCJpZEluZGV4XyIsInVpZEluZGV4XyIsImZlYXR1cmVDaGFuZ2VLZXlzXyIsImZlYXR1cmVzQ29sbGVjdGlvbl8iLCJhZGRGZWF0dXJlc0ludGVybmFsIiwiYmluZEZlYXR1cmVzQ29sbGVjdGlvbl8iLCJhZGRGZWF0dXJlIiwiYWRkRmVhdHVyZUludGVybmFsIiwiZmVhdHVyZUtleSIsImFkZFRvSW5kZXhfIiwic2V0dXBDaGFuZ2VFdmVudHNfIiwiZ2V0R2VvbWV0cnkiLCJWZWN0b3JFdmVudFR5cGUiLCJoYW5kbGVGZWF0dXJlQ2hhbmdlXyIsInZhbGlkIiwiZ2V0SWQiLCJuZXdGZWF0dXJlcyIsImdlb21ldHJ5RmVhdHVyZXMiLCJsZW5ndGhfMSIsImxlbmd0aF8yIiwibGVuZ3RoXzMiLCJtb2RpZnlpbmdDb2xsZWN0aW9uIiwicmVtb3ZlRmVhdHVyZSIsIm9wdF9mYXN0IiwiZmVhdHVyZUlkIiwicmVtb3ZlRmVhdHVyZUludGVybmFsIiwiY2xlYXJFdmVudCIsImZvckVhY2hGZWF0dXJlIiwiZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVEaXJlY3QiLCJmb3JFYWNoRmVhdHVyZUluRXh0ZW50IiwiZm9yRWFjaEZlYXR1cmVJbnRlcnNlY3RpbmdFeHRlbnQiLCJnZXRGZWF0dXJlc0NvbGxlY3Rpb24iLCJnZXRGZWF0dXJlc0F0Q29vcmRpbmF0ZSIsImdldEZlYXR1cmVzSW5FeHRlbnQiLCJnZXRDbG9zZXN0RmVhdHVyZVRvQ29vcmRpbmF0ZSIsIm9wdF9maWx0ZXIiLCJjbG9zZXN0RmVhdHVyZSIsInByZXZpb3VzTWluU3F1YXJlZERpc3RhbmNlIiwibWluRGlzdGFuY2UiLCJnZXRGZWF0dXJlQnlJZCIsImdldEZlYXR1cmVCeVVpZCIsImdldEZvcm1hdCIsImdldE92ZXJsYXBzIiwic2lkIiwicmVtb3ZlRnJvbUlkSW5kZXhfIiwiaGFzRmVhdHVyZSIsImxvYWRGZWF0dXJlcyIsImxvYWRlZEV4dGVudHNSdHJlZSIsImV4dGVudHNUb0xvYWQiLCJfbG9vcF8xIiwiZXh0ZW50VG9Mb2FkIiwidGhpc18xIiwicmVtb3ZlTG9hZGVkRXh0ZW50IiwicmVtb3ZlZCIsInNldExvYWRlciIsIkZlYXR1cmUiLCJvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXMiLCJpZF8iLCJnZW9tZXRyeU5hbWVfIiwic3R5bGVfIiwic3R5bGVGdW5jdGlvbl8iLCJnZW9tZXRyeUNoYW5nZUtleV8iLCJoYW5kbGVHZW9tZXRyeUNoYW5nZWRfIiwic2V0R2VvbWV0cnkiLCJzZXRHZW9tZXRyeU5hbWUiLCJnZXRHZW9tZXRyeU5hbWUiLCJnZXRTdHlsZSIsInNldFN0eWxlIiwiZ2V0U3R5bGVGdW5jdGlvbiIsImhhbmRsZUdlb21ldHJ5Q2hhbmdlXyIsIm9wdF9zdHlsZSIsInN0eWxlc18xIiwic2V0SWQiLCJjb29yZGluYXRlMSIsImNvb3JkaW5hdGUyIiwiY29zQW5nbGUiLCJzaW5BbmdsZSIsIm9wdF9zb3VyY2VFeHRlbnRXaWR0aCIsInNvdXJjZUV4dGVudFdpZHRoIiwiQ2x1c3RlciIsImdlb21ldHJ5RnVuY3Rpb24iLCJib3VuZFJlZnJlc2hfIiwiY2x1c3RlciIsInNldERpc3RhbmNlIiwibWFwRGlzdGFuY2UiLCJjbHVzdGVyZWQiLCJuZWlnaGJvcnMiLCJuZWlnaGJvciIsImNyZWF0ZUNsdXN0ZXIiLCJjZW50cm9pZCIsIlZlY3RvciIsIkltYWdlU3R5bGUiLCJvcGFjaXR5XyIsInJvdGF0ZVdpdGhWaWV3XyIsInJvdGF0ZVdpdGhWaWV3Iiwicm90YXRpb25fIiwic2NhbGVfIiwic2NhbGVBcnJheV8iLCJkaXNwbGFjZW1lbnRfIiwiZGlzcGxhY2VtZW50IiwiZ2V0U2NhbGUiLCJnZXRSb3RhdGVXaXRoVmlldyIsImdldERpc3BsYWNlbWVudCIsImdldFNjYWxlQXJyYXkiLCJnZXRBbmNob3IiLCJnZXRIaXREZXRlY3Rpb25JbWFnZSIsImdldEltYWdlU3RhdGUiLCJnZXRJbWFnZVNpemUiLCJnZXRIaXREZXRlY3Rpb25JbWFnZVNpemUiLCJzZXRSb3RhdGVXaXRoVmlldyIsInNldFNjYWxlIiwibGlzdGVuSW1hZ2VDaGFuZ2UiLCJ1bmxpc3RlbkltYWdlQ2hhbmdlIiwiSEVYX0NPTE9SX1JFXyIsIk5BTUVEX0NPTE9SX1JFXyIsImZyb21TdHJpbmciLCJjb2xvciIsImciLCJyZ2IiLCJmcm9tTmFtZWQiLCJoYXNBbHBoYSIsImZyb21TdHJpbmdJbnRlcm5hbF8iLCJhc0FycmF5IiwiYXNDb2xvckxpa2UiLCJSZWd1bGFyU2hhcGUiLCJoaXREZXRlY3Rpb25DYW52YXNfIiwiZmlsbF8iLCJmaWxsIiwicG9pbnRzXyIsInBvaW50cyIsInJhZGl1c18iLCJyYWRpdXMxIiwicmFkaXVzMl8iLCJyYWRpdXMyIiwiYW5nbGVfIiwic3Ryb2tlXyIsImFuY2hvcl8iLCJzaXplXyIsImhpdERldGVjdGlvbkltYWdlU2l6ZV8iLCJnZXRGaWxsIiwiZ2V0UG9pbnRzIiwiZ2V0UmFkaXVzIiwiZ2V0UmFkaXVzMiIsImdldEFuZ2xlIiwiZ2V0U3Ryb2tlIiwicmVuZGVyT3B0aW9ucyIsImNyZWF0ZVJlbmRlck9wdGlvbnMiLCJjcmVhdGVIaXREZXRlY3Rpb25DYW52YXNfIiwiZHJhd18iLCJsaW5lQ2FwIiwibGluZUpvaW4iLCJtaXRlckxpbWl0IiwibGluZURhc2giLCJsaW5lRGFzaE9mZnNldCIsInN0cm9rZVdpZHRoIiwiZ2V0Q29sb3IiLCJnZXRMaW5lRGFzaCIsImdldExpbmVEYXNoT2Zmc2V0IiwiZ2V0TGluZUpvaW4iLCJnZXRMaW5lQ2FwIiwiZ2V0TWl0ZXJMaW1pdCIsImFuZ2xlMCIsInJhZGl1c0MiLCJhcmMiLCJzZXRMaW5lRGFzaCIsImRyYXdIaXREZXRlY3Rpb25DYW52YXNfIiwiQ2lyY2xlU3R5bGUiLCJzZXRSYWRpdXMiLCJGaWxsIiwiY29sb3JfIiwic2V0Q29sb3IiLCJTdHJva2UiLCJsaW5lQ2FwXyIsImxpbmVEYXNoXyIsImxpbmVEYXNoT2Zmc2V0XyIsImxpbmVKb2luXyIsIm1pdGVyTGltaXRfIiwid2lkdGhfIiwic2V0TGluZUNhcCIsInNldExpbmVEYXNoT2Zmc2V0Iiwic2V0TGluZUpvaW4iLCJzZXRNaXRlckxpbWl0Iiwic2V0V2lkdGgiLCJTdHlsZSIsImdlb21ldHJ5XyIsImdlb21ldHJ5RnVuY3Rpb25fIiwiZGVmYXVsdEdlb21ldHJ5RnVuY3Rpb24iLCJyZW5kZXJlciIsInRleHRfIiwiekluZGV4XyIsImdldFRleHQiLCJzZXRSZW5kZXJlciIsImdldEdlb21ldHJ5RnVuY3Rpb24iLCJzZXRGaWxsIiwic2V0U3Ryb2tlIiwic2V0VGV4dCIsImRlZmF1bHRTdHlsZXMiLCJjcmVhdGVEZWZhdWx0U3R5bGUiLCJDaXJjbGUiLCJCYXNlVmVjdG9yTGF5ZXIiLCJyZW5kZXJCdWZmZXIiLCJ1cGRhdGVXaGlsZUFuaW1hdGluZyIsInVwZGF0ZVdoaWxlSW50ZXJhY3RpbmciLCJkZWNsdXR0ZXJfIiwiZGVjbHV0dGVyIiwicmVuZGVyQnVmZmVyXyIsInVwZGF0ZVdoaWxlQW5pbWF0aW5nXyIsInVwZGF0ZVdoaWxlSW50ZXJhY3RpbmdfIiwiZ2V0RGVjbHV0dGVyIiwiZ2V0UmVuZGVyQnVmZmVyIiwiZ2V0UmVuZGVyT3JkZXIiLCJnZXRVcGRhdGVXaGlsZUFuaW1hdGluZyIsImdldFVwZGF0ZVdoaWxlSW50ZXJhY3RpbmciLCJzZXRSZW5kZXJPcmRlciIsInJlbmRlck9yZGVyIiwic3R5bGVGdW5jdGlvbiIsIkluc3RydWN0aW9uIiwiQkVHSU5fR0VPTUVUUlkiLCJCRUdJTl9QQVRIIiwiQ0lSQ0xFIiwiQ0xPU0VfUEFUSCIsIkNVU1RPTSIsIkRSQVdfQ0hBUlMiLCJEUkFXX0lNQUdFIiwiRU5EX0dFT01FVFJZIiwiRklMTCIsIk1PVkVfVE9fTElORV9UTyIsIlNFVF9GSUxMX1NUWUxFIiwiU0VUX1NUUk9LRV9TVFlMRSIsIlNUUk9LRSIsImZpbGxJbnN0cnVjdGlvbiIsInN0cm9rZUluc3RydWN0aW9uIiwiYmVnaW5QYXRoSW5zdHJ1Y3Rpb24iLCJjbG9zZVBhdGhJbnN0cnVjdGlvbiIsIlZlY3RvckNvbnRleHQiLCJkcmF3Q3VzdG9tIiwiZHJhd0dlb21ldHJ5IiwiZHJhd0NpcmNsZSIsImNpcmNsZUdlb21ldHJ5IiwiZHJhd0ZlYXR1cmUiLCJkcmF3R2VvbWV0cnlDb2xsZWN0aW9uIiwiZ2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnkiLCJkcmF3TGluZVN0cmluZyIsImxpbmVTdHJpbmdHZW9tZXRyeSIsImRyYXdNdWx0aUxpbmVTdHJpbmciLCJtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSIsImRyYXdNdWx0aVBvaW50IiwibXVsdGlQb2ludEdlb21ldHJ5IiwiZHJhd011bHRpUG9seWdvbiIsIm11bHRpUG9seWdvbkdlb21ldHJ5IiwiZHJhd1BvaW50IiwicG9pbnRHZW9tZXRyeSIsImRyYXdQb2x5Z29uIiwicG9seWdvbkdlb21ldHJ5IiwiZHJhd1RleHQiLCJzZXRGaWxsU3Ryb2tlU3R5bGUiLCJzZXRJbWFnZVN0eWxlIiwiaW1hZ2VTdHlsZSIsIm9wdF9kZWNsdXR0ZXJHcm91cCIsInNldFRleHRTdHlsZSIsInRleHRTdHlsZSIsIm9wdF9kZWNsdXR0ZXJHcm91cHMiLCJpbmZsYXRlQ29vcmRpbmF0ZXMiLCJvcHRfY29vcmRpbmF0ZXMiLCJpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSIsImVuZHMiLCJvcHRfY29vcmRpbmF0ZXNzIiwiY29vcmRpbmF0ZXNzIiwiaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheSIsImVuZHNzIiwib3B0X2Nvb3JkaW5hdGVzc3MiLCJjb29yZGluYXRlc3NzIiwiQ2FudmFzQnVpbGRlciIsIm1heEV4dGVudCIsIm1heExpbmVXaWR0aCIsImJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfIiwiYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl8iLCJidWZmZXJlZE1heEV4dGVudF8iLCJpbnN0cnVjdGlvbnMiLCJ0bXBDb29yZGluYXRlXyIsImhpdERldGVjdGlvbkluc3RydWN0aW9ucyIsImFwcGx5UGl4ZWxSYXRpbyIsImRhc2hBcnJheSIsImRhc2giLCJhcHBlbmRGbGF0Q29vcmRpbmF0ZXMiLCJjbG9zZWQiLCJza2lwRmlyc3QiLCJteUVuZCIsImdldEJ1ZmZlcmVkTWF4RXh0ZW50IiwibGFzdFJlbCIsIm5leHRSZWwiLCJsYXN0WENvb3JkIiwibGFzdFlDb29yZCIsIm5leHRDb29yZCIsInNraXBwZWQiLCJkcmF3Q3VzdG9tQ29vcmRpbmF0ZXNfIiwiYnVpbGRlckVuZHMiLCJidWlsZGVyRW5kIiwiYmVnaW5HZW9tZXRyeSIsImJ1aWxkZXJFbmRzcyIsImJ1aWxkZXJCZWdpbiIsImdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzIiwiZ2V0RW5kc3MiLCJteUVuZHMiLCJnZXRFbmRzIiwiZW5kR2VvbWV0cnkiLCJmaW5pc2giLCJyZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zIiwiaW5zdHJ1Y3Rpb24iLCJmaWxsU3R5bGVDb2xvciIsInN0cm9rZVN0eWxlQ29sb3IiLCJzdHJva2VTdHlsZUxpbmVDYXAiLCJzdHJva2VTdHlsZUxpbmVEYXNoIiwic3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldCIsInN0cm9rZVN0eWxlTGluZUpvaW4iLCJzdHJva2VTdHlsZVdpZHRoIiwic3Ryb2tlU3R5bGVNaXRlckxpbWl0IiwiY3JlYXRlRmlsbCIsImFwcGx5U3Ryb2tlIiwiY3JlYXRlU3Ryb2tlIiwidXBkYXRlRmlsbFN0eWxlIiwiY3VycmVudEZpbGxTdHlsZSIsInVwZGF0ZVN0cm9rZVN0eWxlIiwiY3VycmVudFN0cm9rZVN0eWxlIiwiY3VycmVudExpbmVDYXAiLCJjdXJyZW50TGluZURhc2giLCJjdXJyZW50TGluZURhc2hPZmZzZXQiLCJjdXJyZW50TGluZUpvaW4iLCJjdXJyZW50TGluZVdpZHRoIiwiY3VycmVudE1pdGVyTGltaXQiLCJlbmRHZW9tZXRyeUluc3RydWN0aW9uIiwiQ2FudmFzSW1hZ2VCdWlsZGVyIiwiZGVjbHV0dGVyR3JvdXBzXyIsImhpdERldGVjdGlvbkltYWdlXyIsImltYWdlUGl4ZWxSYXRpb18iLCJhbmNob3JYXyIsImFuY2hvcllfIiwiaGVpZ2h0XyIsIm9yaWdpblhfIiwib3JpZ2luWV8iLCJkcmF3Q29vcmRpbmF0ZXNfIiwibXlCZWdpbiIsImRlY2x1dHRlckdyb3VwcyIsImhpdERldGVjdGlvbkltYWdlIiwiQ2FudmFzTGluZVN0cmluZ0J1aWxkZXIiLCJkcmF3RmxhdENvb3JkaW5hdGVzXyIsIm1vdmVUb0xpbmVUb0luc3RydWN0aW9uIiwibGFzdFN0cm9rZSIsInNuYXAiLCJxdWFudGl6ZSIsInNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMiLCJzaW1wbGlmaWVkT2Zmc2V0IiwiQ2FudmFzUG9seWdvbkJ1aWxkZXIiLCJkcmF3RmxhdENvb3JkaW5hdGVzc18iLCJudW1FbmRzIiwic2V0RmlsbFN0cm9rZVN0eWxlc18iLCJjaXJjbGVJbnN0cnVjdGlvbiIsIm1hdGNoaW5nQ2h1bmsiLCJtYXhBbmdsZSIsIm0xMiIsIm0yMyIsIngxMiIsInkxMiIsIngyMyIsInkyMyIsImNodW5rU3RhcnQiLCJjaHVua0VuZCIsImNodW5rTSIsIlRFWFRfQUxJR04iLCJCQVRDSF9DT05TVFJVQ1RPUlMiLCJQb2x5Z29uQnVpbGRlciIsIkJ1aWxkZXIiLCJJbWFnZUJ1aWxkZXIiLCJMaW5lU3RyaW5nQnVpbGRlciIsIkNhbnZhc1RleHRCdWlsZGVyIiwibGFiZWxzXyIsInRleHRPZmZzZXRYXyIsInRleHRPZmZzZXRZXyIsInRleHRSb3RhdGVXaXRoVmlld18iLCJ0ZXh0Um90YXRpb25fIiwidGV4dEZpbGxTdGF0ZV8iLCJmaWxsU3RhdGVzIiwidGV4dFN0cm9rZVN0YXRlXyIsInN0cm9rZVN0YXRlcyIsInRleHRTdGF0ZV8iLCJ0ZXh0U3RhdGVzIiwidGV4dEtleV8iLCJmaWxsS2V5XyIsInN0cm9rZUtleV8iLCJmaWxsU3RhdGUiLCJzdHJva2VTdGF0ZSIsInRleHRTdGF0ZSIsImdlb21ldHJ5VHlwZSIsInBsYWNlbWVudCIsInRleHRBbGlnbiIsImZsYXRPZmZzZXQiLCJmbGF0RW5kIiwib28iLCJkZWNsdXR0ZXJHcm91cCIsImRyYXdDaGFyc18iLCJnZW9tZXRyeVdpZHRocyIsIm92ZXJmbG93IiwiZ2V0RmxhdE1pZHBvaW50IiwiZ2V0RmxhdE1pZHBvaW50cyIsImdldEZsYXRJbnRlcmlvclBvaW50IiwiaW50ZXJpb3JQb2ludHMiLCJnZXRGbGF0SW50ZXJpb3JQb2ludHMiLCJzYXZlVGV4dFN0YXRlc18iLCJiYWNrZ3JvdW5kRmlsbCIsImJhY2tncm91bmRTdHJva2UiLCJwMCIsInAxIiwicDIiLCJwMyIsInBpeGVsUmF0aW9fMSIsInN0cm9rZUtleSIsInRleHRLZXkiLCJ0ZXh0QmFzZWxpbmUiLCJmaWxsS2V5IiwiYmFzZWxpbmUiLCJ0ZXh0RmlsbFN0eWxlIiwidGV4dFN0cm9rZVN0eWxlIiwiZ2V0Rm9udCIsInRleHRTY2FsZSIsImdldE92ZXJmbG93IiwiZ2V0TWF4QW5nbGUiLCJnZXRQbGFjZW1lbnQiLCJnZXRUZXh0QWxpZ24iLCJnZXRUZXh0QmFzZWxpbmUiLCJnZXRCYWNrZ3JvdW5kRmlsbCIsImdldEJhY2tncm91bmRTdHJva2UiLCJnZXRQYWRkaW5nIiwidGV4dE9mZnNldFgiLCJnZXRPZmZzZXRYIiwidGV4dE9mZnNldFkiLCJnZXRPZmZzZXRZIiwidGV4dFJvdGF0ZVdpdGhWaWV3IiwidGV4dFJvdGF0aW9uIiwiQnVpbGRlckdyb3VwIiwidG9sZXJhbmNlXyIsIm1heEV4dGVudF8iLCJyZXNvbHV0aW9uXyIsImJ1aWxkZXJzQnlaSW5kZXhfIiwiYWRkRGVjbHV0dGVyIiwiYnVpbGRlckluc3RydWN0aW9ucyIsInpLZXkiLCJidWlsZGVycyIsImJ1aWxkZXJLZXkiLCJidWlsZGVySW5zdHJ1Y3Rpb24iLCJnZXRCdWlsZGVyIiwiYnVpbGRlclR5cGUiLCJ6SW5kZXhLZXkiLCJyZXBsYXlzIiwicmVwbGF5IiwiQ29uc3RydWN0b3IiLCJkcmF3VGV4dE9uUGF0aCIsInN0YXJ0TSIsInJvdGF0ZWRDb29yZGluYXRlcyIsInByZXZpb3VzQW5nbGUiLCJudW1DaGFycyIsInNlZ21lbnRNIiwic2VnbWVudExlbmd0aCIsImFuZ2xlQ2hhbmdlZCIsImNoYXIiLCJjaGFyTGVuZ3RoIiwiY2hhck0iLCJzZWdtZW50UG9zIiwiaW50ZXJwb2xhdGUiLCJsaW5lU3RyaW5nTGVuZ3RoIiwicDQiLCJFeGVjdXRvciIsImFsaWduRmlsbF8iLCJkZWNsdXR0ZXJJdGVtcyIsImNvb3JkaW5hdGVDYWNoZV8iLCJyZW5kZXJlZFRyYW5zZm9ybV8iLCJwaXhlbENvb3JkaW5hdGVzXyIsInZpZXdSb3RhdGlvbl8iLCJ3aWR0aHNfIiwiY3JlYXRlTGFiZWwiLCJhbGlnbiIsImxpbmVzIiwibnVtTGluZXMiLCJ3aWR0aHMiLCJjdXJyZW50V2lkdGgiLCJtZWFzdXJlVGV4dFdpZHRocyIsInJlbmRlcldpZHRoIiwiT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIiwiQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIiwibGVmdFJpZ2h0IiwicmVwbGF5VGV4dEJhY2tncm91bmRfIiwic2V0U3Ryb2tlU3R5bGVfIiwicmVwbGF5SW1hZ2VPckxhYmVsXyIsImNvbnRleHRTY2FsZSIsImltYWdlT3JMYWJlbCIsInNuYXBUb1BpeGVsIiwiZmlsbFN0cm9rZSIsImJveFciLCJib3hIIiwiYm94WCIsImJveFkiLCJjZW50ZXJYIiwiY2VudGVyWSIsInJlbmRlckJ1ZmZlclgiLCJyZW5kZXJCdWZmZXJZIiwic3Ryb2tlUGFkZGluZyIsImRlY2x1dHRlckFyZ3MiLCJyZXBlYXRTaXplIiwicmVuZGVyRGVjbHV0dGVyIiwiZGVjbHV0dGVyVHJlZSIsImJveGVzIiwiYm94IiwiZGVjbHV0dGVyRGF0YSIsImN1cnJlbnRBbHBoYSIsImRyYXdMYWJlbFdpdGhQb2ludFBsYWNlbWVudF8iLCJleGVjdXRlXyIsImZlYXR1cmVDYWxsYmFjayIsIm9wdF9oaXRFeHRlbnQiLCJwaXhlbENvb3JkaW5hdGVzIiwiZGQiLCJwcmV2WCIsInByZXZZIiwicm91bmRYIiwicm91bmRZIiwicGVuZGluZ0ZpbGwiLCJwZW5kaW5nU3Ryb2tlIiwibGFzdEZpbGxJbnN0cnVjdGlvbiIsImxhc3RTdHJva2VJbnN0cnVjdGlvbiIsImNvb3JkaW5hdGVDYWNoZSIsInZpZXdSb3RhdGlvbiIsInZpZXdSb3RhdGlvbkZyb21UcmFuc2Zvcm0iLCJiYXRjaFNpemUiLCJjb29yZHMiLCJsYWJlbFdpdGhBbmNob3IiLCJ3aWR0aEluZGV4IiwiZGVjbHV0dGVyR3JvdXBJbmRleCIsInJlbmRlcmVkIiwibWVhc3VyZVBpeGVsUmF0aW8iLCJwaXhlbFJhdGlvU2NhbGUiLCJjYWNoZWRXaWR0aHMiLCJwYXRoTGVuZ3RoIiwidGV4dExlbmd0aCIsInBhcnRzIiwiY2MiLCJjaGFycyIsInBhcnQiLCJleGVjdXRlIiwiZXhlY3V0ZUhpdERldGVjdGlvbiIsIm9wdF9mZWF0dXJlQ2FsbGJhY2siLCJPUkRFUiIsIkJ1aWxkZXJUeXBlIiwiRXhlY3V0b3JHcm91cCIsImFsbEluc3RydWN0aW9ucyIsIm9wdF9yZW5kZXJCdWZmZXIiLCJleGVjdXRvcnNCeVpJbmRleF8iLCJoaXREZXRlY3Rpb25Db250ZXh0XyIsImhpdERldGVjdGlvblRyYW5zZm9ybV8iLCJjcmVhdGVFeGVjdXRvcnNfIiwiZmxhdENsaXBDb29yZHMiLCJnZXRDbGlwQ29vcmRzIiwiZXhlY3V0b3JzIiwiaW5zdHJ1Y3Rpb25CeVppbmRleCIsImhhc0V4ZWN1dG9ycyIsImNhbmRpZGF0ZXMiLCJjb250ZXh0U2l6ZSIsImhpdEV4dGVudCIsIm1hc2siLCJjaXJjbGVBcnJheUNhY2hlIiwiYXJyYXlTaXplIiwiZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUiLCJnZXRDaXJjbGVBcnJheSIsImltYWdlRGF0YSIsImpfMSIsInJlc3VsdF8xIiwiZXhlY3V0b3IiLCJvcHRfYnVpbGRlclR5cGVzIiwib3B0X2RlY2x1dHRlclJlcGxheXMiLCJidWlsZGVyVHlwZXMiLCIwIiwicmVwbGF5RGVjbHV0dGVyIiwiZGVjbHV0dGVyUmVwbGF5cyIsInp6IiwiZXhlY3V0b3JEYXRhIiwiY3VycmVudEV4ZWN1dG9yIiwiQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIiLCJvcHRfc3F1YXJlZFRvbGVyYW5jZSIsIm9wdF91c2VyVHJhbnNmb3JtIiwiY29udGV4dF8iLCJ0cmFuc2Zvcm1fIiwic3F1YXJlZFRvbGVyYW5jZV8iLCJ1c2VyVHJhbnNmb3JtXyIsImNvbnRleHRGaWxsU3RhdGVfIiwiY29udGV4dFN0cm9rZVN0YXRlXyIsImNvbnRleHRUZXh0U3RhdGVfIiwiZmlsbFN0YXRlXyIsInN0cm9rZVN0YXRlXyIsImltYWdlQW5jaG9yWF8iLCJpbWFnZUFuY2hvcllfIiwiaW1hZ2VIZWlnaHRfIiwiaW1hZ2VPcGFjaXR5XyIsImltYWdlT3JpZ2luWF8iLCJpbWFnZU9yaWdpbllfIiwiaW1hZ2VSb3RhdGVXaXRoVmlld18iLCJpbWFnZVJvdGF0aW9uXyIsImltYWdlU2NhbGVfIiwiaW1hZ2VXaWR0aF8iLCJ0ZXh0U2NhbGVfIiwidG1wTG9jYWxUcmFuc2Zvcm1fIiwiZHJhd0ltYWdlc18iLCJsb2NhbFRyYW5zZm9ybSIsImRyYXdUZXh0XyIsInNldENvbnRleHRGaWxsU3RhdGVfIiwic2V0Q29udGV4dFN0cm9rZVN0YXRlXyIsInNldENvbnRleHRUZXh0U3RhdGVfIiwic3Ryb2tlVGV4dCIsImZpbGxUZXh0IiwibW92ZVRvTGluZVRvXyIsImNsb3NlIiwiZHJhd1JpbmdzXyIsInNpbXBsZUdlb21ldHJ5IiwidHJhbnNmb3JtR2VvbTJEIiwiZ2VvbWV0cmllcyIsImdldEdlb21ldHJpZXNBcnJheSIsImZsYXRNaWRwb2ludCIsImdlb21ldHJ5RXh0ZW50IiwiZmxhdE1pZHBvaW50cyIsImZsYXRJbnRlcmlvclBvaW50IiwiZmxhdEludGVyaW9yUG9pbnRzIiwiY29udGV4dEZpbGxTdGF0ZSIsImNvbnRleHRTdHJva2VTdGF0ZSIsImNvbnRleHRUZXh0U3RhdGUiLCJpbWFnZUFuY2hvciIsImltYWdlSW1hZ2UiLCJpbWFnZU9yaWdpbiIsImltYWdlU2NhbGUiLCJ0ZXh0RmlsbFN0eWxlQ29sb3IiLCJ0ZXh0U3Ryb2tlU3R5bGVDb2xvciIsInRleHRTdHJva2VTdHlsZUxpbmVDYXAiLCJ0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaCIsInRleHRTdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0IiwidGV4dFN0cm9rZVN0eWxlTGluZUpvaW4iLCJ0ZXh0U3Ryb2tlU3R5bGVXaWR0aCIsInRleHRTdHJva2VTdHlsZU1pdGVyTGltaXQiLCJ0ZXh0Rm9udCIsInRleHRUZXh0IiwidGV4dFRleHRBbGlnbiIsInRleHRUZXh0QmFzZWxpbmUiLCJhc1N0cmluZyIsInNoYXJlZCIsIkljb25JbWFnZUNhY2hlIiwiY2FjaGVfIiwiY2FjaGVTaXplXyIsIm1heENhY2hlU2l6ZV8iLCJleHBpcmUiLCJpY29uSW1hZ2UiLCJtYXhDYWNoZVNpemUiLCJ0YWludGVkVGVzdENvbnRleHQiLCJJY29uSW1hZ2UiLCJpbWFnZVN0YXRlXyIsInRhaW50ZWRfIiwiaXNUYWludGVkXyIsImRpc3BhdGNoQ2hhbmdlRXZlbnRfIiwicmVwbGFjZUNvbG9yXyIsImdldFNyYyIsImltZ0RhdGEiLCJwdXRJbWFnZURhdGEiLCJJY29uIiwibm9ybWFsaXplZEFuY2hvcl8iLCJhbmNob3JPcmlnaW5fIiwiYW5jaG9yT3JpZ2luIiwiSWNvbk9yaWdpbiIsImFuY2hvclhVbml0c18iLCJhbmNob3JYVW5pdHMiLCJJY29uQW5jaG9yVW5pdHMiLCJhbmNob3JZVW5pdHNfIiwiYW5jaG9yWVVuaXRzIiwiaW1nU2l6ZSIsImljb25JbWFnZV8iLCJvZmZzZXRfIiwib2Zmc2V0T3JpZ2luXyIsIm9mZnNldE9yaWdpbiIsInNldEFuY2hvciIsImljb25JbWFnZVNpemUiLCJjcmVhdGVIaXREZXRlY3Rpb25JbWFnZURhdGEiLCJmZWF0dXJlQ291bnQiLCJpbmRleEZhY3RvciIsImZlYXR1cmVzQnlaSW5kZXgiLCJmZWF0dXJlU3R5bGVGdW5jdGlvbiIsInN0eWxlcyIsIm9yaWdpbmFsU3R5bGUiLCJjYW52YXNfMSIsImltZ0NvbnRleHQiLCJieUdlb21ldHJ5VHlwZSIsInpJbmRleEtleXMiLCJnZW9tQW5kU3R5bGUiLCJrayIsImhpdERldGVjdCIsInJlc3VsdEZlYXR1cmVzIiwiR0VPTUVUUllfUkVOREVSRVJTIiwiYnVpbGRlckdyb3VwIiwiaW1hZ2VSZXBsYXkiLCJ0ZXh0UmVwbGF5IiwibGluZVN0cmluZ1JlcGxheSIsInBvbHlnb25SZXBsYXkiLCJyZXBsYXlHcm91cCIsImdlb21ldHJ5UmVuZGVyZXIiLCJjaXJjbGVSZXBsYXkiLCJkZWZhdWx0T3JkZXIiLCJmZWF0dXJlMSIsImZlYXR1cmUyIiwiZ2V0VG9sZXJhbmNlIiwicmVuZGVyRmVhdHVyZSIsInJlbmRlckdlb21ldHJ5IiwicmVuZGVyRmVhdHVyZUludGVybmFsIiwiZ2V0R2VvbWV0cmllcyIsIkNhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIiLCJ2ZWN0b3JMYXllciIsImJvdW5kSGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8iLCJoYW5kbGVTdHlsZUltYWdlQ2hhbmdlXyIsImFuaW1hdGluZ09ySW50ZXJhY3RpbmdfIiwiZGlydHlfIiwiaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyIsInJlbmRlcmVkRmVhdHVyZXNfIiwicmVuZGVyZWRSZXNvbHV0aW9uXyIsInJlbmRlcmVkUm90YXRpb25fIiwicmVuZGVyZWRDZW50ZXJfIiwicmVuZGVyZWRQcm9qZWN0aW9uXyIsInJlbmRlcmVkUmVuZGVyT3JkZXJfIiwicmVwbGF5R3JvdXBfIiwicmVwbGF5R3JvdXBDaGFuZ2VkIiwiY2xpcHBpbmciLCJtYWtlU2NhbGUiLCJ2ZWN0b3JTb3VyY2UiLCJzdGFydFgiLCJ3b3JsZCIsInRyYW5zZm9ybV8xIiwidHJhbnNmb3JtXzIiLCJ2aWV3SGludHNfMSIsInBhcnNlRmxvYXQiLCJsYXllcl8xIiwiZmVhdHVyZXNfMSIsImFuaW1hdGluZyIsImludGVyYWN0aW5nIiwiZnJhbWVTdGF0ZUV4dGVudCIsInZlY3RvckxheWVyUmV2aXNpb24iLCJ2ZWN0b3JMYXllclJlbmRlckJ1ZmZlciIsInZlY3RvckxheWVyUmVuZGVyT3JkZXIiLCJsb2FkRXh0ZW50cyIsImxvYWRFeHRlbnQiLCJ1c2VyVHJhbnNmb3JtIiwiZGlydHkiLCJ1c2VyRXh0ZW50IiwicmVwbGF5R3JvdXBJbnN0cnVjdGlvbnMiLCJleGVjdXRvckdyb3VwIiwiVmVjdG9yTGF5ZXIiLCJCYXNlVmVjdG9yIiwiSU1BR0VfUkVQTEFZUyIsIlZFQ1RPUl9SRVBMQVlTIiwiQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIiLCJyZW5kZXJlZExheWVyUmV2aXNpb25fIiwicmVuZGVyZWRQaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8iLCJyZW5kZXJUaWxlSW1hZ2VRdWV1ZV8iLCJ0aWxlTGlzdGVuZXJLZXlzXyIsInRtcFRyYW5zZm9ybV8iLCJwcmVwYXJlVGlsZSIsInRpbGVVaWQiLCJ1cGRhdGVFeGVjdXRvckdyb3VwXyIsInRpbGVJbWFnZU5lZWRzUmVuZGVyXyIsIndhbnRlZFJlc29sdXRpb24iLCJsaXN0ZW5lcktleSIsImdldFJlbmRlck1vZGUiLCJWZWN0b3JUaWxlUmVuZGVyVHlwZSIsInJlbmRlclRpbGVJbWFnZV8iLCJleGVjdXRvckdyb3VwcyIsImhhc0NvbnRleHQiLCJsYXllclJldmlzaW9uIiwiYnVpbGRlclN0YXRlIiwiZ2V0UmVwbGF5U3RhdGUiLCJyZW5kZXJlZFJlbmRlck9yZGVyIiwicmVuZGVyZWRaIiwic291cmNlWiIsInNvdXJjZVRpbGVzIiwiZ2V0U291cmNlVGlsZXMiLCJsYXllclVpZCIsImhpdERldGVjdGlvbkltYWdlRGF0YSIsInR0Iiwic291cmNlVGlsZSIsInNvdXJjZVRpbGVDb29yZCIsInNvdXJjZVRpbGVFeHRlbnQiLCJzaGFyZWRFeHRlbnQiLCJidWZmZXJlZEV4dGVudCIsImV4ZWN1dG9yR3JvdXBJbnN0cnVjdGlvbnMiLCJyZXBsYXlFeHRlbnQiLCJyZW5kZXJpbmdSZXBsYXlHcm91cCIsImZvdW5kIiwiX2xvb3BfMiIsInRpbGVDb250YWluc0Nvb3JkaW5hdGUiLCJleHRlbnRfMSIsImxvYWRpbmdTb3VyY2VUaWxlcyIsInRpbGVQaXhlbCIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwicmVuZGVyUXVldWVkVGlsZUltYWdlc18iLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSIsInJlbmRlck1vZGUiLCJyZXBsYXlUeXBlcyIsIndvcmxkT2Zmc2V0IiwicmVwbGF5U3RhdGUiLCJyZW5kZXJlZFRpbGVSZXNvbHV0aW9uIiwicmVuZGVyZWRUaWxlUmV2aXNpb24iLCJyZW5kZXJlZFRpbGVaIiwicmVuZGVyUGl4ZWxSYXRpbyIsInJlbmRlclNjYWxlIiwicGl4ZWxTY2FsZSIsIlZlY3RvclRpbGVMYXllciIsInJlbmRlck1vZGVfIiwiYXNzaWduQ2xvc2VzdCIsIm9mZnNldDEiLCJvZmZzZXQyIiwibWF4U3F1YXJlZERlbHRhIiwic3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdFBvaW50IiwibWF4RGVsdGEiLCJpc1JpbmciLCJvcHRfdG1wUG9pbnQiLCJ0bXBQb2ludCIsImxpbmVhclJpbmciLCJ0d2ljZUFyZWEiLCJMaW5lYXJSaW5nIiwibWF4RGVsdGFfIiwibWF4RGVsdGFSZXZpc2lvbl8iLCJtYXJrZXJzIiwibGFzdCIsIm1heFNxdWFyZWREaXN0YW5jZSIsInNxdWFyZWREaXN0YW5jZV8xIiwiZG91Z2xhc1BldWNrZXIiLCJsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQiLCJsaW5lYXJSaW5nQ29udGFpbnNYWSIsInduIiwibGluZWFyUmluZ3NDb250YWluc1hZIiwiaW50ZXJzZWN0c0xpbmVTdHJpbmciLCJjb29yZGluYXRlc0V4dGVudCIsInJldCIsInBvaW50MSIsInBvaW50MiIsInN0YXJ0UmVsIiwiZW5kUmVsIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJzbG9wZSIsImludGVyc2VjdHNTZWdtZW50IiwibGluZWFyUmluZ0lzQ2xvY2t3aXNlIiwiZmlyc3RWZXJ0ZXhSZXBlYXRlZCIsImlNaW5WZXJ0ZXgiLCJtaW5YQXRNaW5ZIiwiZmluZENvcm5lclZlcnRleCIsImlQcmV2aW91c1ZlcnRleCIsImlOZXh0VmVydGV4IiwiYVgiLCJhWSIsImJYIiwiYlkiLCJjWCIsImNZIiwib3JpZW50TGluZWFyUmluZ3MiLCJvcHRfcmlnaHQiLCJpc0Nsb2Nrd2lzZSIsIlBvbHlnb24iLCJvcHRfZW5kcyIsImVuZHNfIiwiZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8iLCJmbGF0SW50ZXJpb3JQb2ludF8iLCJvcmllbnRlZFJldmlzaW9uXyIsIm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyIsImFwcGVuZExpbmVhclJpbmciLCJhcnJheU1heFNxdWFyZWREZWx0YSIsImFzc2lnbkNsb3Nlc3RBcnJheVBvaW50IiwibGluZWFyUmluZ3MiLCJmbGF0Q2VudGVyIiwiZmxhdENlbnRlcnMiLCJmbGF0Q2VudGVyc09mZnNldCIsImludGVyc2VjdGlvbnMiLCJyciIsInBvaW50WCIsIm1heFNlZ21lbnRMZW5ndGgiLCJnZXRJbnRlcmlvclBvaW50T2ZBcnJheSIsImdldEludGVyaW9yUG9pbnQiLCJnZXRMaW5lYXJSaW5nQ291bnQiLCJnZXRMaW5lYXJSaW5nIiwiZ2V0TGluZWFyUmluZ3MiLCJsaW5lYXJSaW5nc0FyZU9yaWVudGVkIiwic2ltcGxpZmllZEVuZHMiLCJxdWFudGl6ZUFycmF5IiwiaW50ZXJzZWN0c0xpbmVhclJpbmciLCJpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5IiwiZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJmcm9tRXh0ZW50Iiwib3B0X2NvbnZlcnRlciIsImNvbnZlcnRlciIsImJvdW5kT25SZW1vdmVPckNsZWFyRmVhdHVyZUxpc3RlbmVyXyIsIm9uUmVtb3ZlT3JDbGVhckZlYXR1cmVfIiwiZGVmYXVsdEJpbGxib2FyZEV5ZU9mZnNldF8iLCJjYW5jZWxsZXJzIiwiY2FuY2VsbGVyIiwicHJpbWl0aXZlIiwib2xGZWF0dXJlIiwib2xHZW9tZXRyeSIsIm9wdF9saW5lV2lkdGgiLCJmbGF0IiwicmVuZGVyU3RhdGUiLCJkZXB0aFRlc3QiLCJlbmFibGVkIiwiaW5zdGFuY2VzIiwiaW5zdGFuY2UiLCJHZW9tZXRyeUluc3RhbmNlIiwiQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIiwiZnJvbUNvbG9yIiwiY3JlYXRlSW5zdGFuY2UiLCJnZXRIZWlnaHRSZWZlcmVuY2UiLCJIZWlnaHRSZWZlcmVuY2UiLCJDTEFNUF9UT19HUk9VTkQiLCJjdG9yIiwiR3JvdW5kUHJpbWl0aXZlIiwiZ2VvbWV0cnlJbnN0YW5jZXMiLCJQcmltaXRpdmUiLCJkYXRhVXJpIiwiZ2V0VmFsdWUiLCJ0b0RhdGFVUkwiLCJhcHBlYXJhbmNlIiwiTWF0ZXJpYWxBcHBlYXJhbmNlIiwibWF0ZXJpYWwiLCJNYXRlcmlhbCIsImZhYnJpYyIsInVuaWZvcm1zIiwiUGVySW5zdGFuY2VDb2xvckFwcGVhcmFuY2UiLCJzZXRSZWZlcmVuY2VGb3JQaWNraW5nIiwib3V0bGluZSIsImZpbGxDb2xvciIsInN0cm9rZUNvbG9yIiwiZmlsbEdlb21ldHJ5Iiwib3V0bGluZUdlb21ldHJ5Iiwib2xTdHlsZSIsImV4dHJhY3RDb2xvckZyb21PbFN0eWxlIiwib3V0bGluZUNvbG9yIiwicHJpbWl0aXZlcyIsIlByaW1pdGl2ZUNvbGxlY3Rpb24iLCJjcmVhdGVDb2xvcmVkUHJpbWl0aXZlIiwiZXh0cmFjdExpbmVXaWR0aEZyb21PbFN0eWxlIiwib2xHZW9tZXRyeTQzMjZUZXh0UGFydFRvQ2VzaXVtIiwiYmlsbGJvYXJkcyIsImJiT3B0aW9ucyIsImV5ZU9mZnNldCIsImJiIiwiQ2lyY2xlR2VvbWV0cnkiLCJvdXRsaW5lUHJpbWl0aXZlIiwiY2lyY2xlUG9seWdvbiIsIm9wdF9uIiwib3B0X3NwaGVyZVJhZGl1cyIsInBvc2l0aW9ucyIsIkdyb3VuZFBvbHlsaW5lR2VvbWV0cnkiLCJQb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZSIsIm9sU3R5bGVUb0Nlc2l1bSIsImNsYXNzaWZpY2F0aW9uVHlwZSIsIkNsYXNzaWZpY2F0aW9uVHlwZSIsIlRFUlJBSU4iLCJyZWFkeVByb21pc2UiLCJfcHJpbWl0aXZlIiwiY3JlYXRlU3RhY2tlZEdyb3VuZENvcnJpZG9ycyIsIkNpcmNsZU91dGxpbmVHZW9tZXRyeSIsImV4dHJ1ZGVkSGVpZ2h0Iiwid3JhcEZpbGxBbmRPdXRsaW5lR2VvbWV0cmllcyIsImFkZFRleHRTdHlsZSIsInByZXZpb3VzRGlzdGFuY2UiLCJnZW9tZXRyeU9wdGlvbnMiLCJ2ZXJ0ZXhGb3JtYXQiLCJWZXJ0ZXhGb3JtYXQiLCJQT1NJVElPTl9PTkxZIiwibGluZVBvc2l0aW9ucyIsIkNvcnJpZG9yR2VvbWV0cnkiLCJkaXN0YW5jZURpc3BsYXlDb25kaXRpb24iLCJEaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlIiwiaGVpZ2h0UmVmZXJlbmNlIiwicHJpbWl0aXZlT3B0aW9ucyIsIlBvbHlsaW5lR2VvbWV0cnkiLCJtYXhIZWlnaHQiLCJSZWN0YW5nbGVHZW9tZXRyeSIsIlJlY3RhbmdsZU91dGxpbmVHZW9tZXRyeSIsInJpbmdzIiwiaGllcmFyY2h5IiwicG9seWdvbkhpZXJhcmNoeSIsIm9sUG9zIiwiaG9sZXMiLCJQb2x5Z29uR2VvbWV0cnkiLCJwZXJQb3NpdGlvbkhlaWdodCIsInBvbHlsaW5lR2VvbWV0cnkiLCJQb2x5Z29uT3V0bGluZUdlb21ldHJ5IiwiYWx0aXR1ZGVNb2RlIiwiTk9ORSIsIlJFTEFUSVZFX1RPX0dST1VORCIsIm9wdF9uZXdCaWxsYm9hcmRDYWxsYmFjayIsInJlYWxseUNyZWF0ZUJpbGxib2FyZCIsIkhUTUxJbWFnZUVsZW1lbnQiLCJwaXhlbE9mZnNldCIsImNzQWRkQmlsbGJvYXJkIiwiY29tcGxldGUiLCJpc0ltYWdlTG9hZGVkIiwiY2FuY2VsbGVkIiwiZnVpZCIsImlzRGVzdHJveWVkIiwibW9kZWxQcmltaXRpdmUiLCJvbGNzTW9kZWxGdW5jdGlvbiIsIm9sY3NNb2RlbCIsImNlc2l1bU9wdGlvbnMiLCJtb2RlbCIsIk1vZGVsIiwiZnJvbUdsdGYiLCJkZWJ1Z01vZGVsTWF0cml4IiwiRGVidWdNb2RlbE1hdHJpeFByaW1pdGl2ZSIsIm1vZGVsTWF0cml4IiwiY3JlYXRlQmlsbGJvYXJkRnJvbUltYWdlIiwiYWNjdW11bGF0ZSIsImZ1bmN0b3IiLCJzdWJnZW9zIiwib2xQb2ludEdlb21ldHJ5VG9DZXNpdW0iLCJnZXRMaW5lU3RyaW5ncyIsIm9sTGluZVN0cmluZ0dlb21ldHJ5VG9DZXNpdW0iLCJnZXRQb2x5Z29ucyIsIm9sUG9seWdvbkdlb21ldHJ5VG9DZXNpdW0iLCJsYWJlbHMiLCJMYWJlbENvbGxlY3Rpb24iLCJleHRlbnRDZW50ZXIiLCJsYWJlbFN0eWxlIiwiaG9yaXpvbnRhbE9yaWdpbiIsIkxhYmVsU3R5bGUiLCJvdXRsaW5lV2lkdGgiLCJPVVRMSU5FIiwiRklMTF9BTkRfT1VUTElORSIsIkhvcml6b250YWxPcmlnaW4iLCJMRUZUIiwiUklHSFQiLCJDRU5URVIiLCJ2ZXJ0aWNhbE9yaWdpbiIsIlZlcnRpY2FsT3JpZ2luIiwiVE9QIiwiQk9UVE9NIiwiZnJvbVR5cGUiLCJob3Jpem9udGFsIiwicmVwZWF0IiwiZXZlbkNvbG9yIiwib2RkQ29sb3IiLCJmYWxsYmFja1N0eWxlRnVuY3Rpb24iLCJvcHRfZ2VvbSIsImdlb20zZCIsImdlb21GdW5jUmVzIiwiZ2VvbSIsImdldEdlb21ldHJ5RnJvbUZlYXR1cmUiLCJuZXdCaWxsYm9hcmRBZGRlZENhbGxiYWNrIiwiZmVhdHVyZUJiIiwiZmVhdHVyZVRvQ2VzaXVtTWFwIiwicHJpbXMiLCJvbEZlYXR1cmVUb0Nlc2l1bSIsImJicyIsIm9sQ2lyY2xlR2VvbWV0cnlUb0Nlc2l1bSIsIm9sTXVsdGlHZW9tZXRyeVRvQ2VzaXVtIiwib2xWaWV3IiwiZmVhdHVyZVByaW1pdGl2ZU1hcCIsImxheWVyUHJvamVjdGlvbiIsIkJpbGxib2FyZENvbGxlY3Rpb24iLCJvbExpc3RlbktleXMiLCJyb290Q29sbGVjdGlvbl8iLCJsYXllclN0eWxlIiwiY29tcHV0ZVBsYWluU3R5bGUiLCJwcmltIiwiZ2V0Um9vdFByaW1pdGl2ZSIsImNzQWxsUHJpbWl0aXZlc18iLCJkZXN0cm95UHJpbWl0aXZlcyIsImNzUHJpbWl0aXZlIiwib2xWZWN0b3JMYXllclRvQ2VzaXVtIiwiY3NQcmltaXRpdmVzIiwidXBkYXRlTGF5ZXJWaXNpYmlsaXR5Iiwib25BZGRGZWF0dXJlIiwiY29udmVydCIsIm9uUmVtb3ZlRmVhdHVyZSIsIkJpbGxib2FyZCIsIk92ZXJsYXkiLCJpbnNlcnRGaXJzdCIsInN0b3BFdmVudCIsInBvaW50ZXJFdmVudHMiLCJhdXRvUGFuIiwiYW5pbWF0aW9uIiwiYXV0b1BhbkFuaW1hdGlvbiIsImF1dG9QYW5NYXJnaW4iLCJtYXBQb3N0cmVuZGVyTGlzdGVuZXJLZXkiLCJoYW5kbGVFbGVtZW50Q2hhbmdlZCIsImhhbmRsZU1hcENoYW5nZWQiLCJoYW5kbGVPZmZzZXRDaGFuZ2VkIiwiaGFuZGxlUG9zaXRpb25DaGFuZ2VkIiwiaGFuZGxlUG9zaXRpb25pbmdDaGFuZ2VkIiwic2V0RWxlbWVudCIsInNldE9mZnNldCIsInNldFBvc2l0aW9uaW5nIiwicG9zaXRpb25pbmciLCJzZXRQb3NpdGlvbiIsImdldEVsZW1lbnQiLCJnZXRNYXAiLCJnZXRPZmZzZXQiLCJnZXRQb3NpdGlvbiIsImdldFBvc2l0aW9uaW5nIiwiTWFwRXZlbnRUeXBlIiwidXBkYXRlUGl4ZWxQb3NpdGlvbiIsImdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQiLCJnZXRPdmVybGF5Q29udGFpbmVyIiwicGVyZm9ybUF1dG9QYW4iLCJwYW5JbnRvVmlldyIsIm9wdF9wYW5JbnRvVmlld09wdGlvbnMiLCJnZXRUYXJnZXRFbGVtZW50IiwibWFwUmVjdCIsImdldFJlY3QiLCJvdmVybGF5UmVjdCIsInBhbkludG9WaWV3T3B0aW9ucyIsIm15TWFyZ2luIiwib2Zmc2V0TGVmdCIsIm9mZnNldFJpZ2h0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0Qm90dG9tIiwiZ2V0Q2VudGVySW50ZXJuYWwiLCJjZW50ZXJQeCIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCIsIm5ld0NlbnRlclB4IiwicGFuT3B0aW9ucyIsImFuaW1hdGVJbnRlcm5hbCIsImdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInBhZ2VYT2Zmc2V0IiwidG9wIiwicGFnZVlPZmZzZXQiLCJkaXNwbGF5IiwiaXNSZW5kZXJlZCIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGUiLCJtYXBTaXplIiwidXBkYXRlUmVuZGVyZWRQb3NpdGlvbiIsInBvc1giLCJwb3NZIiwiT3ZlcmxheVBvc2l0aW9uaW5nIiwibXNUcmFuc2Zvcm0iLCJnZXRPcHRpb25zIiwic2NlbmVQb3N0UmVuZGVyTGlzdGVuZXJSZW1vdmVyXyIsInN5bmNocm9uaXplcl8iLCJzeW5jaHJvbml6ZXIiLCJwYXJlbnRfIiwicG9zaXRpb25XR1M4NF8iLCJvYnNlcnZlcl8iLCJNdXRhdGlvbk9ic2VydmVyIiwiYXR0cmlidXRlT2JzZXJ2ZXJfIiwic2V0UHJvcGVydHlGcm9tRXZlbnQiLCJzZXRQcm9wZXJ0eUZyb21FdmVudF8iLCJkaXNjb25uZWN0Iiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsImNoYXJhY3RlckRhdGEiLCJzdWJ0cmVlIiwib2JzZXJ2ZXIiLCJub2RlVHlwZSIsImdldFNjZW5lIiwiY2xvbmVOb2RlIiwiTm9kZSIsIlRFWFRfTk9ERSIsIk1vdXNlRXZlbnQiLCJub2RlcyIsInJlbW92ZUNoaWxkcmVuIiwiY2xvbmVkTm9kZSIsIm9ic2VydmVUYXJnZXRfIiwiZ2xvYmVIZWlnaHQiLCJ0aWxlc0xvYWRlZCIsImNhcnRlc2lhbiIsImVsbGlwc29pZEJvdW5kaW5nU3BoZXJlIiwiQm91bmRpbmdTcGhlcmUiLCJPY2NsdWRlciIsImlzUG9pbnRWaXNpYmxlIiwiY29tcHV0ZUN1bGxpbmdWb2x1bWUiLCJjb21wdXRlVmlzaWJpbGl0eSIsInBpeGVsQ2FydGVzaWFuIiwiY2FydGVzaWFuVG9DYW52YXNDb29yZGluYXRlcyIsInJlbW92ZU5vZGUiLCJvdmVybGF5c18iLCJnZXRPdmVybGF5cyIsIm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfIiwicGFyZW50RWxlbWVudCIsIm92ZXJsYXlDb250YWluZXJfIiwib3ZlcmxheU1hcF8iLCJhZGRPdmVybGF5cyIsImFkZE92ZXJsYXlGcm9tRXZlbnRfIiwicmVtb3ZlT3ZlcmxheUZyb21FdmVudF8iLCJvdmVybGF5IiwiYWRkT3ZlcmxheSIsImNlc2l1bU92ZXJsYXkiLCJvdmVybGF5SWQiLCJyZW1vdmVkT3ZlcmxheSIsInJlbW92ZU92ZXJsYXkiLCJjc092ZXJsYXkiLCJPTENlc2l1bSIsImF1dG9SZW5kZXJMb29wXyIsInRpbWVfIiwiSnVsaWFuRGF0ZSIsInRvNDMyNlRyYW5zZm9ybV8iLCJyZXNvbHV0aW9uU2NhbGVfIiwiY2FudmFzQ2xpZW50V2lkdGhfIiwiY2FudmFzQ2xpZW50SGVpZ2h0XyIsInJlc29sdXRpb25TY2FsZUNoYW5nZWRfIiwiZmlsbEFyZWEiLCJjb250YWluZXJfIiwiY29udGFpbmVyQXR0cmlidXRlIiwiY3JlYXRlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlTm9kZSIsInRhcmdldEVsZW1lbnQiLCJnZXRWaWV3cG9ydCIsImdldEVsZW1lbnRCeUlkIiwiaXNPdmVyTWFwXyIsInN0b3BPcGVuTGF5ZXJzRXZlbnRzUHJvcGFnYXRpb24iLCJvdmVybGF5RXZlbnRzIiwiY2FudmFzQXR0cmlidXRlIiwib25jb250ZXh0bWVudSIsIm9uc2VsZWN0c3RhcnQiLCJlbmFibGVkXyIsInBhdXNlZEludGVyYWN0aW9uc18iLCJoaWRkZW5Sb290R3JvdXBfIiwic2NlbmVPcHRpb25zIiwic2NlbmUzRE9ubHkiLCJTY2VuZSIsInNzY2MiLCJzY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXIiLCJ0aWx0RXZlbnRUeXBlcyIsIkNhbWVyYUV2ZW50VHlwZSIsIkxFRlRfRFJBRyIsIktleWJvYXJkRXZlbnRNb2RpZmllciIsIlNISUZUIiwiQUxUIiwiZW5hYmxlTG9vayIsImNvbnN0cmFpbmVkQXhpcyIsImNhbWVyYV8iLCJnbG9iZV8iLCJHbG9iZSIsImJhc2VDb2xvciIsIldISVRFIiwic2t5QXRtb3NwaGVyZSIsIlNreUF0bW9zcGhlcmUiLCJmaXJzdEltYWdlcnlQcm92aWRlciIsImFkZEltYWdlcnlQcm92aWRlciIsImRhdGFTb3VyY2VDb2xsZWN0aW9uXyIsIkRhdGFTb3VyY2VDb2xsZWN0aW9uIiwiZGF0YVNvdXJjZURpc3BsYXlfIiwiRGF0YVNvdXJjZURpc3BsYXkiLCJkYXRhU291cmNlQ29sbGVjdGlvbiIsInN5bmNocm9uaXplcnMiLCJjcmVhdGVTeW5jaHJvbml6ZXJzIiwiaGFuZGxlUmVzaXplXyIsImxhc3RGcmFtZVRpbWVfIiwicmVuZGVySWRfIiwidGFyZ2V0RnJhbWVSYXRlXyIsIlBPU0lUSVZFX0lORklOSVRZIiwiYmxvY2tDZXNpdW1SZW5kZXJpbmdfIiwid2FybWluZ1VwXyIsInRyYWNrZWRGZWF0dXJlXyIsInRyYWNrZWRFbnRpdHlfIiwiZW50aXR5Vmlld18iLCJuZWVkVHJhY2tlZEVudGl0eVVwZGF0ZV8iLCJib3VuZGluZ1NwaGVyZVNjcmF0Y2hfIiwiRXZlbnRIZWxwZXIiLCJ1cGRhdGVUcmFja2VkRW50aXR5XyIsImVuYWJsZVN1c3BlbmRUZXJyYWluQWRqdXN0bWVudCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwib25BbmltYXRpb25GcmFtZV8iLCJmcmFtZVRpbWUiLCJyZW5kZXJfIiwianVsaWFuRGF0ZSIsImluaXRpYWxpemVGcmFtZSIsInRyYWNrZWRFbnRpdHkiLCJnZXRCb3VuZGluZ1NwaGVyZSIsIkJvdW5kaW5nU3BoZXJlU3RhdGUiLCJET05FIiwiUEVORElORyIsImVuYWJsZVRpbHQiLCJicyIsIkZBSUxFRCIsIkVudGl0eVZpZXciLCJtYXBQcm9qZWN0aW9uIiwicmVzb2x1dGlvblNjYWxlIiwiYXNwZWN0UmF0aW8iLCJlbmFibGUiLCJpbnRlcmFjdGlvbnMiLCJ2aXNpYmlsaXR5IiwidGhyb3dPblVuaXRpYWxpemVkTWFwXyIsImdldEludGVyYWN0aW9ucyIsImFkZEludGVyYWN0aW9uIiwiaW50ZXJhY3Rpb24iLCJyZW1vdmVJbnRlcmFjdGlvbiIsInJvb3RHcm91cCIsImNsYXNzTGlzdCIsInRpbWVvdXQiLCJjc0NhbWVyYSIsImJsb2NrIiwib2wzZCIsImdldENlc2l1bVNjZW5lIiwiX2JvdW5kTm90aWZ5UmVwYWludFJlcXVpcmVkIiwibm90aWZ5UmVwYWludFJlcXVpcmVkIiwicmVwYWludEV2ZW50TmFtZXNfIiwicmVxdWVzdFJlbmRlck1vZGUiLCJtYXhpbXVtUmVuZGVyVGltZUNoYW5nZSIsInJlcGFpbnRLZXkiLCJnZXRPbE1hcCIsInJlcXVlc3RSZW5kZXIiLCJyZXN0YXJ0UmVuZGVyTG9vcCIsImlzRGVmIiwiZGVmYXVsdERhdGFTb3VyY2UiLCJlbnRpdGllcyIsIklERU5USVRZIiwidG80MzI2VHJhbnNmb3JtIiwidG9DZXNpdW1Qb3NpdGlvbiIsImNvbzQzMjYiLCJDYWxsYmFja1Byb3BlcnR5IiwiVFJBTlNQQVJFTlQiLCJjcmVhdGVFeHRlbnQiLCJvbmx5Q2VudGVyIiwic21vb3RoIiwib3B0X2lzTW92aW5nIiwidmlld1dpZHRoIiwidmlld0hlaWdodCIsIm5vbmUiLCJnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uIiwidmlld3BvcnRTaXplIiwic2hvd0Z1bGxFeHRlbnQiLCJ4UmVzb2x1dGlvbiIsInlSZXNvbHV0aW9uIiwiZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24iLCJjcmVhdGVNaW5NYXhSZXNvbHV0aW9uIiwib3B0X3Ntb290aCIsIm9wdF9tYXhFeHRlbnQiLCJvcHRfc2hvd0Z1bGxFeHRlbnQiLCJjYXBwZWRNYXhSZXMiLCJkaXNhYmxlIiwiYW5pbWF0aW9uQ2FsbGJhY2siLCJyZXR1cm5WYWx1ZSIsImlzTm9vcEFuaW1hdGlvbiIsInNvdXJjZVJvdGF0aW9uIiwidGFyZ2V0Um90YXRpb24iLCJWaWV3IiwiaGludHNfIiwiYW5pbWF0aW9uc18iLCJ1cGRhdGVBbmltYXRpb25LZXlfIiwidmlld3BvcnRTaXplXyIsInRhcmdldENlbnRlcl8iLCJ0YXJnZXRSb3RhdGlvbl8iLCJjYW5jZWxBbmNob3JfIiwiYXBwbHlPcHRpb25zXyIsInJlc29sdXRpb25Db25zdHJhaW50SW5mbyIsInJlc29sdXRpb25Db25zdHJhaW50IiwibXVsdGlXb3JsZCIsInNtb290aFJlc29sdXRpb25Db25zdHJhaW50IiwicHJvakV4dGVudCIsImNvbnN0cmFpbk9ubHlDZW50ZXIiLCJjYXBwZWQiLCJjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyIsImRlZmF1bHRNYXhSZXNvbHV0aW9uIiwiZGVmYXVsdE1pblJlc29sdXRpb24iLCJkZWZhdWx0TWF4Wm9vbSIsInBvd2VyIiwib3B0X21pblJlc29sdXRpb24iLCJtaW5ab29tTGV2ZWwiLCJjYXBwZWRab29tTGV2ZWwiLCJ6b29tTGV2ZWwiLCJjcmVhdGVTbmFwVG9Qb3dlciIsImNvbnN0cmFpbnQiLCJjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludCIsIm1heFJlc29sdXRpb25fIiwibWluUmVzb2x1dGlvbl8iLCJtaW5ab29tXyIsImNlbnRlckNvbnN0cmFpbnQiLCJzbW9vdGhFeHRlbnRDb25zdHJhaW50IiwiY3JlYXRlQ2VudGVyQ29uc3RyYWludCIsInJvdGF0aW9uQ29uc3RyYWludCIsImVuYWJsZVJvdGF0aW9uIiwiY29uc3RyYWluUm90YXRpb24iLCJ0aGV0YSIsImNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludCIsImNvbnN0cmFpbnRzXyIsInNldENlbnRlckludGVybmFsIiwic2V0Wm9vbSIsIm9wdGlvbnNfIiwiZ2V0VXBkYXRlZE9wdGlvbnNfIiwibmV3T3B0aW9ucyIsImdldFpvb20iLCJ2YXJfYXJncyIsImdldEFuaW1hdGluZyIsInJlc29sdmVDb25zdHJhaW50cyIsImFyZ3MiLCJhbmltYXRpb25Db3VudCIsInNlcmllcyIsImdldFJlc29sdXRpb25Gb3Jab29tIiwic2V0SGludCIsInVwZGF0ZUFuaW1hdGlvbnNfIiwiZ2V0SW50ZXJhY3RpbmciLCJjYW5jZWxBbmltYXRpb25zIiwibW9yZSIsInNlcmllc0NvbXBsZXRlIiwiZWxhcHNlZCIsImZyYWN0aW9uIiwiZ2V0Vmlld3BvcnRTaXplXyIsImNvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImNhbGN1bGF0ZUNlbnRlclpvb20iLCJhcHBseVRhcmdldFN0YXRlXyIsImNvbnN0cmFpbmVkUm90YXRpb24iLCJjYWxjdWxhdGVDZW50ZXJSb3RhdGUiLCJjdXJyZW50Q2VudGVyIiwiY3VycmVudFJlc29sdXRpb24iLCJvcHRfcm90YXRpb24iLCJzZXRWaWV3cG9ydFNpemUiLCJWaWV3UHJvcGVydHkiLCJnZXRDb25zdHJhaW50cyIsImdldENvbnN0cmFpblJlc29sdXRpb24iLCJnZXRIaW50cyIsIm9wdF9oaW50cyIsImNhbGN1bGF0ZUV4dGVudEludGVybmFsIiwiZ2V0Wm9vbUZvclJlc29sdXRpb24iLCJzZXRDb25zdHJhaW5SZXNvbHV0aW9uIiwiZ2V0UmVzb2x1dGlvbkZvckV4dGVudCIsImdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbCIsImdldFJlc29sdXRpb25Gb3JWYWx1ZUZ1bmN0aW9uIiwib3B0X3Bvd2VyIiwiZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24iLCJsb2dQb3dlciIsIm5lYXJlc3QiLCJiYXNlTGV2ZWwiLCJmaXQiLCJnZW9tZXRyeU9yRXh0ZW50IiwiZml0SW50ZXJuYWwiLCJtaW5Sb3RYIiwibWluUm90WSIsIm1heFJvdFgiLCJtYXhSb3RZIiwicm90WCIsInJvdFkiLCJjZW50ZXJSb3RYIiwiY2VudGVyUm90WSIsImdldENvbnN0cmFpbmVkQ2VudGVyIiwiY2VudGVyT24iLCJjZW50ZXJPbkludGVybmFsIiwiYWRqdXN0Q2VudGVyIiwiZGVsdGFDb29yZGluYXRlcyIsImFkanVzdENlbnRlckludGVybmFsIiwiYWRqdXN0UmVzb2x1dGlvbiIsImFkanVzdFJlc29sdXRpb25JbnRlcm5hbCIsImlzTW92aW5nIiwibmV3UmVzb2x1dGlvbiIsImFkanVzdFpvb20iLCJhZGp1c3RSb3RhdGlvbiIsImFkanVzdFJvdGF0aW9uSW50ZXJuYWwiLCJuZXdSb3RhdGlvbiIsImhpbnQiLCJvcHRfZG9Ob3RDYW5jZWxBbmltcyIsIm9wdF9mb3JjZU1vdmluZyIsIm5ld0NlbnRlciIsIm9wdF9kdXJhdGlvbiIsIm9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uIiwiYmVnaW5JbnRlcmFjdGlvbiIsImVuZEludGVyYWN0aW9uIiwiZW5kSW50ZXJhY3Rpb25JbnRlcm5hbCIsIm9wdF90YXJnZXRSZXNvbHV0aW9uIiwiZ2V0Q29uc3RyYWluZWRab29tIiwidGFyZ2V0Wm9vbSIsInRhcmdldFJlcyIsImV4cGlyZUljb25DYWNoZSIsIk1hcFJlbmRlcmVyIiwiZGVjbHV0dGVyVHJlZV8iLCJkaXNwYXRjaFJlbmRlckV2ZW50IiwiY2FsY3VsYXRlTWF0cmljZXMyRCIsImNoZWNrV3JhcHBlZCIsInRoaXNBcmciLCJsYXllckZpbHRlciIsInRoaXNBcmcyIiwidHJhbnNsYXRlZENvb3JkaW5hdGUiLCJvZmZzZXRzIiwibGF5ZXJTdGF0ZXMiLCJudW1MYXllcnMiLCJ0bXBDb29yZCIsImNhbGxiYWNrXzEiLCJmb3JFYWNoTGF5ZXJBdFBpeGVsIiwiaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZSIsInpJbmRleEl0ZW1zIiwicmVuZGVyRGVjbHV0dGVySXRlbXMiLCJzY2hlZHVsZUV4cGlyZUljb25DYWNoZSIsIkNvbXBvc2l0ZU1hcFJlbmRlcmVyIiwiZm9udENoYW5nZUxpc3RlbmVyS2V5XyIsInJlZHJhd1RleHQiLCJlbGVtZW50XyIsIkNMQVNTX1VOU0VMRUNUQUJMRSIsImNoaWxkcmVuXyIsInJlbmRlcmVkVmlzaWJsZV8iLCJwcmV2aW91c0VsZW1lbnQiLCJvbGRDaGlsZHJlbiIsIm9sZENoaWxkIiwibmV3Q2hpbGQiLCJyZXBsYWNlQ2hpbGRyZW4iLCJNYXAiLCJNYXBFdmVudCIsIk1hcEJyb3dzZXJFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJvcHRfZHJhZ2dpbmciLCJwaXhlbF8iLCJjb29yZGluYXRlXyIsImRyYWdnaW5nIiwiZ2V0RXZlbnRQaXhlbCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJnZXRDb29yZGluYXRlRnJvbVBpeGVsIiwiU0lOR0xFQ0xJQ0siLCJDTElDSyIsIkRCTENMSUNLIiwiUE9JTlRFUkRSQUciLCJQT0lOVEVSTU9WRSIsIlBPSU5URVJET1dOIiwiUE9JTlRFUlVQIiwiUE9JTlRFUk9WRVIiLCJQT0lOVEVST1VUIiwiUE9JTlRFUkVOVEVSIiwiUE9JTlRFUkxFQVZFIiwiUE9JTlRFUkNBTkNFTCIsIk1hcEJyb3dzZXJFdmVudEhhbmRsZXIiLCJtb3ZlVG9sZXJhbmNlIiwiY2xpY2tUaW1lb3V0SWRfIiwiZHJhZ2dpbmdfIiwiZHJhZ0xpc3RlbmVyS2V5c18iLCJtb3ZlVG9sZXJhbmNlXyIsImRvd25fIiwiYWN0aXZlUG9pbnRlcnNfIiwidHJhY2tlZFRvdWNoZXNfIiwicG9pbnRlcmRvd25MaXN0ZW5lcktleV8iLCJoYW5kbGVQb2ludGVyRG93bl8iLCJvcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfIiwicmVsYXllZExpc3RlbmVyS2V5XyIsInJlbGF5RXZlbnRfIiwiYm91bmRIYW5kbGVUb3VjaE1vdmVfIiwiaGFuZGxlVG91Y2hNb3ZlXyIsImVtdWxhdGVDbGlja18iLCJwb2ludGVyRXZlbnQiLCJuZXdFdmVudCIsImNsZWFyVGltZW91dCIsInVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyIsInBvaW50ZXJJZCIsImhhbmRsZVBvaW50ZXJVcF8iLCJpc01vdXNlQWN0aW9uQnV0dG9uXyIsImJ1dHRvbiIsImhhbmRsZVBvaW50ZXJNb3ZlXyIsImdldFJvb3ROb2RlIiwiaXNNb3ZpbmdfIiwiZGVmYXVsdFByZXZlbnRlZCIsImNsaWVudFgiLCJjbGllbnRZIiwiRFJPUCIsIlByaW9yaXR5UXVldWUiLCJwcmlvcml0eUZ1bmN0aW9uIiwia2V5RnVuY3Rpb24iLCJwcmlvcml0eUZ1bmN0aW9uXyIsImtleUZ1bmN0aW9uXyIsImVsZW1lbnRzXyIsInByaW9yaXRpZXNfIiwicXVldWVkRWxlbWVudHNfIiwiZGVxdWV1ZSIsImVsZW1lbnRzIiwicHJpb3JpdGllcyIsInNpZnRVcF8iLCJlbGVtZW50S2V5IiwicHJpb3JpdHkiLCJzaWZ0RG93bl8iLCJnZXRMZWZ0Q2hpbGRJbmRleF8iLCJnZXRSaWdodENoaWxkSW5kZXhfIiwiZ2V0UGFyZW50SW5kZXhfIiwiaGVhcGlmeV8iLCJpc1F1ZXVlZCIsInN0YXJ0SW5kZXgiLCJsSW5kZXgiLCJySW5kZXgiLCJzbWFsbGVyQ2hpbGRJbmRleCIsInBhcmVudEluZGV4IiwicmVwcmlvcml0aXplIiwiVGlsZVF1ZXVlIiwidGlsZVByaW9yaXR5RnVuY3Rpb24iLCJ0aWxlQ2hhbmdlQ2FsbGJhY2siLCJib3VuZEhhbmRsZVRpbGVDaGFuZ2VfIiwidGlsZUNoYW5nZUNhbGxiYWNrXyIsInRpbGVzTG9hZGluZ18iLCJ0aWxlc0xvYWRpbmdLZXlzXyIsImFkZGVkIiwiZ2V0VGlsZXNMb2FkaW5nIiwidGlsZUtleSIsImxvYWRNb3JlVGlsZXMiLCJtYXhUb3RhbExvYWRpbmciLCJtYXhOZXdMb2FkcyIsIm5ld0xvYWRzIiwiUGx1Z2dhYmxlTWFwIiwib3B0aW9uc0ludGVybmFsIiwia2V5Ym9hcmRFdmVudFRhcmdldCIsImNvbnRyb2xzIiwib3ZlcmxheXMiLCJsYXllckdyb3VwIiwiY3JlYXRlT3B0aW9uc0ludGVybmFsIiwiYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfIiwiaGFuZGxlQnJvd3NlckV2ZW50IiwibWF4VGlsZXNMb2FkaW5nXyIsIm1heFRpbGVzTG9hZGluZyIsInBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyIsImFuaW1hdGlvbkRlbGF5S2V5XyIsImFuaW1hdGlvbkRlbGF5XyIsInJlbmRlckZyYW1lXyIsImNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyIsInBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyIsImZyYW1lSW5kZXhfIiwiZnJhbWVTdGF0ZV8iLCJwcmV2aW91c0V4dGVudF8iLCJ2aWV3UHJvcGVydHlMaXN0ZW5lcktleV8iLCJ2aWV3Q2hhbmdlTGlzdGVuZXJLZXlfIiwibGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyIsInZpZXdwb3J0XyIsIm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfIiwia2V5Ym9hcmRFdmVudFRhcmdldF8iLCJrZXlIYW5kbGVyS2V5c18iLCJvdmVybGF5SWRJbmRleF8iLCJwb3N0UmVuZGVyRnVuY3Rpb25zXyIsInRpbGVRdWV1ZV8iLCJnZXRUaWxlUHJpb3JpdHkiLCJoYW5kbGVUaWxlQ2hhbmdlXyIsIk1hcFByb3BlcnR5IiwiaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfIiwiaGFuZGxlVmlld0NoYW5nZWRfIiwiaGFuZGxlU2l6ZUNoYW5nZWRfIiwiaGFuZGxlVGFyZ2V0Q2hhbmdlZF8iLCJjb250cm9sIiwiYWRkT3ZlcmxheUludGVybmFsXyIsImFkZENvbnRyb2wiLCJnZXRDb250cm9scyIsImFkZExheWVyIiwic2V0VGFyZ2V0IiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwiZ2V0RmVhdHVyZXNBdFBpeGVsIiwiaGFzRmVhdHVyZUF0UGl4ZWwiLCJnZXRFdmVudENvb3JkaW5hdGUiLCJnZXRFdmVudENvb3JkaW5hdGVJbnRlcm5hbCIsInZpZXdwb3J0UG9zaXRpb24iLCJldmVudFBvc2l0aW9uIiwiY2hhbmdlZFRvdWNoZXMiLCJnZXRPdmVybGF5QnlJZCIsImdldExvYWRpbmciLCJ2aWV3Q29vcmRpbmF0ZSIsInRpbGVDZW50ZXIiLCJicm93c2VyRXZlbnQiLCJtYXBCcm93c2VyRXZlbnQiLCJoYW5kbGVNYXBCcm93c2VyRXZlbnQiLCJyb290Tm9kZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJpbnRlcmFjdGlvbnNBcnJheSIsImdldEFjdGl2ZSIsImhhbmRsZVBvc3RSZW5kZXIiLCJsb3dPbkZyYW1lQnVkZ2V0IiwidXBkYXRlU2l6ZSIsImhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfIiwidXBkYXRlVmlld3BvcnRTaXplXyIsInJlbmRlclN5bmMiLCJyZW1vdmVDb250cm9sIiwicmVtb3ZlTGF5ZXIiLCJwcmV2aW91c0ZyYW1lU3RhdGUiLCJoYXNBcmVhIiwic2V0TGF5ZXJHcm91cCIsImNvbXB1dGVkU3R5bGUiLCJDb250cm9sIiwidGFyZ2V0XyIsIm1hcEV2ZW50IiwiQXR0cmlidXRpb24iLCJ1bEVsZW1lbnRfIiwiY29sbGFwc2VkXyIsImNvbGxhcHNlZCIsIm92ZXJyaWRlQ29sbGFwc2libGVfIiwiY29sbGFwc2libGUiLCJjb2xsYXBzaWJsZV8iLCJ0aXBMYWJlbCIsImNvbGxhcHNlTGFiZWwiLCJjb2xsYXBzZUxhYmVsXyIsInRleHRDb250ZW50IiwibGFiZWxfIiwiYWN0aXZlTGFiZWwiLCJ0aXRsZSIsImhhbmRsZUNsaWNrXyIsImNzc0NsYXNzZXMiLCJyZW5kZXJlZEF0dHJpYnV0aW9uc18iLCJjb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyIsImxvb2t1cCIsInZpc2libGVBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbkdldHRlciIsInNldENvbGxhcHNpYmxlIiwidXBkYXRlRWxlbWVudF8iLCJoYW5kbGVUb2dnbGVfIiwidG9nZ2xlIiwiZ2V0Q29sbGFwc2libGUiLCJzZXRDb2xsYXBzZWQiLCJnZXRDb2xsYXBzZWQiLCJSb3RhdGUiLCJjYWxsUmVzZXROb3J0aF8iLCJyZXNldE5vcnRoIiwiZHVyYXRpb25fIiwiYXV0b0hpZGVfIiwiYXV0b0hpZGUiLCJyZXNldE5vcnRoXyIsIlpvb20iLCJ6b29tSW5MYWJlbCIsInpvb21PdXRMYWJlbCIsInpvb21JblRpcExhYmVsIiwiem9vbU91dFRpcExhYmVsIiwiaW5FbGVtZW50Iiwib3V0RWxlbWVudCIsInpvb21CeURlbHRhXyIsImN1cnJlbnRab29tIiwibmV3Wm9vbSIsInpvb21CeURlbHRhIiwiSW50ZXJhY3Rpb24iLCJzZXRBY3RpdmUiLCJhY3RpdmUiLCJEb3VibGVDbGlja1pvb20iLCJkZWx0YV8iLCJzaGlmdEtleSIsIlBvaW50ZXJJbnRlcmFjdGlvbiIsImhhbmRsZURvd25FdmVudCIsImhhbmRsZURyYWdFdmVudCIsImhhbmRsZU1vdmVFdmVudCIsImhhbmRsZVVwRXZlbnQiLCJzdG9wRG93biIsImhhbmRsaW5nRG93blVwU2VxdWVuY2UiLCJ0cmFja2VkUG9pbnRlcnNfIiwidGFyZ2V0UG9pbnRlcnMiLCJnZXRQb2ludGVyQ291bnQiLCJ1cGRhdGVUcmFja2VkUG9pbnRlcnNfIiwiaGFuZGxlZFVwIiwiaGFuZGxlZCIsImlzUG9pbnRlckRyYWdnaW5nRXZlbnQiLCJjb25kaXRpb25zIiwicGFzcyIsImFsdFNoaWZ0S2V5c09ubHkiLCJhbHRLZXkiLCJtZXRhS2V5IiwiY3RybEtleSIsImZvY3VzV2l0aFRhYmluZGV4IiwiaGFzQXR0cmlidXRlIiwiYWN0aXZlRWxlbWVudCIsImFsd2F5cyIsIm1vdXNlQWN0aW9uQnV0dG9uIiwibm9Nb2RpZmllcktleXMiLCJzaGlmdEtleU9ubHkiLCJ0YXJnZXROb3RFZGl0YWJsZSIsInRhZ05hbWUiLCJtb3VzZU9ubHkiLCJwb2ludGVyVHlwZSIsInByaW1hcnlBY3Rpb24iLCJpc1ByaW1hcnkiLCJEcmFnUGFuIiwia2luZXRpY18iLCJraW5ldGljIiwibGFzdENlbnRyb2lkIiwibGFzdFBvaW50ZXJzQ291bnRfIiwicGFubmluZ18iLCJjb25kaXRpb24iLCJjb25kaXRpb25fIiwib25Gb2N1c09ubHkiLCJub0tpbmV0aWNfIiwiY2VudGVycHgiLCJQb2ludGVyIiwiRHJhZ1JvdGF0ZSIsImxhc3RBbmdsZV8iLCJSZW5kZXJCb3giLCJzdGFydFBpeGVsXyIsImVuZFBpeGVsXyIsInN0YXJ0UGl4ZWwiLCJlbmRQaXhlbCIsInB4Iiwic2V0UGl4ZWxzIiwiY3JlYXRlT3JVcGRhdGVHZW9tZXRyeSIsIkRyYWdCb3hFdmVudCIsIkRyYWdCb3giLCJib3hfIiwibWluQXJlYV8iLCJvbkJveEVuZCIsImJveEVuZENvbmRpdGlvbl8iLCJib3hFbmRDb25kaXRpb24iLCJkZWZhdWx0Qm94RW5kQ29uZGl0aW9uIiwiRHJhZ1pvb20iLCJvdXRfIiwib3V0IiwibWFwRXh0ZW50IiwiYm94UGl4ZWxFeHRlbnQiLCJleHRlbmRDb29yZGluYXRlcyIsImNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzIiwic2NhbGVGcm9tQ2VudGVyIiwiS2V5Ym9hcmRQYW4iLCJkZWZhdWx0Q29uZGl0aW9uXyIsInBpeGVsRGVsdGFfIiwicGl4ZWxEZWx0YSIsImtleUNvZGUiLCJtYXBVbml0c0RlbHRhIiwicGFuIiwiS2V5Ym9hcmRab29tIiwiS2luZXRpYyIsImRlY2F5IiwibWluVmVsb2NpdHkiLCJkZWxheSIsImRlY2F5XyIsIm1pblZlbG9jaXR5XyIsImRlbGF5XyIsImluaXRpYWxWZWxvY2l0eV8iLCJsYXN0SW5kZXgiLCJmaXJzdEluZGV4IiwiTW9kZSIsIk1vdXNlV2hlZWxab29tIiwidG90YWxEZWx0YV8iLCJsYXN0RGVsdGFfIiwidGltZW91dF8iLCJ1c2VBbmNob3JfIiwidXNlQW5jaG9yIiwiY29uc3RyYWluUmVzb2x1dGlvbl8iLCJsYXN0QW5jaG9yXyIsInN0YXJ0VGltZV8iLCJ0aW1lb3V0SWRfIiwibW9kZV8iLCJ0cmFja3BhZEV2ZW50R2FwXyIsInRyYWNrcGFkVGltZW91dElkXyIsImRlbHRhUGVyWm9vbV8iLCJlbmRJbnRlcmFjdGlvbl8iLCJ3aGVlbEV2ZW50IiwiZGVsdGFNb2RlIiwiV2hlZWxFdmVudCIsIkRPTV9ERUxUQV9QSVhFTCIsIkRPTV9ERUxUQV9MSU5FIiwidGltZUxlZnQiLCJoYW5kbGVXaGVlbFpvb21fIiwic2V0TW91c2VBbmNob3IiLCJQaW5jaFJvdGF0ZSIsInBvaW50ZXJPcHRpb25zIiwicm90YXRpbmdfIiwicm90YXRpb25EZWx0YV8iLCJ0aHJlc2hvbGRfIiwidGhyZXNob2xkIiwicm90YXRpb25EZWx0YSIsInRvdWNoMCIsInRvdWNoMSIsIlBpbmNoWm9vbSIsImxhc3REaXN0YW5jZV8iLCJsYXN0U2NhbGVEZWx0YV8iLCJzY2FsZURlbHRhIiwiem9vbU9wdGlvbnMiLCJyb3RhdGVPcHRpb25zIiwiYXR0cmlidXRpb24iLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJhbHRTaGlmdERyYWdSb3RhdGUiLCJkb3VibGVDbGlja1pvb20iLCJ6b29tRGVsdGEiLCJ6b29tRHVyYXRpb24iLCJkcmFnUGFuIiwicGluY2hSb3RhdGUiLCJwaW5jaFpvb20iLCJrZXlib2FyZCIsIm1vdXNlV2hlZWxab29tIiwic2hpZnREcmFnWm9vbSIsIkNvbXBvc2l0ZSIsIlhZWiIsInh5ek9wdGlvbnMiLCJncmlkT3B0aW9ucyIsImNyZWF0ZVhZWiIsInNob3czZCIsImFwcCIsInNldEVuYWJsZWQiXSwibWFwcGluZ3MiOiJpSkFHSUEsRSxNQUEwQixHQUE0QixLQUUxREEsRUFBd0JDLEtBQUssQ0FBQ0MsRUFBT0MsR0FBSSxvb0tBQXVvSyxHQUFHLENBQUMsUUFBVSxFQUFFLFFBQVUsQ0FBQyxzQ0FBc0MsTUFBUSxHQUFHLFNBQVcsbXhFQUFteEUsZUFBaUIsQ0FB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QU8sSUFBSSxHQUFTLENBQUN0a0csSUFOakIsSUFBSSxHQUFNLENBQ2xCeUwsT0FBUTA4RyxHQUNSdmhFLEtBZFMsSUFBSSxHQUFPLENBQ3BCbHJDLFFyTHVVeUJ4RCxHcUx2VU4sQ0FBQyxhQUFjLFdyTHdVekJsQixHQUFVa0IsR0FBWSxZQUE2RCxjcUx2VTVGMlUsS0FBTSxLQWFOZ2pCLE9BQVEsQ0FUTSxJQUFJYyxHQUFVLENBQzVCanRDLE9BQVEsSUFBSSxHQUFVLENBQ3BCNnBDLElBQUssbUVBV1QsR0FBTy82QixpQkFBaUIsU0FBUyxXQUU3QjAxRyxJQURFQSxHQUtKNWpCLEdBQUs4akIsV0FBV0YsT0FHbEJyOEcsT0FBT3k0RixLQUFPQSxLIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9jc3NXaXRoTWFwcGluZ1RvU3RyaW5nLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi5vbC1ib3gge1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcXG4gIGJvcmRlcjogMnB4IHNvbGlkIGJsdWU7XFxufVxcblxcbi5vbC1tb3VzZS1wb3NpdGlvbiB7XFxuICB0b3A6IDhweDtcXG4gIHJpZ2h0OiA4cHg7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxufVxcblxcbi5vbC1zY2FsZS1saW5lIHtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCw2MCwxMzYsMC4zKTtcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gIGJvdHRvbTogOHB4O1xcbiAgbGVmdDogOHB4O1xcbiAgcGFkZGluZzogMnB4O1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbn1cXG4ub2wtc2NhbGUtbGluZS1pbm5lciB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZWVlO1xcbiAgYm9yZGVyLXRvcDogbm9uZTtcXG4gIGNvbG9yOiAjZWVlO1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgbWFyZ2luOiAxcHg7XFxuICB3aWxsLWNoYW5nZTogY29udGVudHMsIHdpZHRoO1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuMjVzO1xcbn1cXG4ub2wtc2NhbGUtYmFyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJvdHRvbTogOHB4O1xcbiAgbGVmdDogOHB4O1xcbn1cXG4ub2wtc2NhbGUtc3RlcC1tYXJrZXIge1xcbiAgd2lkdGg6IDFweDtcXG4gIGhlaWdodDogMTVweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7XFxuICBmbG9hdDogcmlnaHQ7XFxuICB6LUluZGV4OiAxMDtcXG59XFxuLm9sLXNjYWxlLXN0ZXAtdGV4dCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBib3R0b206IC01cHg7XFxuICBmb250LXNpemU6IDEycHg7XFxuICB6LUluZGV4OiAxMTtcXG4gIGNvbG9yOiAjMDAwMDAwO1xcbiAgdGV4dC1zaGFkb3c6IC0ycHggMCAjRkZGRkZGLCAwIDJweCAjRkZGRkZGLCAycHggMCAjRkZGRkZGLCAwIC0ycHggI0ZGRkZGRjtcXG59XFxuLm9sLXNjYWxlLXRleHQge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgZm9udC1zaXplOiAxNHB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgYm90dG9tOiAyNXB4O1xcbiAgY29sb3I6ICMwMDAwMDA7XFxuICB0ZXh0LXNoYWRvdzogLTJweCAwICNGRkZGRkYsIDAgMnB4ICNGRkZGRkYsIDJweCAwICNGRkZGRkYsIDAgLTJweCAjRkZGRkZGO1xcbn1cXG4ub2wtc2NhbGUtc2luZ2xlYmFyIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGhlaWdodDogMTBweDtcXG4gIHotSW5kZXg6IDk7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XFxufVxcblxcbi5vbC11bnN1cHBvcnRlZCB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG4ub2wtdmlld3BvcnQsIC5vbC11bnNlbGVjdGFibGUge1xcbiAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lO1xcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogcmdiYSgwLDAsMCwwKTtcXG59XFxuLm9sLXNlbGVjdGFibGUge1xcbiAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBkZWZhdWx0O1xcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogdGV4dDtcXG4gIC1tb3otdXNlci1zZWxlY3Q6IHRleHQ7XFxuICAtbXMtdXNlci1zZWxlY3Q6IHRleHQ7XFxuICB1c2VyLXNlbGVjdDogdGV4dDtcXG59XFxuLm9sLWdyYWJiaW5nIHtcXG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcXG4gIGN1cnNvcjogLW1vei1ncmFiYmluZztcXG4gIGN1cnNvcjogZ3JhYmJpbmc7XFxufVxcbi5vbC1ncmFiIHtcXG4gIGN1cnNvcjogbW92ZTtcXG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xcbiAgY3Vyc29yOiAtbW96LWdyYWI7XFxuICBjdXJzb3I6IGdyYWI7XFxufVxcbi5vbC1jb250cm9sIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsMC40KTtcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gIHBhZGRpbmc6IDJweDtcXG59XFxuLm9sLWNvbnRyb2w6aG92ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwwLjYpO1xcbn1cXG4ub2wtem9vbSB7XFxuICB0b3A6IC41ZW07XFxuICBsZWZ0OiAuNWVtO1xcbn1cXG4ub2wtcm90YXRlIHtcXG4gIHRvcDogLjVlbTtcXG4gIHJpZ2h0OiAuNWVtO1xcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuMjVzIGxpbmVhciwgdmlzaWJpbGl0eSAwcyBsaW5lYXI7XFxufVxcbi5vbC1yb3RhdGUub2wtaGlkZGVuIHtcXG4gIG9wYWNpdHk6IDA7XFxuICB2aXNpYmlsaXR5OiBoaWRkZW47XFxuICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4yNXMgbGluZWFyLCB2aXNpYmlsaXR5IDBzIGxpbmVhciAuMjVzO1xcbn1cXG4ub2wtem9vbS1leHRlbnQge1xcbiAgdG9wOiA0LjY0M2VtO1xcbiAgbGVmdDogLjVlbTtcXG59XFxuLm9sLWZ1bGwtc2NyZWVuIHtcXG4gIHJpZ2h0OiAuNWVtO1xcbiAgdG9wOiAuNWVtO1xcbn1cXG5cXG4ub2wtY29udHJvbCBidXR0b24ge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBtYXJnaW46IDFweDtcXG4gIHBhZGRpbmc6IDA7XFxuICBjb2xvcjogd2hpdGU7XFxuICBmb250LXNpemU6IDEuMTRlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgaGVpZ2h0OiAxLjM3NWVtO1xcbiAgd2lkdGg6IDEuMzc1ZW07XFxuICBsaW5lLWhlaWdodDogLjRlbTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCw2MCwxMzYsMC41KTtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcXG59XFxuLm9sLWNvbnRyb2wgYnV0dG9uOjotbW96LWZvY3VzLWlubmVyIHtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIHBhZGRpbmc6IDA7XFxufVxcbi5vbC16b29tLWV4dGVudCBidXR0b24ge1xcbiAgbGluZS1oZWlnaHQ6IDEuNGVtO1xcbn1cXG4ub2wtY29tcGFzcyB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxuICBmb250LXNpemU6IDEuMmVtO1xcbiAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTtcXG59XFxuLm9sLXRvdWNoIC5vbC1jb250cm9sIGJ1dHRvbiB7XFxuICBmb250LXNpemU6IDEuNWVtO1xcbn1cXG4ub2wtdG91Y2ggLm9sLXpvb20tZXh0ZW50IHtcXG4gIHRvcDogNS41ZW07XFxufVxcbi5vbC1jb250cm9sIGJ1dHRvbjpob3ZlcixcXG4ub2wtY29udHJvbCBidXR0b246Zm9jdXMge1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDYwLDEzNiwwLjcpO1xcbn1cXG4ub2wtem9vbSAub2wtem9vbS1pbiB7XFxuICBib3JkZXItcmFkaXVzOiAycHggMnB4IDAgMDtcXG59XFxuLm9sLXpvb20gLm9sLXpvb20tb3V0IHtcXG4gIGJvcmRlci1yYWRpdXM6IDAgMCAycHggMnB4O1xcbn1cXG5cXG5cXG4ub2wtYXR0cmlidXRpb24ge1xcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XFxuICBib3R0b206IC41ZW07XFxuICByaWdodDogLjVlbTtcXG4gIG1heC13aWR0aDogY2FsYygxMDAlIC0gMS4zZW0pO1xcbn1cXG5cXG4ub2wtYXR0cmlidXRpb24gdWwge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMCAuNWVtO1xcbiAgY29sb3I6ICMwMDA7XFxuICB0ZXh0LXNoYWRvdzogMCAwIDJweCAjZmZmO1xcbn1cXG4ub2wtYXR0cmlidXRpb24gbGkge1xcbiAgZGlzcGxheTogaW5saW5lO1xcbiAgbGlzdC1zdHlsZTogbm9uZTtcXG59XFxuLm9sLWF0dHJpYnV0aW9uIGxpOm5vdCg6bGFzdC1jaGlsZCk6YWZ0ZXIge1xcbiAgY29udGVudDogXFxcIiBcXFwiO1xcbn1cXG4ub2wtYXR0cmlidXRpb24gaW1nIHtcXG4gIG1heC1oZWlnaHQ6IDJlbTtcXG4gIG1heC13aWR0aDogaW5oZXJpdDtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxufVxcbi5vbC1hdHRyaWJ1dGlvbiB1bCwgLm9sLWF0dHJpYnV0aW9uIGJ1dHRvbiB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxufVxcbi5vbC1hdHRyaWJ1dGlvbi5vbC1jb2xsYXBzZWQgdWwge1xcbiAgZGlzcGxheTogbm9uZTtcXG59XFxuLm9sLWF0dHJpYnV0aW9uOm5vdCgub2wtY29sbGFwc2VkKSB7XFxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOCk7XFxufVxcbi5vbC1hdHRyaWJ1dGlvbi5vbC11bmNvbGxhcHNpYmxlIHtcXG4gIGJvdHRvbTogMDtcXG4gIHJpZ2h0OiAwO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4IDAgMDtcXG59XFxuLm9sLWF0dHJpYnV0aW9uLm9sLXVuY29sbGFwc2libGUgaW1nIHtcXG4gIG1hcmdpbi10b3A6IC0uMmVtO1xcbiAgbWF4LWhlaWdodDogMS42ZW07XFxufVxcbi5vbC1hdHRyaWJ1dGlvbi5vbC11bmNvbGxhcHNpYmxlIGJ1dHRvbiB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG5cXG4ub2wtem9vbXNsaWRlciB7XFxuICB0b3A6IDQuNWVtO1xcbiAgbGVmdDogLjVlbTtcXG4gIGhlaWdodDogMjAwcHg7XFxufVxcbi5vbC16b29tc2xpZGVyIGJ1dHRvbiB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBoZWlnaHQ6IDEwcHg7XFxufVxcblxcbi5vbC10b3VjaCAub2wtem9vbXNsaWRlciB7XFxuICB0b3A6IDUuNWVtO1xcbn1cXG5cXG4ub2wtb3ZlcnZpZXdtYXAge1xcbiAgbGVmdDogMC41ZW07XFxuICBib3R0b206IDAuNWVtO1xcbn1cXG4ub2wtb3ZlcnZpZXdtYXAub2wtdW5jb2xsYXBzaWJsZSB7XFxuICBib3R0b206IDA7XFxuICBsZWZ0OiAwO1xcbiAgYm9yZGVyLXJhZGl1czogMCA0cHggMCAwO1xcbn1cXG4ub2wtb3ZlcnZpZXdtYXAgLm9sLW92ZXJ2aWV3bWFwLW1hcCxcXG4ub2wtb3ZlcnZpZXdtYXAgYnV0dG9uIHtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG59XFxuLm9sLW92ZXJ2aWV3bWFwIC5vbC1vdmVydmlld21hcC1tYXAge1xcbiAgYm9yZGVyOiAxcHggc29saWQgIzdiOThiYztcXG4gIGhlaWdodDogMTUwcHg7XFxuICBtYXJnaW46IDJweDtcXG4gIHdpZHRoOiAxNTBweDtcXG59XFxuLm9sLW92ZXJ2aWV3bWFwOm5vdCgub2wtY29sbGFwc2VkKSBidXR0b257XFxuICBib3R0b206IDFweDtcXG4gIGxlZnQ6IDJweDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG59XFxuLm9sLW92ZXJ2aWV3bWFwLm9sLWNvbGxhcHNlZCAub2wtb3ZlcnZpZXdtYXAtbWFwLFxcbi5vbC1vdmVydmlld21hcC5vbC11bmNvbGxhcHNpYmxlIGJ1dHRvbiB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG4ub2wtb3ZlcnZpZXdtYXA6bm90KC5vbC1jb2xsYXBzZWQpIHtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTtcXG59XFxuLm9sLW92ZXJ2aWV3bWFwLWJveCB7XFxuICBib3JkZXI6IDJweCBkb3R0ZWQgcmdiYSgwLDYwLDEzNiwwLjcpO1xcbn1cXG5cXG4ub2wtb3ZlcnZpZXdtYXAgLm9sLW92ZXJ2aWV3bWFwLWJveDpob3ZlciB7XFxuICBjdXJzb3I6IG1vdmU7XFxufVxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9vbC9vbC5j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c0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSxxQkFBcUI7QUFDdkI7QUFDQTtFQUNFLGFBQWE7QUFDZjtBQUNBO0VBQ0UsaUNBQWlDO0FBQ25DO0FBQ0E7RUFDRSxTQUFTO0VBQ1QsUUFBUTtFQUNSLHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFVBQVU7RUFDVixhQUFhO0FBQ2Y7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsYUFBYTtBQUNmO0FBQ0E7RUFDRSxTQUFTO0VBQ1QsT0FBTztFQUNQLHdCQUF3QjtBQUMxQjtBQUNBOztFQUVFLHFCQUFxQjtBQUN2QjtBQUNBO0VBQ0UseUJBQXlCO0VBQ3pCLGFBQWE7RUFDYixXQUFXO0VBQ1gsWUFBWTtBQUNkO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsU0FBUztFQUNULGtCQUFrQjtBQUNwQjtBQUNBOztFQUVFLGFBQWE7QUFDZjtBQUNBO0VBQ0UsaUNBQWlDO0FBQ25DO0FBQ0E7RUFDRSxxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxZQUFZO0FBQ2RcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLm9sLWJveCB7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgYm9yZGVyOiAycHggc29saWQgYmx1ZTtcXG59XFxuXFxuLm9sLW1vdXNlLXBvc2l0aW9uIHtcXG4gIHRvcDogOHB4O1xcbiAgcmlnaHQ6IDhweDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG59XFxuXFxuLm9sLXNjYWxlLWxpbmUge1xcbiAgYmFja2dyb3VuZDogcmdiYSgwLDYwLDEzNiwwLjMpO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgYm90dG9tOiA4cHg7XFxuICBsZWZ0OiA4cHg7XFxuICBwYWRkaW5nOiAycHg7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxufVxcbi5vbC1zY2FsZS1saW5lLWlubmVyIHtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7XFxuICBib3JkZXItdG9wOiBub25lO1xcbiAgY29sb3I6ICNlZWU7XFxuICBmb250LXNpemU6IDEwcHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBtYXJnaW46IDFweDtcXG4gIHdpbGwtY2hhbmdlOiBjb250ZW50cywgd2lkdGg7XFxuICB0cmFuc2l0aW9uOiBhbGwgMC4yNXM7XFxufVxcbi5vbC1zY2FsZS1iYXIge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgYm90dG9tOiA4cHg7XFxuICBsZWZ0OiA4cHg7XFxufVxcbi5vbC1zY2FsZS1zdGVwLW1hcmtlciB7XFxuICB3aWR0aDogMXB4O1xcbiAgaGVpZ2h0OiAxNXB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDtcXG4gIGZsb2F0OiByaWdodDtcXG4gIHotSW5kZXg6IDEwO1xcbn1cXG4ub2wtc2NhbGUtc3RlcC10ZXh0IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJvdHRvbTogLTVweDtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIHotSW5kZXg6IDExO1xcbiAgY29sb3I6ICMwMDAwMDA7XFxuICB0ZXh0LXNoYWRvdzogLTJweCAwICNGRkZGRkYsIDAgMnB4ICNGRkZGRkYsIDJweCAwICNGRkZGRkYsIDAgLTJweCAjRkZGRkZGO1xcbn1cXG4ub2wtc2NhbGUtdGV4dCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBmb250LXNpemU6IDE0cHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBib3R0b206IDI1cHg7XFxuICBjb2xvcjogIzAwMDAwMDtcXG4gIHRleHQtc2hhZG93OiAtMnB4IDAgI0ZGRkZGRiwgMCAycHggI0ZGRkZGRiwgMnB4IDAgI0ZGRkZGRiwgMCAtMnB4ICNGRkZGRkY7XFxufVxcbi5vbC1zY2FsZS1zaW5nbGViYXIge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgaGVpZ2h0OiAxMHB4O1xcbiAgei1JbmRleDogOTtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcXG59XFxuXFxuLm9sLXVuc3VwcG9ydGVkIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcbi5vbC12aWV3cG9ydCwgLm9sLXVuc2VsZWN0YWJsZSB7XFxuICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7XFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG4gIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2JhKDAsMCwwLDApO1xcbn1cXG4ub2wtc2VsZWN0YWJsZSB7XFxuICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IGRlZmF1bHQ7XFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiB0ZXh0O1xcbiAgLW1vei11c2VyLXNlbGVjdDogdGV4dDtcXG4gIC1tcy11c2VyLXNlbGVjdDogdGV4dDtcXG4gIHVzZXItc2VsZWN0OiB0ZXh0O1xcbn1cXG4ub2wtZ3JhYmJpbmcge1xcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xcbiAgY3Vyc29yOiBncmFiYmluZztcXG59XFxuLm9sLWdyYWIge1xcbiAgY3Vyc29yOiBtb3ZlO1xcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XFxuICBjdXJzb3I6IC1tb3otZ3JhYjtcXG4gIGN1cnNvcjogZ3JhYjtcXG59XFxuLm9sLWNvbnRyb2wge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwwLjQpO1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgcGFkZGluZzogMnB4O1xcbn1cXG4ub2wtY29udHJvbDpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuNik7XFxufVxcbi5vbC16b29tIHtcXG4gIHRvcDogLjVlbTtcXG4gIGxlZnQ6IC41ZW07XFxufVxcbi5vbC1yb3RhdGUge1xcbiAgdG9wOiAuNWVtO1xcbiAgcmlnaHQ6IC41ZW07XFxuICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4yNXMgbGluZWFyLCB2aXNpYmlsaXR5IDBzIGxpbmVhcjtcXG59XFxuLm9sLXJvdGF0ZS5vbC1oaWRkZW4ge1xcbiAgb3BhY2l0eTogMDtcXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcXG4gIHRyYW5zaXRpb246IG9wYWNpdHkgLjI1cyBsaW5lYXIsIHZpc2liaWxpdHkgMHMgbGluZWFyIC4yNXM7XFxufVxcbi5vbC16b29tLWV4dGVudCB7XFxuICB0b3A6IDQuNjQzZW07XFxuICBsZWZ0OiAuNWVtO1xcbn1cXG4ub2wtZnVsbC1zY3JlZW4ge1xcbiAgcmlnaHQ6IC41ZW07XFxuICB0b3A6IC41ZW07XFxufVxcblxcbi5vbC1jb250cm9sIGJ1dHRvbiB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIG1hcmdpbjogMXB4O1xcbiAgcGFkZGluZzogMDtcXG4gIGNvbG9yOiB3aGl0ZTtcXG4gIGZvbnQtc2l6ZTogMS4xNGVtO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBoZWlnaHQ6IDEuMzc1ZW07XFxuICB3aWR0aDogMS4zNzVlbTtcXG4gIGxpbmUtaGVpZ2h0OiAuNGVtO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDYwLDEzNiwwLjUpO1xcbiAgYm9yZGVyOiBub25lO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbn1cXG4ub2wtY29udHJvbCBidXR0b246Oi1tb3otZm9jdXMtaW5uZXIge1xcbiAgYm9yZGVyOiBub25lO1xcbiAgcGFkZGluZzogMDtcXG59XFxuLm9sLXpvb20tZXh0ZW50IGJ1dHRvbiB7XFxuICBsaW5lLWhlaWdodDogMS40ZW07XFxufVxcbi5vbC1jb21wYXNzIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcXG4gIGZvbnQtc2l6ZTogMS4yZW07XFxuICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtO1xcbn1cXG4ub2wtdG91Y2ggLm9sLWNvbnRyb2wgYnV0dG9uIHtcXG4gIGZvbnQtc2l6ZTogMS41ZW07XFxufVxcbi5vbC10b3VjaCAub2wtem9vbS1leHRlbnQge1xcbiAgdG9wOiA1LjVlbTtcXG59XFxuLm9sLWNvbnRyb2wgYnV0dG9uOmhvdmVyLFxcbi5vbC1jb250cm9sIGJ1dHRvbjpmb2N1cyB7XFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsNjAsMTM2LDAuNyk7XFxufVxcbi5vbC16b29tIC5vbC16b29tLWluIHtcXG4gIGJvcmRlci1yYWRpdXM6IDJweCAycHggMCAwO1xcbn1cXG4ub2wtem9vbSAub2wtem9vbS1vdXQge1xcbiAgYm9yZGVyLXJhZGl1czogMCAwIDJweCAycHg7XFxufVxcblxcblxcbi5vbC1hdHRyaWJ1dGlvbiB7XFxuICB0ZXh0LWFsaWduOiByaWdodDtcXG4gIGJvdHRvbTogLjVlbTtcXG4gIHJpZ2h0OiAuNWVtO1xcbiAgbWF4LXdpZHRoOiBjYWxjKDEwMCUgLSAxLjNlbSk7XFxufVxcblxcbi5vbC1hdHRyaWJ1dGlvbiB1bCB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwIC41ZW07XFxuICBjb2xvcjogIzAwMDtcXG4gIHRleHQtc2hhZG93OiAwIDAgMnB4ICNmZmY7XFxufVxcbi5vbC1hdHRyaWJ1dGlvbiBsaSB7XFxuICBkaXNwbGF5OiBpbmxpbmU7XFxuICBsaXN0LXN0eWxlOiBub25lO1xcbn1cXG4ub2wtYXR0cmlidXRpb24gbGk6bm90KDpsYXN0LWNoaWxkKTphZnRlciB7XFxuICBjb250ZW50OiBcXFwiIFxcXCI7XFxufVxcbi5vbC1hdHRyaWJ1dGlvbiBpbWcge1xcbiAgbWF4LWhlaWdodDogMmVtO1xcbiAgbWF4LXdpZHRoOiBpbmhlcml0O1xcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXG59XFxuLm9sLWF0dHJpYnV0aW9uIHVsLCAub2wtYXR0cmlidXRpb24gYnV0dG9uIHtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG59XFxuLm9sLWF0dHJpYnV0aW9uLm9sLWNvbGxhcHNlZCB1bCB7XFxuICBkaXNwbGF5OiBub25lO1xcbn1cXG4ub2wtYXR0cmlidXRpb246bm90KC5vbC1jb2xsYXBzZWQpIHtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTtcXG59XFxuLm9sLWF0dHJpYnV0aW9uLm9sLXVuY29sbGFwc2libGUge1xcbiAgYm90dG9tOiAwO1xcbiAgcmlnaHQ6IDA7XFxuICBib3JkZXItcmFkaXVzOiA0cHggMCAwO1xcbn1cXG4ub2wtYXR0cmlidXRpb24ub2wtdW5jb2xsYXBzaWJsZSBpbWcge1xcbiAgbWFyZ2luLXRvcDogLS4yZW07XFxuICBtYXgtaGVpZ2h0OiAxLjZlbTtcXG59XFxuLm9sLWF0dHJpYnV0aW9uLm9sLXVuY29sbGFwc2libGUgYnV0dG9uIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcblxcbi5vbC16b29tc2xpZGVyIHtcXG4gIHRvcDogNC41ZW07XFxuICBsZWZ0OiAuNWVtO1xcbiAgaGVpZ2h0OiAyMDBweDtcXG59XFxuLm9sLXpvb21zbGlkZXIgYnV0dG9uIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGhlaWdodDogMTBweDtcXG59XFxuXFxuLm9sLXRvdWNoIC5vbC16b29tc2xpZGVyIHtcXG4gIHRvcDogNS41ZW07XFxufVxcblxcbi5vbC1vdmVydmlld21hcCB7XFxuICBsZWZ0OiAwLjVlbTtcXG4gIGJvdHRvbTogMC41ZW07XFxufVxcbi5vbC1vdmVydmlld21hcC5vbC11bmNvbGxhcHNpYmxlIHtcXG4gIGJvdHRvbTogMDtcXG4gIGxlZnQ6IDA7XFxuICBib3JkZXItcmFkaXVzOiAwIDRweCAwIDA7XFxufVxcbi5vbC1vdmVydmlld21hcCAub2wtb3ZlcnZpZXdtYXAtbWFwLFxcbi5vbC1vdmVydmlld21hcCBidXR0b24ge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbn1cXG4ub2wtb3ZlcnZpZXdtYXAgLm9sLW92ZXJ2aWV3bWFwLW1hcCB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjN2I5OGJjO1xcbiAgaGVpZ2h0OiAxNTBweDtcXG4gIG1hcmdpbjogMnB4O1xcbiAgd2lkdGg6IDE1MHB4O1xcbn1cXG4ub2wtb3ZlcnZpZXdtYXA6bm90KC5vbC1jb2xsYXBzZWQpIGJ1dHRvbntcXG4gIGJvdHRvbTogMXB4O1xcbiAgbGVmdDogMnB4O1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbn1cXG4ub2wtb3ZlcnZpZXdtYXAub2wtY29sbGFwc2VkIC5vbC1vdmVydmlld21hcC1tYXAsXFxuLm9sLW92ZXJ2aWV3bWFwLm9sLXVuY29sbGFwc2libGUgYnV0dG9uIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcbi5vbC1vdmVydmlld21hcDpub3QoLm9sLWNvbGxhcHNlZCkge1xcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjgpO1xcbn1cXG4ub2wtb3ZlcnZpZXdtYXAtYm94IHtcXG4gIGJvcmRlcjogMnB4IGRvdHRlZCByZ2JhKDAsNjAsMTM2LDAuNyk7XFxufVxcblxcbi5vbC1vdmVydmlld21hcCAub2wtb3ZlcnZpZXdtYXAtYm94OmhvdmVyIHtcXG4gIGN1cnNvcjogbW92ZTtcXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKSB7XG4gIHZhciBfaXRlbSA9IF9zbGljZWRUb0FycmF5KGl0ZW0sIDQpLFxuICAgICAgY29udGVudCA9IF9pdGVtWzFdLFxuICAgICAgY3NzTWFwcGluZyA9IF9pdGVtWzNdO1xuXG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufTsiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xudHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxudHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbihnbG9iYWwgPSBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLlJCdXNoID0gZmFjdG9yeSgpKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHF1aWNrc2VsZWN0KGFyciwgaywgbGVmdCwgcmlnaHQsIGNvbXBhcmUpIHtcbiAgICBxdWlja3NlbGVjdFN0ZXAoYXJyLCBrLCBsZWZ0IHx8IDAsIHJpZ2h0IHx8IChhcnIubGVuZ3RoIC0gMSksIGNvbXBhcmUgfHwgZGVmYXVsdENvbXBhcmUpO1xufVxuXG5mdW5jdGlvbiBxdWlja3NlbGVjdFN0ZXAoYXJyLCBrLCBsZWZ0LCByaWdodCwgY29tcGFyZSkge1xuXG4gICAgd2hpbGUgKHJpZ2h0ID4gbGVmdCkge1xuICAgICAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7XG4gICAgICAgICAgICB2YXIgbiA9IHJpZ2h0IC0gbGVmdCArIDE7XG4gICAgICAgICAgICB2YXIgbSA9IGsgLSBsZWZ0ICsgMTtcbiAgICAgICAgICAgIHZhciB6ID0gTWF0aC5sb2cobik7XG4gICAgICAgICAgICB2YXIgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7XG4gICAgICAgICAgICB2YXIgc2QgPSAwLjUgKiBNYXRoLnNxcnQoeiAqIHMgKiAobiAtIHMpIC8gbikgKiAobSAtIG4gLyAyIDwgMCA/IC0xIDogMSk7XG4gICAgICAgICAgICB2YXIgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7XG4gICAgICAgICAgICB2YXIgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTtcbiAgICAgICAgICAgIHF1aWNrc2VsZWN0U3RlcChhcnIsIGssIG5ld0xlZnQsIG5ld1JpZ2h0LCBjb21wYXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ID0gYXJyW2tdO1xuICAgICAgICB2YXIgaSA9IGxlZnQ7XG4gICAgICAgIHZhciBqID0gcmlnaHQ7XG5cbiAgICAgICAgc3dhcChhcnIsIGxlZnQsIGspO1xuICAgICAgICBpZiAoY29tcGFyZShhcnJbcmlnaHRdLCB0KSA+IDApIHsgc3dhcChhcnIsIGxlZnQsIHJpZ2h0KTsgfVxuXG4gICAgICAgIHdoaWxlIChpIDwgaikge1xuICAgICAgICAgICAgc3dhcChhcnIsIGksIGopO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgai0tO1xuICAgICAgICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyW2ldLCB0KSA8IDApIHsgaSsrOyB9XG4gICAgICAgICAgICB3aGlsZSAoY29tcGFyZShhcnJbal0sIHQpID4gMCkgeyBqLS07IH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb21wYXJlKGFycltsZWZ0XSwgdCkgPT09IDApIHsgc3dhcChhcnIsIGxlZnQsIGopOyB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgc3dhcChhcnIsIGosIHJpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqIDw9IGspIHsgbGVmdCA9IGogKyAxOyB9XG4gICAgICAgIGlmIChrIDw9IGopIHsgcmlnaHQgPSBqIC0gMTsgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc3dhcChhcnIsIGksIGopIHtcbiAgICB2YXIgdG1wID0gYXJyW2ldO1xuICAgIGFycltpXSA9IGFycltqXTtcbiAgICBhcnJbal0gPSB0bXA7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRDb21wYXJlKGEsIGIpIHtcbiAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDA7XG59XG5cbnZhciBSQnVzaCA9IGZ1bmN0aW9uIFJCdXNoKG1heEVudHJpZXMpIHtcbiAgICBpZiAoIG1heEVudHJpZXMgPT09IHZvaWQgMCApIG1heEVudHJpZXMgPSA5O1xuXG4gICAgLy8gbWF4IGVudHJpZXMgaW4gYSBub2RlIGlzIDkgYnkgZGVmYXVsdDsgbWluIG5vZGUgZmlsbCBpcyA0MCUgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGlzLl9tYXhFbnRyaWVzID0gTWF0aC5tYXgoNCwgbWF4RW50cmllcyk7XG4gICAgdGhpcy5fbWluRW50cmllcyA9IE1hdGgubWF4KDIsIE1hdGguY2VpbCh0aGlzLl9tYXhFbnRyaWVzICogMC40KSk7XG4gICAgdGhpcy5jbGVhcigpO1xufTtcblxuUkJ1c2gucHJvdG90eXBlLmFsbCA9IGZ1bmN0aW9uIGFsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FsbCh0aGlzLmRhdGEsIFtdKTtcbn07XG5cblJCdXNoLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiBzZWFyY2ggKGJib3gpIHtcbiAgICB2YXIgbm9kZSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICBpZiAoIWludGVyc2VjdHMoYmJveCwgbm9kZSkpIHsgcmV0dXJuIHJlc3VsdDsgfVxuXG4gICAgdmFyIHRvQkJveCA9IHRoaXMudG9CQm94O1xuICAgIHZhciBub2Rlc1RvU2VhcmNoID0gW107XG5cbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICB2YXIgY2hpbGRCQm94ID0gbm9kZS5sZWFmID8gdG9CQm94KGNoaWxkKSA6IGNoaWxkO1xuXG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0cyhiYm94LCBjaGlsZEJCb3gpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUubGVhZikgeyByZXN1bHQucHVzaChjaGlsZCk7IH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250YWlucyhiYm94LCBjaGlsZEJCb3gpKSB7IHRoaXMuX2FsbChjaGlsZCwgcmVzdWx0KTsgfVxuICAgICAgICAgICAgICAgIGVsc2UgeyBub2Rlc1RvU2VhcmNoLnB1c2goY2hpbGQpOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGVzVG9TZWFyY2gucG9wKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblJCdXNoLnByb3RvdHlwZS5jb2xsaWRlcyA9IGZ1bmN0aW9uIGNvbGxpZGVzIChiYm94KSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLmRhdGE7XG5cbiAgICBpZiAoIWludGVyc2VjdHMoYmJveCwgbm9kZSkpIHsgcmV0dXJuIGZhbHNlOyB9XG5cbiAgICB2YXIgbm9kZXNUb1NlYXJjaCA9IFtdO1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIHZhciBjaGlsZEJCb3ggPSBub2RlLmxlYWYgPyB0aGlzLnRvQkJveChjaGlsZCkgOiBjaGlsZDtcblxuICAgICAgICAgICAgaWYgKGludGVyc2VjdHMoYmJveCwgY2hpbGRCQm94KSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmxlYWYgfHwgY29udGFpbnMoYmJveCwgY2hpbGRCQm94KSkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgICAgIG5vZGVzVG9TZWFyY2gucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGVzVG9TZWFyY2gucG9wKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUkJ1c2gucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkIChkYXRhKSB7XG4gICAgaWYgKCEoZGF0YSAmJiBkYXRhLmxlbmd0aCkpIHsgcmV0dXJuIHRoaXM7IH1cblxuICAgIGlmIChkYXRhLmxlbmd0aCA8IHRoaXMuX21pbkVudHJpZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmluc2VydChkYXRhW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyByZWN1cnNpdmVseSBidWlsZCB0aGUgdHJlZSB3aXRoIHRoZSBnaXZlbiBkYXRhIGZyb20gc2NyYXRjaCB1c2luZyBPTVQgYWxnb3JpdGhtXG4gICAgdmFyIG5vZGUgPSB0aGlzLl9idWlsZChkYXRhLnNsaWNlKCksIDAsIGRhdGEubGVuZ3RoIC0gMSwgMCk7XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgLy8gc2F2ZSBhcyBpcyBpZiB0cmVlIGlzIGVtcHR5XG4gICAgICAgIHRoaXMuZGF0YSA9IG5vZGU7XG5cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5oZWlnaHQgPT09IG5vZGUuaGVpZ2h0KSB7XG4gICAgICAgIC8vIHNwbGl0IHJvb3QgaWYgdHJlZXMgaGF2ZSB0aGUgc2FtZSBoZWlnaHRcbiAgICAgICAgdGhpcy5fc3BsaXRSb290KHRoaXMuZGF0YSwgbm9kZSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5kYXRhLmhlaWdodCA8IG5vZGUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAvLyBzd2FwIHRyZWVzIGlmIGluc2VydGVkIG9uZSBpcyBiaWdnZXJcbiAgICAgICAgICAgIHZhciB0bXBOb2RlID0gdGhpcy5kYXRhO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbm9kZTtcbiAgICAgICAgICAgIG5vZGUgPSB0bXBOb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5zZXJ0IHRoZSBzbWFsbCB0cmVlIGludG8gdGhlIGxhcmdlIHRyZWUgYXQgYXBwcm9wcmlhdGUgbGV2ZWxcbiAgICAgICAgdGhpcy5faW5zZXJ0KG5vZGUsIHRoaXMuZGF0YS5oZWlnaHQgLSBub2RlLmhlaWdodCAtIDEsIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuUkJ1c2gucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIGluc2VydCAoaXRlbSkge1xuICAgIGlmIChpdGVtKSB7IHRoaXMuX2luc2VydChpdGVtLCB0aGlzLmRhdGEuaGVpZ2h0IC0gMSk7IH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5cblJCdXNoLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHtcbiAgICB0aGlzLmRhdGEgPSBjcmVhdGVOb2RlKFtdKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cblJCdXNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUgKGl0ZW0sIGVxdWFsc0ZuKSB7XG4gICAgaWYgKCFpdGVtKSB7IHJldHVybiB0aGlzOyB9XG5cbiAgICB2YXIgbm9kZSA9IHRoaXMuZGF0YTtcbiAgICB2YXIgYmJveCA9IHRoaXMudG9CQm94KGl0ZW0pO1xuICAgIHZhciBwYXRoID0gW107XG4gICAgdmFyIGluZGV4ZXMgPSBbXTtcbiAgICB2YXIgaSwgcGFyZW50LCBnb2luZ1VwO1xuXG4gICAgLy8gZGVwdGgtZmlyc3QgaXRlcmF0aXZlIHRyZWUgdHJhdmVyc2FsXG4gICAgd2hpbGUgKG5vZGUgfHwgcGF0aC5sZW5ndGgpIHtcblxuICAgICAgICBpZiAoIW5vZGUpIHsgLy8gZ28gdXBcbiAgICAgICAgICAgIG5vZGUgPSBwYXRoLnBvcCgpO1xuICAgICAgICAgICAgcGFyZW50ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaSA9IGluZGV4ZXMucG9wKCk7XG4gICAgICAgICAgICBnb2luZ1VwID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChub2RlLmxlYWYpIHsgLy8gY2hlY2sgY3VycmVudCBub2RlXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBmaW5kSXRlbShpdGVtLCBub2RlLmNoaWxkcmVuLCBlcXVhbHNGbik7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBpdGVtIGZvdW5kLCByZW1vdmUgdGhlIGl0ZW0gYW5kIGNvbmRlbnNlIHRyZWUgdXB3YXJkc1xuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICBwYXRoLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29uZGVuc2UocGF0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdvaW5nVXAgJiYgIW5vZGUubGVhZiAmJiBjb250YWlucyhub2RlLCBiYm94KSkgeyAvLyBnbyBkb3duXG4gICAgICAgICAgICBwYXRoLnB1c2gobm9kZSk7XG4gICAgICAgICAgICBpbmRleGVzLnB1c2goaSk7XG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgIHBhcmVudCA9IG5vZGU7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5jaGlsZHJlblswXTtcblxuICAgICAgICB9IGVsc2UgaWYgKHBhcmVudCkgeyAvLyBnbyByaWdodFxuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgbm9kZSA9IHBhcmVudC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGdvaW5nVXAgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2UgeyBub2RlID0gbnVsbDsgfSAvLyBub3RoaW5nIGZvdW5kXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5SQnVzaC5wcm90b3R5cGUudG9CQm94ID0gZnVuY3Rpb24gdG9CQm94IChpdGVtKSB7IHJldHVybiBpdGVtOyB9O1xuXG5SQnVzaC5wcm90b3R5cGUuY29tcGFyZU1pblggPSBmdW5jdGlvbiBjb21wYXJlTWluWCAoYSwgYikgeyByZXR1cm4gYS5taW5YIC0gYi5taW5YOyB9O1xuUkJ1c2gucHJvdG90eXBlLmNvbXBhcmVNaW5ZID0gZnVuY3Rpb24gY29tcGFyZU1pblkgKGEsIGIpIHsgcmV0dXJuIGEubWluWSAtIGIubWluWTsgfTtcblxuUkJ1c2gucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7IHJldHVybiB0aGlzLmRhdGE7IH07XG5cblJCdXNoLnByb3RvdHlwZS5mcm9tSlNPTiA9IGZ1bmN0aW9uIGZyb21KU09OIChkYXRhKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cblJCdXNoLnByb3RvdHlwZS5fYWxsID0gZnVuY3Rpb24gX2FsbCAobm9kZSwgcmVzdWx0KSB7XG4gICAgdmFyIG5vZGVzVG9TZWFyY2ggPSBbXTtcbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5sZWFmKSB7IHJlc3VsdC5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZS5jaGlsZHJlbik7IH1cbiAgICAgICAgZWxzZSB7IG5vZGVzVG9TZWFyY2gucHVzaC5hcHBseShub2Rlc1RvU2VhcmNoLCBub2RlLmNoaWxkcmVuKTsgfVxuXG4gICAgICAgIG5vZGUgPSBub2Rlc1RvU2VhcmNoLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuUkJ1c2gucHJvdG90eXBlLl9idWlsZCA9IGZ1bmN0aW9uIF9idWlsZCAoaXRlbXMsIGxlZnQsIHJpZ2h0LCBoZWlnaHQpIHtcblxuICAgIHZhciBOID0gcmlnaHQgLSBsZWZ0ICsgMTtcbiAgICB2YXIgTSA9IHRoaXMuX21heEVudHJpZXM7XG4gICAgdmFyIG5vZGU7XG5cbiAgICBpZiAoTiA8PSBNKSB7XG4gICAgICAgIC8vIHJlYWNoZWQgbGVhZiBsZXZlbDsgcmV0dXJuIGxlYWZcbiAgICAgICAgbm9kZSA9IGNyZWF0ZU5vZGUoaXRlbXMuc2xpY2UobGVmdCwgcmlnaHQgKyAxKSk7XG4gICAgICAgIGNhbGNCQm94KG5vZGUsIHRoaXMudG9CQm94KTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgaWYgKCFoZWlnaHQpIHtcbiAgICAgICAgLy8gdGFyZ2V0IGhlaWdodCBvZiB0aGUgYnVsay1sb2FkZWQgdHJlZVxuICAgICAgICBoZWlnaHQgPSBNYXRoLmNlaWwoTWF0aC5sb2coTikgLyBNYXRoLmxvZyhNKSk7XG5cbiAgICAgICAgLy8gdGFyZ2V0IG51bWJlciBvZiByb290IGVudHJpZXMgdG8gbWF4aW1pemUgc3RvcmFnZSB1dGlsaXphdGlvblxuICAgICAgICBNID0gTWF0aC5jZWlsKE4gLyBNYXRoLnBvdyhNLCBoZWlnaHQgLSAxKSk7XG4gICAgfVxuXG4gICAgbm9kZSA9IGNyZWF0ZU5vZGUoW10pO1xuICAgIG5vZGUubGVhZiA9IGZhbHNlO1xuICAgIG5vZGUuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgLy8gc3BsaXQgdGhlIGl0ZW1zIGludG8gTSBtb3N0bHkgc3F1YXJlIHRpbGVzXG5cbiAgICB2YXIgTjIgPSBNYXRoLmNlaWwoTiAvIE0pO1xuICAgIHZhciBOMSA9IE4yICogTWF0aC5jZWlsKE1hdGguc3FydChNKSk7XG5cbiAgICBtdWx0aVNlbGVjdChpdGVtcywgbGVmdCwgcmlnaHQsIE4xLCB0aGlzLmNvbXBhcmVNaW5YKTtcblxuICAgIGZvciAodmFyIGkgPSBsZWZ0OyBpIDw9IHJpZ2h0OyBpICs9IE4xKSB7XG5cbiAgICAgICAgdmFyIHJpZ2h0MiA9IE1hdGgubWluKGkgKyBOMSAtIDEsIHJpZ2h0KTtcblxuICAgICAgICBtdWx0aVNlbGVjdChpdGVtcywgaSwgcmlnaHQyLCBOMiwgdGhpcy5jb21wYXJlTWluWSk7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IGk7IGogPD0gcmlnaHQyOyBqICs9IE4yKSB7XG5cbiAgICAgICAgICAgIHZhciByaWdodDMgPSBNYXRoLm1pbihqICsgTjIgLSAxLCByaWdodDIpO1xuXG4gICAgICAgICAgICAvLyBwYWNrIGVhY2ggZW50cnkgcmVjdXJzaXZlbHlcbiAgICAgICAgICAgIG5vZGUuY2hpbGRyZW4ucHVzaCh0aGlzLl9idWlsZChpdGVtcywgaiwgcmlnaHQzLCBoZWlnaHQgLSAxKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjYWxjQkJveChub2RlLCB0aGlzLnRvQkJveCk7XG5cbiAgICByZXR1cm4gbm9kZTtcbn07XG5cblJCdXNoLnByb3RvdHlwZS5fY2hvb3NlU3VidHJlZSA9IGZ1bmN0aW9uIF9jaG9vc2VTdWJ0cmVlIChiYm94LCBub2RlLCBsZXZlbCwgcGF0aCkge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHBhdGgucHVzaChub2RlKTtcblxuICAgICAgICBpZiAobm9kZS5sZWFmIHx8IHBhdGgubGVuZ3RoIC0gMSA9PT0gbGV2ZWwpIHsgYnJlYWs7IH1cblxuICAgICAgICB2YXIgbWluQXJlYSA9IEluZmluaXR5O1xuICAgICAgICB2YXIgbWluRW5sYXJnZW1lbnQgPSBJbmZpbml0eTtcbiAgICAgICAgdmFyIHRhcmdldE5vZGUgPSAodm9pZCAwKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICB2YXIgYXJlYSA9IGJib3hBcmVhKGNoaWxkKTtcbiAgICAgICAgICAgIHZhciBlbmxhcmdlbWVudCA9IGVubGFyZ2VkQXJlYShiYm94LCBjaGlsZCkgLSBhcmVhO1xuXG4gICAgICAgICAgICAvLyBjaG9vc2UgZW50cnkgd2l0aCB0aGUgbGVhc3QgYXJlYSBlbmxhcmdlbWVudFxuICAgICAgICAgICAgaWYgKGVubGFyZ2VtZW50IDwgbWluRW5sYXJnZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBtaW5FbmxhcmdlbWVudCA9IGVubGFyZ2VtZW50O1xuICAgICAgICAgICAgICAgIG1pbkFyZWEgPSBhcmVhIDwgbWluQXJlYSA/IGFyZWEgOiBtaW5BcmVhO1xuICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSBjaGlsZDtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChlbmxhcmdlbWVudCA9PT0gbWluRW5sYXJnZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgY2hvb3NlIG9uZSB3aXRoIHRoZSBzbWFsbGVzdCBhcmVhXG4gICAgICAgICAgICAgICAgaWYgKGFyZWEgPCBtaW5BcmVhKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkFyZWEgPSBhcmVhO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbm9kZSA9IHRhcmdldE5vZGUgfHwgbm9kZS5jaGlsZHJlblswXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbn07XG5cblJCdXNoLnByb3RvdHlwZS5faW5zZXJ0ID0gZnVuY3Rpb24gX2luc2VydCAoaXRlbSwgbGV2ZWwsIGlzTm9kZSkge1xuICAgIHZhciBiYm94ID0gaXNOb2RlID8gaXRlbSA6IHRoaXMudG9CQm94KGl0ZW0pO1xuICAgIHZhciBpbnNlcnRQYXRoID0gW107XG5cbiAgICAvLyBmaW5kIHRoZSBiZXN0IG5vZGUgZm9yIGFjY29tbW9kYXRpbmcgdGhlIGl0ZW0sIHNhdmluZyBhbGwgbm9kZXMgYWxvbmcgdGhlIHBhdGggdG9vXG4gICAgdmFyIG5vZGUgPSB0aGlzLl9jaG9vc2VTdWJ0cmVlKGJib3gsIHRoaXMuZGF0YSwgbGV2ZWwsIGluc2VydFBhdGgpO1xuXG4gICAgLy8gcHV0IHRoZSBpdGVtIGludG8gdGhlIG5vZGVcbiAgICBub2RlLmNoaWxkcmVuLnB1c2goaXRlbSk7XG4gICAgZXh0ZW5kKG5vZGUsIGJib3gpO1xuXG4gICAgLy8gc3BsaXQgb24gbm9kZSBvdmVyZmxvdzsgcHJvcGFnYXRlIHVwd2FyZHMgaWYgbmVjZXNzYXJ5XG4gICAgd2hpbGUgKGxldmVsID49IDApIHtcbiAgICAgICAgaWYgKGluc2VydFBhdGhbbGV2ZWxdLmNoaWxkcmVuLmxlbmd0aCA+IHRoaXMuX21heEVudHJpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX3NwbGl0KGluc2VydFBhdGgsIGxldmVsKTtcbiAgICAgICAgICAgIGxldmVsLS07XG4gICAgICAgIH0gZWxzZSB7IGJyZWFrOyB9XG4gICAgfVxuXG4gICAgLy8gYWRqdXN0IGJib3hlcyBhbG9uZyB0aGUgaW5zZXJ0aW9uIHBhdGhcbiAgICB0aGlzLl9hZGp1c3RQYXJlbnRCQm94ZXMoYmJveCwgaW5zZXJ0UGF0aCwgbGV2ZWwpO1xufTtcblxuLy8gc3BsaXQgb3ZlcmZsb3dlZCBub2RlIGludG8gdHdvXG5SQnVzaC5wcm90b3R5cGUuX3NwbGl0ID0gZnVuY3Rpb24gX3NwbGl0IChpbnNlcnRQYXRoLCBsZXZlbCkge1xuICAgIHZhciBub2RlID0gaW5zZXJ0UGF0aFtsZXZlbF07XG4gICAgdmFyIE0gPSBub2RlLmNoaWxkcmVuLmxlbmd0aDtcbiAgICB2YXIgbSA9IHRoaXMuX21pbkVudHJpZXM7XG5cbiAgICB0aGlzLl9jaG9vc2VTcGxpdEF4aXMobm9kZSwgbSwgTSk7XG5cbiAgICB2YXIgc3BsaXRJbmRleCA9IHRoaXMuX2Nob29zZVNwbGl0SW5kZXgobm9kZSwgbSwgTSk7XG5cbiAgICB2YXIgbmV3Tm9kZSA9IGNyZWF0ZU5vZGUobm9kZS5jaGlsZHJlbi5zcGxpY2Uoc3BsaXRJbmRleCwgbm9kZS5jaGlsZHJlbi5sZW5ndGggLSBzcGxpdEluZGV4KSk7XG4gICAgbmV3Tm9kZS5oZWlnaHQgPSBub2RlLmhlaWdodDtcbiAgICBuZXdOb2RlLmxlYWYgPSBub2RlLmxlYWY7XG5cbiAgICBjYWxjQkJveChub2RlLCB0aGlzLnRvQkJveCk7XG4gICAgY2FsY0JCb3gobmV3Tm9kZSwgdGhpcy50b0JCb3gpO1xuXG4gICAgaWYgKGxldmVsKSB7IGluc2VydFBhdGhbbGV2ZWwgLSAxXS5jaGlsZHJlbi5wdXNoKG5ld05vZGUpOyB9XG4gICAgZWxzZSB7IHRoaXMuX3NwbGl0Um9vdChub2RlLCBuZXdOb2RlKTsgfVxufTtcblxuUkJ1c2gucHJvdG90eXBlLl9zcGxpdFJvb3QgPSBmdW5jdGlvbiBfc3BsaXRSb290IChub2RlLCBuZXdOb2RlKSB7XG4gICAgLy8gc3BsaXQgcm9vdCBub2RlXG4gICAgdGhpcy5kYXRhID0gY3JlYXRlTm9kZShbbm9kZSwgbmV3Tm9kZV0pO1xuICAgIHRoaXMuZGF0YS5oZWlnaHQgPSBub2RlLmhlaWdodCArIDE7XG4gICAgdGhpcy5kYXRhLmxlYWYgPSBmYWxzZTtcbiAgICBjYWxjQkJveCh0aGlzLmRhdGEsIHRoaXMudG9CQm94KTtcbn07XG5cblJCdXNoLnByb3RvdHlwZS5fY2hvb3NlU3BsaXRJbmRleCA9IGZ1bmN0aW9uIF9jaG9vc2VTcGxpdEluZGV4IChub2RlLCBtLCBNKSB7XG4gICAgdmFyIGluZGV4O1xuICAgIHZhciBtaW5PdmVybGFwID0gSW5maW5pdHk7XG4gICAgdmFyIG1pbkFyZWEgPSBJbmZpbml0eTtcblxuICAgIGZvciAodmFyIGkgPSBtOyBpIDw9IE0gLSBtOyBpKyspIHtcbiAgICAgICAgdmFyIGJib3gxID0gZGlzdEJCb3gobm9kZSwgMCwgaSwgdGhpcy50b0JCb3gpO1xuICAgICAgICB2YXIgYmJveDIgPSBkaXN0QkJveChub2RlLCBpLCBNLCB0aGlzLnRvQkJveCk7XG5cbiAgICAgICAgdmFyIG92ZXJsYXAgPSBpbnRlcnNlY3Rpb25BcmVhKGJib3gxLCBiYm94Mik7XG4gICAgICAgIHZhciBhcmVhID0gYmJveEFyZWEoYmJveDEpICsgYmJveEFyZWEoYmJveDIpO1xuXG4gICAgICAgIC8vIGNob29zZSBkaXN0cmlidXRpb24gd2l0aCBtaW5pbXVtIG92ZXJsYXBcbiAgICAgICAgaWYgKG92ZXJsYXAgPCBtaW5PdmVybGFwKSB7XG4gICAgICAgICAgICBtaW5PdmVybGFwID0gb3ZlcmxhcDtcbiAgICAgICAgICAgIGluZGV4ID0gaTtcblxuICAgICAgICAgICAgbWluQXJlYSA9IGFyZWEgPCBtaW5BcmVhID8gYXJlYSA6IG1pbkFyZWE7XG5cbiAgICAgICAgfSBlbHNlIGlmIChvdmVybGFwID09PSBtaW5PdmVybGFwKSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgY2hvb3NlIGRpc3RyaWJ1dGlvbiB3aXRoIG1pbmltdW0gYXJlYVxuICAgICAgICAgICAgaWYgKGFyZWEgPCBtaW5BcmVhKSB7XG4gICAgICAgICAgICAgICAgbWluQXJlYSA9IGFyZWE7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4IHx8IE0gLSBtO1xufTtcblxuLy8gc29ydHMgbm9kZSBjaGlsZHJlbiBieSB0aGUgYmVzdCBheGlzIGZvciBzcGxpdFxuUkJ1c2gucHJvdG90eXBlLl9jaG9vc2VTcGxpdEF4aXMgPSBmdW5jdGlvbiBfY2hvb3NlU3BsaXRBeGlzIChub2RlLCBtLCBNKSB7XG4gICAgdmFyIGNvbXBhcmVNaW5YID0gbm9kZS5sZWFmID8gdGhpcy5jb21wYXJlTWluWCA6IGNvbXBhcmVOb2RlTWluWDtcbiAgICB2YXIgY29tcGFyZU1pblkgPSBub2RlLmxlYWYgPyB0aGlzLmNvbXBhcmVNaW5ZIDogY29tcGFyZU5vZGVNaW5ZO1xuICAgIHZhciB4TWFyZ2luID0gdGhpcy5fYWxsRGlzdE1hcmdpbihub2RlLCBtLCBNLCBjb21wYXJlTWluWCk7XG4gICAgdmFyIHlNYXJnaW4gPSB0aGlzLl9hbGxEaXN0TWFyZ2luKG5vZGUsIG0sIE0sIGNvbXBhcmVNaW5ZKTtcblxuICAgIC8vIGlmIHRvdGFsIGRpc3RyaWJ1dGlvbnMgbWFyZ2luIHZhbHVlIGlzIG1pbmltYWwgZm9yIHgsIHNvcnQgYnkgbWluWCxcbiAgICAvLyBvdGhlcndpc2UgaXQncyBhbHJlYWR5IHNvcnRlZCBieSBtaW5ZXG4gICAgaWYgKHhNYXJnaW4gPCB5TWFyZ2luKSB7IG5vZGUuY2hpbGRyZW4uc29ydChjb21wYXJlTWluWCk7IH1cbn07XG5cbi8vIHRvdGFsIG1hcmdpbiBvZiBhbGwgcG9zc2libGUgc3BsaXQgZGlzdHJpYnV0aW9ucyB3aGVyZSBlYWNoIG5vZGUgaXMgYXQgbGVhc3QgbSBmdWxsXG5SQnVzaC5wcm90b3R5cGUuX2FsbERpc3RNYXJnaW4gPSBmdW5jdGlvbiBfYWxsRGlzdE1hcmdpbiAobm9kZSwgbSwgTSwgY29tcGFyZSkge1xuICAgIG5vZGUuY2hpbGRyZW4uc29ydChjb21wYXJlKTtcblxuICAgIHZhciB0b0JCb3ggPSB0aGlzLnRvQkJveDtcbiAgICB2YXIgbGVmdEJCb3ggPSBkaXN0QkJveChub2RlLCAwLCBtLCB0b0JCb3gpO1xuICAgIHZhciByaWdodEJCb3ggPSBkaXN0QkJveChub2RlLCBNIC0gbSwgTSwgdG9CQm94KTtcbiAgICB2YXIgbWFyZ2luID0gYmJveE1hcmdpbihsZWZ0QkJveCkgKyBiYm94TWFyZ2luKHJpZ2h0QkJveCk7XG5cbiAgICBmb3IgKHZhciBpID0gbTsgaSA8IE0gLSBtOyBpKyspIHtcbiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgZXh0ZW5kKGxlZnRCQm94LCBub2RlLmxlYWYgPyB0b0JCb3goY2hpbGQpIDogY2hpbGQpO1xuICAgICAgICBtYXJnaW4gKz0gYmJveE1hcmdpbihsZWZ0QkJveCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSQxID0gTSAtIG0gLSAxOyBpJDEgPj0gbTsgaSQxLS0pIHtcbiAgICAgICAgdmFyIGNoaWxkJDEgPSBub2RlLmNoaWxkcmVuW2kkMV07XG4gICAgICAgIGV4dGVuZChyaWdodEJCb3gsIG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCQxKSA6IGNoaWxkJDEpO1xuICAgICAgICBtYXJnaW4gKz0gYmJveE1hcmdpbihyaWdodEJCb3gpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXJnaW47XG59O1xuXG5SQnVzaC5wcm90b3R5cGUuX2FkanVzdFBhcmVudEJCb3hlcyA9IGZ1bmN0aW9uIF9hZGp1c3RQYXJlbnRCQm94ZXMgKGJib3gsIHBhdGgsIGxldmVsKSB7XG4gICAgLy8gYWRqdXN0IGJib3hlcyBhbG9uZyB0aGUgZ2l2ZW4gdHJlZSBwYXRoXG4gICAgZm9yICh2YXIgaSA9IGxldmVsOyBpID49IDA7IGktLSkge1xuICAgICAgICBleHRlbmQocGF0aFtpXSwgYmJveCk7XG4gICAgfVxufTtcblxuUkJ1c2gucHJvdG90eXBlLl9jb25kZW5zZSA9IGZ1bmN0aW9uIF9jb25kZW5zZSAocGF0aCkge1xuICAgIC8vIGdvIHRocm91Z2ggdGhlIHBhdGgsIHJlbW92aW5nIGVtcHR5IG5vZGVzIGFuZCB1cGRhdGluZyBiYm94ZXNcbiAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxLCBzaWJsaW5ncyA9ICh2b2lkIDApOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAocGF0aFtpXS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgIHNpYmxpbmdzID0gcGF0aFtpIC0gMV0uY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgc2libGluZ3Muc3BsaWNlKHNpYmxpbmdzLmluZGV4T2YocGF0aFtpXSksIDEpO1xuXG4gICAgICAgICAgICB9IGVsc2UgeyB0aGlzLmNsZWFyKCk7IH1cblxuICAgICAgICB9IGVsc2UgeyBjYWxjQkJveChwYXRoW2ldLCB0aGlzLnRvQkJveCk7IH1cbiAgICB9XG59O1xuXG5mdW5jdGlvbiBmaW5kSXRlbShpdGVtLCBpdGVtcywgZXF1YWxzRm4pIHtcbiAgICBpZiAoIWVxdWFsc0ZuKSB7IHJldHVybiBpdGVtcy5pbmRleE9mKGl0ZW0pOyB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChlcXVhbHNGbihpdGVtLCBpdGVtc1tpXSkpIHsgcmV0dXJuIGk7IH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuXG4vLyBjYWxjdWxhdGUgbm9kZSdzIGJib3ggZnJvbSBiYm94ZXMgb2YgaXRzIGNoaWxkcmVuXG5mdW5jdGlvbiBjYWxjQkJveChub2RlLCB0b0JCb3gpIHtcbiAgICBkaXN0QkJveChub2RlLCAwLCBub2RlLmNoaWxkcmVuLmxlbmd0aCwgdG9CQm94LCBub2RlKTtcbn1cblxuLy8gbWluIGJvdW5kaW5nIHJlY3RhbmdsZSBvZiBub2RlIGNoaWxkcmVuIGZyb20gayB0byBwLTFcbmZ1bmN0aW9uIGRpc3RCQm94KG5vZGUsIGssIHAsIHRvQkJveCwgZGVzdE5vZGUpIHtcbiAgICBpZiAoIWRlc3ROb2RlKSB7IGRlc3ROb2RlID0gY3JlYXRlTm9kZShudWxsKTsgfVxuICAgIGRlc3ROb2RlLm1pblggPSBJbmZpbml0eTtcbiAgICBkZXN0Tm9kZS5taW5ZID0gSW5maW5pdHk7XG4gICAgZGVzdE5vZGUubWF4WCA9IC1JbmZpbml0eTtcbiAgICBkZXN0Tm9kZS5tYXhZID0gLUluZmluaXR5O1xuXG4gICAgZm9yICh2YXIgaSA9IGs7IGkgPCBwOyBpKyspIHtcbiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgZXh0ZW5kKGRlc3ROb2RlLCBub2RlLmxlYWYgPyB0b0JCb3goY2hpbGQpIDogY2hpbGQpO1xuICAgIH1cblxuICAgIHJldHVybiBkZXN0Tm9kZTtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kKGEsIGIpIHtcbiAgICBhLm1pblggPSBNYXRoLm1pbihhLm1pblgsIGIubWluWCk7XG4gICAgYS5taW5ZID0gTWF0aC5taW4oYS5taW5ZLCBiLm1pblkpO1xuICAgIGEubWF4WCA9IE1hdGgubWF4KGEubWF4WCwgYi5tYXhYKTtcbiAgICBhLm1heFkgPSBNYXRoLm1heChhLm1heFksIGIubWF4WSk7XG4gICAgcmV0dXJuIGE7XG59XG5cbmZ1bmN0aW9uIGNvbXBhcmVOb2RlTWluWChhLCBiKSB7IHJldHVybiBhLm1pblggLSBiLm1pblg7IH1cbmZ1bmN0aW9uIGNvbXBhcmVOb2RlTWluWShhLCBiKSB7IHJldHVybiBhLm1pblkgLSBiLm1pblk7IH1cblxuZnVuY3Rpb24gYmJveEFyZWEoYSkgICB7IHJldHVybiAoYS5tYXhYIC0gYS5taW5YKSAqIChhLm1heFkgLSBhLm1pblkpOyB9XG5mdW5jdGlvbiBiYm94TWFyZ2luKGEpIHsgcmV0dXJuIChhLm1heFggLSBhLm1pblgpICsgKGEubWF4WSAtIGEubWluWSk7IH1cblxuZnVuY3Rpb24gZW5sYXJnZWRBcmVhKGEsIGIpIHtcbiAgICByZXR1cm4gKE1hdGgubWF4KGIubWF4WCwgYS5tYXhYKSAtIE1hdGgubWluKGIubWluWCwgYS5taW5YKSkgKlxuICAgICAgICAgICAoTWF0aC5tYXgoYi5tYXhZLCBhLm1heFkpIC0gTWF0aC5taW4oYi5taW5ZLCBhLm1pblkpKTtcbn1cblxuZnVuY3Rpb24gaW50ZXJzZWN0aW9uQXJlYShhLCBiKSB7XG4gICAgdmFyIG1pblggPSBNYXRoLm1heChhLm1pblgsIGIubWluWCk7XG4gICAgdmFyIG1pblkgPSBNYXRoLm1heChhLm1pblksIGIubWluWSk7XG4gICAgdmFyIG1heFggPSBNYXRoLm1pbihhLm1heFgsIGIubWF4WCk7XG4gICAgdmFyIG1heFkgPSBNYXRoLm1pbihhLm1heFksIGIubWF4WSk7XG5cbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgbWF4WCAtIG1pblgpICpcbiAgICAgICAgICAgTWF0aC5tYXgoMCwgbWF4WSAtIG1pblkpO1xufVxuXG5mdW5jdGlvbiBjb250YWlucyhhLCBiKSB7XG4gICAgcmV0dXJuIGEubWluWCA8PSBiLm1pblggJiZcbiAgICAgICAgICAgYS5taW5ZIDw9IGIubWluWSAmJlxuICAgICAgICAgICBiLm1heFggPD0gYS5tYXhYICYmXG4gICAgICAgICAgIGIubWF4WSA8PSBhLm1heFk7XG59XG5cbmZ1bmN0aW9uIGludGVyc2VjdHMoYSwgYikge1xuICAgIHJldHVybiBiLm1pblggPD0gYS5tYXhYICYmXG4gICAgICAgICAgIGIubWluWSA8PSBhLm1heFkgJiZcbiAgICAgICAgICAgYi5tYXhYID49IGEubWluWCAmJlxuICAgICAgICAgICBiLm1heFkgPj0gYS5taW5ZO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOb2RlKGNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuLFxuICAgICAgICBoZWlnaHQ6IDEsXG4gICAgICAgIGxlYWY6IHRydWUsXG4gICAgICAgIG1pblg6IEluZmluaXR5LFxuICAgICAgICBtaW5ZOiBJbmZpbml0eSxcbiAgICAgICAgbWF4WDogLUluZmluaXR5LFxuICAgICAgICBtYXhZOiAtSW5maW5pdHlcbiAgICB9O1xufVxuXG4vLyBzb3J0IGFuIGFycmF5IHNvIHRoYXQgaXRlbXMgY29tZSBpbiBncm91cHMgb2YgbiB1bnNvcnRlZCBpdGVtcywgd2l0aCBncm91cHMgc29ydGVkIGJldHdlZW4gZWFjaCBvdGhlcjtcbi8vIGNvbWJpbmVzIHNlbGVjdGlvbiBhbGdvcml0aG0gd2l0aCBiaW5hcnkgZGl2aWRlICYgY29ucXVlciBhcHByb2FjaFxuXG5mdW5jdGlvbiBtdWx0aVNlbGVjdChhcnIsIGxlZnQsIHJpZ2h0LCBuLCBjb21wYXJlKSB7XG4gICAgdmFyIHN0YWNrID0gW2xlZnQsIHJpZ2h0XTtcblxuICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgcmlnaHQgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgbGVmdCA9IHN0YWNrLnBvcCgpO1xuXG4gICAgICAgIGlmIChyaWdodCAtIGxlZnQgPD0gbikgeyBjb250aW51ZTsgfVxuXG4gICAgICAgIHZhciBtaWQgPSBsZWZ0ICsgTWF0aC5jZWlsKChyaWdodCAtIGxlZnQpIC8gbiAvIDIpICogbjtcbiAgICAgICAgcXVpY2tzZWxlY3QoYXJyLCBtaWQsIGxlZnQsIHJpZ2h0LCBjb21wYXJlKTtcblxuICAgICAgICBzdGFjay5wdXNoKGxlZnQsIG1pZCwgbWlkLCByaWdodCk7XG4gICAgfVxufVxuXG5yZXR1cm4gUkJ1c2g7XG5cbn0pKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiaW1wb3J0IGFwaSBmcm9tIFwiIS4uL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICAgICAgICBpbXBvcnQgY29udGVudCBmcm9tIFwiISEuLi9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vb2wuY3NzXCI7XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY29udGVudC5sb2NhbHMgfHwge307IiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlUeXBlXG4gKi9cbi8qKlxuICogVGhlIGdlb21ldHJ5IHR5cGUuIE9uZSBvZiBgJ1BvaW50J2AsIGAnTGluZVN0cmluZydgLCBgJ0xpbmVhclJpbmcnYCxcbiAqIGAnUG9seWdvbidgLCBgJ011bHRpUG9pbnQnYCwgYCdNdWx0aUxpbmVTdHJpbmcnYCwgYCdNdWx0aVBvbHlnb24nYCxcbiAqIGAnR2VvbWV0cnlDb2xsZWN0aW9uJ2AsIGAnQ2lyY2xlJ2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUE9JTlQ6ICdQb2ludCcsXG4gICAgTElORV9TVFJJTkc6ICdMaW5lU3RyaW5nJyxcbiAgICBMSU5FQVJfUklORzogJ0xpbmVhclJpbmcnLFxuICAgIFBPTFlHT046ICdQb2x5Z29uJyxcbiAgICBNVUxUSV9QT0lOVDogJ011bHRpUG9pbnQnLFxuICAgIE1VTFRJX0xJTkVfU1RSSU5HOiAnTXVsdGlMaW5lU3RyaW5nJyxcbiAgICBNVUxUSV9QT0xZR09OOiAnTXVsdGlQb2x5Z29uJyxcbiAgICBHRU9NRVRSWV9DT0xMRUNUSU9OOiAnR2VvbWV0cnlDb2xsZWN0aW9uJyxcbiAgICBDSVJDTEU6ICdDaXJjbGUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0V2ZW50XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU3RyaXBwZWQgZG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1pbnRlcmZhY2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHByb3ZpZGVzIGB0eXBlYCBhbmQgYHRhcmdldGAgcHJvcGVydGllcywgYW5kXG4gKiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBtZXRob2RzLiBJdCBpcyBtZWFudCBhcyBiYXNlIGNsYXNzXG4gKiBmb3IgaGlnaGVyIGxldmVsIGV2ZW50cyBkZWZpbmVkIGluIHRoZSBsaWJyYXJ5LCBhbmQgd29ya3Mgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvVGFyZ2V0flRhcmdldH0uXG4gKi9cbnZhciBCYXNlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlRXZlbnQodHlwZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBldmVudCB0eXBlLlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV2ZW50IHRhcmdldC5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VFdmVudDtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihldnQpIHtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuZXhwb3J0IGRlZmF1bHQgQmFzZUV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdEV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHByb3BlcnR5IGlzIGNoYW5nZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9PYmplY3QuT2JqZWN0RXZlbnQjcHJvcGVydHljaGFuZ2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUFJPUEVSVFlDSEFOR0U6ICdwcm9wZXJ0eWNoYW5nZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9EaXNwb3NhYmxlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogT2JqZWN0cyB0aGF0IG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgdGhlbXNlbHZlcy5cbiAqL1xudmFyIERpc3Bvc2FibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGlzcG9zYWJsZSgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvYmplY3QgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUludGVybmFsKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEV4dGVuc2lvbiBwb2ludCBmb3IgZGlzcG9zYWJsZSBvYmplY3RzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgcmV0dXJuIERpc3Bvc2FibGU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgRGlzcG9zYWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpc3Bvc2FibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2FycmF5XG4gKi9cbi8qKlxuICogUGVyZm9ybXMgYSBiaW5hcnkgc2VhcmNoIG9uIHRoZSBwcm92aWRlZCBzb3J0ZWQgbGlzdCBhbmQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQuIElmIGl0IGNhbid0IGJlIGZvdW5kIGl0J2xsIHJldHVybiAtMS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL2JpbmFyeS1zZWFyY2hcbiAqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBoYXlzdGFjayBJdGVtcyB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7Kn0gbmVlZGxlIFRoZSBpdGVtIHRvIGxvb2sgZm9yLlxuICogQHBhcmFtIHtGdW5jdGlvbj19IG9wdF9jb21wYXJhdG9yIENvbXBhcmF0b3IgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgaXRlbSBpZiBmb3VuZCwgLTEgaWYgbm90LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluYXJ5U2VhcmNoKGhheXN0YWNrLCBuZWVkbGUsIG9wdF9jb21wYXJhdG9yKSB7XG4gICAgdmFyIG1pZCwgY21wO1xuICAgIHZhciBjb21wYXJhdG9yID0gb3B0X2NvbXBhcmF0b3IgfHwgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbjtcbiAgICB2YXIgbG93ID0gMDtcbiAgICB2YXIgaGlnaCA9IGhheXN0YWNrLmxlbmd0aDtcbiAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICAvKiBOb3RlIHRoYXQgXCIobG93ICsgaGlnaCkgPj4+IDFcIiBtYXkgb3ZlcmZsb3csIGFuZCByZXN1bHRzIGluIGEgdHlwZWNhc3RcbiAgICAgICAgICogdG8gZG91YmxlICh3aGljaCBnaXZlcyB0aGUgd3JvbmcgcmVzdWx0cykuICovXG4gICAgICAgIG1pZCA9IGxvdyArICgoaGlnaCAtIGxvdykgPj4gMSk7XG4gICAgICAgIGNtcCA9ICtjb21wYXJhdG9yKGhheXN0YWNrW21pZF0sIG5lZWRsZSk7XG4gICAgICAgIGlmIChjbXAgPCAwLjApIHtcbiAgICAgICAgICAgIC8qIFRvbyBsb3cuICovXG4gICAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLyogS2V5IGZvdW5kIG9yIHRvbyBoaWdoICovXG4gICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICAgICAgZm91bmQgPSAhY21wO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qIEtleSBub3QgZm91bmQuICovXG4gICAgcmV0dXJuIGZvdW5kID8gbG93IDogfmxvdztcbn1cbi8qKlxuICogQ29tcGFyZSBmdW5jdGlvbiBmb3IgYXJyYXkgc29ydCB0aGF0IGlzIHNhZmUgZm9yIG51bWJlcnMuXG4gKiBAcGFyYW0geyp9IGEgVGhlIGZpcnN0IG9iamVjdCB0byBiZSBjb21wYXJlZC5cbiAqIEBwYXJhbSB7Kn0gYiBUaGUgc2Vjb25kIG9iamVjdCB0byBiZSBjb21wYXJlZC5cbiAqIEByZXR1cm4ge251bWJlcn0gQSBuZWdhdGl2ZSBudW1iZXIsIHplcm8sIG9yIGEgcG9zaXRpdmUgbnVtYmVyIGFzIHRoZSBmaXJzdFxuICogICAgIGFyZ3VtZW50IGlzIGxlc3MgdGhhbiwgZXF1YWwgdG8sIG9yIGdyZWF0ZXIgdGhhbiB0aGUgc2Vjb25kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGEgPiBiID8gMSA6IGEgPCBiID8gLTEgOiAwO1xufVxuLyoqXG4gKiBXaGV0aGVyIHRoZSBhcnJheSBjb250YWlucyB0aGUgZ2l2ZW4gb2JqZWN0LlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byB0ZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyp9IG9iaiBUaGUgb2JqZWN0IGZvciB3aGljaCB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBpcyBpbiB0aGUgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlcyhhcnIsIG9iaikge1xuICAgIHJldHVybiBhcnIuaW5kZXhPZihvYmopID49IDA7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYXJyIEFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCBUYXJnZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIDAgbWVhbnMgcmV0dXJuIHRoZSBuZWFyZXN0LCA+IDBcbiAqICAgIG1lYW5zIHJldHVybiB0aGUgbGFyZ2VzdCBuZWFyZXN0LCA8IDAgbWVhbnMgcmV0dXJuIHRoZVxuICogICAgc21hbGxlc3QgbmVhcmVzdC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJGaW5kTmVhcmVzdChhcnIsIHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gICAgdmFyIG4gPSBhcnIubGVuZ3RoO1xuICAgIGlmIChhcnJbMF0gPD0gdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIGlmICh0YXJnZXQgPD0gYXJyW24gLSAxXSkge1xuICAgICAgICByZXR1cm4gbiAtIDE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uIDwgMCkge1xuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPD0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnJbaSAtIDFdIC0gdGFyZ2V0IDwgdGFyZ2V0IC0gYXJyW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbiAtIDE7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgQXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gYmVnaW4gQmVnaW4gaW5kZXguXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZCBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2VTdWJBcnJheShhcnIsIGJlZ2luLCBlbmQpIHtcbiAgICB3aGlsZSAoYmVnaW4gPCBlbmQpIHtcbiAgICAgICAgdmFyIHRtcCA9IGFycltiZWdpbl07XG4gICAgICAgIGFycltiZWdpbl0gPSBhcnJbZW5kXTtcbiAgICAgICAgYXJyW2VuZF0gPSB0bXA7XG4gICAgICAgICsrYmVnaW47XG4gICAgICAgIC0tZW5kO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHshQXJyYXk8VkFMVUU+fFZBTFVFfSBkYXRhIFRoZSBlbGVtZW50cyBvciBhcnJheXMgb2YgZWxlbWVudHMgdG8gYWRkIHRvIGFyci5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGFyciwgZGF0YSkge1xuICAgIHZhciBleHRlbnNpb24gPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbiAgICB2YXIgbGVuZ3RoID0gZXh0ZW5zaW9uLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyclthcnIubGVuZ3RoXSA9IGV4dGVuc2lvbltpXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7VkFMVUV9IG9iaiBUaGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBlbGVtZW50IHdhcyByZW1vdmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGFyciwgb2JqKSB7XG4gICAgdmFyIGkgPSBhcnIuaW5kZXhPZihvYmopO1xuICAgIHZhciBmb3VuZCA9IGkgPiAtMTtcbiAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgYXJyLnNwbGljZShpLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFZBTFVFLCBudW1iZXIsID8pIDogYm9vbGVhbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY29tcGFyZS5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICogQHJldHVybiB7VkFMVUV8bnVsbH0gVGhlIGVsZW1lbnQgZm91bmQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmQoYXJyLCBmdW5jKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGggPj4+IDA7XG4gICAgdmFyIHZhbHVlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBhcnJbaV07XG4gICAgICAgIGlmIChmdW5jKHZhbHVlLCBpLCBhcnIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXl8VWludDhDbGFtcGVkQXJyYXl9IGFycjEgVGhlIGZpcnN0IGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fFVpbnQ4Q2xhbXBlZEFycmF5fSBhcnIyIFRoZSBzZWNvbmQgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHR3byBhcnJheXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGFycjEsIGFycjIpIHtcbiAgICB2YXIgbGVuMSA9IGFycjEubGVuZ3RoO1xuICAgIGlmIChsZW4xICE9PSBhcnIyLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuMTsgaSsrKSB7XG4gICAgICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIFNvcnQgdGhlIHBhc3NlZCBhcnJheSBzdWNoIHRoYXQgdGhlIHJlbGF0aXZlIG9yZGVyIG9mIGVxdWFsIGVsZW1lbnRzIGlzIHByZXZlcnZlZC5cbiAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Tb3J0aW5nX2FsZ29yaXRobSNTdGFiaWxpdHkgZm9yIGRldGFpbHMuXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHNvcnQgKG1vZGlmaWVzIG9yaWdpbmFsKS5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKCosICopOiBudW1iZXJ9IGNvbXBhcmVGbmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YWJsZVNvcnQoYXJyLCBjb21wYXJlRm5jKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gICAgdmFyIHRtcCA9IEFycmF5KGFyci5sZW5ndGgpO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB0bXBbaV0gPSB7IGluZGV4OiBpLCB2YWx1ZTogYXJyW2ldIH07XG4gICAgfVxuICAgIHRtcC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlRm5jKGEudmFsdWUsIGIudmFsdWUpIHx8IGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gdG1wW2ldLnZhbHVlO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJbmRleChhcnIsIGZ1bmMpIHtcbiAgICB2YXIgaW5kZXg7XG4gICAgdmFyIGZvdW5kID0gIWFyci5ldmVyeShmdW5jdGlvbiAoZWwsIGlkeCkge1xuICAgICAgICBpbmRleCA9IGlkeDtcbiAgICAgICAgcmV0dXJuICFmdW5jKGVsLCBpZHgsIGFycik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kID8gaW5kZXggOiAtMTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byB0ZXN0LlxuICogQHBhcmFtIHtGdW5jdGlvbj19IG9wdF9mdW5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc3RyaWN0IFN0cmljdGx5IHNvcnRlZCAoZGVmYXVsdCBmYWxzZSkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm4gaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NvcnRlZChhcnIsIG9wdF9mdW5jLCBvcHRfc3RyaWN0KSB7XG4gICAgdmFyIGNvbXBhcmUgPSBvcHRfZnVuYyB8fCBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uO1xuICAgIHJldHVybiBhcnIuZXZlcnkoZnVuY3Rpb24gKGN1cnJlbnRWYWwsIGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcyA9IGNvbXBhcmUoYXJyW2luZGV4IC0gMV0sIGN1cnJlbnRWYWwpO1xuICAgICAgICByZXR1cm4gIShyZXMgPiAwIHx8IChvcHRfc3RyaWN0ICYmIHJlcyA9PT0gMCkpO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Z1bmN0aW9uc1xuICovXG5pbXBvcnQgeyBlcXVhbHMgYXMgYXJyYXlFcXVhbHMgfSBmcm9tICcuL2FycmF5LmpzJztcbi8qKlxuICogQWx3YXlzIHJldHVybnMgdHJ1ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVFJVRSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQWx3YXlzIHJldHVybnMgZmFsc2UuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGQUxTRSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEEgcmV1c2FibGUgZnVuY3Rpb24sIHVzZWQgZS5nLiBhcyBhIGRlZmF1bHQgZm9yIGNhbGxiYWNrcy5cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfSBOb3RoaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVk9JRCgpIHsgfVxuLyoqXG4gKiBXcmFwIGEgZnVuY3Rpb24gaW4gYW5vdGhlciBmdW5jdGlvbiB0aGF0IHJlbWVtYmVycyB0aGUgbGFzdCByZXR1cm4uICBJZiB0aGVcbiAqIHJldHVybmVkIGZ1bmN0aW9uIGlzIGNhbGxlZCB0d2ljZSBpbiBhIHJvdyB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cyBhbmQgdGhlIHNhbWVcbiAqIHRoaXMgb2JqZWN0LCBpdCB3aWxsIHJldHVybiB0aGUgdmFsdWUgZnJvbSB0aGUgZmlyc3QgY2FsbCBpbiB0aGUgc2Vjb25kIGNhbGwuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbiguLi5hbnkpOiBSZXR1cm5UeXBlfSBmbiBUaGUgZnVuY3Rpb24gdG8gbWVtb2l6ZS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKC4uLmFueSk6IFJldHVyblR5cGV9IFRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAqIEB0ZW1wbGF0ZSBSZXR1cm5UeXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZW1vaXplT25lKGZuKSB7XG4gICAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICAgIC8qKiBAdHlwZSB7UmV0dXJuVHlwZX0gKi9cbiAgICB2YXIgbGFzdFJlc3VsdDtcbiAgICAvKiogQHR5cGUge0FycmF5PGFueT59ICovXG4gICAgdmFyIGxhc3RBcmdzO1xuICAgIHZhciBsYXN0VGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV4dEFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICBpZiAoIWNhbGxlZCB8fCB0aGlzICE9PSBsYXN0VGhpcyB8fCAhYXJyYXlFcXVhbHMobmV4dEFyZ3MsIGxhc3RBcmdzKSkge1xuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICAgICAgICAgIGxhc3RBcmdzID0gbmV4dEFyZ3M7XG4gICAgICAgICAgICBsYXN0UmVzdWx0ID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnVuY3Rpb25zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9vYmpcbiAqL1xuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgT2JqZWN0LmFzc2lnbigpLiAgQXNzaWducyBlbnVtZXJhYmxlIGFuZCBvd24gcHJvcGVydGllcyBmcm9tXG4gKiBvbmUgb3IgbW9yZSBzb3VyY2Ugb2JqZWN0cyB0byBhIHRhcmdldCBvYmplY3QuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbi5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdC5cbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSB2YXJfc291cmNlcyBUaGUgc291cmNlIG9iamVjdChzKS5cbiAqIEByZXR1cm4geyFPYmplY3R9IFRoZSBtb2RpZmllZCB0YXJnZXQgb2JqZWN0LlxuICovXG5leHBvcnQgdmFyIGFzc2lnbiA9IHR5cGVvZiBPYmplY3QuYXNzaWduID09PSAnZnVuY3Rpb24nXG4gICAgPyBPYmplY3QuYXNzaWduXG4gICAgOiBmdW5jdGlvbiAodGFyZ2V0LCB2YXJfc291cmNlcykge1xuICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbi8qKlxuICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbGVhci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKG9iamVjdCkge1xuICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcbiAgICB9XG59XG4vKipcbiAqIFBvbHlmaWxsIGZvciBPYmplY3QudmFsdWVzKCkuICBHZXQgYW4gYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzIGZyb20gYW4gb2JqZWN0LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC92YWx1ZXNcbiAqXG4gKiBAcGFyYW0geyFPYmplY3Q8SyxWPn0gb2JqZWN0IFRoZSBvYmplY3QgZnJvbSB3aGljaCB0byBnZXQgdGhlIHZhbHVlcy5cbiAqIEByZXR1cm4geyFBcnJheTxWPn0gVGhlIHByb3BlcnR5IHZhbHVlcy5cbiAqIEB0ZW1wbGF0ZSBLLFZcbiAqL1xuZXhwb3J0IHZhciBnZXRWYWx1ZXMgPSB0eXBlb2YgT2JqZWN0LnZhbHVlcyA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gT2JqZWN0LnZhbHVlc1xuICAgIDogZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2gob2JqZWN0W3Byb3BlcnR5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9O1xuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGhhcyBhbnkgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgZW1wdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KG9iamVjdCkge1xuICAgIHZhciBwcm9wZXJ0eTtcbiAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAhcHJvcGVydHk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL1RhcmdldFxuICovXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL0V2ZW50LmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7RXZlbnRUYXJnZXR8VGFyZ2V0fSBFdmVudFRhcmdldExpa2VcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFczQyBET00gTGV2ZWwgMiBFdmVudFRhcmdldCBpbnRlcmZhY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDAvUkVDLURPTS1MZXZlbC0yLUV2ZW50cy0yMDAwMTExMy9ldmVudHMuaHRtbCNFdmVudHMtRXZlbnRUYXJnZXQuXG4gKlxuICogVGhlcmUgYXJlIHR3byBpbXBvcnRhbnQgc2ltcGxpZmljYXRpb25zIGNvbXBhcmVkIHRvIHRoZSBzcGVjaWZpY2F0aW9uOlxuICpcbiAqIDEuIFRoZSBoYW5kbGluZyBvZiBgdXNlQ2FwdHVyZWAgaW4gYGFkZEV2ZW50TGlzdGVuZXJgIGFuZFxuICogICAgYHJlbW92ZUV2ZW50TGlzdGVuZXJgLiBUaGVyZSBpcyBubyByZWFsIGNhcHR1cmUgbW9kZWwuXG4gKiAyLiBUaGUgaGFuZGxpbmcgb2YgYHN0b3BQcm9wYWdhdGlvbmAgYW5kIGBwcmV2ZW50RGVmYXVsdGAgb24gYGRpc3BhdGNoRXZlbnRgLlxuICogICAgVGhlcmUgaXMgbm8gZXZlbnQgdGFyZ2V0IGhpZXJhcmNoeS4gV2hlbiBhIGxpc3RlbmVyIGNhbGxzXG4gKiAgICBgc3RvcFByb3BhZ2F0aW9uYCBvciBgcHJldmVudERlZmF1bHRgIG9uIGFuIGV2ZW50IG9iamVjdCwgaXQgbWVhbnMgdGhhdCBub1xuICogICAgbW9yZSBsaXN0ZW5lcnMgYWZ0ZXIgdGhpcyBvbmUgd2lsbCBiZSBjYWxsZWQuIFNhbWUgYXMgd2hlbiB0aGUgbGlzdGVuZXJcbiAqICAgIHJldHVybnMgZmFsc2UuXG4gKi9cbnZhciBUYXJnZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRhcmdldCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyo9fSBvcHRfdGFyZ2V0IERlZmF1bHQgZXZlbnQgdGFyZ2V0IGZvciBkaXNwYXRjaGVkIGV2ZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUYXJnZXQob3B0X3RhcmdldCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ldmVudFRhcmdldF8gPSBvcHRfdGFyZ2V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGlzcGF0Y2hpbmdfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXI+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxpc3RlbmVyc18gPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJ9IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIXR5cGUgfHwgIWxpc3RlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyB8fCAodGhpcy5saXN0ZW5lcnNfID0ge30pO1xuICAgICAgICB2YXIgbGlzdGVuZXJzRm9yVHlwZSA9IGxpc3RlbmVyc1t0eXBlXSB8fCAobGlzdGVuZXJzW3R5cGVdID0gW10pO1xuICAgICAgICBpZiAobGlzdGVuZXJzRm9yVHlwZS5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGUucHVzaChsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYW5kIGNhbGxzIGFsbCBsaXN0ZW5lcnMgbGlzdGVuaW5nIGZvciBldmVudHNcbiAgICAgKiBvZiB0aGlzIHR5cGUuIFRoZSBldmVudCBwYXJhbWV0ZXIgY2FuIGVpdGhlciBiZSBhIHN0cmluZyBvciBhblxuICAgICAqIE9iamVjdCB3aXRoIGEgYHR5cGVgIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBldmVudCBFdmVudCBvYmplY3QuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9IGBmYWxzZWAgaWYgYW55b25lIGNhbGxlZCBwcmV2ZW50RGVmYXVsdCBvbiB0aGVcbiAgICAgKiAgICAgZXZlbnQgb2JqZWN0IG9yIGlmIGFueSBvZiB0aGUgbGlzdGVuZXJzIHJldHVybmVkIGZhbHNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8RXZlbnR9ICovXG4gICAgICAgIHZhciBldnQgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnID8gbmV3IEV2ZW50KGV2ZW50KSA6IGV2ZW50O1xuICAgICAgICB2YXIgdHlwZSA9IGV2dC50eXBlO1xuICAgICAgICBpZiAoIWV2dC50YXJnZXQpIHtcbiAgICAgICAgICAgIGV2dC50YXJnZXQgPSB0aGlzLmV2ZW50VGFyZ2V0XyB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgICAgICB2YXIgcHJvcGFnYXRlO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICB2YXIgZGlzcGF0Y2hpbmcgPSB0aGlzLmRpc3BhdGNoaW5nXyB8fCAodGhpcy5kaXNwYXRjaGluZ18gPSB7fSk7XG4gICAgICAgICAgICB2YXIgcGVuZGluZ1JlbW92YWxzID0gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfIHx8ICh0aGlzLnBlbmRpbmdSZW1vdmFsc18gPSB7fSk7XG4gICAgICAgICAgICBpZiAoISh0eXBlIGluIGRpc3BhdGNoaW5nKSkge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoaW5nW3R5cGVdID0gMDtcbiAgICAgICAgICAgICAgICBwZW5kaW5nUmVtb3ZhbHNbdHlwZV0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytkaXNwYXRjaGluZ1t0eXBlXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdoYW5kbGVFdmVudCcgaW4gbGlzdGVuZXJzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyT2JqZWN0fSAqLyAobGlzdGVuZXJzW2ldKS5oYW5kbGVFdmVudChldnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJGdW5jdGlvbn0gKi8gKGxpc3RlbmVyc1tpXSkuY2FsbCh0aGlzLCBldnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJvcGFnYXRlID09PSBmYWxzZSB8fCBldnQucHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAtLWRpc3BhdGNoaW5nW3R5cGVdO1xuICAgICAgICAgICAgaWYgKGRpc3BhdGNoaW5nW3R5cGVdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByID0gcGVuZGluZ1JlbW92YWxzW3R5cGVdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBwZW5kaW5nUmVtb3ZhbHNbdHlwZV07XG4gICAgICAgICAgICAgICAgd2hpbGUgKHByLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIFZPSUQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgZGlzcGF0Y2hpbmdbdHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvcGFnYXRlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNfICYmIGNsZWFyKHRoaXMubGlzdGVuZXJzXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpc3RlbmVycyBmb3IgYSBzcGVjaWZpZWQgZXZlbnQgdHlwZS4gTGlzdGVuZXJzIGFyZSByZXR1cm5lZCBpbiB0aGVcbiAgICAgKiBvcmRlciB0aGF0IHRoZXkgd2lsbCBiZSBjYWxsZWQgaW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcj58dW5kZWZpbmVkfSBMaXN0ZW5lcnMuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV0pIHx8IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3R5cGUgVHlwZS4gSWYgbm90IHByb3ZpZGVkLFxuICAgICAqICAgICBgdHJ1ZWAgd2lsbCBiZSByZXR1cm5lZCBpZiB0aGlzIGV2ZW50IHRhcmdldCBoYXMgYW55IGxpc3RlbmVycy5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBIYXMgbGlzdGVuZXJzLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuaGFzTGlzdGVuZXIgPSBmdW5jdGlvbiAob3B0X3R5cGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc18pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0X3R5cGVcbiAgICAgICAgICAgID8gb3B0X3R5cGUgaW4gdGhpcy5saXN0ZW5lcnNfXG4gICAgICAgICAgICA6IE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzXykubGVuZ3RoID4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJ9IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdSZW1vdmFsc18gJiYgdHlwZSBpbiB0aGlzLnBlbmRpbmdSZW1vdmFsc18pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBsaXN0ZW5lciBhIG5vLW9wLCBhbmQgcmVtb3ZlIGxhdGVyIGluICNkaXNwYXRjaEV2ZW50KClcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzW2luZGV4XSA9IFZPSUQ7XG4gICAgICAgICAgICAgICAgICAgICsrdGhpcy5wZW5kaW5nUmVtb3ZhbHNfW3R5cGVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGFyZ2V0O1xufShEaXNwb3NhYmxlKSk7XG5leHBvcnQgZGVmYXVsdCBUYXJnZXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UYXJnZXQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBHZW5lcmljIGNoYW5nZSBldmVudC4gVHJpZ2dlcmVkIHdoZW4gdGhlIHJldmlzaW9uIGNvdW50ZXIgaXMgaW5jcmVhc2VkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkJhc2VFdmVudCNjaGFuZ2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ0hBTkdFOiAnY2hhbmdlJyxcbiAgICAvKipcbiAgICAgKiBHZW5lcmljIGVycm9yIGV2ZW50LiBUcmlnZ2VyZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2Vycm9yXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEVSUk9SOiAnZXJyb3InLFxuICAgIEJMVVI6ICdibHVyJyxcbiAgICBDTEVBUjogJ2NsZWFyJyxcbiAgICBDT05URVhUTUVOVTogJ2NvbnRleHRtZW51JyxcbiAgICBDTElDSzogJ2NsaWNrJyxcbiAgICBEQkxDTElDSzogJ2RibGNsaWNrJyxcbiAgICBEUkFHRU5URVI6ICdkcmFnZW50ZXInLFxuICAgIERSQUdPVkVSOiAnZHJhZ292ZXInLFxuICAgIERST1A6ICdkcm9wJyxcbiAgICBGT0NVUzogJ2ZvY3VzJyxcbiAgICBLRVlET1dOOiAna2V5ZG93bicsXG4gICAgS0VZUFJFU1M6ICdrZXlwcmVzcycsXG4gICAgTE9BRDogJ2xvYWQnLFxuICAgIFJFU0laRTogJ3Jlc2l6ZScsXG4gICAgVE9VQ0hNT1ZFOiAndG91Y2htb3ZlJyxcbiAgICBXSEVFTDogJ3doZWVsJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50c1xuICovXG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4vb2JqLmpzJztcbi8qKlxuICogS2V5IHRvIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX5PYnNlcnZhYmxlI3VuQnlLZXl9LlxuICogQHR5cGVkZWYge09iamVjdH0gRXZlbnRzS2V5XG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGVcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBMaXN0ZW5lciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhbiBldmVudCBvYmplY3QgYXMgYXJndW1lbnQuXG4gKiBXaGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIGV2ZW50IHByb3BhZ2F0aW9uIHdpbGwgc3RvcC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpKTogKHZvaWR8Ym9vbGVhbil9IExpc3RlbmVyRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBMaXN0ZW5lck9iamVjdFxuICogQHByb3BlcnR5IHtMaXN0ZW5lckZ1bmN0aW9ufSBoYW5kbGVFdmVudFxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtMaXN0ZW5lckZ1bmN0aW9ufExpc3RlbmVyT2JqZWN0fSBMaXN0ZW5lclxuICovXG4vKipcbiAqIFJlZ2lzdGVycyBhbiBldmVudCBsaXN0ZW5lciBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGVmZmljaWVudGx5IGJpbmRzIGEgYGxpc3RlbmVyYCB0byBhIGB0aGlzYCBvYmplY3QsIGFuZCByZXR1cm5zXG4gKiBhIGtleSBmb3IgdXNlIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+dW5saXN0ZW5CeUtleX0uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF90aGlzIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfb25jZSBJZiB0cnVlLCBhZGQgdGhlIGxpc3RlbmVyIGFzIG9uZS1vZmYgbGlzdGVuZXIuXG4gKiBAcmV0dXJuIHtFdmVudHNLZXl9IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcywgb3B0X29uY2UpIHtcbiAgICBpZiAob3B0X3RoaXMgJiYgb3B0X3RoaXMgIT09IHRhcmdldCkge1xuICAgICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyLmJpbmQob3B0X3RoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0X29uY2UpIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsTGlzdGVuZXJfMSA9IGxpc3RlbmVyO1xuICAgICAgICBsaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIG9yaWdpbmFsTGlzdGVuZXJfMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgZXZlbnRzS2V5ID0ge1xuICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgIH07XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgIHJldHVybiBldmVudHNLZXk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyBhIG9uZS1vZmYgZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhpcyBmdW5jdGlvbiBlZmZpY2llbnRseSBiaW5kcyBhIGBsaXN0ZW5lcmAgYXMgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyXG4gKiB0byBhIGB0aGlzYCBvYmplY3QsIGFuZCByZXR1cm5zIGEga2V5IGZvciB1c2Ugd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+dW5saXN0ZW5CeUtleX0gaW4gY2FzZSB0aGUgbGlzdGVuZXIgbmVlZHMgdG8gYmVcbiAqIHVucmVnaXN0ZXJlZCBiZWZvcmUgaXQgaXMgY2FsbGVkLlxuICpcbiAqIFdoZW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+bGlzdGVufSBpcyBjYWxsZWQgd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMgYWZ0ZXIgdGhpc1xuICogZnVuY3Rpb24sIHRoZSBzZWxmLXVucmVnaXN0ZXJpbmcgbGlzdGVuZXIgd2lsbCBiZSB0dXJuZWQgaW50byBhIHBlcm1hbmVudFxuICogbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF90aGlzIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcmV0dXJuIHtFdmVudHNLZXl9IEtleSBmb3IgdW5saXN0ZW5CeUtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbk9uY2UodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMpIHtcbiAgICByZXR1cm4gbGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzLCB0cnVlKTtcbn1cbi8qKlxuICogVW5yZWdpc3RlcnMgZXZlbnQgbGlzdGVuZXJzIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoZSBhcmd1bWVudCBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBpcyB0aGUga2V5IHJldHVybmVkIGZyb21cbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfmxpc3Rlbn0gb3Ige0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+bGlzdGVuT25jZX0uXG4gKlxuICogQHBhcmFtIHtFdmVudHNLZXl9IGtleSBUaGUga2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5saXN0ZW5CeUtleShrZXkpIHtcbiAgICBpZiAoa2V5ICYmIGtleS50YXJnZXQpIHtcbiAgICAgICAga2V5LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGtleS50eXBlLCBrZXkubGlzdGVuZXIpO1xuICAgICAgICBjbGVhcihrZXkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9PYnNlcnZhYmxlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCBsaXN0ZW5PbmNlLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBBbiBldmVudCB0YXJnZXQgcHJvdmlkaW5nIGNvbnZlbmllbnQgbWV0aG9kcyBmb3IgbGlzdGVuZXIgcmVnaXN0cmF0aW9uXG4gKiBhbmQgdW5yZWdpc3RyYXRpb24uIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBhbHdheXMgYXZhaWxhYmxlIHRocm91Z2hcbiAqIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX5PYnNlcnZhYmxlI2NoYW5nZWR9LlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0XG4gKiBAYXBpXG4gKi9cbnZhciBPYnNlcnZhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmV2aXNpb25fID0gMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZWFzZXMgdGhlIHJldmlzaW9uIGNvdW50ZXIgYW5kIGRpc3BhdGNoZXMgYSAnY2hhbmdlJyBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKyt0aGlzLnJldmlzaW9uXztcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2ZXJzaW9uIG51bWJlciBmb3IgdGhpcyBvYmplY3QuICBFYWNoIHRpbWUgdGhlIG9iamVjdCBpcyBtb2RpZmllZCxcbiAgICAgKiBpdHMgdmVyc2lvbiBudW1iZXIgd2lsbCBiZSBpbmNyZW1lbnRlZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJldmlzaW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5nZXRSZXZpc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV2aXNpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICAgICAqICAgICBjYWxsZWQgd2l0aCBhbiBhcnJheSBvZiBldmVudCB0eXBlcyBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSByZXR1cm5cbiAgICAgKiAgICAgd2lsbCBiZSBhbiBhcnJheSBvZiBrZXlzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHR5cGUubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBrZXlzW2ldID0gbGlzdGVuKHRoaXMsIHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3Rlbih0aGlzLCAvKiogQHR5cGUge3N0cmluZ30gKi8gKHR5cGUpLCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExpc3RlbiBvbmNlIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICAgICAqICAgICBjYWxsZWQgd2l0aCBhbiBhcnJheSBvZiBldmVudCB0eXBlcyBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSByZXR1cm5cbiAgICAgKiAgICAgd2lsbCBiZSBhbiBhcnJheSBvZiBrZXlzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICAgICAgICBrZXkgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBrZXlbaV0gPSBsaXN0ZW5PbmNlKHRoaXMsIHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGtleSA9IGxpc3Rlbk9uY2UodGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAobGlzdGVuZXIpLm9sX2tleSA9IGtleTtcbiAgICAgICAgcmV0dXJuIGtleTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVubGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUudW4gPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGtleSA9IC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAobGlzdGVuZXIpLm9sX2tleTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgdW5CeUtleShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHR5cGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oRXZlbnRUYXJnZXQpKTtcbi8qKlxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciB1c2luZyB0aGUga2V5IHJldHVybmVkIGJ5IGBvbigpYCBvciBgb25jZSgpYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IGtleSBUaGUga2V5IHJldHVybmVkIGJ5IGBvbigpYFxuICogICAgIG9yIGBvbmNlKClgIChvciBhbiBhcnJheSBvZiBrZXlzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuQnlLZXkoa2V5KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBrZXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleShrZXlbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fSAqLyAoa2V5KSk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3V0aWxcbiAqL1xuLyoqXG4gKiBAcmV0dXJuIHs/fSBBbnkgcmV0dXJuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWJzdHJhY3QoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7P30gKi8gKChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5pbXBsZW1lbnRlZCBhYnN0cmFjdCBtZXRob2QuJyk7XG4gICAgfSkoKSk7XG59XG4vKipcbiAqIENvdW50ZXIgZm9yIGdldFVpZC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdWlkQ291bnRlcl8gPSAwO1xuLyoqXG4gKiBHZXRzIGEgdW5pcXVlIElEIGZvciBhbiBvYmplY3QuIFRoaXMgbXV0YXRlcyB0aGUgb2JqZWN0IHNvIHRoYXQgZnVydGhlciBjYWxsc1xuICogd2l0aCB0aGUgc2FtZSBvYmplY3QgYXMgYSBwYXJhbWV0ZXIgcmV0dXJucyB0aGUgc2FtZSB2YWx1ZS4gVW5pcXVlIElEcyBhcmUgZ2VuZXJhdGVkXG4gKiBhcyBhIHN0cmljdGx5IGluY3JlYXNpbmcgc2VxdWVuY2UuIEFkYXB0ZWQgZnJvbSBnb29nLmdldFVpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZ2V0IHRoZSB1bmlxdWUgSUQgZm9yLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdW5pcXVlIElEIGZvciB0aGUgb2JqZWN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VWlkKG9iaikge1xuICAgIHJldHVybiBvYmoub2xfdWlkIHx8IChvYmoub2xfdWlkID0gU3RyaW5nKCsrdWlkQ291bnRlcl8pKTtcbn1cbi8qKlxuICogT3BlbkxheWVycyB2ZXJzaW9uLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBWRVJTSU9OID0gJzYuNC4zJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvT2JqZWN0XG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4vT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24sIGlzRW1wdHkgfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuL3V0aWwuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKi9cbnZhciBPYmplY3RFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT2JqZWN0RXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcHJvcGVydHkgbmFtZS5cbiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlIFRoZSBvbGQgdmFsdWUgZm9yIGBrZXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE9iamVjdEV2ZW50KHR5cGUsIGtleSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB3aG9zZSB2YWx1ZSBpcyBjaGFuZ2luZy5cbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9sZCB2YWx1ZS4gVG8gZ2V0IHRoZSBuZXcgdmFsdWUgdXNlIGBlLnRhcmdldC5nZXQoZS5rZXkpYCB3aGVyZVxuICAgICAgICAgKiBgZWAgaXMgdGhlIGV2ZW50IG9iamVjdC5cbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9sZFZhbHVlID0gb2xkVmFsdWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgT2JqZWN0RXZlbnQgfTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTW9zdCBub24tdHJpdmlhbCBjbGFzc2VzIGluaGVyaXQgZnJvbSB0aGlzLlxuICpcbiAqIFRoaXMgZXh0ZW5kcyB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV9IHdpdGggb2JzZXJ2YWJsZVxuICogcHJvcGVydGllcywgd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBvYnNlcnZhYmxlIGFzIHdlbGwgYXMgdGhlIG9iamVjdCBhcyBhXG4gKiB3aG9sZS5cbiAqXG4gKiBDbGFzc2VzIHRoYXQgaW5oZXJpdCBmcm9tIHRoaXMgaGF2ZSBwcmUtZGVmaW5lZCBwcm9wZXJ0aWVzLCB0byB3aGljaCB5b3UgY2FuXG4gKiBhZGQgeW91ciBvd25zLiBUaGUgcHJlLWRlZmluZWQgcHJvcGVydGllcyBhcmUgbGlzdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbiBhc1xuICogJ09ic2VydmFibGUgUHJvcGVydGllcycsIGFuZCBoYXZlIHRoZWlyIG93biBhY2Nlc3NvcnM7IGZvciBleGFtcGxlLFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBoYXMgYSBgdGFyZ2V0YCBwcm9wZXJ0eSwgYWNjZXNzZWQgd2l0aFxuICogYGdldFRhcmdldCgpYCBhbmQgY2hhbmdlZCB3aXRoIGBzZXRUYXJnZXQoKWAuIE5vdCBhbGwgcHJvcGVydGllcyBhcmUgaG93ZXZlclxuICogc2V0dGFibGUuIFRoZXJlIGFyZSBhbHNvIGdlbmVyYWwtcHVycG9zZSBhY2Nlc3NvcnMgYGdldCgpYCBhbmQgYHNldCgpYC4gRm9yXG4gKiBleGFtcGxlLCBgZ2V0KCd0YXJnZXQnKWAgaXMgZXF1aXZhbGVudCB0byBgZ2V0VGFyZ2V0KClgLlxuICpcbiAqIFRoZSBgc2V0YCBhY2Nlc3NvcnMgdHJpZ2dlciBhIGNoYW5nZSBldmVudCwgYW5kIHlvdSBjYW4gbW9uaXRvciB0aGlzIGJ5XG4gKiByZWdpc3RlcmluZyBhIGxpc3RlbmVyLiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9WaWV3flZpZXd9IGhhcyBhXG4gKiBgY2VudGVyYCBwcm9wZXJ0eSwgc28gYHZpZXcub24oJ2NoYW5nZTpjZW50ZXInLCBmdW5jdGlvbihldnQpIHsuLi59KTtgIHdvdWxkXG4gKiBjYWxsIHRoZSBmdW5jdGlvbiB3aGVuZXZlciB0aGUgdmFsdWUgb2YgdGhlIGNlbnRlciBwcm9wZXJ0eSBjaGFuZ2VzLiBXaXRoaW5cbiAqIHRoZSBmdW5jdGlvbiwgYGV2dC50YXJnZXRgIHdvdWxkIGJlIHRoZSB2aWV3LCBzbyBgZXZ0LnRhcmdldC5nZXRDZW50ZXIoKWBcbiAqIHdvdWxkIHJldHVybiB0aGUgbmV3IGNlbnRlci5cbiAqXG4gKiBZb3UgY2FuIGFkZCB5b3VyIG93biBvYnNlcnZhYmxlIHByb3BlcnRpZXMgd2l0aFxuICogYG9iamVjdC5zZXQoJ3Byb3AnLCAndmFsdWUnKWAsIGFuZCByZXRyaWV2ZSB0aGF0IHdpdGggYG9iamVjdC5nZXQoJ3Byb3AnKWAuXG4gKiBZb3UgY2FuIGxpc3RlbiBmb3IgY2hhbmdlcyBvbiB0aGF0IHByb3BlcnR5IHZhbHVlIHdpdGhcbiAqIGBvYmplY3Qub24oJ2NoYW5nZTpwcm9wJywgbGlzdGVuZXIpYC4gWW91IGNhbiBnZXQgYSBsaXN0IG9mIGFsbFxuICogcHJvcGVydGllcyB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3QjZ2V0UHJvcGVydGllc30uXG4gKlxuICogTm90ZSB0aGF0IHRoZSBvYnNlcnZhYmxlIHByb3BlcnRpZXMgYXJlIHNlcGFyYXRlIGZyb20gc3RhbmRhcmQgSlMgcHJvcGVydGllcy5cbiAqIFlvdSBjYW4sIGZvciBleGFtcGxlLCBnaXZlIHlvdXIgbWFwIG9iamVjdCBhIHRpdGxlIHdpdGhcbiAqIGBtYXAudGl0bGU9J05ldyB0aXRsZSdgIGFuZCB3aXRoIGBtYXAuc2V0KCd0aXRsZScsICdBbm90aGVyIHRpdGxlJylgLiBUaGVcbiAqIGZpcnN0IHdpbGwgYmUgYSBgaGFzT3duUHJvcGVydHlgOyB0aGUgc2Vjb25kIHdpbGwgYXBwZWFyIGluXG4gKiBgZ2V0UHJvcGVydGllcygpYC4gT25seSB0aGUgc2Vjb25kIGlzIG9ic2VydmFibGUuXG4gKlxuICogUHJvcGVydGllcyBjYW4gYmUgZGVsZXRlZCBieSB1c2luZyB0aGUgdW5zZXQgbWV0aG9kLiBFLmcuXG4gKiBvYmplY3QudW5zZXQoJ2ZvbycpLlxuICpcbiAqIEBmaXJlcyBPYmplY3RFdmVudFxuICogQGFwaVxuICovXG52YXIgQmFzZU9iamVjdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZU9iamVjdCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+PX0gb3B0X3ZhbHVlcyBBbiBvYmplY3Qgd2l0aCBrZXktdmFsdWUgcGFpcnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZU9iamVjdChvcHRfdmFsdWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8vIENhbGwge0BsaW5rIG1vZHVsZTpvbC91dGlsfmdldFVpZH0gdG8gZW5zdXJlIHRoYXQgdGhlIG9yZGVyIG9mIG9iamVjdHMnIGlkcyBpc1xuICAgICAgICAvLyB0aGUgc2FtZSBhcyB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIGNyZWF0ZWQuICBUaGlzIGFsc28gaGVscHMgdG9cbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgb2JqZWN0IHByb3BlcnRpZXMgYXJlIGFsd2F5cyBhZGRlZCBpbiB0aGUgc2FtZSBvcmRlciwgd2hpY2hcbiAgICAgICAgLy8gaGVscHMgbWFueSBKYXZhU2NyaXB0IGVuZ2luZXMgZ2VuZXJhdGUgZmFzdGVyIGNvZGUuXG4gICAgICAgIGdldFVpZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52YWx1ZXNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdF92YWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhvcHRfdmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEByZXR1cm4geyp9IFZhbHVlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVzXyAmJiB0aGlzLnZhbHVlc18uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBsaXN0IG9mIG9iamVjdCBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBMaXN0IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMudmFsdWVzXyAmJiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlc18pKSB8fCBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbiBvYmplY3Qgb2YgYWxsIHByb3BlcnR5IG5hbWVzIGFuZCB2YWx1ZXMuXG4gICAgICogQHJldHVybiB7T2JqZWN0PHN0cmluZywgKj59IE9iamVjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlc18gJiYgYXNzaWduKHt9LCB0aGlzLnZhbHVlc18pKSB8fCB7fTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaGFzIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuaGFzUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlIE9sZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoa2V5LCBvbGRWYWx1ZSkge1xuICAgICAgICB2YXIgZXZlbnRUeXBlO1xuICAgICAgICBldmVudFR5cGUgPSBnZXRDaGFuZ2VFdmVudFR5cGUoa2V5KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgICAgICAgZXZlbnRUeXBlID0gT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2lsZW50IFVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBvcHRfc2lsZW50KSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlc18gfHwgKHRoaXMudmFsdWVzXyA9IHt9KTtcbiAgICAgICAgaWYgKG9wdF9zaWxlbnQpIHtcbiAgICAgICAgICAgIHZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSB2YWx1ZXNba2V5XTtcbiAgICAgICAgICAgIHZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoa2V5LCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgYSBjb2xsZWN0aW9uIG9mIGtleS12YWx1ZSBwYWlycy4gIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgYW55IGV4aXN0aW5nXG4gICAgICogcHJvcGVydGllcyBhbmQgYWRkcyBuZXcgb25lcyAoaXQgZG9lcyBub3QgcmVtb3ZlIGFueSBleGlzdGluZyBwcm9wZXJ0aWVzKS5cbiAgICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+fSB2YWx1ZXMgVmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zaWxlbnQgVXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuc2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uICh2YWx1ZXMsIG9wdF9zaWxlbnQpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlcykge1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB2YWx1ZXNba2V5XSwgb3B0X3NpbGVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVuc2V0cyBhIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3NpbGVudCBVbnNldCB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLnVuc2V0ID0gZnVuY3Rpb24gKGtleSwgb3B0X3NpbGVudCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZXNfICYmIGtleSBpbiB0aGlzLnZhbHVlc18pIHtcbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkodGhpcy52YWx1ZXNfKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzXyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW9wdF9zaWxlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShrZXksIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEJhc2VPYmplY3Q7XG59KE9ic2VydmFibGUpKTtcbi8qKlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbnZhciBjaGFuZ2VFdmVudFR5cGVDYWNoZSA9IHt9O1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICogQHJldHVybiB7c3RyaW5nfSBDaGFuZ2UgbmFtZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENoYW5nZUV2ZW50VHlwZShrZXkpIHtcbiAgICByZXR1cm4gY2hhbmdlRXZlbnRUeXBlQ2FjaGUuaGFzT3duUHJvcGVydHkoa2V5KVxuICAgICAgICA/IGNoYW5nZUV2ZW50VHlwZUNhY2hlW2tleV1cbiAgICAgICAgOiAoY2hhbmdlRXZlbnRUeXBlQ2FjaGVba2V5XSA9ICdjaGFuZ2U6JyArIGtleSk7XG59XG5leHBvcnQgZGVmYXVsdCBCYXNlT2JqZWN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL1VuaXRzXG4gKi9cbi8qKlxuICogUHJvamVjdGlvbiB1bml0czogYCdkZWdyZWVzJ2AsIGAnZnQnYCwgYCdtJ2AsIGAncGl4ZWxzJ2AsIGAndGlsZS1waXhlbHMnYCBvclxuICogYCd1cy1mdCdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIFVuaXRzID0ge1xuICAgIERFR1JFRVM6ICdkZWdyZWVzJyxcbiAgICBGRUVUOiAnZnQnLFxuICAgIE1FVEVSUzogJ20nLFxuICAgIFBJWEVMUzogJ3BpeGVscycsXG4gICAgVElMRV9QSVhFTFM6ICd0aWxlLXBpeGVscycsXG4gICAgVVNGRUVUOiAndXMtZnQnLFxufTtcbi8qKlxuICogTWV0ZXJzIHBlciB1bml0IGxvb2t1cCB0YWJsZS5cbiAqIEBjb25zdFxuICogQHR5cGUge09iamVjdDxVbml0cywgbnVtYmVyPn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBNRVRFUlNfUEVSX1VOSVQgPSB7fTtcbi8vIHVzZSB0aGUgcmFkaXVzIG9mIHRoZSBOb3JtYWwgc3BoZXJlXG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10gPSAoMiAqIE1hdGguUEkgKiA2MzcwOTk3KSAvIDM2MDtcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5GRUVUXSA9IDAuMzA0ODtcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5NRVRFUlNdID0gMTtcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5VU0ZFRVRdID0gMTIwMCAvIDM5Mzc7XG5leHBvcnQgZGVmYXVsdCBVbml0cztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuaXRzLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0Fzc2VydGlvbkVycm9yXG4gKi9cbmltcG9ydCB7IFZFUlNJT04gfSBmcm9tICcuL3V0aWwuanMnO1xuLyoqXG4gKiBFcnJvciBvYmplY3QgdGhyb3duIHdoZW4gYW4gYXNzZXJ0aW9uIGZhaWxlZC4gVGhpcyBpcyBhbiBFQ01BLTI2MiBFcnJvcixcbiAqIGV4dGVuZGVkIHdpdGggYSBgY29kZWAgcHJvcGVydHkuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IuXG4gKi9cbnZhciBBc3NlcnRpb25FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXNzZXJ0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvZGUgRXJyb3IgY29kZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihjb2RlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBwYXRoID0gVkVSU0lPTiA9PT0gJ2xhdGVzdCcgPyBWRVJTSU9OIDogJ3YnICsgVkVSU0lPTi5zcGxpdCgnLScpWzBdO1xuICAgICAgICB2YXIgbWVzc2FnZSA9ICdBc3NlcnRpb24gZmFpbGVkLiBTZWUgaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi8nICtcbiAgICAgICAgICAgIHBhdGggK1xuICAgICAgICAgICAgJy9kb2MvZXJyb3JzLyMnICtcbiAgICAgICAgICAgIGNvZGUgK1xuICAgICAgICAgICAgJyBmb3IgZGV0YWlscy4nO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFcnJvciBjb2RlLiBUaGUgbWVhbmluZyBvZiB0aGUgY29kZSBjYW4gYmUgZm91bmQgb25cbiAgICAgICAgICogaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi9sYXRlc3QvZG9jL2Vycm9ycy8gKHJlcGxhY2UgYGxhdGVzdGAgd2l0aFxuICAgICAgICAgKiB0aGUgdmVyc2lvbiBmb3VuZCBpbiB0aGUgT3BlbkxheWVycyBzY3JpcHQncyBoZWFkZXIgY29tbWVudCBpZiBhIHZlcnNpb25cbiAgICAgICAgICogb3RoZXIgdGhhbiB0aGUgbGF0ZXN0IGlzIHVzZWQpLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcbiAgICAgICAgLy8gUmUtYXNzaWduIG1lc3NhZ2UsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vUmljaC1IYXJyaXMvYnVibGUvaXNzdWVzLzQwXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBBc3NlcnRpb25FcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydCBkZWZhdWx0IEFzc2VydGlvbkVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXNzZXJ0aW9uRXJyb3IuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Fzc2VydHNcbiAqL1xuaW1wb3J0IEFzc2VydGlvbkVycm9yIGZyb20gJy4vQXNzZXJ0aW9uRXJyb3IuanMnO1xuLyoqXG4gKiBAcGFyYW0geyp9IGFzc2VydGlvbiBBc3NlcnRpb24gd2UgZXhwZWN0ZWQgdG8gYmUgdHJ1dGh5LlxuICogQHBhcmFtIHtudW1iZXJ9IGVycm9yQ29kZSBFcnJvciBjb2RlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KGFzc2VydGlvbiwgZXJyb3JDb2RlKSB7XG4gICAgaWYgKCFhc3NlcnRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKGVycm9yQ29kZSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXNzZXJ0cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdHJhbnNmb3JtXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IHJlcHJlc2VudGluZyBhbiBhZmZpbmUgMmQgdHJhbnNmb3JtYXRpb24gZm9yIHVzZSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3RyYW5zZm9ybX0gZnVuY3Rpb25zLiBUaGUgYXJyYXkgaGFzIDYgZWxlbWVudHMuXG4gKiBAdHlwZWRlZiB7IUFycmF5PG51bWJlcj59IFRyYW5zZm9ybVxuICogQGFwaVxuICovXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucy4gVGhlIGZ1bmN0aW9ucyB3b3JrIG9uIGFuXG4gKiBhcnJheSBvZiA2IGVsZW1lbnRzLiBUaGUgZWxlbWVudCBvcmRlciBpcyBjb21wYXRpYmxlIHdpdGggdGhlIFtTVkdNYXRyaXhcbiAqIGludGVyZmFjZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NWR01hdHJpeCkgYW5kIGlzXG4gKiBhIHN1YnNldCAoZWxlbWVudHMgYSB0byBmKSBvZiBhIDPDlzMgbWF0cml4OlxuICogYGBgXG4gKiBbIGEgYyBlIF1cbiAqIFsgYiBkIGYgXVxuICogWyAwIDAgMSBdXG4gKiBgYGBcbiAqL1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge1RyYW5zZm9ybX1cbiAqL1xudmFyIHRtcF8gPSBuZXcgQXJyYXkoNik7XG4vKipcbiAqIENyZWF0ZSBhbiBpZGVudGl0eSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBJZGVudGl0eSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIFsxLCAwLCAwLCAxLCAwLCAwXTtcbn1cbi8qKlxuICogUmVzZXRzIHRoZSBnaXZlbiB0cmFuc2Zvcm0gdG8gYW4gaWRlbnRpdHkgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXQodHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIHNldCh0cmFuc2Zvcm0sIDEsIDAsIDAsIDEsIDAsIDApO1xufVxuLyoqXG4gKiBNdWx0aXBseSB0aGUgdW5kZXJseWluZyBtYXRyaWNlcyBvZiB0d28gdHJhbnNmb3JtcyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgaW5cbiAqIHRoZSBmaXJzdCB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDEuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDIuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIG11bHRpcGxpZWQgd2l0aCB0cmFuc2Zvcm0yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICAgIHZhciBhMSA9IHRyYW5zZm9ybTFbMF07XG4gICAgdmFyIGIxID0gdHJhbnNmb3JtMVsxXTtcbiAgICB2YXIgYzEgPSB0cmFuc2Zvcm0xWzJdO1xuICAgIHZhciBkMSA9IHRyYW5zZm9ybTFbM107XG4gICAgdmFyIGUxID0gdHJhbnNmb3JtMVs0XTtcbiAgICB2YXIgZjEgPSB0cmFuc2Zvcm0xWzVdO1xuICAgIHZhciBhMiA9IHRyYW5zZm9ybTJbMF07XG4gICAgdmFyIGIyID0gdHJhbnNmb3JtMlsxXTtcbiAgICB2YXIgYzIgPSB0cmFuc2Zvcm0yWzJdO1xuICAgIHZhciBkMiA9IHRyYW5zZm9ybTJbM107XG4gICAgdmFyIGUyID0gdHJhbnNmb3JtMls0XTtcbiAgICB2YXIgZjIgPSB0cmFuc2Zvcm0yWzVdO1xuICAgIHRyYW5zZm9ybTFbMF0gPSBhMSAqIGEyICsgYzEgKiBiMjtcbiAgICB0cmFuc2Zvcm0xWzFdID0gYjEgKiBhMiArIGQxICogYjI7XG4gICAgdHJhbnNmb3JtMVsyXSA9IGExICogYzIgKyBjMSAqIGQyO1xuICAgIHRyYW5zZm9ybTFbM10gPSBiMSAqIGMyICsgZDEgKiBkMjtcbiAgICB0cmFuc2Zvcm0xWzRdID0gYTEgKiBlMiArIGMxICogZjIgKyBlMTtcbiAgICB0cmFuc2Zvcm0xWzVdID0gYjEgKiBlMiArIGQxICogZjIgKyBmMTtcbiAgICByZXR1cm4gdHJhbnNmb3JtMTtcbn1cbi8qKlxuICogU2V0IHRoZSB0cmFuc2Zvcm0gY29tcG9uZW50cyBhLWYgb24gYSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgYSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBiIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGMgVGhlIGMgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZCBUaGUgZCBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlIFRoZSBlIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGYgVGhlIGYgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBNYXRyaXggd2l0aCB0cmFuc2Zvcm0gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldCh0cmFuc2Zvcm0sIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICB0cmFuc2Zvcm1bMF0gPSBhO1xuICAgIHRyYW5zZm9ybVsxXSA9IGI7XG4gICAgdHJhbnNmb3JtWzJdID0gYztcbiAgICB0cmFuc2Zvcm1bM10gPSBkO1xuICAgIHRyYW5zZm9ybVs0XSA9IGU7XG4gICAgdHJhbnNmb3JtWzVdID0gZjtcbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLyoqXG4gKiBTZXQgdHJhbnNmb3JtIG9uIG9uZSBtYXRyaXggZnJvbSBhbm90aGVyIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSB0by5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSBmcm9tLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSB3aXRoIHRyYW5zZm9ybSBmcm9tIHRyYW5zZm9ybTIgYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZyb21BcnJheSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gICAgdHJhbnNmb3JtMVswXSA9IHRyYW5zZm9ybTJbMF07XG4gICAgdHJhbnNmb3JtMVsxXSA9IHRyYW5zZm9ybTJbMV07XG4gICAgdHJhbnNmb3JtMVsyXSA9IHRyYW5zZm9ybTJbMl07XG4gICAgdHJhbnNmb3JtMVszXSA9IHRyYW5zZm9ybTJbM107XG4gICAgdHJhbnNmb3JtMVs0XSA9IHRyYW5zZm9ybTJbNF07XG4gICAgdHJhbnNmb3JtMVs1XSA9IHRyYW5zZm9ybTJbNV07XG4gICAgcmV0dXJuIHRyYW5zZm9ybTE7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIGNvb3JkaW5hdGUgd2l0aCB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHJldHVybmluZyB0aGVcbiAqIHJlc3VsdGluZywgdHJhbnNmb3JtZWQgY29vcmRpbmF0ZS4gVGhlIGNvb3JkaW5hdGUgd2lsbCBiZSBtb2RpZmllZCBpbi1wbGFjZS5cbiAqXG4gKiBAcGFyYW0ge1RyYW5zZm9ybX0gdHJhbnNmb3JtIFRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSByZXR1cm4gY29vcmRpbmF0ZSBzbyB0aGF0IG9wZXJhdGlvbnMgY2FuIGJlXG4gKiAgICAgY2hhaW5lZCB0b2dldGhlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5KHRyYW5zZm9ybSwgY29vcmRpbmF0ZSkge1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgY29vcmRpbmF0ZVswXSA9IHRyYW5zZm9ybVswXSAqIHggKyB0cmFuc2Zvcm1bMl0gKiB5ICsgdHJhbnNmb3JtWzRdO1xuICAgIGNvb3JkaW5hdGVbMV0gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQXBwbGllcyByb3RhdGlvbiB0byB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgcm90YXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUodHJhbnNmb3JtLCBhbmdsZSkge1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgY29zLCBzaW4sIC1zaW4sIGNvcywgMCwgMCkpO1xufVxuLyoqXG4gKiBBcHBsaWVzIHNjYWxlIHRvIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodHJhbnNmb3JtLCB4LCB5KSB7XG4gICAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIHgsIDAsIDAsIHksIDAsIDApKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHNjYWxlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBvdmVyd3JpdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFNjYWxlIGZhY3RvciB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHNjYWxlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTY2FsZSh0YXJnZXQsIHgsIHkpIHtcbiAgICByZXR1cm4gc2V0KHRhcmdldCwgeCwgMCwgMCwgeSwgMCwgMCk7XG59XG4vKipcbiAqIEFwcGxpZXMgdHJhbnNsYXRpb24gdG8gdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeCBUcmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5IFRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgdHJhbnNsYXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUodHJhbnNmb3JtLCBkeCwgZHkpIHtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgMSwgMCwgMCwgMSwgZHgsIGR5KSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybSAod2lsbCBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBjb21wb3NpdGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZSh0cmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB0cmFuc2Zvcm1bMF0gPSBzeCAqIGNvcztcbiAgICB0cmFuc2Zvcm1bMV0gPSBzeSAqIHNpbjtcbiAgICB0cmFuc2Zvcm1bMl0gPSAtc3ggKiBzaW47XG4gICAgdHJhbnNmb3JtWzNdID0gc3kgKiBjb3M7XG4gICAgdHJhbnNmb3JtWzRdID0gZHgyICogc3ggKiBjb3MgLSBkeTIgKiBzeCAqIHNpbiArIGR4MTtcbiAgICB0cmFuc2Zvcm1bNV0gPSBkeDIgKiBzeSAqIHNpbiArIGR5MiAqIHN5ICogY29zICsgZHkxO1xuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLiBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybVxuICogc3RyaW5nIGNhbiBiZSBhcHBsaWVkIGFzIGB0cmFuc2Zvcm1gIHBvcnBlcnR5IG9mIGFuIEhUTUxFbGVtZW50J3Mgc3R5bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBvc2l0ZSBjc3MgdHJhbnNmb3JtLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZUNzc1RyYW5zZm9ybShkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpIHtcbiAgICByZXR1cm4gdG9TdHJpbmcoY29tcG9zZShjcmVhdGUoKSwgZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSk7XG59XG4vKipcbiAqIEludmVydCB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBzb3VyY2UgVGhlIHNvdXJjZSB0cmFuc2Zvcm0gdG8gaW52ZXJ0LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGludmVydGVkIChzb3VyY2UpIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmVydChzb3VyY2UpIHtcbiAgICByZXR1cm4gbWFrZUludmVyc2Uoc291cmNlLCBzb3VyY2UpO1xufVxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBiZSBzZXQgYXMgdGhlIGludmVyc2Ugb2ZcbiAqICAgICB0aGUgc291cmNlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gc291cmNlIFRoZSBzb3VyY2UgdHJhbnNmb3JtIHRvIGludmVydC5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBpbnZlcnRlZCAodGFyZ2V0KSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlSW52ZXJzZSh0YXJnZXQsIHNvdXJjZSkge1xuICAgIHZhciBkZXQgPSBkZXRlcm1pbmFudChzb3VyY2UpO1xuICAgIGFzc2VydChkZXQgIT09IDAsIDMyKTsgLy8gVHJhbnNmb3JtYXRpb24gbWF0cml4IGNhbm5vdCBiZSBpbnZlcnRlZFxuICAgIHZhciBhID0gc291cmNlWzBdO1xuICAgIHZhciBiID0gc291cmNlWzFdO1xuICAgIHZhciBjID0gc291cmNlWzJdO1xuICAgIHZhciBkID0gc291cmNlWzNdO1xuICAgIHZhciBlID0gc291cmNlWzRdO1xuICAgIHZhciBmID0gc291cmNlWzVdO1xuICAgIHRhcmdldFswXSA9IGQgLyBkZXQ7XG4gICAgdGFyZ2V0WzFdID0gLWIgLyBkZXQ7XG4gICAgdGFyZ2V0WzJdID0gLWMgLyBkZXQ7XG4gICAgdGFyZ2V0WzNdID0gYSAvIGRldDtcbiAgICB0YXJnZXRbNF0gPSAoYyAqIGYgLSBkICogZSkgLyBkZXQ7XG4gICAgdGFyZ2V0WzVdID0gLShhICogZiAtIGIgKiBlKSAvIGRldDtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZXRlcm1pbmFudCBvZiB0aGUgZ2l2ZW4gbWF0cml4LlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBtYXQgTWF0cml4LlxuICogQHJldHVybiB7bnVtYmVyfSBEZXRlcm1pbmFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KG1hdCkge1xuICAgIHJldHVybiBtYXRbMF0gKiBtYXRbM10gLSBtYXRbMV0gKiBtYXRbMl07XG59XG4vKipcbiAqIEEgc3RyaW5nIHZlcnNpb24gb2YgdGhlIHRyYW5zZm9ybS4gIFRoaXMgY2FuIGJlIHVzZWRcbiAqIGZvciBDU1MgdHJhbnNmb3Jtcy5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gbWF0IE1hdHJpeC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRyYW5zZm9ybSBhcyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nKG1hdCkge1xuICAgIHJldHVybiAnbWF0cml4KCcgKyBtYXQuam9pbignLCAnKSArICcpJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50L0Nvcm5lclxuICovXG4vKipcbiAqIEV4dGVudCBjb3JuZXIuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQk9UVE9NX0xFRlQ6ICdib3R0b20tbGVmdCcsXG4gICAgQk9UVE9NX1JJR0hUOiAnYm90dG9tLXJpZ2h0JyxcbiAgICBUT1BfTEVGVDogJ3RvcC1sZWZ0JyxcbiAgICBUT1BfUklHSFQ6ICd0b3AtcmlnaHQnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvcm5lci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50XG4gKi9cbmltcG9ydCBDb3JuZXIgZnJvbSAnLi9leHRlbnQvQ29ybmVyLmpzJztcbmltcG9ydCBSZWxhdGlvbnNoaXAgZnJvbSAnLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGFuIGV4dGVudDogYFttaW54LCBtaW55LCBtYXh4LCBtYXh5XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gRXh0ZW50XG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQnVpbGQgYW4gZXh0ZW50IHRoYXQgaW5jbHVkZXMgYWxsIGdpdmVuIGNvb3JkaW5hdGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gQm91bmRpbmcgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYm91bmRpbmdFeHRlbnQoY29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geHMgWHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHlzIFlzLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZnVuY3Rpb24gX2JvdW5kaW5nRXh0ZW50WFlzKHhzLCB5cywgb3B0X2V4dGVudCkge1xuICAgIHZhciBtaW5YID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeHMpO1xuICAgIHZhciBtaW5ZID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeXMpO1xuICAgIHZhciBtYXhYID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeHMpO1xuICAgIHZhciBtYXhZID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeXMpO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogUmV0dXJuIGV4dGVudCBpbmNyZWFzZWQgYnkgdGhlIHByb3ZpZGVkIHZhbHVlLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVGhlIGFtb3VudCBieSB3aGljaCB0aGUgZXh0ZW50IHNob3VsZCBiZSBidWZmZXJlZC5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihleHRlbnQsIHZhbHVlLCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IGV4dGVudFswXSAtIHZhbHVlO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdIC0gdmFsdWU7XG4gICAgICAgIG9wdF9leHRlbnRbMl0gPSBleHRlbnRbMl0gKyB2YWx1ZTtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IGV4dGVudFszXSArIHZhbHVlO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBleHRlbnRbMF0gLSB2YWx1ZSxcbiAgICAgICAgICAgIGV4dGVudFsxXSAtIHZhbHVlLFxuICAgICAgICAgICAgZXh0ZW50WzJdICsgdmFsdWUsXG4gICAgICAgICAgICBleHRlbnRbM10gKyB2YWx1ZSxcbiAgICAgICAgXTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiBhbiBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQgdG8gY2xvbmUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBUaGUgY2xvbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShleHRlbnQsIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBleHRlbnQuc2xpY2UoKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENsb3Nlc3Qgc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWShleHRlbnQsIHgsIHkpIHtcbiAgICB2YXIgZHgsIGR5O1xuICAgIGlmICh4IDwgZXh0ZW50WzBdKSB7XG4gICAgICAgIGR4ID0gZXh0ZW50WzBdIC0geDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXh0ZW50WzJdIDwgeCkge1xuICAgICAgICBkeCA9IHggLSBleHRlbnRbMl07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkeCA9IDA7XG4gICAgfVxuICAgIGlmICh5IDwgZXh0ZW50WzFdKSB7XG4gICAgICAgIGR5ID0gZXh0ZW50WzFdIC0geTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXh0ZW50WzNdIDwgeSkge1xuICAgICAgICBkeSA9IHkgLSBleHRlbnRbM107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkeSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIGluIHRoZSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0Nvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5zWFkoZXh0ZW50LCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgb25lIGV4dGVudCBjb250YWlucyBhbm90aGVyLlxuICpcbiAqIEFuIGV4dGVudCBpcyBkZWVtZWQgY29udGFpbmVkIGlmIGl0IGxpZXMgY29tcGxldGVseSB3aXRoaW4gdGhlIG90aGVyIGV4dGVudCxcbiAqIGluY2x1ZGluZyBpZiB0aGV5IHNoYXJlIG9uZSBvciBtb3JlIGVkZ2VzLlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2Vjb25kIGV4dGVudCBpcyBjb250YWluZWQgYnkgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlXG4gKiAgICAgZmlyc3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0V4dGVudChleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdIDw9IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MlsyXSA8PSBleHRlbnQxWzJdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPD0gZXh0ZW50MlsxXSAmJlxuICAgICAgICBleHRlbnQyWzNdIDw9IGV4dGVudDFbM10pO1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIG9yIG9uIHRoZSBlZGdlIG9mIHRoZSBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geSBZIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgeCwgeSB2YWx1ZXMgYXJlIGNvbnRhaW5lZCBpbiB0aGUgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNYWShleHRlbnQsIHgsIHkpIHtcbiAgICByZXR1cm4gZXh0ZW50WzBdIDw9IHggJiYgeCA8PSBleHRlbnRbMl0gJiYgZXh0ZW50WzFdIDw9IHkgJiYgeSA8PSBleHRlbnRbM107XG59XG4vKipcbiAqIEdldCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYSBjb29yZGluYXRlIGFuZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLmRlZmF1bHR9IFRoZSByZWxhdGlvbnNoaXAgKGJpdHdpc2UgY29tcGFyZSB3aXRoXG4gKiAgICAgaW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLlJlbGF0aW9uc2hpcCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICAgIHZhciBtaW5YID0gZXh0ZW50WzBdO1xuICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgIHZhciBtYXhZID0gZXh0ZW50WzNdO1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5VTktOT1dOO1xuICAgIGlmICh4IDwgbWluWCkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuTEVGVDtcbiAgICB9XG4gICAgZWxzZSBpZiAoeCA+IG1heFgpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLlJJR0hUO1xuICAgIH1cbiAgICBpZiAoeSA8IG1pblkpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkJFTE9XO1xuICAgIH1cbiAgICBlbHNlIGlmICh5ID4gbWF4WSkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuQUJPVkU7XG4gICAgfVxuICAgIGlmIChyZWxhdGlvbnNoaXAgPT09IFJlbGF0aW9uc2hpcC5VTktOT1dOKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkc7XG4gICAgfVxuICAgIHJldHVybiByZWxhdGlvbnNoaXA7XG59XG4vKipcbiAqIENyZWF0ZSBhbiBlbXB0eSBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEVtcHR5IGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtcHR5KCkge1xuICAgIHJldHVybiBbSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eV07XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBleHRlbnQgb3IgdXBkYXRlIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IG1pblg7XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBtaW5ZO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gbWF4WDtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IG1heFk7XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBlbXB0eSBleHRlbnQgb3IgbWFrZSB0aGUgcHJvdmlkZWQgb25lIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKEluZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHksIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZSh4LCB5LCB4LCB5LCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgICByZXR1cm4gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcyk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCk7XG4gICAgcmV0dXJuIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gcmluZ3MgUmluZ3MuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21SaW5ncyhyaW5ncywgb3B0X2V4dGVudCkge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICAgIHJldHVybiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBhcmUgZXF1aXZhbGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdID09IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MVsyXSA9PSBleHRlbnQyWzJdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPT0gZXh0ZW50MlsxXSAmJlxuICAgICAgICBleHRlbnQxWzNdID09IGV4dGVudDJbM10pO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGFwcHJveGltYXRlbHkgZXF1aXZhbGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZSBpbiBleHRlbnQgY29vcmRpbmF0ZSB1bml0cy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBkaWZmZXIgYnkgbGVzcyB0aGFuIHRoZSB0b2xlcmFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHByb3hpbWF0ZWx5RXF1YWxzKGV4dGVudDEsIGV4dGVudDIsIHRvbGVyYW5jZSkge1xuICAgIHJldHVybiAoTWF0aC5hYnMoZXh0ZW50MVswXSAtIGV4dGVudDJbMF0pIDwgdG9sZXJhbmNlICYmXG4gICAgICAgIE1hdGguYWJzKGV4dGVudDFbMl0gLSBleHRlbnQyWzJdKSA8IHRvbGVyYW5jZSAmJlxuICAgICAgICBNYXRoLmFicyhleHRlbnQxWzFdIC0gZXh0ZW50MlsxXSkgPCB0b2xlcmFuY2UgJiZcbiAgICAgICAgTWF0aC5hYnMoZXh0ZW50MVszXSAtIGV4dGVudDJbM10pIDwgdG9sZXJhbmNlKTtcbn1cbi8qKlxuICogTW9kaWZ5IGFuIGV4dGVudCB0byBpbmNsdWRlIGFub3RoZXIgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgVGhlIGV4dGVudCB0byBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIFRoZSBleHRlbnQgdGhhdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBmaXJzdC5cbiAqIEByZXR1cm4ge0V4dGVudH0gQSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IChleHRlbmRlZCkgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICBpZiAoZXh0ZW50MlswXSA8IGV4dGVudDFbMF0pIHtcbiAgICAgICAgZXh0ZW50MVswXSA9IGV4dGVudDJbMF07XG4gICAgfVxuICAgIGlmIChleHRlbnQyWzJdID4gZXh0ZW50MVsyXSkge1xuICAgICAgICBleHRlbnQxWzJdID0gZXh0ZW50MlsyXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDJbMV0gPCBleHRlbnQxWzFdKSB7XG4gICAgICAgIGV4dGVudDFbMV0gPSBleHRlbnQyWzFdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MlszXSA+IGV4dGVudDFbM10pIHtcbiAgICAgICAgZXh0ZW50MVszXSA9IGV4dGVudDJbM107XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQxO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgaWYgKGNvb3JkaW5hdGVbMF0gPCBleHRlbnRbMF0pIHtcbiAgICAgICAgZXh0ZW50WzBdID0gY29vcmRpbmF0ZVswXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMF0gPiBleHRlbnRbMl0pIHtcbiAgICAgICAgZXh0ZW50WzJdID0gY29vcmRpbmF0ZVswXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMV0gPCBleHRlbnRbMV0pIHtcbiAgICAgICAgZXh0ZW50WzFdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMV0gPiBleHRlbnRbM10pIHtcbiAgICAgICAgZXh0ZW50WzNdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIGNvb3JkaW5hdGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgZXh0ZW5kWFkoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IHJpbmdzIFJpbmdzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmluZ3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIHJpbmdzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZFhZKGV4dGVudCwgeCwgeSkge1xuICAgIGV4dGVudFswXSA9IE1hdGgubWluKGV4dGVudFswXSwgeCk7XG4gICAgZXh0ZW50WzFdID0gTWF0aC5taW4oZXh0ZW50WzFdLCB5KTtcbiAgICBleHRlbnRbMl0gPSBNYXRoLm1heChleHRlbnRbMl0sIHgpO1xuICAgIGV4dGVudFszXSA9IE1hdGgubWF4KGV4dGVudFszXSwgeSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gSWYgdGhlXG4gKiBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoYXQgdmFsdWVcbiAqIGltbWVkaWF0ZWx5LiBPdGhlcndpc2UgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFN9IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHJldHVybiB7U3xib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBTXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoQ29ybmVyKGV4dGVudCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdmFsO1xuICAgIHZhbCA9IGNhbGxiYWNrKGdldEJvdHRvbUxlZnQoZXh0ZW50KSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICB2YWwgPSBjYWxsYmFjayhnZXRCb3R0b21SaWdodChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHZhbCA9IGNhbGxiYWNrKGdldFRvcFJpZ2h0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0VG9wTGVmdChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogR2V0IHRoZSBzaXplIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShleHRlbnQpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgaWYgKCFpc0VtcHR5KGV4dGVudCkpIHtcbiAgICAgICAgYXJlYSA9IGdldFdpZHRoKGV4dGVudCkgKiBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIEdldCB0aGUgYm90dG9tIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tTGVmdChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFswXSwgZXh0ZW50WzFdXTtcbn1cbi8qKlxuICogR2V0IHRoZSBib3R0b20gcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdHRvbVJpZ2h0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzJdLCBleHRlbnRbMV1dO1xufVxuLyoqXG4gKiBHZXQgdGhlIGNlbnRlciBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENlbnRlci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlcihleHRlbnQpIHtcbiAgICByZXR1cm4gWyhleHRlbnRbMF0gKyBleHRlbnRbMl0pIC8gMiwgKGV4dGVudFsxXSArIGV4dGVudFszXSkgLyAyXTtcbn1cbi8qKlxuICogR2V0IGEgY29ybmVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50L0Nvcm5lci5qc1wiKS5kZWZhdWx0fSBjb3JuZXIgQ29ybmVyLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvcm5lciBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSB7XG4gICAgdmFyIGNvb3JkaW5hdGU7XG4gICAgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9MRUZUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9SSUdIVCkge1xuICAgICAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX0xFRlQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX1JJR0hUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAxMyk7IC8vIEludmFsaWQgY29ybmVyXG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmxhcmdlZCBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5sYXJnZWRBcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICB2YXIgbWluWCA9IE1hdGgubWluKGV4dGVudDFbMF0sIGV4dGVudDJbMF0pO1xuICAgIHZhciBtaW5ZID0gTWF0aC5taW4oZXh0ZW50MVsxXSwgZXh0ZW50MlsxXSk7XG4gICAgdmFyIG1heFggPSBNYXRoLm1heChleHRlbnQxWzJdLCBleHRlbnQyWzJdKTtcbiAgICB2YXIgbWF4WSA9IE1hdGgubWF4KGV4dGVudDFbM10sIGV4dGVudDJbM10pO1xuICAgIHJldHVybiAobWF4WCAtIG1pblgpICogKG1heFkgLSBtaW5ZKTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGR4ID0gKHJlc29sdXRpb24gKiBzaXplWzBdKSAvIDI7XG4gICAgdmFyIGR5ID0gKHJlc29sdXRpb24gKiBzaXplWzFdKSAvIDI7XG4gICAgdmFyIGNvc1JvdGF0aW9uID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgIHZhciBzaW5Sb3RhdGlvbiA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgICB2YXIgeENvcyA9IGR4ICogY29zUm90YXRpb247XG4gICAgdmFyIHhTaW4gPSBkeCAqIHNpblJvdGF0aW9uO1xuICAgIHZhciB5Q29zID0gZHkgKiBjb3NSb3RhdGlvbjtcbiAgICB2YXIgeVNpbiA9IGR5ICogc2luUm90YXRpb247XG4gICAgdmFyIHggPSBjZW50ZXJbMF07XG4gICAgdmFyIHkgPSBjZW50ZXJbMV07XG4gICAgdmFyIHgwID0geCAtIHhDb3MgKyB5U2luO1xuICAgIHZhciB4MSA9IHggLSB4Q29zIC0geVNpbjtcbiAgICB2YXIgeDIgPSB4ICsgeENvcyAtIHlTaW47XG4gICAgdmFyIHgzID0geCArIHhDb3MgKyB5U2luO1xuICAgIHZhciB5MCA9IHkgLSB4U2luIC0geUNvcztcbiAgICB2YXIgeTEgPSB5IC0geFNpbiArIHlDb3M7XG4gICAgdmFyIHkyID0geSArIHhTaW4gKyB5Q29zO1xuICAgIHZhciB5MyA9IHkgKyB4U2luIC0geUNvcztcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoTWF0aC5taW4oeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1pbih5MCwgeTEsIHkyLCB5MyksIE1hdGgubWF4KHgwLCB4MSwgeDIsIHgzKSwgTWF0aC5tYXgoeTAsIHkxLCB5MiwgeTMpLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogR2V0IHRoZSBoZWlnaHQgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhlaWdodChleHRlbnQpIHtcbiAgICByZXR1cm4gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBJbnRlcnNlY3Rpb24gYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbkFyZWEoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Mik7XG4gICAgcmV0dXJuIGdldEFyZWEoaW50ZXJzZWN0aW9uKTtcbn1cbi8qKlxuICogR2V0IHRoZSBpbnRlcnNlY3Rpb24gb2YgdHdvIGV4dGVudHMuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IE9wdGlvbmFsIGV4dGVudCB0byBwb3B1bGF0ZSB3aXRoIGludGVyc2VjdGlvbi5cbiAqIEByZXR1cm4ge0V4dGVudH0gSW50ZXJzZWN0aW5nIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbihleHRlbnQxLCBleHRlbnQyLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IG9wdF9leHRlbnQgPyBvcHRfZXh0ZW50IDogY3JlYXRlRW1wdHkoKTtcbiAgICBpZiAoaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSkge1xuICAgICAgICBpZiAoZXh0ZW50MVswXSA+IGV4dGVudDJbMF0pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblswXSA9IGV4dGVudDFbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMF0gPSBleHRlbnQyWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRlbnQxWzFdID4gZXh0ZW50MlsxXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzFdID0gZXh0ZW50MVsxXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsxXSA9IGV4dGVudDJbMV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dGVudDFbMl0gPCBleHRlbnQyWzJdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMl0gPSBleHRlbnQxWzJdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzJdID0gZXh0ZW50MlsyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0ZW50MVszXSA8IGV4dGVudDJbM10pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblszXSA9IGV4dGVudDFbM107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bM10gPSBleHRlbnQyWzNdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjcmVhdGVPclVwZGF0ZUVtcHR5KGludGVyc2VjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBNYXJnaW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJnaW4oZXh0ZW50KSB7XG4gICAgcmV0dXJuIGdldFdpZHRoKGV4dGVudCkgKyBnZXRIZWlnaHQoZXh0ZW50KTtcbn1cbi8qKlxuICogR2V0IHRoZSBzaXplICh3aWR0aCwgaGVpZ2h0KSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVGhlIGV4dGVudCBzaXplLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2l6ZShleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFsyXSAtIGV4dGVudFswXSwgZXh0ZW50WzNdIC0gZXh0ZW50WzFdXTtcbn1cbi8qKlxuICogR2V0IHRoZSB0b3AgbGVmdCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRvcCBsZWZ0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BMZWZ0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbM11dO1xufVxuLyoqXG4gKiBHZXQgdGhlIHRvcCByaWdodCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRvcCByaWdodCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wUmlnaHQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMl0sIGV4dGVudFszXV07XG59XG4vKipcbiAqIEdldCB0aGUgd2lkdGggb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lkdGgoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGV4dGVudFsyXSAtIGV4dGVudFswXTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIG9uZSBleHRlbnQgaW50ZXJzZWN0cyBhbm90aGVyLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdHdvIGV4dGVudHMgaW50ZXJzZWN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdIDw9IGV4dGVudDJbMl0gJiZcbiAgICAgICAgZXh0ZW50MVsyXSA+PSBleHRlbnQyWzBdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPD0gZXh0ZW50MlszXSAmJlxuICAgICAgICBleHRlbnQxWzNdID49IGV4dGVudDJbMV0pO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gZXh0ZW50IGlzIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGV4dGVudFsyXSA8IGV4dGVudFswXSB8fCBleHRlbnRbM10gPCBleHRlbnRbMV07XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV0dXJuT3JVcGRhdGUoZXh0ZW50LCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IGV4dGVudFswXTtcbiAgICAgICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IGV4dGVudFsyXTtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IGV4dGVudFszXTtcbiAgICAgICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUZyb21DZW50ZXIoZXh0ZW50LCB2YWx1ZSkge1xuICAgIHZhciBkZWx0YVggPSAoKGV4dGVudFsyXSAtIGV4dGVudFswXSkgLyAyKSAqICh2YWx1ZSAtIDEpO1xuICAgIHZhciBkZWx0YVkgPSAoKGV4dGVudFszXSAtIGV4dGVudFsxXSkgLyAyKSAqICh2YWx1ZSAtIDEpO1xuICAgIGV4dGVudFswXSAtPSBkZWx0YVg7XG4gICAgZXh0ZW50WzJdICs9IGRlbHRhWDtcbiAgICBleHRlbnRbMV0gLT0gZGVsdGFZO1xuICAgIGV4dGVudFszXSArPSBkZWx0YVk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgc2VnbWVudCBiZXR3ZWVuIHR3byBjb29yZGluYXRlcyBpbnRlcnNlY3RzIChjcm9zc2VzLFxuICogdG91Y2hlcywgb3IgaXMgY29udGFpbmVkIGJ5KSB0aGUgcHJvdmlkZWQgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gc3RhcnQgU2VnbWVudCBzdGFydCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZW5kIFNlZ21lbnQgZW5kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2VnbWVudCBpbnRlcnNlY3RzIHRoZSBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzU2VnbWVudChleHRlbnQsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaW50ZXJzZWN0cyA9IGZhbHNlO1xuICAgIHZhciBzdGFydFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBzdGFydCk7XG4gICAgdmFyIGVuZFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBlbmQpO1xuICAgIGlmIChzdGFydFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORyB8fFxuICAgICAgICBlbmRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkcpIHtcbiAgICAgICAgaW50ZXJzZWN0cyA9IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICAgICAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gICAgICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgICAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHN0YXJ0WzBdO1xuICAgICAgICB2YXIgc3RhcnRZID0gc3RhcnRbMV07XG4gICAgICAgIHZhciBlbmRYID0gZW5kWzBdO1xuICAgICAgICB2YXIgZW5kWSA9IGVuZFsxXTtcbiAgICAgICAgdmFyIHNsb3BlID0gKGVuZFkgLSBzdGFydFkpIC8gKGVuZFggLSBzdGFydFgpO1xuICAgICAgICB2YXIgeCA9IHZvaWQgMCwgeSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKCEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkgJiYgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgdG9wXG4gICAgICAgICAgICB4ID0gZW5kWCAtIChlbmRZIC0gbWF4WSkgLyBzbG9wZTtcbiAgICAgICAgICAgIGludGVyc2VjdHMgPSB4ID49IG1pblggJiYgeCA8PSBtYXhYO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyAmJlxuICAgICAgICAgICAgISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLlJJR0hUKSAmJlxuICAgICAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgcmlnaHRcbiAgICAgICAgICAgIHkgPSBlbmRZIC0gKGVuZFggLSBtYXhYKSAqIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHkgPj0gbWluWSAmJiB5IDw9IG1heFk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuQkVMT1cpICYmXG4gICAgICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkJFTE9XKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBib3R0b21cbiAgICAgICAgICAgIHggPSBlbmRYIC0gKGVuZFkgLSBtaW5ZKSAvIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkgJiZcbiAgICAgICAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgbGVmdFxuICAgICAgICAgICAgeSA9IGVuZFkgLSAoZW5kWCAtIG1pblgpICogc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW50ZXJzZWN0cztcbn1cbi8qKlxuICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIENhbGxlZCB3aXRoIGBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV1gIGV4dGVudCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zdG9wcyBOdW1iZXIgb2Ygc3RvcHMgcGVyIHNpZGUgdXNlZCBmb3IgdGhlIHRyYW5zZm9ybS5cbiAqIEJ5IGRlZmF1bHQgb25seSB0aGUgY29ybmVycyBhcmUgdXNlZC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1Gbiwgb3B0X2V4dGVudCwgb3B0X3N0b3BzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gW107XG4gICAgaWYgKG9wdF9zdG9wcyA+IDEpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gZXh0ZW50WzJdIC0gZXh0ZW50WzBdO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdF9zdG9wczsgKytpKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKGV4dGVudFswXSArICh3aWR0aCAqIGkpIC8gb3B0X3N0b3BzLCBleHRlbnRbMV0sIGV4dGVudFsyXSwgZXh0ZW50WzFdICsgKGhlaWdodCAqIGkpIC8gb3B0X3N0b3BzLCBleHRlbnRbMl0gLSAod2lkdGggKiBpKSAvIG9wdF9zdG9wcywgZXh0ZW50WzNdLCBleHRlbnRbMF0sIGV4dGVudFszXSAtIChoZWlnaHQgKiBpKSAvIG9wdF9zdG9wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gW1xuICAgICAgICAgICAgZXh0ZW50WzBdLFxuICAgICAgICAgICAgZXh0ZW50WzFdLFxuICAgICAgICAgICAgZXh0ZW50WzJdLFxuICAgICAgICAgICAgZXh0ZW50WzFdLFxuICAgICAgICAgICAgZXh0ZW50WzJdLFxuICAgICAgICAgICAgZXh0ZW50WzNdLFxuICAgICAgICAgICAgZXh0ZW50WzBdLFxuICAgICAgICAgICAgZXh0ZW50WzNdLFxuICAgICAgICBdO1xuICAgIH1cbiAgICB0cmFuc2Zvcm1Gbihjb29yZGluYXRlcywgY29vcmRpbmF0ZXMsIDIpO1xuICAgIHZhciB4cyA9IFtdO1xuICAgIHZhciB5cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7XG4gICAgICAgIHhzLnB1c2goY29vcmRpbmF0ZXNbaV0pO1xuICAgICAgICB5cy5wdXNoKGNvb3JkaW5hdGVzW2kgKyAxXSk7XG4gICAgfVxuICAgIHJldHVybiBfYm91bmRpbmdFeHRlbnRYWXMoeHMsIHlzLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGV4dGVudCBpbi1wbGFjZSB0byBiZSB3aXRoaW4gdGhlIHJlYWwgd29ybGRcbiAqIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IFRoZSBleHRlbnQgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGV4dGVudCwgcHJvamVjdGlvbikge1xuICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgY2VudGVyID0gZ2V0Q2VudGVyKGV4dGVudCk7XG4gICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgICAgICAoY2VudGVyWzBdIDwgcHJvamVjdGlvbkV4dGVudFswXSB8fCBjZW50ZXJbMF0gPj0gcHJvamVjdGlvbkV4dGVudFsyXSkpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmZsb29yKChjZW50ZXJbMF0gLSBwcm9qZWN0aW9uRXh0ZW50WzBdKSAvIHdvcmxkV2lkdGgpO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gd29ybGRzQXdheSAqIHdvcmxkV2lkdGg7XG4gICAgICAgIGV4dGVudFswXSAtPSBvZmZzZXQ7XG4gICAgICAgIGV4dGVudFsyXSAtPSBvZmZzZXQ7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudC9SZWxhdGlvbnNoaXBcbiAqL1xuLyoqXG4gKiBSZWxhdGlvbnNoaXAgdG8gYW4gZXh0ZW50LlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFVOS05PV046IDAsXG4gICAgSU5URVJTRUNUSU5HOiAxLFxuICAgIEFCT1ZFOiAyLFxuICAgIFJJR0hUOiA0LFxuICAgIEJFTE9XOiA4LFxuICAgIExFRlQ6IDE2LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlbGF0aW9uc2hpcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9Qcm9qZWN0aW9uXG4gKi9cbmltcG9ydCB7IE1FVEVSU19QRVJfVU5JVCB9IGZyb20gJy4vVW5pdHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29kZSBUaGUgU1JTIGlkZW50aWZpZXIgY29kZSwgZS5nLiBgRVBTRzo0MzI2YC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fHN0cmluZ30gW3VuaXRzXSBVbml0cy4gUmVxdWlyZWQgdW5sZXNzIGFcbiAqIHByb2o0IHByb2plY3Rpb24gaXMgZGVmaW5lZCBmb3IgYGNvZGVgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtheGlzT3JpZW50YXRpb249J2VudSddIFRoZSBheGlzIG9yaWVudGF0aW9uIGFzIHNwZWNpZmllZCBpbiBQcm9qNC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dsb2JhbD1mYWxzZV0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyB2YWxpZCBmb3IgdGhlIHdob2xlIGdsb2JlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttZXRlcnNQZXJVbml0XSBUaGUgbWV0ZXJzIHBlciB1bml0IGZvciB0aGUgU1JTLlxuICogSWYgbm90IHByb3ZpZGVkLCB0aGUgYHVuaXRzYCBhcmUgdXNlZCB0byBnZXQgdGhlIG1ldGVycyBwZXIgdW5pdCBmcm9tIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovVW5pdHN+TUVURVJTX1BFUl9VTklUfVxuICogbG9va3VwIHRhYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbd29ybGRFeHRlbnRdIFRoZSB3b3JsZCBleHRlbnQgZm9yIHRoZSBTUlMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IFtnZXRQb2ludFJlc29sdXRpb25dXG4gKiBGdW5jdGlvbiB0byBkZXRlcm1pbmUgcmVzb2x1dGlvbiBhdCBhIHBvaW50LiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICogYHtudW1iZXJ9YCB2aWV3IHJlc29sdXRpb24gYW5kIGFuIGB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfWAgYXMgYXJndW1lbnRzLCBhbmQgcmV0dXJuc1xuICogdGhlIGB7bnVtYmVyfWAgcmVzb2x1dGlvbiBpbiBwcm9qZWN0aW9uIHVuaXRzIGF0IHRoZSBwYXNzZWQgY29vcmRpbmF0ZS4gSWYgdGhpcyBpcyBgdW5kZWZpbmVkYCxcbiAqIHRoZSBkZWZhdWx0IHtAbGluayBtb2R1bGU6b2wvcHJvaiNnZXRQb2ludFJlc29sdXRpb259IGZ1bmN0aW9uIHdpbGwgYmUgdXNlZC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIGRlZmluaXRpb24gY2xhc3MuIE9uZSBvZiB0aGVzZSBpcyBjcmVhdGVkIGZvciBlYWNoIHByb2plY3Rpb25cbiAqIHN1cHBvcnRlZCBpbiB0aGUgYXBwbGljYXRpb24gYW5kIHN0b3JlZCBpbiB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qfSBuYW1lc3BhY2UuXG4gKiBZb3UgY2FuIHVzZSB0aGVzZSBpbiBhcHBsaWNhdGlvbnMsIGJ1dCB0aGlzIGlzIG5vdCByZXF1aXJlZCwgYXMgQVBJIHBhcmFtc1xuICogYW5kIG9wdGlvbnMgdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvan5Qcm9qZWN0aW9uTGlrZX0gd2hpY2ggbWVhbnMgdGhlIHNpbXBsZSBzdHJpbmdcbiAqIGNvZGUgd2lsbCBzdWZmaWNlLlxuICpcbiAqIFlvdSBjYW4gdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvan5nZXR9IHRvIHJldHJpZXZlIHRoZSBvYmplY3QgZm9yIGEgcGFydGljdWxhclxuICogcHJvamVjdGlvbi5cbiAqXG4gKiBUaGUgbGlicmFyeSBpbmNsdWRlcyBkZWZpbml0aW9ucyBmb3IgYEVQU0c6NDMyNmAgYW5kIGBFUFNHOjM4NTdgLCB0b2dldGhlclxuICogd2l0aCB0aGUgZm9sbG93aW5nIGFsaWFzZXM6XG4gKiAqIGBFUFNHOjQzMjZgOiBDUlM6ODQsIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2LFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0LCB1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYsXG4gKiAgICAgdXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2XG4gKiAqIGBFUFNHOjM4NTdgOiBFUFNHOjEwMjEwMCwgRVBTRzoxMDIxMTMsIEVQU0c6OTAwOTEzLFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3LFxuICogICAgIGh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3XG4gKlxuICogSWYgeW91IHVzZSBbcHJvajRqc10oaHR0cHM6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcyksIGFsaWFzZXMgY2FuXG4gKiBiZSBhZGRlZCB1c2luZyBgcHJvajQuZGVmcygpYC4gQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlXG4gKiBhZGRlZCwgY2FsbCB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qL3Byb2o0fnJlZ2lzdGVyfSBmdW5jdGlvbi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBQcm9qZWN0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJvamVjdGlvbihvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb2RlXyA9IG9wdGlvbnMuY29kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuaXRzIG9mIHByb2plY3RlZCBjb29yZGluYXRlcy4gV2hlbiBzZXQgdG8gYFRJTEVfUElYRUxTYCwgYVxuICAgICAgICAgKiBgdGhpcy5leHRlbnRfYCBhbmQgYHRoaXMud29ybGRFeHRlbnRfYCBtdXN0IGJlIGNvbmZpZ3VyZWQgcHJvcGVybHkgZm9yIGVhY2hcbiAgICAgICAgICogdGlsZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudW5pdHNfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9ICovIChvcHRpb25zLnVuaXRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbGlkaXR5IGV4dGVudCBvZiB0aGUgcHJvamVjdGlvbiBpbiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIEZvciBwcm9qZWN0aW9uc1xuICAgICAgICAgKiB3aXRoIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgICAgICAgKiB0aWxlIHBpeGVsIHNwYWNlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmV4dGVudCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeHRlbnQgb2YgdGhlIHdvcmxkIGluIEVQU0c6NDMyNi4gRm9yIHByb2plY3Rpb25zIHdpdGhcbiAgICAgICAgICogYFRJTEVfUElYRUxTYCB1bml0cywgdGhpcyBpcyB0aGUgZXh0ZW50IG9mIHRoZSB0aWxlIGluXG4gICAgICAgICAqIHByb2plY3RlZCBjb29yZGluYXRlIHNwYWNlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud29ybGRFeHRlbnRfID1cbiAgICAgICAgICAgIG9wdGlvbnMud29ybGRFeHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud29ybGRFeHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXhpc09yaWVudGF0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmF4aXNPcmllbnRhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5heGlzT3JpZW50YXRpb24gOiAnZW51JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nbG9iYWxfID0gb3B0aW9ucy5nbG9iYWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZ2xvYmFsIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIHRoaXMuZXh0ZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gb3B0aW9ucy5nZXRQb2ludFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdFRpbGVHcmlkXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWV0ZXJzUGVyVW5pdF8gPSBvcHRpb25zLm1ldGVyc1BlclVuaXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBwcm9qZWN0aW9uIGlzIHN1aXRhYmxlIGZvciB3cmFwcGluZyB0aGUgeC1heGlzXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuY2FuV3JhcFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbldyYXBYXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29kZSBmb3IgdGhpcyBwcm9qZWN0aW9uLCBlLmcuICdFUFNHOjQzMjYnLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gQ29kZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0Q29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB1bml0cyBvZiB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fSBVbml0cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0VW5pdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaXRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW1vdW50IG9mIG1ldGVycyBwZXIgdW5pdCBvZiB0aGlzIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBpc1xuICAgICAqIG5vdCBjb25maWd1cmVkIHdpdGggYG1ldGVyc1BlclVuaXRgIG9yIGEgdW5pdHMgaWRlbnRpZmllciwgdGhlIHJldHVybiBpc1xuICAgICAqIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IE1ldGVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0TWV0ZXJzUGVyVW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0ZXJzUGVyVW5pdF8gfHwgTUVURVJTX1BFUl9VTklUW3RoaXMudW5pdHNfXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRXb3JsZEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29ybGRFeHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBheGlzIG9yaWVudGF0aW9uIG9mIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBFeGFtcGxlIHZhbHVlcyBhcmU6XG4gICAgICogZW51IC0gdGhlIGRlZmF1bHQgZWFzdGluZywgbm9ydGhpbmcsIGVsZXZhdGlvbi5cbiAgICAgKiBuZXUgLSBub3J0aGluZywgZWFzdGluZywgdXAgLSB1c2VmdWwgZm9yIFwibGF0L2xvbmdcIiBnZW9ncmFwaGljIGNvb3JkaW5hdGVzLFxuICAgICAqICAgICBvciBzb3V0aCBvcmllbnRhdGVkIHRyYW5zdmVyc2UgbWVyY2F0b3IuXG4gICAgICogd251IC0gd2VzdGluZywgbm9ydGhpbmcsIHVwIC0gc29tZSBwbGFuZXRhcnkgY29vcmRpbmF0ZSBzeXN0ZW1zIGhhdmVcbiAgICAgKiAgICAgXCJ3ZXN0IHBvc2l0aXZlXCIgY29vcmRpbmF0ZSBzeXN0ZW1zXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBBeGlzIG9yaWVudGF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRBeGlzT3JpZW50YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF4aXNPcmllbnRhdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJcyB0aGlzIHByb2plY3Rpb24gYSBnbG9iYWwgcHJvamVjdGlvbiB3aGljaCBzcGFucyB0aGUgd2hvbGUgd29ybGQ/XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyBnbG9iYWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmlzR2xvYmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWxfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGlmIHRoZSBwcm9qZWN0aW9uIGlzIGEgZ2xvYmFsIHByb2plY3Rpb24gd2hpY2ggc3BhbnMgdGhlIHdob2xlIHdvcmxkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBnbG9iYWwgV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyBnbG9iYWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldEdsb2JhbCA9IGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdGhpcy5nbG9iYWxfID0gZ2xvYmFsO1xuICAgICAgICB0aGlzLmNhbldyYXBYXyA9ICEhKGdsb2JhbCAmJiB0aGlzLmV4dGVudF8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFRpbGVHcmlkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uICh0aWxlR3JpZCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRUaWxlR3JpZF8gPSB0aWxlR3JpZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IGV4dGVudDtcbiAgICAgICAgdGhpcy5jYW5XcmFwWF8gPSAhISh0aGlzLmdsb2JhbF8gJiYgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB3b3JsZEV4dGVudCBXb3JsZCBleHRlbnRcbiAgICAgKiAgICAgW21pbmxvbiwgbWlubGF0LCBtYXhsb24sIG1heGxhdF0uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldFdvcmxkRXh0ZW50ID0gZnVuY3Rpb24gKHdvcmxkRXh0ZW50KSB7XG4gICAgICAgIHRoaXMud29ybGRFeHRlbnRfID0gd29ybGRFeHRlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGdldFBvaW50UmVzb2x1dGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBtb2R1bGU6b2wvcHJvan5nZXRQb2ludFJlc29sdXRpb259XG4gICAgICogZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IGZ1bmMgRnVuY3Rpb25cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0R2V0UG9pbnRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgdGhpcy5nZXRQb2ludFJlc29sdXRpb25GdW5jXyA9IGZ1bmM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1c3RvbSBwb2ludCByZXNvbHV0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIHByb2plY3Rpb24gKGlmIHNldCkuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9IFRoZSBjdXN0b20gcG9pbnRcbiAgICAgKiByZXNvbHV0aW9uIGZ1bmN0aW9uIChpZiBzZXQpLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldFBvaW50UmVzb2x1dGlvbkZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfO1xuICAgIH07XG4gICAgcmV0dXJuIFByb2plY3Rpb247XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUHJvamVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb2plY3Rpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL21hdGhcbiAqL1xuLyoqXG4gKiBUYWtlcyBhIG51bWJlciBhbmQgY2xhbXBzIGl0IHRvIHdpdGhpbiB0aGUgcHJvdmlkZWQgYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIFRoZSBtaW5pbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggVGhlIG1heGltdW0gdmFsdWUgdG8gcmV0dXJuLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5wdXQgbnVtYmVyIGlmIGl0IGlzIHdpdGhpbiBib3VuZHMsIG9yIHRoZSBuZWFyZXN0XG4gKiAgICAgbnVtYmVyIHdpdGhpbiB0aGUgYm91bmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIGh5cGVyYm9saWMgY29zaW5lIG9mIGEgZ2l2ZW4gbnVtYmVyLiBUaGUgbWV0aG9kIHdpbGwgdXNlIHRoZVxuICogbmF0aXZlIGBNYXRoLmNvc2hgIGZ1bmN0aW9uIGlmIGl0IGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHRoZSBoeXBlcmJvbGljXG4gKiBjb3NpbmUgd2lsbCBiZSBjYWxjdWxhdGVkIHZpYSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBNb3ppbGxhXG4gKiBkZXZlbG9wZXIgbmV0d29yay5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHJldHVybiB7bnVtYmVyfSBIeXBlcmJvbGljIGNvc2luZSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGNvc2ggPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gICAgdmFyIGNvc2g7XG4gICAgaWYgKCdjb3NoJyBpbiBNYXRoKSB7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyB0aGUgbmF0aXZlIE1hdGguY29zaCBmdW5jdGlvbiwgdXNlIGl04oCmXG4gICAgICAgIGNvc2ggPSBNYXRoLmNvc2g7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyDigKYgZWxzZSwgdXNlIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgTUROOlxuICAgICAgICBjb3NoID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHZhciB5ID0gLyoqIEB0eXBlIHtNYXRofSAqLyAoTWF0aCkuZXhwKHgpO1xuICAgICAgICAgICAgcmV0dXJuICh5ICsgMSAvIHkpIC8gMjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGNvc2g7XG59KSgpO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGJhc2UgMiBsb2dhcml0aG0gb2YgYSBnaXZlbiBudW1iZXIuIFRoZSBtZXRob2Qgd2lsbCB1c2UgdGhlXG4gKiBuYXRpdmUgYE1hdGgubG9nMmAgZnVuY3Rpb24gaWYgaXQgaXMgYXZhaWxhYmxlLCBvdGhlcndpc2UgdGhlIGJhc2UgMlxuICogbG9nYXJpdGhtIHdpbGwgYmUgY2FsY3VsYXRlZCB2aWEgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAqIE1vemlsbGEgZGV2ZWxvcGVyIG5ldHdvcmsuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEByZXR1cm4ge251bWJlcn0gQmFzZSAyIGxvZ2FyaXRobSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGxvZzIgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gICAgdmFyIGxvZzI7XG4gICAgaWYgKCdsb2cyJyBpbiBNYXRoKSB7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyB0aGUgbmF0aXZlIE1hdGgubG9nMiBmdW5jdGlvbiwgdXNlIGl04oCmXG4gICAgICAgIGxvZzIgPSBNYXRoLmxvZzI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyDigKYgZWxzZSwgdXNlIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgTUROOlxuICAgICAgICBsb2cyID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmxvZyh4KSAqIE1hdGguTE9HMkU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBsb2cyO1xufSkoKTtcbi8qKlxuICogUmV0dXJucyB0aGUgc3F1YXJlIG9mIHRoZSBjbG9zZXN0IGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50ICh4LCB5KSBhbmQgdGhlXG4gKiBsaW5lIHNlZ21lbnQgKHgxLCB5MSkgdG8gKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgaWYgKGR4ICE9PSAwIHx8IGR5ICE9PSAwKSB7XG4gICAgICAgIHZhciB0ID0gKCh4IC0geDEpICogZHggKyAoeSAtIHkxKSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIGlmICh0ID4gMSkge1xuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodCA+IDApIHtcbiAgICAgICAgICAgIHgxICs9IGR4ICogdDtcbiAgICAgICAgICAgIHkxICs9IGR5ICogdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlKHgsIHksIHgxLCB5MSk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzICh4MSwgeTEpIGFuZCAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5Mikge1xuICAgIHZhciBkeCA9IHgyIC0geDE7XG4gICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG4vKipcbiAqIFNvbHZlcyBzeXN0ZW0gb2YgbGluZWFyIGVxdWF0aW9ucyB1c2luZyBHYXVzc2lhbiBlbGltaW5hdGlvbiBtZXRob2QuXG4gKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gbWF0IEF1Z21lbnRlZCBtYXRyaXggKG4geCBuICsgMSBjb2x1bW4pXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiByb3ctbWFqb3Igb3JkZXIuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgcmVzdWx0aW5nIHZlY3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbHZlTGluZWFyU3lzdGVtKG1hdCkge1xuICAgIHZhciBuID0gbWF0Lmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAvLyBGaW5kIG1heCBpbiB0aGUgaS10aCBjb2x1bW4gKGlnbm9yaW5nIGkgLSAxIGZpcnN0IHJvd3MpXG4gICAgICAgIHZhciBtYXhSb3cgPSBpO1xuICAgICAgICB2YXIgbWF4RWwgPSBNYXRoLmFicyhtYXRbaV1baV0pO1xuICAgICAgICBmb3IgKHZhciByID0gaSArIDE7IHIgPCBuOyByKyspIHtcbiAgICAgICAgICAgIHZhciBhYnNWYWx1ZSA9IE1hdGguYWJzKG1hdFtyXVtpXSk7XG4gICAgICAgICAgICBpZiAoYWJzVmFsdWUgPiBtYXhFbCkge1xuICAgICAgICAgICAgICAgIG1heEVsID0gYWJzVmFsdWU7XG4gICAgICAgICAgICAgICAgbWF4Um93ID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4RWwgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBtYXRyaXggaXMgc2luZ3VsYXJcbiAgICAgICAgfVxuICAgICAgICAvLyBTd2FwIG1heCByb3cgd2l0aCBpLXRoIChjdXJyZW50KSByb3dcbiAgICAgICAgdmFyIHRtcCA9IG1hdFttYXhSb3ddO1xuICAgICAgICBtYXRbbWF4Um93XSA9IG1hdFtpXTtcbiAgICAgICAgbWF0W2ldID0gdG1wO1xuICAgICAgICAvLyBTdWJ0cmFjdCB0aGUgaS10aCByb3cgdG8gbWFrZSBhbGwgdGhlIHJlbWFpbmluZyByb3dzIDAgaW4gdGhlIGktdGggY29sdW1uXG4gICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IG47IGorKykge1xuICAgICAgICAgICAgdmFyIGNvZWYgPSAtbWF0W2pdW2ldIC8gbWF0W2ldW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IGk7IGsgPCBuICsgMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gaykge1xuICAgICAgICAgICAgICAgICAgICBtYXRbal1ba10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0W2pdW2tdICs9IGNvZWYgKiBtYXRbaV1ba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNvbHZlIEF4PWIgZm9yIHVwcGVyIHRyaWFuZ3VsYXIgbWF0cml4IEEgKG1hdClcbiAgICB2YXIgeCA9IG5ldyBBcnJheShuKTtcbiAgICBmb3IgKHZhciBsID0gbiAtIDE7IGwgPj0gMDsgbC0tKSB7XG4gICAgICAgIHhbbF0gPSBtYXRbbF1bbl0gLyBtYXRbbF1bbF07XG4gICAgICAgIGZvciAodmFyIG0gPSBsIC0gMTsgbSA+PSAwOyBtLS0pIHtcbiAgICAgICAgICAgIG1hdFttXVtuXSAtPSBtYXRbbV1bbF0gKiB4W2xdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4O1xufVxuLyoqXG4gKiBDb252ZXJ0cyByYWRpYW5zIHRvIHRvIGRlZ3JlZXMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5SYWRpYW5zIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIGluIGRlZ3JlZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RlZ3JlZXMoYW5nbGVJblJhZGlhbnMpIHtcbiAgICByZXR1cm4gKGFuZ2xlSW5SYWRpYW5zICogMTgwKSAvIE1hdGguUEk7XG59XG4vKipcbiAqIENvbnZlcnRzIGRlZ3JlZXMgdG8gcmFkaWFucy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJbkRlZ3JlZXMgQW5nbGUgaW4gZGVncmVlcy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gcmFkaWFucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFucyhhbmdsZUluRGVncmVlcykge1xuICAgIHJldHVybiAoYW5nbGVJbkRlZ3JlZXMgKiBNYXRoLlBJKSAvIDE4MDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbW9kdWxvIG9mIGEgLyBiLCBkZXBlbmRpbmcgb24gdGhlIHNpZ24gb2YgYi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYSBEaXZpZGVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIERpdmlzb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1vZHVsby5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsbyhhLCBiKSB7XG4gICAgdmFyIHIgPSBhICUgYjtcbiAgICByZXR1cm4gciAqIGIgPCAwID8gciArIGIgOiByO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsaW5lYXJseSBpbnRlcnBvbGF0ZWQgdmFsdWUgb2YgeCBiZXR3ZWVuIGEgYW5kIGIuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGEgTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFZhbHVlIHRvIGJlIGludGVycG9sYXRlZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJwb2xhdGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGVycChhLCBiLCB4KSB7XG4gICAgcmV0dXJuIGEgKyB4ICogKGIgLSBhKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGguanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnMzg1N1xuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vVW5pdHMuanMnO1xuaW1wb3J0IHsgY29zaCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBSYWRpdXMgb2YgV0dTODQgc3BoZXJlXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIFJBRElVUyA9IDYzNzgxMzc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBIQUxGX1NJWkUgPSBNYXRoLlBJICogUkFESVVTO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICovXG5leHBvcnQgdmFyIEVYVEVOVCA9IFstSEFMRl9TSVpFLCAtSEFMRl9TSVpFLCBIQUxGX1NJWkUsIEhBTEZfU0laRV07XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgV09STERfRVhURU5UID0gWy0xODAsIC04NSwgMTgwLCA4NV07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciB3ZWIvc3BoZXJpY2FsIE1lcmNhdG9yIChFUFNHOjM4NTcpLlxuICovXG52YXIgRVBTRzM4NTdQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFUFNHMzg1N1Byb2plY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFUFNHMzg1N1Byb2plY3Rpb24oY29kZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29kZTogY29kZSxcbiAgICAgICAgICAgIHVuaXRzOiBVbml0cy5NRVRFUlMsXG4gICAgICAgICAgICBleHRlbnQ6IEVYVEVOVCxcbiAgICAgICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgICAgIHdvcmxkRXh0ZW50OiBXT1JMRF9FWFRFTlQsXG4gICAgICAgICAgICBnZXRQb2ludFJlc29sdXRpb246IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBwb2ludCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uIC8gY29zaChwb2ludFsxXSAvIFJBRElVUyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRVBTRzM4NTdQcm9qZWN0aW9uO1xufShQcm9qZWN0aW9uKSk7XG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6Mzg1Ny5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzozODU3JyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzoxMDIxMDAnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjExMycpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6OTAwOTEzJyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni4xODozOjM4NTcnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6RVBTRzo6Mzg1NycpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3JyksXG5dO1xuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6NDMyNiB0byBFUFNHOjM4NTcuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9vdXRwdXQgT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUVQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB2YXIgZGltZW5zaW9uID0gb3B0X2RpbWVuc2lvbiA+IDEgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgICBpZiAob3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgICAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBoYWxmU2l6ZSA9IEhBTEZfU0laRTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgb3V0cHV0W2ldID0gKGhhbGZTaXplICogaW5wdXRbaV0pIC8gMTgwO1xuICAgICAgICB2YXIgeSA9IFJBRElVUyAqIE1hdGgubG9nKE1hdGgudGFuKChNYXRoLlBJICogKCtpbnB1dFtpICsgMV0gKyA5MCkpIC8gMzYwKSk7XG4gICAgICAgIGlmICh5ID4gaGFsZlNpemUpIHtcbiAgICAgICAgICAgIHkgPSBoYWxmU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh5IDwgLWhhbGZTaXplKSB7XG4gICAgICAgICAgICB5ID0gLWhhbGZTaXplO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dFtpICsgMV0gPSB5O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6Mzg1NyB0byBFUFNHOjQzMjYuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9vdXRwdXQgT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9FUFNHNDMyNihpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdmFyIGRpbWVuc2lvbiA9IG9wdF9kaW1lbnNpb24gPiAxID8gb3B0X2RpbWVuc2lvbiA6IDI7XG4gICAgdmFyIG91dHB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChkaW1lbnNpb24gPiAyKSB7XG4gICAgICAgICAgICAvLyBwcmVzZXJ2ZSB2YWx1ZXMgYmV5b25kIHNlY29uZCBkaW1lbnNpb25cbiAgICAgICAgICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgb3V0cHV0W2ldID0gKDE4MCAqIGlucHV0W2ldKSAvIEhBTEZfU0laRTtcbiAgICAgICAgb3V0cHV0W2kgKyAxXSA9XG4gICAgICAgICAgICAoMzYwICogTWF0aC5hdGFuKE1hdGguZXhwKGlucHV0W2kgKyAxXSAvIFJBRElVUykpKSAvIE1hdGguUEkgLSA5MDtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVwc2czODU3LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovZXBzZzQzMjZcbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL1VuaXRzLmpzJztcbi8qKlxuICogU2VtaS1tYWpvciByYWRpdXMgb2YgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcbi8qKlxuICogRXh0ZW50IG9mIHRoZSBFUFNHOjQzMjYgcHJvamVjdGlvbiB3aGljaCBpcyB0aGUgd2hvbGUgd29ybGQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBFWFRFTlQgPSBbLTE4MCwgLTkwLCAxODAsIDkwXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIE1FVEVSU19QRVJfVU5JVCA9IChNYXRoLlBJICogUkFESVVTKSAvIDE4MDtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBvYmplY3QgZm9yIFdHUzg0IGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMgKEVQU0c6NDMyNikuXG4gKlxuICogTm90ZSB0aGF0IE9wZW5MYXllcnMgZG9lcyBub3Qgc3RyaWN0bHkgY29tcGx5IHdpdGggdGhlIEVQU0cgZGVmaW5pdGlvbi5cbiAqIFRoZSBFUFNHIHJlZ2lzdHJ5IGRlZmluZXMgNDMyNiBhcyBhIENSUyBmb3IgTGF0aXR1ZGUsTG9uZ2l0dWRlICh5LHgpLlxuICogT3BlbkxheWVycyB0cmVhdHMgRVBTRzo0MzI2IGFzIGEgcHNldWRvLXByb2plY3Rpb24sIHdpdGggeCx5IGNvb3JkaW5hdGVzLlxuICovXG52YXIgRVBTRzQzMjZQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFUFNHNDMyNlByb2plY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9heGlzT3JpZW50YXRpb24gQXhpcyBvcmllbnRhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFUFNHNDMyNlByb2plY3Rpb24oY29kZSwgb3B0X2F4aXNPcmllbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29kZTogY29kZSxcbiAgICAgICAgICAgIHVuaXRzOiBVbml0cy5ERUdSRUVTLFxuICAgICAgICAgICAgZXh0ZW50OiBFWFRFTlQsXG4gICAgICAgICAgICBheGlzT3JpZW50YXRpb246IG9wdF9heGlzT3JpZW50YXRpb24sXG4gICAgICAgICAgICBnbG9iYWw6IHRydWUsXG4gICAgICAgICAgICBtZXRlcnNQZXJVbml0OiBNRVRFUlNfUEVSX1VOSVQsXG4gICAgICAgICAgICB3b3JsZEV4dGVudDogRVhURU5ULFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRVBTRzQzMjZQcm9qZWN0aW9uO1xufShQcm9qZWN0aW9uKSk7XG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignQ1JTOjg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignRVBTRzo0MzI2JywgJ25ldScpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjo0MzI2JywgJ25ldScpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2JywgJ25ldScpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoyOjg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYnLCAnbmV1JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2JywgJ25ldScpLFxuXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVwc2c0MzI2LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL3Byb2plY3Rpb25zXG4gKi9cbi8qKlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xudmFyIGNhY2hlID0ge307XG4vKipcbiAqIENsZWFyIHRoZSBwcm9qZWN0aW9ucyBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGNhY2hlID0ge307XG59XG4vKipcbiAqIEdldCBhIGNhY2hlZCBwcm9qZWN0aW9uIGJ5IGNvZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29kZSBUaGUgY29kZSBmb3IgdGhlIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gVGhlIHByb2plY3Rpb24gKGlmIGNhY2hlZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoY29kZSkge1xuICAgIHJldHVybiBjYWNoZVtjb2RlXSB8fCBudWxsO1xufVxuLyoqXG4gKiBBZGQgYSBwcm9qZWN0aW9uIHRvIHRoZSBjYWNoZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBwcm9qZWN0aW9uIGNvZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uIHRvIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvZGUsIHByb2plY3Rpb24pIHtcbiAgICBjYWNoZVtjb2RlXSA9IHByb2plY3Rpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qZWN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai90cmFuc2Zvcm1zXG4gKi9cbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9uPj59XG4gKi9cbnZhciB0cmFuc2Zvcm1zID0ge307XG4vKipcbiAqIENsZWFyIHRoZSB0cmFuc2Zvcm0gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICB0cmFuc2Zvcm1zID0ge307XG59XG4vKipcbiAqIFJlZ2lzdGVycyBhIGNvbnZlcnNpb24gZnVuY3Rpb24gdG8gY29udmVydCBjb29yZGluYXRlcyBmcm9tIHRoZSBzb3VyY2VcbiAqIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoc291cmNlLCBkZXN0aW5hdGlvbiwgdHJhbnNmb3JtRm4pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgICBpZiAoIShzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMpKSB7XG4gICAgICAgIHRyYW5zZm9ybXNbc291cmNlQ29kZV0gPSB7fTtcbiAgICB9XG4gICAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdID0gdHJhbnNmb3JtRm47XG59XG4vKipcbiAqIFVucmVnaXN0ZXJzIHRoZSBjb252ZXJzaW9uIGZ1bmN0aW9uIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjbGVhbiB1cFxuICogY2FjaGVkIHRyYW5zZm9ybXMgZHVyaW5nIHRlc3RpbmcuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRoZSB1bnJlZ2lzdGVyZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgICB2YXIgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICAgIGRlbGV0ZSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gICAgaWYgKGlzRW1wdHkodHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSkpIHtcbiAgICAgICAgZGVsZXRlIHRyYW5zZm9ybXNbc291cmNlQ29kZV07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vKipcbiAqIEdldCBhIHRyYW5zZm9ybSBnaXZlbiBhIHNvdXJjZSBjb2RlIGFuZCBhIGRlc3RpbmF0aW9uIGNvZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc291cmNlQ29kZSBUaGUgY29kZSBmb3IgdGhlIHNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGRlc3RpbmF0aW9uQ29kZSBUaGUgY29kZSBmb3IgdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufHVuZGVmaW5lZH0gVGhlIHRyYW5zZm9ybSBmdW5jdGlvbiAoaWYgZm91bmQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHNvdXJjZUNvZGUsIGRlc3RpbmF0aW9uQ29kZSkge1xuICAgIHZhciB0cmFuc2Zvcm07XG4gICAgaWYgKHNvdXJjZUNvZGUgaW4gdHJhbnNmb3JtcyAmJiBkZXN0aW5hdGlvbkNvZGUgaW4gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSkge1xuICAgICAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm1zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zcGhlcmVcbiAqL1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7IHRvRGVncmVlcywgdG9SYWRpYW5zIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogT2JqZWN0IGxpdGVyYWwgd2l0aCBvcHRpb25zIGZvciB0aGUge0BsaW5rIGdldExlbmd0aH0gb3Ige0BsaW5rIGdldEFyZWF9XG4gKiBmdW5jdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTcGhlcmVNZXRyaWNPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddXG4gKiBQcm9qZWN0aW9uIG9mIHRoZSAgZ2VvbWV0cnkuICBCeSBkZWZhdWx0LCB0aGUgZ2VvbWV0cnkgaXMgYXNzdW1lZCB0byBiZSBpblxuICogV2ViIE1lcmNhdG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYWRpdXM9NjM3MTAwOC44XSBTcGhlcmUgcmFkaXVzLiAgQnkgZGVmYXVsdCwgdGhlXG4gKiBbbWVhbiBFYXJ0aCByYWRpdXNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1cylcbiAqIGZvciB0aGUgV0dTODQgZWxsaXBzb2lkIGlzIHVzZWQuXG4gKi9cbi8qKlxuICogVGhlIG1lYW4gRWFydGggcmFkaXVzICgxLzMgKiAoMmEgKyBiKSkgZm9yIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FYXJ0aF9yYWRpdXMjTWVhbl9yYWRpdXNcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9SQURJVVMgPSA2MzcxMDA4Ljg7XG4vKipcbiAqIEdldCB0aGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIChpbiBtZXRlcnMpIGJldHdlZW4gdHdvIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5fSBjMSBTdGFydGluZyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheX0gYzIgRW5kaW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9yYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3RhbmNlKGMxLCBjMiwgb3B0X3JhZGl1cykge1xuICAgIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgICB2YXIgbGF0MiA9IHRvUmFkaWFucyhjMlsxXSk7XG4gICAgdmFyIGRlbHRhTGF0QnkyID0gKGxhdDIgLSBsYXQxKSAvIDI7XG4gICAgdmFyIGRlbHRhTG9uQnkyID0gdG9SYWRpYW5zKGMyWzBdIC0gYzFbMF0pIC8gMjtcbiAgICB2YXIgYSA9IE1hdGguc2luKGRlbHRhTGF0QnkyKSAqIE1hdGguc2luKGRlbHRhTGF0QnkyKSArXG4gICAgICAgIE1hdGguc2luKGRlbHRhTG9uQnkyKSAqXG4gICAgICAgICAgICBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKlxuICAgICAgICAgICAgTWF0aC5jb3MobGF0MSkgKlxuICAgICAgICAgICAgTWF0aC5jb3MobGF0Mik7XG4gICAgcmV0dXJuIDIgKiByYWRpdXMgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG59XG4vKipcbiAqIEdldCB0aGUgY3VtdWxhdGl2ZSBncmVhdCBjaXJjbGUgbGVuZ3RoIG9mIGxpbmVzdHJpbmcgY29vcmRpbmF0ZXMgKGdlb2dyYXBoaWMpLlxuICogQHBhcmFtIHtBcnJheX0gY29vcmRpbmF0ZXMgTGluZXN0cmluZyBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGVuZ3RoIChpbiBtZXRlcnMpLlxuICovXG5mdW5jdGlvbiBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKSB7XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWkgLSAxOyArK2kpIHtcbiAgICAgICAgbGVuZ3RoICs9IGdldERpc3RhbmNlKGNvb3JkaW5hdGVzW2ldLCBjb29yZGluYXRlc1tpICsgMV0sIHJhZGl1cyk7XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIEdldCB0aGUgc3BoZXJpY2FsIGxlbmd0aCBvZiBhIGdlb21ldHJ5LiAgVGhpcyBsZW5ndGggaXMgdGhlIHN1bSBvZiB0aGVcbiAqIGdyZWF0IGNpcmNsZSBkaXN0YW5jZXMgYmV0d2VlbiBjb29yZGluYXRlcy4gIEZvciBwb2x5Z29ucywgdGhlIGxlbmd0aCBpc1xuICogdGhlIHN1bSBvZiBhbGwgcmluZ3MuICBGb3IgcG9pbnRzLCB0aGUgbGVuZ3RoIGlzIHplcm8uICBGb3IgbXVsdGktcGFydFxuICogZ2VvbWV0cmllcywgdGhlIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZSBsZW5ndGggb2YgZWFjaCBwYXJ0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7U3BoZXJlTWV0cmljT3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMgZm9yIHRoZVxuICogbGVuZ3RoIGNhbGN1bGF0aW9uLiAgQnkgZGVmYXVsdCwgZ2VvbWV0cmllcyBhcmUgYXNzdW1lZCB0byBiZSBpbiAnRVBTRzozODU3Jy5cbiAqIFlvdSBjYW4gY2hhbmdlIHRoaXMgYnkgcHJvdmlkaW5nIGEgYHByb2plY3Rpb25gIG9wdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNwaGVyaWNhbCBsZW5ndGggKGluIG1ldGVycykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGgoZ2VvbWV0cnksIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gfHwgJ0VQU0c6Mzg1Nyc7XG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgaWYgKHR5cGUgIT09IEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OKSB7XG4gICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICAgIH1cbiAgICB2YXIgbGVuZ3RoID0gMDtcbiAgICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORzoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBsZW5ndGggPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRzW2pdLCByYWRpdXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046IHtcbiAgICAgICAgICAgIHZhciBnZW9tZXRyaWVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoKGdlb21ldHJpZXNbaV0sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNwaGVyaWNhbCBhcmVhIGZvciBhIGxpc3Qgb2YgY29vcmRpbmF0ZXMuXG4gKlxuICogW1JlZmVyZW5jZV0oaHR0cHM6Ly90cnMtbmV3LmpwbC5uYXNhLmdvdi9oYW5kbGUvMjAxNC80MDQwOSlcbiAqIFJvYmVydC4gRy4gQ2hhbWJlcmxhaW4gYW5kIFdpbGxpYW0gSC4gRHVxdWV0dGUsIFwiU29tZSBBbGdvcml0aG1zIGZvclxuICogUG9seWdvbnMgb24gYSBTcGhlcmVcIiwgSlBMIFB1YmxpY2F0aW9uIDA3LTAzLCBKZXQgUHJvcHVsc2lvblxuICogTGFib3JhdG9yeSwgUGFzYWRlbmEsIENBLCBKdW5lIDIwMDdcbiAqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgTGlzdCBvZiBjb29yZGluYXRlcyBvZiBhIGxpbmVhclxuICogcmluZy4gSWYgdGhlIHJpbmcgaXMgb3JpZW50ZWQgY2xvY2t3aXNlLCB0aGUgYXJlYSB3aWxsIGJlIHBvc2l0aXZlLFxuICogb3RoZXJ3aXNlIGl0IHdpbGwgYmUgbmVnYXRpdmUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChpbiBzcXVhcmUgbWV0ZXJzKS5cbiAqL1xuZnVuY3Rpb24gZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgdmFyIGxlbiA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICB2YXIgeDEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVswXTtcbiAgICB2YXIgeTEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVsxXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciB4MiA9IGNvb3JkaW5hdGVzW2ldWzBdO1xuICAgICAgICB2YXIgeTIgPSBjb29yZGluYXRlc1tpXVsxXTtcbiAgICAgICAgYXJlYSArPVxuICAgICAgICAgICAgdG9SYWRpYW5zKHgyIC0geDEpICpcbiAgICAgICAgICAgICAgICAoMiArIE1hdGguc2luKHRvUmFkaWFucyh5MSkpICsgTWF0aC5zaW4odG9SYWRpYW5zKHkyKSkpO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gKGFyZWEgKiByYWRpdXMgKiByYWRpdXMpIC8gMi4wO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNwaGVyaWNhbCBhcmVhIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGlzIHRoZSBhcmVhIChpbiBtZXRlcnMpIGFzc3VtaW5nXG4gKiB0aGF0IHBvbHlnb24gZWRnZXMgYXJlIHNlZ21lbnRzIG9mIGdyZWF0IGNpcmNsZXMgb24gYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIGFyZWFcbiAqICAgICBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiAgICAgWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHZhciByYWRpdXMgPSBvcHRpb25zLnJhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICBpZiAodHlwZSAhPT0gR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT04pIHtcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpLnRyYW5zZm9ybShwcm9qZWN0aW9uLCAnRVBTRzo0MzI2Jyk7XG4gICAgfVxuICAgIHZhciBhcmVhID0gMDtcbiAgICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBhcmVhID0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDEsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzW2ldLCByYWRpdXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICAgICAgYXJlYSArPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAxLCBqaiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3Jkc1tqXSwgcmFkaXVzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTjoge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJpZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRHZW9tZXRyaWVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGFyZWEgKz0gZ2V0QXJlYShnZW9tZXRyaWVzW2ldLCBvcHRfb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICcgKyB0eXBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBhdCB0aGUgZ2l2ZW4gZGlzdGFuY2UgYW5kIGJlYXJpbmcgZnJvbSBgYzFgLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMxIFRoZSBvcmlnaW4gcG9pbnQgKGBbbG9uLCBsYXRdYCBpbiBkZWdyZWVzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIG9yaWdpblxuICogICAgIHBvaW50IGFuZCB0aGUgdGFyZ2V0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgVGhlIGJlYXJpbmcgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS4gIERlZmF1bHRzIHRvIHRoZSBFYXJ0aCdzXG4gKiAgICAgbWVhbiByYWRpdXMgdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgdGFyZ2V0IHBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb2Zmc2V0KGMxLCBkaXN0YW5jZSwgYmVhcmluZywgb3B0X3JhZGl1cykge1xuICAgIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgICB2YXIgbG9uMSA9IHRvUmFkaWFucyhjMVswXSk7XG4gICAgdmFyIGRCeVIgPSBkaXN0YW5jZSAvIHJhZGl1cztcbiAgICB2YXIgbGF0ID0gTWF0aC5hc2luKE1hdGguc2luKGxhdDEpICogTWF0aC5jb3MoZEJ5UikgK1xuICAgICAgICBNYXRoLmNvcyhsYXQxKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MoYmVhcmluZykpO1xuICAgIHZhciBsb24gPSBsb24xICtcbiAgICAgICAgTWF0aC5hdGFuMihNYXRoLnNpbihiZWFyaW5nKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MobGF0MSksIE1hdGguY29zKGRCeVIpIC0gTWF0aC5zaW4obGF0MSkgKiBNYXRoLnNpbihsYXQpKTtcbiAgICByZXR1cm4gW3RvRGVncmVlcyhsb24pLCB0b0RlZ3JlZXMobGF0KV07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcGhlcmUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2pcbiAqL1xuLyoqXG4gKiBUaGUgb2wvcHJvaiBtb2R1bGUgc3RvcmVzOlxuICogKiBhIGxpc3Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259XG4gKiBvYmplY3RzLCBvbmUgZm9yIGVhY2ggcHJvamVjdGlvbiBzdXBwb3J0ZWQgYnkgdGhlIGFwcGxpY2F0aW9uXG4gKiAqIGEgbGlzdCBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zIG5lZWRlZCB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGluIG9uZSBwcm9qZWN0aW9uXG4gKiBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIHN0YXRpYyBmdW5jdGlvbnMgYXJlIHRoZSBtZXRob2RzIHVzZWQgdG8gbWFpbnRhaW4gdGhlc2UuXG4gKiBFYWNoIHRyYW5zZm9ybSBmdW5jdGlvbiBjYW4gaGFuZGxlIG5vdCBvbmx5IHNpbXBsZSBjb29yZGluYXRlIHBhaXJzLCBidXQgYWxzb1xuICogbGFyZ2UgYXJyYXlzIG9mIGNvb3JkaW5hdGVzIHN1Y2ggYXMgdmVjdG9yIGdlb21ldHJpZXMuXG4gKlxuICogV2hlbiBsb2FkZWQsIHRoZSBsaWJyYXJ5IGFkZHMgcHJvamVjdGlvbiBvYmplY3RzIGZvciBFUFNHOjQzMjYgKFdHUzg0XG4gKiBnZW9ncmFwaGljIGNvb3JkaW5hdGVzKSBhbmQgRVBTRzozODU3IChXZWIgb3IgU3BoZXJpY2FsIE1lcmNhdG9yLCBhcyB1c2VkXG4gKiBmb3IgZXhhbXBsZSBieSBCaW5nIE1hcHMgb3IgT3BlblN0cmVldE1hcCksIHRvZ2V0aGVyIHdpdGggdGhlIHJlbGV2YW50XG4gKiB0cmFuc2Zvcm0gZnVuY3Rpb25zLlxuICpcbiAqIEFkZGl0aW9uYWwgdHJhbnNmb3JtcyBtYXkgYmUgYWRkZWQgYnkgdXNpbmcgdGhlIGh0dHA6Ly9wcm9qNGpzLm9yZy9cbiAqIGxpYnJhcnkgKHZlcnNpb24gMi4yIG9yIGxhdGVyKS4gWW91IGNhbiB1c2UgdGhlIGZ1bGwgYnVpbGQgc3VwcGxpZWQgYnlcbiAqIFByb2o0anMsIG9yIGNyZWF0ZSBhIGN1c3RvbSBidWlsZCB0byBzdXBwb3J0IHRob3NlIHByb2plY3Rpb25zIHlvdSBuZWVkOyBzZWVcbiAqIHRoZSBQcm9qNGpzIHdlYnNpdGUgZm9yIGhvdyB0byBkbyB0aGlzLiBZb3UgYWxzbyBuZWVkIHRoZSBQcm9qNGpzIGRlZmluaXRpb25zXG4gKiBmb3IgdGhlIHJlcXVpcmVkIHByb2plY3Rpb25zLiBUaGVzZSBkZWZpbml0aW9ucyBjYW4gYmUgb2J0YWluZWQgZnJvbVxuICogaHR0cHM6Ly9lcHNnLmlvLywgYW5kIGFyZSBhIEpTIGZ1bmN0aW9uLCBzbyBjYW4gYmUgbG9hZGVkIGluIGEgc2NyaXB0XG4gKiB0YWcgKGFzIGluIHRoZSBleGFtcGxlcykgb3IgcGFzdGVkIGludG8geW91ciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBBZnRlciBhbGwgcmVxdWlyZWQgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBhcmUgYWRkZWQgdG8gcHJvajQncyByZWdpc3RyeSAoYnlcbiAqIHVzaW5nIGBwcm9qNC5kZWZzKClgKSwgc2ltcGx5IGNhbGwgYHJlZ2lzdGVyKHByb2o0KWAgZnJvbSB0aGUgYG9sL3Byb2ovcHJvajRgXG4gKiBwYWNrYWdlLiBFeGlzdGluZyB0cmFuc2Zvcm1zIGFyZSBub3QgY2hhbmdlZCBieSB0aGlzIGZ1bmN0aW9uLiBTZWVcbiAqIGV4YW1wbGVzL3dtcy1pbWFnZS1jdXN0b20tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZiB0aGlzLlxuICpcbiAqIEFkZGl0aW9uYWwgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBjYW4gYmUgcmVnaXN0ZXJlZCB3aXRoIGBwcm9qNC5kZWZzKClgIGFueVxuICogdGltZS4gSnVzdCBtYWtlIHN1cmUgdG8gY2FsbCBgcmVnaXN0ZXIocHJvajQpYCBhZ2FpbjsgZm9yIGV4YW1wbGUsIHdpdGggdXNlci1zdXBwbGllZCBkYXRhIHdoZXJlIHlvdSBkb24ndFxuICoga25vdyBpbiBhZHZhbmNlIHdoYXQgcHJvamVjdGlvbnMgYXJlIG5lZWRlZCwgeW91IGNhbiBpbml0aWFsbHkgbG9hZCBtaW5pbWFsXG4gKiBzdXBwb3J0IGFuZCB0aGVuIGxvYWQgd2hpY2hldmVyIGFyZSByZXF1ZXN0ZWQuXG4gKlxuICogTm90ZSB0aGF0IFByb2o0anMgZG9lcyBub3Qgc3VwcG9ydCBwcm9qZWN0aW9uIGV4dGVudHMuIElmIHlvdSB3YW50IHRvIGFkZFxuICogb25lIGZvciBjcmVhdGluZyBkZWZhdWx0IHRpbGUgZ3JpZHMsIHlvdSBjYW4gYWRkIGl0IGFmdGVyIHRoZSBQcm9qZWN0aW9uXG4gKiBvYmplY3QgaGFzIGJlZW4gY3JlYXRlZCB3aXRoIGBzZXRFeHRlbnRgLCBmb3IgZXhhbXBsZSxcbiAqIGBnZXQoJ0VQU0c6MTIzNCcpLnNldEV4dGVudChleHRlbnQpYC5cbiAqXG4gKiBJbiBhZGRpdGlvbiB0byBQcm9qNGpzIHN1cHBvcnQsIGFueSB0cmFuc2Zvcm0gZnVuY3Rpb25zIGNhbiBiZSBhZGRlZCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+YWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXN9LiBUbyB1c2UgdGhpcywgeW91IG11c3QgZmlyc3QgY3JlYXRlXG4gKiBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBvYmplY3QgZm9yIHRoZSBuZXcgcHJvamVjdGlvbiBhbmQgYWRkIGl0IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvan5hZGRQcm9qZWN0aW9ufS4gWW91IGNhbiB0aGVuIGFkZCB0aGUgZm9yd2FyZCBhbmQgaW52ZXJzZVxuICogZnVuY3Rpb25zIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9wcm9qfmFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zfS4gU2VlXG4gKiBleGFtcGxlcy93bXMtY3VzdG9tLXByb2ogZm9yIGFuIGV4YW1wbGUgb2YgdGhpcy5cbiAqXG4gKiBOb3RlIHRoYXQgaWYgbm8gdHJhbnNmb3JtcyBhcmUgbmVlZGVkIGFuZCB5b3Ugb25seSBuZWVkIHRvIGRlZmluZSB0aGVcbiAqIHByb2plY3Rpb24sIGp1c3QgYWRkIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvan5hZGRQcm9qZWN0aW9ufS4gU2VlIGV4YW1wbGVzL3dtcy1uby1wcm9qIGZvciBhbiBleGFtcGxlIG9mXG4gKiB0aGlzLlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL3Byb2ovUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMsIHsgTUVURVJTX1BFUl9VTklUIH0gZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IFBST0pFQ1RJT05TIGFzIEVQU0czODU3X1BST0pFQ1RJT05TLCBmcm9tRVBTRzQzMjYsIHRvRVBTRzQzMjYsIH0gZnJvbSAnLi9wcm9qL2Vwc2czODU3LmpzJztcbmltcG9ydCB7IFBST0pFQ1RJT05TIGFzIEVQU0c0MzI2X1BST0pFQ1RJT05TIH0gZnJvbSAnLi9wcm9qL2Vwc2c0MzI2LmpzJztcbmltcG9ydCB7IGFkZCBhcyBhZGRQcm9qLCBjbGVhciBhcyBjbGVhclByb2osIGdldCBhcyBnZXRQcm9qLCB9IGZyb20gJy4vcHJvai9wcm9qZWN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkVHJhbnNmb3JtRnVuYywgY2xlYXIgYXMgY2xlYXJUcmFuc2Zvcm1GdW5jcywgZ2V0IGFzIGdldFRyYW5zZm9ybUZ1bmMsIH0gZnJvbSAnLi9wcm9qL3RyYW5zZm9ybXMuanMnO1xuaW1wb3J0IHsgYXBwbHlUcmFuc2Zvcm0sIGdldFdpZHRoIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY2xhbXAsIG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBnZXREaXN0YW5jZSB9IGZyb20gJy4vc3BoZXJlLmpzJztcbmltcG9ydCB7IGdldFdvcmxkc0F3YXkgfSBmcm9tICcuL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBBIHByb2plY3Rpb24gYXMge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259LCBTUlMgaWRlbnRpZmllclxuICogc3RyaW5nIG9yIHVuZGVmaW5lZC5cbiAqIEB0eXBlZGVmIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IFByb2plY3Rpb25MaWtlXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQSB0cmFuc2Zvcm0gZnVuY3Rpb24gYWNjZXB0cyBhbiBhcnJheSBvZiBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgYW4gb3B0aW9uYWxcbiAqIG91dHB1dCBhcnJheSwgYW5kIGFuIG9wdGlvbmFsIGRpbWVuc2lvbiAoZGVmYXVsdCBzaG91bGQgYmUgMikuICBUaGUgZnVuY3Rpb25cbiAqIHRyYW5zZm9ybXMgdGhlIGlucHV0IGNvb3JkaW5hdGUgdmFsdWVzLCBwb3B1bGF0ZXMgdGhlIG91dHB1dCBhcnJheSwgYW5kXG4gKiByZXR1cm5zIHRoZSBvdXRwdXQgYXJyYXkuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKEFycmF5PG51bWJlcj4sIEFycmF5PG51bWJlcj49LCBudW1iZXI9KTogQXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHsgTUVURVJTX1BFUl9VTklUIH07XG5leHBvcnQgeyBQcm9qZWN0aW9uIH07XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgY29vcmRpbmF0ZSBhcnJheS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9vdXRwdXQgT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBjb29yZGluYXRlIGFycmF5IChuZXcgYXJyYXksIHNhbWUgY29vcmRpbmF0ZVxuICogICAgIHZhbHVlcykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZVRyYW5zZm9ybShpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIHZhciBvdXRwdXQ7XG4gICAgaWYgKG9wdF9vdXRwdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBvcHRfb3V0cHV0W2ldID0gaW5wdXRbaV07XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgY29vcmRpbmF0ZSBhcnJheS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9vdXRwdXQgT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IElucHV0IGNvb3JkaW5hdGUgYXJyYXkgKHNhbWUgYXJyYXkgYXMgaW5wdXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHlUcmFuc2Zvcm0oaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICBpZiAob3B0X291dHB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0ICE9PSBvcHRfb3V0cHV0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9wdF9vdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dDtcbn1cbi8qKlxuICogQWRkIGEgUHJvamVjdGlvbiBvYmplY3QgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb2plY3Rpb25zIHRoYXQgY2FuIGJlXG4gKiBsb29rZWQgdXAgYnkgdGhlaXIgY29kZS5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIGFkZFByb2oocHJvamVjdGlvbi5nZXRDb2RlKCksIHByb2plY3Rpb24pO1xuICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbiwgcHJvamVjdGlvbiwgY2xvbmVUcmFuc2Zvcm0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9ucyBQcm9qZWN0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb25zKHByb2plY3Rpb25zKSB7XG4gICAgcHJvamVjdGlvbnMuZm9yRWFjaChhZGRQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogRmV0Y2hlcyBhIFByb2plY3Rpb24gb2JqZWN0IGZvciB0aGUgY29kZSBzcGVjaWZpZWQuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbkxpa2UgRWl0aGVyIGEgY29kZSBzdHJpbmcgd2hpY2ggaXNcbiAqICAgICBhIGNvbWJpbmF0aW9uIG9mIGF1dGhvcml0eSBhbmQgaWRlbnRpZmllciBzdWNoIGFzIFwiRVBTRzo0MzI2XCIsIG9yIGFuXG4gKiAgICAgZXhpc3RpbmcgcHJvamVjdGlvbiBvYmplY3QsIG9yIHVuZGVmaW5lZC5cbiAqIEByZXR1cm4ge1Byb2plY3Rpb259IFByb2plY3Rpb24gb2JqZWN0LCBvciBudWxsIGlmIG5vdCBpbiBsaXN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHByb2plY3Rpb25MaWtlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBwcm9qZWN0aW9uTGlrZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRQcm9qKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocHJvamVjdGlvbkxpa2UpKVxuICAgICAgICA6IC8qKiBAdHlwZSB7UHJvamVjdGlvbn0gKi8gKHByb2plY3Rpb25MaWtlKSB8fCBudWxsO1xufVxuLyoqXG4gKiBHZXQgdGhlIHJlc29sdXRpb24gb2YgdGhlIHBvaW50IGluIGRlZ3JlZXMgb3IgZGlzdGFuY2UgdW5pdHMuXG4gKiBGb3IgcHJvamVjdGlvbnMgd2l0aCBkZWdyZWVzIGFzIHRoZSB1bml0IHRoaXMgd2lsbCBzaW1wbHkgcmV0dXJuIHRoZVxuICogcHJvdmlkZWQgcmVzb2x1dGlvbi4gRm9yIG90aGVyIHByb2plY3Rpb25zIHRoZSBwb2ludCByZXNvbHV0aW9uIGlzXG4gKiBieSBkZWZhdWx0IGVzdGltYXRlZCBieSB0cmFuc2Zvcm1pbmcgdGhlICdwb2ludCcgcGl4ZWwgdG8gRVBTRzo0MzI2LFxuICogbWVhc3VyaW5nIGl0cyB3aWR0aCBhbmQgaGVpZ2h0IG9uIHRoZSBub3JtYWwgc3BoZXJlLFxuICogYW5kIHRha2luZyB0aGUgYXZlcmFnZSBvZiB0aGUgd2lkdGggYW5kIGhlaWdodC5cbiAqIEEgY3VzdG9tIGZ1bmN0aW9uIGNhbiBiZSBwcm92aWRlZCBmb3IgYSBzcGVjaWZpYyBwcm9qZWN0aW9uLCBlaXRoZXJcbiAqIGJ5IHNldHRpbmcgdGhlIGBnZXRQb2ludFJlc29sdXRpb25gIG9wdGlvbiBpbiB0aGVcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IGNvbnN0cnVjdG9yIG9yIGJ5IHVzaW5nXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9uI3NldEdldFBvaW50UmVzb2x1dGlvbn0gdG8gY2hhbmdlIGFuIGV4aXN0aW5nXG4gKiBwcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBOb21pbmFsIHJlc29sdXRpb24gaW4gcHJvamVjdGlvbiB1bml0cy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50IHRvIGZpbmQgYWRqdXN0ZWQgcmVzb2x1dGlvbiBhdC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1VuaXRzLmpzXCIpLmRlZmF1bHQ9fSBvcHRfdW5pdHMgVW5pdHMgdG8gZ2V0IHRoZSBwb2ludCByZXNvbHV0aW9uIGluLlxuICogRGVmYXVsdCBpcyB0aGUgcHJvamVjdGlvbidzIHVuaXRzLlxuICogQHJldHVybiB7bnVtYmVyfSBQb2ludCByZXNvbHV0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9pbnRSZXNvbHV0aW9uKHByb2plY3Rpb24sIHJlc29sdXRpb24sIHBvaW50LCBvcHRfdW5pdHMpIHtcbiAgICBwcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xuICAgIHZhciBwb2ludFJlc29sdXRpb247XG4gICAgdmFyIGdldHRlciA9IHByb2plY3Rpb24uZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYygpO1xuICAgIGlmIChnZXR0ZXIpIHtcbiAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gZ2V0dGVyKHJlc29sdXRpb24sIHBvaW50KTtcbiAgICAgICAgaWYgKG9wdF91bml0cyAmJiBvcHRfdW5pdHMgIT09IHByb2plY3Rpb24uZ2V0VW5pdHMoKSkge1xuICAgICAgICAgICAgdmFyIG1ldGVyc1BlclVuaXQgPSBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICAgICAgICAgIGlmIChtZXRlcnNQZXJVbml0KSB7XG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgKHBvaW50UmVzb2x1dGlvbiAqIG1ldGVyc1BlclVuaXQpIC8gTUVURVJTX1BFUl9VTklUW29wdF91bml0c107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB1bml0cyA9IHByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgICAgICAgaWYgKCh1bml0cyA9PSBVbml0cy5ERUdSRUVTICYmICFvcHRfdW5pdHMpIHx8IG9wdF91bml0cyA9PSBVbml0cy5ERUdSRUVTKSB7XG4gICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRXN0aW1hdGUgcG9pbnQgcmVzb2x1dGlvbiBieSB0cmFuc2Zvcm1pbmcgdGhlIGNlbnRlciBwaXhlbCB0byBFUFNHOjQzMjYsXG4gICAgICAgICAgICAvLyBtZWFzdXJpbmcgaXRzIHdpZHRoIGFuZCBoZWlnaHQgb24gdGhlIG5vcm1hbCBzcGhlcmUsIGFuZCB0YWtpbmcgdGhlXG4gICAgICAgICAgICAvLyBhdmVyYWdlIG9mIHRoZSB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgICAgICAgICAgdmFyIHRvRVBTRzQzMjZfMSA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uLCBnZXQoJ0VQU0c6NDMyNicpKTtcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IFtcbiAgICAgICAgICAgICAgICBwb2ludFswXSAtIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgIHBvaW50WzFdLFxuICAgICAgICAgICAgICAgIHBvaW50WzBdICsgcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgcG9pbnRbMV0sXG4gICAgICAgICAgICAgICAgcG9pbnRbMF0sXG4gICAgICAgICAgICAgICAgcG9pbnRbMV0gLSByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICBwb2ludFswXSxcbiAgICAgICAgICAgICAgICBwb2ludFsxXSArIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHZlcnRpY2VzID0gdG9FUFNHNDMyNl8xKHZlcnRpY2VzLCB2ZXJ0aWNlcywgMik7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBnZXREaXN0YW5jZSh2ZXJ0aWNlcy5zbGljZSgwLCAyKSwgdmVydGljZXMuc2xpY2UoMiwgNCkpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDQsIDYpLCB2ZXJ0aWNlcy5zbGljZSg2LCA4KSk7XG4gICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPSAod2lkdGggKyBoZWlnaHQpIC8gMjtcbiAgICAgICAgICAgIHZhciBtZXRlcnNQZXJVbml0ID0gb3B0X3VuaXRzXG4gICAgICAgICAgICAgICAgPyBNRVRFUlNfUEVSX1VOSVRbb3B0X3VuaXRzXVxuICAgICAgICAgICAgICAgIDogcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgICAgICBpZiAobWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uIC89IG1ldGVyc1BlclVuaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvaW50UmVzb2x1dGlvbjtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0aGF0IGRvbid0IGFsdGVyIGNvb3JkaW5hdGVzLiBUaG9zZSBhbGxvd1xuICogdG8gdHJhbnNmb3JtIGJldHdlZW4gcHJvamVjdGlvbnMgd2l0aCBlcXVhbCBtZWFuaW5nLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zIFByb2plY3Rpb25zLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKHByb2plY3Rpb25zKSB7XG4gICAgYWRkUHJvamVjdGlvbnMocHJvamVjdGlvbnMpO1xuICAgIHByb2plY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgICAgICBhZGRUcmFuc2Zvcm1GdW5jKHNvdXJjZSwgZGVzdGluYXRpb24sIGNsb25lVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBpbiBhbnkgcHJvamVjdGlvblxuICogaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMxIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMyIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gZm9yd2FyZFRyYW5zZm9ybSBUcmFuc2Zvcm1hdGlvbiBmcm9tIGFueVxuICogICBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24yLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gaW52ZXJzZVRyYW5zZm9ybSBUcmFuc2Zvcm0gZnJvbSBhbnkgcHJvamVjdGlvblxuICogICBpbiBwcm9qZWN0aW9uMiB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMS4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50VHJhbnNmb3Jtcyhwcm9qZWN0aW9uczEsIHByb2plY3Rpb25zMiwgZm9yd2FyZFRyYW5zZm9ybSwgaW52ZXJzZVRyYW5zZm9ybSkge1xuICAgIHByb2plY3Rpb25zMS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9qZWN0aW9uMSkge1xuICAgICAgICBwcm9qZWN0aW9uczIuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjIpIHtcbiAgICAgICAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yLCBmb3J3YXJkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjIsIHByb2plY3Rpb24xLCBpbnZlcnNlVHJhbnNmb3JtKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIENsZWFyIGFsbCBjYWNoZWQgcHJvamVjdGlvbnMgYW5kIHRyYW5zZm9ybXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckFsbFByb2plY3Rpb25zKCkge1xuICAgIGNsZWFyUHJvaigpO1xuICAgIGNsZWFyVHJhbnNmb3JtRnVuY3MoKTtcbn1cbi8qKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0Q29kZSBEZWZhdWx0IGNvZGUuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdGlvbihwcm9qZWN0aW9uLCBkZWZhdWx0Q29kZSkge1xuICAgIGlmICghcHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZ2V0KGRlZmF1bHRDb2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHByb2plY3Rpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBnZXQocHJvamVjdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtQcm9qZWN0aW9ufSAqLyAocHJvamVjdGlvbik7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qflRyYW5zZm9ybUZ1bmN0aW9ufSBmcm9tIGEgc2ltcGxlIDJEIGNvb3JkaW5hdGUgdHJhbnNmb3JtXG4gKiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRUcmFuc2Zvcm0gQ29vcmRpbmF0ZVxuICogICAgIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4ge1RyYW5zZm9ybUZ1bmN0aW9ufSBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShjb29yZFRyYW5zZm9ybSkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfb3V0cHV0IE91dHB1dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgdmFyIGRpbWVuc2lvbiA9IG9wdF9kaW1lbnNpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICAgICAgICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dCAhPT0gdW5kZWZpbmVkID8gb3B0X291dHB1dCA6IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IGNvb3JkVHJhbnNmb3JtKFtpbnB1dFtpXSwgaW5wdXRbaSArIDFdXSk7XG4gICAgICAgICAgICBvdXRwdXRbaV0gPSBwb2ludFswXTtcbiAgICAgICAgICAgIG91dHB1dFtpICsgMV0gPSBwb2ludFsxXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID49IDI7IC0taikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtpICsgal0gPSBpbnB1dFtpICsgal07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9KTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGJldHdlZW4gdGhlXG4gKiBzb3VyY2UgcHJvamVjdGlvbiBhbmQgdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBUaGUgZm9yd2FyZCBhbmQgaW52ZXJzZSBmdW5jdGlvbnMgY29udmVydCBjb29yZGluYXRlIHBhaXJzOyB0aGlzIGZ1bmN0aW9uXG4gKiBjb252ZXJ0cyB0aGVzZSBpbnRvIHRoZSBmdW5jdGlvbnMgdXNlZCBpbnRlcm5hbGx5IHdoaWNoIGFsc28gaGFuZGxlXG4gKiBleHRlbnRzIGFuZCBjb29yZGluYXRlIGFycmF5cy5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBmb3J3YXJkIFRoZSBmb3J3YXJkIHRyYW5zZm9ybVxuICogICAgIGZ1bmN0aW9uICh0aGF0IGlzLCBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb25cbiAqICAgICBwcm9qZWN0aW9uKSB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFzIGFyZ3VtZW50IGFuZCByZXR1cm5zXG4gKiAgICAgdGhlIHRyYW5zZm9ybWVkIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gaW52ZXJzZSBUaGUgaW52ZXJzZSB0cmFuc2Zvcm1cbiAqICAgICBmdW5jdGlvbiAodGhhdCBpcywgZnJvbSB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbiB0byB0aGUgc291cmNlXG4gKiAgICAgcHJvamVjdGlvbikgdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJuc1xuICogICAgIHRoZSB0cmFuc2Zvcm1lZCB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb29yZGluYXRlVHJhbnNmb3Jtcyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBmb3J3YXJkLCBpbnZlcnNlKSB7XG4gICAgdmFyIHNvdXJjZVByb2ogPSBnZXQoc291cmNlKTtcbiAgICB2YXIgZGVzdFByb2ogPSBnZXQoZGVzdGluYXRpb24pO1xuICAgIGFkZFRyYW5zZm9ybUZ1bmMoc291cmNlUHJvaiwgZGVzdFByb2osIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGZvcndhcmQpKTtcbiAgICBhZGRUcmFuc2Zvcm1GdW5jKGRlc3RQcm9qLCBzb3VyY2VQcm9qLCBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShpbnZlcnNlKSk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIGZyb20gbG9uZ2l0dWRlL2xhdGl0dWRlIHRvIGEgZGlmZmVyZW50IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLlxuICogICAgIGFuIGFycmF5IHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlPX0gb3B0X3Byb2plY3Rpb24gVGFyZ2V0IHByb2plY3Rpb24uIFRoZVxuICogICAgIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgcHJvamVjdGVkIHRvIHRoZSB0YXJnZXQgcHJvamVjdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Mb25MYXQoY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24pIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtKGNvb3JkaW5hdGUsICdFUFNHOjQzMjYnLCBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiAnRVBTRzozODU3Jyk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIHRvIGxvbmdpdHVkZS9sYXRpdHVkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgUHJvamVjdGVkIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlPX0gb3B0X3Byb2plY3Rpb24gUHJvamVjdGlvbiBvZiB0aGUgY29vcmRpbmF0ZS5cbiAqICAgICBUaGUgZGVmYXVsdCBpcyBXZWIgTWVyY2F0b3IsIGkuZS4gJ0VQU0c6Mzg1NycuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZSBhcyBsb25naXR1ZGUgYW5kIGxhdGl0dWRlLCBpLmUuIGFuIGFycmF5XG4gKiAgICAgd2l0aCBsb25naXR1ZGUgYXMgMXN0IGFuZCBsYXRpdHVkZSBhcyAybmQgZWxlbWVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvTG9uTGF0KGNvb3JkaW5hdGUsIG9wdF9wcm9qZWN0aW9uKSB7XG4gICAgdmFyIGxvbkxhdCA9IHRyYW5zZm9ybShjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xuICAgIHZhciBsb24gPSBsb25MYXRbMF07XG4gICAgaWYgKGxvbiA8IC0xODAgfHwgbG9uID4gMTgwKSB7XG4gICAgICAgIGxvbkxhdFswXSA9IG1vZHVsbyhsb24gKyAxODAsIDM2MCkgLSAxODA7XG4gICAgfVxuICAgIHJldHVybiBsb25MYXQ7XG59XG4vKipcbiAqIENoZWNrcyBpZiB0d28gcHJvamVjdGlvbnMgYXJlIHRoZSBzYW1lLCB0aGF0IGlzIGV2ZXJ5IGNvb3JkaW5hdGUgaW4gb25lXG4gKiBwcm9qZWN0aW9uIGRvZXMgcmVwcmVzZW50IHRoZSBzYW1lIGdlb2dyYXBoaWMgcG9pbnQgYXMgdGhlIHNhbWUgY29vcmRpbmF0ZSBpblxuICogdGhlIG90aGVyIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uMSBQcm9qZWN0aW9uIDEuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24yIFByb2plY3Rpb24gMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEVxdWl2YWxlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVpdmFsZW50KHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMikge1xuICAgIGlmIChwcm9qZWN0aW9uMSA9PT0gcHJvamVjdGlvbjIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBlcXVhbFVuaXRzID0gcHJvamVjdGlvbjEuZ2V0VW5pdHMoKSA9PT0gcHJvamVjdGlvbjIuZ2V0VW5pdHMoKTtcbiAgICBpZiAocHJvamVjdGlvbjEuZ2V0Q29kZSgpID09PSBwcm9qZWN0aW9uMi5nZXRDb2RlKCkpIHtcbiAgICAgICAgcmV0dXJuIGVxdWFsVW5pdHM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIpO1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyA9PT0gY2xvbmVUcmFuc2Zvcm0gJiYgZXF1YWxVbml0cztcbiAgICB9XG59XG4vKipcbiAqIFNlYXJjaGVzIGluIHRoZSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgZm9yIHRoZSBmdW5jdGlvbiBmb3IgY29udmVydGluZ1xuICogY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBQcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIFByb2plY3Rpb25cbiAqICAgICBvYmplY3QuXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbikge1xuICAgIHZhciBzb3VyY2VDb2RlID0gc291cmNlUHJvamVjdGlvbi5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uUHJvamVjdGlvbi5nZXRDb2RlKCk7XG4gICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1GdW5jKHNvdXJjZUNvZGUsIGRlc3RpbmF0aW9uQ29kZSk7XG4gICAgaWYgKCF0cmFuc2Zvcm1GdW5jKSB7XG4gICAgICAgIHRyYW5zZm9ybUZ1bmMgPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmM7XG59XG4vKipcbiAqIEdpdmVuIHRoZSBwcm9qZWN0aW9uLWxpa2Ugb2JqZWN0cywgc2VhcmNoZXMgZm9yIGEgdHJhbnNmb3JtYXRpb25cbiAqIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBjb29yZGluYXRlcyBhcnJheSBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGVcbiAqIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIHNvdXJjZVByb2plY3Rpb24gPSBnZXQoc291cmNlKTtcbiAgICB2YXIgZGVzdGluYXRpb25Qcm9qZWN0aW9uID0gZ2V0KGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIGZyb20gc291cmNlIHByb2plY3Rpb24gdG8gZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIFRoaXMgcmV0dXJucyBhIG5ldyBjb29yZGluYXRlIChhbmQgZG9lcyBub3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCkuXG4gKlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvcHJvan50cmFuc2Zvcm1FeHRlbnR9IGZvciBleHRlbnQgdHJhbnNmb3JtYXRpb24uXG4gKiBTZWUgdGhlIHRyYW5zZm9ybSBtZXRob2Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0dlb21ldHJ5fkdlb21ldHJ5fSBhbmQgaXRzXG4gKiBzdWJjbGFzc2VzIGZvciBnZW9tZXRyeSB0cmFuc2Zvcm1zLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi1saWtlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi1saWtlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jKGNvb3JkaW5hdGUsIHVuZGVmaW5lZCwgY29vcmRpbmF0ZS5sZW5ndGgpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGV4dGVudCBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uICBUaGlzXG4gKiByZXR1cm5zIGEgbmV3IGV4dGVudCAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudCB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3N0b3BzIE51bWJlciBvZiBzdG9wcyBwZXIgc2lkZSB1c2VkIGZvciB0aGUgdHJhbnNmb3JtLlxuICogQnkgZGVmYXVsdCBvbmx5IHRoZSBjb3JuZXJzIGFyZSB1c2VkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgdHJhbnNmb3JtZWQgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgc291cmNlLCBkZXN0aW5hdGlvbiwgb3B0X3N0b3BzKSB7XG4gICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIGFwcGx5VHJhbnNmb3JtKGV4dGVudCwgdHJhbnNmb3JtRnVuYywgdW5kZWZpbmVkLCBvcHRfc3RvcHMpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiBwb2ludCB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gc291cmNlUHJvamVjdGlvbiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gUG9pbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1XaXRoUHJvamVjdGlvbnMocG9pbnQsIHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbikge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG4gICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmMocG9pbnQpO1xufVxuLyoqXG4gKiBAdHlwZSB7P1Byb2plY3Rpb259XG4gKi9cbnZhciB1c2VyUHJvamVjdGlvbiA9IG51bGw7XG4vKipcbiAqIFNldCB0aGUgcHJvamVjdGlvbiBmb3IgY29vcmRpbmF0ZXMgc3VwcGxpZWQgZnJvbSBhbmQgcmV0dXJuZWQgYnkgQVBJIG1ldGhvZHMuXG4gKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2YgdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyXG4gKiBwcm9qZWN0aW9ucyBpcyBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGQgYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRVc2VyUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgdXNlclByb2plY3Rpb24gPSBnZXQocHJvamVjdGlvbik7XG59XG4vKipcbiAqIENsZWFyIHRoZSB1c2VyIHByb2plY3Rpb24gaWYgc2V0LiAgTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mXG4gKiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXIgcHJvamVjdGlvbnMgaXMgbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkXG4gKiBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyVXNlclByb2plY3Rpb24oKSB7XG4gICAgdXNlclByb2plY3Rpb24gPSBudWxsO1xufVxuLyoqXG4gKiBHZXQgdGhlIHByb2plY3Rpb24gZm9yIGNvb3JkaW5hdGVzIHN1cHBsaWVkIGZyb20gYW5kIHJldHVybmVkIGJ5IEFQSSBtZXRob2RzLlxuICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlclxuICogcHJvamVjdGlvbnMgaXMgbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICogQHJldHVybnMgez9Qcm9qZWN0aW9ufSBUaGUgdXNlciBwcm9qZWN0aW9uIChvciBudWxsIGlmIG5vdCBzZXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlclByb2plY3Rpb24oKSB7XG4gICAgcmV0dXJuIHVzZXJQcm9qZWN0aW9uO1xufVxuLyoqXG4gKiBVc2UgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyAoV0dTLTg0IGRhdHVtKSBpbiBBUEkgbWV0aG9kcy4gIE5vdGUgdGhhdCB0aGlzXG4gKiBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2YgdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyIHByb2plY3Rpb25zIGlzXG4gKiBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGQgYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VHZW9ncmFwaGljKCkge1xuICAgIHNldFVzZXJQcm9qZWN0aW9uKCdFUFNHOjQzMjYnKTtcbn1cbi8qKlxuICogUmV0dXJuIGEgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZCBpbnRvIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGNvb3JkaW5hdGUgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGUgSW5wdXQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGNvb3JkaW5hdGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBUaGUgaW5wdXQgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gY29vcmRpbmF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCBzb3VyY2VQcm9qZWN0aW9uLCB1c2VyUHJvamVjdGlvbik7XG59XG4vKipcbiAqIFJldHVybiBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQgZnJvbSB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlIElucHV0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBUaGUgaW5wdXQgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCBkZXN0UHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGU7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgdXNlclByb2plY3Rpb24sIGRlc3RQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogUmV0dXJuIGFuIGV4dGVudCB0cmFuc2Zvcm1lZCBpbnRvIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGV4dGVudCBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgSW5wdXQgZXh0ZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlUHJvamVjdGlvbiBUaGUgaW5wdXQgZXh0ZW50IHByb2plY3Rpb24uXG4gKiBAcmV0dXJucyB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgaW5wdXQgZXh0ZW50IGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJFeHRlbnQoZXh0ZW50LCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgc291cmNlUHJvamVjdGlvbiwgdXNlclByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBSZXR1cm4gYW4gZXh0ZW50IHRyYW5zZm9ybWVkIGZyb20gdGhlIHVzZXIgcHJvamVjdGlvbi4gIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCB0aGUgb3JpZ2luYWwgZXh0ZW50IGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBJbnB1dCBleHRlbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm5zIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSBpbnB1dCBleHRlbnQgdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlckV4dGVudChleHRlbnQsIGRlc3RQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgdXNlclByb2plY3Rpb24sIGRlc3RQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHNhZmUgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb24gZnJvbSBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogXCJTYWZlXCIgbWVhbnMgdGhhdCBpdCBjYW4gaGFuZGxlIHdyYXBwaW5nIG9mIHgtY29vcmRpbmF0ZXMgZm9yIGdsb2JhbCBwcm9qZWN0aW9ucyxcbiAqIGFuZCB0aGF0IGNvb3JkaW5hdGVzIGV4Y2VlZGluZyB0aGUgc291cmNlIHByb2plY3Rpb24gdmFsaWRpdHkgZXh0ZW50J3MgcmFuZ2Ugd2lsbCBiZVxuICogY2xhbXBlZCB0byB0aGUgdmFsaWRpdHkgcmFuZ2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RQcm9qIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRyYW5zZm9ybSBUcmFuc2Zvcm0gZnVuY3Rpb24gKHNvdXJjZSB0byBkZXN0aWF0aW9uKS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFNhZmUgdHJhbnNmb3JtIGZ1bmN0aW9uIChzb3VyY2UgdG8gZGVzdGlhdGlvbikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTYWZlQ29vcmRpbmF0ZVRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0UHJvaiwgdHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb29yZCkge1xuICAgICAgICB2YXIgc291cmNlWCA9IGNvb3JkWzBdO1xuICAgICAgICB2YXIgc291cmNlWSA9IGNvb3JkWzFdO1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWQsIHdvcmxkc0F3YXk7XG4gICAgICAgIGlmIChzb3VyY2VQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICAgICAgdmFyIHNvdXJjZUV4dGVudFdpZHRoID0gZ2V0V2lkdGgoc291cmNlRXh0ZW50KTtcbiAgICAgICAgICAgIHdvcmxkc0F3YXkgPSBnZXRXb3JsZHNBd2F5KGNvb3JkLCBzb3VyY2VQcm9qLCBzb3VyY2VFeHRlbnRXaWR0aCk7XG4gICAgICAgICAgICBpZiAod29ybGRzQXdheSkge1xuICAgICAgICAgICAgICAgIC8vIE1vdmUgeCB0byB0aGUgcmVhbCB3b3JsZFxuICAgICAgICAgICAgICAgIHNvdXJjZVggPSBzb3VyY2VYIC0gd29ybGRzQXdheSAqIHNvdXJjZUV4dGVudFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc291cmNlWCA9IGNsYW1wKHNvdXJjZVgsIHNvdXJjZUV4dGVudFswXSwgc291cmNlRXh0ZW50WzJdKTtcbiAgICAgICAgICAgIHNvdXJjZVkgPSBjbGFtcChzb3VyY2VZLCBzb3VyY2VFeHRlbnRbMV0sIHNvdXJjZUV4dGVudFszXSk7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZCA9IHRyYW5zZm9ybShbc291cmNlWCwgc291cmNlWV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWQgPSB0cmFuc2Zvcm0oY29vcmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JsZHNBd2F5ICYmIGRlc3RQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgICAgIC8vIE1vdmUgdHJhbnNmb3JtZWQgY29vcmRpbmF0ZSBiYWNrIHRvIHRoZSBvZmZzZXQgd29ybGRcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkWzBdICs9IHdvcmxkc0F3YXkgKiBnZXRXaWR0aChkZXN0UHJvai5nZXRFeHRlbnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xuICAgIH07XG59XG4vKipcbiAqIEFkZCB0cmFuc2Zvcm1zIHRvIGFuZCBmcm9tIEVQU0c6NDMyNiBhbmQgRVBTRzozODU3LiAgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAqIGJ5IHdoZW4gdGhpcyBtb2R1bGUgaXMgZXhlY3V0ZWQgYW5kIHNob3VsZCBvbmx5IG5lZWQgdG8gYmUgY2FsbGVkIGFnYWluIGFmdGVyXG4gKiBgY2xlYXJBbGxQcm9qZWN0aW9ucygpYCBpcyBjYWxsZWQgKGUuZy4gaW4gdGVzdHMpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29tbW9uKCkge1xuICAgIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdGhhdCBkb24ndCBhbHRlciBjb29yZGluYXRlcyB0byBjb252ZXJ0IHdpdGhpbiBzZXQgb2ZcbiAgICAvLyBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gICAgYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKEVQU0czODU3X1BST0pFQ1RJT05TKTtcbiAgICBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMoRVBTRzQzMjZfUFJPSkVDVElPTlMpO1xuICAgIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdG8gY29udmVydCBFUFNHOjQzMjYgbGlrZSBjb29yZGluYXRlcyB0byBFUFNHOjM4NTcgbGlrZVxuICAgIC8vIGNvb3JkaW5hdGVzIGFuZCBiYWNrLlxuICAgIGFkZEVxdWl2YWxlbnRUcmFuc2Zvcm1zKEVQU0c0MzI2X1BST0pFQ1RJT05TLCBFUFNHMzg1N19QUk9KRUNUSU9OUywgZnJvbUVQU0c0MzI2LCB0b0VQU0c0MzI2KTtcbn1cbmFkZENvbW1vbigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvai5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtMkQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0cmFuc2Zvcm0sIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2pdO1xuICAgICAgICB2YXIgeSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV07XG4gICAgICAgIGRlc3RbaSsrXSA9IHRyYW5zZm9ybVswXSAqIHggKyB0cmFuc2Zvcm1bMl0gKiB5ICsgdHJhbnNmb3JtWzRdO1xuICAgICAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5jaG9yIFJvdGF0aW9uIGFuY2hvciBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9kZXN0IERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBhbmdsZSwgYW5jaG9yLCBvcHRfZGVzdCkge1xuICAgIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB2YXIgYW5jaG9yWCA9IGFuY2hvclswXTtcbiAgICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IGZsYXRDb29yZGluYXRlc1tqXSAtIGFuY2hvclg7XG4gICAgICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWCArIGRlbHRhWCAqIGNvcyAtIGRlbHRhWSAqIHNpbjtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWSArIGRlbHRhWCAqIHNpbiArIGRlbHRhWSAqIGNvcztcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogU2NhbGUgdGhlIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBTY2FsZSBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzeCwgc3ksIGFuY2hvciwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgYW5jaG9yWCA9IGFuY2hvclswXTtcbiAgICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IGZsYXRDb29yZGluYXRlc1tqXSAtIGFuY2hvclg7XG4gICAgICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWCArIHN4ICogZGVsdGFYO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JZICsgc3kgKiBkZWx0YVk7XG4gICAgICAgIGZvciAodmFyIGsgPSBqICsgMjsgayA8IGogKyBzdHJpZGU7ICsraykge1xuICAgICAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZGVsdGFYLCBkZWx0YVksIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1tqXSArIGRlbHRhWDtcbiAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSArIGRlbHRhWTtcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL0dlb21ldHJ5XG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCB9IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFbXB0eSwgY3JlYXRlT3JVcGRhdGVFbXB0eSwgZ2V0SGVpZ2h0LCByZXR1cm5PclVwZGF0ZSwgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24sIGdldFRyYW5zZm9ybSB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgbWVtb2l6ZU9uZSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0yRCB9IGZyb20gJy4vZmxhdC90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAqL1xudmFyIHRtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBCYXNlIGNsYXNzIGZvciB2ZWN0b3IgZ2VvbWV0cmllcy5cbiAqXG4gKiBUbyBnZXQgbm90aWZpZWQgb2YgY2hhbmdlcyB0byB0aGUgZ2VvbWV0cnksIHJlZ2lzdGVyIGEgbGlzdGVuZXIgZm9yIHRoZVxuICogZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBvbiB5b3VyIGdlb21ldHJ5IGluc3RhbmNlLlxuICpcbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgR2VvbWV0cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdlb21ldHJ5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEdlb21ldHJ5KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRfID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGEgdHJhbnNmb3JtZWQgYW5kIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICAgICAqIEBhYnN0cmFjdFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmV2aXNpb24gVGhlIGdlb21ldHJ5IHJldmlzaW9uLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSBbb3B0X3RyYW5zZm9ybV0gT3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNpbXBsaWZ5VHJhbnNmb3JtZWRJbnRlcm5hbCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKHJldmlzaW9uLCBzcXVhcmVkVG9sZXJhbmNlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBpZiAoIW9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgICAgICBjbG9uZS5hcHBseVRyYW5zZm9ybShvcHRfdHJhbnNmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiBjbG9uZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIHRyYW5zZm9ybWVkIGFuZCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gW29wdF90cmFuc2Zvcm1dIE9wdGlvbmFsIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2ltcGxpZnlUcmFuc2Zvcm1lZCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZ5VHJhbnNmb3JtZWRJbnRlcm5hbCh0aGlzLmdldFJldmlzaW9uKCksIHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4geyFHZW9tZXRyeX0gQ2xvbmUuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY29udGFpbnNYWSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBjb29yZCA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50KFt4LCB5XSk7XG4gICAgICAgIHJldHVybiBjb29yZFswXSA9PT0geCAmJiBjb29yZFsxXSA9PT0geTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY2xvc2VzdCBwb2ludCBvZiB0aGUgZ2VvbWV0cnkgdG8gdGhlIHBhc3NlZCBwb2ludCBhc1xuICAgICAqIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlIGNvb3JkaW5hdGV9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9jbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRDbG9zZXN0UG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIG9wdF9jbG9zZXN0UG9pbnQpIHtcbiAgICAgICAgdmFyIGNsb3Nlc3RQb2ludCA9IG9wdF9jbG9zZXN0UG9pbnQgPyBvcHRfY2xvc2VzdFBvaW50IDogW05hTiwgTmFOXTtcbiAgICAgICAgdGhpcy5jbG9zZXN0UG9pbnRYWShwb2ludFswXSwgcG9pbnRbMV0sIGNsb3Nlc3RQb2ludCwgSW5maW5pdHkpO1xuICAgICAgICByZXR1cm4gY2xvc2VzdFBvaW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZ2VvbWV0cnkgaW5jbHVkZXMgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlLiBJZiB0aGVcbiAgICAgKiBjb29yZGluYXRlIGlzIG9uIHRoZSBib3VuZGFyeSBvZiB0aGUgZ2VvbWV0cnksIHJldHVybnMgZmFsc2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuaW50ZXJzZWN0c0Nvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluc1hZKGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKG9wdF9leHRlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdmFyIGV4dGVudCA9IHRoaXMuY29tcHV0ZUV4dGVudCh0aGlzLmV4dGVudF8pO1xuICAgICAgICAgICAgaWYgKGlzTmFOKGV4dGVudFswXSkgfHwgaXNOYU4oZXh0ZW50WzFdKSkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZU9yVXBkYXRlRW1wdHkoZXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXh0ZW50UmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXR1cm5PclVwZGF0ZSh0aGlzLmV4dGVudF8sIG9wdF9leHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUm90YXRlIHRoZSBnZW9tZXRyeSBhcm91bmQgYSBnaXZlbiBjb29yZGluYXRlLiBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiBhbmdsZSBpbiByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIChhbmdsZSwgYW5jaG9yKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTY2FsZSB0aGUgZ2VvbWV0cnkgKHdpdGggYW4gb3B0aW9uYWwgb3JpZ2luKS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN4IFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfc3kgVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbiAoZGVmYXVsdHMgdG8gc3gpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBUaGUgc2NhbGUgb3JpZ2luIChkZWZhdWx0cyB0byB0aGUgY2VudGVyXG4gICAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkuICBGb3IgbGluZXN0cmluZ3MsIHRoaXMgdXNlc1xuICAgICAqIHRoZSBbRG91Z2xhcyBQZXVja2VyXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SYW1lci1Eb3VnbGFzLVBldWNrZXJfYWxnb3JpdGhtKVxuICAgICAqIGFsZ29yaXRobS4gIEZvciBwb2x5Z29ucywgYSBxdWFudGl6YXRpb24tYmFzZWRcbiAgICAgKiBzaW1wbGlmaWNhdGlvbiBpcyB1c2VkIHRvIHByZXNlcnZlIHRvcG9sb2d5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVGhlIHRvbGVyYW5jZSBkaXN0YW5jZSBmb3Igc2ltcGxpZmljYXRpb24uXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IEEgbmV3LCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIG9yaWdpbmFsIGdlb21ldHJ5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2ltcGxpZnkgPSBmdW5jdGlvbiAodG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeSh0b2xlcmFuY2UgKiB0b2xlcmFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkgdXNpbmcgdGhlIERvdWdsYXMgUGV1Y2tlclxuICAgICAqIGFsZ29yaXRobS5cbiAgICAgKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5ID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBDYWxsZWQgd2l0aCBhIGZsYXQgYXJyYXkgb2YgZ2VvbWV0cnkgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmFwcGx5VHJhbnNmb3JtID0gZnVuY3Rpb24gKHRyYW5zZm9ybUZuKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgdGhlIGdlb21ldHJ5LiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgaW4gcGxhY2UuICBJZlxuICAgICAqIGluc3RlYWQgeW91IHdhbnQgYSBuZXcgZ2VvbWV0cnksIGZpcnN0IGBjbG9uZSgpYCB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBlYWNoIGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5IGZyb20gb25lIGNvb3JkaW5hdGUgcmVmZXJlbmNlXG4gICAgICogc3lzdGVtIHRvIGFub3RoZXIuIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICAgKiBGb3IgZXhhbXBsZSwgYSBsaW5lIHdpbGwgYmUgdHJhbnNmb3JtZWQgdG8gYSBsaW5lIGFuZCBhIGNpcmNsZSB0byBhIGNpcmNsZS5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHNvdXJjZSBUaGUgY3VycmVudCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAgICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBUaGUgZGVzaXJlZCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAgICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IFRoaXMgZ2VvbWV0cnkuICBOb3RlIHRoYXQgb3JpZ2luYWwgZ2VvbWV0cnkgaXNcbiAgICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbiAoc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqL1xuICAgICAgICB2YXIgc291cmNlUHJvaiA9IGdldFByb2plY3Rpb24oc291cmNlKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybUZuID0gc291cmNlUHJvai5nZXRVbml0cygpID09IFVuaXRzLlRJTEVfUElYRUxTXG4gICAgICAgICAgICA/IGZ1bmN0aW9uIChpbkNvb3JkaW5hdGVzLCBvdXRDb29yZGluYXRlcywgc3RyaWRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBpeGVsRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvamVjdGVkRXh0ZW50ID0gc291cmNlUHJvai5nZXRXb3JsZEV4dGVudCgpO1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IGdldEhlaWdodChwcm9qZWN0ZWRFeHRlbnQpIC8gZ2V0SGVpZ2h0KHBpeGVsRXh0ZW50KTtcbiAgICAgICAgICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcHJvamVjdGVkRXh0ZW50WzBdLCBwcm9qZWN0ZWRFeHRlbnRbM10sIHNjYWxlLCAtc2NhbGUsIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTJEKGluQ29vcmRpbmF0ZXMsIDAsIGluQ29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIHRtcFRyYW5zZm9ybSwgb3V0Q29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pKGluQ29vcmRpbmF0ZXMsIG91dENvb3JkaW5hdGVzLCBzdHJpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtKHRyYW5zZm9ybUZuKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gR2VvbWV0cnk7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IEdlb21ldHJ5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlMYXlvdXRcbiAqL1xuLyoqXG4gKiBUaGUgY29vcmRpbmF0ZSBsYXlvdXQgZm9yIGdlb21ldHJpZXMsIGluZGljYXRpbmcgd2hldGhlciBhIDNyZCBvciA0dGggeiAoJ1onKVxuICogb3IgbWVhc3VyZSAoJ00nKSBjb29yZGluYXRlIGlzIGF2YWlsYWJsZS4gU3VwcG9ydGVkIHZhbHVlcyBhcmUgYCdYWSdgLFxuICogYCdYWVonYCwgYCdYWU0nYCwgYCdYWVpNJ2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgWFk6ICdYWScsXG4gICAgWFlaOiAnWFlaJyxcbiAgICBYWU06ICdYWU0nLFxuICAgIFhZWk06ICdYWVpNJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeUxheW91dC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1NpbXBsZUdlb21ldHJ5XG4gKi9cbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuL0dlb21ldHJ5LmpzJztcbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMsIGdldENlbnRlciB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyByb3RhdGUsIHNjYWxlLCB0cmFuc2Zvcm0yRCwgdHJhbnNsYXRlIH0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlczsgZG8gbm90IGluc3RhbnRpYXRlXG4gKiBpbiBhcHBzLCBhcyBjYW5ub3QgYmUgcmVuZGVyZWQuXG4gKlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBTaW1wbGVHZW9tZXRyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2ltcGxlR2VvbWV0cnksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2ltcGxlR2VvbWV0cnkoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0cmlkZSA9IDI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmxhdENvb3JkaW5hdGVzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXModGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTwqPn0gQ29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgZmlyc3QgY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBGaXJzdCBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Rmlyc3RDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoMCwgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0RmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGxhc3QgY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBMYXN0IHBvaW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0TGFzdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSh0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggLSB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeUxheW91dCBsYXlvdXR9IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldExheW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkgdXNpbmcgdGhlIERvdWdsYXMgUGV1Y2tlciBhbGdvcml0aG0uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7U2ltcGxlR2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeSA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIGlmICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uICE9PSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IDA7XG4gICAgICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHNxdWFyZWRUb2xlcmFuY2UgaXMgbmVnYXRpdmUgb3IgaWYgd2Uga25vdyB0aGF0IHNpbXBsaWZpY2F0aW9uIHdpbGwgbm90XG4gICAgICAgIC8vIGhhdmUgYW55IGVmZmVjdCB0aGVuIGp1c3QgcmV0dXJuIHRoaXMuXG4gICAgICAgIGlmIChzcXVhcmVkVG9sZXJhbmNlIDwgMCB8fFxuICAgICAgICAgICAgKHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSAhPT0gMCAmJlxuICAgICAgICAgICAgICAgIHNxdWFyZWRUb2xlcmFuY2UgPD0gdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNpbXBsaWZpZWRHZW9tZXRyeSA9IHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gc2ltcGxpZmllZEdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaW1wbGlmaWVkR2VvbWV0cnk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBTaW1wbGlmaWNhdGlvbiBkaWQgbm90IGFjdHVhbGx5IHJlbW92ZSBhbnkgY29vcmRpbmF0ZXMuICBXZSBub3cga25vd1xuICAgICAgICAgICAgLy8gdGhhdCBhbnkgY2FsbHMgdG8gZ2V0U2ltcGxpZmllZEdlb21ldHJ5IHdpdGggYSBzcXVhcmVkVG9sZXJhbmNlIGxlc3NcbiAgICAgICAgICAgIC8vIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGN1cnJlbnQgc3F1YXJlZFRvbGVyYW5jZSB3aWxsIGFsc28gbm90IGhhdmUgYW55XG4gICAgICAgICAgICAvLyBlZmZlY3QuICBUaGlzIGFsbG93cyB1cyB0byBzaG9ydCBjaXJjdWl0IHNpbXBsaWZpY2F0aW9uIChzYXZpbmcgQ1BVXG4gICAgICAgICAgICAvLyBjeWNsZXMpIGFuZCBwcmV2ZW50cyB0aGUgY2FjaGUgb2Ygc2ltcGxpZmllZCBnZW9tZXRyaWVzIGZyb20gZmlsbGluZ1xuICAgICAgICAgICAgLy8gdXAgd2l0aCB1c2VsZXNzIGlkZW50aWNhbCBjb3BpZXMgb2YgdGhpcyBnZW9tZXRyeSAoc2F2aW5nIG1lbW9yeSkuXG4gICAgICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSBzcXVhcmVkVG9sZXJhbmNlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1NpbXBsZUdlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gU3RyaWRlLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRTdHJpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmlkZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBsYXlvdXQgTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNldEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChsYXlvdXQsIGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICB0aGlzLnN0cmlkZSA9IGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpO1xuICAgICAgICB0aGlzLmxheW91dCA9IGxheW91dDtcbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0geyFBcnJheTwqPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gbGF5b3V0IExheW91dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PCo+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbmVzdGluZyBOZXN0aW5nLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0TGF5b3V0ID0gZnVuY3Rpb24gKGxheW91dCwgY29vcmRpbmF0ZXMsIG5lc3RpbmcpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgICAgIHZhciBzdHJpZGU7XG4gICAgICAgIGlmIChsYXlvdXQpIHtcbiAgICAgICAgICAgIHN0cmlkZSA9IGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXN0aW5nOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaWRlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge0FycmF5fSAqLyAoY29vcmRpbmF0ZXNbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmlkZSA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGxheW91dCA9IGdldExheW91dEZvclN0cmlkZShzdHJpZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICB0aGlzLnN0cmlkZSA9IHN0cmlkZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBDYWxsZWQgd2l0aCBhIGZsYXQgYXJyYXkgb2YgZ2VvbWV0cnkgY29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm1Gbikge1xuICAgICAgICBpZiAodGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybUZuKHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLmZsYXRDb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGUgZ2VvbWV0cnkgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS4gVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gYW5nbGUgaW4gcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiAoYW5nbGUsIGFuY2hvcikge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICAgICAgICByb3RhdGUoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGFuZ2xlLCBhbmNob3IsIGZsYXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2NhbGUgdGhlIGdlb21ldHJ5ICh3aXRoIGFuIG9wdGlvbmFsIG9yaWdpbikuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzeCBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3N5IFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24gKGRlZmF1bHRzIHRvIHN4KS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgVGhlIHNjYWxlIG9yaWdpbiAoZGVmYXVsdHMgdG8gdGhlIGNlbnRlclxuICAgICAqICAgICBvZiB0aGUgZ2VvbWV0cnkgZXh0ZW50KS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHN4LCBvcHRfc3ksIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIHN5ID0gb3B0X3N5O1xuICAgICAgICBpZiAoc3kgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3kgPSBzeDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5jaG9yID0gb3B0X2FuY2hvcjtcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICAgIGFuY2hvciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICAgICAgICBzY2FsZShmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgc3gsIHN5LCBhbmNob3IsIGZsYXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIHRoZSBnZW9tZXRyeS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5IGNvb3JkaW5hdGVzIGluIHBsYWNlLiAgSWZcbiAgICAgKiBpbnN0ZWFkIHlvdSB3YW50IGEgbmV3IGdlb21ldHJ5LCBmaXJzdCBgY2xvbmUoKWAgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24gKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIHRyYW5zbGF0ZShmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgZGVsdGFYLCBkZWx0YVksIGZsYXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNpbXBsZUdlb21ldHJ5O1xufShHZW9tZXRyeSkpO1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gbGF5b3V0IExheW91dC5cbiAqL1xuZnVuY3Rpb24gZ2V0TGF5b3V0Rm9yU3RyaWRlKHN0cmlkZSkge1xuICAgIHZhciBsYXlvdXQ7XG4gICAgaWYgKHN0cmlkZSA9PSAyKSB7XG4gICAgICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdHJpZGUgPT0gMykge1xuICAgICAgICBsYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWVo7XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0cmlkZSA9PSA0KSB7XG4gICAgICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZWk07XG4gICAgfVxuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gKi8gKGxheW91dCk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBsYXlvdXQgTGF5b3V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KSB7XG4gICAgdmFyIHN0cmlkZTtcbiAgICBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZKSB7XG4gICAgICAgIHN0cmlkZSA9IDI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWVogfHwgbGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZTSkge1xuICAgICAgICBzdHJpZGUgPSAzO1xuICAgIH1cbiAgICBlbHNlIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFlaTSkge1xuICAgICAgICBzdHJpZGUgPSA0O1xuICAgIH1cbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChzdHJpZGUpO1xufVxuLyoqXG4gKiBAcGFyYW0ge1NpbXBsZUdlb21ldHJ5fSBzaW1wbGVHZW9tZXRyeSBTaW1wbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1HZW9tMkQoc2ltcGxlR2VvbWV0cnksIHRyYW5zZm9ybSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gc2ltcGxlR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKCFmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgc3RyaWRlID0gc2ltcGxlR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgdHJhbnNmb3JtLCBvcHRfZGVzdCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgU2ltcGxlR2VvbWV0cnk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TaW1wbGVHZW9tZXRyeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2RlZmxhdGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZSwgc3RyaWRlKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2ldO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzLCBzdHJpZGUpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RyaWRlOyArK2opIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2pdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IGNvb3JkaW5hdGVzcyBDb29yZGluYXRlc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9lbmRzIEVuZHMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzcywgc3RyaWRlLCBvcHRfZW5kcykge1xuICAgIHZhciBlbmRzID0gb3B0X2VuZHMgPyBvcHRfZW5kcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBjb29yZGluYXRlc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kID0gZGVmbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3Nbal0sIHN0cmlkZSk7XG4gICAgICAgIGVuZHNbaSsrXSA9IGVuZDtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICBlbmRzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGVuZHM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBjb29yZGluYXRlc3NzIENvb3JkaW5hdGVzc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj49fSBvcHRfZW5kc3MgRW5kc3MuXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gRW5kc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlTXVsdGlDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3NzLCBzdHJpZGUsIG9wdF9lbmRzcykge1xuICAgIHZhciBlbmRzcyA9IG9wdF9lbmRzcyA/IG9wdF9lbmRzcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBjb29yZGluYXRlc3NzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzc1tqXSwgc3RyaWRlLCBlbmRzc1tpXSk7XG4gICAgICAgIGVuZHNzW2krK10gPSBlbmRzO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIGVuZHNzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGVuZHNzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmbGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvaW50XG4gKi9cbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHsgY29udGFpbnNYWSwgY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZSB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBkZWZsYXRlQ29vcmRpbmF0ZSB9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7IHNxdWFyZWREaXN0YW5jZSBhcyBzcXVhcmVkRHggfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUG9pbnQgZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgUG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvaW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBvaW50KGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7IVBvaW50fSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9pbnQgPSBuZXcgUG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQpO1xuICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIHZhciBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmZsYXRDb29yZGluYXRlcyA/IFtdIDogdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuY29tcHV0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5QT0lOVDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zWFkoZXh0ZW50LCB0aGlzLmZsYXRDb29yZGluYXRlc1swXSwgdGhpcy5mbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshQXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0PX0gb3B0X2xheW91dCBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMCk7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIFBvaW50O1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgUG9pbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2xjcy51dGlsXG4gKi9cbmNvbnN0IGV4cG9ydHMgPSB7fTtcblxuXG4vKipcbiAqIENhc3QgdG8gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmFtXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmV4cG9ydHMub2JqID0gZnVuY3Rpb24ocGFyYW0pIHtcbiAgcmV0dXJuIHBhcmFtO1xufTtcblxuXG4vKipcbiAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydHMuc3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZFJlc3VsdF8gPSB1bmRlZmluZWQ7XG5cblxuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydHMuaW1hZ2VSZW5kZXJpbmdWYWx1ZVJlc3VsdF8gPSB1bmRlZmluZWQ7XG5cblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnRzLnN1cHBvcnRzSW1hZ2VSZW5kZXJpbmdQaXhlbGF0ZWQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKGV4cG9ydHMuc3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZFJlc3VsdF8gPT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlczsgaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7Jyk7XG4gICAgLy8gY2FudmFzLnN0eWxlLmltYWdlUmVuZGVyaW5nIHdpbGwgYmUgdW5kZWZpbmVkLCBudWxsIG9yIGFuXG4gICAgLy8gZW1wdHkgc3RyaW5nIG9uIHVuc3VwcG9ydGVkIGJyb3dzZXJzLlxuICAgIGNvbnN0IHRtcCA9IGNhbnZhcy5zdHlsZVsnaW1hZ2VSZW5kZXJpbmcnXTsgLy8gbm9uIHN0YW5kYXJkXG4gICAgZXhwb3J0cy5zdXBwb3J0c0ltYWdlUmVuZGVyaW5nUGl4ZWxhdGVkUmVzdWx0XyA9ICEhdG1wO1xuICAgIGlmIChleHBvcnRzLnN1cHBvcnRzSW1hZ2VSZW5kZXJpbmdQaXhlbGF0ZWRSZXN1bHRfKSB7XG4gICAgICBleHBvcnRzLmltYWdlUmVuZGVyaW5nVmFsdWVSZXN1bHRfID0gdG1wO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZXhwb3J0cy5zdXBwb3J0c0ltYWdlUmVuZGVyaW5nUGl4ZWxhdGVkUmVzdWx0Xztcbn07XG5cblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydHMuaW1hZ2VSZW5kZXJpbmdWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICBleHBvcnRzLnN1cHBvcnRzSW1hZ2VSZW5kZXJpbmdQaXhlbGF0ZWQoKTtcbiAgcmV0dXJuIGV4cG9ydHMuaW1hZ2VSZW5kZXJpbmdWYWx1ZVJlc3VsdF8gfHwgJyc7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgcHJvamVjdGlvbiBvZiB0aGUgc291cmNlIHRoYXQgQ2VzaXVtIHNob3VsZCB1c2UuXG4gKlxuICogQHBhcmFtIHtvbC5zb3VyY2UuU291cmNlfSBzb3VyY2UgU291cmNlLlxuICogQHJldHVybnMge29sLnByb2ouUHJvamVjdGlvbn0gVGhlIHByb2plY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAqL1xuZXhwb3J0cy5nZXRTb3VyY2VQcm9qZWN0aW9uID0gZnVuY3Rpb24oc291cmNlKSB7XG4gIHJldHVybiAvKiogQHR5cGUge29sLnByb2ouUHJvamVjdGlvbn0gKi8gKHNvdXJjZS5nZXQoJ29sY3MucHJvamVjdGlvbicpKVxuICAgIHx8IHNvdXJjZS5nZXRQcm9qZWN0aW9uKCk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2wuT2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyXG4gKiBAcmV0dXJuIHshb2wuZXZlbnRzLkV2ZW50c0tleX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9sY3NMaXN0ZW4ob2JzZXJ2YWJsZSwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVubGF5ZXJzL29wZW5sYXllcnMvcHVsbC84NDgxXG4gIC8vIG9sLmV2ZW50cy5saXN0ZW4gaXMgaW50ZXJuYWwgc28gd2UgdXNlIGBvbmAgaW5zdGVhZC5cbiAgLy8gQW5kIHNpbmNlIGBvbmAgYXMgYSBjb252b2x1dGVkIEFQSSAoY2FuIHJldHVybiBhbiBFdmVudHNLZXkgb3IgYW4gYXJyYXkgb2YgdGhlbSlcbiAgLy8gd2UgdXNlIGEgY2FzdCBoZXJlLlxuICByZXR1cm4gLyoqIEB0eXBlIHshb2wuZXZlbnRzLkV2ZW50c0tleX0gKi8gKG9ic2VydmFibGUub24odHlwZSwgbGlzdGVuZXIpKTtcbn1cblxuLyoqXG4gKiBDb3VudGVyIGZvciBnZXRVaWQuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5sZXQgdWlkQ291bnRlcl8gPSAwO1xuXG4vKipcbiAqIEdldHMgYSB1bmlxdWUgSUQgZm9yIGFuIG9iamVjdC4gVGhpcyBtdXRhdGVzIHRoZSBvYmplY3Qgc28gdGhhdCBmdXJ0aGVyIGNhbGxzXG4gKiB3aXRoIHRoZSBzYW1lIG9iamVjdCBhcyBhIHBhcmFtZXRlciByZXR1cm5zIHRoZSBzYW1lIHZhbHVlLiBVbmlxdWUgSURzIGFyZSBnZW5lcmF0ZWRcbiAqIGFzIGEgc3RyaWN0bHkgaW5jcmVhc2luZyBzZXF1ZW5jZS4gQWRhcHRlZCBmcm9tIGdvb2cuZ2V0VWlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBnZXQgdGhlIHVuaXF1ZSBJRCBmb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB1bmlxdWUgSUQgZm9yIHRoZSBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVaWQob2JqKSB7XG4gIHJldHVybiBvYmoub2xjc191aWQgfHwgKG9iai5vbGNzX3VpZCA9ICsrdWlkQ291bnRlcl8pO1xufVxuXG4vKipcbiAqIFNvcnQgdGhlIHBhc3NlZCBhcnJheSBzdWNoIHRoYXQgdGhlIHJlbGF0aXZlIG9yZGVyIG9mIGVxdWFsIGVsZW1lbnRzIGlzIHByZXZlcnZlZC5cbiAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Tb3J0aW5nX2FsZ29yaXRobSNTdGFiaWxpdHkgZm9yIGRldGFpbHMuXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHNvcnQgKG1vZGlmaWVzIG9yaWdpbmFsKS5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKCosICopOiBudW1iZXJ9IGNvbXBhcmVGbmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YWJsZVNvcnQoYXJyLCBjb21wYXJlRm5jKSB7XG4gIGNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gIGNvbnN0IHRtcCA9IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdG1wW2ldID0ge2luZGV4OiBpLCB2YWx1ZTogYXJyW2ldfTtcbiAgfVxuICB0bXAuc29ydCgoYSwgYikgPT4gY29tcGFyZUZuYyhhLnZhbHVlLCBiLnZhbHVlKSB8fCBhLmluZGV4IC0gYi5pbmRleCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyW2ldID0gdG1wW2ldLnZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtOb2RlfSBUaGUgbm9kZSB0aGF0IHdhcyByZW1vdmVkIG9yIG51bGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlID8gbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlIHRoZSBjaGlsZHJlbiBmcm9tLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSkge1xuICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7Q2VzaXVtLlNjZW5lfSBzY2VuZSBUaGUgc2NlbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0dyb3VuZFBvbHlsaW5lUHJpbWl0aXZlU3VwcG9ydGVkKHNjZW5lKSB7XG4gIGNvbnN0IG9iaiA9IENlc2l1bS5Hcm91bmRQb2x5bGluZVByaW1pdGl2ZTtcbiAgcmV0dXJuIG9iaiAmJiBvYmouaXNTdXBwb3J0ZWQoc2NlbmUpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBleHBvcnRzO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Vhc2luZ1xuICovXG4vKipcbiAqIFN0YXJ0IHNsb3cgYW5kIHNwZWVkIHVwLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluKHQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3codCwgMyk7XG59XG4vKipcbiAqIFN0YXJ0IGZhc3QgYW5kIHNsb3cgZG93bi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVhc2VPdXQodCkge1xuICAgIHJldHVybiAxIC0gZWFzZUluKDEgLSB0KTtcbn1cbi8qKlxuICogU3RhcnQgc2xvdywgc3BlZWQgdXAsIGFuZCB0aGVuIHNsb3cgZG93biBhZ2Fpbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluQW5kT3V0KHQpIHtcbiAgICByZXR1cm4gMyAqIHQgKiB0IC0gMiAqIHQgKiB0ICogdDtcbn1cbi8qKlxuICogTWFpbnRhaW4gYSBjb25zdGFudCBzcGVlZCBvdmVyIHRpbWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXIodCkge1xuICAgIHJldHVybiB0O1xufVxuLyoqXG4gKiBTdGFydCBzbG93LCBzcGVlZCB1cCwgYW5kIGF0IHRoZSB2ZXJ5IGVuZCBzbG93IGRvd24gYWdhaW4uICBUaGlzIGhhcyB0aGVcbiAqIHNhbWUgZ2VuZXJhbCBiZWhhdmlvciBhcyB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZ35pbkFuZE91dH0sIGJ1dCB0aGUgZmluYWxcbiAqIHNsb3dkb3duIGlzIGRlbGF5ZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cEFuZERvd24odCkge1xuICAgIGlmICh0IDwgMC41KSB7XG4gICAgICAgIHJldHVybiBpbkFuZE91dCgyICogdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gMSAtIGluQW5kT3V0KDIgKiAodCAtIDAuNSkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhc2luZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgT1BBQ0lUWTogJ29wYWNpdHknLFxuICAgIFZJU0lCTEU6ICd2aXNpYmxlJyxcbiAgICBFWFRFTlQ6ICdleHRlbnQnLFxuICAgIFpfSU5ERVg6ICd6SW5kZXgnLFxuICAgIE1BWF9SRVNPTFVUSU9OOiAnbWF4UmVzb2x1dGlvbicsXG4gICAgTUlOX1JFU09MVVRJT046ICdtaW5SZXNvbHV0aW9uJyxcbiAgICBNQVhfWk9PTTogJ21heFpvb20nLFxuICAgIE1JTl9aT09NOiAnbWluWm9vbScsXG4gICAgU09VUkNFOiAnc291cmNlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9CYXNlXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbGF5ZXInXSBBIENTUyBjbGFzcyBuYW1lIHRvIHNldCB0byB0aGUgbGF5ZXIgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIE5vdGUgdGhhdCB3aXRoIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX0gYW5kIGFsbCBpdHMgc3ViY2xhc3NlcywgYW55IHByb3BlcnR5IHNldCBpblxuICogdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R9IHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3QsIHNvXG4gKiBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZUxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VMYXllcihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZXSA9XG4gICAgICAgICAgICBvcHRpb25zLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhY2l0eSA6IDE7XG4gICAgICAgIGFzc2VydCh0eXBlb2YgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk9QQUNJVFldID09PSAnbnVtYmVyJywgNjQpOyAvLyBMYXllciBvcGFjaXR5IG11c3QgYmUgYSBudW1iZXJcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlZJU0lCTEVdID1cbiAgICAgICAgICAgIG9wdGlvbnMudmlzaWJsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52aXNpYmxlIDogdHJ1ZTtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlpfSU5ERVhdID0gb3B0aW9ucy56SW5kZXg7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTl0gPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFJlc29sdXRpb24gOiBJbmZpbml0eTtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OXSA9XG4gICAgICAgICAgICBvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluUmVzb2x1dGlvbiA6IDA7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAtSW5maW5pdHk7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NQVhfWk9PTV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFpvb20gOiBJbmZpbml0eTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jbGFzc05hbWVfID1cbiAgICAgICAgICAgIHByb3BlcnRpZXMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1sYXllcic7XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmNsYXNzTmFtZTtcbiAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGVfID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IENTUyBjbGFzcyBuYW1lLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0Q2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGFzc05hbWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IG1lYW50IHRvIGJlIGNhbGxlZCBieSBsYXllcnMgb3IgbGF5ZXIgcmVuZGVyZXJzIGJlY2F1c2UgdGhlIHN0YXRlXG4gICAgICogaXMgaW5jb3JyZWN0IGlmIHRoZSBsYXllciBpcyBpbmNsdWRlZCBpbiBhIGxheWVyIGdyb3VwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X21hbmFnZWQgTGF5ZXIgaXMgbWFuYWdlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfSBMYXllciBzdGF0ZS5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGUgPSBmdW5jdGlvbiAob3B0X21hbmFnZWQpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfSAqL1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlXyB8fFxuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqLyAoe1xuICAgICAgICAgICAgICAgIGxheWVyOiB0aGlzLFxuICAgICAgICAgICAgICAgIG1hbmFnZWQ6IG9wdF9tYW5hZ2VkID09PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0X21hbmFnZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdmFyIHpJbmRleCA9IHRoaXMuZ2V0WkluZGV4KCk7XG4gICAgICAgIHN0YXRlLm9wYWNpdHkgPSBjbGFtcChNYXRoLnJvdW5kKHRoaXMuZ2V0T3BhY2l0eSgpICogMTAwKSAvIDEwMCwgMCwgMSk7XG4gICAgICAgIHN0YXRlLnNvdXJjZVN0YXRlID0gdGhpcy5nZXRTb3VyY2VTdGF0ZSgpO1xuICAgICAgICBzdGF0ZS52aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlKCk7XG4gICAgICAgIHN0YXRlLmV4dGVudCA9IHRoaXMuZ2V0RXh0ZW50KCk7XG4gICAgICAgIHN0YXRlLnpJbmRleCA9XG4gICAgICAgICAgICB6SW5kZXggIT09IHVuZGVmaW5lZCA/IHpJbmRleCA6IHN0YXRlLm1hbmFnZWQgPT09IGZhbHNlID8gSW5maW5pdHkgOiAwO1xuICAgICAgICBzdGF0ZS5tYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRNYXhSZXNvbHV0aW9uKCk7XG4gICAgICAgIHN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heCh0aGlzLmdldE1pblJlc29sdXRpb24oKSwgMCk7XG4gICAgICAgIHN0YXRlLm1pblpvb20gPSB0aGlzLmdldE1pblpvb20oKTtcbiAgICAgICAgc3RhdGUubWF4Wm9vbSA9IHRoaXMuZ2V0TWF4Wm9vbSgpO1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD49fSBvcHRfYXJyYXkgQXJyYXkgb2YgbGF5ZXJzICh0byBiZVxuICAgICAqICAgICBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJzQXJyYXkgPSBmdW5jdGlvbiAob3B0X2FycmF5KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPj19IG9wdF9zdGF0ZXMgT3B0aW9uYWwgbGlzdCBvZiBsYXllclxuICAgICAqICAgICBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50fkV4dGVudCBleHRlbnR9IG9mIHRoZSBsYXllciBvciBgdW5kZWZpbmVkYCBpZiBpdFxuICAgICAqIHdpbGwgYmUgdmlzaWJsZSByZWdhcmRsZXNzIG9mIGV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gVGhlIGxheWVyIGV4dGVudC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LkVYVEVOVCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUlOX1JFU09MVVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWluWm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1BWF9aT09NKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyIChiZXR3ZWVuIDAgYW5kIDEpLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0T3BhY2l0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU3RhdGUuanNcIikuZGVmYXVsdH0gU291cmNlIHN0YXRlLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllciAoYHRydWVgIG9yIGBmYWxzZWApLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlZJU0lCTEUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZVxuICAgICAqIHJlbmRlcmluZy4gVGhlIGRlZmF1bHQgWi1pbmRleCBpcyAwLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIFotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0WkluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlpfSU5ERVgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZXh0ZW50IGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLiAgSWYgYHVuZGVmaW5lZGAsIHRoZSBsYXllclxuICAgICAqIHdpbGwgYmUgdmlzaWJsZSBhdCBhbGwgZXh0ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBleHRlbnQgVGhlIGV4dGVudCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuRVhURU5ULCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtYXhpbXVtIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKG1heFJlc29sdXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTiwgbWF4UmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAobWluUmVzb2x1dGlvbikge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OLCBtaW5SZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWF4aW11bSB6b29tIChleGNsdXNpdmUpIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgem9vbSBsZXZlbHMgZm9yIGxheWVyIHZpc2liaWxpdHkgYXJlIGJhc2VkIG9uIHRoZVxuICAgICAqIHZpZXcgem9vbSBsZXZlbCwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIGEgdGlsZSBzb3VyY2Ugem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4Wm9vbSBUaGUgbWF4aW11bSB6b29tIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiAobWF4Wm9vbSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1BWF9aT09NLCBtYXhab29tKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWluaW11bSB6b29tIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgem9vbSBsZXZlbHMgZm9yIGxheWVyIHZpc2liaWxpdHkgYXJlIGJhc2VkIG9uIHRoZVxuICAgICAqIHZpZXcgem9vbSBsZXZlbCwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIGEgdGlsZSBzb3VyY2Ugem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluWm9vbSBUaGUgbWluaW11bSB6b29tIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1pblpvb20gPSBmdW5jdGlvbiAobWluWm9vbSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1JTl9aT09NLCBtaW5ab29tKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIsIGFsbG93ZWQgdmFsdWVzIHJhbmdlIGZyb20gMCB0byAxLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE9wYWNpdHkgPSBmdW5jdGlvbiAob3BhY2l0eSkge1xuICAgICAgICBhc3NlcnQodHlwZW9mIG9wYWNpdHkgPT09ICdudW1iZXInLCA2NCk7IC8vIExheWVyIG9wYWNpdHkgbXVzdCBiZSBhIG51bWJlclxuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk9QQUNJVFksIG9wYWNpdHkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllciAoYHRydWVgIG9yIGBmYWxzZWApLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaWJsZSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKHZpc2libGUpIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFLCB2aXNpYmxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBaLWluZGV4IG9mIHRoZSBsYXllciwgd2hpY2ggaXMgdXNlZCB0byBvcmRlciBsYXllcnMgYmVmb3JlIHJlbmRlcmluZy5cbiAgICAgKiBUaGUgZGVmYXVsdCBaLWluZGV4IGlzIDAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHppbmRleCBUaGUgei1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRaSW5kZXggPSBmdW5jdGlvbiAoemluZGV4KSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuWl9JTkRFWCwgemluZGV4KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVfLmxheWVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VMYXllcjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQmFzZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYmVmb3JlIGEgbGF5ZXIgaXMgcmVuZGVyZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcHJlcmVuZGVyXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBSRVJFTkRFUjogJ3ByZXJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGEgbGF5ZXIgaXMgcmVuZGVyZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdHJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT1NUUkVOREVSOiAncG9zdHJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGJlZm9yZSBsYXllcnMgYXJlIHJlbmRlcmVkLlxuICAgICAqIFRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZSBhIGBjb250ZXh0YCBzZXQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcHJlY29tcG9zZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQUkVDT01QT1NFOiAncHJlY29tcG9zZScsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGFsbCBsYXllcnMgYXJlIHJlbmRlcmVkLlxuICAgICAqIFRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZSBhIGBjb250ZXh0YCBzZXQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdGNvbXBvc2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9TVENPTVBPU0U6ICdwb3N0Y29tcG9zZScsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gcmVuZGVyaW5nIGlzIGNvbXBsZXRlLCBpLmUuIGFsbCBzb3VyY2VzIGFuZCB0aWxlcyBoYXZlXG4gICAgICogZmluaXNoZWQgbG9hZGluZyBmb3IgdGhlIGN1cnJlbnQgdmlld3BvcnQsIGFuZCBhbGwgdGlsZXMgYXJlIGZhZGVkIGluLlxuICAgICAqIFRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZSBhIGBjb250ZXh0YCBzZXQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcmVuZGVyY29tcGxldGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUkVOREVSQ09NUExFVEU6ICdyZW5kZXJjb21wbGV0ZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU3RhdGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogU3RhdGUgb2YgdGhlIHNvdXJjZSwgb25lIG9mICd1bmRlZmluZWQnLCAnbG9hZGluZycsICdyZWFkeScgb3IgJ2Vycm9yJy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFVOREVGSU5FRDogJ3VuZGVmaW5lZCcsXG4gICAgTE9BRElORzogJ2xvYWRpbmcnLFxuICAgIFJFQURZOiAncmVhZHknLFxuICAgIEVSUk9SOiAnZXJyb3InLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0xheWVyXG4gKi9cbmltcG9ydCBCYXNlTGF5ZXIgZnJvbSAnLi9CYXNlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGdldENoYW5nZUV2ZW50VHlwZSB9IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGUpOkhUTUxFbGVtZW50fSBSZW5kZXJGdW5jdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLiAgSWYgbm90IHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3RvcixcbiAqIHRoZSBzb3VyY2UgY2FuIGJlIHNldCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIjc2V0U291cmNlIGxheWVyLnNldFNvdXJjZShzb3VyY2UpfSBhZnRlclxuICogY29uc3RydWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gTWFwLlxuICogQHByb3BlcnR5IHtSZW5kZXJGdW5jdGlvbn0gW3JlbmRlcl0gUmVuZGVyIGZ1bmN0aW9uLiBUYWtlcyB0aGUgZnJhbWUgc3RhdGUgYXMgaW5wdXQgYW5kIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhblxuICogSFRNTCBlbGVtZW50LiBXaWxsIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCByZW5kZXJpbmcgZm9yIHRoZSBsYXllci5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LCB0aGUgdmFsdWUgaXMgcm91bmRlZCB0byB0d28gZGlnaXRzIHRvIGFwcGVhciBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVN0YXRlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHZpc2libGVcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gbWFuYWdlZFxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHpJbmRleFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFJlc29sdXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluWm9vbVxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFpvb21cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZyb20gd2hpY2ggYWxsIGxheWVyIHR5cGVzIGFyZSBkZXJpdmVkLiBUaGlzIHNob3VsZCBvbmx5IGJlIGluc3RhbnRpYXRlZFxuICogaW4gdGhlIGNhc2Ugd2hlcmUgYSBjdXN0b20gbGF5ZXIgaXMgYmUgYWRkZWQgdG8gdGhlIG1hcCB3aXRoIGEgY3VzdG9tIGByZW5kZXJgIGZ1bmN0aW9uLlxuICogU3VjaCBhIGZ1bmN0aW9uIGNhbiBiZSBzcGVjaWZpZWQgaW4gdGhlIGBvcHRpb25zYCBvYmplY3QsIGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYW4gSFRNTCBlbGVtZW50LlxuICpcbiAqIEEgdmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIHJhc3RlciBvciB2ZWN0b3IgbWFwIGRhdGEuXG4gKiBMYXllcnMgZ3JvdXAgdG9nZXRoZXIgdGhvc2UgcHJvcGVydGllcyB0aGF0IHBlcnRhaW4gdG8gaG93IHRoZSBkYXRhIGlzIHRvIGJlXG4gKiBkaXNwbGF5ZWQsIGlycmVzcGVjdGl2ZSBvZiB0aGUgc291cmNlIG9mIHRoYXQgZGF0YS5cbiAqXG4gKiBMYXllcnMgYXJlIHVzdWFsbHkgYWRkZWQgdG8gYSBtYXAgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uIENvbXBvbmVudHNcbiAqIGxpa2Uge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9TZWxlY3R+U2VsZWN0fSB1c2UgdW5tYW5hZ2VkIGxheWVyc1xuICogaW50ZXJuYWxseS4gVGhlc2UgdW5tYW5hZ2VkIGxheWVycyBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAgdXNpbmdcbiAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0TWFwfSBpbnN0ZWFkLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKlxuICogUGxlYXNlIG5vdGUgdGhhdCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyBzZXZlcmFsIGxheWVycyBtaWdodCBnZXQgcmVuZGVyZWQgdG9cbiAqIHRoZSBzYW1lIEhUTUwgZWxlbWVudCwgd2hpY2ggd2lsbCBjYXVzZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjZm9yRWFjaExheWVyQXRQaXhlbH0gdG9cbiAqIGdpdmUgZmFsc2UgcG9zaXRpdmVzLiBUbyBhdm9pZCB0aGlzLCBhcHBseSBkaWZmZXJlbnQgYGNsYXNzTmFtZWAgcHJvcGVydGllcyB0byB0aGVcbiAqIGxheWVycyBhdCBjcmVhdGlvbiB0aW1lLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuUmVuZGVyRXZlbnQjcHJlcmVuZGVyXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLlJlbmRlckV2ZW50I3Bvc3RyZW5kZXJcbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gU291cmNlVHlwZVxuICogQGFwaVxuICovXG52YXIgTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnNvdXJjZTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc291cmNlQ2hhbmdlS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVyXyA9IG51bGw7XG4gICAgICAgIC8vIE92ZXJ3cml0ZSBkZWZhdWx0IHJlbmRlciBtZXRob2Qgd2l0aCBhIGN1c3RvbSBvbmVcbiAgICAgICAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5tYXApIHtcbiAgICAgICAgICAgIF90aGlzLnNldE1hcChvcHRpb25zLm1hcCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpLCBfdGhpcy5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8pO1xuICAgICAgICB2YXIgc291cmNlID0gb3B0aW9ucy5zb3VyY2VcbiAgICAgICAgICAgID8gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAob3B0aW9ucy5zb3VyY2UpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIF90aGlzLnNldFNvdXJjZShzb3VyY2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pj19IG9wdF9hcnJheSBBcnJheSBvZiBsYXllcnMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICB2YXIgYXJyYXkgPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICAgICAgYXJyYXkucHVzaCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPj19IG9wdF9zdGF0ZXMgT3B0aW9uYWwgbGlzdCBvZiBsYXllciBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGVzQXJyYXkgPSBmdW5jdGlvbiAob3B0X3N0YXRlcykge1xuICAgICAgICB2YXIgc3RhdGVzID0gb3B0X3N0YXRlcyA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICAgICAgc3RhdGVzLnB1c2godGhpcy5nZXRMYXllclN0YXRlKCkpO1xuICAgICAgICByZXR1cm4gc3RhdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQHJldHVybiB7U291cmNlVHlwZX0gVGhlIGxheWVyIHNvdXJjZSAob3IgYG51bGxgIGlmIG5vdCB5ZXQgc2V0KS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0U291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpKSB8fCBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgICAgICByZXR1cm4gIXNvdXJjZSA/IFNvdXJjZVN0YXRlLlVOREVGSU5FRCA6IHNvdXJjZS5nZXRTdGF0ZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuaGFuZGxlU291cmNlQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUNoYW5nZUtleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlQ2hhbmdlS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlQ2hhbmdlS2V5XyA9IGxpc3Rlbihzb3VyY2UsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlU291cmNlQ2hhbmdlXywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmVcIikuZGVmYXVsdD4+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aFxuICAgICAqIGFuIGFycmF5IG9mIGZlYXR1cmVzLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZ2V0RmVhdHVyZXMocGl4ZWwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW4gY2hhcmdlIHRvIG1hbmFnZSB0aGUgcmVuZGVyaW5nIG9mIHRoZSBsYXllci4gT25lIGxheWVyIHR5cGUgaXNcbiAgICAgKiBib3VuZGVkIHdpdGggb25lIGxheWVyIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgd2hpY2ggdGhlIHJlbmRlcmVyIG1heSAoYnV0IG5lZWQgbm90KSB1c2VcbiAgICAgKiBmb3IgcmVuZGVyaW5nIGl0cyBjb250ZW50LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IHRoaXMuZ2V0UmVuZGVyZXIoKTtcbiAgICAgICAgaWYgKGxheWVyUmVuZGVyZXIucHJlcGFyZUZyYW1lKGZyYW1lU3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXJSZW5kZXJlci5yZW5kZXJGcmFtZShmcmFtZVN0YXRlLCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsYXllciB0byBiZSByZW5kZXJlZCBvbiB0b3Agb2Ygb3RoZXIgbGF5ZXJzIG9uIGEgbWFwLiBUaGUgbWFwIHdpbGxcbiAgICAgKiBub3QgbWFuYWdlIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLCBhbmQgdGhlIGNhbGxiYWNrIGluXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9NYXAjZm9yRWFjaExheWVyQXRQaXhlbH0gd2lsbCByZWNlaXZlIGBudWxsYCBhcyBsYXllci4gVGhpc1xuICAgICAqIGlzIHVzZWZ1bCBmb3IgdGVtcG9yYXJ5IGxheWVycy4gVG8gcmVtb3ZlIGFuIHVubWFuYWdlZCBsYXllciBmcm9tIHRoZSBtYXAsXG4gICAgICogdXNlIGAjc2V0TWFwKG51bGwpYC5cbiAgICAgKlxuICAgICAqIFRvIGFkZCB0aGUgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwLCB1c2VcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0gaW5zdGVhZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBQcmVjb21wb3NlS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFByZWNvbXBvc2VLZXlfKTtcbiAgICAgICAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFwKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXBSZW5kZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubWFwUmVuZGVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXApIHtcbiAgICAgICAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBsaXN0ZW4obWFwLCBSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChldnQpO1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gcmVuZGVyRXZlbnQuZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBBIGxheWVyIGNhbiBvbmx5IGJlIGFkZGVkIHRvIHRoZSBtYXAgb25jZS4gVXNlIGVpdGhlciBgbGF5ZXIuc2V0TWFwKClgIG9yIGBtYXAuYWRkTGF5ZXIoKWAsIG5vdCBib3RoLlxuICAgICAgICAgICAgICAgIGFzc2VydCghbGF5ZXJTdGF0ZXNBcnJheS5zb21lKGZ1bmN0aW9uIChhcnJheUxheWVyU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5TGF5ZXJTdGF0ZS5sYXllciA9PT0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgICAgICB9KSwgNjcpO1xuICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzQXJyYXkucHVzaChsYXllclN0YXRlKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5tYXBSZW5kZXJLZXlfID0gbGlzdGVuKHRoaXMsIEV2ZW50VHlwZS5DSEFOR0UsIG1hcC5yZW5kZXIsIG1hcCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtTb3VyY2VUeXBlfSBzb3VyY2UgVGhlIGxheWVyIHNvdXJjZS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0U291cmNlID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlNPVVJDRSwgc291cmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gVGhlIGxheWVyIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGxheWVyIGhhcyBhIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYXNSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBBIGxheWVyIHJlbmRlcmVyLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRTb3VyY2UobnVsbCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTGF5ZXI7XG59KEJhc2VMYXllcikpO1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBsYXllciBpcyB2aXNpYmxlIGFuZCBpZiB0aGUgcHJvdmlkZWQgdmlldyBzdGF0ZVxuICogaGFzIHJlc29sdXRpb24gYW5kIHpvb20gbGV2ZWxzIHRoYXQgYXJlIGluIHJhbmdlIG9mIHRoZSBsYXllcidzIG1pbi9tYXguXG4gKiBAcGFyYW0ge1N0YXRlfSBsYXllclN0YXRlIExheWVyIHN0YXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlN0YXRlfSB2aWV3U3RhdGUgVmlldyBzdGF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBsYXllciBpcyB2aXNpYmxlIGF0IHRoZSBnaXZlbiB2aWV3IHN0YXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkge1xuICAgIGlmICghbGF5ZXJTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHJlc29sdXRpb24gPSB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICBpZiAocmVzb2x1dGlvbiA8IGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiB8fFxuICAgICAgICByZXNvbHV0aW9uID49IGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB6b29tID0gdmlld1N0YXRlLnpvb207XG4gICAgcmV0dXJuIHpvb20gPiBsYXllclN0YXRlLm1pblpvb20gJiYgem9vbSA8PSBsYXllclN0YXRlLm1heFpvb207XG59XG5leHBvcnQgZGVmYXVsdCBMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUFJFTE9BRDogJ3ByZWxvYWQnLFxuICAgIFVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SOiAndXNlSW50ZXJpbVRpbGVzT25FcnJvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VUaWxlXG4gKi9cbmltcG9ydCBMYXllciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCBUaWxlUHJvcGVydHkgZnJvbSAnLi9UaWxlUHJvcGVydHkuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcHJlbG9hZD0wXSBQcmVsb2FkLiBMb2FkIGxvdy1yZXNvbHV0aW9uIHRpbGVzIHVwIHRvIGBwcmVsb2FkYCBsZXZlbHMuIGAwYFxuICogbWVhbnMgbm8gcHJlbG9hZGluZy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gU2V0cyB0aGUgbGF5ZXIgYXMgb3ZlcmxheSBvbiBhIG1hcC4gVGhlIG1hcCB3aWxsIG5vdCBtYW5hZ2VcbiAqIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLCBhbmQgdGhlIGxheWVyIHdpbGwgYmUgcmVuZGVyZWQgb24gdG9wLiBUaGlzIGlzIHVzZWZ1bCBmb3JcbiAqIHRlbXBvcmFyeSBsYXllcnMuIFRoZSBzdGFuZGFyZCB3YXkgdG8gYWRkIGEgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwIGlzIHRvXG4gKiB1c2Uge0BsaW5rIG1vZHVsZTpvbC9NYXAjYWRkTGF5ZXJ9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlSW50ZXJpbVRpbGVzT25FcnJvcj10cnVlXSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBGb3IgbGF5ZXIgc291cmNlcyB0aGF0IHByb3ZpZGUgcHJlLXJlbmRlcmVkLCB0aWxlZCBpbWFnZXMgaW4gZ3JpZHMgdGhhdCBhcmVcbiAqIG9yZ2FuaXplZCBieSB6b29tIGxldmVscyBmb3Igc3BlY2lmaWMgcmVzb2x1dGlvbnMuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQGV4dGVuZHMge0xheWVyPGltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICogQGFwaVxuICovXG52YXIgQmFzZVRpbGVMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZVRpbGVMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBUaWxlIGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZVRpbGVMYXllcihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnByZWxvYWQ7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zZXRQcmVsb2FkKG9wdGlvbnMucHJlbG9hZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wcmVsb2FkIDogMCk7XG4gICAgICAgIF90aGlzLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3Iob3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yXG4gICAgICAgICAgICA6IHRydWUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZXZlbCB0byBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VUaWxlTGF5ZXIucHJvdG90eXBlLmdldFByZWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FEKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxldmVsIGFzIG51bWJlciB0byB3aGljaCB3ZSB3aWxsIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuc2V0UHJlbG9hZCA9IGZ1bmN0aW9uIChwcmVsb2FkKSB7XG4gICAgICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FELCBwcmVsb2FkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5VU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB1c2VJbnRlcmltVGlsZXNPbkVycm9yIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VUaWxlTGF5ZXIucHJvdG90eXBlLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3IgPSBmdW5jdGlvbiAodXNlSW50ZXJpbVRpbGVzT25FcnJvcikge1xuICAgICAgICB0aGlzLnNldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IsIHVzZUludGVyaW1UaWxlc09uRXJyb3IpO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VUaWxlTGF5ZXI7XG59KExheWVyKSk7XG5leHBvcnQgZGVmYXVsdCBCYXNlVGlsZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZVRpbGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IE9ic2VydmFibGUgZnJvbSAnLi4vT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gTGF5ZXJUeXBlXG4gKi9cbnZhciBMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMYXllclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TGF5ZXJUeXBlfSBsYXllciBMYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMYXllclJlbmRlcmVyKGxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyA9IF90aGlzLmhhbmRsZUltYWdlQ2hhbmdlXy5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0xheWVyVHlwZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheWVyXyA9IGxheWVyO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBsYXllciBsZXZlbCBoaXQgZGV0ZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZVwiKS5kZWZhdWx0Pj59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoXG4gICAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVyIGlzIHJlYWR5IHRvIGJlIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHZvaWR9IElmIGBmYWxzZWAsIHRoZSB0aWxlIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgbG9hZGVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRlZFRpbGVDYWxsYmFjayA9IGZ1bmN0aW9uICh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgICAgICBpZiAoIXRpbGVzW3pvb21dKSB7XG4gICAgICAgICAgICB0aWxlc1t6b29tXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRpbGVzW3pvb21dW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBsb2FkZWQgdGlsZXMgdG8gdGhlIHRpbGUgbG9va3VwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gc291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbiBvZiB0aGUgdGlsZXMuXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IEEgZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggYSB6b29tIGxldmVsIGFuZCBhIHRpbGUgcmFuZ2UgdG8gYWRkIGxvYWRlZCB0aWxlcyB0byB0aGUgbG9va3VwLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVMb2FkZWRUaWxlRmluZGVyID0gZnVuY3Rpb24gKHNvdXJjZSwgcHJvamVjdGlvbiwgdGlsZXMpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBsb2FkZWQuXG4gICAgICAgICAqIEB0aGlzIHtMYXllclJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHpvb20sIHRpbGVSYW5nZSkge1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5sb2FkZWRUaWxlQ2FsbGJhY2suYmluZCh0aGlzLCB0aWxlcywgem9vbSk7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlLmZvckVhY2hMb2FkZWRUaWxlKHByb2plY3Rpb24sIHpvb20sIHRpbGVSYW5nZSwgY2FsbGJhY2spO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2U+fSBkZWNsdXR0ZXJlZEZlYXR1cmVzIERlY2x1dHRlcmVkIGZlYXR1cmVzLlxuICAgICAqIEByZXR1cm4ge1R8dm9pZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgZGVjbHV0dGVyZWRGZWF0dXJlcykgeyB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEByZXR1cm4ge1VpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXl9IFRoZSByZXN1bHQuICBJZiB0aGVyZSBpcyBubyBkYXRhIGF0IHRoZSBwaXhlbFxuICAgICAqICAgIGxvY2F0aW9uLCBudWxsIHdpbGwgYmUgcmV0dXJuZWQuICBJZiB0aGVyZSBpcyBkYXRhLCBidXQgcGl4ZWwgdmFsdWVzIGNhbm5vdCBiZVxuICAgICAqICAgIHJldHVybmVkLCBhbmQgZW1wdHkgYXJyYXkgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXREYXRhQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7TGF5ZXJUeXBlfSBMYXllci5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhY3Rpb24gbmVjZXNzYXJ5IHRvIGdldCB0aGUgbGF5ZXIgcmVuZGVyZWQgYWZ0ZXIgbmV3IGZvbnRzIGhhdmUgbG9hZGVkXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlRm9udHNDaGFuZ2VkID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBjaGFuZ2VzIGluIGltYWdlIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEltYWdlIGNoYW5nZSBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZUltYWdlQ2hhbmdlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgaW1hZ2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgICAgICBpZiAoaW1hZ2UuZ2V0U3RhdGUoKSA9PT0gSW1hZ2VTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVySWZSZWFkeUFuZFZpc2libGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgaW1hZ2UgaWYgbm90IGFscmVhZHkgbG9hZGVkLCBhbmQgcmVnaXN0ZXIgdGhlIGltYWdlIGNoYW5nZVxuICAgICAqIGxpc3RlbmVyIGlmIG5lZWRlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ltYWdlQmFzZS5qc1wiKS5kZWZhdWx0fSBpbWFnZSBJbWFnZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubG9hZEltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHZhciBpbWFnZVN0YXRlID0gaW1hZ2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKGltYWdlU3RhdGUgIT0gSW1hZ2VTdGF0ZS5MT0FERUQgJiYgaW1hZ2VTdGF0ZSAhPSBJbWFnZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgaW1hZ2UubG9hZCgpO1xuICAgICAgICAgICAgaW1hZ2VTdGF0ZSA9IGltYWdlLmdldFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVySWZSZWFkeUFuZFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgaWYgKGxheWVyLmdldFZpc2libGUoKSAmJiBsYXllci5nZXRTb3VyY2VTdGF0ZSgpID09IFNvdXJjZVN0YXRlLlJFQURZKSB7XG4gICAgICAgICAgICBsYXllci5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBMYXllclJlbmRlcmVyO1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgZGVmYXVsdCBMYXllclJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlU3RhdGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgSURMRTogMCxcbiAgICBMT0FESU5HOiAxLFxuICAgIExPQURFRDogMixcbiAgICBFUlJPUjogMyxcbiAgICBFTVBUWTogNCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZVN0YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvRXZlbnRcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbnZhciBSZW5kZXJFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVuZGVyRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtPX0gb3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybSBUcmFuc2Zvcm0gZm9yXG4gICAgICogICAgIENTUyBwaXhlbHMgdG8gcmVuZGVyZWQgcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGU9fSBvcHRfZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0gez9DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9fSBvcHRfY29udGV4dCBDb250ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlbmRlckV2ZW50KHR5cGUsIG9wdF9pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIG9wdF9mcmFtZVN0YXRlLCBvcHRfY29udGV4dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhbnNmb3JtIGZyb20gQ1NTIHBpeGVscyAocmVsYXRpdmUgdG8gdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgbWFwIHZpZXdwb3J0KVxuICAgICAgICAgKiB0byByZW5kZXJlZCBwaXhlbHMgb24gdGhpcyBldmVudCdzIGBjb250ZXh0YC5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0gPSBvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCByZW5kZXIgZnJhbWUgc3RhdGUuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZXx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZyYW1lU3RhdGUgPSBvcHRfZnJhbWVTdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbnZhcyBjb250ZXh0LiBOb3QgYXZhaWxhYmxlIHdoZW4gdGhlIGV2ZW50IGlzIGRpc3BhdGNoZWQgYnkgdGhlIG1hcC4gT25seSBhdmFpbGFibGVcbiAgICAgICAgICogd2hlbiBhIENhbnZhcyByZW5kZXJlciBpcyB1c2VkLCBudWxsIG90aGVyd2lzZS5cbiAgICAgICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRHxudWxsfHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dCA9IG9wdF9jb250ZXh0O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBSZW5kZXJFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCBkZWZhdWx0IFJlbmRlckV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2hhc1xuICovXG52YXIgdWEgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbmF2aWdhdG9yLnVzZXJBZ2VudCAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKVxuICAgIDogJyc7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBGaXJlZm94IGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBGSVJFRk9YID0gdWEuaW5kZXhPZignZmlyZWZveCcpICE9PSAtMTtcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIFNhZmFyaSBhcyBicm93c2VyLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgU0FGQVJJID0gdWEuaW5kZXhPZignc2FmYXJpJykgIT09IC0xICYmIHVhLmluZGV4T2YoJ2Nocm9tJykgPT0gLTE7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIFdlYktpdCBlbmdpbmUuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBXRUJLSVQgPSB1YS5pbmRleE9mKCd3ZWJraXQnKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignZWRnZScpID09IC0xO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBNYWMgYXMgcGxhdGZvcm0uXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBNQUMgPSB1YS5pbmRleE9mKCdtYWNpbnRvc2gnKSAhPT0gLTE7XG4vKipcbiAqIFRoZSByYXRpbyBiZXR3ZWVuIHBoeXNpY2FsIHBpeGVscyBhbmQgZGV2aWNlLWluZGVwZW5kZW50IHBpeGVsc1xuICogKGRpcHMpIG9uIHRoZSBkZXZpY2UgKGB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb2ApLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIERFVklDRV9QSVhFTF9SQVRJTyA9IHR5cGVvZiBkZXZpY2VQaXhlbFJhdGlvICE9PSAndW5kZWZpbmVkJyA/IGRldmljZVBpeGVsUmF0aW8gOiAxO1xuLyoqXG4gKiBUaGUgZXhlY3V0aW9uIGNvbnRleHQgaXMgYSB3b3JrZXIgd2l0aCBPZmZzY3JlZW5DYW52YXMgYXZhaWxhYmxlLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyA9IHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4vKipcbiAqIEltYWdlLnByb3RvdHlwZS5kZWNvZGUoKSBpcyBzdXBwb3J0ZWQuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBJTUFHRV9ERUNPREUgPSB0eXBlb2YgSW1hZ2UgIT09ICd1bmRlZmluZWQnICYmIEltYWdlLnByb3RvdHlwZS5kZWNvZGU7XG4vKipcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGFzc2l2ZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHBhc3NpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdfJywgbnVsbCwgb3B0aW9ucyk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdfJywgbnVsbCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBwYXNzaXZlIG5vdCBzdXBwb3J0ZWRcbiAgICB9XG4gICAgcmV0dXJuIHBhc3NpdmU7XG59KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLmpzLm1hcCIsImltcG9ydCB7IFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTIH0gZnJvbSAnLi9oYXMuanMnO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2RvbVxuICovXG4vL0ZJWE1FIE1vdmUgdGhpcyBmdW5jdGlvbiB0byB0aGUgY2FudmFzIG1vZHVsZVxuLyoqXG4gKiBDcmVhdGUgYW4gaHRtbCBjYW52YXMgZWxlbWVudCBhbmQgcmV0dXJucyBpdHMgMmQgY29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3dpZHRoIENhbnZhcyB3aWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2hlaWdodCBDYW52YXMgaGVpZ2h0LlxuICogQHBhcmFtIHtBcnJheTxIVE1MQ2FudmFzRWxlbWVudD49fSBvcHRfY2FudmFzUG9vbCBDYW52YXMgcG9vbCB0byB0YWtlIGV4aXN0aW5nIGNhbnZhcyBmcm9tLlxuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBUaGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0NvbnRleHQyRChvcHRfd2lkdGgsIG9wdF9oZWlnaHQsIG9wdF9jYW52YXNQb29sKSB7XG4gICAgdmFyIGNhbnZhcyA9IG9wdF9jYW52YXNQb29sICYmIG9wdF9jYW52YXNQb29sLmxlbmd0aFxuICAgICAgICA/IG9wdF9jYW52YXNQb29sLnNoaWZ0KClcbiAgICAgICAgOiBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBU1xuICAgICAgICAgICAgPyBuZXcgT2Zmc2NyZWVuQ2FudmFzKG9wdF93aWR0aCB8fCAzMDAsIG9wdF9oZWlnaHQgfHwgMzAwKVxuICAgICAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBpZiAob3B0X3dpZHRoKSB7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IG9wdF93aWR0aDtcbiAgICB9XG4gICAgaWYgKG9wdF9oZWlnaHQpIHtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IG9wdF9oZWlnaHQ7XG4gICAgfVxuICAgIC8vRklYTUUgQWxsb3cgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIGFzIHJldHVybiB0eXBlXG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSAqLyAoY2FudmFzLmdldENvbnRleHQoJzJkJykpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgd2lkdGggZm9yIHRoZSBnaXZlbiBlbGVtZW50IGluY2x1ZGluZyBtYXJnaW4sXG4gKiBwYWRkaW5nIGFuZCBib3JkZXIuXG4gKiBFcXVpdmFsZW50IHRvIGpRdWVyeSdzIGAkKGVsKS5vdXRlcldpZHRoKHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB3aWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVyV2lkdGgoZWxlbWVudCkge1xuICAgIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICB3aWR0aCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5SaWdodCwgMTApO1xuICAgIHJldHVybiB3aWR0aDtcbn1cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIGhlaWdodCBmb3IgdGhlIGdpdmVuIGVsZW1lbnQgaW5jbHVkaW5nIG1hcmdpbixcbiAqIHBhZGRpbmcgYW5kIGJvcmRlci5cbiAqIEVxdWl2YWxlbnQgdG8galF1ZXJ5J3MgYCQoZWwpLm91dGVySGVpZ2h0KHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBoZWlnaHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlckhlaWdodChlbGVtZW50KSB7XG4gICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgaGVpZ2h0ICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpblRvcCwgMTApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luQm90dG9tLCAxMCk7XG4gICAgcmV0dXJuIGhlaWdodDtcbn1cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIE5vZGUgdG8gcmVwbGFjZSBvbGQgbm9kZVxuICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIFRoZSBub2RlIHRvIGJlIHJlcGxhY2VkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlTm9kZShuZXdOb2RlLCBvbGROb2RlKSB7XG4gICAgdmFyIHBhcmVudCA9IG9sZE5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge05vZGV9IFRoZSBub2RlIHRoYXQgd2FzIHJlbW92ZWQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuICAgIHJldHVybiBub2RlICYmIG5vZGUucGFyZW50Tm9kZSA/IG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKSA6IG51bGw7XG59XG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbm9kZSB0byByZW1vdmUgdGhlIGNoaWxkcmVuIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihub2RlKSB7XG4gICAgd2hpbGUgKG5vZGUubGFzdENoaWxkKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICAgIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCBub2RlIHNvIHRoZXkgbWF0Y2ggdGhlXG4gKiBwcm92aWRlZCBsaXN0IG9mIGNoaWxkcmVuLiAgVGhpcyBmdW5jdGlvbiBhaW1zIHRvIGVmZmljaWVudGx5XG4gKiByZW1vdmUsIGFkZCwgYW5kIHJlb3JkZXIgY2hpbGQgbm9kZXMgd2hpbGUgbWFpbnRhaW5pbmcgYSBzaW1wbGVcbiAqIGltcGxlbWVudGF0aW9uIChpdCBpcyBub3QgZ3VhcmFudGVlZCB0byBtaW5pbWl6ZSBET00gb3BlcmF0aW9ucykuXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIHBhcmVudCBub2RlIHdob3NlIGNoaWxkcmVuIG5lZWQgcmV3b3JraW5nLlxuICogQHBhcmFtIHtBcnJheTxOb2RlPn0gY2hpbGRyZW4gVGhlIGRlc2lyZWQgY2hpbGRyZW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQ2hpbGRyZW4obm9kZSwgY2hpbGRyZW4pIHtcbiAgICB2YXIgb2xkQ2hpbGRyZW4gPSBub2RlLmNoaWxkTm9kZXM7XG4gICAgZm9yICh2YXIgaSA9IDA7IHRydWU7ICsraSkge1xuICAgICAgICB2YXIgb2xkQ2hpbGQgPSBvbGRDaGlsZHJlbltpXTtcbiAgICAgICAgdmFyIG5ld0NoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIC8vIGNoZWNrIGlmIG91ciB3b3JrIGlzIGRvbmVcbiAgICAgICAgaWYgKCFvbGRDaGlsZCAmJiAhbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGNoaWxkcmVuIG1hdGNoXG4gICAgICAgIGlmIChvbGRDaGlsZCA9PT0gbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGEgbmV3IGNoaWxkIG5lZWRzIHRvIGJlIGFkZGVkXG4gICAgICAgIGlmICghb2xkQ2hpbGQpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgYW4gb2xkIGNoaWxkIG5lZWRzIHRvIGJlIHJlbW92ZWRcbiAgICAgICAgaWYgKCFuZXdDaGlsZCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChvbGRDaGlsZCk7XG4gICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW9yZGVyXG4gICAgICAgIG5vZGUuaW5zZXJ0QmVmb3JlKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jc3NcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGb250UGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IHN0eWxlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdmFyaWFudFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHdlaWdodFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNpemVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBsaW5lSGVpZ2h0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gZmFtaWx5XG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IGZhbWlsaWVzXG4gKi9cbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgaGlkZGVuIGZlYXR1cmUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0hJRERFTiA9ICdvbC1oaWRkZW4nO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSBzZWxlY3RhYmxlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19TRUxFQ1RBQkxFID0gJ29sLXNlbGVjdGFibGUnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSB1bnNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1VOU0VMRUNUQUJMRSA9ICdvbC11bnNlbGVjdGFibGUnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciB1bnN1cHBvcnRlZCBmZWF0dXJlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19VTlNVUFBPUlRFRCA9ICdvbC11bnN1cHBvcnRlZCc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIGNvbnRyb2xzLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19DT05UUk9MID0gJ29sLWNvbnRyb2wnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRoYXQgYXJlIGNvbGxhcHNlZCwgaS5lLlxuICogdG8gdGhvc2UgZWxlbWVudHMgd2hpY2ggdXN1YWxseSBjYW4gYmUgZXhwYW5kZWQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0NPTExBUFNFRCA9ICdvbC1jb2xsYXBzZWQnO1xuLyoqXG4gKiBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAxMzU2OTcvcmVnZXgtdG8tcGFyc2UtYW55LWNzcy1mb250XG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG52YXIgZm9udFJlZ0V4ID0gbmV3IFJlZ0V4cChbXG4gICAgJ15cXFxccyooPz0oPzooPzpbLWEtel0rXFxcXHMqKXswLDJ9KGl0YWxpY3xvYmxpcXVlKSk/KScsXG4gICAgJyg/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oc21hbGwtY2FwcykpPyknLFxuICAgICcoPz0oPzooPzpbLWEtel0rXFxcXHMqKXswLDJ9KGJvbGQoPzplcik/fGxpZ2h0ZXJ8WzEtOV0wMCApKT8pJyxcbiAgICAnKD86KD86bm9ybWFsfFxcXFwxfFxcXFwyfFxcXFwzKVxcXFxzKil7MCwzfSgoPzp4eD8tKT8nLFxuICAgICcoPzpzbWFsbHxsYXJnZSl8bWVkaXVtfHNtYWxsZXJ8bGFyZ2VyfFtcXFxcLlxcXFxkXSsoPzpcXFxcJXxpbnxbY2VtXW18ZXh8cFtjdHhdKSknLFxuICAgICcoPzpcXFxccypcXFxcL1xcXFxzKihub3JtYWx8W1xcXFwuXFxcXGRdKyg/OlxcXFwlfGlufFtjZW1dbXxleHxwW2N0eF0pPykpJyxcbiAgICAnP1xcXFxzKihbLSxcXFxcXCJcXFxcXFwnXFxcXHNhLXpdKz8pXFxcXHMqJCcsXG5dLmpvaW4oJycpLCAnaScpO1xudmFyIGZvbnRSZWdFeE1hdGNoSW5kZXggPSBbXG4gICAgJ3N0eWxlJyxcbiAgICAndmFyaWFudCcsXG4gICAgJ3dlaWdodCcsXG4gICAgJ3NpemUnLFxuICAgICdsaW5lSGVpZ2h0JyxcbiAgICAnZmFtaWx5Jyxcbl07XG4vKipcbiAqIEdldCB0aGUgbGlzdCBvZiBmb250IGZhbWlsaWVzIGZyb20gYSBmb250IHNwZWMuICBOb3RlIHRoYXQgdGhpcyBkb2Vzbid0IHdvcmtcbiAqIGZvciBmb250IGZhbWlsaWVzIHRoYXQgaGF2ZSBjb21tYXMgaW4gdGhlbS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3BlYyBUaGUgQ1NTIGZvbnQgcHJvcGVydHkuXG4gKiBAcmV0dXJuIHtGb250UGFyYW1ldGVyc30gVGhlIGZvbnQgcGFyYW1ldGVycyAob3IgbnVsbCBpZiB0aGUgaW5wdXQgc3BlYyBpcyBpbnZhbGlkKS5cbiAqL1xuZXhwb3J0IHZhciBnZXRGb250UGFyYW1ldGVycyA9IGZ1bmN0aW9uIChmb250U3BlYykge1xuICAgIHZhciBtYXRjaCA9IGZvbnRTcGVjLm1hdGNoKGZvbnRSZWdFeCk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIHN0eWxlID0gLyoqIEB0eXBlIHtGb250UGFyYW1ldGVyc30gKi8gKHtcbiAgICAgICAgbGluZUhlaWdodDogJ25vcm1hbCcsXG4gICAgICAgIHNpemU6ICcxLjJlbScsXG4gICAgICAgIHN0eWxlOiAnbm9ybWFsJyxcbiAgICAgICAgd2VpZ2h0OiAnbm9ybWFsJyxcbiAgICAgICAgdmFyaWFudDogJ25vcm1hbCcsXG4gICAgfSk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZm9udFJlZ0V4TWF0Y2hJbmRleC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG1hdGNoW2kgKyAxXTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0eWxlW2ZvbnRSZWdFeE1hdGNoSW5kZXhbaV1dID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3R5bGUuZmFtaWxpZXMgPSBzdHlsZS5mYW1pbHkuc3BsaXQoLyxcXHM/Lyk7XG4gICAgcmV0dXJuIHN0eWxlO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhc1xuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4uL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IHsgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7IGdldEZvbnRQYXJhbWV0ZXJzIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmlsbFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IGZpbGxTdHlsZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIExhYmVsXG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHRcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nfG51bWJlcj59IGNvbnRleHRJbnN0cnVjdGlvbnNcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3Ryb2tlU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2N1cnJlbnRGaWxsU3R5bGVdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtjdXJyZW50U3Ryb2tlU3R5bGVdXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtjdXJyZW50TGluZUNhcF1cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY3VycmVudExpbmVEYXNoXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRMaW5lRGFzaE9mZnNldF1cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtjdXJyZW50TGluZUpvaW5dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRMaW5lV2lkdGhdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRNaXRlckxpbWl0XVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsYXN0U3Ryb2tlXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbZmlsbFN0eWxlXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbc3Ryb2tlU3R5bGVdXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtsaW5lQ2FwXVxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsaW5lRGFzaE9mZnNldF1cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtsaW5lSm9pbl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZVdpZHRoXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaXRlckxpbWl0XVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0cm9rZVN0YXRlXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IGxpbmVDYXBcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2hcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lRGFzaE9mZnNldFxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gbGluZUpvaW5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lV2lkdGhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaXRlckxpbWl0XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IHN0cm9rZVN0eWxlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dFN0YXRlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZm9udFxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0ZXh0QWxpZ25dXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdGV4dEJhc2VsaW5lXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3BsYWNlbWVudF1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4QW5nbGVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdmVyZmxvd11cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZEZpbGxdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZFN0cm9rZV1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbc2NhbGVdXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtwYWRkaW5nXVxuICovXG4vKipcbiAqIENvbnRhaW5lciBmb3IgZGVjbHV0dGVyZWQgcmVwbGF5IGluc3RydWN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgcmVuZGVyZWQgb3JcbiAqIG9taXR0ZWQgdG9nZXRoZXIsIGkuZS4gd2hlbiBzdHlsZXMgcmVuZGVyIGJvdGggYW4gaW1hZ2UgYW5kIHRleHQsIG9yIGZvciB0aGVcbiAqIGNoYXJhY3RlcnMgdGhhdCBmb3JtIHRleHQgYWxvbmcgbGluZXMuIFRoZSBiYXNpYyBlbGVtZW50cyBvZiB0aGlzIGFycmF5IGFyZVxuICogYFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBjb3VudF1gLCB3aGVyZSB0aGUgZmlyc3QgZm91ciBlbnRyaWVzIGFyZSB0aGVcbiAqIHJlbmRlcmVkIGV4dGVudCBvZiB0aGUgZ3JvdXAgaW4gcGl4ZWwgc3BhY2UuIGBjb3VudGAgaXMgdGhlIG51bWJlciBvZiBzdHlsZXNcbiAqIGluIHRoZSBncm91cCwgaS5lLiAyIHdoZW4gYW4gaW1hZ2UgYW5kIGEgdGV4dCBhcmUgZ3JvdXBlZCwgb3IgMSBvdGhlcndpc2UuXG4gKiBJbiBhZGRpdGlvbiB0byB0aGVzZSBmb3VyIGVsZW1lbnRzLCBkZWNsdXR0ZXIgaW5zdHJ1Y3Rpb24gYXJyYXlzIChpLmUuIHRoZVxuICogYXJndW1lbnRzIHRvIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL2NhbnZhc35kcmF3SW1hZ2V9IGFyZSBhcHBlbmRlZCB0byB0aGUgYXJyYXkuXG4gKiBAdHlwZWRlZiB7QXJyYXk8Kj59IERlY2x1dHRlckdyb3VwXG4gKi9cbi8qKlxuICogRGVjbHV0dGVyIGdyb3VwcyBmb3Igc3VwcG9ydCBvZiBtdWx0aSBnZW9tZXRyaWVzLlxuICogQHR5cGVkZWYge0FycmF5PERlY2x1dHRlckdyb3VwPn0gRGVjbHV0dGVyR3JvdXBzXG4gKi9cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRGb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdEZpbGxTdHlsZSA9ICcjMDAwJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Q2FudmFzTGluZUNhcH1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUNhcCA9ICdyb3VuZCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoID0gW107XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZURhc2hPZmZzZXQgPSAwO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUpvaW4gPSAncm91bmQnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdE1pdGVyTGltaXQgPSAxMDtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0U3Ryb2tlU3R5bGUgPSAnIzAwMCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0VGV4dEFsaWduID0gJ2NlbnRlcic7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0VGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFBhZGRpbmcgPSBbMCwgMCwgMCwgMF07XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZVdpZHRoID0gMTtcbi8qKlxuICogQHR5cGUge0Jhc2VPYmplY3R9XG4gKi9cbmV4cG9ydCB2YXIgY2hlY2tlZEZvbnRzID0gbmV3IEJhc2VPYmplY3QoKTtcbi8qKlxuICogVGhlIGxhYmVsIGNhY2hlIGZvciB0ZXh0IHJlbmRlcmluZy4gVG8gY2hhbmdlIHRoZSBkZWZhdWx0IGNhY2hlIHNpemUgb2YgMjA0OFxuICogZW50cmllcywgdXNlIHtAbGluayBtb2R1bGU6b2wvc3RydWN0cy9MUlVDYWNoZSNzZXRTaXplfS5cbiAqIERlcHJlY2F0ZWQgLSB0aGVyZSBpcyBubyBsYWJlbCBjYWNoZSBhbnkgbW9yZS5cbiAqIEB0eXBlIHs/fVxuICogQGFwaVxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBsYWJlbENhY2hlID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG5sYWJlbENhY2hlLnNldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS53YXJuKCdsYWJlbENhY2hlIGlzIGRlcHJlY2F0ZWQuJyk7IC8vZXNsaW50LWRpc2FibGUtbGluZVxufTtcbi8qKlxuICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAqL1xudmFyIG1lYXN1cmVDb250ZXh0ID0gbnVsbDtcbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xudmFyIG1lYXN1cmVGb250O1xuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgdGV4dEhlaWdodHMgPSB7fTtcbi8qKlxuICogQ2xlYXJzIHRoZSBsYWJlbCBjYWNoZSB3aGVuIGEgZm9udCBiZWNvbWVzIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3BlYyBDU1MgZm9udCBzcGVjLlxuICovXG5leHBvcnQgdmFyIHJlZ2lzdGVyRm9udCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldHJpZXMgPSAxMDA7XG4gICAgdmFyIHNpemUgPSAnMzJweCAnO1xuICAgIHZhciByZWZlcmVuY2VGb250cyA9IFsnbW9ub3NwYWNlJywgJ3NlcmlmJ107XG4gICAgdmFyIGxlbiA9IHJlZmVyZW5jZUZvbnRzLmxlbmd0aDtcbiAgICB2YXIgdGV4dCA9ICd3bXl0emlsV01ZVFpJTEAjLyY/JCUxMFxcdUYwMTMnO1xuICAgIHZhciBpbnRlcnZhbCwgcmVmZXJlbmNlV2lkdGg7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTdHlsZSBDc3MgZm9udC1zdHlsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb250V2VpZ2h0IENzcyBmb250LXdlaWdodFxuICAgICAqIEBwYXJhbSB7Kn0gZm9udEZhbWlseSBDc3MgZm9udC1mYW1pbHlcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBGb250IHdpdGggc3R5bGUgYW5kIHdlaWdodCBpcyBhdmFpbGFibGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F2YWlsYWJsZShmb250U3R5bGUsIGZvbnRXZWlnaHQsIGZvbnRGYW1pbHkpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZWZlcmVuY2VGb250ID0gcmVmZXJlbmNlRm9udHNbaV07XG4gICAgICAgICAgICByZWZlcmVuY2VXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udFN0eWxlICsgJyAnICsgZm9udFdlaWdodCArICcgJyArIHNpemUgKyByZWZlcmVuY2VGb250LCB0ZXh0KTtcbiAgICAgICAgICAgIGlmIChmb250RmFtaWx5ICE9IHJlZmVyZW5jZUZvbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnRTdHlsZSArXG4gICAgICAgICAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQgK1xuICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICBzaXplICtcbiAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseSArXG4gICAgICAgICAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUZvbnQsIHRleHQpO1xuICAgICAgICAgICAgICAgIC8vIElmIHdpZHRoIGFuZCByZWZlcmVuY2VXaWR0aCBhcmUgdGhlIHNhbWUsIHRoZW4gdGhlIGZhbGxiYWNrIHdhcyB1c2VkXG4gICAgICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgZm9udCB3ZSB3YW50ZWQsIHNvIHRoZSBmb250IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlID0gYXZhaWxhYmxlICYmIHdpZHRoICE9IHJlZmVyZW5jZVdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdmFpbGFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgICAgIHZhciBkb25lID0gdHJ1ZTtcbiAgICAgICAgdmFyIGZvbnRzID0gY2hlY2tlZEZvbnRzLmdldEtleXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZm9udHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSBmb250c1tpXTtcbiAgICAgICAgICAgIGlmIChjaGVja2VkRm9udHMuZ2V0KGZvbnQpIDwgcmV0cmllcykge1xuICAgICAgICAgICAgICAgIGlmIChpc0F2YWlsYWJsZS5hcHBseSh0aGlzLCBmb250LnNwbGl0KCdcXG4nKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXIodGV4dEhlaWdodHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBsb2FkZWQgZm9udHMgYXJlIHBpY2tlZCB1cCBieSBTYWZhcmlcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRm9udCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChmb250LCByZXRyaWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoZm9udCwgY2hlY2tlZEZvbnRzLmdldChmb250KSArIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgIGludGVydmFsID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICAgICAgdmFyIGZvbnQgPSBnZXRGb250UGFyYW1ldGVycyhmb250U3BlYyk7XG4gICAgICAgIGlmICghZm9udCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmYW1pbGllcyA9IGZvbnQuZmFtaWxpZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZhbWlsaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBmYW1pbHkgPSBmYW1pbGllc1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBmb250LnN0eWxlICsgJ1xcbicgKyBmb250LndlaWdodCArICdcXG4nICsgZmFtaWx5O1xuICAgICAgICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoa2V5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChrZXksIHJldHJpZXMsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICghaXNBdmFpbGFibGUoZm9udC5zdHlsZSwgZm9udC53ZWlnaHQsIGZhbWlseSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChrZXksIDAsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjaywgMzIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQgdG8gdXNlIGZvciBtZWFzdXJpbmcuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IE1lYXN1cmVtZW50LlxuICovXG5leHBvcnQgdmFyIG1lYXN1cmVUZXh0SGVpZ2h0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICovXG4gICAgdmFyIGRpdjtcbiAgICB2YXIgaGVpZ2h0cyA9IHRleHRIZWlnaHRzO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IGhlaWdodHNbZm9udFNwZWNdO1xuICAgICAgICBpZiAoaGVpZ2h0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvbnQgPSBnZXRGb250UGFyYW1ldGVycyhmb250U3BlYyk7XG4gICAgICAgICAgICAgICAgdmFyIG1ldHJpY3MgPSBtZWFzdXJlVGV4dChmb250U3BlYywgJ8W9ZycpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lSGVpZ2h0ID0gaXNOYU4oTnVtYmVyKGZvbnQubGluZUhlaWdodCkpXG4gICAgICAgICAgICAgICAgICAgID8gMS4yXG4gICAgICAgICAgICAgICAgICAgIDogTnVtYmVyKGZvbnQubGluZUhlaWdodCk7XG4gICAgICAgICAgICAgICAgdGV4dEhlaWdodHNbZm9udFNwZWNdID1cbiAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodCAqXG4gICAgICAgICAgICAgICAgICAgICAgICAobWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCArIG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZGl2KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJ00nO1xuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUubWFyZ2luID0gJzAgIWltcG9ydGFudCc7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5wYWRkaW5nID0gJzAgIWltcG9ydGFudCc7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSAhaW1wb3J0YW50JztcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmxlZnQgPSAnLTk5OTk5cHggIWltcG9ydGFudCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5mb250ID0gZm9udFNwZWM7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IGRpdi5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgaGVpZ2h0c1tmb250U3BlY10gPSBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7VGV4dE1ldHJpY3N9IFRleHQgbWV0cmljcy5cbiAqL1xuZnVuY3Rpb24gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkge1xuICAgIGlmICghbWVhc3VyZUNvbnRleHQpIHtcbiAgICAgICAgbWVhc3VyZUNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gICAgfVxuICAgIGlmIChmb250ICE9IG1lYXN1cmVGb250KSB7XG4gICAgICAgIG1lYXN1cmVDb250ZXh0LmZvbnQgPSBmb250O1xuICAgICAgICBtZWFzdXJlRm9udCA9IG1lYXN1cmVDb250ZXh0LmZvbnQ7XG4gICAgfVxuICAgIHJldHVybiBtZWFzdXJlQ29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KTtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRleHQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVhc3VyZVRleHRXaWR0aChmb250LCB0ZXh0KSB7XG4gICAgcmV0dXJuIG1lYXN1cmVUZXh0KGZvbnQsIHRleHQpLndpZHRoO1xufVxuLyoqXG4gKiBNZWFzdXJlIHRleHQgd2lkdGggdXNpbmcgYSBjYWNoZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IFRoZSBmb250LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gbWVhc3VyZS5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn0gY2FjaGUgQSBsb29rdXAgb2YgY2FjaGVkIHdpZHRocyBieSB0ZXh0LlxuICogQHJldHVybnMge251bWJlcn0gVGhlIHRleHQgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgdGV4dCwgY2FjaGUpIHtcbiAgICBpZiAodGV4dCBpbiBjYWNoZSkge1xuICAgICAgICByZXR1cm4gY2FjaGVbdGV4dF07XG4gICAgfVxuICAgIHZhciB3aWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCk7XG4gICAgY2FjaGVbdGV4dF0gPSB3aWR0aDtcbiAgICByZXR1cm4gd2lkdGg7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQgdG8gdXNlIGZvciBtZWFzdXJpbmcuXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGxpbmVzIExpbmVzIHRvIG1lYXN1cmUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHdpZHRocyBBcnJheSB3aWxsIGJlIHBvcHVsYXRlZCB3aXRoIHRoZSB3aWR0aHMgb2ZcbiAqIGVhY2ggbGluZS5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGggb2YgdGhlIHdob2xlIHRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlVGV4dFdpZHRocyhmb250LCBsaW5lcywgd2lkdGhzKSB7XG4gICAgdmFyIG51bUxpbmVzID0gbGluZXMubGVuZ3RoO1xuICAgIHZhciB3aWR0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XG4gICAgICAgIHZhciBjdXJyZW50V2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnQsIGxpbmVzW2ldKTtcbiAgICAgICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgY3VycmVudFdpZHRoKTtcbiAgICAgICAgd2lkdGhzLnB1c2goY3VycmVudFdpZHRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpZHRoO1xufVxuLyoqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggWCBvZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSBZIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUF0T2Zmc2V0KGNvbnRleHQsIHJvdGF0aW9uLCBvZmZzZXRYLCBvZmZzZXRZKSB7XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgICBjb250ZXh0LnJvdGF0ZShyb3RhdGlvbik7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKC1vZmZzZXRYLCAtb2Zmc2V0WSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfG51bGx9IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICogQHBhcmFtIHtMYWJlbHxIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGxhYmVsT3JJbWFnZSBMYWJlbC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5YIE9yaWdpbiBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblkgT3JpZ2luIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gdyBXaWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IHNjYWxlIFNjYWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZHJhd0ltYWdlT3JMYWJlbChjb250ZXh0LCB0cmFuc2Zvcm0sIG9wYWNpdHksIGxhYmVsT3JJbWFnZSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgeCwgeSwgc2NhbGUpIHtcbiAgICBjb250ZXh0LnNhdmUoKTtcbiAgICBpZiAob3BhY2l0eSAhPT0gMSkge1xuICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhICo9IG9wYWNpdHk7XG4gICAgfVxuICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0uYXBwbHkoY29udGV4dCwgdHJhbnNmb3JtKTtcbiAgICB9XG4gICAgaWYgKCAvKiogQHR5cGUgeyp9ICovKGxhYmVsT3JJbWFnZSkuY29udGV4dEluc3RydWN0aW9ucykge1xuICAgICAgICAvLyBsYWJlbFxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzY2FsZVswXSwgc2NhbGVbMV0pO1xuICAgICAgICBleGVjdXRlTGFiZWxJbnN0cnVjdGlvbnMoLyoqIEB0eXBlIHtMYWJlbH0gKi8gKGxhYmVsT3JJbWFnZSksIGNvbnRleHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2FsZVswXSA8IDAgfHwgc2NhbGVbMV0gPCAwKSB7XG4gICAgICAgIC8vIGZsaXBwZWQgaW1hZ2VcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgIGNvbnRleHQuc2NhbGUoc2NhbGVbMF0sIHNjYWxlWzFdKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIC8qKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSAqLyAobGFiZWxPckltYWdlKSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgMCwgMCwgdywgaCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBpZiBpbWFnZSBub3QgZmxpcHBlZCB0cmFuc2xhdGUgYW5kIHNjYWxlIGNhbiBiZSBhdm9pZGVkXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGxhYmVsT3JJbWFnZSksIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIHgsIHksIHcgKiBzY2FsZVswXSwgaCAqIHNjYWxlWzFdKTtcbiAgICB9XG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7TGFiZWx9IGxhYmVsIExhYmVsLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZUxhYmVsSW5zdHJ1Y3Rpb25zKGxhYmVsLCBjb250ZXh0KSB7XG4gICAgdmFyIGNvbnRleHRJbnN0cnVjdGlvbnMgPSBsYWJlbC5jb250ZXh0SW5zdHJ1Y3Rpb25zO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvbnRleHRJbnN0cnVjdGlvbnMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXSkpIHtcbiAgICAgICAgICAgIGNvbnRleHRbY29udGV4dEluc3RydWN0aW9uc1tpXV0uYXBwbHkoY29udGV4dCwgY29udGV4dEluc3RydWN0aW9uc1tpICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dFtjb250ZXh0SW5zdHJ1Y3Rpb25zW2ldXSA9IGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgY3JlYXRlVHJhbnNmb3JtU3RyaW5nQ2FudmFzID0gbnVsbDtcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHJldHVybiB7c3RyaW5nfSBDU1MgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNmb3JtU3RyaW5nKHRyYW5zZm9ybSkge1xuICAgIGlmIChXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUykge1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcodHJhbnNmb3JtKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3JlYXRlVHJhbnNmb3JtU3RyaW5nQ2FudmFzKSB7XG4gICAgICAgICAgICBjcmVhdGVUcmFuc2Zvcm1TdHJpbmdDYW52YXMgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSkuY2FudmFzO1xuICAgICAgICB9XG4gICAgICAgIGNyZWF0ZVRyYW5zZm9ybVN0cmluZ0NhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSB0b1N0cmluZyh0cmFuc2Zvcm0pO1xuICAgICAgICByZXR1cm4gY3JlYXRlVHJhbnNmb3JtU3RyaW5nQ2FudmFzLnN0eWxlLnRyYW5zZm9ybTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW52YXMuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL0xheWVyXG4gKi9cbmltcG9ydCBMYXllclJlbmRlcmVyIGZyb20gJy4uL0xheWVyLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudCBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnQuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4uLy4uL2RvbS5qcyc7XG5pbXBvcnQgeyBnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCwgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHQsIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IHJvdGF0ZUF0T2Zmc2V0IH0gZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy5qcyc7XG4vKipcbiAqIEBhYnN0cmFjdFxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllclR5cGVcbiAqL1xudmFyIENhbnZhc0xheWVyUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc0xheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllclR5cGV9IGxheWVyIExheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc0xheWVyUmVuZGVyZXIobGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbGF5ZXIpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRlbXBvcmFyeSB0cmFuc2Zvcm0uICBUaGUgdmFsdWVzIGluIHRoaXMgdHJhbnNmb3JtIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gYVxuICAgICAgICAgKiBmdW5jdGlvbiB0aGF0IHNldHMgdGhlIHZhbHVlcy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRlbXBUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0cmFuc2Zvcm0gZm9yIHJlbmRlcmVkIHBpeGVscyB0byB2aWV3cG9ydCBDU1MgcGl4ZWxzLiAgVGhpcyB0cmFuc2Zvcm0gbXVzdFxuICAgICAgICAgKiBiZSBzZXQgd2hlbiByZW5kZXJpbmcgYSBmcmFtZSBhbmQgbWF5IGJlIHVzZWQgYnkgb3RoZXIgZnVuY3Rpb25zIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHJhbnNmb3JtIGZvciB2aWV3cG9ydCBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy4gIFRoaXMgdHJhbnNmb3JtIG11c3RcbiAgICAgICAgICogYmUgc2V0IHdoZW4gcmVuZGVyaW5nIGEgZnJhbWUgYW5kIG1heSBiZSB1c2VkIGJ5IG90aGVyIGZ1bmN0aW9ucyBhZnRlciByZW5kZXJpbmcuXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGFpbmVyUmV1c2VkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgcmVuZGVyaW5nIGNvbnRhaW5lciBmcm9tIGFuIGV4aXN0aW5nIHRhcmdldCwgaWYgY29tcGF0aWJsZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgUG90ZW50aWFsIHJlbmRlciB0YXJnZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zZm9ybSBDU1MgVHJhbnNmb3JtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUudXNlQ29udGFpbmVyID0gZnVuY3Rpb24gKHRhcmdldCwgdHJhbnNmb3JtLCBvcGFjaXR5KSB7XG4gICAgICAgIHZhciBsYXllckNsYXNzTmFtZSA9IHRoaXMuZ2V0TGF5ZXIoKS5nZXRDbGFzc05hbWUoKTtcbiAgICAgICAgdmFyIGNvbnRhaW5lciwgY29udGV4dDtcbiAgICAgICAgaWYgKHRhcmdldCAmJlxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLm9wYWNpdHkgPT09ICcnICYmXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NOYW1lID09PSBsYXllckNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IHRhcmdldC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmIChjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dCAmJlxuICAgICAgICAgICAgKGNvbnRleHQuY2FudmFzLndpZHRoID09PSAwIHx8XG4gICAgICAgICAgICAgICAgY29udGV4dC5jYW52YXMuc3R5bGUudHJhbnNmb3JtID09PSB0cmFuc2Zvcm0pKSB7XG4gICAgICAgICAgICAvLyBDb250YWluZXIgb2YgdGhlIHByZXZpb3VzIGxheWVyIHJlbmRlcmVyIGNhbiBiZSB1c2VkLlxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZXVzZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29udGFpbmVyUmV1c2VkKSB7XG4gICAgICAgICAgICAvLyBQcmV2aW91c2x5IHJldXNlZCBjb250YWluZXIgY2Fubm90IGJlIHVzZWQgYW55IG1vcmUuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZXVzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBsYXllckNsYXNzTmFtZTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGNvbnRhaW5lci5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAgICAgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgpO1xuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgICAgICAgICBzdHlsZSA9IGNhbnZhcy5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgICAgICBzdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSAndG9wIGxlZnQnO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgQ2xpcCBleHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmNsaXAgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSwgZXh0ZW50KSB7XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgaGFsZldpZHRoID0gKGZyYW1lU3RhdGUuc2l6ZVswXSAqIHBpeGVsUmF0aW8pIC8gMjtcbiAgICAgICAgdmFyIGhhbGZIZWlnaHQgPSAoZnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbykgLyAyO1xuICAgICAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgdmFyIHRvcExlZnQgPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gICAgICAgIHZhciB0b3BSaWdodCA9IGdldFRvcFJpZ2h0KGV4dGVudCk7XG4gICAgICAgIHZhciBib3R0b21SaWdodCA9IGdldEJvdHRvbVJpZ2h0KGV4dGVudCk7XG4gICAgICAgIHZhciBib3R0b21MZWZ0ID0gZ2V0Qm90dG9tTGVmdChleHRlbnQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BMZWZ0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgdG9wUmlnaHQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBib3R0b21SaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbUxlZnQpO1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgLXJvdGF0aW9uLCBoYWxmV2lkdGgsIGhhbGZIZWlnaHQpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0Lm1vdmVUbyh0b3BMZWZ0WzBdICogcGl4ZWxSYXRpbywgdG9wTGVmdFsxXSAqIHBpeGVsUmF0aW8pO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyh0b3BSaWdodFswXSAqIHBpeGVsUmF0aW8sIHRvcFJpZ2h0WzFdICogcGl4ZWxSYXRpbyk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKGJvdHRvbVJpZ2h0WzBdICogcGl4ZWxSYXRpbywgYm90dG9tUmlnaHRbMV0gKiBwaXhlbFJhdGlvKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oYm90dG9tTGVmdFswXSAqIHBpeGVsUmF0aW8sIGJvdHRvbUxlZnRbMV0gKiBwaXhlbFJhdGlvKTtcbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgICAgIHJvdGF0ZUF0T2Zmc2V0KGNvbnRleHQsIHJvdGF0aW9uLCBoYWxmV2lkdGgsIGhhbGZIZWlnaHQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IENsaXAgZXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jbGlwVW5yb3RhdGVkID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUsIGV4dGVudCkge1xuICAgICAgICB2YXIgdG9wTGVmdCA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICAgICAgdmFyIHRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQoZXh0ZW50KTtcbiAgICAgICAgdmFyIGJvdHRvbVJpZ2h0ID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgICAgICAgdmFyIGJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIHRvcExlZnQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BSaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbVJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tTGVmdCk7XG4gICAgICAgIHZhciBpbnZlcnRlZCA9IHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgdG9wTGVmdCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCB0b3BSaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCBib3R0b21SaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCBib3R0b21MZWZ0KTtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQubW92ZVRvKE1hdGgucm91bmQodG9wTGVmdFswXSksIE1hdGgucm91bmQodG9wTGVmdFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKHRvcFJpZ2h0WzBdKSwgTWF0aC5yb3VuZCh0b3BSaWdodFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKGJvdHRvbVJpZ2h0WzBdKSwgTWF0aC5yb3VuZChib3R0b21SaWdodFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKGJvdHRvbUxlZnRbMF0pLCBNYXRoLnJvdW5kKGJvdHRvbUxlZnRbMV0pKTtcbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnRfID0gZnVuY3Rpb24gKHR5cGUsIGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICBpZiAobGF5ZXIuaGFzTGlzdGVuZXIodHlwZSkpIHtcbiAgICAgICAgICAgIHZhciBldmVudF8xID0gbmV3IFJlbmRlckV2ZW50KHR5cGUsIHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGxheWVyLmRpc3BhdGNoRXZlbnQoZXZlbnRfMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50XyhSZW5kZXJFdmVudFR5cGUuUFJFUkVOREVSLCBjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucG9zdFJlbmRlciA9IGZ1bmN0aW9uIChjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudF8oUmVuZGVyRXZlbnRUeXBlLlBPU1RSRU5ERVIsIGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nIHRvIGFuIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHJvdGF0ZWQgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB0aGUgcmVuZGVyZWQgZWxlbWVudCAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgcmVuZGVyZWQgZWxlbWVudCAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCBPZmZzZXQgb24gdGhlIHgtYXhpcyBpbiB2aWV3IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFJlbmRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uIChjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBwaXhlbFJhdGlvLCB3aWR0aCwgaGVpZ2h0LCBvZmZzZXRYKSB7XG4gICAgICAgIHZhciBkeDEgPSB3aWR0aCAvIDI7XG4gICAgICAgIHZhciBkeTEgPSBoZWlnaHQgLyAyO1xuICAgICAgICB2YXIgc3ggPSBwaXhlbFJhdGlvIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIHN5ID0gLXN4O1xuICAgICAgICB2YXIgZHgyID0gLWNlbnRlclswXSArIG9mZnNldFg7XG4gICAgICAgIHZhciBkeTIgPSAtY2VudGVyWzFdO1xuICAgICAgICByZXR1cm4gY29tcG9zZVRyYW5zZm9ybSh0aGlzLnRlbXBUcmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIC1yb3RhdGlvbiwgZHgyLCBkeTIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheX0gVGhlIHJlc3VsdC4gIElmIHRoZXJlIGlzIG5vIGRhdGEgYXQgdGhlIHBpeGVsXG4gICAgICogICAgbG9jYXRpb24sIG51bGwgd2lsbCBiZSByZXR1cm5lZC4gIElmIHRoZXJlIGlzIGRhdGEsIGJ1dCBwaXhlbCB2YWx1ZXMgY2Fubm90IGJlXG4gICAgICogICAgcmV0dXJuZWQsIGFuZCBlbXB0eSBhcnJheSB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldERhdGFBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIHJlbmRlclBpeGVsID0gYXBwbHlUcmFuc2Zvcm0odGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIHBpeGVsLnNsaWNlKCkpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQocmVuZGVyUGl4ZWxbMF0pO1xuICAgICAgICAgICAgdmFyIHkgPSBNYXRoLnJvdW5kKHJlbmRlclBpeGVsWzFdKTtcbiAgICAgICAgICAgIHZhciBuZXdDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIHZhciBuZXdDb250ZXh0ID0gbmV3Q2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBuZXdDYW52YXMud2lkdGggPSAxO1xuICAgICAgICAgICAgbmV3Q2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgICAgICBuZXdDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCAxLCAxKTtcbiAgICAgICAgICAgIG5ld0NvbnRleHQuZHJhd0ltYWdlKGNvbnRleHQuY2FudmFzLCB4LCB5LCAxLCAxLCAwLCAwLCAxLCAxKTtcbiAgICAgICAgICAgIGRhdGEgPSBuZXdDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gJ1NlY3VyaXR5RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgLy8gdGFpbnRlZCBjYW52YXMsIHdlIGFzc3VtZSB0aGVyZSBpcyBkYXRhIGF0IHRoZSBnaXZlbiBwaXhlbCAoYWx0aG91Z2ggdGhlcmUgbWlnaHQgbm90IGJlKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGFbM10gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc0xheWVyUmVuZGVyZXI7XG59KExheWVyUmVuZGVyZXIpKTtcbmV4cG9ydCBkZWZhdWx0IENhbnZhc0xheWVyUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVJhbmdlXG4gKi9cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbnRpZ3VvdXMgYmxvY2sgb2YgdGlsZXMuICBBIHRpbGUgcmFuZ2UgaXMgc3BlY2lmaWVkXG4gKiBieSBpdHMgbWluL21heCB0aWxlIGNvb3JkaW5hdGVzIGFuZCBpcyBpbmNsdXNpdmUgb2YgY29vcmRpbmF0ZXMuXG4gKi9cbnZhciBUaWxlUmFuZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5YID0gbWluWDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFggPSBtYXhYO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhZID0gbWF4WTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgdGlsZSBjb29yZGluYXRlLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAodGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zWFkodGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuY29udGFpbnNUaWxlUmFuZ2UgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5YIDw9IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICAgICAgICB0aWxlUmFuZ2UubWF4WCA8PSB0aGlzLm1heFggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICAgICAgICAgdGlsZVJhbmdlLm1heFkgPD0gdGhpcy5tYXhZKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGNvb3JkaW5hdGUuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluWCA8PSB4ICYmIHggPD0gdGhpcy5tYXhYICYmIHRoaXMubWluWSA8PSB5ICYmIHkgPD0gdGhpcy5tYXhZO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEVxdWFscy5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblggPT0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA9PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICAgICAgICAgdGhpcy5tYXhYID09IHRpbGVSYW5nZS5tYXhYICYmXG4gICAgICAgICAgICB0aGlzLm1heFkgPT0gdGlsZVJhbmdlLm1heFkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICBpZiAodGlsZVJhbmdlLm1pblggPCB0aGlzLm1pblgpIHtcbiAgICAgICAgICAgIHRoaXMubWluWCA9IHRpbGVSYW5nZS5taW5YO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWF4WCA+IHRoaXMubWF4WCkge1xuICAgICAgICAgICAgdGhpcy5tYXhYID0gdGlsZVJhbmdlLm1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVSYW5nZS5taW5ZIDwgdGhpcy5taW5ZKSB7XG4gICAgICAgICAgICB0aGlzLm1pblkgPSB0aWxlUmFuZ2UubWluWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZVJhbmdlLm1heFkgPiB0aGlzLm1heFkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4WSA9IHRpbGVSYW5nZS5tYXhZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4WSAtIHRoaXMubWluWSArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gU2l6ZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5nZXRXaWR0aCgpLCB0aGlzLmdldEhlaWdodCgpXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4WCAtIHRoaXMubWluWCArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSW50ZXJzZWN0cy5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmludGVyc2VjdHMgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5YIDw9IHRpbGVSYW5nZS5tYXhYICYmXG4gICAgICAgICAgICB0aGlzLm1heFggPj0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWF4WSAmJlxuICAgICAgICAgICAgdGhpcy5tYXhZID49IHRpbGVSYW5nZS5taW5ZKTtcbiAgICB9O1xuICAgIHJldHVybiBUaWxlUmFuZ2U7XG59KCkpO1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge1RpbGVSYW5nZT19IHRpbGVSYW5nZSBUaWxlUmFuZ2UuXG4gKiBAcmV0dXJuIHtUaWxlUmFuZ2V9IFRpbGUgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZLCB0aWxlUmFuZ2UpIHtcbiAgICBpZiAodGlsZVJhbmdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGlsZVJhbmdlLm1pblggPSBtaW5YO1xuICAgICAgICB0aWxlUmFuZ2UubWF4WCA9IG1heFg7XG4gICAgICAgIHRpbGVSYW5nZS5taW5ZID0gbWluWTtcbiAgICAgICAgdGlsZVJhbmdlLm1heFkgPSBtYXhZO1xuICAgICAgICByZXR1cm4gdGlsZVJhbmdlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgVGlsZVJhbmdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVJhbmdlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXJcbiAqL1xuaW1wb3J0IENhbnZhc0xheWVyUmVuZGVyZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgVGlsZVJhbmdlIGZyb20gJy4uLy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uLy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSwgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBtYWtlSW52ZXJzZSwgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vLi4vb2JqLmpzJztcbmltcG9ydCB7IGNyZWF0ZUVtcHR5LCBlcXVhbHMsIGdldEludGVyc2VjdGlvbiwgZ2V0VG9wTGVmdCwgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlVHJhbnNmb3JtU3RyaW5nIH0gZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy5qcyc7XG5pbXBvcnQgeyBmcm9tVXNlckV4dGVudCB9IGZyb20gJy4uLy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDYW52YXMgcmVuZGVyZXIgZm9yIHRpbGUgbGF5ZXJzLlxuICogQGFwaVxuICovXG52YXIgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc1RpbGVMYXllclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gdGlsZUxheWVyIFRpbGUgbGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIodGlsZUxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRpbGVMYXllcikgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlcmVkIGV4dGVudCBoYXMgY2hhbmdlZCBzaW5jZSB0aGUgcHJldmlvdXMgYHJlbmRlckZyYW1lKClgIGNhbGxcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkRXh0ZW50XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUHJvamVjdGlvbiA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJldmlzaW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFRpbGVzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5ld1RpbGVzXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBUaWxlUmFuZ2VfID0gbmV3IFRpbGVSYW5nZSgwLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaWxlIGlzIGRyYXdhYmxlLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5pc0RyYXdhYmxlVGlsZSA9IGZ1bmN0aW9uICh0aWxlKSB7XG4gICAgICAgIHZhciB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciB0aWxlU3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIHZhciB1c2VJbnRlcmltVGlsZXNPbkVycm9yID0gdGlsZUxheWVyLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IoKTtcbiAgICAgICAgcmV0dXJuICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FTVBUWSB8fFxuICAgICAgICAgICAgKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1IgJiYgIXVzZUludGVyaW1UaWxlc09uRXJyb3IpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0VGlsZSA9IGZ1bmN0aW9uICh6LCB4LCB5LCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciB0aWxlU291cmNlID0gdGlsZUxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICB2YXIgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgICAgIGlmICghdGlsZUxheWVyLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gdXNlSW50ZXJpbVRpbGVzT25FcnJvciBpcyBmYWxzZSwgd2UgY29uc2lkZXIgdGhlIGVycm9yIHRpbGUgYXMgbG9hZGVkLlxuICAgICAgICAgICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkxPQURFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIFByZWxvYWRlZCB0aWxlcyBmb3IgbG93ZXIgcmVzb2x1dGlvbnMgbWlnaHQgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLlxuICAgICAgICAgICAgICAgIHRoaXMubmV3VGlsZXNfID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNEcmF3YWJsZVRpbGUodGlsZSkpIHtcbiAgICAgICAgICAgIHRpbGUgPSB0aWxlLmdldEludGVyaW1UaWxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD4+fSB0aWxlcyBMb29rdXAgb2YgbG9hZGVkIHRpbGVzIGJ5IHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dm9pZH0gSWYgYGZhbHNlYCwgdGhlIHRpbGUgd2lsbCBub3QgYmUgY29uc2lkZXJlZCBsb2FkZWQuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRlZFRpbGVDYWxsYmFjayA9IGZ1bmN0aW9uICh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgICAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUubG9hZGVkVGlsZUNhbGxiYWNrLmNhbGwodGhpcywgdGlsZXMsIHpvb20sIHRpbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSB3aGV0aGVyIHJlbmRlciBzaG91bGQgYmUgY2FsbGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gTGF5ZXIgaXMgcmVhZHkgdG8gYmUgcmVuZGVyZWQuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0TGF5ZXIoKS5nZXRTb3VyY2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciB0aGUgbGF5ZXIuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHRoYXQgbWF5IGJlIHVzZWQgdG8gcmVuZGVyIGNvbnRlbnQgdG8uXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSByZW5kZXJlZCBlbGVtZW50LlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXlbZnJhbWVTdGF0ZS5sYXllckluZGV4XTtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICB2YXIgdmlld1Jlc29sdXRpb24gPSB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIHZpZXdDZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgICAgICB2YXIgcm90YXRpb24gPSB2aWV3U3RhdGUucm90YXRpb247XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgdGlsZUxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICB2YXIgdGlsZVNvdXJjZSA9IHRpbGVMYXllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgdmFyIHNvdXJjZVJldmlzaW9uID0gdGlsZVNvdXJjZS5nZXRSZXZpc2lvbigpO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aWxlU291cmNlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHogPSB0aWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbih2aWV3UmVzb2x1dGlvbiwgdGlsZVNvdXJjZS56RGlyZWN0aW9uKTtcbiAgICAgICAgdmFyIHRpbGVSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIGV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgICAgICB2YXIgbGF5ZXJFeHRlbnQgPSBsYXllclN0YXRlLmV4dGVudCAmJiBmcm9tVXNlckV4dGVudChsYXllclN0YXRlLmV4dGVudCwgcHJvamVjdGlvbik7XG4gICAgICAgIGlmIChsYXllckV4dGVudCkge1xuICAgICAgICAgICAgZXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKGV4dGVudCwgZnJvbVVzZXJFeHRlbnQobGF5ZXJTdGF0ZS5leHRlbnQsIHByb2plY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZVBpeGVsUmF0aW8gPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgICAgICAvLyBkZXNpcmVkIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyBpbiBwaXhlbHNcbiAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5yb3VuZChmcmFtZVN0YXRlLnNpemVbMF0gKiB0aWxlUGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKGZyYW1lU3RhdGUuc2l6ZVsxXSAqIHRpbGVQaXhlbFJhdGlvKTtcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KHdpZHRoICogd2lkdGggKyBoZWlnaHQgKiBoZWlnaHQpKTtcbiAgICAgICAgICAgIHdpZHRoID0gc2l6ZTtcbiAgICAgICAgICAgIGhlaWdodCA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGR4ID0gKHRpbGVSZXNvbHV0aW9uICogd2lkdGgpIC8gMiAvIHRpbGVQaXhlbFJhdGlvO1xuICAgICAgICB2YXIgZHkgPSAodGlsZVJlc29sdXRpb24gKiBoZWlnaHQpIC8gMiAvIHRpbGVQaXhlbFJhdGlvO1xuICAgICAgICB2YXIgY2FudmFzRXh0ZW50ID0gW1xuICAgICAgICAgICAgdmlld0NlbnRlclswXSAtIGR4LFxuICAgICAgICAgICAgdmlld0NlbnRlclsxXSAtIGR5LFxuICAgICAgICAgICAgdmlld0NlbnRlclswXSArIGR4LFxuICAgICAgICAgICAgdmlld0NlbnRlclsxXSArIGR5LFxuICAgICAgICBdO1xuICAgICAgICB2YXIgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHopO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD4+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHRpbGVzVG9EcmF3QnlaID0ge307XG4gICAgICAgIHRpbGVzVG9EcmF3QnlaW3pdID0ge307XG4gICAgICAgIHZhciBmaW5kTG9hZGVkVGlsZXMgPSB0aGlzLmNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIodGlsZVNvdXJjZSwgcHJvamVjdGlvbiwgdGlsZXNUb0RyYXdCeVopO1xuICAgICAgICB2YXIgdG1wRXh0ZW50ID0gdGhpcy50bXBFeHRlbnQ7XG4gICAgICAgIHZhciB0bXBUaWxlUmFuZ2UgPSB0aGlzLnRtcFRpbGVSYW5nZV87XG4gICAgICAgIHRoaXMubmV3VGlsZXNfID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICAgICAgICAgIHZhciB0aWxlID0gdGhpcy5nZXRUaWxlKHosIHgsIHksIGZyYW1lU3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1aWQgPSBnZXRVaWQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZXNUb0RyYXdCeVpbel1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluVHJhbnNpdGlvbiA9IHRpbGUuaW5UcmFuc2l0aW9uKHVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubmV3VGlsZXNfICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluVHJhbnNpdGlvbiB8fCB0aGlzLnJlbmRlcmVkVGlsZXMuaW5kZXhPZih0aWxlKSA9PT0gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdUaWxlc18gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgbG9vayBmb3IgYWx0IHRpbGVzIGlmIGFscGhhIGlzIDFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjaGlsZFRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlKHRpbGUudGlsZUNvb3JkLCB0bXBUaWxlUmFuZ2UsIHRtcEV4dGVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRUaWxlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGZpbmRMb2FkZWRUaWxlcyh6ICsgMSwgY2hpbGRUaWxlUmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNvdmVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSh0aWxlLnRpbGVDb29yZCwgZmluZExvYWRlZFRpbGVzLCB0bXBUaWxlUmFuZ2UsIHRtcEV4dGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBjYW52YXNTY2FsZSA9IHRpbGVSZXNvbHV0aW9uIC8gdmlld1Jlc29sdXRpb247XG4gICAgICAgIC8vIHNldCBmb3J3YXJkIGFuZCBpbnZlcnNlIHBpeGVsIHRyYW5zZm9ybXNcbiAgICAgICAgY29tcG9zZVRyYW5zZm9ybSh0aGlzLnBpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLnNpemVbMF0gLyAyLCBmcmFtZVN0YXRlLnNpemVbMV0gLyAyLCAxIC8gdGlsZVBpeGVsUmF0aW8sIDEgLyB0aWxlUGl4ZWxSYXRpbywgcm90YXRpb24sIC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyKTtcbiAgICAgICAgdmFyIGNhbnZhc1RyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybVN0cmluZyh0aGlzLnBpeGVsVHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy51c2VDb250YWluZXIodGFyZ2V0LCBjYW52YXNUcmFuc2Zvcm0sIGxheWVyU3RhdGUub3BhY2l0eSk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIG1ha2VJbnZlcnNlKHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCB0aGlzLnBpeGVsVHJhbnNmb3JtKTtcbiAgICAgICAgLy8gc2V0IHNjYWxlIHRyYW5zZm9ybSBmb3IgY2FsY3VsYXRpbmcgdGlsZSBwb3NpdGlvbnMgb24gdGhlIGNhbnZhc1xuICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMudGVtcFRyYW5zZm9ybSwgd2lkdGggLyAyLCBoZWlnaHQgLyAyLCBjYW52YXNTY2FsZSwgY2FudmFzU2NhbGUsIDAsIC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyKTtcbiAgICAgICAgaWYgKGNhbnZhcy53aWR0aCAhPSB3aWR0aCB8fCBjYW52YXMuaGVpZ2h0ICE9IGhlaWdodCkge1xuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmNvbnRhaW5lclJldXNlZCkge1xuICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNsaXBVbnJvdGF0ZWQoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbihjb250ZXh0LCB0aWxlU291cmNlLmdldENvbnRleHRPcHRpb25zKCkpO1xuICAgICAgICB0aGlzLnByZVJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLmxlbmd0aCA9IDA7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICAgICAgdmFyIHpzID0gT2JqZWN0LmtleXModGlsZXNUb0RyYXdCeVopLm1hcChOdW1iZXIpO1xuICAgICAgICB6cy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgICAgICB2YXIgY2xpcHMsIGNsaXBacywgY3VycmVudENsaXA7XG4gICAgICAgIGlmIChsYXllclN0YXRlLm9wYWNpdHkgPT09IDEgJiZcbiAgICAgICAgICAgICghdGhpcy5jb250YWluZXJSZXVzZWQgfHxcbiAgICAgICAgICAgICAgICB0aWxlU291cmNlLmdldE9wYXF1ZShmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKSkpIHtcbiAgICAgICAgICAgIHpzID0genMucmV2ZXJzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpcHMgPSBbXTtcbiAgICAgICAgICAgIGNsaXBacyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSB6cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRaID0genNbaV07XG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbGVQaXhlbFNpemUgPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFNpemUoY3VycmVudFosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihjdXJyZW50Wik7XG4gICAgICAgICAgICB2YXIgY3VycmVudFNjYWxlID0gY3VycmVudFJlc29sdXRpb24gLyB0aWxlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBkeF8xID0gY3VycmVudFRpbGVQaXhlbFNpemVbMF0gKiBjdXJyZW50U2NhbGUgKiBjYW52YXNTY2FsZTtcbiAgICAgICAgICAgIHZhciBkeV8xID0gY3VycmVudFRpbGVQaXhlbFNpemVbMV0gKiBjdXJyZW50U2NhbGUgKiBjYW52YXNTY2FsZTtcbiAgICAgICAgICAgIHZhciBvcmlnaW5UaWxlQ29vcmQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRGb3JDb29yZEFuZFooZ2V0VG9wTGVmdChjYW52YXNFeHRlbnQpLCBjdXJyZW50Wik7XG4gICAgICAgICAgICB2YXIgb3JpZ2luVGlsZUV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChvcmlnaW5UaWxlQ29vcmQpO1xuICAgICAgICAgICAgdmFyIG9yaWdpbl8xID0gYXBwbHlUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCBbXG4gICAgICAgICAgICAgICAgKHRpbGVQaXhlbFJhdGlvICogKG9yaWdpblRpbGVFeHRlbnRbMF0gLSBjYW52YXNFeHRlbnRbMF0pKSAvXG4gICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgICh0aWxlUGl4ZWxSYXRpbyAqIChjYW52YXNFeHRlbnRbM10gLSBvcmlnaW5UaWxlRXh0ZW50WzNdKSkgL1xuICAgICAgICAgICAgICAgICAgICB0aWxlUmVzb2x1dGlvbixcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdmFyIHRpbGVHdXR0ZXIgPSB0aWxlUGl4ZWxSYXRpbyAqIHRpbGVTb3VyY2UuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciB0aWxlc1RvRHJhdyA9IHRpbGVzVG9EcmF3QnlaW2N1cnJlbnRaXTtcbiAgICAgICAgICAgIGZvciAodmFyIHRpbGVDb29yZEtleSBpbiB0aWxlc1RvRHJhdykge1xuICAgICAgICAgICAgICAgIHZhciB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRpbGVzVG9EcmF3W3RpbGVDb29yZEtleV0pO1xuICAgICAgICAgICAgICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLnRpbGVDb29yZDtcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZWdlciBwb3NpdGlvbnMgYW5kIHNpemVzIHNvIHRoYXQgdGlsZXMgYWxpZ25cbiAgICAgICAgICAgICAgICB2YXIgZmxvYXRYID0gb3JpZ2luXzFbMF0gLSAob3JpZ2luVGlsZUNvb3JkWzFdIC0gdGlsZUNvb3JkWzFdKSAqIGR4XzE7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRYID0gTWF0aC5yb3VuZChmbG9hdFggKyBkeF8xKTtcbiAgICAgICAgICAgICAgICB2YXIgZmxvYXRZID0gb3JpZ2luXzFbMV0gLSAob3JpZ2luVGlsZUNvb3JkWzJdIC0gdGlsZUNvb3JkWzJdKSAqIGR5XzE7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRZID0gTWF0aC5yb3VuZChmbG9hdFkgKyBkeV8xKTtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQoZmxvYXRYKTtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IE1hdGgucm91bmQoZmxvYXRZKTtcbiAgICAgICAgICAgICAgICB2YXIgdyA9IG5leHRYIC0geDtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IG5leHRZIC0geTtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHogPT09IGN1cnJlbnRaO1xuICAgICAgICAgICAgICAgIHZhciBpblRyYW5zaXRpb24gPSB0cmFuc2l0aW9uICYmIHRpbGUuZ2V0QWxwaGEoZ2V0VWlkKHRoaXMpLCBmcmFtZVN0YXRlLnRpbWUpICE9PSAxO1xuICAgICAgICAgICAgICAgIGlmICghaW5UcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGlwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xpcCBtYXNrIGZvciByZWdpb25zIGluIHRoaXMgdGlsZSB0aGF0IGFscmVhZHkgZmlsbGVkIGJ5IGEgaGlnaGVyIHogdGlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2xpcCA9IFt4LCB5LCB4ICsgdywgeSwgeCArIHcsIHkgKyBoLCB4LCB5ICsgaF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpXzEgPSAwLCBpaSA9IGNsaXBzLmxlbmd0aDsgaV8xIDwgaWk7ICsraV8xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHogIT09IGN1cnJlbnRaICYmIGN1cnJlbnRaIDwgY2xpcFpzW2lfMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaXAgPSBjbGlwc1tpXzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3VudGVyLWNsb2Nrd2lzZSAob3V0ZXIgcmluZykgZm9yIGN1cnJlbnQgdGlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjdXJyZW50Q2xpcFswXSwgY3VycmVudENsaXBbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFsyXSwgY3VycmVudENsaXBbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs0XSwgY3VycmVudENsaXBbNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs2XSwgY3VycmVudENsaXBbN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9ja3dpc2UgKGlubmVyIHJpbmcpIGZvciBoaWdoZXIgeiB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGNsaXBbNl0sIGNsaXBbN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzRdLCBjbGlwWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFsyXSwgY2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMF0sIGNsaXBbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlwcy5wdXNoKGN1cnJlbnRDbGlwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBacy5wdXNoKGN1cnJlbnRaKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KHgsIHksIHcsIGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RpbGVJbWFnZSh0aWxlLCBmcmFtZVN0YXRlLCB4LCB5LCB3LCBoLCB0aWxlR3V0dGVyLCB0cmFuc2l0aW9uLCBsYXllclN0YXRlLm9wYWNpdHkpO1xuICAgICAgICAgICAgICAgIGlmIChjbGlwcyAmJiAhaW5UcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMucHVzaCh0aWxlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVVzZWRUaWxlcyhmcmFtZVN0YXRlLnVzZWRUaWxlcywgdGlsZVNvdXJjZSwgdGlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlZFJldmlzaW9uID0gc291cmNlUmV2aXNpb247XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gdGlsZVJlc29sdXRpb247XG4gICAgICAgIHRoaXMuZXh0ZW50Q2hhbmdlZCA9XG4gICAgICAgICAgICAhdGhpcy5yZW5kZXJlZEV4dGVudF8gfHwgIWVxdWFscyh0aGlzLnJlbmRlcmVkRXh0ZW50XywgY2FudmFzRXh0ZW50KTtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEV4dGVudF8gPSBjYW52YXNFeHRlbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZWRQaXhlbFJhdGlvID0gcGl4ZWxSYXRpbztcbiAgICAgICAgdGhpcy5yZW5kZXJlZFByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLm1hbmFnZVRpbGVQeXJhbWlkKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBleHRlbnQsIHosIHRpbGVMYXllci5nZXRQcmVsb2FkKCkpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlRXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSk7XG4gICAgICAgIHRoaXMucG9zdFJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50KSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FudmFzVHJhbnNmb3JtICE9PSBjYW52YXMuc3R5bGUudHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUudHJhbnNmb3JtID0gY2FudmFzVHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IExlZnQgb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVG9wIG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3IFdpZHRoIG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIFRpbGUgZ3V0dGVyLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdHJhbnNpdGlvbiBBcHBseSBhbiBhbHBoYSB0cmFuc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmRyYXdUaWxlSW1hZ2UgPSBmdW5jdGlvbiAodGlsZSwgZnJhbWVTdGF0ZSwgeCwgeSwgdywgaCwgZ3V0dGVyLCB0cmFuc2l0aW9uLCBvcGFjaXR5KSB7XG4gICAgICAgIHZhciBpbWFnZSA9IHRoaXMuZ2V0VGlsZUltYWdlKHRpbGUpO1xuICAgICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICAgICAgdmFyIHRpbGVBbHBoYSA9IHRyYW5zaXRpb24gPyB0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA6IDE7XG4gICAgICAgIHZhciBhbHBoYSA9IG9wYWNpdHkgKiB0aWxlQWxwaGE7XG4gICAgICAgIHZhciBhbHBoYUNoYW5nZWQgPSBhbHBoYSAhPT0gdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgICAgICBpZiAoYWxwaGFDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gYWxwaGE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgZ3V0dGVyLCBndXR0ZXIsIGltYWdlLndpZHRoIC0gMiAqIGd1dHRlciwgaW1hZ2UuaGVpZ2h0IC0gMiAqIGd1dHRlciwgeCwgeSwgdywgaCk7XG4gICAgICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVBbHBoYSAhPT0gMSkge1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICB0aWxlLmVuZFRyYW5zaXRpb24odWlkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyBjb250ZXh0LmNhbnZhcyA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGltYWdlIGZyb20gYSB0aWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0VGlsZUltYWdlID0gZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgcmV0dXJuIHRpbGUuZ2V0SW1hZ2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuc2NoZWR1bGVFeHBpcmVDYWNoZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0aWxlU291cmNlKSB7XG4gICAgICAgIGlmICh0aWxlU291cmNlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBwb3N0UmVuZGVyRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZVNvdXJjZSwgbWFwLCBmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS51c2VkVGlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVNvdXJjZS5leHBpcmVDYWNoZShmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uLCBmcmFtZVN0YXRlLnVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKG51bGwsIHRpbGVTb3VyY2UpO1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5Qb3N0UmVuZGVyRnVuY3Rpb259ICovIChwb3N0UmVuZGVyRnVuY3Rpb24pKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgIU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9UaWxlLmpzJykuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlVXNlZFRpbGVzID0gZnVuY3Rpb24gKHVzZWRUaWxlcywgdGlsZVNvdXJjZSwgdGlsZSkge1xuICAgICAgICAvLyBGSVhNRSBzaG91bGQgd2UgdXNlIHRpbGVzVG9EcmF3QnlaIGluc3RlYWQ/XG4gICAgICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgICAgICBpZiAoISh0aWxlU291cmNlS2V5IGluIHVzZWRUaWxlcykpIHtcbiAgICAgICAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XVt0aWxlLmdldEtleSgpXSA9IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYW5hZ2UgdGlsZSBweXJhbWlkLlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgYSBudW1iZXIgb2YgZnVuY3Rpb25zIHJlbGF0ZWQgdG8gdGhlIHRpbGVzIGF0IHRoZVxuICAgICAqIGN1cnJlbnQgem9vbSBhbmQgbG93ZXIgem9vbSBsZXZlbHM6XG4gICAgICogLSByZWdpc3RlcnMgaWRsZSB0aWxlcyBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzIHNvIHRoYXQgdGhleSBhcmUgbm90XG4gICAgICogICBkaXNjYXJkZWQgYnkgdGhlIHRpbGUgcXVldWVcbiAgICAgKiAtIGVucXVldWVzIG1pc3NpbmcgdGlsZXNcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50WiBDdXJyZW50IFouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgTG9hZCBsb3cgcmVzb2x1dGlvbiB0aWxlcyB1cCB0byAncHJlbG9hZCcgbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0KT19IG9wdF90aWxlQ2FsbGJhY2sgVGlsZSBjYWxsYmFjay5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLm1hbmFnZVRpbGVQeXJhbWlkID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBleHRlbnQsIGN1cnJlbnRaLCBwcmVsb2FkLCBvcHRfdGlsZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgICAgICBpZiAoISh0aWxlU291cmNlS2V5IGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMpKSB7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdhbnRlZFRpbGVzID0gZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XTtcbiAgICAgICAgdmFyIHRpbGVRdWV1ZSA9IGZyYW1lU3RhdGUudGlsZVF1ZXVlO1xuICAgICAgICB2YXIgbWluWm9vbSA9IHRpbGVHcmlkLmdldE1pblpvb20oKTtcbiAgICAgICAgdmFyIHRpbGVDb3VudCA9IDA7XG4gICAgICAgIHZhciB0aWxlLCB0aWxlUmFuZ2UsIHRpbGVSZXNvbHV0aW9uLCB4LCB5LCB6O1xuICAgICAgICBmb3IgKHogPSBtaW5ab29tOyB6IDw9IGN1cnJlbnRaOyArK3opIHtcbiAgICAgICAgICAgIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6LCB0aWxlUmFuZ2UpO1xuICAgICAgICAgICAgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICAgICAgZm9yICh4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgICAgICAgICAgIGZvciAoeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRaIC0geiA8PSBwcmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK3RpbGVDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUgPSB0aWxlU291cmNlLmdldFRpbGUoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FudGVkVGlsZXNbdGlsZS5nZXRLZXkoKV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGlsZVF1ZXVlLmlzS2V5UXVldWVkKHRpbGUuZ2V0S2V5KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5lbnF1ZXVlKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlU291cmNlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGUudGlsZUNvb3JkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0X3RpbGVDYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0X3RpbGVDYWxsYmFjayh0aWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTb3VyY2UudXNlVGlsZSh6LCB4LCB5LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aWxlU291cmNlLnVwZGF0ZUNhY2hlU2l6ZSh0aWxlQ291bnQsIHByb2plY3Rpb24pO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc1RpbGVMYXllclJlbmRlcmVyO1xufShDYW52YXNMYXllclJlbmRlcmVyKSk7XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH1cbiAqL1xuQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldExheWVyO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlTGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVTdGF0ZVxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBJRExFOiAwLFxuICAgIExPQURJTkc6IDEsXG4gICAgTE9BREVEOiAyLFxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRpbGUgbG9hZGluZyBmYWlsZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIEVSUk9SOiAzLFxuICAgIEVNUFRZOiA0LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVTdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlXG4gKi9cbmltcG9ydCBCYXNlVGlsZUxheWVyIGZyb20gJy4vQmFzZVRpbGUuanMnO1xuaW1wb3J0IENhbnZhc1RpbGVMYXllclJlbmRlcmVyIGZyb20gJy4uL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXIuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBGb3IgbGF5ZXIgc291cmNlcyB0aGF0IHByb3ZpZGUgcHJlLXJlbmRlcmVkLCB0aWxlZCBpbWFnZXMgaW4gZ3JpZHMgdGhhdCBhcmVcbiAqIG9yZ2FuaXplZCBieSB6b29tIGxldmVscyBmb3Igc3BlY2lmaWMgcmVzb2x1dGlvbnMuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQGFwaVxuICovXG52YXIgVGlsZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0Jhc2VUaWxlLmpzXCIpLk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBUaWxlIGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUxheWVyKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRfb3B0aW9ucykgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gQSBsYXllciByZW5kZXJlci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZUxheWVyLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcih0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBUaWxlTGF5ZXI7XG59KEJhc2VUaWxlTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvQmFzZUltYWdlXG4gKi9cbmltcG9ydCBMYXllciBmcm9tICcuL0xheWVyLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IFttYXBdIFNldHMgdGhlIGxheWVyIGFzIG92ZXJsYXkgb24gYSBtYXAuIFRoZSBtYXAgd2lsbCBub3QgbWFuYWdlXG4gKiB0aGlzIGxheWVyIGluIGl0cyBsYXllcnMgY29sbGVjdGlvbiwgYW5kIHRoZSBsYXllciB3aWxsIGJlIHJlbmRlcmVkIG9uIHRvcC4gVGhpcyBpcyB1c2VmdWwgZm9yXG4gKiB0ZW1wb3JhcnkgbGF5ZXJzLiBUaGUgc3RhbmRhcmQgd2F5IHRvIGFkZCBhIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCBpcyB0b1xuICogdXNlIHtAbGluayBtb2R1bGU6b2wvTWFwI2FkZExheWVyfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL0ltYWdlLmpzXCIpLmRlZmF1bHR9IFtzb3VyY2VdIFNvdXJjZSBmb3IgdGhpcyBsYXllci5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTZXJ2ZXItcmVuZGVyZWQgaW1hZ2VzIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3IgYXJiaXRyYXJ5IGV4dGVudHMgYW5kXG4gKiByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAZXh0ZW5kcyB7TGF5ZXI8aW1wb3J0KFwiLi4vc291cmNlL0ltYWdlLmpzXCIpLmRlZmF1bHQ+fVxuICogQGFwaVxuICovXG52YXIgQmFzZUltYWdlTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VJbWFnZUxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIExheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZUltYWdlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQmFzZUltYWdlTGF5ZXI7XG59KExheWVyKSk7XG5leHBvcnQgZGVmYXVsdCBCYXNlSW1hZ2VMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2VJbWFnZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL2NvbW1vblxuICovXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSBhbGxvd2VkIHRocmVzaG9sZCAgKGluIHBpeGVscykgZm9yIHJlcHJvamVjdGlvblxuICogdHJpYW5ndWxhdGlvbi5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgRVJST1JfVEhSRVNIT0xEID0gMC41O1xuLyoqXG4gKiBFbmFibGUgYXV0b21hdGljIHJlcHJvamVjdGlvbiBvZiByYXN0ZXIgc291cmNlcy4gRGVmYXVsdCBpcyBgdHJ1ZWAuXG4gKiBUT0RPOiBkZWNpZGUgaWYgd2Ugd2FudCB0byBleHBvc2UgdGhpcyBhcyBhIGJ1aWxkIGZsYWcgb3IgcmVtb3ZlIGl0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL0ltYWdlTGF5ZXJcbiAqL1xuaW1wb3J0IENhbnZhc0xheWVyUmVuZGVyZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHsgRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gfSBmcm9tICcuLi8uLi9yZXByb2ovY29tbW9uLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uLy4uL29iai5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIG1ha2VJbnZlcnNlIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zRXh0ZW50LCBpbnRlcnNlY3RzIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZVRyYW5zZm9ybVN0cmluZyB9IGZyb20gJy4uLy4uL3JlbmRlci9jYW52YXMuanMnO1xuaW1wb3J0IHsgZnJvbVVzZXJFeHRlbnQgfSBmcm9tICcuLi8uLi9wcm9qLmpzJztcbmltcG9ydCB7IGdldEludGVyc2VjdGlvbiwgaXNFbXB0eSB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgaW1hZ2UgbGF5ZXJzLlxuICogQGFwaVxuICovXG52YXIgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9sYXllci9JbWFnZS5qc1wiKS5kZWZhdWx0fSBpbWFnZUxheWVyIEltYWdlIGxheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlcihpbWFnZUxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGltYWdlTGF5ZXIpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vLi4vSW1hZ2VCYXNlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICovXG4gICAgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmltYWdlXyA/IG51bGwgOiB0aGlzLmltYWdlXy5nZXRJbWFnZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgcmVuZGVyIHNob3VsZCBiZSBjYWxsZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICAgKi9cbiAgICBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBsYXllclN0YXRlID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5W2ZyYW1lU3RhdGUubGF5ZXJJbmRleF07XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgaW1hZ2VTb3VyY2UgPSB0aGlzLmdldExheWVyKCkuZ2V0U291cmNlKCk7XG4gICAgICAgIHZhciBoaW50cyA9IGZyYW1lU3RhdGUudmlld0hpbnRzO1xuICAgICAgICB2YXIgcmVuZGVyZWRFeHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlbmRlcmVkRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKHJlbmRlcmVkRXh0ZW50LCBmcm9tVXNlckV4dGVudChsYXllclN0YXRlLmV4dGVudCwgdmlld1N0YXRlLnByb2plY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gJiZcbiAgICAgICAgICAgICFoaW50c1tWaWV3SGludC5JTlRFUkFDVElOR10gJiZcbiAgICAgICAgICAgICFpc0VtcHR5KHJlbmRlcmVkRXh0ZW50KSkge1xuICAgICAgICAgICAgaWYgKGltYWdlU291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gaW1hZ2VTb3VyY2UuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbiA9IHNvdXJjZVByb2plY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGltYWdlID0gaW1hZ2VTb3VyY2UuZ2V0SW1hZ2UocmVuZGVyZWRFeHRlbnQsIHZpZXdSZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2UgJiYgdGhpcy5sb2FkSW1hZ2UoaW1hZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZV8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhIXRoaXMuaW1hZ2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZV87XG4gICAgICAgIHZhciBpbWFnZUV4dGVudCA9IGltYWdlLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgaW1hZ2VSZXNvbHV0aW9uID0gaW1hZ2UuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICB2YXIgaW1hZ2VQaXhlbFJhdGlvID0gaW1hZ2UuZ2V0UGl4ZWxSYXRpbygpO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB2YXIgdmlld0NlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgICAgIHZhciB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgc2l6ZSA9IGZyYW1lU3RhdGUuc2l6ZTtcbiAgICAgICAgdmFyIHNjYWxlID0gKHBpeGVsUmF0aW8gKiBpbWFnZVJlc29sdXRpb24pIC8gKHZpZXdSZXNvbHV0aW9uICogaW1hZ2VQaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5yb3VuZChzaXplWzBdICogcGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKHNpemVbMV0gKiBwaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgICAgIHZhciBzaXplXzEgPSBNYXRoLnJvdW5kKE1hdGguc3FydCh3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0KSk7XG4gICAgICAgICAgICB3aWR0aCA9IHNpemVfMTtcbiAgICAgICAgICAgIGhlaWdodCA9IHNpemVfMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgZm9yd2FyZCBhbmQgaW52ZXJzZSBwaXhlbCB0cmFuc2Zvcm1zXG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy5waXhlbFRyYW5zZm9ybSwgZnJhbWVTdGF0ZS5zaXplWzBdIC8gMiwgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMiwgMSAvIHBpeGVsUmF0aW8sIDEgLyBwaXhlbFJhdGlvLCByb3RhdGlvbiwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIpO1xuICAgICAgICBtYWtlSW52ZXJzZSh0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgdGhpcy5waXhlbFRyYW5zZm9ybSk7XG4gICAgICAgIHZhciBjYW52YXNUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm1TdHJpbmcodGhpcy5waXhlbFRyYW5zZm9ybSk7XG4gICAgICAgIHRoaXMudXNlQ29udGFpbmVyKHRhcmdldCwgY2FudmFzVHJhbnNmb3JtLCBsYXllclN0YXRlLm9wYWNpdHkpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgdmFyIGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgICAgICBpZiAoY2FudmFzLndpZHRoICE9IHdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuY29udGFpbmVyUmV1c2VkKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbGlwcGVkIHJlbmRlcmluZyBpZiBsYXllciBleHRlbnQgaXMgc2V0XG4gICAgICAgIHZhciBjbGlwcGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChsYXllclN0YXRlLmV4dGVudCkge1xuICAgICAgICAgICAgdmFyIGxheWVyRXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQobGF5ZXJTdGF0ZS5leHRlbnQsIHZpZXdTdGF0ZS5wcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGNsaXBwZWQgPVxuICAgICAgICAgICAgICAgICFjb250YWluc0V4dGVudChsYXllckV4dGVudCwgZnJhbWVTdGF0ZS5leHRlbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdHMobGF5ZXJFeHRlbnQsIGZyYW1lU3RhdGUuZXh0ZW50KTtcbiAgICAgICAgICAgIGlmIChjbGlwcGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGlwVW5yb3RhdGVkKGNvbnRleHQsIGZyYW1lU3RhdGUsIGxheWVyRXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaW1nID0gaW1hZ2UuZ2V0SW1hZ2UoKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIsIHNjYWxlLCBzY2FsZSwgMCwgKGltYWdlUGl4ZWxSYXRpbyAqIChpbWFnZUV4dGVudFswXSAtIHZpZXdDZW50ZXJbMF0pKSAvIGltYWdlUmVzb2x1dGlvbiwgKGltYWdlUGl4ZWxSYXRpbyAqICh2aWV3Q2VudGVyWzFdIC0gaW1hZ2VFeHRlbnRbM10pKSAvIGltYWdlUmVzb2x1dGlvbik7XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gKGltYWdlUmVzb2x1dGlvbiAqIHBpeGVsUmF0aW8pIC8gaW1hZ2VQaXhlbFJhdGlvO1xuICAgICAgICB2YXIgZHggPSB0cmFuc2Zvcm1bNF07XG4gICAgICAgIHZhciBkeSA9IHRyYW5zZm9ybVs1XTtcbiAgICAgICAgdmFyIGR3ID0gaW1nLndpZHRoICogdHJhbnNmb3JtWzBdO1xuICAgICAgICB2YXIgZGggPSBpbWcuaGVpZ2h0ICogdHJhbnNmb3JtWzNdO1xuICAgICAgICBhc3NpZ24oY29udGV4dCwgdGhpcy5nZXRMYXllcigpLmdldFNvdXJjZSgpLmdldENvbnRleHRPcHRpb25zKCkpO1xuICAgICAgICB0aGlzLnByZVJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKGR3ID49IDAuNSAmJiBkaCA+PSAwLjUpIHtcbiAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gbGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzQWxwaGEgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAob3BhY2l0eSAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzQWxwaGEgPSB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGE7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gb3BhY2l0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCAraW1nLndpZHRoLCAraW1nLmhlaWdodCwgTWF0aC5yb3VuZChkeCksIE1hdGgucm91bmQoZHkpLCBNYXRoLnJvdW5kKGR3KSwgTWF0aC5yb3VuZChkaCkpO1xuICAgICAgICAgICAgaWYgKG9wYWNpdHkgIT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSBwcmV2aW91c0FscGhhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9zdFJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKGNsaXBwZWQpIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYW52YXNUcmFuc2Zvcm0gIT09IGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSBjYW52YXNUcmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlcjtcbn0oQ2FudmFzTGF5ZXJSZW5kZXJlcikpO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VMYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld0hpbnRcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQU5JTUFUSU5HOiAwLFxuICAgIElOVEVSQUNUSU5HOiAxLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdIaW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0ltYWdlXG4gKi9cbmltcG9ydCBCYXNlSW1hZ2VMYXllciBmcm9tICcuL0Jhc2VJbWFnZS5qcyc7XG5pbXBvcnQgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyIGZyb20gJy4uL3JlbmRlcmVyL2NhbnZhcy9JbWFnZUxheWVyLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogU2VydmVyLXJlbmRlcmVkIGltYWdlcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIGFyYml0cmFyeSBleHRlbnRzIGFuZFxuICogcmVzb2x1dGlvbnMuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQGFwaVxuICovXG52YXIgSW1hZ2VMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQmFzZUltYWdlLmpzXCIpLk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdF9vcHRpb25zKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBBIGxheWVyIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIEltYWdlTGF5ZXIucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlcih0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZUxheWVyO1xufShCYXNlSW1hZ2VMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgSW1hZ2VMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlQmFzZVxuICovXG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBJbWFnZUJhc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlQmFzZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZUJhc2UoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzdGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXh0ZW50ID0gZXh0ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gUGl4ZWxSYXRpby5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFBpeGVsUmF0aW8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpeGVsUmF0aW9fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5yZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBTdGF0ZS5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZUJhc2U7XG59KEV2ZW50VGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBJbWFnZUJhc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUJhc2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9Ucmlhbmd1bGF0aW9uXG4gKi9cbmltcG9ydCB7IGJvdW5kaW5nRXh0ZW50LCBjcmVhdGVFbXB0eSwgZXh0ZW5kQ29vcmRpbmF0ZSwgZ2V0QXJlYSwgZ2V0Qm90dG9tTGVmdCwgZ2V0Qm90dG9tUmlnaHQsIGdldFRvcExlZnQsIGdldFRvcFJpZ2h0LCBnZXRXaWR0aCwgaW50ZXJzZWN0cywgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0VHJhbnNmb3JtIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBsb2cyLCBtb2R1bG8gfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogU2luZ2xlIHRyaWFuZ2xlOyBjb25zaXN0cyBvZiAzIHNvdXJjZSBwb2ludHMgYW5kIDMgdGFyZ2V0IHBvaW50cy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRyaWFuZ2xlXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IHNvdXJjZVxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSB0YXJnZXRcbiAqL1xuLyoqXG4gKiBNYXhpbXVtIG51bWJlciBvZiBzdWJkaXZpc2lvbiBzdGVwcyBkdXJpbmcgcmFzdGVyIHJlcHJvamVjdGlvbiB0cmlhbmd1bGF0aW9uLlxuICogUHJldmVudHMgaGlnaCBtZW1vcnkgdXNhZ2UgYW5kIGxhcmdlIG51bWJlciBvZiBwcm9qNCBjYWxscyAoZm9yIGNlcnRhaW5cbiAqIHRyYW5zZm9ybWF0aW9ucyBhbmQgYXJlYXMpLiBBdCBtb3N0IGAyKigyXnRoaXMpYCB0cmlhbmdsZXMgYXJlIGNyZWF0ZWQgZm9yXG4gKiBlYWNoIHRyaWFuZ3VsYXRlZCBleHRlbnQgKHRpbGUvaW1hZ2UpLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIE1BWF9TVUJESVZJU0lPTiA9IDEwO1xuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgc2l6ZSBvZiB0cmlhbmdsZSByZWxhdGl2ZSB0byB3b3JsZCB3aWR0aC4gV2hlbiB0cmFuc2Zvcm1pbmdcbiAqIGNvcm5lcnMgb2Ygd29ybGQgZXh0ZW50IGJldHdlZW4gY2VydGFpbiBwcm9qZWN0aW9ucywgdGhlIHJlc3VsdGluZ1xuICogdHJpYW5ndWxhdGlvbiBzZWVtcyB0byBoYXZlIHplcm8gZXJyb3IgYW5kIG5vIHN1YmRpdmlzaW9uIGlzIHBlcmZvcm1lZC4gSWZcbiAqIHRoZSB0cmlhbmdsZSB3aWR0aCBpcyBtb3JlIHRoYW4gdGhpcyAocmVsYXRpdmUgdG8gd29ybGQgd2lkdGg7IDAtMSksXG4gKiBzdWJkaXZpc29uIGlzIGZvcmNlZCAodXAgdG8gYE1BWF9TVUJESVZJU0lPTmApLiBEZWZhdWx0IGlzIGAwLjI1YC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBNQVhfVFJJQU5HTEVfV0lEVEggPSAwLjI1O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBjb250YWluaW5nIHRyaWFuZ3VsYXRpb24gb2YgdGhlIGdpdmVuIHRhcmdldCBleHRlbnQuXG4gKiBVc2VkIGZvciBkZXRlcm1pbmluZyBzb3VyY2UgZGF0YSBhbmQgdGhlIHJlcHJvamVjdGlvbiBpdHNlbGYuXG4gKi9cbnZhciBUcmlhbmd1bGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50IHRvIHRyaWFuZ3VsYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4U291cmNlRXh0ZW50IE1heGltYWwgc291cmNlIGV4dGVudCB0aGF0IGNhbiBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvclRocmVzaG9sZCBBY2NlcHRhYmxlIGVycm9yIChpbiBzb3VyY2UgdW5pdHMpLlxuICAgICAqIEBwYXJhbSB7P251bWJlcn0gb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiBUaGUgKG9wdGlvbmFsKSByZXNvbHV0aW9uIG9mIHRoZSBkZXN0aW5hdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldEV4dGVudCwgbWF4U291cmNlRXh0ZW50LCBlcnJvclRocmVzaG9sZCwgb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VQcm9qXyA9IHNvdXJjZVByb2o7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldFByb2pfID0gdGFyZ2V0UHJvajtcbiAgICAgICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi9cbiAgICAgICAgdmFyIHRyYW5zZm9ybUludkNhY2hlID0ge307XG4gICAgICAgIHZhciB0cmFuc2Zvcm1JbnYgPSBnZXRUcmFuc2Zvcm0odGhpcy50YXJnZXRQcm9qXywgdGhpcy5zb3VyY2VQcm9qXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBBIGNvb3JkaW5hdGUuXG4gICAgICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhbnNmb3JtSW52XyA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gY1swXSArICcvJyArIGNbMV07XG4gICAgICAgICAgICBpZiAoIXRyYW5zZm9ybUludkNhY2hlW2tleV0pIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1JbnZDYWNoZVtrZXldID0gdHJhbnNmb3JtSW52KGMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUludkNhY2hlW2tleV07XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4U291cmNlRXh0ZW50XyA9IG1heFNvdXJjZUV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVycm9yVGhyZXNob2xkU3F1YXJlZF8gPSBlcnJvclRocmVzaG9sZCAqIGVycm9yVGhyZXNob2xkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFRyaWFuZ2xlPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpYW5nbGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHRyaWFuZ3VsYXRpb24gY3Jvc3NlcyBlZGdlIG9mIHRoZSBzb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhbldyYXBYSW5Tb3VyY2VfID1cbiAgICAgICAgICAgIHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgICAgICAgICAgICEhbWF4U291cmNlRXh0ZW50ICYmXG4gICAgICAgICAgICAgICAgISF0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpICYmXG4gICAgICAgICAgICAgICAgZ2V0V2lkdGgobWF4U291cmNlRXh0ZW50KSA9PSBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA9IHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KClcbiAgICAgICAgICAgID8gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXRXb3JsZFdpZHRoXyA9IHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KClcbiAgICAgICAgICAgID8gZ2V0V2lkdGgodGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uVG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uVG9wUmlnaHQgPSBnZXRUb3BSaWdodCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb25Cb3R0b21SaWdodCA9IGdldEJvdHRvbVJpZ2h0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbkJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBzb3VyY2VUb3BMZWZ0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uVG9wTGVmdCk7XG4gICAgICAgIHZhciBzb3VyY2VUb3BSaWdodCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcFJpZ2h0KTtcbiAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uQm90dG9tUmlnaHQpO1xuICAgICAgICB2YXIgc291cmNlQm90dG9tTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvbkJvdHRvbUxlZnQpO1xuICAgICAgICAvKlxuICAgICAgICAgKiBUaGUgbWF4U3ViZGl2aXNpb24gY29udHJvbHMgaG93IG1hbnkgc3BsaXR0aW5ncyBvZiB0aGUgdGFyZ2V0IGFyZWEgY2FuXG4gICAgICAgICAqIGJlIGRvbmUuIFRoZSBpZGVhIGhlcmUgaXMgdG8gZG8gYSBsaW5lYXIgbWFwcGluZyBvZiB0aGUgdGFyZ2V0IGFyZWFzXG4gICAgICAgICAqIGJ1dCB0aGUgYWN0dWFsIG92ZXJhbCByZXByb2plY3Rpb24gKGNhbiBiZSkgZXh0cmVtZWx5IG5vbi1saW5lYXIuIFRoZVxuICAgICAgICAgKiBkZWZhdWx0IHZhbHVlIG9mIE1BWF9TVUJESVZJU0lPTiB3YXMgY2hvc2VuIGJhc2VkIG9uIG1hcHBpbmcgYSAyNTZ4MjU2XG4gICAgICAgICAqIHRpbGUgc2l6ZS4gSG93ZXZlciB0aGlzIGZ1bmN0aW9uIGlzIGFsc28gY2FsbGVkIHRvIHJlbWFwIGNhbnZhcyByZW5kZXJlZFxuICAgICAgICAgKiBsYXllcnMgd2hpY2ggY2FuIGJlIG11Y2ggbGFyZ2VyLiBUaGlzIGNhbGN1bGF0aW9uIGluY3JlYXNlcyB0aGUgbWF4U3ViZGl2aXNpb25cbiAgICAgICAgICogdmFsdWUgYnkgdGhlIHJpZ2h0IGZhY3RvciBzbyB0aGF0IGVhY2ggMjU2eDI1NiBwaXhlbCBhcmVhIGhhc1xuICAgICAgICAgKiBNQVhfU1VCRElWSVNJT04gZGl2aXNpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIG1heFN1YmRpdmlzaW9uID0gTUFYX1NVQkRJVklTSU9OICtcbiAgICAgICAgICAgIChvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgPyBNYXRoLm1heCgwLCBNYXRoLmNlaWwobG9nMihnZXRBcmVhKHRhcmdldEV4dGVudCkgL1xuICAgICAgICAgICAgICAgICAgICAob3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiAqXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uICpcbiAgICAgICAgICAgICAgICAgICAgICAgIDI1NiAqXG4gICAgICAgICAgICAgICAgICAgICAgICAyNTYpKSkpXG4gICAgICAgICAgICAgICAgOiAwKTtcbiAgICAgICAgdGhpcy5hZGRRdWFkXyhkZXN0aW5hdGlvblRvcExlZnQsIGRlc3RpbmF0aW9uVG9wUmlnaHQsIGRlc3RpbmF0aW9uQm90dG9tUmlnaHQsIGRlc3RpbmF0aW9uQm90dG9tTGVmdCwgc291cmNlVG9wTGVmdCwgc291cmNlVG9wUmlnaHQsIHNvdXJjZUJvdHRvbVJpZ2h0LCBzb3VyY2VCb3R0b21MZWZ0LCBtYXhTdWJkaXZpc2lvbik7XG4gICAgICAgIGlmICh0aGlzLndyYXBzWEluU291cmNlXykge1xuICAgICAgICAgICAgdmFyIGxlZnRCb3VuZF8xID0gSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgIGxlZnRCb3VuZF8xID0gTWF0aC5taW4obGVmdEJvdW5kXzEsIHRyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTaGlmdCB0cmlhbmdsZXMgdG8gYmUgYXMgY2xvc2UgdG8gYGxlZnRCb3VuZGAgYXMgcG9zc2libGVcbiAgICAgICAgICAgIC8vIChpZiB0aGUgZGlzdGFuY2UgaXMgbW9yZSB0aGFuIGB3b3JsZFdpZHRoIC8gMmAgaXQgY2FuIGJlIGNsb3Nlci5cbiAgICAgICAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSkge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLm1heCh0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzBdKSAtXG4gICAgICAgICAgICAgICAgICAgIGxlZnRCb3VuZF8xID5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RyaWFuZ2xlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzBdWzFdXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVsxXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzJdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMV1dLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMF1bMF0gLSBsZWZ0Qm91bmRfMSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVsxXVswXSAtIGxlZnRCb3VuZF8xID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzFdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzJdWzBdIC0gbGVmdEJvdW5kXzEgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVbMl1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBSYXJlbHkgKGlmIHRoZSBleHRlbnQgY29udGFpbnMgYm90aCB0aGUgZGF0ZWxpbmUgYW5kIHByaW1lIG1lcmlkaWFuKVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2hpZnQgY2FuIGluIHR1cm4gYnJlYWsgc29tZSB0cmlhbmdsZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIERldGVjdCB0aGlzIGhlcmUgYW5kIGRvbid0IHNoaWZ0IGluIHN1Y2ggY2FzZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW5YID0gTWF0aC5taW4obmV3VHJpYW5nbGVbMF1bMF0sIG5ld1RyaWFuZ2xlWzFdWzBdLCBuZXdUcmlhbmdsZVsyXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhYID0gTWF0aC5tYXgobmV3VHJpYW5nbGVbMF1bMF0sIG5ld1RyaWFuZ2xlWzFdWzBdLCBuZXdUcmlhbmdsZVsyXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhYIC0gbWluWCA8IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS5zb3VyY2UgPSBuZXdUcmlhbmdsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0cmlhbmdsZSB0byB0aGUgdHJpYW5ndWxhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYlNyYyBUaGUgc291cmNlIGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmFkZFRyaWFuZ2xlXyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBhU3JjLCBiU3JjLCBjU3JjKSB7XG4gICAgICAgIHRoaXMudHJpYW5nbGVzXy5wdXNoKHtcbiAgICAgICAgICAgIHNvdXJjZTogW2FTcmMsIGJTcmMsIGNTcmNdLFxuICAgICAgICAgICAgdGFyZ2V0OiBbYSwgYiwgY10sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBxdWFkIChwb2ludHMgaW4gY2xvY2std2lzZSBvcmRlcikgdG8gdGhlIHRyaWFuZ3VsYXRpb25cbiAgICAgKiAoYW5kIHJlcHJvamVjdHMgdGhlIHZlcnRpY2VzKSBpZiB2YWxpZC5cbiAgICAgKiBQZXJmb3JtcyBxdWFkIHN1YmRpdmlzaW9uIGlmIG5lZWRlZCB0byBpbmNyZWFzZSBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZCBUaGUgdGFyZ2V0IGQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYlNyYyBUaGUgc291cmNlIGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZFNyYyBUaGUgc291cmNlIGQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3ViZGl2aXNpb24gTWF4aW1hbCBhbGxvd2VkIHN1YmRpdmlzaW9uIG9mIHRoZSBxdWFkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuYWRkUXVhZF8gPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgYVNyYywgYlNyYywgY1NyYywgZFNyYywgbWF4U3ViZGl2aXNpb24pIHtcbiAgICAgICAgdmFyIHNvdXJjZVF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYVNyYywgYlNyYywgY1NyYywgZFNyY10pO1xuICAgICAgICB2YXIgc291cmNlQ292ZXJhZ2VYID0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoX1xuICAgICAgICAgICAgPyBnZXRXaWR0aChzb3VyY2VRdWFkRXh0ZW50KSAvIHRoaXMuc291cmNlV29ybGRXaWR0aF9cbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIHNvdXJjZVdvcmxkV2lkdGggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuc291cmNlV29ybGRXaWR0aF8pO1xuICAgICAgICAvLyB3aGVuIHRoZSBxdWFkIGlzIHdyYXBwZWQgaW4gdGhlIHNvdXJjZSBwcm9qZWN0aW9uXG4gICAgICAgIC8vIGl0IGNvdmVycyBtb3N0IG9mIHRoZSBwcm9qZWN0aW9uIGV4dGVudCwgYnV0IG5vdCBmdWxseVxuICAgICAgICB2YXIgd3JhcHNYID0gdGhpcy5zb3VyY2VQcm9qXy5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPiAwLjUgJiZcbiAgICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA8IDE7XG4gICAgICAgIHZhciBuZWVkc1N1YmRpdmlzaW9uID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldFByb2pfLmlzR2xvYmFsKCkgJiYgdGhpcy50YXJnZXRXb3JsZFdpZHRoXykge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2EsIGIsIGMsIGRdKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Q292ZXJhZ2VYID0gZ2V0V2lkdGgodGFyZ2V0UXVhZEV4dGVudCkgLyB0aGlzLnRhcmdldFdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPVxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb3ZlcmFnZVggPiBNQVhfVFJJQU5HTEVfV0lEVEggfHwgbmVlZHNTdWJkaXZpc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghd3JhcHNYICYmIHRoaXMuc291cmNlUHJval8uaXNHbG9iYWwoKSAmJiBzb3VyY2VDb3ZlcmFnZVgpIHtcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID1cbiAgICAgICAgICAgICAgICAgICAgc291cmNlQ292ZXJhZ2VYID4gTUFYX1RSSUFOR0xFX1dJRFRIIHx8IG5lZWRzU3ViZGl2aXNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uICYmIHRoaXMubWF4U291cmNlRXh0ZW50Xykge1xuICAgICAgICAgICAgaWYgKGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMF0pICYmXG4gICAgICAgICAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFsxXSkgJiZcbiAgICAgICAgICAgICAgICBpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzJdKSAmJlxuICAgICAgICAgICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbM10pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHNvdXJjZVF1YWRFeHRlbnQsIHRoaXMubWF4U291cmNlRXh0ZW50XykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hvbGUgcXVhZCBvdXRzaWRlIHNvdXJjZSBwcm9qZWN0aW9uIGV4dGVudCAtPiBpZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNOb3RGaW5pdGUgPSAwO1xuICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgIGlmICghaXNGaW5pdGUoYVNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYVNyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYlNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYlNyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY1NyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY1NyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoZFNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoZFNyY1sxXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQgbWlnaHQgYmUgdGhlIGNhc2UgdGhhdCBvbmx5IDEgb2YgdGhlIHBvaW50cyBpcyBpbmZpbml0ZS4gSW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGNhbiBkcmF3IGEgc2luZ2xlIHRyaWFuZ2xlIHdpdGggdGhlIG90aGVyIHRocmVlIHBvaW50c1xuICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGFTcmNbMF0pIHx8ICFpc0Zpbml0ZShhU3JjWzFdKSA/IDggOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShiU3JjWzBdKSB8fCAhaXNGaW5pdGUoYlNyY1sxXSkgPyA0IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICghaXNGaW5pdGUoY1NyY1swXSkgfHwgIWlzRmluaXRlKGNTcmNbMV0pID8gMiA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGRTcmNbMF0pIHx8ICFpc0Zpbml0ZShkU3JjWzFdKSA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm90RmluaXRlICE9IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gWyhhWzBdICsgY1swXSkgLyAyLCAoYVsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlclNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZW50ZXIpO1xuICAgICAgICAgICAgICAgIHZhciBkeCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAod3JhcHNYKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmNFc3RpbVggPSAobW9kdWxvKGFTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsbyhjU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgMjtcbiAgICAgICAgICAgICAgICAgICAgZHggPSBjZW50ZXJTcmNFc3RpbVggLSBtb2R1bG8oY2VudGVyU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGR4ID0gKGFTcmNbMF0gKyBjU3JjWzBdKSAvIDIgLSBjZW50ZXJTcmNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkeSA9IChhU3JjWzFdICsgY1NyY1sxXSkgLyAyIC0gY2VudGVyU3JjWzFdO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID0gY2VudGVyU3JjRXJyb3JTcXVhcmVkID4gdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoYVswXSAtIGNbMF0pIDw9IE1hdGguYWJzKGFbMV0gLSBjWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzcGxpdCBob3Jpem9udGFsbHkgKHRvcCAmIGJvdHRvbSlcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJjID0gWyhiWzBdICsgY1swXSkgLyAyLCAoYlsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBiY1NyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhiYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYSA9IFsoZFswXSArIGFbMF0pIC8gMiwgKGRbMV0gKyBhWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGFTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oZGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGEsIGIsIGJjLCBkYSwgYVNyYywgYlNyYywgYmNTcmMsIGRhU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGRhLCBiYywgYywgZCwgZGFTcmMsIGJjU3JjLCBjU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BsaXQgdmVydGljYWxseSAobGVmdCAmIHJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICB2YXIgYWIgPSBbKGFbMF0gKyBiWzBdKSAvIDIsIChhWzFdICsgYlsxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFiU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGFiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNkID0gWyhjWzBdICsgZFswXSkgLyAyLCAoY1sxXSArIGRbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZFNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYSwgYWIsIGNkLCBkLCBhU3JjLCBhYlNyYywgY2RTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYWIsIGIsIGMsIGNkLCBhYlNyYywgYlNyYywgY1NyYywgY2RTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAod3JhcHNYKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuV3JhcFhJblNvdXJjZV8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXhhY3RseSB6ZXJvIG9yIG9uZSBvZiAqU3JjIGlzIG5vdCBmaW5pdGVcbiAgICAgICAgLy8gVGhlIHRyaWFuZ2xlcyBtdXN0IGhhdmUgdGhlIGRpYWdvbmFsIGxpbmUgYXMgdGhlIGZpcnN0IHNpZGVcbiAgICAgICAgLy8gVGhpcyBpcyB0byBhbGxvdyBlYXN5IGNvZGUgaW4gcmVwcm9qLnMgdG8gbWFrZSBpdCBzdHJhaWdodCBmb3IgYnJva2VuXG4gICAgICAgIC8vIGJyb3dzZXJzIHRoYXQgY2FuJ3QgaGFuZGxlIGRpYWdvbmFsIGNsaXBwaW5nXG4gICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGIpID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGQsIGFTcmMsIGNTcmMsIGRTcmMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGUpID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGIsIGFTcmMsIGNTcmMsIGJTcmMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05vdEZpbml0ZSkge1xuICAgICAgICAgICAgLy8gVHJ5IHRoZSBvdGhlciB0d28gdHJpYW5nbGVzXG4gICAgICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhkKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYSwgYlNyYywgZFNyYywgYVNyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHg3KSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYywgYlNyYywgZFNyYywgY1NyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgZXh0ZW50IG9mIHRoZSAnc291cmNlJyBjb29yZGluYXRlcyBmcm9tIGFsbCB0aGUgdHJpYW5nbGVzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gQ2FsY3VsYXRlZCBleHRlbnQuXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuY2FsY3VsYXRlU291cmNlRXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSB0cmlhbmdsZS5zb3VyY2U7XG4gICAgICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzBdKTtcbiAgICAgICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMV0pO1xuICAgICAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1syXSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8VHJpYW5nbGU+fSBBcnJheSBvZiB0aGUgY2FsY3VsYXRlZCB0cmlhbmdsZXMuXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuZ2V0VHJpYW5nbGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmlhbmdsZXNfO1xuICAgIH07XG4gICAgcmV0dXJuIFRyaWFuZ3VsYXRpb247XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgVHJpYW5ndWxhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyaWFuZ3VsYXRpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9jb21tb25cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IFdNUyB2ZXJzaW9uLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX1dNU19WRVJTSU9OID0gJzEuMy4wJztcbi8qKlxuICogQ29udGV4dCBvcHRpb25zIHRvIGRpc2FibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuZXhwb3J0IHZhciBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgPSB7XG4gICAgaW1hZ2VTbW9vdGhpbmdFbmFibGVkOiBmYWxzZSxcbiAgICBtc0ltYWdlU21vb3RoaW5nRW5hYmxlZDogZmFsc2UsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2pcbiAqL1xuaW1wb3J0IHsgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIH0gZnJvbSAnLi9zb3VyY2UvY29tbW9uLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlRW1wdHksIGV4dGVuZCwgZm9yRWFjaENvcm5lciwgZ2V0Q2VudGVyLCBnZXRIZWlnaHQsIGdldFRvcExlZnQsIGdldFdpZHRoLCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGdldFBvaW50UmVzb2x1dGlvbiwgdHJhbnNmb3JtIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IHNvbHZlTGluZWFyU3lzdGVtIH0gZnJvbSAnLi9tYXRoLmpzJztcbnZhciBicm9rZW5EaWFnb25hbFJlbmRlcmluZ187XG4vKipcbiAqIFRoaXMgZHJhd3MgYSBzbWFsbCB0cmlhbmdsZSBpbnRvIGEgY2FudmFzIGJ5IHNldHRpbmcgdGhlIHRyaWFuZ2xlIGFzIHRoZSBjbGlwIHJlZ2lvblxuICogYW5kIHRoZW4gZHJhd2luZyBhICh0b28gbGFyZ2UpIHJlY3RhbmdsZVxuICpcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHggVGhlIGNvbnRleHQgaW4gd2hpY2ggdG8gZHJhdyB0aGUgdHJpYW5nbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSB1MSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBzZWNvbmQgcG9pbnQuIFRoZSBmaXJzdCBwb2ludCBpcyAwLDAuXG4gKiBAcGFyYW0ge251bWJlcn0gdjEgVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHUyIFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIHRoaXJkIHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHYyIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHRoaXJkIHBvaW50LlxuICovXG5mdW5jdGlvbiBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgdTEsIHYxLCB1MiwgdjIpIHtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbygwLCAwKTtcbiAgICBjdHgubGluZVRvKHUxLCB2MSk7XG4gICAgY3R4LmxpbmVUbyh1MiwgdjIpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5jbGlwKCk7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIE1hdGgubWF4KHUxLCB1MikgKyAxLCBNYXRoLm1heCh2MSwgdjIpKTtcbiAgICBjdHgucmVzdG9yZSgpO1xufVxuLyoqXG4gKiBHaXZlbiB0aGUgZGF0YSBmcm9tIGdldEltYWdlRGF0YSwgc2VlIGlmIHRoZSByaWdodCB2YWx1ZXMgYXBwZWFyIGF0IHRoZSBwcm92aWRlZCBvZmZzZXQuXG4gKiBSZXR1cm5zIHRydWUgaWYgZWl0aGVyIHRoZSBjb2xvciBvciB0cmFuc3BhcmVuY3kgaXMgb2ZmXG4gKlxuICogQHBhcmFtIHtVaW50OENsYW1wZWRBcnJheX0gZGF0YSBUaGUgZGF0YSByZXR1cm5lZCBmcm9tIGdldEltYWdlRGF0YVxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBUaGUgcGl4ZWwgb2Zmc2V0IGZyb20gdGhlIHN0YXJ0IG9mIGRhdGEuXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBkaWFnb25hbCByZW5kZXJpbmcgaXMgYnJva2VuXG4gKi9cbmZ1bmN0aW9uIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIG9mZnNldCkge1xuICAgIC8vIHRoZSB2YWx1ZXMgb3VnaHQgdG8gYmUgY2xvc2UgdG8gdGhlIHJnYmEoMjEwLCAwLCAwLCAwLjc1KVxuICAgIHJldHVybiAoTWF0aC5hYnMoZGF0YVtvZmZzZXQgKiA0XSAtIDIxMCkgPiAyIHx8XG4gICAgICAgIE1hdGguYWJzKGRhdGFbb2Zmc2V0ICogNCArIDNdIC0gMC43NSAqIDI1NSkgPiAyKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgY3VycmVudCBicm93c2VyIGNvbmZpZ3VyYXRpb24gY2FuIHJlbmRlciB0cmlhbmd1bGFyIGNsaXAgcmVnaW9ucyBjb3JyZWN0bHkuXG4gKiBUaGlzIHZhbHVlIGlzIGNhY2hlZCBzbyB0aGUgZnVuY3Rpb24gaXMgb25seSBleHBlbnNpdmUgdGhlIGZpcnN0IHRpbWUgY2FsbGVkLlxuICogRmlyZWZveCBvbiBXaW5kb3dzIChhcyBvZiBub3cpIGRvZXMgbm90IGlmIEhXQSBpcyBlbmFibGVkLiBTZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTYwNjk3NlxuICogSUUgYWxzbyBkb2Vzbid0LiBDaHJvbWUgd29ya3MsIGFuZCBldmVyeXRoaW5nIHNlZW1zIHRvIHdvcmsgb24gT1NYIGFuZCBBbmRyb2lkLiBUaGlzIGZ1bmN0aW9uIGNhY2hlcyB0aGVcbiAqIHJlc3VsdC4gSSBzdXBwb3NlIHRoYXQgaXQgaXMgY29uY2VpdmFibHkgcG9zc2libGUgdGhhdCBhIGJyb3dzZXIgbWlnaHQgZmxpcCBtb2RlcyB3aGlsZSB0aGUgYXBwIGlzXG4gKiBydW5uaW5nLCBidXQgbGV0cyBob3BlIG5vdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBEaWFnb25hbCBSZW5kZXJpbmcgaXMgYnJva2VuLlxuICovXG5mdW5jdGlvbiBpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKCkge1xuICAgIGlmIChicm9rZW5EaWFnb25hbFJlbmRlcmluZ18gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgY3R4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdsaWdodGVyJztcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDIxMCwgMCwgMCwgMC43NSknO1xuICAgICAgICBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgNCwgNSwgNCwgMCk7XG4gICAgICAgIGRyYXdUZXN0VHJpYW5nbGUoY3R4LCA0LCA1LCAwLCA1KTtcbiAgICAgICAgdmFyIGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDMsIDMpLmRhdGE7XG4gICAgICAgIGJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyA9XG4gICAgICAgICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCAwKSB8fFxuICAgICAgICAgICAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDQpIHx8XG4gICAgICAgICAgICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgOCk7XG4gICAgfVxuICAgIHJldHVybiBicm9rZW5EaWFnb25hbFJlbmRlcmluZ187XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgaWRlYWwgcmVzb2x1dGlvbiB0byB1c2UgZnJvbSB0aGUgc291cmNlIGluIG9yZGVyIHRvIGFjaGlldmVcbiAqIHBpeGVsIG1hcHBpbmcgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gMToxIGR1cmluZyByZXByb2plY3Rpb24uXG4gKiBUaGUgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkIHJlZ2FyZGxlc3Mgb2Ygd2hhdCByZXNvbHV0aW9uc1xuICogYXJlIGFjdHVhbGx5IGF2YWlsYWJsZSBpbiB0aGUgZGF0YXNldCAoVGlsZUdyaWQsIEltYWdlLCAuLi4pLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBiZXN0IHJlc29sdXRpb24gdG8gdXNlLiBDYW4gYmUgKy1JbmZpbml0eSwgTmFOIG9yIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbikge1xuICAgIHZhciBzb3VyY2VDZW50ZXIgPSB0cmFuc2Zvcm0odGFyZ2V0Q2VudGVyLCB0YXJnZXRQcm9qLCBzb3VyY2VQcm9qKTtcbiAgICAvLyBjYWxjdWxhdGUgdGhlIGlkZWFsIHJlc29sdXRpb24gb2YgdGhlIHNvdXJjZSBkYXRhXG4gICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBnZXRQb2ludFJlc29sdXRpb24odGFyZ2V0UHJvaiwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0Q2VudGVyKTtcbiAgICB2YXIgdGFyZ2V0TWV0ZXJzUGVyVW5pdCA9IHRhcmdldFByb2ouZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgIGlmICh0YXJnZXRNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc291cmNlUmVzb2x1dGlvbiAqPSB0YXJnZXRNZXRlcnNQZXJVbml0O1xuICAgIH1cbiAgICB2YXIgc291cmNlTWV0ZXJzUGVyVW5pdCA9IHNvdXJjZVByb2ouZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgIGlmIChzb3VyY2VNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc291cmNlUmVzb2x1dGlvbiAvPSBzb3VyY2VNZXRlcnNQZXJVbml0O1xuICAgIH1cbiAgICAvLyBCYXNlZCBvbiB0aGUgcHJvamVjdGlvbiBwcm9wZXJ0aWVzLCB0aGUgcG9pbnQgcmVzb2x1dGlvbiBhdCB0aGUgc3BlY2lmaWVkXG4gICAgLy8gY29vcmRpbmF0ZXMgbWF5IGJlIHNsaWdodGx5IGRpZmZlcmVudC4gV2UgbmVlZCB0byByZXZlcnNlLWNvbXBlbnNhdGUgdGhpc1xuICAgIC8vIGluIG9yZGVyIHRvIGFjaGlldmUgb3B0aW1hbCByZXN1bHRzLlxuICAgIHZhciBzb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgIGlmICghc291cmNlRXh0ZW50IHx8IGNvbnRhaW5zQ29vcmRpbmF0ZShzb3VyY2VFeHRlbnQsIHNvdXJjZUNlbnRlcikpIHtcbiAgICAgICAgdmFyIGNvbXBlbnNhdGlvbkZhY3RvciA9IGdldFBvaW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCBzb3VyY2VSZXNvbHV0aW9uLCBzb3VyY2VDZW50ZXIpIC9cbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb247XG4gICAgICAgIGlmIChpc0Zpbml0ZShjb21wZW5zYXRpb25GYWN0b3IpICYmIGNvbXBlbnNhdGlvbkZhY3RvciA+IDApIHtcbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb24gLz0gY29tcGVuc2F0aW9uRmFjdG9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2VSZXNvbHV0aW9uO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGlkZWFsIHJlc29sdXRpb24gdG8gdXNlIGZyb20gdGhlIHNvdXJjZSBpbiBvcmRlciB0byBhY2hpZXZlXG4gKiBwaXhlbCBtYXBwaW5nIGFzIGNsb3NlIGFzIHBvc3NpYmxlIHRvIDE6MSBkdXJpbmcgcmVwcm9qZWN0aW9uLlxuICogVGhlIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZCByZWdhcmRsZXNzIG9mIHdoYXQgcmVzb2x1dGlvbnNcbiAqIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgaW4gdGhlIGRhdGFzZXQgKFRpbGVHcmlkLCBJbWFnZSwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYmVzdCByZXNvbHV0aW9uIHRvIHVzZS4gQ2FuIGJlICstSW5maW5pdHksIE5hTiBvciAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRFeHRlbnQsIHRhcmdldFJlc29sdXRpb24pIHtcbiAgICB2YXIgdGFyZ2V0Q2VudGVyID0gZ2V0Q2VudGVyKHRhcmdldEV4dGVudCk7XG4gICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgaWYgKCFpc0Zpbml0ZShzb3VyY2VSZXNvbHV0aW9uKSB8fCBzb3VyY2VSZXNvbHV0aW9uIDw9IDApIHtcbiAgICAgICAgZm9yRWFjaENvcm5lcih0YXJnZXRFeHRlbnQsIGZ1bmN0aW9uIChjb3JuZXIpIHtcbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGNvcm5lciwgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgJiYgc291cmNlUmVzb2x1dGlvbiA+IDA7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cbi8qKlxuICogUmVuZGVycyB0aGUgc291cmNlIGRhdGEgaW50byBuZXcgY2FudmFzIGJhc2VkIG9uIHRoZSB0cmlhbmd1bGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB0aGUgY2FudmFzLlxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgdGhlIGNhbnZhcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICogQHBhcmFtIHtudW1iZXJ9IHNvdXJjZVJlc29sdXRpb24gU291cmNlIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gc291cmNlRXh0ZW50IEV4dGVudCBvZiB0aGUgZGF0YSBzb3VyY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9yZXByb2ovVHJpYW5ndWxhdGlvbi5qc1wiKS5kZWZhdWx0fSB0cmlhbmd1bGF0aW9uXG4gKiBDYWxjdWxhdGVkIHRyaWFuZ3VsYXRpb24uXG4gKiBAcGFyYW0ge0FycmF5PHtleHRlbnQ6IGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudCxcbiAqICAgICAgICAgICAgICAgICBpbWFnZTogKEhUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudCl9Pn0gc291cmNlc1xuICogQXJyYXkgb2Ygc291cmNlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBndXR0ZXIgR3V0dGVyIG9mIHRoZSBzb3VyY2VzLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3JlbmRlckVkZ2VzIFJlbmRlciByZXByb2plY3Rpb24gZWRnZXMuXG4gKiBAcGFyYW0ge29iamVjdD19IG9wdF9jb250ZXh0T3B0aW9ucyBQcm9wZXJ0aWVzIHRvIHNldCBvbiB0aGUgY2FudmFzIGNvbnRleHQuXG4gKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzIHdpdGggcmVwcm9qZWN0ZWQgZGF0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcih3aWR0aCwgaGVpZ2h0LCBwaXhlbFJhdGlvLCBzb3VyY2VSZXNvbHV0aW9uLCBzb3VyY2VFeHRlbnQsIHRhcmdldFJlc29sdXRpb24sIHRhcmdldEV4dGVudCwgdHJpYW5ndWxhdGlvbiwgc291cmNlcywgZ3V0dGVyLCBvcHRfcmVuZGVyRWRnZXMsIG9wdF9jb250ZXh0T3B0aW9ucykge1xuICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHdpZHRoKSwgTWF0aC5yb3VuZChwaXhlbFJhdGlvICogaGVpZ2h0KSk7XG4gICAgYXNzaWduKGNvbnRleHQsIG9wdF9jb250ZXh0T3B0aW9ucyk7XG4gICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmNhbnZhcztcbiAgICB9XG4gICAgY29udGV4dC5zY2FsZShwaXhlbFJhdGlvLCBwaXhlbFJhdGlvKTtcbiAgICBmdW5jdGlvbiBwaXhlbFJvdW5kKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogcGl4ZWxSYXRpbykgLyBwaXhlbFJhdGlvO1xuICAgIH1cbiAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdsaWdodGVyJztcbiAgICB2YXIgc291cmNlRGF0YUV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzcmMsIGksIGFycikge1xuICAgICAgICBleHRlbmQoc291cmNlRGF0YUV4dGVudCwgc3JjLmV4dGVudCk7XG4gICAgfSk7XG4gICAgdmFyIGNhbnZhc1dpZHRoSW5Vbml0cyA9IGdldFdpZHRoKHNvdXJjZURhdGFFeHRlbnQpO1xuICAgIHZhciBjYW52YXNIZWlnaHRJblVuaXRzID0gZ2V0SGVpZ2h0KHNvdXJjZURhdGFFeHRlbnQpO1xuICAgIHZhciBzdGl0Y2hDb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKE1hdGgucm91bmQoKHBpeGVsUmF0aW8gKiBjYW52YXNXaWR0aEluVW5pdHMpIC8gc291cmNlUmVzb2x1dGlvbiksIE1hdGgucm91bmQoKHBpeGVsUmF0aW8gKiBjYW52YXNIZWlnaHRJblVuaXRzKSAvIHNvdXJjZVJlc29sdXRpb24pKTtcbiAgICBhc3NpZ24oc3RpdGNoQ29udGV4dCwgb3B0X2NvbnRleHRPcHRpb25zKTtcbiAgICB2YXIgc3RpdGNoU2NhbGUgPSBwaXhlbFJhdGlvIC8gc291cmNlUmVzb2x1dGlvbjtcbiAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNyYywgaSwgYXJyKSB7XG4gICAgICAgIHZhciB4UG9zID0gc3JjLmV4dGVudFswXSAtIHNvdXJjZURhdGFFeHRlbnRbMF07XG4gICAgICAgIHZhciB5UG9zID0gLShzcmMuZXh0ZW50WzNdIC0gc291cmNlRGF0YUV4dGVudFszXSk7XG4gICAgICAgIHZhciBzcmNXaWR0aCA9IGdldFdpZHRoKHNyYy5leHRlbnQpO1xuICAgICAgICB2YXIgc3JjSGVpZ2h0ID0gZ2V0SGVpZ2h0KHNyYy5leHRlbnQpO1xuICAgICAgICAvLyBUaGlzIHRlc3Qgc2hvdWxkIG5ldmVyIGZhaWwgLS0gYnV0IGl0IGRvZXMuIE5lZWQgdG8gZmluZCBhIGZpeCB0aGUgdXBzdHJlYW0gY29uZGl0aW9uXG4gICAgICAgIGlmIChzcmMuaW1hZ2Uud2lkdGggPiAwICYmIHNyYy5pbWFnZS5oZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICBzdGl0Y2hDb250ZXh0LmRyYXdJbWFnZShzcmMuaW1hZ2UsIGd1dHRlciwgZ3V0dGVyLCBzcmMuaW1hZ2Uud2lkdGggLSAyICogZ3V0dGVyLCBzcmMuaW1hZ2UuaGVpZ2h0IC0gMiAqIGd1dHRlciwgeFBvcyAqIHN0aXRjaFNjYWxlLCB5UG9zICogc3RpdGNoU2NhbGUsIHNyY1dpZHRoICogc3RpdGNoU2NhbGUsIHNyY0hlaWdodCAqIHN0aXRjaFNjYWxlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciB0YXJnZXRUb3BMZWZ0ID0gZ2V0VG9wTGVmdCh0YXJnZXRFeHRlbnQpO1xuICAgIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAvKiBDYWxjdWxhdGUgYWZmaW5lIHRyYW5zZm9ybSAoc3JjIC0+IGRzdClcbiAgICAgICAgICogUmVzdWx0aW5nIG1hdHJpeCBjYW4gYmUgdXNlZCB0byB0cmFuc2Zvcm0gY29vcmRpbmF0ZVxuICAgICAgICAgKiBmcm9tIGBzb3VyY2VQcm9qZWN0aW9uYCB0byBkZXN0aW5hdGlvbiBwaXhlbHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRvIG9wdGltaXplIG51bWJlciBvZiBjb250ZXh0IGNhbGxzIGFuZCBpbmNyZWFzZSBudW1lcmljYWwgc3RhYmlsaXR5LFxuICAgICAgICAgKiB3ZSBhbHNvIGRvIHRoZSBmb2xsb3dpbmcgb3BlcmF0aW9uczpcbiAgICAgICAgICogdHJhbnMoLXRvcExlZnRFeHRlbnRDb3JuZXIpLCBzY2FsZSgxIC8gdGFyZ2V0UmVzb2x1dGlvbiksIHNjYWxlKDEsIC0xKVxuICAgICAgICAgKiBoZXJlIGJlZm9yZSBzb2x2aW5nIHRoZSBsaW5lYXIgc3lzdGVtIHNvIFt1aSwgdmldIGFyZSBwaXhlbCBjb29yZGluYXRlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogU3JjIHBvaW50czogeGksIHlpXG4gICAgICAgICAqIERzdCBwb2ludHM6IHVpLCB2aVxuICAgICAgICAgKiBBZmZpbmUgY29lZmZpY2llbnRzOiBhaWpcbiAgICAgICAgICpcbiAgICAgICAgICogfCB4MCB5MCAxICAwICAwIDAgfCAgIHxhMDB8ICAgfHUwfFxuICAgICAgICAgKiB8IHgxIHkxIDEgIDAgIDAgMCB8ICAgfGEwMXwgICB8dTF8XG4gICAgICAgICAqIHwgeDIgeTIgMSAgMCAgMCAwIHwgeCB8YTAyfCA9IHx1MnxcbiAgICAgICAgICogfCAgMCAgMCAwIHgwIHkwIDEgfCAgIHxhMTB8ICAgfHYwfFxuICAgICAgICAgKiB8ICAwICAwIDAgeDEgeTEgMSB8ICAgfGExMXwgICB8djF8XG4gICAgICAgICAqIHwgIDAgIDAgMCB4MiB5MiAxIHwgICB8YTEyfCAgIHx2MnxcbiAgICAgICAgICovXG4gICAgICAgIHZhciBzb3VyY2UgPSB0cmlhbmdsZS5zb3VyY2U7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0cmlhbmdsZS50YXJnZXQ7XG4gICAgICAgIHZhciB4MCA9IHNvdXJjZVswXVswXSwgeTAgPSBzb3VyY2VbMF1bMV07XG4gICAgICAgIHZhciB4MSA9IHNvdXJjZVsxXVswXSwgeTEgPSBzb3VyY2VbMV1bMV07XG4gICAgICAgIHZhciB4MiA9IHNvdXJjZVsyXVswXSwgeTIgPSBzb3VyY2VbMl1bMV07XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgaXMgb24gcGl4ZWwgYm91bmRhcmllc1xuICAgICAgICB2YXIgdTAgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdjAgPSBwaXhlbFJvdW5kKC0odGFyZ2V0WzBdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHUxID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzFdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHYxID0gcGl4ZWxSb3VuZCgtKHRhcmdldFsxXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB1MiA9IHBpeGVsUm91bmQoKHRhcmdldFsyXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB2MiA9IHBpeGVsUm91bmQoLSh0YXJnZXRbMl1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICAvLyBTaGlmdCBhbGwgdGhlIHNvdXJjZSBwb2ludHMgdG8gaW1wcm92ZSBudW1lcmljYWwgc3RhYmlsaXR5XG4gICAgICAgIC8vIG9mIGFsbCB0aGUgc3Vic2VxdWVudCBjYWxjdWxhdGlvbnMuIFRoZSBbeDAsIHkwXSBpcyB1c2VkIGhlcmUuXG4gICAgICAgIC8vIFRoaXMgaXMgYWxzbyB1c2VkIHRvIHNpbXBsaWZ5IHRoZSBsaW5lYXIgc3lzdGVtLlxuICAgICAgICB2YXIgc291cmNlTnVtZXJpY2FsU2hpZnRYID0geDA7XG4gICAgICAgIHZhciBzb3VyY2VOdW1lcmljYWxTaGlmdFkgPSB5MDtcbiAgICAgICAgeDAgPSAwO1xuICAgICAgICB5MCA9IDA7XG4gICAgICAgIHgxIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WDtcbiAgICAgICAgeTEgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRZO1xuICAgICAgICB4MiAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFg7XG4gICAgICAgIHkyIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WTtcbiAgICAgICAgdmFyIGF1Z21lbnRlZE1hdHJpeCA9IFtcbiAgICAgICAgICAgIFt4MSwgeTEsIDAsIDAsIHUxIC0gdTBdLFxuICAgICAgICAgICAgW3gyLCB5MiwgMCwgMCwgdTIgLSB1MF0sXG4gICAgICAgICAgICBbMCwgMCwgeDEsIHkxLCB2MSAtIHYwXSxcbiAgICAgICAgICAgIFswLCAwLCB4MiwgeTIsIHYyIC0gdjBdLFxuICAgICAgICBdO1xuICAgICAgICB2YXIgYWZmaW5lQ29lZnMgPSBzb2x2ZUxpbmVhclN5c3RlbShhdWdtZW50ZWRNYXRyaXgpO1xuICAgICAgICBpZiAoIWFmZmluZUNvZWZzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGlmIChpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKCkgfHxcbiAgICAgICAgICAgIG9wdF9jb250ZXh0T3B0aW9ucyA9PT0gSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEKSB7XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBhbGwgbGluZXMgYXJlIGhvcml6b250YWwgb3IgdmVydGljYWxcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBkaWFnb25hbCBsaW5lLiBEbyBpdCBpbiA0IHN0ZXBzXG4gICAgICAgICAgICB2YXIgc3RlcHMgPSA0O1xuICAgICAgICAgICAgdmFyIHVkID0gdTAgLSB1MTtcbiAgICAgICAgICAgIHZhciB2ZCA9IHYwIC0gdjE7XG4gICAgICAgICAgICBmb3IgKHZhciBzdGVwID0gMDsgc3RlcCA8IHN0ZXBzOyBzdGVwKyspIHtcbiAgICAgICAgICAgICAgICAvLyBHbyBob3Jpem9udGFsbHlcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MSArIHBpeGVsUm91bmQoKChzdGVwICsgMSkgKiB1ZCkgLyBzdGVwcyksIHYxICsgcGl4ZWxSb3VuZCgoc3RlcCAqIHZkKSAvIChzdGVwcyAtIDEpKSk7XG4gICAgICAgICAgICAgICAgLy8gR28gdmVydGljYWxseVxuICAgICAgICAgICAgICAgIGlmIChzdGVwICE9IHN0ZXBzIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MSArIHBpeGVsUm91bmQoKChzdGVwICsgMSkgKiB1ZCkgLyBzdGVwcyksIHYxICsgcGl4ZWxSb3VuZCgoKHN0ZXAgKyAxKSAqIHZkKSAvIChzdGVwcyAtIDEpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2UgYXJlIGFsbW9zdCBhdCB1MHIsIHYwclxuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MCwgdjApO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgY29udGV4dC50cmFuc2Zvcm0oYWZmaW5lQ29lZnNbMF0sIGFmZmluZUNvZWZzWzJdLCBhZmZpbmVDb2Vmc1sxXSwgYWZmaW5lQ29lZnNbM10sIHUwLCB2MCk7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHNvdXJjZURhdGFFeHRlbnRbMF0gLSBzb3VyY2VOdW1lcmljYWxTaGlmdFgsIHNvdXJjZURhdGFFeHRlbnRbM10gLSBzb3VyY2VOdW1lcmljYWxTaGlmdFkpO1xuICAgICAgICBjb250ZXh0LnNjYWxlKHNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvLCAtc291cmNlUmVzb2x1dGlvbiAvIHBpeGVsUmF0aW8pO1xuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShzdGl0Y2hDb250ZXh0LmNhbnZhcywgMCwgMCk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH0pO1xuICAgIGlmIChvcHRfcmVuZGVyRWRnZXMpIHtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gMTtcbiAgICAgICAgdHJpYW5ndWxhdGlvbi5nZXRUcmlhbmdsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdHJpYW5nbGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHUwID0gKHRhcmdldFswXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2MCA9IC0odGFyZ2V0WzBdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHUxID0gKHRhcmdldFsxXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2MSA9IC0odGFyZ2V0WzFdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHUyID0gKHRhcmdldFsyXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2MiA9IC0odGFyZ2V0WzJdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MCwgdjApO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LmNhbnZhcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcHJvai5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovSW1hZ2VcbiAqL1xuaW1wb3J0IHsgRVJST1JfVEhSRVNIT0xEIH0gZnJvbSAnLi9jb21tb24uanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZUJhc2UgZnJvbSAnLi4vSW1hZ2VCYXNlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IFRyaWFuZ3VsYXRpb24gZnJvbSAnLi9Ucmlhbmd1bGF0aW9uLmpzJztcbmltcG9ydCB7IGNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24sIHJlbmRlciBhcyByZW5kZXJSZXByb2plY3RlZCwgfSBmcm9tICcuLi9yZXByb2ouanMnO1xuaW1wb3J0IHsgZ2V0Q2VudGVyLCBnZXRIZWlnaHQsIGdldEludGVyc2VjdGlvbiwgZ2V0V2lkdGggfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQsIG51bWJlciwgbnVtYmVyKSA6IGltcG9ydChcIi4uL0ltYWdlQmFzZS5qc1wiKS5kZWZhdWx0fSBGdW5jdGlvblR5cGVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBlbmNhcHN1bGF0aW5nIHNpbmdsZSByZXByb2plY3RlZCBpbWFnZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9JbWFnZX5JbWFnZVNvdXJjZX0uXG4gKi9cbnZhciBSZXByb2pJbWFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVwcm9qSW1hZ2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbiAob2YgdGhlIGRhdGEpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uVHlwZX0gZ2V0SW1hZ2VGdW5jdGlvblxuICAgICAqICAgICBGdW5jdGlvbiByZXR1cm5pbmcgc291cmNlIGltYWdlcyAoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvKS5cbiAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdF9jb250ZXh0T3B0aW9ucyBQcm9wZXJ0aWVzIHRvIHNldCBvbiB0aGUgY2FudmFzIGNvbnRleHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVwcm9qSW1hZ2Uoc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgdGFyZ2V0RXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBnZXRJbWFnZUZ1bmN0aW9uLCBvcHRfY29udGV4dE9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG1heFNvdXJjZUV4dGVudCA9IHNvdXJjZVByb2ouZ2V0RXh0ZW50KCk7XG4gICAgICAgIHZhciBtYXhUYXJnZXRFeHRlbnQgPSB0YXJnZXRQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbGltaXRlZFRhcmdldEV4dGVudCA9IG1heFRhcmdldEV4dGVudFxuICAgICAgICAgICAgPyBnZXRJbnRlcnNlY3Rpb24odGFyZ2V0RXh0ZW50LCBtYXhUYXJnZXRFeHRlbnQpXG4gICAgICAgICAgICA6IHRhcmdldEV4dGVudDtcbiAgICAgICAgdmFyIHRhcmdldENlbnRlciA9IGdldENlbnRlcihsaW1pdGVkVGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBlcnJvclRocmVzaG9sZEluUGl4ZWxzID0gRVJST1JfVEhSRVNIT0xEO1xuICAgICAgICB2YXIgdHJpYW5ndWxhdGlvbiA9IG5ldyBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIG1heFNvdXJjZUV4dGVudCwgc291cmNlUmVzb2x1dGlvbiAqIGVycm9yVGhyZXNob2xkSW5QaXhlbHMsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgc291cmNlRXh0ZW50ID0gdHJpYW5ndWxhdGlvbi5jYWxjdWxhdGVTb3VyY2VFeHRlbnQoKTtcbiAgICAgICAgdmFyIHNvdXJjZUltYWdlID0gZ2V0SW1hZ2VGdW5jdGlvbihzb3VyY2VFeHRlbnQsIHNvdXJjZVJlc29sdXRpb24sIHBpeGVsUmF0aW8pO1xuICAgICAgICB2YXIgc3RhdGUgPSBzb3VyY2VJbWFnZSA/IEltYWdlU3RhdGUuSURMRSA6IEltYWdlU3RhdGUuRU1QVFk7XG4gICAgICAgIHZhciBzb3VyY2VQaXhlbFJhdGlvID0gc291cmNlSW1hZ2UgPyBzb3VyY2VJbWFnZS5nZXRQaXhlbFJhdGlvKCkgOiAxO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRhcmdldEV4dGVudCwgdGFyZ2V0UmVzb2x1dGlvbiwgc291cmNlUGl4ZWxSYXRpbywgc3RhdGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRQcm9qXyA9IHRhcmdldFByb2o7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heFNvdXJjZUV4dGVudF8gPSBtYXhTb3VyY2VFeHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IWltcG9ydChcIi4vVHJpYW5ndWxhdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJpYW5ndWxhdGlvbl8gPSB0cmlhbmd1bGF0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldFJlc29sdXRpb25fID0gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0RXh0ZW50XyA9IHRhcmdldEV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZUJhc2UuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZUltYWdlXyA9IHNvdXJjZUltYWdlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVBpeGVsUmF0aW9fID0gc291cmNlUGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0T3B0aW9uc18gPSBvcHRfY29udGV4dE9wdGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jYW52YXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgUmVwcm9qSW1hZ2UucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuU291cmNlXygpO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2UuXG4gICAgICovXG4gICAgUmVwcm9qSW1hZ2UucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFByb2plY3Rpb24uXG4gICAgICovXG4gICAgUmVwcm9qSW1hZ2UucHJvdG90eXBlLmdldFByb2plY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldFByb2pfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZXByb2pJbWFnZS5wcm90b3R5cGUucmVwcm9qZWN0XyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNvdXJjZVN0YXRlID0gdGhpcy5zb3VyY2VJbWFnZV8uZ2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKHNvdXJjZVN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBnZXRXaWR0aCh0aGlzLnRhcmdldEV4dGVudF8pIC8gdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBnZXRIZWlnaHQodGhpcy50YXJnZXRFeHRlbnRfKSAvIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl87XG4gICAgICAgICAgICB0aGlzLmNhbnZhc18gPSByZW5kZXJSZXByb2plY3RlZCh3aWR0aCwgaGVpZ2h0LCB0aGlzLnNvdXJjZVBpeGVsUmF0aW9fLCB0aGlzLnNvdXJjZUltYWdlXy5nZXRSZXNvbHV0aW9uKCksIHRoaXMubWF4U291cmNlRXh0ZW50XywgdGhpcy50YXJnZXRSZXNvbHV0aW9uXywgdGhpcy50YXJnZXRFeHRlbnRfLCB0aGlzLnRyaWFuZ3VsYXRpb25fLCBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBleHRlbnQ6IHRoaXMuc291cmNlSW1hZ2VfLmdldEV4dGVudCgpLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogdGhpcy5zb3VyY2VJbWFnZV8uZ2V0SW1hZ2UoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSwgMCwgdW5kZWZpbmVkLCB0aGlzLmNvbnRleHRPcHRpb25zXyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHNvdXJjZVN0YXRlO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqL1xuICAgIFJlcHJvakltYWdlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURJTkc7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VTdGF0ZSA9IHRoaXMuc291cmNlSW1hZ2VfLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBpZiAoc291cmNlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5MT0FERUQgfHwgc291cmNlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVwcm9qZWN0XygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4odGhpcy5zb3VyY2VJbWFnZV8sIEV2ZW50VHlwZS5DSEFOR0UsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VTdGF0ZSA9IHRoaXMuc291cmNlSW1hZ2VfLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VTdGF0ZSA9PSBJbWFnZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmxpc3RlblNvdXJjZV8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwcm9qZWN0XygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VJbWFnZV8ubG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJlcHJvakltYWdlLnByb3RvdHlwZS51bmxpc3RlblNvdXJjZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVubGlzdGVuQnlLZXkoXG4gICAgICAgIC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9ICovICh0aGlzLnNvdXJjZUxpc3RlbmVyS2V5XykpO1xuICAgICAgICB0aGlzLnNvdXJjZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gUmVwcm9qSW1hZ2U7XG59KEltYWdlQmFzZSkpO1xuZXhwb3J0IGRlZmF1bHQgUmVwcm9qSW1hZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU291cmNlXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24gfSBmcm9tICcuLi9wcm9qLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcgb3IgYW4gYXJyYXkgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgc291cmNlXG4gKiBhdHRyaWJ1dGlvbnMuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlKTogKHN0cmluZ3xBcnJheTxzdHJpbmc+KX0gQXR0cmlidXRpb25cbiAqL1xuLyoqXG4gKiBBIHR5cGUgdGhhdCBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGF0dHJpYnV0aW9uIGluZm9ybWF0aW9uIGZvciBkYXRhIHNvdXJjZXMuXG4gKlxuICogSXQgcmVwcmVzZW50cyBlaXRoZXJcbiAqICogYSBzaW1wbGUgc3RyaW5nIChlLmcuIGAnwqkgQWNtZSBJbmMuJ2ApXG4gKiAqIGFuIGFycmF5IG9mIHNpbXBsZSBzdHJpbmdzIChlLmcuIGBbJ8KpIEFjbWUgSW5jLicsICfCqSBCYWNtZSBJbmMuJ11gKVxuICogKiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZyBvciBhcnJheSBvZiBzdHJpbmdzICh7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9Tb3VyY2V+QXR0cmlidXRpb259KVxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd8QXJyYXk8c3RyaW5nPnxBdHRyaWJ1dGlvbn0gQXR0cmlidXRpb25MaWtlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtBdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZT0ncmVhZHknXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9ZmFsc2VdXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3Ige0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllcn0gc291cmNlcy5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNvdXJjZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wcm9qZWN0aW9uXyA9IGdldFByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/QXR0cmlidXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hdHRyaWJ1dGlvbnNfID0gYWRhcHRBdHRyaWJ1dGlvbnMob3B0aW9ucy5hdHRyaWJ1dGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV8gPVxuICAgICAgICAgICAgb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXG4gICAgICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBzb3VyY2UgaXMgY3VycmVudGx5IGxvYWRpbmcgZGF0YS4gU291cmNlcyB0aGF0IGRlZmVyIGxvYWRpbmcgdG8gdGhlXG4gICAgICAgICAqIG1hcCdzIHRpbGUgcXVldWUgbmV2ZXIgc2V0IHRoaXMgdG8gYHRydWVgLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZV8gPVxuICAgICAgICAgICAgb3B0aW9ucy5zdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zdGF0ZSA6IFNvdXJjZVN0YXRlLlJFQURZO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy53cmFwWF8gPSBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhdHRyaWJ1dGlvbiBmdW5jdGlvbiBmb3IgdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHs/QXR0cmlidXRpb259IEF0dHJpYnV0aW9uIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGlvbnNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHByb2plY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gUHJvamVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBSZXNvbHV0aW9ucy5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZSwgc2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1N0YXRlflN0YXRlfSBmb3IgcG9zc2libGUgc3RhdGVzLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBXcmFwIFguXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRXcmFwWCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcFhfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH0gQ29udGV4dCBvcHRpb25zLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0Q29udGV4dE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgdGhlIHNvdXJjZS4gVGhlIHNvdXJjZSB3aWxsIGJlIGNsZWFyZWQsIGFuZCBkYXRhIGZyb20gdGhlIHNlcnZlciB3aWxsIGJlIHJlbG9hZGVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBhdHRyaWJ1dGlvbnMgb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9ucyBBdHRyaWJ1dGlvbnMuXG4gICAgICogICAgIENhbiBiZSBwYXNzZWQgYXMgYHN0cmluZ2AsIGBBcnJheTxzdHJpbmc+YCwge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU291cmNlfkF0dHJpYnV0aW9ufSxcbiAgICAgKiAgICAgb3IgYHVuZGVmaW5lZGAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuc2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gKGF0dHJpYnV0aW9ucykge1xuICAgICAgICB0aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbnMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBTb3VyY2U7XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogVHVybnMgdGhlIGF0dHJpYnV0aW9ucyBvcHRpb24gaW50byBhbiBhdHRyaWJ1dGlvbnMgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9uTGlrZSBUaGUgYXR0cmlidXRpb24gb3B0aW9uLlxuICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBbiBhdHRyaWJ1dGlvbiBmdW5jdGlvbiAob3IgbnVsbCkuXG4gKi9cbmZ1bmN0aW9uIGFkYXB0QXR0cmlidXRpb25zKGF0dHJpYnV0aW9uTGlrZSkge1xuICAgIGlmICghYXR0cmlidXRpb25MaWtlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbkxpa2UpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGlvbkxpa2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBbYXR0cmlidXRpb25MaWtlXTtcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgU291cmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U291cmNlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9JbWFnZVxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IFJlcHJvakltYWdlIGZyb20gJy4uL3JlcHJvai9JbWFnZS5qcyc7XG5pbXBvcnQgU291cmNlIGZyb20gJy4vU291cmNlLmpzJztcbmltcG9ydCB7IEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIH0gZnJvbSAnLi4vcmVwcm9qL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGVxdWl2YWxlbnQgfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGxpbmVhckZpbmROZWFyZXN0IH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIEltYWdlU291cmNlRXZlbnRUeXBlID0ge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGFuIGltYWdlIHN0YXJ0cyBsb2FkaW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL0ltYWdlLkltYWdlU291cmNlRXZlbnQjaW1hZ2Vsb2Fkc3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSU1BR0VMT0FEU1RBUlQ6ICdpbWFnZWxvYWRzdGFydCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaW1hZ2UgZmluaXNoZXMgbG9hZGluZy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9JbWFnZS5JbWFnZVNvdXJjZUV2ZW50I2ltYWdlbG9hZGVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJTUFHRUxPQURFTkQ6ICdpbWFnZWxvYWRlbmQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBpZiBpbWFnZSBsb2FkaW5nIHJlc3VsdHMgaW4gYW4gZXJyb3IuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvSW1hZ2UuSW1hZ2VTb3VyY2VFdmVudCNpbWFnZWxvYWRlcnJvclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJTUFHRUxPQURFUlJPUjogJ2ltYWdlbG9hZGVycm9yJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL0ltYWdlfkltYWdlU291cmNlfSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG52YXIgSW1hZ2VTb3VyY2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VTb3VyY2VFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gaW1hZ2UgVGhlIGltYWdlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlU291cmNlRXZlbnQodHlwZSwgaW1hZ2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbWFnZSByZWxhdGVkIHRvIHRoZSBldmVudC5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEltYWdlU291cmNlRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgeyBJbWFnZVNvdXJjZUV2ZW50IH07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW1hZ2VTbW9vdGhpbmc9dHJ1ZV0gRW5hYmxlIGltYWdlIHNtb290aGluZy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc11cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgYSBzaW5nbGUgaW1hZ2UuXG4gKiBAYWJzdHJhY3RcbiAqIEBmaXJlcyBtb2R1bGU6b2wvc291cmNlL0ltYWdlLkltYWdlU291cmNlRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIEltYWdlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbWFnZVNvdXJjZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgU2luZ2xlIGltYWdlIHNvdXJjZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlU291cmNlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXNvbHV0aW9uc18gPVxuICAgICAgICAgICAgb3B0aW9ucy5yZXNvbHV0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yZXNvbHV0aW9ucyA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVwcm9qL0ltYWdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXByb2plY3RlZEltYWdlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVwcm9qZWN0ZWRSZXZpc2lvbl8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge29iamVjdHx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0T3B0aW9uc18gPVxuICAgICAgICAgICAgb3B0aW9ucy5pbWFnZVNtb290aGluZyA9PT0gZmFsc2UgPyBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gUmVzb2x1dGlvbnMuXG4gICAgICovXG4gICAgSW1hZ2VTb3VyY2UucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfSBDb250ZXh0IG9wdGlvbnMuXG4gICAgICovXG4gICAgSW1hZ2VTb3VyY2UucHJvdG90eXBlLmdldENvbnRleHRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0T3B0aW9uc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgSW1hZ2VTb3VyY2UucHJvdG90eXBlLmZpbmROZWFyZXN0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXykge1xuICAgICAgICAgICAgdmFyIGlkeCA9IGxpbmVhckZpbmROZWFyZXN0KHRoaXMucmVzb2x1dGlvbnNfLCByZXNvbHV0aW9uLCAwKTtcbiAgICAgICAgICAgIHJlc29sdXRpb24gPSB0aGlzLnJlc29sdXRpb25zX1tpZHhdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHV0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ltYWdlQmFzZS5qc1wiKS5kZWZhdWx0fSBTaW5nbGUgaW1hZ2UuXG4gICAgICovXG4gICAgSW1hZ2VTb3VyY2UucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgc291cmNlUHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIHx8XG4gICAgICAgICAgICAhc291cmNlUHJvamVjdGlvbiB8fFxuICAgICAgICAgICAgIXByb2plY3Rpb24gfHxcbiAgICAgICAgICAgIGVxdWl2YWxlbnQoc291cmNlUHJvamVjdGlvbiwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2VQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbiA9IHNvdXJjZVByb2plY3Rpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbWFnZUludGVybmFsKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXByb2plY3RlZEltYWdlXykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlcHJvamVjdGVkUmV2aXNpb25fID09IHRoaXMuZ2V0UmV2aXNpb24oKSAmJlxuICAgICAgICAgICAgICAgICAgICBlcXVpdmFsZW50KHRoaXMucmVwcm9qZWN0ZWRJbWFnZV8uZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcHJvamVjdGVkSW1hZ2VfLmdldFJlc29sdXRpb24oKSA9PSByZXNvbHV0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgIGVxdWFscyh0aGlzLnJlcHJvamVjdGVkSW1hZ2VfLmdldEV4dGVudCgpLCBleHRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcHJvamVjdGVkSW1hZ2VfO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlcHJvamVjdGVkSW1hZ2VfLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcHJvamVjdGVkSW1hZ2VfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwcm9qZWN0ZWRJbWFnZV8gPSBuZXcgUmVwcm9qSW1hZ2Uoc291cmNlUHJvamVjdGlvbiwgcHJvamVjdGlvbiwgZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBmdW5jdGlvbiAoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW1hZ2VJbnRlcm5hbChleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHNvdXJjZVByb2plY3Rpb24pO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLmNvbnRleHRPcHRpb25zXyk7XG4gICAgICAgICAgICB0aGlzLnJlcHJvamVjdGVkUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwcm9qZWN0ZWRJbWFnZV87XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9JbWFnZUJhc2UuanNcIikuZGVmYXVsdH0gU2luZ2xlIGltYWdlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBJbWFnZVNvdXJjZS5wcm90b3R5cGUuZ2V0SW1hZ2VJbnRlcm5hbCA9IGZ1bmN0aW9uIChleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgaW1hZ2UgY2hhbmdlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgSW1hZ2VTb3VyY2UucHJvdG90eXBlLmhhbmRsZUltYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIHN3aXRjaCAoaW1hZ2UuZ2V0U3RhdGUoKSkge1xuICAgICAgICAgICAgY2FzZSBJbWFnZVN0YXRlLkxPQURJTkc6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEltYWdlU291cmNlRXZlbnQoSW1hZ2VTb3VyY2VFdmVudFR5cGUuSU1BR0VMT0FEU1RBUlQsIGltYWdlKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEltYWdlU3RhdGUuTE9BREVEOlxuICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgSW1hZ2VTb3VyY2VFdmVudChJbWFnZVNvdXJjZUV2ZW50VHlwZS5JTUFHRUxPQURFTkQsIGltYWdlKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEltYWdlU3RhdGUuRVJST1I6XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBJbWFnZVNvdXJjZUV2ZW50KEltYWdlU291cmNlRXZlbnRUeXBlLklNQUdFTE9BREVSUk9SLCBpbWFnZSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIHBhc3NcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEltYWdlU291cmNlO1xufShTb3VyY2UpKTtcbi8qKlxuICogRGVmYXVsdCBpbWFnZSBsb2FkIGZ1bmN0aW9uIGZvciBpbWFnZSBzb3VyY2VzIHRoYXQgdXNlIGltcG9ydChcIi4uL0ltYWdlLmpzXCIpLkltYWdlIGltYWdlXG4gKiBpbnN0YW5jZXMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLmRlZmF1bHR9IGltYWdlIEltYWdlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTb3VyY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0SW1hZ2VMb2FkRnVuY3Rpb24oaW1hZ2UsIHNyYykge1xuICAgIC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSAqLyAoaW1hZ2UuZ2V0SW1hZ2UoKSkuc3JjID0gc3JjO1xufVxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VTb3VyY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VCYXNlIGZyb20gJy4vSW1hZ2VCYXNlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgeyBJTUFHRV9ERUNPREUgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBnZXRIZWlnaHQgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW5PbmNlLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9JbWFnZX5JbWFnZX0gZm9yIHRoZSBpbWFnZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHNyYyBhcyBhcmd1bWVudHMuIEl0IGlzIHN1cHBvc2VkIHRvIG1ha2UgaXQgc28gdGhlXG4gKiB1bmRlcmx5aW5nIGltYWdlIHtAbGluayBtb2R1bGU6b2wvSW1hZ2V+SW1hZ2UjZ2V0SW1hZ2V9IGlzIGFzc2lnbmVkIHRoZVxuICogY29udGVudCBzcGVjaWZpZWQgYnkgdGhlIHNyYy4gSWYgbm90IHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgaXNcbiAqXG4gKiAgICAgZnVuY3Rpb24oaW1hZ2UsIHNyYykge1xuICogICAgICAgaW1hZ2UuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiAgICAgfVxuICpcbiAqIFByb3ZpZGluZyBhIGN1c3RvbSBgaW1hZ2VMb2FkRnVuY3Rpb25gIGNhbiBiZSB1c2VmdWwgdG8gbG9hZCBpbWFnZXMgd2l0aFxuICogcG9zdCByZXF1ZXN0cyBvciAtIGluIGdlbmVyYWwgLSB0aHJvdWdoIFhIUiByZXF1ZXN0cywgd2hlcmUgdGhlIHNyYyBvZiB0aGVcbiAqIGltYWdlIGVsZW1lbnQgd291bGQgYmUgc2V0IHRvIGEgZGF0YSBVUkkgd2hlbiB0aGUgY29udGVudCBpcyBsb2FkZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKEltYWdlV3JhcHBlciwgc3RyaW5nKTogdm9pZH0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbnZhciBJbWFnZVdyYXBwZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlV3JhcHBlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIEltYWdlIHNvdXJjZSBVUkkuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtMb2FkRnVuY3Rpb259IGltYWdlTG9hZEZ1bmN0aW9uIEltYWdlIGxvYWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW1hZ2VXcmFwcGVyKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgc3JjLCBjcm9zc09yaWdpbiwgaW1hZ2VMb2FkRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBJbWFnZVN0YXRlLklETEUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3JjXyA9IHNyYztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICAgICAgICBfdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9mdW5jdGlvbigpOnZvaWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuSURMRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtMb2FkRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8gPSBpbWFnZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3MgbG9hZGluZyBvciByZWFkIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5oYW5kbGVJbWFnZUVycm9yXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuRVJST1I7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmhhbmRsZUltYWdlTG9hZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KHRoaXMuZXh0ZW50KSAvIHRoaXMuaW1hZ2VfLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBpbWFnZSBvciByZXRyeSBpZiBsb2FkaW5nIHByZXZpb3VzbHkgZmFpbGVkLlxuICAgICAqIExvYWRpbmcgaXMgdGFrZW4gY2FyZSBvZiBieSB0aGUgdGlsZSBxdWV1ZSwgYW5kIGNhbGxpbmcgdGhpcyBtZXRob2QgaXNcbiAgICAgKiBvbmx5IG5lZWRlZCBmb3IgcHJlbG9hZGluZyBvciBmb3IgcmVsb2FkaW5nIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5JRExFIHx8IHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuTE9BRElORztcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICAgICAgdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8odGhpcywgdGhpcy5zcmNfKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbGlzdGVuSW1hZ2UodGhpcy5pbWFnZV8sIHRoaXMuaGFuZGxlSW1hZ2VMb2FkXy5iaW5kKHRoaXMpLCB0aGlzLmhhbmRsZUltYWdlRXJyb3JfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5zZXRJbWFnZSA9IGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB0aGlzLmltYWdlXyA9IGltYWdlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51bmxpc3Rlbl8pIHtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVdyYXBwZXI7XG59KEltYWdlQmFzZSkpO1xuLyoqXG4gKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UgZWxlbWVudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTphbnl9IGxvYWRIYW5kbGVyIExvYWQgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6YW55fSBlcnJvckhhbmRsZXIgRXJyb3IgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtmdW5jdGlvbigpOnZvaWR9IENhbGxiYWNrIHRvIHN0b3AgbGlzdGVuaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuSW1hZ2UoaW1hZ2UsIGxvYWRIYW5kbGVyLCBlcnJvckhhbmRsZXIpIHtcbiAgICB2YXIgaW1nID0gLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqLyAoaW1hZ2UpO1xuICAgIGlmIChpbWcuc3JjICYmIElNQUdFX0RFQ09ERSkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IGltZy5kZWNvZGUoKTtcbiAgICAgICAgdmFyIGxpc3RlbmluZ18xID0gdHJ1ZTtcbiAgICAgICAgdmFyIHVubGlzdGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGlzdGVuaW5nXzEgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgcHJvbWlzZVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmluZ18xKSB7XG4gICAgICAgICAgICAgICAgbG9hZEhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5pbmdfMSkge1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBVbmNvbmRpdGlvbmFsbHkgY2FsbCBlcnJvckhhbmRsZXIoKSB3aGVuIHRoaXMgYnVnIGlzIGZpeGVkIHVwc3RyZWFtOlxuICAgICAgICAgICAgICAgIC8vICAgICAgICBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk4NTI3XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdFbmNvZGluZ0Vycm9yJyAmJlxuICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID09PSAnSW52YWxpZCBpbWFnZSB0eXBlLicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1bmxpc3RlbjtcbiAgICB9XG4gICAgdmFyIGxpc3RlbmVyS2V5cyA9IFtcbiAgICAgICAgbGlzdGVuT25jZShpbWcsIEV2ZW50VHlwZS5MT0FELCBsb2FkSGFuZGxlciksXG4gICAgICAgIGxpc3Rlbk9uY2UoaW1nLCBFdmVudFR5cGUuRVJST1IsIGVycm9ySGFuZGxlciksXG4gICAgXTtcbiAgICByZXR1cm4gZnVuY3Rpb24gdW5saXN0ZW4oKSB7XG4gICAgICAgIGxpc3RlbmVyS2V5cy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIH07XG59XG5leHBvcnQgZGVmYXVsdCBJbWFnZVdyYXBwZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL0ltYWdlU3RhdGljXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZVNvdXJjZSwgeyBkZWZhdWx0SW1hZ2VMb2FkRnVuY3Rpb24gfSBmcm9tICcuL0ltYWdlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IEltYWdlV3JhcHBlciBmcm9tICcuLi9JbWFnZS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7IGdldEhlaWdodCwgZ2V0V2lkdGgsIGludGVyc2VjdHMgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24gfSBmcm9tICcuLi9wcm9qLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiAgTm90ZSB0aGF0XG4gKiB5b3UgbXVzdCBwcm92aWRlIGEgYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbaW1hZ2VFeHRlbnRdIEV4dGVudCBvZiB0aGUgaW1hZ2UgaW4gbWFwIGNvb3JkaW5hdGVzLlxuICogVGhpcyBpcyB0aGUgW2xlZnQsIGJvdHRvbSwgcmlnaHQsIHRvcF0gbWFwIGNvb3JkaW5hdGVzIG9mIHlvdXIgaW1hZ2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW2ltYWdlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGFuIGltYWdlIGdpdmVuIGEgVVJMLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW1hZ2VTbW9vdGhpbmc9dHJ1ZV0gRW5hYmxlIGltYWdlIHNtb290aGluZy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbaW1hZ2VTaXplXSBTaXplIG9mIHRoZSBpbWFnZSBpbiBwaXhlbHMuIFVzdWFsbHkgdGhlIGltYWdlIHNpemUgaXMgYXV0by1kZXRlY3RlZCwgc28gdGhpc1xuICogb25seSBuZWVkcyB0byBiZSBzZXQgaWYgYXV0by1kZXRlY3Rpb24gZmFpbHMgZm9yIHNvbWUgcmVhc29uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHVybCBJbWFnZSBVUkwuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBsYXllciBzb3VyY2UgZm9yIGRpc3BsYXlpbmcgYSBzaW5nbGUsIHN0YXRpYyBpbWFnZS5cbiAqIEBhcGlcbiAqL1xudmFyIFN0YXRpYyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3RhdGljLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBJbWFnZVN0YXRpYyBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN0YXRpYyhvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjcm9zc09yaWdpbiA9IG9wdGlvbnMuY3Jvc3NPcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY3Jvc3NPcmlnaW4gOiBudWxsO1xuICAgICAgICB2YXIgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZS5qc1wiKS5Mb2FkRnVuY3Rpb259ICovIGltYWdlTG9hZEZ1bmN0aW9uID0gb3B0aW9ucy5pbWFnZUxvYWRGdW5jdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuaW1hZ2VMb2FkRnVuY3Rpb25cbiAgICAgICAgICAgIDogZGVmYXVsdEltYWdlTG9hZEZ1bmN0aW9uO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBpbWFnZVNtb290aGluZzogb3B0aW9ucy5pbWFnZVNtb290aGluZyxcbiAgICAgICAgICAgIHByb2plY3Rpb246IGdldFByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uKSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51cmxfID0gb3B0aW9ucy51cmw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlRXh0ZW50XyA9IG9wdGlvbnMuaW1hZ2VFeHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlXyA9IG5ldyBJbWFnZVdyYXBwZXIoX3RoaXMuaW1hZ2VFeHRlbnRfLCB1bmRlZmluZWQsIDEsIF90aGlzLnVybF8sIGNyb3NzT3JpZ2luLCBpbWFnZUxvYWRGdW5jdGlvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VTaXplXyA9IG9wdGlvbnMuaW1hZ2VTaXplID8gb3B0aW9ucy5pbWFnZVNpemUgOiBudWxsO1xuICAgICAgICBfdGhpcy5pbWFnZV8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCBfdGhpcy5oYW5kbGVJbWFnZUNoYW5nZS5iaW5kKF90aGlzKSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW1hZ2UgZXh0ZW50XG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gaW1hZ2UgZXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdGF0aWMucHJvdG90eXBlLmdldEltYWdlRXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZUV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gU2luZ2xlIGltYWdlLlxuICAgICAqL1xuICAgIFN0YXRpYy5wcm90b3R5cGUuZ2V0SW1hZ2VJbnRlcm5hbCA9IGZ1bmN0aW9uIChleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKGludGVyc2VjdHMoZXh0ZW50LCB0aGlzLmltYWdlXy5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgVVJMIHVzZWQgZm9yIHRoaXMgaW1hZ2Ugc291cmNlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVVJMLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdGF0aWMucHJvdG90eXBlLmdldFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudC5cbiAgICAgKi9cbiAgICBTdGF0aWMucHJvdG90eXBlLmhhbmRsZUltYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZV8uZ2V0U3RhdGUoKSA9PSBJbWFnZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgdmFyIGltYWdlRXh0ZW50ID0gdGhpcy5pbWFnZV8uZ2V0RXh0ZW50KCk7XG4gICAgICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlXy5nZXRJbWFnZSgpO1xuICAgICAgICAgICAgdmFyIGltYWdlV2lkdGggPSB2b2lkIDAsIGltYWdlSGVpZ2h0ID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VTaXplXykge1xuICAgICAgICAgICAgICAgIGltYWdlV2lkdGggPSB0aGlzLmltYWdlU2l6ZV9bMF07XG4gICAgICAgICAgICAgICAgaW1hZ2VIZWlnaHQgPSB0aGlzLmltYWdlU2l6ZV9bMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbWFnZVdpZHRoID0gaW1hZ2Uud2lkdGg7XG4gICAgICAgICAgICAgICAgaW1hZ2VIZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IGdldEhlaWdodChpbWFnZUV4dGVudCkgLyBpbWFnZUhlaWdodDtcbiAgICAgICAgICAgIHZhciB0YXJnZXRXaWR0aCA9IE1hdGguY2VpbChnZXRXaWR0aChpbWFnZUV4dGVudCkgLyByZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRXaWR0aCAhPSBpbWFnZVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQodGFyZ2V0V2lkdGgsIGltYWdlSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBhc3NpZ24oY29udGV4dCwgdGhpcy5nZXRDb250ZXh0T3B0aW9ucygpKTtcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0LCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VfLnNldEltYWdlKGNhbnZhcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5oYW5kbGVJbWFnZUNoYW5nZS5jYWxsKHRoaXMsIGV2dCk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGljO1xufShJbWFnZVNvdXJjZSkpO1xuZXhwb3J0IGRlZmF1bHQgU3RhdGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VTdGF0aWMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9XTVNTZXJ2ZXJUeXBlXG4gKi9cbi8qKlxuICogQXZhaWxhYmxlIHNlcnZlciB0eXBlczogYCdjYXJtZW50YXNlcnZlcidgLCBgJ2dlb3NlcnZlcidgLCBgJ21hcHNlcnZlcidgLFxuICogICAgIGAncWdpcydgLiBUaGVzZSBhcmUgc2VydmVycyB0aGF0IGhhdmUgdmVuZG9yIHBhcmFtZXRlcnMgYmV5b25kIHRoZSBXTVNcbiAqICAgICBzcGVjaWZpY2F0aW9uIHRoYXQgT3BlbkxheWVycyBjYW4gbWFrZSB1c2Ugb2YuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogSGlEUEkgc3VwcG9ydCBmb3IgW0Nhcm1lbnRhIFNlcnZlcl0oaHR0cHM6Ly93d3cuY2FybWVudGEuY29tL2VuL3Byb2R1Y3RzL2Nhcm1lbnRhLXNlcnZlcilcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ0FSTUVOVEFfU0VSVkVSOiAnY2FybWVudGFzZXJ2ZXInLFxuICAgIC8qKlxuICAgICAqIEhpRFBJIHN1cHBvcnQgZm9yIFtHZW9TZXJ2ZXJdKGh0dHBzOi8vZ2Vvc2VydmVyLm9yZy8pXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdFT1NFUlZFUjogJ2dlb3NlcnZlcicsXG4gICAgLyoqXG4gICAgICogSGlEUEkgc3VwcG9ydCBmb3IgW01hcFNlcnZlcl0oaHR0cHM6Ly9tYXBzZXJ2ZXIub3JnLylcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTUFQU0VSVkVSOiAnbWFwc2VydmVyJyxcbiAgICAvKipcbiAgICAgKiBIaURQSSBzdXBwb3J0IGZvciBbUUdJU10oaHR0cHM6Ly9xZ2lzLm9yZy8pXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFFHSVM6ICdxZ2lzJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1XTVNTZXJ2ZXJUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC91cmlcbiAqL1xuLyoqXG4gKiBBcHBlbmRzIHF1ZXJ5IHBhcmFtZXRlcnMgdG8gYSBVUkkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVyaSBUaGUgb3JpZ2luYWwgVVJJLCB3aGljaCBtYXkgYWxyZWFkeSBoYXZlIHF1ZXJ5IGRhdGEuXG4gKiBAcGFyYW0geyFPYmplY3R9IHBhcmFtcyBBbiBvYmplY3Qgd2hlcmUga2V5cyBhcmUgVVJJLWVuY29kZWQgcGFyYW1ldGVyIGtleXMsXG4gKiAgICAgYW5kIHRoZSB2YWx1ZXMgYXJlIGFyYml0cmFyeSB0eXBlcyBvciBhcnJheXMuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuZXcgVVJJLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kUGFyYW1zKHVyaSwgcGFyYW1zKSB7XG4gICAgdmFyIGtleVBhcmFtcyA9IFtdO1xuICAgIC8vIFNraXAgYW55IG51bGwgb3IgdW5kZWZpbmVkIHBhcmFtZXRlciB2YWx1ZXNcbiAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKHBhcmFtc1trXSAhPT0gbnVsbCAmJiBwYXJhbXNba10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAga2V5UGFyYW1zLnB1c2goayArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba10pKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBxcyA9IGtleVBhcmFtcy5qb2luKCcmJyk7XG4gICAgLy8gcmVtb3ZlIGFueSB0cmFpbGluZyA/IG9yICZcbiAgICB1cmkgPSB1cmkucmVwbGFjZSgvWz8mXSQvLCAnJyk7XG4gICAgLy8gYXBwZW5kID8gb3IgJiBkZXBlbmRpbmcgb24gd2hldGhlciB1cmkgaGFzIGV4aXN0aW5nIHBhcmFtZXRlcnNcbiAgICB1cmkgPSB1cmkuaW5kZXhPZignPycpID09PSAtMSA/IHVyaSArICc/JyA6IHVyaSArICcmJztcbiAgICByZXR1cm4gdXJpICsgcXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cmluZ1xuICovXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgTnVtYmVyIHRvIGJlIGZvcm1hdHRlZFxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFRoZSBkZXNpcmVkIHdpZHRoXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9wcmVjaXNpb24gUHJlY2lzaW9uIG9mIHRoZSBvdXRwdXQgc3RyaW5nIChpLmUuIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcylcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEZvcm1hdHRlZCBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhZE51bWJlcihudW1iZXIsIHdpZHRoLCBvcHRfcHJlY2lzaW9uKSB7XG4gICAgdmFyIG51bWJlclN0cmluZyA9IG9wdF9wcmVjaXNpb24gIT09IHVuZGVmaW5lZCA/IG51bWJlci50b0ZpeGVkKG9wdF9wcmVjaXNpb24pIDogJycgKyBudW1iZXI7XG4gICAgdmFyIGRlY2ltYWwgPSBudW1iZXJTdHJpbmcuaW5kZXhPZignLicpO1xuICAgIGRlY2ltYWwgPSBkZWNpbWFsID09PSAtMSA/IG51bWJlclN0cmluZy5sZW5ndGggOiBkZWNpbWFsO1xuICAgIHJldHVybiBkZWNpbWFsID4gd2lkdGhcbiAgICAgICAgPyBudW1iZXJTdHJpbmdcbiAgICAgICAgOiBuZXcgQXJyYXkoMSArIHdpZHRoIC0gZGVjaW1hbCkuam9pbignMCcpICsgbnVtYmVyU3RyaW5nO1xufVxuLyoqXG4gKiBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL29taWNoZWxzZW4vY29tcGFyZS12ZXJzaW9ucy9ibG9iL21hc3Rlci9pbmRleC5qc1xuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB2MSBGaXJzdCB2ZXJzaW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHYyIFNlY29uZCB2ZXJzaW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVZlcnNpb25zKHYxLCB2Mikge1xuICAgIHZhciBzMSA9ICgnJyArIHYxKS5zcGxpdCgnLicpO1xuICAgIHZhciBzMiA9ICgnJyArIHYyKS5zcGxpdCgnLicpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5tYXgoczEubGVuZ3RoLCBzMi5sZW5ndGgpOyBpKyspIHtcbiAgICAgICAgdmFyIG4xID0gcGFyc2VJbnQoczFbaV0gfHwgJzAnLCAxMCk7XG4gICAgICAgIHZhciBuMiA9IHBhcnNlSW50KHMyW2ldIHx8ICcwJywgMTApO1xuICAgICAgICBpZiAobjEgPiBuMikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4yID4gbjEpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmluZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL0ltYWdlV01TXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IHsgREVGQVVMVF9XTVNfVkVSU0lPTiB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VTb3VyY2UsIHsgZGVmYXVsdEltYWdlTG9hZEZ1bmN0aW9uIH0gZnJvbSAnLi9JbWFnZS5qcyc7XG5pbXBvcnQgSW1hZ2VXcmFwcGVyIGZyb20gJy4uL0ltYWdlLmpzJztcbmltcG9ydCBXTVNTZXJ2ZXJUeXBlIGZyb20gJy4vV01TU2VydmVyVHlwZS5qcyc7XG5pbXBvcnQgeyBhcHBlbmRQYXJhbXMgfSBmcm9tICcuLi91cmkuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbiB9IGZyb20gJy4uL3JlcHJvai5qcyc7XG5pbXBvcnQgeyBjb21wYXJlVmVyc2lvbnMgfSBmcm9tICcuLi9zdHJpbmcuanMnO1xuaW1wb3J0IHsgY29udGFpbnNFeHRlbnQsIGdldENlbnRlciwgZ2V0Rm9yVmlld0FuZFNpemUsIGdldEhlaWdodCwgZ2V0V2lkdGgsIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uLCB0cmFuc2Zvcm0gfSBmcm9tICcuLi9wcm9qLmpzJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICovXG52YXIgR0VURkVBVFVSRUlORk9fSU1BR0VfU0laRSA9IFsxMDEsIDEwMV07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2hpZHBpPXRydWVdIFVzZSB0aGUgYG9sL01hcCNwaXhlbFJhdGlvYCB2YWx1ZSB3aGVuIHJlcXVlc3RpbmdcbiAqIHRoZSBpbWFnZSBmcm9tIHRoZSByZW1vdGUgc2VydmVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1dNU1NlcnZlclR5cGUuanNcIikuZGVmYXVsdHxzdHJpbmd9IFtzZXJ2ZXJUeXBlXSBUaGUgdHlwZSBvZlxuICogdGhlIHJlbW90ZSBXTVMgc2VydmVyOiBgbWFwc2VydmVyYCwgYGdlb3NlcnZlcmAgb3IgYHFnaXNgLiBPbmx5IG5lZWRlZCBpZiBgaGlkcGlgIGlzIGB0cnVlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuTG9hZEZ1bmN0aW9ufSBbaW1hZ2VMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYW4gaW1hZ2UgZ2l2ZW4gYSBVUkwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbWFnZVNtb290aGluZz10cnVlXSBFbmFibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCo+fSBwYXJhbXMgV01TIHJlcXVlc3QgcGFyYW1ldGVycy5cbiAqIEF0IGxlYXN0IGEgYExBWUVSU2AgcGFyYW0gaXMgcmVxdWlyZWQuIGBTVFlMRVNgIGlzXG4gKiBgJydgIGJ5IGRlZmF1bHQuIGBWRVJTSU9OYCBpcyBgMS4zLjBgIGJ5IGRlZmF1bHQuIGBXSURUSGAsIGBIRUlHSFRgLCBgQkJPWGBcbiAqIGFuZCBgQ1JTYCAoYFNSU2AgZm9yIFdNUyB2ZXJzaW9uIDwgMS4zLjApIHdpbGwgYmUgc2V0IGR5bmFtaWNhbGx5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYXRpbz0xLjVdIFJhdGlvLiBgMWAgbWVhbnMgaW1hZ2UgcmVxdWVzdHMgYXJlIHRoZSBzaXplIG9mIHRoZSBtYXAgdmlld3BvcnQsIGAyYCBtZWFuc1xuICogdHdpY2UgdGhlIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIG1hcCB2aWV3cG9ydCwgYW5kIHNvIG9uLiBNdXN0IGJlIGAxYCBvclxuICogaGlnaGVyLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbcmVzb2x1dGlvbnNdIFJlc29sdXRpb25zLlxuICogSWYgc3BlY2lmaWVkLCByZXF1ZXN0cyB3aWxsIGJlIG1hZGUgZm9yIHRoZXNlIHJlc29sdXRpb25zIG9ubHkuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdXJsIFdNUyBzZXJ2aWNlIFVSTC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTb3VyY2UgZm9yIFdNUyBzZXJ2ZXJzIHByb3ZpZGluZyBzaW5nbGUsIHVudGlsZWQgaW1hZ2VzLlxuICpcbiAqIEBmaXJlcyBtb2R1bGU6b2wvc291cmNlL0ltYWdlLkltYWdlU291cmNlRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIEltYWdlV01TID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbWFnZVdNUywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBbb3B0X29wdGlvbnNdIEltYWdlV01TIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW1hZ2VXTVMob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGltYWdlU21vb3RoaW5nOiBvcHRpb25zLmltYWdlU21vb3RoaW5nLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgcmVzb2x1dGlvbnM6IG9wdGlvbnMucmVzb2x1dGlvbnMsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNyb3NzT3JpZ2luXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNyb3NzT3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNyb3NzT3JpZ2luIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXJsXyA9IG9wdGlvbnMudXJsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlTG9hZEZ1bmN0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmltYWdlTG9hZEZ1bmN0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuaW1hZ2VMb2FkRnVuY3Rpb25cbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRJbWFnZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGFyYW1zXyA9IG9wdGlvbnMucGFyYW1zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52MTNfID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMudXBkYXRlVjEzXygpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vV01TU2VydmVyVHlwZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNlcnZlclR5cGVfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1dNU1NlcnZlclR5cGUuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9ICovIChvcHRpb25zLnNlcnZlclR5cGUpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oaWRwaV8gPSBvcHRpb25zLmhpZHBpICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmhpZHBpIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZVNpemVfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmV2aXNpb25fID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yYXRpb18gPSBvcHRpb25zLnJhdGlvICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJhdGlvIDogMS41O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgR2V0RmVhdHVyZUluZm8gVVJMIGZvciB0aGUgcGFzc2VkIGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIGFuZFxuICAgICAqIHByb2plY3Rpb24uIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgR2V0RmVhdHVyZUluZm8gVVJMIGNhbm5vdCBiZVxuICAgICAqIGNvbnN0cnVjdGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IHBhcmFtcyBHZXRGZWF0dXJlSW5mbyBwYXJhbXMuIGBJTkZPX0ZPUk1BVGAgYXQgbGVhc3Qgc2hvdWxkXG4gICAgICogICAgIGJlIHByb3ZpZGVkLiBJZiBgUVVFUllfTEFZRVJTYCBpcyBub3QgcHJvdmlkZWQgdGhlbiB0aGUgbGF5ZXJzIHNwZWNpZmllZFxuICAgICAqICAgICBpbiB0aGUgYExBWUVSU2AgcGFyYW1ldGVyIHdpbGwgYmUgdXNlZC4gYFZFUlNJT05gIHNob3VsZCBub3QgYmVcbiAgICAgKiAgICAgc3BlY2lmaWVkIGhlcmUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gR2V0RmVhdHVyZUluZm8gVVJMLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVdNUy5wcm90b3R5cGUuZ2V0RmVhdHVyZUluZm9VcmwgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbiwgcGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnVybF8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvamVjdGlvbk9iaiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHZhciBzb3VyY2VQcm9qZWN0aW9uT2JqID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmIChzb3VyY2VQcm9qZWN0aW9uT2JqICYmIHNvdXJjZVByb2plY3Rpb25PYmogIT09IHByb2plY3Rpb25PYmopIHtcbiAgICAgICAgICAgIHJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2plY3Rpb25PYmosIHByb2plY3Rpb25PYmosIGNvb3JkaW5hdGUsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgY29vcmRpbmF0ZSA9IHRyYW5zZm9ybShjb29yZGluYXRlLCBwcm9qZWN0aW9uT2JqLCBzb3VyY2VQcm9qZWN0aW9uT2JqKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXh0ZW50ID0gZ2V0Rm9yVmlld0FuZFNpemUoY29vcmRpbmF0ZSwgcmVzb2x1dGlvbiwgMCwgR0VURkVBVFVSRUlORk9fSU1BR0VfU0laRSk7XG4gICAgICAgIHZhciBiYXNlUGFyYW1zID0ge1xuICAgICAgICAgICAgJ1NFUlZJQ0UnOiAnV01TJyxcbiAgICAgICAgICAgICdWRVJTSU9OJzogREVGQVVMVF9XTVNfVkVSU0lPTixcbiAgICAgICAgICAgICdSRVFVRVNUJzogJ0dldEZlYXR1cmVJbmZvJyxcbiAgICAgICAgICAgICdGT1JNQVQnOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICAgICdUUkFOU1BBUkVOVCc6IHRydWUsXG4gICAgICAgICAgICAnUVVFUllfTEFZRVJTJzogdGhpcy5wYXJhbXNfWydMQVlFUlMnXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXNzaWduKGJhc2VQYXJhbXMsIHRoaXMucGFyYW1zXywgcGFyYW1zKTtcbiAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKChjb29yZGluYXRlWzBdIC0gZXh0ZW50WzBdKSAvIHJlc29sdXRpb24pO1xuICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoKGV4dGVudFszXSAtIGNvb3JkaW5hdGVbMV0pIC8gcmVzb2x1dGlvbik7XG4gICAgICAgIGJhc2VQYXJhbXNbdGhpcy52MTNfID8gJ0knIDogJ1gnXSA9IHg7XG4gICAgICAgIGJhc2VQYXJhbXNbdGhpcy52MTNfID8gJ0onIDogJ1knXSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3RVcmxfKGV4dGVudCwgR0VURkVBVFVSRUlORk9fSU1BR0VfU0laRSwgMSwgc291cmNlUHJvamVjdGlvbk9iaiB8fCBwcm9qZWN0aW9uT2JqLCBiYXNlUGFyYW1zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgR2V0TGVnZW5kR3JhcGhpYyBVUkwsIG9wdGlvbmFsbHkgb3B0aW1pemVkIGZvciB0aGUgcGFzc2VkXG4gICAgICogcmVzb2x1dGlvbiBhbmQgcG9zc2libHkgaW5jbHVkaW5nIGFueSBwYXNzZWQgc3BlY2lmaWMgcGFyYW1ldGVycy4gUmV0dXJuc1xuICAgICAqIGB1bmRlZmluZWRgIGlmIHRoZSBHZXRMZWdlbmRHcmFwaGljIFVSTCBjYW5ub3QgYmUgY29uc3RydWN0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Jlc29sdXRpb25dIFJlc29sdXRpb24uIElmIHNldCB0byB1bmRlZmluZWQsIGBTQ0FMRWBcbiAgICAgKiAgICAgd2lsbCBub3QgYmUgY2FsY3VsYXRlZCBhbmQgaW5jbHVkZWQgaW4gVVJMLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcGFyYW1zXSBHZXRMZWdlbmRHcmFwaGljIHBhcmFtcy4gSWYgYExBWUVSYCBpcyBzZXQsIHRoZVxuICAgICAqICAgICByZXF1ZXN0IGlzIGdlbmVyYXRlZCBmb3IgdGhpcyB3bXMgbGF5ZXIsIGVsc2UgaXQgd2lsbCB0cnkgdG8gdXNlIHRoZVxuICAgICAqICAgICBjb25maWd1cmVkIHdtcyBsYXllci4gRGVmYXVsdCBgRk9STUFUYCBpcyBgaW1hZ2UvcG5nYC5cbiAgICAgKiAgICAgYFZFUlNJT05gIHNob3VsZCBub3QgYmUgc3BlY2lmaWVkIGhlcmUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gR2V0TGVnZW5kR3JhcGhpYyBVUkwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV01TLnByb3RvdHlwZS5nZXRMZWdlbmRVcmwgPSBmdW5jdGlvbiAocmVzb2x1dGlvbiwgcGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnVybF8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFzZVBhcmFtcyA9IHtcbiAgICAgICAgICAgICdTRVJWSUNFJzogJ1dNUycsXG4gICAgICAgICAgICAnVkVSU0lPTic6IERFRkFVTFRfV01TX1ZFUlNJT04sXG4gICAgICAgICAgICAnUkVRVUVTVCc6ICdHZXRMZWdlbmRHcmFwaGljJyxcbiAgICAgICAgICAgICdGT1JNQVQnOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHBhcmFtcyA9PT0gdW5kZWZpbmVkIHx8IHBhcmFtc1snTEFZRVInXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5wYXJhbXNfLkxBWUVSUztcbiAgICAgICAgICAgIHZhciBpc1NpbmdsZUxheWVyID0gIUFycmF5LmlzQXJyYXkobGF5ZXJzKSB8fCBsYXllcnMubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgaWYgKCFpc1NpbmdsZUxheWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhc2VQYXJhbXNbJ0xBWUVSJ10gPSBsYXllcnM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIG1wdSA9IHRoaXMuZ2V0UHJvamVjdGlvbigpXG4gICAgICAgICAgICAgICAgPyB0aGlzLmdldFByb2plY3Rpb24oKS5nZXRNZXRlcnNQZXJVbml0KClcbiAgICAgICAgICAgICAgICA6IDE7XG4gICAgICAgICAgICB2YXIgZHBpID0gMjUuNCAvIDAuMjg7XG4gICAgICAgICAgICB2YXIgaW5jaGVzUGVyTWV0ZXIgPSAzOS4zNztcbiAgICAgICAgICAgIGJhc2VQYXJhbXNbJ1NDQUxFJ10gPSByZXNvbHV0aW9uICogbXB1ICogaW5jaGVzUGVyTWV0ZXIgKiBkcGk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduKGJhc2VQYXJhbXMsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiBhcHBlbmRQYXJhbXMoLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0aGlzLnVybF8pLCBiYXNlUGFyYW1zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdXNlci1wcm92aWRlZCBwYXJhbXMsIGkuZS4gdGhvc2UgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciB0aHJvdWdoXG4gICAgICogdGhlIFwicGFyYW1zXCIgb3B0aW9uLCBhbmQgcG9zc2libHkgdXBkYXRlZCB1c2luZyB0aGUgdXBkYXRlUGFyYW1zIG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFBhcmFtcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VXTVMucHJvdG90eXBlLmdldFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9JbWFnZS5qc1wiKS5kZWZhdWx0fSBTaW5nbGUgaW1hZ2UuXG4gICAgICovXG4gICAgSW1hZ2VXTVMucHJvdG90eXBlLmdldEltYWdlSW50ZXJuYWwgPSBmdW5jdGlvbiAoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLnVybF8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x1dGlvbiA9IHRoaXMuZmluZE5lYXJlc3RSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgICAgICBpZiAocGl4ZWxSYXRpbyAhPSAxICYmICghdGhpcy5oaWRwaV8gfHwgdGhpcy5zZXJ2ZXJUeXBlXyA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgcGl4ZWxSYXRpbyA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlUmVzb2x1dGlvbiA9IHJlc29sdXRpb24gLyBwaXhlbFJhdGlvO1xuICAgICAgICB2YXIgY2VudGVyID0gZ2V0Q2VudGVyKGV4dGVudCk7XG4gICAgICAgIHZhciB2aWV3V2lkdGggPSBNYXRoLmNlaWwoZ2V0V2lkdGgoZXh0ZW50KSAvIGltYWdlUmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB2aWV3SGVpZ2h0ID0gTWF0aC5jZWlsKGdldEhlaWdodChleHRlbnQpIC8gaW1hZ2VSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHZpZXdFeHRlbnQgPSBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIGltYWdlUmVzb2x1dGlvbiwgMCwgW1xuICAgICAgICAgICAgdmlld1dpZHRoLFxuICAgICAgICAgICAgdmlld0hlaWdodCxcbiAgICAgICAgXSk7XG4gICAgICAgIHZhciByZXF1ZXN0V2lkdGggPSBNYXRoLmNlaWwoKHRoaXMucmF0aW9fICogZ2V0V2lkdGgoZXh0ZW50KSkgLyBpbWFnZVJlc29sdXRpb24pO1xuICAgICAgICB2YXIgcmVxdWVzdEhlaWdodCA9IE1hdGguY2VpbCgodGhpcy5yYXRpb18gKiBnZXRIZWlnaHQoZXh0ZW50KSkgLyBpbWFnZVJlc29sdXRpb24pO1xuICAgICAgICB2YXIgcmVxdWVzdEV4dGVudCA9IGdldEZvclZpZXdBbmRTaXplKGNlbnRlciwgaW1hZ2VSZXNvbHV0aW9uLCAwLCBbXG4gICAgICAgICAgICByZXF1ZXN0V2lkdGgsXG4gICAgICAgICAgICByZXF1ZXN0SGVpZ2h0LFxuICAgICAgICBdKTtcbiAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZV87XG4gICAgICAgIGlmIChpbWFnZSAmJlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJldmlzaW9uXyA9PSB0aGlzLmdldFJldmlzaW9uKCkgJiZcbiAgICAgICAgICAgIGltYWdlLmdldFJlc29sdXRpb24oKSA9PSByZXNvbHV0aW9uICYmXG4gICAgICAgICAgICBpbWFnZS5nZXRQaXhlbFJhdGlvKCkgPT0gcGl4ZWxSYXRpbyAmJlxuICAgICAgICAgICAgY29udGFpbnNFeHRlbnQoaW1hZ2UuZ2V0RXh0ZW50KCksIHZpZXdFeHRlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICdTRVJWSUNFJzogJ1dNUycsXG4gICAgICAgICAgICAnVkVSU0lPTic6IERFRkFVTFRfV01TX1ZFUlNJT04sXG4gICAgICAgICAgICAnUkVRVUVTVCc6ICdHZXRNYXAnLFxuICAgICAgICAgICAgJ0ZPUk1BVCc6ICdpbWFnZS9wbmcnLFxuICAgICAgICAgICAgJ1RSQU5TUEFSRU5UJzogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgYXNzaWduKHBhcmFtcywgdGhpcy5wYXJhbXNfKTtcbiAgICAgICAgdGhpcy5pbWFnZVNpemVfWzBdID0gTWF0aC5yb3VuZChnZXRXaWR0aChyZXF1ZXN0RXh0ZW50KSAvIGltYWdlUmVzb2x1dGlvbik7XG4gICAgICAgIHRoaXMuaW1hZ2VTaXplX1sxXSA9IE1hdGgucm91bmQoZ2V0SGVpZ2h0KHJlcXVlc3RFeHRlbnQpIC8gaW1hZ2VSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0UmVxdWVzdFVybF8ocmVxdWVzdEV4dGVudCwgdGhpcy5pbWFnZVNpemVfLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBwYXJhbXMpO1xuICAgICAgICB0aGlzLmltYWdlXyA9IG5ldyBJbWFnZVdyYXBwZXIocmVxdWVzdEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgdXJsLCB0aGlzLmNyb3NzT3JpZ2luXywgdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8pO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB0aGlzLmltYWdlXy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlSW1hZ2VDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgaW1hZ2UgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLkxvYWRGdW5jdGlvbn0gVGhlIGltYWdlIGxvYWQgZnVuY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV01TLnByb3RvdHlwZS5nZXRJbWFnZUxvYWRGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VMb2FkRnVuY3Rpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgUGFyYW1zLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gUmVxdWVzdCBVUkwuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdNUy5wcm90b3R5cGUuZ2V0UmVxdWVzdFVybF8gPSBmdW5jdGlvbiAoZXh0ZW50LCBzaXplLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBwYXJhbXMpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMudXJsXyAhPT0gdW5kZWZpbmVkLCA5KTsgLy8gYHVybGAgbXVzdCBiZSBjb25maWd1cmVkIG9yIHNldCB1c2luZyBgI3NldFVybCgpYFxuICAgICAgICBwYXJhbXNbdGhpcy52MTNfID8gJ0NSUycgOiAnU1JTJ10gPSBwcm9qZWN0aW9uLmdldENvZGUoKTtcbiAgICAgICAgaWYgKCEoJ1NUWUxFUycgaW4gdGhpcy5wYXJhbXNfKSkge1xuICAgICAgICAgICAgcGFyYW1zWydTVFlMRVMnXSA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwaXhlbFJhdGlvICE9IDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zZXJ2ZXJUeXBlXykge1xuICAgICAgICAgICAgICAgIGNhc2UgV01TU2VydmVyVHlwZS5HRU9TRVJWRVI6XG4gICAgICAgICAgICAgICAgICAgIHZhciBkcGkgPSAoOTAgKiBwaXhlbFJhdGlvICsgMC41KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgnRk9STUFUX09QVElPTlMnIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zWydGT1JNQVRfT1BUSU9OUyddICs9ICc7ZHBpOicgKyBkcGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNbJ0ZPUk1BVF9PUFRJT05TJ10gPSAnZHBpOicgKyBkcGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBXTVNTZXJ2ZXJUeXBlLk1BUFNFUlZFUjpcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zWydNQVBfUkVTT0xVVElPTiddID0gOTAgKiBwaXhlbFJhdGlvO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFdNU1NlcnZlclR5cGUuQ0FSTUVOVEFfU0VSVkVSOlxuICAgICAgICAgICAgICAgIGNhc2UgV01TU2VydmVyVHlwZS5RR0lTOlxuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbJ0RQSSddID0gOTAgKiBwaXhlbFJhdGlvO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmFsc2UsIDgpOyAvLyBVbmtub3duIGBzZXJ2ZXJUeXBlYCBjb25maWd1cmVkXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBhcmFtc1snV0lEVEgnXSA9IHNpemVbMF07XG4gICAgICAgIHBhcmFtc1snSEVJR0hUJ10gPSBzaXplWzFdO1xuICAgICAgICB2YXIgYXhpc09yaWVudGF0aW9uID0gcHJvamVjdGlvbi5nZXRBeGlzT3JpZW50YXRpb24oKTtcbiAgICAgICAgdmFyIGJib3g7XG4gICAgICAgIGlmICh0aGlzLnYxM18gJiYgYXhpc09yaWVudGF0aW9uLnN1YnN0cigwLCAyKSA9PSAnbmUnKSB7XG4gICAgICAgICAgICBiYm94ID0gW2V4dGVudFsxXSwgZXh0ZW50WzBdLCBleHRlbnRbM10sIGV4dGVudFsyXV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiYm94ID0gZXh0ZW50O1xuICAgICAgICB9XG4gICAgICAgIHBhcmFtc1snQkJPWCddID0gYmJveC5qb2luKCcsJyk7XG4gICAgICAgIHJldHVybiBhcHBlbmRQYXJhbXMoLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0aGlzLnVybF8pLCBwYXJhbXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBVUkwgdXNlZCBmb3IgdGhpcyBXTVMgc291cmNlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFVSTC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VXTVMucHJvdG90eXBlLmdldFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgaW1hZ2UgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuTG9hZEZ1bmN0aW9ufSBpbWFnZUxvYWRGdW5jdGlvbiBJbWFnZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVdNUy5wcm90b3R5cGUuc2V0SW1hZ2VMb2FkRnVuY3Rpb24gPSBmdW5jdGlvbiAoaW1hZ2VMb2FkRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy5pbWFnZV8gPSBudWxsO1xuICAgICAgICB0aGlzLmltYWdlTG9hZEZ1bmN0aW9uXyA9IGltYWdlTG9hZEZ1bmN0aW9uO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgVVJMIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSB1cmwgVVJMLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVdNUy5wcm90b3R5cGUuc2V0VXJsID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICBpZiAodXJsICE9IHRoaXMudXJsXykge1xuICAgICAgICAgICAgdGhpcy51cmxfID0gdXJsO1xuICAgICAgICAgICAgdGhpcy5pbWFnZV8gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdXNlci1wcm92aWRlZCBwYXJhbXMuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBQYXJhbXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV01TLnByb3RvdHlwZS51cGRhdGVQYXJhbXMgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgIGFzc2lnbih0aGlzLnBhcmFtc18sIHBhcmFtcyk7XG4gICAgICAgIHRoaXMudXBkYXRlVjEzXygpO1xuICAgICAgICB0aGlzLmltYWdlXyA9IG51bGw7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdNUy5wcm90b3R5cGUudXBkYXRlVjEzXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnBhcmFtc19bJ1ZFUlNJT04nXSB8fCBERUZBVUxUX1dNU19WRVJTSU9OO1xuICAgICAgICB0aGlzLnYxM18gPSBjb21wYXJlVmVyc2lvbnModmVyc2lvbiwgJzEuMycpID49IDA7XG4gICAgfTtcbiAgICByZXR1cm4gSW1hZ2VXTVM7XG59KEltYWdlU291cmNlKSk7XG5leHBvcnQgZGVmYXVsdCBJbWFnZVdNUztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlV01TLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7IGVhc2VJbiB9IGZyb20gJy4vZWFzaW5nLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvVGlsZX0gZm9yIHRoZSB0aWxlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgdXJsIGFzIGFyZ3VtZW50cy4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH0pO1xuICogYGBgXG4gKiBGb3IgbW9yZSBmaW5lIGdyYWluZWQgY29udHJvbCwgdGhlIGxvYWQgZnVuY3Rpb24gY2FuIHVzZSBmZXRjaCBvciBYTUxIdHRwUmVxdWVzdCBhbmQgaW52b2x2ZVxuICogZXJyb3IgaGFuZGxpbmc6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCBUaWxlU3RhdGUgZnJvbSAnb2wvVGlsZVN0YXRlJztcbiAqXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAqICAgICB2YXIgZGF0YSA9IHRoaXMucmVzcG9uc2U7XG4gKiAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICogICAgICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZGF0YSk7XG4gKiAgICAgfSBlbHNlIHtcbiAqICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gKiAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuRVJST1IpO1xuICogICB9KTtcbiAqICAgeGhyLm9wZW4oJ0dFVCcsIHNyYyk7XG4gKiAgIHhoci5zZW5kKCk7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihUaWxlLCBzdHJpbmcpOiB2b2lkfSBMb2FkRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGV9IHNvdXJjZXMgdXNlIGEgZnVuY3Rpb24gb2YgdGhpcyB0eXBlIHRvIGdldFxuICogdGhlIHVybCB0aGF0IHByb3ZpZGVzIGEgdGlsZSBmb3IgYSBnaXZlbiB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL3RpbGVjb29yZH5UaWxlQ29vcmR9IGZvciB0aGUgdGlsZVxuICogY29vcmRpbmF0ZSwgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgcGl4ZWwgcmF0aW8gYW5kIGFcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzIGFyZ3VtZW50c1xuICogYW5kIHJldHVybnMgYSBge3N0cmluZ31gIHJlcHJlc2VudGluZyB0aGUgdGlsZSBVUkwsIG9yIHVuZGVmaW5lZCBpZiBubyB0aWxlXG4gKiBzaG91bGQgYmUgcmVxdWVzdGVkIGZvciB0aGUgcGFzc2VkIHRpbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkLCBudW1iZXIsXG4gKiAgICAgICAgICAgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IChzdHJpbmd8dW5kZWZpbmVkKX0gVXJsRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb249MjUwXSBBIGR1cmF0aW9uIGZvciB0aWxlIG9wYWNpdHlcbiAqIHRyYW5zaXRpb25zIGluIG1pbGxpc2Vjb25kcy4gQSBkdXJhdGlvbiBvZiAwIGRpc2FibGVzIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3IgdGlsZXMuXG4gKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgVGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGUodGlsZUNvb3JkLCBzdGF0ZSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNvb3JkID0gdGlsZUNvb3JkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBcImludGVyaW1cIiB0aWxlIGZvciB0aGlzIHRpbGUuIFRoZSBpbnRlcmltIHRpbGUgbWF5IGJlIHVzZWQgd2hpbGUgdGhpc1xuICAgICAgICAgKiBvbmUgaXMgbG9hZGluZywgZm9yIFwic21vb3RoXCIgdHJhbnNpdGlvbnMgd2hlbiBjaGFuZ2luZyBwYXJhbXMvZGltZW5zaW9uc1xuICAgICAgICAgKiBvbiB0aGUgc291cmNlLlxuICAgICAgICAgKiBAdHlwZSB7VGlsZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludGVyaW1UaWxlID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aWxlIGlzIGF2YWlsYWJsZSBhdCB0aGUgaGlnaGVzdCBwb3NzaWJsZSByZXNvbHV0aW9uLiBTdWJjbGFzc2VzIGNhblxuICAgICAgICAgKiBzZXQgdGhpcyB0byBgZmFsc2VgIGluaXRpYWxseS4gVGlsZSBsb2FkIGxpc3RlbmVycyB3aWxsIG5vdCBiZVxuICAgICAgICAgKiB1bnJlZ2lzdGVyZWQgYmVmb3JlIHRoaXMgaXMgc2V0IHRvIGB0cnVlYCBhbmQgYSBgI2NoYW5nZWQoKWAgaXMgY2FsbGVkLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhpZmkgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBrZXkgYXNzaWduZWQgdG8gdGhlIHRpbGUuIFRoaXMgaXMgdXNlZCBieSB0aGUgdGlsZSBzb3VyY2UgdG8gZGV0ZXJtaW5lXG4gICAgICAgICAqIGlmIHRoaXMgdGlsZSBjYW4gZWZmZWN0aXZlbHkgYmUgdXNlZCwgb3IgaWYgYSBuZXcgdGlsZSBzaG91bGQgYmUgY3JlYXRlZFxuICAgICAgICAgKiBhbmQgdGhpcyBvbmUgYmUgdXNlZCBhcyBhbiBpbnRlcmltIHRpbGUgZm9yIHRoaXMgbmV3IHRpbGUuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXkgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkdXJhdGlvbiBmb3IgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbi5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYW5zaXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNpdGlvbiA9PT0gdW5kZWZpbmVkID8gMjUwIDogb3B0aW9ucy50cmFuc2l0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogTG9va3VwIG9mIHN0YXJ0IHRpbWVzIGZvciByZW5kZXJpbmcgdHJhbnNpdGlvbnMuICBJZiB0aGUgc3RhcnQgdGltZSBpc1xuICAgICAgICAgKiBlcXVhbCB0byAtMSwgdGhlIHRyYW5zaXRpb24gaXMgY29tcGxldGUuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhbnNpdGlvblN0YXJ0c18gPSB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IHRoZSB0aWxlIGNhY2hlIHdoZW4gdGhlIHRpbGUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBjYWNoZSBkdWUgdG8gZXhwaXJ5XG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleSArICcvJyArIHRoaXMudGlsZUNvb3JkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbnRlcmltIHRpbGUgbW9zdCBzdWl0YWJsZSBmb3IgcmVuZGVyaW5nIHVzaW5nIHRoZSBjaGFpbiBvZiBpbnRlcmltXG4gICAgICogdGlsZXMuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlICBtb3N0IHJlY2VudCB0aWxlIHRoYXQgaGFzIGJlZW4gbG9hZGVkLCBpZiBub1xuICAgICAqIHN1Y2ggdGlsZSBleGlzdHMsIHRoZSBvcmlnaW5hbCB0aWxlIGlzIHJldHVybmVkLlxuICAgICAqIEByZXR1cm4geyFUaWxlfSBCZXN0IHRpbGUgZm9yIHJlbmRlcmluZy5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRJbnRlcmltVGlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmludGVyaW1UaWxlKSB7XG4gICAgICAgICAgICAvL2VtcHR5IGNoYWluXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuaW50ZXJpbVRpbGU7XG4gICAgICAgIC8vIGZpbmQgdGhlIGZpcnN0IGxvYWRlZCB0aWxlIGFuZCByZXR1cm4gaXQuIFNpbmNlIHRoZSBjaGFpbiBpcyBzb3J0ZWQgaW5cbiAgICAgICAgLy8gZGVjcmVhc2luZyBvcmRlciBvZiBjcmVhdGlvbiB0aW1lLCB0aGVyZSBpcyBubyBuZWVkIHRvIHNlYXJjaCB0aGUgcmVtYWluZGVyXG4gICAgICAgIC8vIG9mIHRoZSBsaXN0IChhbGwgdGhvc2UgdGlsZXMgY29ycmVzcG9uZCB0byBvbGRlciByZXF1ZXN0cyBhbmQgd2lsbCBiZVxuICAgICAgICAvLyBjbGVhbmVkIHVwIGJ5IHJlZnJlc2hJbnRlcmltQ2hhaW4pXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgICAgIC8vIFNob3cgdGlsZSBpbW1lZGlhdGVseSBpbnN0ZWFkIG9mIGZhZGluZyBpdCBpbiBhZnRlciBsb2FkaW5nLCBiZWNhdXNlXG4gICAgICAgICAgICAgICAgLy8gdGhlIGludGVyaW0gdGlsZSBpcyBpbiBwbGFjZSBhbHJlYWR5XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uXyA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aWxlID0gdGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgfSB3aGlsZSAodGlsZSk7XG4gICAgICAgIC8vIHdlIGNhbiBub3QgZmluZCBhIGJldHRlciB0aWxlXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR29lcyB0aHJvdWdoIHRoZSBjaGFpbiBvZiBpbnRlcmltIHRpbGVzIGFuZCBkaXNjYXJkcyBzZWN0aW9ucyBvZiB0aGUgY2hhaW5cbiAgICAgKiB0aGF0IGFyZSBubyBsb25nZXIgcmVsZXZhbnQuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUucmVmcmVzaEludGVyaW1DaGFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmludGVyaW1UaWxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGUgPSB0aGlzLmludGVyaW1UaWxlO1xuICAgICAgICB2YXIgcHJldiA9IC8qKiBAdHlwZSB7VGlsZX0gKi8gKHRoaXMpO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICAvL3dlIGhhdmUgYSBsb2FkZWQgdGlsZSwgd2UgY2FuIGRpc2NhcmQgdGhlIHJlc3Qgb2YgdGhlIGxpc3RcbiAgICAgICAgICAgICAgICAvL3dlIHdvdWxkIGNvdWxkIGFib3J0IGFueSBMT0FESU5HIHRpbGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUgKGkuZS4gYW55IExPQURJTkcgdGlsZSBmb2xsb3dpbmcgdGhpcyBlbnRyeSBpbiB0aGUgY2hhaW4pXG4gICAgICAgICAgICAgICAgdGlsZS5pbnRlcmltVGlsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICAgICAgICAvL2tlZXAgdGhpcyBMT0FESU5HIHRpbGUgYW55IGxvYWRlZCB0aWxlcyBsYXRlciBpbiB0aGUgY2hhaW4gYXJlXG4gICAgICAgICAgICAgICAgLy9vbGRlciB0aGFuIHRoaXMgdGlsZSwgc28gd2UncmUgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgIHByZXYgPSB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgLy90aGUgaGVhZCBvZiB0aGUgbGlzdCBpcyB0aGUgbW9zdCBjdXJyZW50IHRpbGUsIHdlIGRvbid0IG5lZWRcbiAgICAgICAgICAgICAgICAvL3RvIHN0YXJ0IGFueSBvdGhlciByZXF1ZXN0cyBmb3IgdGhpcyBjaGFpblxuICAgICAgICAgICAgICAgIHByZXYuaW50ZXJpbVRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aWxlID0gcHJldi5pbnRlcmltVGlsZTtcbiAgICAgICAgfSB3aGlsZSAodGlsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgY29vcmRpbmF0ZSBmb3IgdGhpcyB0aWxlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGhlIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ29vcmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBTdGF0ZS5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGlzIHRpbGUuIElmIHlvdSB3cml0ZSB5b3VyIG93biB7QGxpbmsgbW9kdWxlOm9sL1RpbGV+TG9hZEZ1bmN0aW9uIHRpbGVMb2FkRnVuY3Rpb259ICxcbiAgICAgKiBpdCBpcyBpbXBvcnRhbnQgdG8gc2V0IHRoZSBzdGF0ZSBjb3JyZWN0bHkgdG8ge0BsaW5rIG1vZHVsZTpvbC9UaWxlU3RhdGV+RVJST1J9XG4gICAgICogd2hlbiB0aGUgdGlsZSBjYW5ub3QgYmUgbG9hZGVkLiBPdGhlcndpc2UgdGhlIHRpbGUgY2Fubm90IGJlIHJlbW92ZWQgZnJvbVxuICAgICAqIHRoZSB0aWxlIHF1ZXVlIGFuZCB3aWxsIGJsb2NrIG90aGVyIHJlcXVlc3RzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUaWxlU3RhdGUuRVJST1IgJiYgdGhpcy5zdGF0ZSA+IHN0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpbGUgbG9hZCBzZXF1ZW5jZSB2aW9sYXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgaW1hZ2Ugb3IgcmV0cnkgaWYgbG9hZGluZyBwcmV2aW91c2x5IGZhaWxlZC5cbiAgICAgKiBMb2FkaW5nIGlzIHRha2VuIGNhcmUgb2YgYnkgdGhlIHRpbGUgcXVldWUsIGFuZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGlzXG4gICAgICogb25seSBuZWVkZWQgZm9yIHByZWxvYWRpbmcgb3IgZm9yIHJlbG9hZGluZyBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbHBoYSB2YWx1ZSBmb3IgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRoZSByZW5kZXIgZnJhbWUgdGltZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMS5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRBbHBoYSA9IGZ1bmN0aW9uIChpZCwgdGltZSkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFydCA9IHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdO1xuICAgICAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgICAgICBzdGFydCA9IHRpbWU7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXSA9IHN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbHRhID0gdGltZSAtIHN0YXJ0ICsgMTAwMCAvIDYwOyAvLyBhdm9pZCByZW5kZXJpbmcgYXQgMFxuICAgICAgICBpZiAoZGVsdGEgPj0gdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVhc2VJbihkZWx0YSAvIHRoaXMudHJhbnNpdGlvbl8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIGEgdGlsZSBpcyBpbiBhbiBhbHBoYSB0cmFuc2l0aW9uLiAgQSB0aWxlIGlzIGNvbnNpZGVyZWQgaW5cbiAgICAgKiB0cmFuc2l0aW9uIGlmIHRpbGUuZ2V0QWxwaGEoKSBoYXMgbm90IHlldCBiZWVuIGNhbGxlZCBvciBoYXMgYmVlbiBjYWxsZWRcbiAgICAgKiBhbmQgcmV0dXJuZWQgMS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSBpcyBpbiB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmluVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gIT09IC0xO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFyayBhIHRyYW5zaXRpb24gYXMgY29tcGxldGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZW5kVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gPSAtMTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGU7XG59KEV2ZW50VGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVRpbGVcbiAqL1xuaW1wb3J0IFRpbGUgZnJvbSAnLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgbGlzdGVuSW1hZ2UgfSBmcm9tICcuL0ltYWdlLmpzJztcbnZhciBJbWFnZVRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgSW1hZ2Ugc291cmNlIFVSSS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBUaWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW1hZ2VUaWxlKHRpbGVDb29yZCwgc3RhdGUsIHNyYywgY3Jvc3NPcmlnaW4sIHRpbGVMb2FkRnVuY3Rpb24sIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRpbGVDb29yZCwgc3RhdGUsIG9wdF9vcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jcm9zc09yaWdpbl8gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltYWdlIFVSSVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3JjXyA9IHNyYztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VfID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChjcm9zc09yaWdpbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgX3RoaXMuaW1hZ2VfLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/ZnVuY3Rpb24oKTp2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUxvYWRGdW5jdGlvbl8gPSB0aWxlTG9hZEZ1bmN0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgSFRNTCBpbWFnZSBlbGVtZW50IGZvciB0aGlzIHRpbGUgKG1heSBiZSBhIENhbnZhcywgSW1hZ2UsIG9yIFZpZGVvKS5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3JjXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBsb2FkaW5nIG9yIHJlYWQgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVSUk9SO1xuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gZ2V0QmxhbmtJbWFnZSgpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBzdWNjZXNzZnVsIGltYWdlIGxvYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUuaGFuZGxlSW1hZ2VMb2FkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGltYWdlID0gLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqLyAodGhpcy5pbWFnZV8pO1xuICAgICAgICBpZiAoaW1hZ2UubmF0dXJhbFdpZHRoICYmIGltYWdlLm5hdHVyYWxIZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLklETEU7XG4gICAgICAgICAgICB0aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3Jvc3NPcmlnaW5fICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FESU5HO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb25fKHRoaXMsIHRoaXMuc3JjXyk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IGxpc3RlbkltYWdlKHRoaXMuaW1hZ2VfLCB0aGlzLmhhbmRsZUltYWdlTG9hZF8uYmluZCh0aGlzKSwgdGhpcy5oYW5kbGVJbWFnZUVycm9yXy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51bmxpc3Rlbl8pIHtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVRpbGU7XG59KFRpbGUpKTtcbi8qKlxuICogR2V0IGEgMS1waXhlbCBibGFuayBpbWFnZS5cbiAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBCbGFuayBpbWFnZS5cbiAqL1xuZnVuY3Rpb24gZ2V0QmxhbmtJbWFnZSgpIHtcbiAgICB2YXIgY3R4ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLDAsMCwwKSc7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICAgIHJldHVybiBjdHguY2FudmFzO1xufVxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VUaWxlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9UaWxlXG4gKi9cbmltcG9ydCB7IEVSUk9SX1RIUkVTSE9MRCB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZSBmcm9tICcuLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCBUcmlhbmd1bGF0aW9uIGZyb20gJy4vVHJpYW5ndWxhdGlvbi5qcyc7XG5pbXBvcnQgeyBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uLCByZW5kZXIgYXMgcmVuZGVyUmVwcm9qZWN0ZWQsIH0gZnJvbSAnLi4vcmVwcm9qLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQgeyBnZXRBcmVhLCBnZXRJbnRlcnNlY3Rpb24gfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcikgOiBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IEZ1bmN0aW9uVHlwZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENsYXNzIGVuY2Fwc3VsYXRpbmcgc2luZ2xlIHJlcHJvamVjdGVkIHRpbGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZUltYWdlflRpbGVJbWFnZX0uXG4gKlxuICovXG52YXIgUmVwcm9qVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVwcm9qVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gc291cmNlVGlsZUdyaWQgU291cmNlIHRpbGUgZ3JpZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSB0YXJnZXRQcm9qIFRhcmdldCBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGFyZ2V0VGlsZUdyaWQgVGFyZ2V0IHRpbGUgZ3JpZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBDb29yZGluYXRlIG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gd3JhcHBlZFRpbGVDb29yZCBDb29yZGluYXRlIG9mIHRoZSB0aWxlIHdyYXBwZWQgaW4gWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIEd1dHRlciBvZiB0aGUgc291cmNlIHRpbGVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25UeXBlfSBnZXRUaWxlRnVuY3Rpb25cbiAgICAgKiAgICAgRnVuY3Rpb24gcmV0dXJuaW5nIHNvdXJjZSB0aWxlcyAoeiwgeCwgeSwgcGl4ZWxSYXRpbykuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZXJyb3JUaHJlc2hvbGQgQWNjZXB0YWJsZSByZXByb2plY3Rpb24gZXJyb3IgKGluIHB4KS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmVuZGVyRWRnZXMgUmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcy5cbiAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdF9jb250ZXh0T3B0aW9ucyBQcm9wZXJ0aWVzIHRvIHNldCBvbiB0aGUgY2FudmFzIGNvbnRleHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVwcm9qVGlsZShzb3VyY2VQcm9qLCBzb3VyY2VUaWxlR3JpZCwgdGFyZ2V0UHJvaiwgdGFyZ2V0VGlsZUdyaWQsIHRpbGVDb29yZCwgd3JhcHBlZFRpbGVDb29yZCwgcGl4ZWxSYXRpbywgZ3V0dGVyLCBnZXRUaWxlRnVuY3Rpb24sIG9wdF9lcnJvclRocmVzaG9sZCwgb3B0X3JlbmRlckVkZ2VzLCBvcHRfY29udGV4dE9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGlsZUNvb3JkLCBUaWxlU3RhdGUuSURMRSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyRWRnZXNfID0gb3B0X3JlbmRlckVkZ2VzICE9PSB1bmRlZmluZWQgPyBvcHRfcmVuZGVyRWRnZXMgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0T3B0aW9uc18gPSBvcHRfY29udGV4dE9wdGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmd1dHRlcl8gPSBndXR0ZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jYW52YXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc291cmNlVGlsZUdyaWRfID0gc291cmNlVGlsZUdyaWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldFRpbGVHcmlkXyA9IHRhcmdldFRpbGVHcmlkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy53cmFwcGVkVGlsZUNvb3JkXyA9IHdyYXBwZWRUaWxlQ29vcmQgPyB3cmFwcGVkVGlsZUNvb3JkIDogdGlsZUNvb3JkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc291cmNlVGlsZXNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVpfID0gMDtcbiAgICAgICAgdmFyIHRhcmdldEV4dGVudCA9IHRhcmdldFRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChfdGhpcy53cmFwcGVkVGlsZUNvb3JkXyk7XG4gICAgICAgIHZhciBtYXhUYXJnZXRFeHRlbnQgPSBfdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0RXh0ZW50KCk7XG4gICAgICAgIHZhciBtYXhTb3VyY2VFeHRlbnQgPSBfdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0RXh0ZW50KCk7XG4gICAgICAgIHZhciBsaW1pdGVkVGFyZ2V0RXh0ZW50ID0gbWF4VGFyZ2V0RXh0ZW50XG4gICAgICAgICAgICA/IGdldEludGVyc2VjdGlvbih0YXJnZXRFeHRlbnQsIG1heFRhcmdldEV4dGVudClcbiAgICAgICAgICAgIDogdGFyZ2V0RXh0ZW50O1xuICAgICAgICBpZiAoZ2V0QXJlYShsaW1pdGVkVGFyZ2V0RXh0ZW50KSA9PT0gMCkge1xuICAgICAgICAgICAgLy8gVGlsZSBpcyBjb21wbGV0ZWx5IG91dHNpZGUgcmFuZ2UgLT4gRU1QVFlcbiAgICAgICAgICAgIC8vIFRPRE86IGlzIGl0IGFjdHVhbGx5IGNvcnJlY3QgdGhhdCB0aGUgc291cmNlIGV2ZW4gY3JlYXRlcyB0aGUgdGlsZSA/XG4gICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc291cmNlUHJvakV4dGVudCA9IHNvdXJjZVByb2ouZ2V0RXh0ZW50KCk7XG4gICAgICAgIGlmIChzb3VyY2VQcm9qRXh0ZW50KSB7XG4gICAgICAgICAgICBpZiAoIW1heFNvdXJjZUV4dGVudCkge1xuICAgICAgICAgICAgICAgIG1heFNvdXJjZUV4dGVudCA9IHNvdXJjZVByb2pFeHRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXhTb3VyY2VFeHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24obWF4U291cmNlRXh0ZW50LCBzb3VyY2VQcm9qRXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFyZ2V0UmVzb2x1dGlvbiA9IHRhcmdldFRpbGVHcmlkLmdldFJlc29sdXRpb24oX3RoaXMud3JhcHBlZFRpbGVDb29yZF9bMF0pO1xuICAgICAgICB2YXIgc291cmNlUmVzb2x1dGlvbiA9IGNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgbGltaXRlZFRhcmdldEV4dGVudCwgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIGlmICghaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgfHwgc291cmNlUmVzb2x1dGlvbiA8PSAwKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkIHNvdXJjZVJlc29sdXRpb24gLT4gRU1QVFlcbiAgICAgICAgICAgIC8vIHByb2JhYmx5IGVkZ2VzIG9mIHRoZSBwcm9qZWN0aW9ucyB3aGVuIG5vIGV4dGVudCBpcyBkZWZpbmVkXG4gICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXJyb3JUaHJlc2hvbGRJblBpeGVscyA9IG9wdF9lcnJvclRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID8gb3B0X2Vycm9yVGhyZXNob2xkIDogRVJST1JfVEhSRVNIT0xEO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFpbXBvcnQoXCIuL1RyaWFuZ3VsYXRpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyaWFuZ3VsYXRpb25fID0gbmV3IFRyaWFuZ3VsYXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgbGltaXRlZFRhcmdldEV4dGVudCwgbWF4U291cmNlRXh0ZW50LCBzb3VyY2VSZXNvbHV0aW9uICogZXJyb3JUaHJlc2hvbGRJblBpeGVscywgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIGlmIChfdGhpcy50cmlhbmd1bGF0aW9uXy5nZXRUcmlhbmdsZXMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIG5vIHZhbGlkIHRyaWFuZ2xlcyAtPiBFTVBUWVxuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc291cmNlWl8gPSBzb3VyY2VUaWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbihzb3VyY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHNvdXJjZUV4dGVudCA9IF90aGlzLnRyaWFuZ3VsYXRpb25fLmNhbGN1bGF0ZVNvdXJjZUV4dGVudCgpO1xuICAgICAgICBpZiAobWF4U291cmNlRXh0ZW50KSB7XG4gICAgICAgICAgICBpZiAoc291cmNlUHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgICAgICAgICAgc291cmNlRXh0ZW50WzFdID0gY2xhbXAoc291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbMV0sIG1heFNvdXJjZUV4dGVudFszXSk7XG4gICAgICAgICAgICAgICAgc291cmNlRXh0ZW50WzNdID0gY2xhbXAoc291cmNlRXh0ZW50WzNdLCBtYXhTb3VyY2VFeHRlbnRbMV0sIG1heFNvdXJjZUV4dGVudFszXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VFeHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24oc291cmNlRXh0ZW50LCBtYXhTb3VyY2VFeHRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZ2V0QXJlYShzb3VyY2VFeHRlbnQpKSB7XG4gICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VSYW5nZSA9IHNvdXJjZVRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooc291cmNlRXh0ZW50LCBfdGhpcy5zb3VyY2VaXyk7XG4gICAgICAgICAgICBmb3IgKHZhciBzcmNYID0gc291cmNlUmFuZ2UubWluWDsgc3JjWCA8PSBzb3VyY2VSYW5nZS5tYXhYOyBzcmNYKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzcmNZID0gc291cmNlUmFuZ2UubWluWTsgc3JjWSA8PSBzb3VyY2VSYW5nZS5tYXhZOyBzcmNZKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbGUgPSBnZXRUaWxlRnVuY3Rpb24oX3RoaXMuc291cmNlWl8sIHNyY1gsIHNyY1ksIHBpeGVsUmF0aW8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc291cmNlVGlsZXNfLnB1c2godGlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMuc291cmNlVGlsZXNfLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBIVE1MIENhbnZhcyBlbGVtZW50IGZvciB0aGlzIHRpbGUuXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IENhbnZhcy5cbiAgICAgKi9cbiAgICBSZXByb2pUaWxlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUucmVwcm9qZWN0XyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNvdXJjZXMgPSBbXTtcbiAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbiAodGlsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICBpZiAodGlsZSAmJiB0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgICAgIHNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVudDogdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGUudGlsZUNvb3JkKSxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IHRpbGUuZ2V0SW1hZ2UoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18ubGVuZ3RoID0gMDtcbiAgICAgICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVSUk9SO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHogPSB0aGlzLndyYXBwZWRUaWxlQ29vcmRfWzBdO1xuICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRUaWxlU2l6ZSh6KTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHR5cGVvZiBzaXplID09PSAnbnVtYmVyJyA/IHNpemUgOiBzaXplWzBdO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHR5cGVvZiBzaXplID09PSAnbnVtYmVyJyA/IHNpemUgOiBzaXplWzFdO1xuICAgICAgICAgICAgdmFyIHRhcmdldFJlc29sdXRpb24gPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICAgICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRSZXNvbHV0aW9uKHRoaXMuc291cmNlWl8pO1xuICAgICAgICAgICAgdmFyIHRhcmdldEV4dGVudCA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFRpbGVDb29yZEV4dGVudCh0aGlzLndyYXBwZWRUaWxlQ29vcmRfKTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzXyA9IHJlbmRlclJlcHJvamVjdGVkKHdpZHRoLCBoZWlnaHQsIHRoaXMucGl4ZWxSYXRpb18sIHNvdXJjZVJlc29sdXRpb24sIHRoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpLCB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRFeHRlbnQsIHRoaXMudHJpYW5ndWxhdGlvbl8sIHNvdXJjZXMsIHRoaXMuZ3V0dGVyXywgdGhpcy5yZW5kZXJFZGdlc18sIHRoaXMuY29udGV4dE9wdGlvbnNfKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BRElORztcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICAgICAgdmFyIGxlZnRUb0xvYWRfMSA9IDA7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gW107XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVRpbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5JRExFIHx8IHN0YXRlID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRUb0xvYWRfMSsrO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTGlzdGVuS2V5XzEgPSBsaXN0ZW4odGlsZSwgRXZlbnRUeXBlLkNIQU5HRSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPT0gVGlsZVN0YXRlLkVNUFRZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5saXN0ZW5CeUtleShzb3VyY2VMaXN0ZW5LZXlfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdFRvTG9hZF8xLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnRUb0xvYWRfMSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVubGlzdGVuU291cmNlc18oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXByb2plY3RfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXy5wdXNoKHNvdXJjZUxpc3RlbktleV8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbiAodGlsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlLmxvYWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkXzEgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMucmVwcm9qZWN0Xy5iaW5kKHRoaXMpLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZXByb2pUaWxlLnByb3RvdHlwZS51bmxpc3RlblNvdXJjZXNfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcHJvalRpbGU7XG59KFRpbGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlcHJvalRpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHJ1Y3RzL0xSVUNhY2hlXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFbnRyeVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGtleV9cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBuZXdlclxuICogQHByb3BlcnR5IHtPYmplY3R9IG9sZGVyXG4gKiBAcHJvcGVydHkgeyp9IHZhbHVlX1xuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudHMgYSBMZWFzdC1SZWNlbnRseS1Vc2VkIGNhY2hlIHdoZXJlIHRoZSBrZXlzIGRvIG5vdCBjb25mbGljdCB3aXRoXG4gKiBPYmplY3QncyBwcm9wZXJ0aWVzIChlLmcuICdoYXNPd25Qcm9wZXJ0eScgaXMgbm90IGFsbG93ZWQgYXMgYSBrZXkpLiBFeHBpcmluZ1xuICogaXRlbXMgZnJvbSB0aGUgY2FjaGUgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSB1c2VyLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQHRlbXBsYXRlIFRcbiAqL1xudmFyIExSVUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2hpZ2hXYXRlck1hcmsgSGlnaCB3YXRlciBtYXJrLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExSVUNhY2hlKG9wdF9oaWdoV2F0ZXJNYXJrKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXNpcmVkIG1heCBjYWNoZSBzaXplIGFmdGVyIGV4cGlyZUNhY2hlKCkuIElmIHNldCB0byAwLCBubyBjYWNoZSBlbnRyaWVzXG4gICAgICAgICAqIHdpbGwgYmUgcHJ1bmVkIGF0IGFsbC5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGlnaFdhdGVyTWFyayA9XG4gICAgICAgICAgICBvcHRfaGlnaFdhdGVyTWFyayAhPT0gdW5kZWZpbmVkID8gb3B0X2hpZ2hXYXRlck1hcmsgOiAyMDQ4O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY291bnRfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRW50cnk+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbnRyaWVzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2xkZXN0XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0VudHJ5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hXYXRlck1hcmsgPiAwICYmIHRoaXMuZ2V0Q291bnQoKSA+IHRoaXMuaGlnaFdhdGVyTWFyaztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jb3VudF8gPSAwO1xuICAgICAgICB0aGlzLmVudHJpZXNfID0ge307XG4gICAgICAgIHRoaXMub2xkZXN0XyA9IG51bGw7XG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBrZXkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRyaWVzXy5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihULCBzdHJpbmcsIExSVUNhY2hlPFQ+KTogP30gZiBUaGUgZnVuY3Rpb25cbiAgICAgKiAgICAgdG8gY2FsbCBmb3IgZXZlcnkgZW50cnkgZnJvbSB0aGUgb2xkZXN0IHRvIHRoZSBuZXdlci4gVGhpcyBmdW5jdGlvbiB0YWtlc1xuICAgICAqICAgICAzIGFyZ3VtZW50cyAodGhlIGVudHJ5IHZhbHVlLCB0aGUgZW50cnkga2V5IGFuZCB0aGUgTFJVQ2FjaGUgb2JqZWN0KS5cbiAgICAgKiAgICAgVGhlIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5vbGRlc3RfO1xuICAgICAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgICAgICAgIGYoZW50cnkudmFsdWVfLCBlbnRyeS5rZXlfLCB0aGlzKTtcbiAgICAgICAgICAgIGVudHJ5ID0gZW50cnkubmV3ZXI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEBwYXJhbSB7Kj19IG9wdF9vcHRpb25zIE9wdGlvbnMgKHJlc2VydmVyZCBmb3Igc3ViY2xhc3NlcykuXG4gICAgICogQHJldHVybiB7VH0gVmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXksIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAgICAgYXNzZXJ0KGVudHJ5ICE9PSB1bmRlZmluZWQsIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgICAgIGlmIChlbnRyeSA9PT0gdGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVudHJ5ID09PSB0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovICh0aGlzLm9sZGVzdF8ubmV3ZXIpO1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfLm9sZGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgICAgICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICB9XG4gICAgICAgIGVudHJ5Lm5ld2VyID0gbnVsbDtcbiAgICAgICAgZW50cnkub2xkZXIgPSB0aGlzLm5ld2VzdF87XG4gICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IGVudHJ5O1xuICAgICAgICB0aGlzLm5ld2VzdF8gPSBlbnRyeTtcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbiBlbnRyeSBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBlbnRyeSBrZXkuXG4gICAgICogQHJldHVybiB7VH0gVGhlIHJlbW92ZWQgZW50cnkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5lbnRyaWVzX1trZXldO1xuICAgICAgICBhc3NlcnQoZW50cnkgIT09IHVuZGVmaW5lZCwgMTUpOyAvLyBUcmllZCB0byBnZXQgYSB2YWx1ZSBmb3IgYSBrZXkgdGhhdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY2FjaGVcbiAgICAgICAgaWYgKGVudHJ5ID09PSB0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5vbGRlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgICAgICAgICAgaWYgKHRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgICAgIHRoaXMub2xkZXN0Xy5vbGRlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgICAgICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5lbnRyaWVzX1trZXldO1xuICAgICAgICAtLXRoaXMuY291bnRfO1xuICAgICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvdW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEtleXMuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldEtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBrZXlzID0gbmV3IEFycmF5KHRoaXMuY291bnRfKTtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgZW50cnk7XG4gICAgICAgIGZvciAoZW50cnkgPSB0aGlzLm5ld2VzdF87IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm9sZGVyKSB7XG4gICAgICAgICAgICBrZXlzW2krK10gPSBlbnRyeS5rZXlfO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8VD59IFZhbHVlcy5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KHRoaXMuY291bnRfKTtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgZW50cnk7XG4gICAgICAgIGZvciAoZW50cnkgPSB0aGlzLm5ld2VzdF87IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm9sZGVyKSB7XG4gICAgICAgICAgICB2YWx1ZXNbaSsrXSA9IGVudHJ5LnZhbHVlXztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7VH0gTGFzdCB2YWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucGVla0xhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9sZGVzdF8udmFsdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBMYXN0IGtleS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucGVla0xhc3RLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9sZGVzdF8ua2V5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUga2V5IG9mIHRoZSBuZXdlc3QgaXRlbSBpbiB0aGUgY2FjaGUuICBUaHJvd3MgaWYgdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG5ld2VzdCBrZXkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtGaXJzdEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3ZXN0Xy5rZXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7VH0gdmFsdWUgVmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5vbGRlc3RfO1xuICAgICAgICBkZWxldGUgdGhpcy5lbnRyaWVzX1tlbnRyeS5rZXlfXTtcbiAgICAgICAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm5ld2VyKTtcbiAgICAgICAgaWYgKCF0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLS10aGlzLmNvdW50XztcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmdldChrZXkpOyAvLyB1cGRhdGUgYG5ld2VzdF9gXG4gICAgICAgIHRoaXMuZW50cmllc19ba2V5XS52YWx1ZV8gPSB2YWx1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIGFzc2VydCghKGtleSBpbiB0aGlzLmVudHJpZXNfKSwgMTYpOyAvLyBUcmllZCB0byBzZXQgYSB2YWx1ZSBmb3IgYSBrZXkgdGhhdCBpcyB1c2VkIGFscmVhZHlcbiAgICAgICAgdmFyIGVudHJ5ID0ge1xuICAgICAgICAgICAga2V5Xzoga2V5LFxuICAgICAgICAgICAgbmV3ZXI6IG51bGwsXG4gICAgICAgICAgICBvbGRlcjogdGhpcy5uZXdlc3RfLFxuICAgICAgICAgICAgdmFsdWVfOiB2YWx1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCF0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0XyA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXdlc3RfID0gZW50cnk7XG4gICAgICAgIHRoaXMuZW50cmllc19ba2V5XSA9IGVudHJ5O1xuICAgICAgICArK3RoaXMuY291bnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGEgbWF4aW11bSBudW1iZXIgb2YgZW50cmllcyBmb3IgdGhlIGNhY2hlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIENhY2hlIHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gc2l6ZTtcbiAgICB9O1xuICAgIHJldHVybiBMUlVDYWNoZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBMUlVDYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxSVUNhY2hlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlY29vcmRcbiAqL1xuLyoqXG4gKiBBbiBhcnJheSBvZiB0aHJlZSBudW1iZXJzIHJlcHJlc2VudGluZyB0aGUgbG9jYXRpb24gb2YgYSB0aWxlIGluIGEgdGlsZVxuICogZ3JpZC4gVGhlIG9yZGVyIGlzIGB6YCAoem9vbSBsZXZlbCksIGB4YCAoY29sdW1uKSwgYW5kIGB5YCAocm93KS5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBUaWxlQ29vcmRcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge1RpbGVDb29yZD19IG9wdF90aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7VGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZSh6LCB4LCB5LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgaWYgKG9wdF90aWxlQ29vcmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvcHRfdGlsZUNvb3JkWzBdID0gejtcbiAgICAgICAgb3B0X3RpbGVDb29yZFsxXSA9IHg7XG4gICAgICAgIG9wdF90aWxlQ29vcmRbMl0gPSB5O1xuICAgICAgICByZXR1cm4gb3B0X3RpbGVDb29yZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbeiwgeCwgeV07XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEtleVpYWSh6LCB4LCB5KSB7XG4gICAgcmV0dXJuIHogKyAnLycgKyB4ICsgJy8nICsgeTtcbn1cbi8qKlxuICogR2V0IHRoZSBrZXkgZm9yIGEgdGlsZSBjb29yZC5cbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGhlIHRpbGUgY29vcmQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEtleSh0aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gZ2V0S2V5WlhZKHRpbGVDb29yZFswXSwgdGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl0pO1xufVxuLyoqXG4gKiBHZXQgYSB0aWxlIGNvb3JkIGdpdmVuIGEga2V5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgdGlsZSBjb29yZCBrZXkuXG4gKiBAcmV0dXJuIHtUaWxlQ29vcmR9IFRoZSB0aWxlIGNvb3JkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUtleShrZXkpIHtcbiAgICByZXR1cm4ga2V5LnNwbGl0KCcvJykubWFwKE51bWJlcik7XG59XG4vKipcbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSGFzaC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc2godGlsZUNvb3JkKSB7XG4gICAgcmV0dXJuICh0aWxlQ29vcmRbMV0gPDwgdGlsZUNvb3JkWzBdKSArIHRpbGVDb29yZFsyXTtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0geyFpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRpbGUgY29vcmRpbmF0ZSBpcyB3aXRoaW4gZXh0ZW50IGFuZCB6b29tIGxldmVsIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aGluRXh0ZW50QW5kWih0aWxlQ29vcmQsIHRpbGVHcmlkKSB7XG4gICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgdmFyIHggPSB0aWxlQ29vcmRbMV07XG4gICAgdmFyIHkgPSB0aWxlQ29vcmRbMl07XG4gICAgaWYgKHRpbGVHcmlkLmdldE1pblpvb20oKSA+IHogfHwgeiA+IHRpbGVHcmlkLmdldE1heFpvb20oKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBleHRlbnQgPSB0aWxlR3JpZC5nZXRFeHRlbnQoKTtcbiAgICB2YXIgdGlsZVJhbmdlO1xuICAgIGlmICghZXh0ZW50KSB7XG4gICAgICAgIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgfVxuICAgIGlmICghdGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRpbGVSYW5nZS5jb250YWluc1hZKHgsIHkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbGVjb29yZC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlQ2FjaGVcbiAqL1xuaW1wb3J0IExSVUNhY2hlIGZyb20gJy4vc3RydWN0cy9MUlVDYWNoZS5qcyc7XG5pbXBvcnQgeyBmcm9tS2V5LCBnZXRLZXkgfSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG52YXIgVGlsZUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlQ2FjaGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGlsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlQ2FjaGUucHJvdG90eXBlLmV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKHVzZWRUaWxlcykge1xuICAgICAgICB3aGlsZSAodGhpcy5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICB2YXIgdGlsZSA9IHRoaXMucGVla0xhc3QoKTtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldEtleSgpIGluIHVzZWRUaWxlcykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3AoKS5yZWxlYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBydW5lIGFsbCB0aWxlcyBmcm9tIHRoZSBjYWNoZSB0aGF0IGRvbid0IGhhdmUgdGhlIHNhbWUgeiBhcyB0aGUgbmV3ZXN0IHRpbGUuXG4gICAgICovXG4gICAgVGlsZUNhY2hlLnByb3RvdHlwZS5wcnVuZUV4Y2VwdE5ld2VzdFogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmdldENvdW50KCkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIga2V5ID0gdGhpcy5wZWVrRmlyc3RLZXkoKTtcbiAgICAgICAgdmFyIHRpbGVDb29yZCA9IGZyb21LZXkoa2V5KTtcbiAgICAgICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodGlsZSkge1xuICAgICAgICAgICAgaWYgKHRpbGUudGlsZUNvb3JkWzBdICE9PSB6KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoZ2V0S2V5KHRpbGUudGlsZUNvb3JkKSk7XG4gICAgICAgICAgICAgICAgdGlsZS5yZWxlYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZUNhY2hlO1xufShMUlVDYWNoZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZUNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUNhY2hlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zaXplXG4gKi9cbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYSBzaXplOiBgW3dpZHRoLCBoZWlnaHRdYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBTaXplXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIGJ1ZmZlcmVkIHNpemUuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBudW0gVGhlIGFtb3VudCBieSB3aGljaCB0byBidWZmZXIuXG4gKiBAcGFyYW0ge1NpemU9fSBvcHRfc2l6ZSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIGJ1ZmZlcmVkIHNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXIoc2l6ZSwgbnVtLCBvcHRfc2l6ZSkge1xuICAgIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdF9zaXplID0gWzAsIDBdO1xuICAgIH1cbiAgICBvcHRfc2l6ZVswXSA9IHNpemVbMF0gKyAyICogbnVtO1xuICAgIG9wdF9zaXplWzFdID0gc2l6ZVsxXSArIDIgKiBudW07XG4gICAgcmV0dXJuIG9wdF9zaXplO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgc2l6ZSBoYXMgYSBwb3NpdGl2ZSBhcmVhLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFRoZSBzaXplIHRvIHRlc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2l6ZSBoYXMgYSBwb3NpdGl2ZSBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzQXJlYShzaXplKSB7XG4gICAgcmV0dXJuIHNpemVbMF0gPiAwICYmIHNpemVbMV0gPiAwO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc2l6ZSBzY2FsZWQgYnkgYSByYXRpby4gVGhlIHJlc3VsdCB3aWxsIGJlIGFuIGFycmF5IG9mIGludGVnZXJzLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gUmF0aW8uXG4gKiBAcGFyYW0ge1NpemU9fSBvcHRfc2l6ZSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIHNjYWxlZCBzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoc2l6ZSwgcmF0aW8sIG9wdF9zaXplKSB7XG4gICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb3B0X3NpemUgPSBbMCwgMF07XG4gICAgfVxuICAgIG9wdF9zaXplWzBdID0gKHNpemVbMF0gKiByYXRpbyArIDAuNSkgfCAwO1xuICAgIG9wdF9zaXplWzFdID0gKHNpemVbMV0gKiByYXRpbyArIDAuNSkgfCAwO1xuICAgIHJldHVybiBvcHRfc2l6ZTtcbn1cbi8qKlxuICogUmV0dXJucyBhbiBgU2l6ZWAgYXJyYXkgZm9yIHRoZSBwYXNzZWQgaW4gbnVtYmVyIChtZWFuaW5nOiBzcXVhcmUpIG9yXG4gKiBgU2l6ZWAgYXJyYXkuXG4gKiAobWVhbmluZzogbm9uLXNxdWFyZSksXG4gKiBAcGFyYW0ge251bWJlcnxTaXplfSBzaXplIFdpZHRoIGFuZCBoZWlnaHQuXG4gKiBAcGFyYW0ge1NpemU9fSBvcHRfc2l6ZSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gU2l6ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU2l6ZShzaXplLCBvcHRfc2l6ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNpemUpKSB7XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdF9zaXplID0gW3NpemUsIHNpemVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0X3NpemVbMF0gPSBzaXplO1xuICAgICAgICAgICAgb3B0X3NpemVbMV0gPSBzaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRfc2l6ZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaXplLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9UaWxlR3JpZFxuICovXG5pbXBvcnQgVGlsZVJhbmdlLCB7IGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlLCB9IGZyb20gJy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQgeyBERUZBVUxUX1RJTEVfU0laRSB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlLCBnZXRUb3BMZWZ0IH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZUNvb3JkIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGlzU29ydGVkLCBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IHRvU2l6ZSB9IGZyb20gJy4uL3NpemUuanMnO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gKi9cbnZhciB0bXBUaWxlQ29vcmQgPSBbMCwgMCwgMF07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBObyB0aWxlcyBvdXRzaWRlIHRoaXNcbiAqIGV4dGVudCB3aWxsIGJlIHJlcXVlc3RlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlfSBzb3VyY2VzLiBXaGVuIG5vIGBvcmlnaW5gIG9yXG4gKiBgb3JpZ2luc2AgYXJlIGNvbmZpZ3VyZWQsIHRoZSBgb3JpZ2luYCB3aWxsIGJlIHNldCB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcmlnaW5dIFRoZSB0aWxlIGdyaWQgb3JpZ2luLCBpLmUuIHdoZXJlIHRoZSBgeGBcbiAqIGFuZCBgeWAgYXhlcyBtZWV0IChgW3osIDAsIDBdYCkuIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgZG93bndhcmRzLiBJZiBub3RcbiAqIHNwZWNpZmllZCwgYGV4dGVudGAgb3IgYG9yaWdpbnNgIG11c3QgYmUgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IFtvcmlnaW5zXSBUaWxlIGdyaWQgb3JpZ2lucywgaS5lLiB3aGVyZVxuICogdGhlIGB4YCBhbmQgYHlgIGF4ZXMgbWVldCAoYFt6LCAwLCAwXWApLCBmb3IgZWFjaCB6b29tIGxldmVsLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiBvcmlnaW4uIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgZG93bndhcmRzLiBJZiBub3Qgc3BlY2lmaWVkLCBgZXh0ZW50YCBvclxuICogYG9yaWdpbmAgbXVzdCBiZSBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IHJlc29sdXRpb25zIFJlc29sdXRpb25zLiBUaGUgYXJyYXkgaW5kZXggb2YgZWFjaCByZXNvbHV0aW9uIG5lZWRzXG4gKiB0byBtYXRjaCB0aGUgem9vbSBsZXZlbC4gVGhpcyBtZWFucyB0aGF0IGV2ZW4gaWYgYSBgbWluWm9vbWAgaXMgY29uZmlndXJlZCwgdGhlIHJlc29sdXRpb25zXG4gKiBhcnJheSB3aWxsIGhhdmUgYSBsZW5ndGggb2YgYG1heFpvb20gKyAxYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3NpemVzXSBOdW1iZXIgb2YgdGlsZSByb3dzIGFuZCBjb2x1bW5zXG4gKiBvZiB0aGUgZ3JpZCBmb3IgZWFjaCB6b29tIGxldmVsLiBJZiBzcGVjaWZpZWQgdGhlIHZhbHVlc1xuICogZGVmaW5lIGVhY2ggem9vbSBsZXZlbCdzIGV4dGVudCB0b2dldGhlciB3aXRoIHRoZSBgb3JpZ2luYCBvciBgb3JpZ2luc2AuXG4gKiBBIGdyaWQgYGV4dGVudGAgY2FuIGJlIGNvbmZpZ3VyZWQgaW4gYWRkaXRpb24sIGFuZCB3aWxsIGZ1cnRoZXIgbGltaXQgdGhlIGV4dGVudFxuICogZm9yIHdoaWNoIHRpbGUgcmVxdWVzdHMgYXJlIG1hZGUgYnkgc291cmNlcy4gSWYgdGhlIGJvdHRvbS1sZWZ0IGNvcm5lciBvZlxuICogYW4gZXh0ZW50IGlzIHVzZWQgYXMgYG9yaWdpbmAgb3IgYG9yaWdpbnNgLCB0aGVuIHRoZSBgeWAgdmFsdWUgbXVzdCBiZVxuICogbmVnYXRpdmUgYmVjYXVzZSBPcGVuTGF5ZXJzIHRpbGUgY29vcmRpbmF0ZXMgdXNlIHRoZSB0b3AgbGVmdCBhcyB0aGUgb3JpZ2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemVdIFRpbGUgc2l6ZS5cbiAqIERlZmF1bHQgaXMgYFsyNTYsIDI1Nl1gLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbdGlsZVNpemVzXSBUaWxlIHNpemVzLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiB0aWxlIHNpemUuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc2V0dGluZyB0aGUgZ3JpZCBwYXR0ZXJuIGZvciBzb3VyY2VzIGFjY2Vzc2luZyB0aWxlZC1pbWFnZVxuICogc2VydmVycy5cbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVHcmlkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBUaWxlIGdyaWQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlR3JpZChvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblpvb20gPSBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc29sdXRpb25zXyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIGFzc2VydChpc1NvcnRlZCh0aGlzLnJlc29sdXRpb25zXywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBiIC0gYTtcbiAgICAgICAgfSwgdHJ1ZSksIDE3KTsgLy8gYHJlc29sdXRpb25zYCBtdXN0IGJlIHNvcnRlZCBpbiBkZXNjZW5kaW5nIG9yZGVyXG4gICAgICAgIC8vIGNoZWNrIGlmIHdlJ3ZlIGdvdCBhIGNvbnNpc3RlbnQgem9vbSBmYWN0b3IgYW5kIG9yaWdpblxuICAgICAgICB2YXIgem9vbUZhY3RvcjtcbiAgICAgICAgaWYgKCFvcHRpb25zLm9yaWdpbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF6b29tRmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXSAhPT0gem9vbUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuem9vbUZhY3Rvcl8gPSB6b29tRmFjdG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhab29tID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWdpbl8gPSBvcHRpb25zLm9yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcmlnaW4gOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWdpbnNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMub3JpZ2lucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbnNfID0gb3B0aW9ucy5vcmlnaW5zO1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMub3JpZ2luc18ubGVuZ3RoID09IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCwgMjApOyAvLyBOdW1iZXIgb2YgYG9yaWdpbnNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG4gICAgICAgIGlmIChleHRlbnQgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5vcmlnaW5fICYmICF0aGlzLm9yaWdpbnNfKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbl8gPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KCghdGhpcy5vcmlnaW5fICYmIHRoaXMub3JpZ2luc18pIHx8ICh0aGlzLm9yaWdpbl8gJiYgIXRoaXMub3JpZ2luc18pLCAxOCk7IC8vIEVpdGhlciBgb3JpZ2luYCBvciBgb3JpZ2luc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpbGVTaXplc18gPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucy50aWxlU2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy50aWxlU2l6ZXNfID0gb3B0aW9ucy50aWxlU2l6ZXM7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy50aWxlU2l6ZXNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDE5KTsgLy8gTnVtYmVyIG9mIGB0aWxlU2l6ZXNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpbGVTaXplXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRpbGVTaXplICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMudGlsZVNpemVcbiAgICAgICAgICAgICAgICA6ICF0aGlzLnRpbGVTaXplc19cbiAgICAgICAgICAgICAgICAgICAgPyBERUZBVUxUX1RJTEVfU0laRVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGFzc2VydCgoIXRoaXMudGlsZVNpemVfICYmIHRoaXMudGlsZVNpemVzXykgfHxcbiAgICAgICAgICAgICh0aGlzLnRpbGVTaXplXyAmJiAhdGhpcy50aWxlU2l6ZXNfKSwgMjIpOyAvLyBFaXRoZXIgYHRpbGVTaXplYCBvciBgdGlsZVNpemVzYCBtdXN0IGJlIGNvbmZpZ3VyZWQsIG5ldmVyIGJvdGhcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHRlbnRfID0gZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBleHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRtcFNpemVfID0gWzAsIDBdO1xuICAgICAgICBpZiAob3B0aW9ucy5zaXplcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IG9wdGlvbnMuc2l6ZXMubWFwKGZ1bmN0aW9uIChzaXplLCB6KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVSYW5nZSA9IG5ldyBUaWxlUmFuZ2UoTWF0aC5taW4oMCwgc2l6ZVswXSksIE1hdGgubWF4KHNpemVbMF0gLSAxLCAtMSksIE1hdGgubWluKDAsIHNpemVbMV0pLCBNYXRoLm1heChzaXplWzFdIC0gMSwgLTEpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZVJhbmdlO1xuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXh0ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVRpbGVSYW5nZXNfKGV4dGVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBhIGZ1bmN0aW9uIHdpdGggZWFjaCB0aWxlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gZXh0ZW50IGFuZCB6b29tIGxldmVsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQpOiB2b2lkfSBjYWxsYmFjayBGdW5jdGlvbiBjYWxsZWQgd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmZvckVhY2hUaWxlQ29vcmQgPSBmdW5jdGlvbiAoZXh0ZW50LCB6b29tLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgem9vbSk7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aWxlUmFuZ2UubWluWCwgaWkgPSB0aWxlUmFuZ2UubWF4WDsgaSA8PSBpaTsgKytpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gdGlsZVJhbmdlLm1pblksIGpqID0gdGlsZVJhbmdlLm1heFk7IGogPD0gamo7ICsraikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFt6b29tLCBpLCBqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBjYWxsYmFjayBDYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9leHRlbnQgVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbGxiYWNrIHN1Y2NlZWRlZC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIGNhbGxiYWNrLCBvcHRfdGlsZVJhbmdlLCBvcHRfZXh0ZW50KSB7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UsIHgsIHk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRFeHRlbnQgPSBudWxsO1xuICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXSAtIDE7XG4gICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3JfID09PSAyKSB7XG4gICAgICAgICAgICB4ID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICAgICAgeSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHogPj0gdGhpcy5taW5ab29tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHggPSBNYXRoLmZsb29yKHggLyAyKTtcbiAgICAgICAgICAgICAgICB5ID0gTWF0aC5mbG9vcih5IC8gMik7XG4gICAgICAgICAgICAgICAgdGlsZVJhbmdlID0gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UoeCwgeCwgeSwgeSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGlsZUNvb3JkRXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjayh6LCB0aWxlUmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAtLXo7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLCBpZiBpdCB3YXMgY29uZmlndXJlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNYXggem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW4gem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG9yaWdpbiBmb3IgdGhlIGdyaWQgYXQgdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gT3JpZ2luLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbnNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3pdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIHJlc29sdXRpb25zIGZvciB0aGUgdGlsZSBncmlkLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9leHRlbnQgVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF90aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgaWYgKHRpbGVDb29yZFswXSA8IHRoaXMubWF4Wm9vbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWluWCA9IHRpbGVDb29yZFsxXSAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIG1pblkgPSB0aWxlQ29vcmRbMl0gKiAyO1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtaW5YICsgMSwgbWluWSwgbWluWSArIDEsIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRpbGVDb29yZEV4dGVudCwgdGlsZUNvb3JkWzBdICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBmb3IgYSB0aWxlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUV4dGVudCA9IGZ1bmN0aW9uICh6LCB0aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHopO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgbWluWCA9IG9yaWdpblswXSArIHRpbGVSYW5nZS5taW5YICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WCA9IG9yaWdpblswXSArICh0aWxlUmFuZ2UubWF4WCArIDEpICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWluWSA9IG9yaWdpblsxXSArIHRpbGVSYW5nZS5taW5ZICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WSA9IG9yaWdpblsxXSArICh0aWxlUmFuZ2UubWF4WSArIDEpICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB0aWxlIHJhbmdlIGZvciB0aGUgZ2l2ZW4gZXh0ZW50IGFuZCBpbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgdGlsZSByYW5nZSBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFogPSBmdW5jdGlvbiAoZXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSB0bXBUaWxlQ29vcmQ7XG4gICAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhleHRlbnRbMF0sIGV4dGVudFszXSwgeiwgZmFsc2UsIHRpbGVDb29yZCk7XG4gICAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFsyXSwgZXh0ZW50WzFdLCB6LCB0cnVlLCB0aWxlQ29vcmQpO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgdGlsZUNvb3JkWzFdLCBtaW5ZLCB0aWxlQ29vcmRbMl0sIG9wdF90aWxlUmFuZ2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGlsZSBjZW50ZXIuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENlbnRlciA9IGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb3JpZ2luWzBdICsgKHRpbGVDb29yZFsxXSArIDAuNSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb24sXG4gICAgICAgICAgICBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMC41KSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbixcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIGEgdGlsZSBjb29yZGluYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9leHRlbnQgVGVtcG9yYXJ5IGV4dGVudCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRXh0ZW50ID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgb3B0X2V4dGVudCkge1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4odGlsZUNvb3JkWzBdKTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24odGlsZUNvb3JkWzBdKTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUodGlsZUNvb3JkWzBdKSwgdGhpcy50bXBTaXplXyk7XG4gICAgICAgIHZhciBtaW5YID0gb3JpZ2luWzBdICsgdGlsZUNvb3JkWzFdICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWluWSA9IG9yaWdpblsxXSAtICh0aWxlQ29vcmRbMl0gKyAxKSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG1heFggPSBtaW5YICsgdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WSA9IG1pblkgKyB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBjb29yZGluYXRlIGZvciB0aGUgZ2l2ZW4gbWFwIGNvb3JkaW5hdGUgYW5kIHJlc29sdXRpb24uICBUaGlzXG4gICAgICogbWV0aG9kIGNvbnNpZGVycyB0aGF0IGNvb3JkaW5hdGVzIHRoYXQgaW50ZXJzZWN0IHRpbGUgYm91bmRhcmllcyBzaG91bGQgYmVcbiAgICAgKiBhc3NpZ25lZCB0aGUgaGlnaGVyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCByZXNvbHV0aW9uLCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8oY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgcmVzb2x1dGlvbiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgY2FsbGVkIGZvciByZXNvbHV0aW9ucyB0aGF0IGNvcnJlc3BvbmRcbiAgICAgKiB0byBhbiBpbnRlZ2VyIHpvb20gbGV2ZWwuICBJbnN0ZWFkIGNhbGwgdGhlIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFpfYCBtZXRob2QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24gKGZvciBhIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWwpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICAgICAqICAgICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gICAgICogICAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkPX0gb3B0X3RpbGVDb29yZCBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8gPSBmdW5jdGlvbiAoeCwgeSwgcmVzb2x1dGlvbiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICAgICAgICB2YXIgeiA9IHRoaXMuZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzY2FsZSA9IHJlc29sdXRpb24gLyB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgYWRqdXN0WCA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgYWRqdXN0WSA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgeEZyb21PcmlnaW4gPSBNYXRoLmZsb29yKCh4IC0gb3JpZ2luWzBdKSAvIHJlc29sdXRpb24gKyBhZGp1c3RYKTtcbiAgICAgICAgdmFyIHlGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigob3JpZ2luWzFdIC0geSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WSk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRYID0gKHNjYWxlICogeEZyb21PcmlnaW4pIC8gdGlsZVNpemVbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gKHNjYWxlICogeUZyb21PcmlnaW4pIC8gdGlsZVNpemVbMV07XG4gICAgICAgIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gTWF0aC5jZWlsKHRpbGVDb29yZFgpIC0gMTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBNYXRoLmNlaWwodGlsZUNvb3JkWSkgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCk7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbHRob3VnaCB0aGVyZSBpcyByZXBldGl0aW9uIGJldHdlZW4gdGhpcyBtZXRob2QgYW5kIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fYCxcbiAgICAgKiB0aGV5IHNob3VsZCBoYXZlIHNlcGFyYXRlIGltcGxlbWVudGF0aW9ucy4gIFRoaXMgbWV0aG9kIGlzIGZvciBpbnRlZ2VyIHpvb21cbiAgICAgKiBsZXZlbHMuICBUaGUgb3RoZXIgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmb3IgcmVzb2x1dGlvbnMgY29ycmVzcG9uZGluZ1xuICAgICAqIHRvIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IE1hcCB4IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgTWFwIHkgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gICAgICogICAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAgICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyA9IGZ1bmN0aW9uICh4LCB5LCB6LCByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgdmFyIGFkanVzdFggPSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5ID8gMC41IDogMDtcbiAgICAgICAgdmFyIGFkanVzdFkgPSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5ID8gMC41IDogMDtcbiAgICAgICAgdmFyIHhGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigoeCAtIG9yaWdpblswXSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WCk7XG4gICAgICAgIHZhciB5RnJvbU9yaWdpbiA9IE1hdGguZmxvb3IoKG9yaWdpblsxXSAtIHkpIC8gcmVzb2x1dGlvbiArIGFkanVzdFkpO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWCA9IHhGcm9tT3JpZ2luIC8gdGlsZVNpemVbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0geUZyb21PcmlnaW4gLyB0aWxlU2l6ZVsxXTtcbiAgICAgICAgaWYgKHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kpIHtcbiAgICAgICAgICAgIHRpbGVDb29yZFggPSBNYXRoLmNlaWwodGlsZUNvb3JkWCkgLSAxO1xuICAgICAgICAgICAgdGlsZUNvb3JkWSA9IE1hdGguY2VpbCh0aWxlQ29vcmRZKSAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gTWF0aC5mbG9vcih0aWxlQ29vcmRYKTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBNYXRoLmZsb29yKHRpbGVDb29yZFkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCh6LCB0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCBvcHRfdGlsZUNvb3JkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHRpbGUgY29vcmRpbmF0ZSBnaXZlbiBhIG1hcCBjb29yZGluYXRlIGFuZCB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCB6LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgeiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSByZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc19bdGlsZUNvb3JkWzBdXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBzaXplIGZvciBhIHpvb20gbGV2ZWwuIFRoZSB0eXBlIG9mIHRoZSByZXR1cm4gdmFsdWUgbWF0Y2hlcyB0aGVcbiAgICAgKiBgdGlsZVNpemVgIG9yIGB0aWxlU2l6ZXNgIHRoYXQgdGhlIHRpbGUgZ3JpZCB3YXMgY29uZmlndXJlZCB3aXRoLiBUbyBhbHdheXNcbiAgICAgKiBnZXQgYW4gYGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZWAsIHJ1biB0aGUgcmVzdWx0IHRocm91Z2ggYGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZS50b1NpemUoKWAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBUaWxlIHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlU2l6ZSA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIGlmICh0aGlzLnRpbGVTaXplXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNpemVfO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNpemVzX1t6XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gRXh0ZW50IHRpbGUgcmFuZ2UgZm9yIHRoZSBzcGVjaWZpZWQgem9vbSBsZXZlbC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIGlmICghdGhpcy5mdWxsVGlsZVJhbmdlc18pIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnVsbFRpbGVSYW5nZXNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2RpcmVjdGlvbiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgKiAgICAgSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdFxuICAgICAqICAgICBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIERlZmF1bHQgaXMgMC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFouXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRaRm9yUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciB6ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24gfHwgMCk7XG4gICAgICAgIHJldHVybiBjbGFtcCh6LCB0aGlzLm1pblpvb20sIHRoaXMubWF4Wm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5jYWxjdWxhdGVUaWxlUmFuZ2VzXyA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aDtcbiAgICAgICAgdmFyIGZ1bGxUaWxlUmFuZ2VzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIHogPSB0aGlzLm1pblpvb207IHogPCBsZW5ndGg7ICsreikge1xuICAgICAgICAgICAgZnVsbFRpbGVSYW5nZXNbel0gPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IGZ1bGxUaWxlUmFuZ2VzO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVHcmlkO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVHcmlkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUdyaWQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVncmlkL2NvbW1vblxuICovXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSB6b29tIGZvciBkZWZhdWx0IHRpbGUgZ3JpZHMuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfTUFYX1pPT00gPSA0Mjtcbi8qKlxuICogRGVmYXVsdCB0aWxlIHNpemUuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfVElMRV9TSVpFID0gMjU2O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZFxuICovXG5pbXBvcnQgQ29ybmVyIGZyb20gJy4vZXh0ZW50L0Nvcm5lci5qcyc7XG5pbXBvcnQgVGlsZUdyaWQgZnJvbSAnLi90aWxlZ3JpZC9UaWxlR3JpZC5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IERFRkFVTFRfTUFYX1pPT00sIERFRkFVTFRfVElMRV9TSVpFIH0gZnJvbSAnLi90aWxlZ3JpZC9jb21tb24uanMnO1xuaW1wb3J0IHsgTUVURVJTX1BFUl9VTklULCBnZXQgYXMgZ2V0UHJvamVjdGlvbiB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBjb250YWluc0Nvb3JkaW5hdGUsIGNyZWF0ZU9yVXBkYXRlLCBnZXRDb3JuZXIsIGdldEhlaWdodCwgZ2V0V2lkdGgsIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgdG9TaXplIH0gZnJvbSAnLi9zaXplLmpzJztcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IERlZmF1bHQgdGlsZSBncmlkIGZvciB0aGVcbiAqIHBhc3NlZCBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRpbGVHcmlkID0gcHJvamVjdGlvbi5nZXREZWZhdWx0VGlsZUdyaWQoKTtcbiAgICBpZiAoIXRpbGVHcmlkKSB7XG4gICAgICAgIHRpbGVHcmlkID0gY3JlYXRlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgcHJvamVjdGlvbi5zZXREZWZhdWx0VGlsZUdyaWQodGlsZUdyaWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGlsZUdyaWQ7XG59XG4vKipcbiAqIEBwYXJhbSB7VGlsZUdyaWR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKHRpbGVHcmlkLCB0aWxlQ29vcmQsIHByb2plY3Rpb24pIHtcbiAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICB2YXIgY2VudGVyID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGVDb29yZCk7XG4gICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBpZiAoIWNvbnRhaW5zQ29vcmRpbmF0ZShwcm9qZWN0aW9uRXh0ZW50LCBjZW50ZXIpKSB7XG4gICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgIHZhciB3b3JsZHNBd2F5ID0gTWF0aC5jZWlsKChwcm9qZWN0aW9uRXh0ZW50WzBdIC0gY2VudGVyWzBdKSAvIHdvcmxkV2lkdGgpO1xuICAgICAgICBjZW50ZXJbMF0gKz0gd29ybGRXaWR0aCAqIHdvcmxkc0F3YXk7XG4gICAgICAgIHJldHVybiB0aWxlR3JpZC5nZXRUaWxlQ29vcmRGb3JDb29yZEFuZFooY2VudGVyLCB6KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0aWxlQ29vcmQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heFpvb20gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZT19IG9wdF90aWxlU2l6ZSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQvQ29ybmVyLmpzXCIpLmRlZmF1bHQ9fSBvcHRfY29ybmVyIEV4dGVudCBjb3JuZXIgKGRlZmF1bHQgaXMgYCd0b3AtbGVmdCdgKS5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZUdyaWQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb3JFeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplLCBvcHRfY29ybmVyKSB7XG4gICAgdmFyIGNvcm5lciA9IG9wdF9jb3JuZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9jb3JuZXIgOiBDb3JuZXIuVE9QX0xFRlQ7XG4gICAgdmFyIHJlc29sdXRpb25zID0gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSk7XG4gICAgcmV0dXJuIG5ldyBUaWxlR3JpZCh7XG4gICAgICAgIGV4dGVudDogZXh0ZW50LFxuICAgICAgICBvcmlnaW46IGdldENvcm5lcihleHRlbnQsIGNvcm5lciksXG4gICAgICAgIHJlc29sdXRpb25zOiByZXNvbHV0aW9ucyxcbiAgICAgICAgdGlsZVNpemU6IG9wdF90aWxlU2l6ZSxcbiAgICB9KTtcbn1cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gWFlaT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudCBmb3IgdGhlIHRpbGUgZ3JpZC4gVGhlIG9yaWdpbiBmb3IgYW4gWFlaIHRpbGUgZ3JpZCBpcyB0aGVcbiAqIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgZXh0ZW50LiBJZiBgbWF4UmVzb2x1dGlvbmAgaXMgbm90IHByb3ZpZGVkIHRoZSB6ZXJvIGxldmVsIG9mIHRoZSBncmlkIGlzIGRlZmluZWQgYnkgdGhlIHJlc29sdXRpb25cbiAqIGF0IHdoaWNoIG9uZSB0aWxlIGZpdHMgaW4gdGhlIHByb3ZpZGVkIGV4dGVudC4gSWYgbm90IHByb3ZpZGVkLCB0aGUgZXh0ZW50IG9mIHRoZSBFUFNHOjM4NTcgcHJvamVjdGlvbiBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBSZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIE1heGltdW0gem9vbS4gVGhlIGRlZmF1bHQgaXMgYDQyYC4gVGhpcyBkZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgbGV2ZWxzXG4gKiBpbiB0aGUgZ3JpZCBzZXQuIEZvciBleGFtcGxlLCBhIGBtYXhab29tYCBvZiAyMSBtZWFucyB0aGVyZSBhcmUgMjIgbGV2ZWxzIGluIHRoZSBncmlkIHNldC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBNaW5pbXVtIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplPVsyNTYsIDI1Nl1dIFRpbGUgc2l6ZSBpbiBwaXhlbHMuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIHRpbGUgZ3JpZCB3aXRoIGEgc3RhbmRhcmQgWFlaIHRpbGluZyBzY2hlbWUuXG4gKiBAcGFyYW0ge1hZWk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBUaWxlIGdyaWQgb3B0aW9ucy5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZSBncmlkIGluc3RhbmNlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWFlaKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIHh5ek9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZXh0ZW50ID0geHl6T3B0aW9ucy5leHRlbnQgfHwgZ2V0UHJvamVjdGlvbignRVBTRzozODU3JykuZ2V0RXh0ZW50KCk7XG4gICAgdmFyIGdyaWRPcHRpb25zID0ge1xuICAgICAgICBleHRlbnQ6IGV4dGVudCxcbiAgICAgICAgbWluWm9vbTogeHl6T3B0aW9ucy5taW5ab29tLFxuICAgICAgICB0aWxlU2l6ZTogeHl6T3B0aW9ucy50aWxlU2l6ZSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zRnJvbUV4dGVudChleHRlbnQsIHh5ek9wdGlvbnMubWF4Wm9vbSwgeHl6T3B0aW9ucy50aWxlU2l6ZSwgeHl6T3B0aW9ucy5tYXhSZXNvbHV0aW9uKSxcbiAgICB9O1xuICAgIHJldHVybiBuZXcgVGlsZUdyaWQoZ3JpZE9wdGlvbnMpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSByZXNvbHV0aW9ucyBhcnJheSBmcm9tIGFuIGV4dGVudC4gIEEgem9vbSBmYWN0b3Igb2YgMiBpcyBhc3N1bWVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9tYXhab29tIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfdGlsZVNpemUgVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9tYXhSZXNvbHV0aW9uIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEByZXR1cm4geyFBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucyBhcnJheS5cbiAqL1xuZnVuY3Rpb24gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X21heFJlc29sdXRpb24pIHtcbiAgICB2YXIgbWF4Wm9vbSA9IG9wdF9tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRfbWF4Wm9vbSA6IERFRkFVTFRfTUFYX1pPT007XG4gICAgdmFyIGhlaWdodCA9IGdldEhlaWdodChleHRlbnQpO1xuICAgIHZhciB3aWR0aCA9IGdldFdpZHRoKGV4dGVudCk7XG4gICAgdmFyIHRpbGVTaXplID0gdG9TaXplKG9wdF90aWxlU2l6ZSAhPT0gdW5kZWZpbmVkID8gb3B0X3RpbGVTaXplIDogREVGQVVMVF9USUxFX1NJWkUpO1xuICAgIHZhciBtYXhSZXNvbHV0aW9uID0gb3B0X21heFJlc29sdXRpb24gPiAwXG4gICAgICAgID8gb3B0X21heFJlc29sdXRpb25cbiAgICAgICAgOiBNYXRoLm1heCh3aWR0aCAvIHRpbGVTaXplWzBdLCBoZWlnaHQgLyB0aWxlU2l6ZVsxXSk7XG4gICAgdmFyIGxlbmd0aCA9IG1heFpvb20gKyAxO1xuICAgIHZhciByZXNvbHV0aW9ucyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIHogPSAwOyB6IDwgbGVuZ3RoOyArK3opIHtcbiAgICAgICAgcmVzb2x1dGlvbnNbel0gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coMiwgeik7XG4gICAgfVxuICAgIHJldHVybiByZXNvbHV0aW9ucztcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heFpvb20gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZT19IG9wdF90aWxlU2l6ZSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQvQ29ybmVyLmpzXCIpLmRlZmF1bHQ9fSBvcHRfY29ybmVyIEV4dGVudCBjb3JuZXIgKGRlZmF1bHQgaXMgYCd0b3AtbGVmdCdgKS5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZUdyaWQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24sIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgICB2YXIgZXh0ZW50ID0gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgcmV0dXJuIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIHRpbGUgZ3JpZCBleHRlbnQgZnJvbSBhIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBoYXMgYW5cbiAqIGV4dGVudCwgaXQgaXMgdXNlZC4gIElmIG5vdCwgYSBnbG9iYWwgZXh0ZW50IGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgcHJvamVjdGlvbiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgaWYgKCFleHRlbnQpIHtcbiAgICAgICAgdmFyIGhhbGYgPSAoMTgwICogTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdKSAvIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZSgtaGFsZiwgLWhhbGYsIGhhbGYsIGhhbGYpO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWdyaWQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgU291cmNlIGZyb20gJy4vU291cmNlLmpzJztcbmltcG9ydCBUaWxlQ2FjaGUgZnJvbSAnLi4vVGlsZUNhY2hlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBlcXVpdmFsZW50IH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRLZXlaWFksIHdpdGhpbkV4dGVudEFuZFogfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHsgZ2V0Rm9yUHJvamVjdGlvbiBhcyBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24sIHdyYXBYLCB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbmltcG9ydCB7IHNjYWxlIGFzIHNjYWxlU2l6ZSwgdG9TaXplIH0gZnJvbSAnLi4vc2l6ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekRpcmVjdGlvbj0wXVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVTb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZVRpbGUgc291cmNlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVNvdXJjZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9wYXF1ZV8gPSBvcHRpb25zLm9wYXF1ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFxdWUgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlUGl4ZWxSYXRpb18gPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVHcmlkIDogbnVsbDtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gWzI1NiwgMjU2XTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gb3B0aW9ucy50aWxlR3JpZDtcbiAgICAgICAgaWYgKHRpbGVHcmlkKSB7XG4gICAgICAgICAgICB0b1NpemUodGlsZUdyaWQuZ2V0VGlsZVNpemUodGlsZUdyaWQuZ2V0TWluWm9vbSgpKSwgdGlsZVNpemUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDYWNoZSA9IG5ldyBUaWxlQ2FjaGUob3B0aW9ucy5jYWNoZVNpemUgfHwgMCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBTaXplID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleV8gPSBvcHRpb25zLmtleSB8fCAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuT3B0aW9uc31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVPcHRpb25zID0geyB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24gfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHpEaXJlY3Rpb24gaGludCwgcmVhZCBieSB0aGUgcmVuZGVyZXIuIEluZGljYXRlcyB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAgICAgICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXdzIHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAgICAgKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICAgICAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy56RGlyZWN0aW9uID0gb3B0aW9ucy56RGlyZWN0aW9uID8gb3B0aW9ucy56RGlyZWN0aW9uIDogMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh1c2VkVGlsZXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdCk6KGJvb2xlYW58dm9pZCl9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2hcbiAgICAgKiAgICAgbG9hZGVkIHRpbGUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZVxuICAgICAqICAgICBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBjb3ZlcmVkIHdpdGggbG9hZGVkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmZvckVhY2hMb2FkZWRUaWxlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHosIHRpbGVSYW5nZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKCF0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY292ZXJlZCA9IHRydWU7XG4gICAgICAgIHZhciB0aWxlLCB0aWxlQ29vcmRLZXksIGxvYWRlZDtcbiAgICAgICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICAgICAgICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkID0gdGlsZS5nZXRTdGF0ZSgpID09PSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSBjYWxsYmFjayh0aWxlKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY292ZXJlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBrZXkgZm9yIGFsbCB0aWxlcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSB0byBiZSB1c2VkIGFzIHRoZSBrZXkgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBmb3IgdGlsZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnNldEtleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMua2V5XyAhPT0ga2V5KSB7XG4gICAgICAgICAgICB0aGlzLmtleV8gPSBrZXk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRPcGFxdWUgPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGFxdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gUmVzb2x1dGlvbnMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkLmdldFJlc29sdXRpb25zKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgZ3JpZCBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMudGlsZUdyaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzUHJvaiAmJiAhZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgcGl4ZWwgcmF0aW8gZm9yIHRoaXMgc291cmNlLiBTdWJjbGFzc2VzIG1heSBvdmVycmlkZSB0aGlzXG4gICAgICogbWV0aG9kLCB3aGljaCBpcyBtZWFudCB0byByZXR1cm4gYSBzdXBwb3J0ZWQgcGl4ZWwgcmF0aW8gdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHByb3ZpZGVkIGBwaXhlbFJhdGlvYCBhcyBjbG9zZSBhcyBwb3NzaWJsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcGl4ZWwgcmF0aW8uXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZVBpeGVsUmF0aW8gPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlUGl4ZWxSYXRpb187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlUGl4ZWxTaXplID0gZnVuY3Rpb24gKHosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHZhciB0aWxlUGl4ZWxSYXRpbyA9IHRoaXMuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplKTtcbiAgICAgICAgaWYgKHRpbGVQaXhlbFJhdGlvID09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aWxlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzY2FsZVNpemUodGlsZVNpemUsIHRpbGVQaXhlbFJhdGlvLCB0aGlzLnRtcFNpemUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdGlsZSBjb29yZGluYXRlIHdyYXBwZWQgYXJvdW5kIHRoZSB4LWF4aXMuIFdoZW4gdGhlIHRpbGUgY29vcmRpbmF0ZVxuICAgICAqIGlzIG91dHNpZGUgdGhlIHJlc29sdXRpb24gYW5kIGV4dGVudCByYW5nZSBvZiB0aGUgdGlsZSBncmlkLCBgbnVsbGAgd2lsbCBiZVxuICAgICAqIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0PX0gb3B0X3Byb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUgdG8gYmUgcGFzc2VkIHRvIHRoZSB0aWxlVXJsRnVuY3Rpb24gb3JcbiAgICAgKiAgICAgbnVsbCBpZiBubyB0aWxlIFVSTCBzaG91bGQgYmUgY3JlYXRlZCBmb3IgdGhlIHBhc3NlZCBgdGlsZUNvb3JkYC5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBvcHRfcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IG9wdF9wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfcHJvamVjdGlvbiA6IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0V3JhcFgoKSAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgICAgICAgIHRpbGVDb29yZCA9IHdyYXBYKHRpbGVHcmlkLCB0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpID8gdGlsZUNvb3JkIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgY2FjaGVkIHRpbGVzIGZyb20gdGhlIHNvdXJjZS4gVGhlIG5leHQgcmVuZGVyIGN5Y2xlIHdpbGwgZmV0Y2ggbmV3IHRpbGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICB9O1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbmNyZWFzZXMgdGhlIGNhY2hlIHNpemUgaWYgbmVlZGVkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVDb3VudCBNaW5pbXVtIG51bWJlciBvZiB0aWxlcyBuZWVkZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnVwZGF0ZUNhY2hlU2l6ZSA9IGZ1bmN0aW9uICh0aWxlQ291bnQsIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRpbGVDb3VudCA+IHRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgICAgICAgICB0aWxlQ2FjaGUuaGlnaFdhdGVyTWFyayA9IHRpbGVDb3VudDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFya3MgYSB0aWxlIGNvb3JkIGFzIGJlaW5nIHVzZWQsIHdpdGhvdXQgdHJpZ2dlcmluZyBhIGxvYWQuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnVzZVRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcHJvamVjdGlvbikgeyB9O1xuICAgIHJldHVybiBUaWxlU291cmNlO1xufShTb3VyY2UpKTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX5UaWxlU291cmNlfSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG52YXIgVGlsZVNvdXJjZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlU291cmNlRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaGUgdGlsZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpbGUgcmVsYXRlZCB0byB0aGUgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGUgPSB0aWxlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBUaWxlU291cmNlRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgeyBUaWxlU291cmNlRXZlbnQgfTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVTb3VyY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxldXJsZnVuY3Rpb25cbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBoYXNoIGFzIHRpbGVDb29yZEhhc2ggfSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBUZW1wbGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCB0aWxlR3JpZCkge1xuICAgIHZhciB6UmVnRXggPSAvXFx7elxcfS9nO1xuICAgIHZhciB4UmVnRXggPSAvXFx7eFxcfS9nO1xuICAgIHZhciB5UmVnRXggPSAvXFx7eVxcfS9nO1xuICAgIHZhciBkYXNoWVJlZ0V4ID0gL1xcey15XFx9L2c7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoelJlZ0V4LCB0aWxlQ29vcmRbMF0udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSh4UmVnRXgsIHRpbGVDb29yZFsxXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKHlSZWdFeCwgdGlsZUNvb3JkWzJdLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoZGFzaFlSZWdFeCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KHJhbmdlLCA1NSk7IC8vIFRoZSB7LXl9IHBsYWNlaG9sZGVyIHJlcXVpcmVzIGEgdGlsZSBncmlkIHdpdGggZXh0ZW50XG4gICAgICAgICAgICAgICAgdmFyIHkgPSByYW5nZS5nZXRIZWlnaHQoKSAtIHRpbGVDb29yZFsyXSAtIDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdGVtcGxhdGVzIFRlbXBsYXRlcy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRlbXBsYXRlcyh0ZW1wbGF0ZXMsIHRpbGVHcmlkKSB7XG4gICAgdmFyIGxlbiA9IHRlbXBsYXRlcy5sZW5ndGg7XG4gICAgdmFyIHRpbGVVcmxGdW5jdGlvbnMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHRpbGVVcmxGdW5jdGlvbnNbaV0gPSBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGVzW2ldLCB0aWxlR3JpZCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyh0aWxlVXJsRnVuY3Rpb25zKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb24+fSB0aWxlVXJsRnVuY3Rpb25zIFRpbGUgVVJMIEZ1bmN0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyh0aWxlVXJsRnVuY3Rpb25zKSB7XG4gICAgaWYgKHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0aWxlVXJsRnVuY3Rpb25zWzBdO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aWxlQ29vcmQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgaCA9IHRpbGVDb29yZEhhc2godGlsZUNvb3JkKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IG1vZHVsbyhoLCB0aWxlVXJsRnVuY3Rpb25zLmxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gdGlsZVVybEZ1bmN0aW9uc1tpbmRleF0odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bGxUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBVUkwuXG4gKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBcnJheSBvZiB1cmxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVXJsKHVybCkge1xuICAgIHZhciB1cmxzID0gW107XG4gICAgdmFyIG1hdGNoID0gL1xceyhbYS16XSktKFthLXpdKVxcfS8uZXhlYyh1cmwpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgICAvLyBjaGFyIHJhbmdlXG4gICAgICAgIHZhciBzdGFydENoYXJDb2RlID0gbWF0Y2hbMV0uY2hhckNvZGVBdCgwKTtcbiAgICAgICAgdmFyIHN0b3BDaGFyQ29kZSA9IG1hdGNoWzJdLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHZhciBjaGFyQ29kZSA9IHZvaWQgMDtcbiAgICAgICAgZm9yIChjaGFyQ29kZSA9IHN0YXJ0Q2hhckNvZGU7IGNoYXJDb2RlIDw9IHN0b3BDaGFyQ29kZTsgKytjaGFyQ29kZSkge1xuICAgICAgICAgICAgdXJscy5wdXNoKHVybC5yZXBsYWNlKG1hdGNoWzBdLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmxzO1xuICAgIH1cbiAgICBtYXRjaCA9IC9cXHsoXFxkKyktKFxcZCspXFx9Ly5leGVjKHVybCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIC8vIG51bWJlciByYW5nZVxuICAgICAgICB2YXIgc3RvcF8xID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7IGkgPD0gc3RvcF8xOyBpKyspIHtcbiAgICAgICAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgaS50b1N0cmluZygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybHM7XG4gICAgfVxuICAgIHVybHMucHVzaCh1cmwpO1xuICAgIHJldHVybiB1cmxzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZXVybGZ1bmN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9VcmxUaWxlXG4gKi9cbmltcG9ydCBUaWxlRXZlbnRUeXBlIGZyb20gJy4vVGlsZUV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVNvdXJjZSwgeyBUaWxlU291cmNlRXZlbnQgfSBmcm9tICcuL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgY3JlYXRlRnJvbVRlbXBsYXRlcywgZXhwYW5kVXJsIH0gZnJvbSAnLi4vdGlsZXVybGZ1bmN0aW9uLmpzJztcbmltcG9ydCB7IGdldEtleVpYWSB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi91dGlsLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gW3N0YXRlXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBbdGlsZVVybEZ1bmN0aW9uXVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6RGlyZWN0aW9uPTBdXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgdGlsZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkIG92ZXIgaHR0cC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICovXG52YXIgVXJsVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVXJsVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFVybFRpbGUob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgICAgICAgIHRpbGVHcmlkOiBvcHRpb25zLnRpbGVHcmlkLFxuICAgICAgICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGtleTogb3B0aW9ucy5rZXksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fID1cbiAgICAgICAgICAgIF90aGlzLnRpbGVVcmxGdW5jdGlvbiA9PT0gVXJsVGlsZS5wcm90b3R5cGUudGlsZVVybEZ1bmN0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTG9hZEZ1bmN0aW9uID0gb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uO1xuICAgICAgICBpZiAob3B0aW9ucy50aWxlVXJsRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIF90aGlzLnRpbGVVcmxGdW5jdGlvbiA9IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLmJpbmQoX3RoaXMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8c3RyaW5nPnxudWxsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXJscyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLnVybHMpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFVybHMob3B0aW9ucy51cmxzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnVybCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0VXJsKG9wdGlvbnMudXJsKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVMb2FkaW5nS2V5c18gPSB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBUaWxlTG9hZEZ1bmN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmdldFRpbGVMb2FkRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVMb2FkRnVuY3Rpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgVVJMIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZVVybEZ1bmN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmdldFRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVVybEZ1bmN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBVUkxzIHVzZWQgZm9yIHRoaXMgc291cmNlLlxuICAgICAqIFdoZW4gYSB0aWxlVXJsRnVuY3Rpb24gaXMgdXNlZCBpbnN0ZWFkIG9mIHVybCBvciB1cmxzLFxuICAgICAqIG51bGwgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPnxudWxsfSBVUkxzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRVcmxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cmxzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRpbGUgY2hhbmdlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aWxlKTtcbiAgICAgICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgIGlmICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIHR5cGUgPSBUaWxlRXZlbnRUeXBlLlRJTEVMT0FEU1RBUlQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodWlkIGluIHRoaXMudGlsZUxvYWRpbmdLZXlzXykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdO1xuICAgICAgICAgICAgdHlwZSA9XG4gICAgICAgICAgICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUlxuICAgICAgICAgICAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFUlJPUlxuICAgICAgICAgICAgICAgICAgICA6IHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFTkRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVMb2FkRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRpbGUgVVJMIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSB0aWxlVXJsRnVuY3Rpb24gVGlsZSBVUkwgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBrZXkgT3B0aW9uYWwgbmV3IHRpbGUga2V5IGZvciB0aGUgc291cmNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZVVybEZ1bmN0aW9uLCBrZXkpIHtcbiAgICAgICAgdGhpcy50aWxlVXJsRnVuY3Rpb24gPSB0aWxlVXJsRnVuY3Rpb247XG4gICAgICAgIHRoaXMudGlsZUNhY2hlLnBydW5lRXhjZXB0TmV3ZXN0WigpO1xuICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0S2V5KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBVUkwgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJsID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB2YXIgdXJscyA9IGV4cGFuZFVybCh1cmwpO1xuICAgICAgICB0aGlzLnVybHMgPSB1cmxzO1xuICAgICAgICB0aGlzLnNldFVybHModXJscyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIFVSTHMgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHVybHMgVVJMcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJscyA9IGZ1bmN0aW9uICh1cmxzKSB7XG4gICAgICAgIHRoaXMudXJscyA9IHVybHM7XG4gICAgICAgIHZhciBrZXkgPSB1cmxzLmpvaW4oJ1xcbicpO1xuICAgICAgICBpZiAodGhpcy5nZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VGlsZVVybEZ1bmN0aW9uKGNyZWF0ZUZyb21UZW1wbGF0ZXModXJscywgdGhpcy50aWxlR3JpZCksIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnVzZVRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSkge1xuICAgICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBVcmxUaWxlO1xufShUaWxlU291cmNlKSk7XG5leHBvcnQgZGVmYXVsdCBVcmxUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VXJsVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSB0aWxlIHN0YXJ0cyBsb2FkaW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2Fkc3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRUxPQURTVEFSVDogJ3RpbGVsb2Fkc3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgdGlsZSBmaW5pc2hlcyBsb2FkaW5nLCBlaXRoZXIgd2hlbiBpdHMgZGF0YSBpcyBsb2FkZWQsXG4gICAgICogb3Igd2hlbiBsb2FkaW5nIHdhcyBhYm9ydGVkIGJlY2F1c2UgdGhlIHRpbGUgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BREVORDogJ3RpbGVsb2FkZW5kJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgaWYgdGlsZSBsb2FkaW5nIHJlc3VsdHMgaW4gYW4gZXJyb3IuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRlcnJvclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BREVSUk9SOiAndGlsZWxvYWRlcnJvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUV2ZW50VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZUltYWdlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VUaWxlIGZyb20gJy4uL0ltYWdlVGlsZS5qcyc7XG5pbXBvcnQgUmVwcm9qVGlsZSBmcm9tICcuLi9yZXByb2ovVGlsZS5qcyc7XG5pbXBvcnQgVGlsZUNhY2hlIGZyb20gJy4uL1RpbGVDYWNoZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVXJsVGlsZSBmcm9tICcuL1VybFRpbGUuanMnO1xuaW1wb3J0IHsgRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gfSBmcm9tICcuLi9yZXByb2ovY29tbW9uLmpzJztcbmltcG9ydCB7IElNQUdFX1NNT09USElOR19ESVNBQkxFRCB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCB7IGVxdWl2YWxlbnQsIGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRLZXksIGdldEtleVpYWSB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBnZXRGb3JQcm9qZWN0aW9uIGFzIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBJbml0aWFsIHRpbGUgY2FjaGUgc2l6ZS4gV2lsbCBhdXRvLWdyb3cgdG8gaG9sZCBhdCBsZWFzdCB0aGUgbnVtYmVyIG9mIHRpbGVzIGluIHRoZSB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiAgTm90ZSB0aGF0XG4gKiB5b3UgbXVzdCBwcm92aWRlIGEgYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW1hZ2VTbW9vdGhpbmc9dHJ1ZV0gRW5hYmxlIGltYWdlIHNtb290aGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gW3N0YXRlXSBTb3VyY2Ugc3RhdGUuXG4gKiBAcHJvcGVydHkge3R5cGVvZiBpbXBvcnQoXCIuLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gW3RpbGVDbGFzc10gQ2xhc3MgdXNlZCB0byBpbnN0YW50aWF0ZSBpbWFnZSB0aWxlcy5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9JbWFnZVRpbGV+SW1hZ2VUaWxlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlIGdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBbdGlsZUxvYWRGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gbG9hZCBhIHRpbGUgZ2l2ZW4gYSBVUkwuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogZnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAqICAgaW1hZ2VUaWxlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogfTtcbiAqIGBgYFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpbz0xXSBUaGUgcGl4ZWwgcmF0aW8gdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRpbGVcbiAqIHNlcnZpY2UgYWR2ZXJ0aXplcyAyNTZweCBieSAyNTZweCB0aWxlcyBidXQgYWN0dWFsbHkgc2VuZHMgNTEycHhcbiAqIGJ5IDUxMnB4IGltYWdlcyAoZm9yIHJldGluYS9oaWRwaSBkZXZpY2VzKSB0aGVuIGB0aWxlUGl4ZWxSYXRpb2BcbiAqIHNob3VsZCBiZSBzZXQgdG8gYDJgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBbdGlsZVVybEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBnZXQgdGlsZSBVUkwgZ2l2ZW4gYSB0aWxlIGNvb3JkaW5hdGUgYW5kIHRoZSBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVSTCB0ZW1wbGF0ZS4gTXVzdCBpbmNsdWRlIGB7eH1gLCBge3l9YCBvciBgey15fWAsIGFuZCBge3p9YCBwbGFjZWhvbGRlcnMuXG4gKiBBIGB7Py0/fWAgdGVtcGxhdGUgcGF0dGVybiwgZm9yIGV4YW1wbGUgYHN1YmRvbWFpbnthLWZ9LmRvbWFpbi5jb21gLCBtYXkgYmVcbiAqIHVzZWQgaW5zdGVhZCBvZiBkZWZpbmluZyBlYWNoIG9uZSBzZXBhcmF0ZWx5IGluIHRoZSBgdXJsc2Agb3B0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc10gQW4gYXJyYXkgb2YgVVJMIHRlbXBsYXRlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS4gVGhlIGRlZmF1bHQsIGlzIHRvXG4gKiByZXF1ZXN0IG91dC1vZi1ib3VuZHMgdGlsZXMgZnJvbSB0aGUgc2VydmVyLiBXaGVuIHNldCB0byBgZmFsc2VgLCBvbmx5IG9uZVxuICogd29ybGQgd2lsbCBiZSByZW5kZXJlZC4gV2hlbiBzZXQgdG8gYHRydWVgLCB0aWxlcyB3aWxsIGJlIHJlcXVlc3RlZCBmb3Igb25lXG4gKiB3b3JsZCBvbmx5LCBidXQgdGhleSB3aWxsIGJlIHdyYXBwZWQgaG9yaXpvbnRhbGx5IHRvIHJlbmRlciBtdWx0aXBsZSB3b3JsZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gT3B0aW9uYWwgdGlsZSBrZXkgZm9yIHByb3BlciBjYWNoZSBmZXRjaGluZ1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6RGlyZWN0aW9uPTBdIEluZGljYXRlIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXcgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVJbWFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUltYWdlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IU9wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVJbWFnZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICAgICAgdGlsZUdyaWQ6IG9wdGlvbnMudGlsZUdyaWQsXG4gICAgICAgICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb25cbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvblxuICAgICAgICAgICAgICAgIDogZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICAgICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHRpbGVVcmxGdW5jdGlvbjogb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24sXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICAgICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHs/c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3Jvc3NPcmlnaW4gPVxuICAgICAgICAgICAgb3B0aW9ucy5jcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jcm9zc09yaWdpbiA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHt0eXBlb2YgSW1hZ2VUaWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNsYXNzID1cbiAgICAgICAgICAgIG9wdGlvbnMudGlsZUNsYXNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVDbGFzcyA6IEltYWdlVGlsZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBUaWxlQ2FjaGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyA9IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHRPcHRpb25zXyA9XG4gICAgICAgICAgICBvcHRpb25zLmltYWdlU21vb3RoaW5nID09PSBmYWxzZSA/IElNQUdFX1NNT09USElOR19ESVNBQkxFRCA6IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2tleV0uY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHVzZWRUaWxlcykge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmV4cGlyZUNhY2hlLmNhbGwodGhpcywgcHJvamVjdGlvbiwgdXNlZFRpbGVzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXNlZFRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuZXhwaXJlQ2FjaGUodGhpcy50aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2lkXTtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH0gQ29udGV4dCBvcHRpb25zLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0Q29udGV4dE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHRPcHRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldEd1dHRlckZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpICYmXG4gICAgICAgICAgICBwcm9qZWN0aW9uICYmXG4gICAgICAgICAgICAhZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R3V0dGVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0R3V0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUga2V5IHRvIGJlIHVzZWQgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGtleSBmb3IgYWxsIHRpbGVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChfc3VwZXIucHJvdG90eXBlLmdldEtleS5jYWxsKHRoaXMpICtcbiAgICAgICAgICAgICh0aGlzLmNvbnRleHRPcHRpb25zXyA/ICdcXG4nICsgSlNPTi5zdHJpbmdpZnkodGhpcy5jb250ZXh0T3B0aW9uc18pIDogJycpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBPcGFxdWUuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRPcGFxdWUgPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpICYmXG4gICAgICAgICAgICBwcm9qZWN0aW9uICYmXG4gICAgICAgICAgICAhZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldE9wYXF1ZS5jYWxsKHRoaXMsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbi5jYWxsKHRoaXMsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aGlzUHJvaiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAodGhpcy50aWxlR3JpZCAmJiAoIXRoaXNQcm9qIHx8IGVxdWl2YWxlbnQodGhpc1Byb2osIHByb2plY3Rpb24pKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgcHJvaktleSA9IGdldFVpZChwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmICghKHByb2pLZXkgaW4gdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV0gPSBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH0gVGlsZSBjYWNoZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW3Byb2pLZXldID0gbmV3IFRpbGVDYWNoZSh0aGlzLnRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgc2V0IG9uIHRoZSB0aWxlLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmNyZWF0ZVRpbGVfID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSkge1xuICAgICAgICB2YXIgdGlsZUNvb3JkID0gW3osIHgsIHldO1xuICAgICAgICB2YXIgdXJsVGlsZUNvb3JkID0gdGhpcy5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHRpbGVVcmwgPSB1cmxUaWxlQ29vcmRcbiAgICAgICAgICAgID8gdGhpcy50aWxlVXJsRnVuY3Rpb24odXJsVGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciB0aWxlID0gbmV3IHRoaXMudGlsZUNsYXNzKHRpbGVDb29yZCwgdGlsZVVybCAhPT0gdW5kZWZpbmVkID8gVGlsZVN0YXRlLklETEUgOiBUaWxlU3RhdGUuRU1QVFksIHRpbGVVcmwgIT09IHVuZGVmaW5lZCA/IHRpbGVVcmwgOiAnJywgdGhpcy5jcm9zc09yaWdpbiwgdGhpcy50aWxlTG9hZEZ1bmN0aW9uLCB0aGlzLnRpbGVPcHRpb25zKTtcbiAgICAgICAgdGlsZS5rZXkgPSBrZXk7XG4gICAgICAgIHRpbGUuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVRpbGVDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHNvdXJjZVByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB8fFxuICAgICAgICAgICAgIXNvdXJjZVByb2plY3Rpb24gfHxcbiAgICAgICAgICAgICFwcm9qZWN0aW9uIHx8XG4gICAgICAgICAgICBlcXVpdmFsZW50KHNvdXJjZVByb2plY3Rpb24sIHByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlSW50ZXJuYWwoeiwgeCwgeSwgcGl4ZWxSYXRpbywgc291cmNlUHJvamVjdGlvbiB8fCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgICAgICAgICB2YXIgdGlsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciB0aWxlQ29vcmRLZXkgPSBnZXRLZXkodGlsZUNvb3JkKTtcbiAgICAgICAgICAgIGlmIChjYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGlsZSA9IGNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAodGlsZSAmJiB0aWxlLmtleSA9PSBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VUaWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHNvdXJjZVByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRUaWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkVGlsZUNvb3JkID0gdGhpcy5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3VGlsZSA9IG5ldyBSZXByb2pUaWxlKHNvdXJjZVByb2plY3Rpb24sIHNvdXJjZVRpbGVHcmlkLCBwcm9qZWN0aW9uLCB0YXJnZXRUaWxlR3JpZCwgdGlsZUNvb3JkLCB3cmFwcGVkVGlsZUNvb3JkLCB0aGlzLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pLCB0aGlzLmdldEd1dHRlcigpLCBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlSW50ZXJuYWwoeiwgeCwgeSwgcGl4ZWxSYXRpbywgc291cmNlUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXywgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18sIHRoaXMuY29udGV4dE9wdGlvbnNfKTtcbiAgICAgICAgICAgICAgICBuZXdUaWxlLmtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdUaWxlLmludGVyaW1UaWxlID0gdGlsZTtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnJlcGxhY2UodGlsZUNvb3JkS2V5LCBuZXdUaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldCh0aWxlQ29vcmRLZXksIG5ld1RpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGVJbnRlcm5hbCA9IGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciB0aWxlID0gbnVsbDtcbiAgICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KCk7XG4gICAgICAgIGlmICghdGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcbiAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlLnNldCh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZSA9IHRoaXMudGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgICAgICAgICAgaWYgKHRpbGUua2V5ICE9IGtleSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBzb3VyY2UncyBwYXJhbXMgY2hhbmdlZC4gSWYgdGhlIHRpbGUgaGFzIGFuIGludGVyaW0gdGlsZSBhbmQgaWYgd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gdXNlIGl0IHRoZW4gd2UgdXNlIGl0LiBPdGhlcndpc2Ugd2UgY3JlYXRlIGEgbmV3IHRpbGUuICBJbiBib3RoXG4gICAgICAgICAgICAgICAgLy8gY2FzZXMgd2UgYXR0ZW1wdCB0byBhc3NpZ24gYW4gaW50ZXJpbSB0aWxlIHRvIHRoZSBuZXcgdGlsZS5cbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJpbVRpbGUgPSB0aWxlO1xuICAgICAgICAgICAgICAgIHRpbGUgPSB0aGlzLmNyZWF0ZVRpbGVfKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSk7XG4gICAgICAgICAgICAgICAgLy9tYWtlIHRoZSBuZXcgdGlsZSB0aGUgaGVhZCBvZiB0aGUgbGlzdCxcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJpbVRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgICAgICAvL3RoZSBvbGQgdGlsZSBoYXNuJ3QgYmVndW4gbG9hZGluZyB5ZXQsIGFuZCBpcyBub3cgb3V0ZGF0ZWQsIHNvIHdlIGNhbiBzaW1wbHkgZGlzY2FyZCBpdFxuICAgICAgICAgICAgICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gaW50ZXJpbVRpbGUuaW50ZXJpbVRpbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gaW50ZXJpbVRpbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRpbGUucmVmcmVzaEludGVyaW1DaGFpbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlLnJlcGxhY2UodGlsZUNvb3JkS2V5LCB0aWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgd2hldGhlciB0byByZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzIG9yIG5vdCAodXN1YWxseSBmb3IgZGVidWdnaW5nKS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlbmRlciBSZW5kZXIgdGhlIGVkZ2VzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLnNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzID0gZnVuY3Rpb24gKHJlbmRlcikge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIHx8XG4gICAgICAgICAgICB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyA9PSByZW5kZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyA9IHJlbmRlcjtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0aWxlIGdyaWQgdG8gdXNlIHdoZW4gcmVwcm9qZWN0aW5nIHRoZSB0aWxlcyB0byB0aGUgZ2l2ZW5cbiAgICAgKiBwcm9qZWN0aW9uIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgdGlsZSBncmlkIGZvciB0aGUgcHJvamVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHRoZSBkZWZhdWx0IHRpbGUgZ3JpZCBjYW5ub3QgYmUgY3JlYXRlZFxuICAgICAqIChlLmcuIHByb2plY3Rpb24gaGFzIG5vIGV4dGVudCBkZWZpbmVkKSBvclxuICAgICAqIGZvciBvcHRpbWl6YXRpb24gcmVhc29ucyAoY3VzdG9tIHRpbGUgc2l6ZSwgcmVzb2x1dGlvbnMsIC4uLikuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVncmlkIFRpbGUgZ3JpZCB0byB1c2UgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLnNldFRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uLCB0aWxlZ3JpZCkge1xuICAgICAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHZhciBwcm9qID0gZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChwcm9qKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvaik7XG4gICAgICAgICAgICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV0gPSB0aWxlZ3JpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUaWxlSW1hZ2U7XG59KFVybFRpbGUpKTtcbi8qKlxuICogQHBhcmFtIHtJbWFnZVRpbGV9IGltYWdlVGlsZSBJbWFnZSB0aWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTb3VyY2UuXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRUaWxlTG9hZEZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gICAgLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChpbWFnZVRpbGUuZ2V0SW1hZ2UoKSkuc3JjID0gc3JjO1xufVxuZXhwb3J0IGRlZmF1bHQgVGlsZUltYWdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUltYWdlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZVdNU1xuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCB7IERFRkFVTFRfV01TX1ZFUlNJT04gfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgVGlsZUltYWdlIGZyb20gJy4vVGlsZUltYWdlLmpzJztcbmltcG9ydCBXTVNTZXJ2ZXJUeXBlIGZyb20gJy4vV01TU2VydmVyVHlwZS5qcyc7XG5pbXBvcnQgeyBhcHBlbmRQYXJhbXMgfSBmcm9tICcuLi91cmkuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgYnVmZmVyLCBjcmVhdGVFbXB0eSB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBidWZmZXIgYXMgYnVmZmVyU2l6ZSwgc2NhbGUgYXMgc2NhbGVTaXplLCB0b1NpemUgfSBmcm9tICcuLi9zaXplLmpzJztcbmltcG9ydCB7IGNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24gfSBmcm9tICcuLi9yZXByb2ouanMnO1xuaW1wb3J0IHsgY29tcGFyZVZlcnNpb25zIH0gZnJvbSAnLi4vc3RyaW5nLmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uLCB0cmFuc2Zvcm0sIHRyYW5zZm9ybUV4dGVudCB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQgeyBoYXNoIGFzIHRpbGVDb29yZEhhc2ggfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIEluaXRpYWwgdGlsZSBjYWNoZSBzaXplLiBXaWxsIGF1dG8tZ3JvdyB0byBob2xkIGF0IGxlYXN0IHRoZSBudW1iZXIgb2YgdGlsZXMgaW4gdGhlIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbWFnZVNtb290aGluZz10cnVlXSBFbmFibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCo+fSBwYXJhbXMgV01TIHJlcXVlc3QgcGFyYW1ldGVycy5cbiAqIEF0IGxlYXN0IGEgYExBWUVSU2AgcGFyYW0gaXMgcmVxdWlyZWQuIGBTVFlMRVNgIGlzXG4gKiBgJydgIGJ5IGRlZmF1bHQuIGBWRVJTSU9OYCBpcyBgMS4zLjBgIGJ5IGRlZmF1bHQuIGBXSURUSGAsIGBIRUlHSFRgLCBgQkJPWGBcbiAqIGFuZCBgQ1JTYCAoYFNSU2AgZm9yIFdNUyB2ZXJzaW9uIDwgMS4zLjApIHdpbGwgYmUgc2V0IGR5bmFtaWNhbGx5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtndXR0ZXI9MF1cbiAqIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgZ3V0dGVyIGFyb3VuZCBpbWFnZSB0aWxlcyB0byBpZ25vcmUuIEJ5IHNldHRpbmdcbiAqIHRoaXMgcHJvcGVydHkgdG8gYSBub24temVybyB2YWx1ZSwgaW1hZ2VzIHdpbGwgYmUgcmVxdWVzdGVkIHRoYXQgYXJlIHdpZGVyXG4gKiBhbmQgdGFsbGVyIHRoYW4gdGhlIHRpbGUgc2l6ZSBieSBhIHZhbHVlIG9mIGAyIHggZ3V0dGVyYC5cbiAqIFVzaW5nIGEgbm9uLXplcm8gdmFsdWUgYWxsb3dzIGFydGlmYWN0cyBvZiByZW5kZXJpbmcgYXQgdGlsZSBlZGdlcyB0byBiZVxuICogaWdub3JlZC4gSWYgeW91IGNvbnRyb2wgdGhlIFdNUyBzZXJ2aWNlIGl0IGlzIHJlY29tbWVuZGVkIHRvIGFkZHJlc3NcbiAqIFwiYXJ0aWZhY3RzIGF0IHRpbGUgZWRnZXNcIiBpc3N1ZXMgYnkgcHJvcGVybHkgY29uZmlndXJpbmcgdGhlIFdNUyBzZXJ2aWNlLiBGb3JcbiAqIGV4YW1wbGUsIE1hcFNlcnZlciBoYXMgYSBgdGlsZV9tYXBfZWRnZV9idWZmZXJgIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyIGZvclxuICogdGhpcy4gU2VlIGh0dHA6Ly9tYXBzZXJ2ZXIub3JnL291dHB1dC90aWxlX21vZGUuaHRtbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2hpZHBpPXRydWVdIFVzZSB0aGUgYG9sL01hcCNwaXhlbFJhdGlvYCB2YWx1ZSB3aGVuIHJlcXVlc3RpbmdcbiAqIHRoZSBpbWFnZSBmcm9tIHRoZSByZW1vdGUgc2VydmVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge3R5cGVvZiBpbXBvcnQoXCIuLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gW3RpbGVDbGFzc10gQ2xhc3MgdXNlZCB0byBpbnN0YW50aWF0ZSBpbWFnZSB0aWxlcy5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9JbWFnZVRpbGV+SW1hZ2VUaWxlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlIGdyaWQuIEJhc2UgdGhpcyBvbiB0aGUgcmVzb2x1dGlvbnMsXG4gKiB0aWxlc2l6ZSBhbmQgZXh0ZW50IHN1cHBvcnRlZCBieSB0aGUgc2VydmVyLlxuICogSWYgdGhpcyBpcyBub3QgZGVmaW5lZCwgYSBkZWZhdWx0IGdyaWQgd2lsbCBiZSB1c2VkOiBpZiB0aGVyZSBpcyBhIHByb2plY3Rpb25cbiAqIGV4dGVudCwgdGhlIGdyaWQgd2lsbCBiZSBiYXNlZCBvbiB0aGF0OyBpZiBub3QsIGEgZ3JpZCBiYXNlZCBvbiBhIGdsb2JhbFxuICogZXh0ZW50IHdpdGggb3JpZ2luIGF0IDAsMCB3aWxsIGJlIHVzZWQuLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1dNU1NlcnZlclR5cGUuanNcIikuZGVmYXVsdHxzdHJpbmd9IFtzZXJ2ZXJUeXBlXVxuICogVGhlIHR5cGUgb2YgdGhlIHJlbW90ZSBXTVMgc2VydmVyLiBDdXJyZW50bHkgb25seSB1c2VkIHdoZW4gYGhpZHBpYCBpc1xuICogYHRydWVgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBXTVMgc2VydmljZSBVUkwuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBXTVMgc2VydmljZSB1cmxzLlxuICogVXNlIHRoaXMgaW5zdGVhZCBvZiBgdXJsYCB3aGVuIHRoZSBXTVMgc3VwcG9ydHMgbXVsdGlwbGUgdXJscyBmb3IgR2V0TWFwIHJlcXVlc3RzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV2hldGhlciB0byB3cmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuXG4gKiBXaGVuIHNldCB0byBgZmFsc2VgLCBvbmx5IG9uZSB3b3JsZFxuICogd2lsbCBiZSByZW5kZXJlZC4gV2hlbiBgdHJ1ZWAsIHRpbGVzIHdpbGwgYmUgcmVxdWVzdGVkIGZvciBvbmUgd29ybGQgb25seSxcbiAqIGJ1dCB0aGV5IHdpbGwgYmUgd3JhcHBlZCBob3Jpem9udGFsbHkgdG8gcmVuZGVyIG11bHRpcGxlIHdvcmxkcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMYXllciBzb3VyY2UgZm9yIHRpbGUgZGF0YSBmcm9tIFdNUyBzZXJ2ZXJzLlxuICogQGFwaVxuICovXG52YXIgVGlsZVdNUyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZVdNUywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBbb3B0X29wdGlvbnNdIFRpbGUgV01TIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVdNUyhvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiAvKiogQHR5cGUge09wdGlvbnN9ICovICh7fSk7XG4gICAgICAgIHZhciBwYXJhbXMgPSBvcHRpb25zLnBhcmFtcyB8fCB7fTtcbiAgICAgICAgdmFyIHRyYW5zcGFyZW50ID0gJ1RSQU5TUEFSRU5UJyBpbiBwYXJhbXMgPyBwYXJhbXNbJ1RSQU5TUEFSRU5UJ10gOiB0cnVlO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgICAgICAgY3Jvc3NPcmlnaW46IG9wdGlvbnMuY3Jvc3NPcmlnaW4sXG4gICAgICAgICAgICBpbWFnZVNtb290aGluZzogb3B0aW9ucy5pbWFnZVNtb290aGluZyxcbiAgICAgICAgICAgIG9wYXF1ZTogIXRyYW5zcGFyZW50LFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsXG4gICAgICAgICAgICB0aWxlQ2xhc3M6IG9wdGlvbnMudGlsZUNsYXNzLFxuICAgICAgICAgICAgdGlsZUdyaWQ6IG9wdGlvbnMudGlsZUdyaWQsXG4gICAgICAgICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiB0cnVlLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmd1dHRlcl8gPSBvcHRpb25zLmd1dHRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5ndXR0ZXIgOiAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wYXJhbXNfID0gcGFyYW1zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52MTNfID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1dNU1NlcnZlclR5cGUuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zZXJ2ZXJUeXBlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9XTVNTZXJ2ZXJUeXBlLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSAqLyAob3B0aW9ucy5zZXJ2ZXJUeXBlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGlkcGlfID0gb3B0aW9ucy5oaWRwaSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaWRwaSA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcEV4dGVudF8gPSBjcmVhdGVFbXB0eSgpO1xuICAgICAgICBfdGhpcy51cGRhdGVWMTNfKCk7XG4gICAgICAgIF90aGlzLnNldEtleShfdGhpcy5nZXRLZXlGb3JQYXJhbXNfKCkpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgR2V0RmVhdHVyZUluZm8gVVJMIGZvciB0aGUgcGFzc2VkIGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIGFuZFxuICAgICAqIHByb2plY3Rpb24uIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgR2V0RmVhdHVyZUluZm8gVVJMIGNhbm5vdCBiZVxuICAgICAqIGNvbnN0cnVjdGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IHBhcmFtcyBHZXRGZWF0dXJlSW5mbyBwYXJhbXMuIGBJTkZPX0ZPUk1BVGAgYXQgbGVhc3Qgc2hvdWxkXG4gICAgICogICAgIGJlIHByb3ZpZGVkLiBJZiBgUVVFUllfTEFZRVJTYCBpcyBub3QgcHJvdmlkZWQgdGhlbiB0aGUgbGF5ZXJzIHNwZWNpZmllZFxuICAgICAqICAgICBpbiB0aGUgYExBWUVSU2AgcGFyYW1ldGVyIHdpbGwgYmUgdXNlZC4gYFZFUlNJT05gIHNob3VsZCBub3QgYmVcbiAgICAgKiAgICAgc3BlY2lmaWVkIGhlcmUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gR2V0RmVhdHVyZUluZm8gVVJMLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlV01TLnByb3RvdHlwZS5nZXRGZWF0dXJlSW5mb1VybCA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIHByb2plY3Rpb25PYmogPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgc291cmNlUHJvamVjdGlvbk9iaiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkKCk7XG4gICAgICAgIGlmICghdGlsZUdyaWQpIHtcbiAgICAgICAgICAgIHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbk9iaik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHogPSB0aWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbihyZXNvbHV0aW9uLCB0aGlzLnpEaXJlY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZUNvb3JkID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaKGNvb3JkaW5hdGUsIHopO1xuICAgICAgICBpZiAodGlsZUdyaWQuZ2V0UmVzb2x1dGlvbnMoKS5sZW5ndGggPD0gdGlsZUNvb3JkWzBdKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24odGlsZUNvb3JkWzBdKTtcbiAgICAgICAgdmFyIHRpbGVFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCB0aGlzLnRtcEV4dGVudF8pO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGlsZUdyaWQuZ2V0VGlsZVNpemUodGlsZUNvb3JkWzBdKSwgdGhpcy50bXBTaXplKTtcbiAgICAgICAgdmFyIGd1dHRlciA9IHRoaXMuZ3V0dGVyXztcbiAgICAgICAgaWYgKGd1dHRlciAhPT0gMCkge1xuICAgICAgICAgICAgdGlsZVNpemUgPSBidWZmZXJTaXplKHRpbGVTaXplLCBndXR0ZXIsIHRoaXMudG1wU2l6ZSk7XG4gICAgICAgICAgICB0aWxlRXh0ZW50ID0gYnVmZmVyKHRpbGVFeHRlbnQsIHRpbGVSZXNvbHV0aW9uICogZ3V0dGVyLCB0aWxlRXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc291cmNlUHJvamVjdGlvbk9iaiAmJiBzb3VyY2VQcm9qZWN0aW9uT2JqICE9PSBwcm9qZWN0aW9uT2JqKSB7XG4gICAgICAgICAgICB0aWxlUmVzb2x1dGlvbiA9IGNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24oc291cmNlUHJvamVjdGlvbk9iaiwgcHJvamVjdGlvbk9iaiwgY29vcmRpbmF0ZSwgdGlsZVJlc29sdXRpb24pO1xuICAgICAgICAgICAgdGlsZUV4dGVudCA9IHRyYW5zZm9ybUV4dGVudCh0aWxlRXh0ZW50LCBwcm9qZWN0aW9uT2JqLCBzb3VyY2VQcm9qZWN0aW9uT2JqKTtcbiAgICAgICAgICAgIGNvb3JkaW5hdGUgPSB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgcHJvamVjdGlvbk9iaiwgc291cmNlUHJvamVjdGlvbk9iaik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhc2VQYXJhbXMgPSB7XG4gICAgICAgICAgICAnU0VSVklDRSc6ICdXTVMnLFxuICAgICAgICAgICAgJ1ZFUlNJT04nOiBERUZBVUxUX1dNU19WRVJTSU9OLFxuICAgICAgICAgICAgJ1JFUVVFU1QnOiAnR2V0RmVhdHVyZUluZm8nLFxuICAgICAgICAgICAgJ0ZPUk1BVCc6ICdpbWFnZS9wbmcnLFxuICAgICAgICAgICAgJ1RSQU5TUEFSRU5UJzogdHJ1ZSxcbiAgICAgICAgICAgICdRVUVSWV9MQVlFUlMnOiB0aGlzLnBhcmFtc19bJ0xBWUVSUyddLFxuICAgICAgICB9O1xuICAgICAgICBhc3NpZ24oYmFzZVBhcmFtcywgdGhpcy5wYXJhbXNfLCBwYXJhbXMpO1xuICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoKGNvb3JkaW5hdGVbMF0gLSB0aWxlRXh0ZW50WzBdKSAvIHRpbGVSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKCh0aWxlRXh0ZW50WzNdIC0gY29vcmRpbmF0ZVsxXSkgLyB0aWxlUmVzb2x1dGlvbik7XG4gICAgICAgIGJhc2VQYXJhbXNbdGhpcy52MTNfID8gJ0knIDogJ1gnXSA9IHg7XG4gICAgICAgIGJhc2VQYXJhbXNbdGhpcy52MTNfID8gJ0onIDogJ1knXSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3RVcmxfKHRpbGVDb29yZCwgdGlsZVNpemUsIHRpbGVFeHRlbnQsIDEsIHNvdXJjZVByb2plY3Rpb25PYmogfHwgcHJvamVjdGlvbk9iaiwgYmFzZVBhcmFtcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIEdldExlZ2VuZEdyYXBoaWMgVVJMLCBvcHRpb25hbGx5IG9wdGltaXplZCBmb3IgdGhlIHBhc3NlZFxuICAgICAqIHJlc29sdXRpb24gYW5kIHBvc3NpYmx5IGluY2x1ZGluZyBhbnkgcGFzc2VkIHNwZWNpZmljIHBhcmFtZXRlcnMuIFJldHVybnNcbiAgICAgKiBgdW5kZWZpbmVkYCBpZiB0aGUgR2V0TGVnZW5kR3JhcGhpYyBVUkwgY2Fubm90IGJlIGNvbnN0cnVjdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uXSBSZXNvbHV0aW9uLiBJZiBzZXQgdG8gdW5kZWZpbmVkLCBgU0NBTEVgXG4gICAgICogICAgIHdpbGwgbm90IGJlIGNhbGN1bGF0ZWQgYW5kIGluY2x1ZGVkIGluIFVSTC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3BhcmFtc10gR2V0TGVnZW5kR3JhcGhpYyBwYXJhbXMuIElmIGBMQVlFUmAgaXMgc2V0LCB0aGVcbiAgICAgKiAgICAgcmVxdWVzdCBpcyBnZW5lcmF0ZWQgZm9yIHRoaXMgd21zIGxheWVyLCBlbHNlIGl0IHdpbGwgdHJ5IHRvIHVzZSB0aGVcbiAgICAgKiAgICAgY29uZmlndXJlZCB3bXMgbGF5ZXIuIERlZmF1bHQgYEZPUk1BVGAgaXMgYGltYWdlL3BuZ2AuXG4gICAgICogICAgIGBWRVJTSU9OYCBzaG91bGQgbm90IGJlIHNwZWNpZmllZCBoZXJlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IEdldExlZ2VuZEdyYXBoaWMgVVJMLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlV01TLnByb3RvdHlwZS5nZXRMZWdlbmRVcmwgPSBmdW5jdGlvbiAocmVzb2x1dGlvbiwgcGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnVybHNbMF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFzZVBhcmFtcyA9IHtcbiAgICAgICAgICAgICdTRVJWSUNFJzogJ1dNUycsXG4gICAgICAgICAgICAnVkVSU0lPTic6IERFRkFVTFRfV01TX1ZFUlNJT04sXG4gICAgICAgICAgICAnUkVRVUVTVCc6ICdHZXRMZWdlbmRHcmFwaGljJyxcbiAgICAgICAgICAgICdGT1JNQVQnOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHBhcmFtcyA9PT0gdW5kZWZpbmVkIHx8IHBhcmFtc1snTEFZRVInXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5wYXJhbXNfLkxBWUVSUztcbiAgICAgICAgICAgIHZhciBpc1NpbmdsZUxheWVyID0gIUFycmF5LmlzQXJyYXkobGF5ZXJzKSB8fCBsYXllcnMubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgaWYgKCFpc1NpbmdsZUxheWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhc2VQYXJhbXNbJ0xBWUVSJ10gPSBsYXllcnM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIG1wdSA9IHRoaXMuZ2V0UHJvamVjdGlvbigpXG4gICAgICAgICAgICAgICAgPyB0aGlzLmdldFByb2plY3Rpb24oKS5nZXRNZXRlcnNQZXJVbml0KClcbiAgICAgICAgICAgICAgICA6IDE7XG4gICAgICAgICAgICB2YXIgZHBpID0gMjUuNCAvIDAuMjg7XG4gICAgICAgICAgICB2YXIgaW5jaGVzUGVyTWV0ZXIgPSAzOS4zNztcbiAgICAgICAgICAgIGJhc2VQYXJhbXNbJ1NDQUxFJ10gPSByZXNvbHV0aW9uICogbXB1ICogaW5jaGVzUGVyTWV0ZXIgKiBkcGk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduKGJhc2VQYXJhbXMsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiBhcHBlbmRQYXJhbXMoLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0aGlzLnVybHNbMF0pLCBiYXNlUGFyYW1zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgICAqL1xuICAgIFRpbGVXTVMucHJvdG90eXBlLmdldEd1dHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3V0dGVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdXNlci1wcm92aWRlZCBwYXJhbXMsIGkuZS4gdGhvc2UgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciB0aHJvdWdoXG4gICAgICogdGhlIFwicGFyYW1zXCIgb3B0aW9uLCBhbmQgcG9zc2libHkgdXBkYXRlZCB1c2luZyB0aGUgdXBkYXRlUGFyYW1zIG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFBhcmFtcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZVdNUy5wcm90b3R5cGUuZ2V0UGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSB0aWxlU2l6ZSBUaWxlIHNpemUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB0aWxlRXh0ZW50IFRpbGUgZXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIFBhcmFtcy5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBSZXF1ZXN0IFVSTC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVXTVMucHJvdG90eXBlLmdldFJlcXVlc3RVcmxfID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgdGlsZVNpemUsIHRpbGVFeHRlbnQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIHBhcmFtcykge1xuICAgICAgICB2YXIgdXJscyA9IHRoaXMudXJscztcbiAgICAgICAgaWYgKCF1cmxzKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHBhcmFtc1snV0lEVEgnXSA9IHRpbGVTaXplWzBdO1xuICAgICAgICBwYXJhbXNbJ0hFSUdIVCddID0gdGlsZVNpemVbMV07XG4gICAgICAgIHBhcmFtc1t0aGlzLnYxM18gPyAnQ1JTJyA6ICdTUlMnXSA9IHByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICAgICAgICBpZiAoISgnU1RZTEVTJyBpbiB0aGlzLnBhcmFtc18pKSB7XG4gICAgICAgICAgICBwYXJhbXNbJ1NUWUxFUyddID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBpeGVsUmF0aW8gIT0gMSkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNlcnZlclR5cGVfKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBXTVNTZXJ2ZXJUeXBlLkdFT1NFUlZFUjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRwaSA9ICg5MCAqIHBpeGVsUmF0aW8gKyAwLjUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdGT1JNQVRfT1BUSU9OUycgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNbJ0ZPUk1BVF9PUFRJT05TJ10gKz0gJztkcGk6JyArIGRwaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1snRk9STUFUX09QVElPTlMnXSA9ICdkcGk6JyArIGRwaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFdNU1NlcnZlclR5cGUuTUFQU0VSVkVSOlxuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbJ01BUF9SRVNPTFVUSU9OJ10gPSA5MCAqIHBpeGVsUmF0aW87XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgV01TU2VydmVyVHlwZS5DQVJNRU5UQV9TRVJWRVI6XG4gICAgICAgICAgICAgICAgY2FzZSBXTVNTZXJ2ZXJUeXBlLlFHSVM6XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtc1snRFBJJ10gPSA5MCAqIHBpeGVsUmF0aW87XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydChmYWxzZSwgNTIpOyAvLyBVbmtub3duIGBzZXJ2ZXJUeXBlYCBjb25maWd1cmVkXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBheGlzT3JpZW50YXRpb24gPSBwcm9qZWN0aW9uLmdldEF4aXNPcmllbnRhdGlvbigpO1xuICAgICAgICB2YXIgYmJveCA9IHRpbGVFeHRlbnQ7XG4gICAgICAgIGlmICh0aGlzLnYxM18gJiYgYXhpc09yaWVudGF0aW9uLnN1YnN0cigwLCAyKSA9PSAnbmUnKSB7XG4gICAgICAgICAgICB2YXIgdG1wID0gdm9pZCAwO1xuICAgICAgICAgICAgdG1wID0gdGlsZUV4dGVudFswXTtcbiAgICAgICAgICAgIGJib3hbMF0gPSB0aWxlRXh0ZW50WzFdO1xuICAgICAgICAgICAgYmJveFsxXSA9IHRtcDtcbiAgICAgICAgICAgIHRtcCA9IHRpbGVFeHRlbnRbMl07XG4gICAgICAgICAgICBiYm94WzJdID0gdGlsZUV4dGVudFszXTtcbiAgICAgICAgICAgIGJib3hbM10gPSB0bXA7XG4gICAgICAgIH1cbiAgICAgICAgcGFyYW1zWydCQk9YJ10gPSBiYm94LmpvaW4oJywnKTtcbiAgICAgICAgdmFyIHVybDtcbiAgICAgICAgaWYgKHVybHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIHVybCA9IHVybHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBtb2R1bG8odGlsZUNvb3JkSGFzaCh0aWxlQ29vcmQpLCB1cmxzLmxlbmd0aCk7XG4gICAgICAgICAgICB1cmwgPSB1cmxzW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBwZW5kUGFyYW1zKHVybCwgcGFyYW1zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBwaXhlbCByYXRpbyBmb3IgdGhpcyBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHBpeGVsIHJhdGlvLlxuICAgICAqL1xuICAgIFRpbGVXTVMucHJvdG90eXBlLmdldFRpbGVQaXhlbFJhdGlvID0gZnVuY3Rpb24gKHBpeGVsUmF0aW8pIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmhpZHBpXyB8fCB0aGlzLnNlcnZlclR5cGVfID09PSB1bmRlZmluZWQgPyAxIDogcGl4ZWxSYXRpbztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciB0aGUgY3VycmVudCBwYXJhbXMuXG4gICAgICovXG4gICAgVGlsZVdNUy5wcm90b3R5cGUuZ2V0S2V5Rm9yUGFyYW1zXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnBhcmFtc18pIHtcbiAgICAgICAgICAgIHJlc1tpKytdID0ga2V5ICsgJy0nICsgdGhpcy5wYXJhbXNfW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcy5qb2luKCcvJyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHVzZXItcHJvdmlkZWQgcGFyYW1zLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgUGFyYW1zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlV01TLnByb3RvdHlwZS51cGRhdGVQYXJhbXMgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgIGFzc2lnbih0aGlzLnBhcmFtc18sIHBhcmFtcyk7XG4gICAgICAgIHRoaXMudXBkYXRlVjEzXygpO1xuICAgICAgICB0aGlzLnNldEtleSh0aGlzLmdldEtleUZvclBhcmFtc18oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVXTVMucHJvdG90eXBlLnVwZGF0ZVYxM18gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5wYXJhbXNfWydWRVJTSU9OJ10gfHwgREVGQVVMVF9XTVNfVkVSU0lPTjtcbiAgICAgICAgdGhpcy52MTNfID0gY29tcGFyZVZlcnNpb25zKHZlcnNpb24sICcxLjMnKSA+PSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGhlIHRpbGUgY29vcmRpbmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFRoZSBwaXhlbCByYXRpb1xuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb25cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaGUgdGlsZSBVUkxcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBUaWxlV01TLnByb3RvdHlwZS50aWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWQoKTtcbiAgICAgICAgaWYgKCF0aWxlR3JpZCkge1xuICAgICAgICAgICAgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZUdyaWQuZ2V0UmVzb2x1dGlvbnMoKS5sZW5ndGggPD0gdGlsZUNvb3JkWzBdKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwaXhlbFJhdGlvICE9IDEgJiYgKCF0aGlzLmhpZHBpXyB8fCB0aGlzLnNlcnZlclR5cGVfID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICBwaXhlbFJhdGlvID0gMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGhpcy50bXBFeHRlbnRfKTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRpbGVHcmlkLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZSk7XG4gICAgICAgIHZhciBndXR0ZXIgPSB0aGlzLmd1dHRlcl87XG4gICAgICAgIGlmIChndXR0ZXIgIT09IDApIHtcbiAgICAgICAgICAgIHRpbGVTaXplID0gYnVmZmVyU2l6ZSh0aWxlU2l6ZSwgZ3V0dGVyLCB0aGlzLnRtcFNpemUpO1xuICAgICAgICAgICAgdGlsZUV4dGVudCA9IGJ1ZmZlcih0aWxlRXh0ZW50LCB0aWxlUmVzb2x1dGlvbiAqIGd1dHRlciwgdGlsZUV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBpeGVsUmF0aW8gIT0gMSkge1xuICAgICAgICAgICAgdGlsZVNpemUgPSBzY2FsZVNpemUodGlsZVNpemUsIHBpeGVsUmF0aW8sIHRoaXMudG1wU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhc2VQYXJhbXMgPSB7XG4gICAgICAgICAgICAnU0VSVklDRSc6ICdXTVMnLFxuICAgICAgICAgICAgJ1ZFUlNJT04nOiBERUZBVUxUX1dNU19WRVJTSU9OLFxuICAgICAgICAgICAgJ1JFUVVFU1QnOiAnR2V0TWFwJyxcbiAgICAgICAgICAgICdGT1JNQVQnOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICAgICdUUkFOU1BBUkVOVCc6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGFzc2lnbihiYXNlUGFyYW1zLCB0aGlzLnBhcmFtc18pO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0VXJsXyh0aWxlQ29vcmQsIHRpbGVTaXplLCB0aWxlRXh0ZW50LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBiYXNlUGFyYW1zKTtcbiAgICB9O1xuICAgIHJldHVybiBUaWxlV01TO1xufShUaWxlSW1hZ2UpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVXTVM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlV01TLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbGNzLmNvcmUuT0xJbWFnZXJ5UHJvdmlkZXJcbiAqL1xuaW1wb3J0IHtnZXQgYXMgZ2V0UHJvamVjdGlvbn0gZnJvbSAnb2wvcHJvai5qcyc7XG5pbXBvcnQgb2xjc1V0aWwgZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQge1RpbGUgYXMgVGlsZVNvdXJjZX0gZnJvbSAnb2wvc291cmNlLmpzJztcblxuY29uc3Qgb2xVc2VOZXdDb29yZGluYXRlcyA9IChmdW5jdGlvbigpIHtcbiAgY29uc3QgdGlsZVNvdXJjZSA9IG5ldyBUaWxlU291cmNlKHtcbiAgICBwcm9qZWN0aW9uOiAnRVBTRzozODU3JyxcbiAgICB3cmFwWDogdHJ1ZVxuICB9KTtcbiAgY29uc3QgdGlsZUNvb3JkID0gdGlsZVNvdXJjZS5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24oWzYsIC0zMSwgMjJdKTtcbiAgcmV0dXJuIHRpbGVDb29yZCAmJiB0aWxlQ29vcmRbMV0gPT09IDMzICYmIHRpbGVDb29yZFsyXSA9PT0gMjI7XG4gIC8vIFNlZSBiL3Rlc3Qvc3BlYy9vbC9zb3VyY2UvdGlsZS50ZXN0LmpzXG4gIC8vIG9mIGU5YTMwYzVjYjdlMzcyMWQ5MzcwMDI1ZmJlNTQ3MmMzMjI4NDdiMzUgaW4gT3BlbkxheWVycyByZXBvc2l0b3J5XG59KSgpO1xuXG5cbmNsYXNzIE9MSW1hZ2VyeVByb3ZpZGVyIC8qIHNob3VsZCBub3QgZXh0ZW5kIENlc2l1bS5JbWFnZXJ5UHJvdmlkZXIgKi8ge1xuICAvKipcbiAgICogU3BlY2lhbCBjbGFzcyBkZXJpdmVkIGZyb20gQ2VzaXVtLkltYWdlcnlQcm92aWRlclxuICAgKiB0aGF0IGlzIGNvbm5lY3RlZCB0byB0aGUgZ2l2ZW4gb2wuc291cmNlLlRpbGVJbWFnZS5cbiAgICogQHBhcmFtIHshb2wuTWFwfSBvbE1hcFxuICAgKiBAcGFyYW0geyFvbC5zb3VyY2UuVGlsZUltYWdlfSBzb3VyY2VcbiAgICogQHBhcmFtIHtvbC5wcm9qLlByb2plY3Rpb249fSBvcHRfZmFsbGJhY2tQcm9qIFByb2plY3Rpb24gdG8gYXNzdW1lIGlmIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbiBvZiB0aGUgc291cmNlIGlzIG5vdCBkZWZpbmVkLlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGV4dGVuZHMge0Nlc2l1bS5JbWFnZXJ5UHJvdmlkZXJ9XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvbE1hcCwgc291cmNlLCBvcHRfZmFsbGJhY2tQcm9qKSB7XG4gICAgLy8gRG8gbm90IGV4dGVuZCBvciBjYWxsIHN1cGVyIGNvbnN0cnVjdG9yIGZyb21cbiAgICAvLyBDZXNpdW0uSW1hZ2VyeVByb3ZpZGVyIHNpbmNlIHRoaXMgcGFydGljdWxhciBmdW5jdGlvbiBpcyBhXG4gICAgLy8gJ25vbiBpbnN0YW5jaWFibGUgaW50ZXJmYWNlJyB3aGljaCB0aHJvd3Mgb24gaW5zdGFuY2lhdGlvbi5cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshb2wuc291cmNlLlRpbGVJbWFnZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlXyA9IHNvdXJjZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/b2wucHJvai5Qcm9qZWN0aW9ufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wcm9qZWN0aW9uXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P29sLnByb2ouUHJvamVjdGlvbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZmFsbGJhY2tQcm9qXyA9IG9wdF9mYWxsYmFja1Byb2ogfHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5yZWFkeV8gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/Q2VzaXVtLlRpbGluZ1NjaGVtZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudGlsaW5nU2NoZW1lXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P0Nlc2l1bS5SZWN0YW5nbGV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlY3RhbmdsZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFvbC5NYXB9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1hcF8gPSBvbE1hcDtcblxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNob3VsZFJlcXVlc3ROZXh0TGV2ZWwgPSBmYWxzZTtcblxuICAgIGNvbnN0IHByb3h5ID0gdGhpcy5zb3VyY2VfLmdldCgnb2xjcy5wcm94eScpO1xuICAgIGlmIChwcm94eSkge1xuICAgICAgaWYgKHR5cGVvZiBwcm94eSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnByb3h5XyA9IHtcbiAgICAgICAgICAnZ2V0VVJMJzogcHJveHlcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb3h5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLnByb3h5XyA9IG5ldyBDZXNpdW0uRGVmYXVsdFByb3h5KHByb3h5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmVycm9yRXZlbnRfID0gbmV3IENlc2l1bS5FdmVudCgpO1xuXG4gICAgdGhpcy5lbXB0eUNhbnZhc18gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLmVtcHR5Q2FudmFzXy53aWR0aCA9IDE7XG4gICAgdGhpcy5lbXB0eUNhbnZhc18uaGVpZ2h0ID0gMTtcblxuICAgIHRoaXMuc291cmNlXy5vbignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlU291cmNlQ2hhbmdlZF8oKTtcbiAgICB9KTtcbiAgICB0aGlzLmhhbmRsZVNvdXJjZUNoYW5nZWRfKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSB1bmRlcmx5aW5nIHNvdXJjZSBpcyByZWFkeSBhbmQgY2FjaGVkIHJlcXVpcmVkIGRhdGEuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVTb3VyY2VDaGFuZ2VkXyhmcmFtZVN0YXRlKSB7XG4gICAgaWYgKCF0aGlzLnJlYWR5XyAmJiB0aGlzLnNvdXJjZV8uZ2V0U3RhdGUoKSA9PSAncmVhZHknKSB7XG4gICAgICB0aGlzLnByb2plY3Rpb25fID0gb2xjc1V0aWwuZ2V0U291cmNlUHJvamVjdGlvbih0aGlzLnNvdXJjZV8pIHx8IHRoaXMuZmFsbGJhY2tQcm9qXztcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7bnVtYmVyT2ZMZXZlbFplcm9UaWxlc1g6IDEsIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNZOiAxfTtcblxuICAgICAgaWYgKHRoaXMuc291cmNlXy50aWxlR3JpZCAhPT0gbnVsbCkge1xuICAgICAgICAvLyBHZXQgdGhlIG51bWJlciBvZiB0aWxlcyBhdCBsZXZlbCAwIGlmIGl0IGlzIGRlZmluZWRcbiAgICAgICAgdGhpcy5zb3VyY2VfLnRpbGVHcmlkLmZvckVhY2hUaWxlQ29vcmQodGhpcy5wcm9qZWN0aW9uXy5nZXRFeHRlbnQoKSwgMCwgKFt6b29tLCB4SW5kZXgsIHlJbmRleF0pID0+IHtcbiAgICAgICAgICBvcHRpb25zLm51bWJlck9mTGV2ZWxaZXJvVGlsZXNYID0geEluZGV4ICsgMTtcbiAgICAgICAgICBvcHRpb25zLm51bWJlck9mTGV2ZWxaZXJvVGlsZXNZID0geUluZGV4ICsgMTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb2plY3Rpb25fID09IGdldFByb2plY3Rpb24oJ0VQU0c6NDMyNicpKSB7XG4gICAgICAgIC8vIENlc2l1bSB6b29tIGxldmVsIDAgaXMgT3BlbkxheWVycyB6b29tIGxldmVsIDEgZm9yIGxheWVyIGluIEVQU0c6NDMyNiB3aXRoIGEgc2luZ2xlIHRpbGUgb24gbGV2ZWwgMFxuICAgICAgICB0aGlzLnNob3VsZFJlcXVlc3ROZXh0TGV2ZWwgPSBvcHRpb25zLm51bWJlck9mTGV2ZWxaZXJvVGlsZXNYID09PSAxICYmIG9wdGlvbnMubnVtYmVyT2ZMZXZlbFplcm9UaWxlc1kgPT09IDE7XG4gICAgICAgIHRoaXMudGlsaW5nU2NoZW1lXyA9IG5ldyBDZXNpdW0uR2VvZ3JhcGhpY1RpbGluZ1NjaGVtZShvcHRpb25zKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9qZWN0aW9uXyA9PSBnZXRQcm9qZWN0aW9uKCdFUFNHOjM4NTcnKSkge1xuICAgICAgICB0aGlzLnNob3VsZFJlcXVlc3ROZXh0TGV2ZWwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aWxpbmdTY2hlbWVfID0gbmV3IENlc2l1bS5XZWJNZXJjYXRvclRpbGluZ1NjaGVtZShvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVjdGFuZ2xlXyA9IHRoaXMudGlsaW5nU2NoZW1lXy5yZWN0YW5nbGU7XG5cbiAgICAgIHRoaXMucmVhZHlfID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIHRoZSBwcm9wZXIgYXR0cmlidXRpb25zIGZvciBhIGdpdmVuIHBvc2l0aW9uIGFuZCB6b29tXG4gICAqIGxldmVsLlxuICAgKiBAZXhwb3J0XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0VGlsZUNyZWRpdHMoeCwgeSwgbGV2ZWwpIHtcbiAgICBjb25zdCBleHRlbnQgPSB0aGlzLm1hcF8uZ2V0VmlldygpLmNhbGN1bGF0ZUV4dGVudCh0aGlzLm1hcF8uZ2V0U2l6ZSgpKTtcbiAgICBjb25zdCBjZW50ZXIgPSB0aGlzLm1hcF8uZ2V0VmlldygpLmdldENlbnRlcigpO1xuXG4gICAgY29uc3Qgem9vbSA9IHRoaXMuc2hvdWxkUmVxdWVzdE5leHRMZXZlbCA/IGxldmVsICsgMSA6IGxldmVsO1xuXG4gICAgY29uc3QgZnJhbWVTdGF0ZSA9IHtcbiAgICAgIHZpZXdTdGF0ZToge3pvb20sIGNlbnRlcn0sXG4gICAgICBleHRlbnQsXG4gICAgfTtcblxuICAgIGNvbnN0IGF0dHJpYnV0aW9uc0Z1bmN0aW9uID0gdGhpcy5zb3VyY2VfLmdldEF0dHJpYnV0aW9ucygpO1xuICAgIGlmICghYXR0cmlidXRpb25zRnVuY3Rpb24pIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgbGV0IGF0dHJpYnV0aW9ucyA9IGF0dHJpYnV0aW9uc0Z1bmN0aW9uKGZyYW1lU3RhdGUpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbnMpKSB7XG4gICAgICBhdHRyaWJ1dGlvbnMgPSBbYXR0cmlidXRpb25zXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cmlidXRpb25zLm1hcChodG1sID0+IG5ldyBDZXNpdW0uQ3JlZGl0KGh0bWwsIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZXhwb3J0XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcmVxdWVzdEltYWdlKHgsIHksIGxldmVsKSB7XG4gICAgY29uc3QgdGlsZVVybEZ1bmN0aW9uID0gdGhpcy5zb3VyY2VfLmdldFRpbGVVcmxGdW5jdGlvbigpO1xuICAgIGlmICh0aWxlVXJsRnVuY3Rpb24gJiYgdGhpcy5wcm9qZWN0aW9uXykge1xuXG4gICAgICBjb25zdCB6XyA9IHRoaXMuc2hvdWxkUmVxdWVzdE5leHRMZXZlbCA/IGxldmVsICsgMSA6IGxldmVsO1xuXG4gICAgICBsZXQgeV8gPSB5O1xuICAgICAgaWYgKCFvbFVzZU5ld0Nvb3JkaW5hdGVzKSB7XG4gICAgICAgIC8vIE9wZW5MYXllcnMgdmVyc2lvbiAzIHRvIDUgdGlsZSBjb29yZGluYXRlcyBpbmNyZWFzZSBmcm9tIGJvdHRvbSB0byB0b3BcbiAgICAgICAgeV8gPSAteSAtIDE7XG4gICAgICB9XG4gICAgICBsZXQgdXJsID0gdGlsZVVybEZ1bmN0aW9uLmNhbGwodGhpcy5zb3VyY2VfLCBbel8sIHgsIHlfXSwgMSwgdGhpcy5wcm9qZWN0aW9uXyk7XG4gICAgICBpZiAodGhpcy5wcm94eV8pIHtcbiAgICAgICAgdXJsID0gdGhpcy5wcm94eV8uZ2V0VVJMKHVybCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJsID8gQ2VzaXVtLkltYWdlcnlQcm92aWRlci5sb2FkSW1hZ2UodGhpcywgdXJsKSA6IHRoaXMuZW1wdHlDYW52YXNfO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZXR1cm4gZW1wdHkgY2FudmFzIHRvIHN0b3AgQ2VzaXVtIGZyb20gcmV0cnlpbmcgbGF0ZXJcbiAgICAgIHJldHVybiB0aGlzLmVtcHR5Q2FudmFzXztcbiAgICB9XG4gIH1cbn1cblxuLy8gZGVmaW5pdGlvbnMgb2YgZ2V0dGVycyB0aGF0IGFyZSByZXF1aXJlZCB0byBiZSBwcmVzZW50XG4vLyBpbiB0aGUgQ2VzaXVtLkltYWdlcnlQcm92aWRlciBpbnN0YW5jZTpcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE9MSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZSwge1xuICAncmVhZHknOiB7XG4gICAgJ2dldCc6IC8qKiBAdGhpcyB7b2xjcy5jb3JlLk9MSW1hZ2VyeVByb3ZpZGVyfSAqL1xuICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5yZWFkeV87fVxuICB9LFxuXG4gICdyZWN0YW5nbGUnOiB7XG4gICAgJ2dldCc6IC8qKiBAdGhpcyB7b2xjcy5jb3JlLk9MSW1hZ2VyeVByb3ZpZGVyfSAqL1xuICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5yZWN0YW5nbGVfO31cbiAgfSxcblxuICAndGlsZVdpZHRoJzoge1xuICAgICdnZXQnOiAvKiogQHRoaXMge29sY3MuY29yZS5PTEltYWdlcnlQcm92aWRlcn0gKi9cbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc3QgdGcgPSB0aGlzLnNvdXJjZV8uZ2V0VGlsZUdyaWQoKTtcbiAgICAgICAgICByZXR1cm4gdGcgPyAoQXJyYXkuaXNBcnJheSh0Zy5nZXRUaWxlU2l6ZSgwKSkgPyB0Zy5nZXRUaWxlU2l6ZSgwKVswXSA6IHRnLmdldFRpbGVTaXplKDApKSA6IDI1NjtcbiAgICAgICAgfVxuICB9LFxuXG4gICd0aWxlSGVpZ2h0Jzoge1xuICAgICdnZXQnOiAvKiogQHRoaXMge29sY3MuY29yZS5PTEltYWdlcnlQcm92aWRlcn0gKi9cbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc3QgdGcgPSB0aGlzLnNvdXJjZV8uZ2V0VGlsZUdyaWQoKTtcbiAgICAgICAgICByZXR1cm4gdGcgPyAoQXJyYXkuaXNBcnJheSh0Zy5nZXRUaWxlU2l6ZSgwKSkgPyB0Zy5nZXRUaWxlU2l6ZSgwKVsxXSA6IHRnLmdldFRpbGVTaXplKDApKSA6IDI1NjtcbiAgICAgICAgfVxuICB9LFxuXG4gICdtYXhpbXVtTGV2ZWwnOiB7XG4gICAgJ2dldCc6IC8qKiBAdGhpcyB7b2xjcy5jb3JlLk9MSW1hZ2VyeVByb3ZpZGVyfSAqL1xuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zdCB0ZyA9IHRoaXMuc291cmNlXy5nZXRUaWxlR3JpZCgpO1xuICAgICAgICAgIHJldHVybiB0ZyA/IHRnLmdldE1heFpvb20oKSA6IDE4O1xuICAgICAgICB9XG4gIH0sXG5cbiAgJ21pbmltdW1MZXZlbCc6IHtcbiAgICAnZ2V0JzogLyoqIEB0aGlzIHtvbGNzLmNvcmUuT0xJbWFnZXJ5UHJvdmlkZXJ9ICovXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIFdBUk5JTkc6IERvIG5vdCB1c2UgdGhlIG1pbmltdW0gbGV2ZWwgKGF0IGxlYXN0IHVudGlsIHRoZSBleHRlbnQgaXNcbiAgICAgICAgICAvLyBwcm9wZXJseSBzZXQpLiBDZXNpdW0gYXNzdW1lcyB0aGUgbWluaW11bUxldmVsIHRvIGNvbnRhaW4gb25seVxuICAgICAgICAgIC8vIGEgZmV3IHRpbGVzIGFuZCB0cmllcyB0byBsb2FkIHRoZW0gYWxsIGF0IG9uY2UgLS0gdGhpcyBjYW5cbiAgICAgICAgICAvLyBmcmVlemUgYW5kL29yIGNyYXNoIHRoZSBicm93c2VyICFcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAvL3ZhciB0ZyA9IHRoaXMuc291cmNlXy5nZXRUaWxlR3JpZCgpO1xuICAgICAgICAgIC8vcmV0dXJuIHRnID8gdGcuZ2V0TWluWm9vbSgpIDogMDtcbiAgICAgICAgfVxuICB9LFxuXG4gICd0aWxpbmdTY2hlbWUnOiB7XG4gICAgJ2dldCc6IC8qKiBAdGhpcyB7b2xjcy5jb3JlLk9MSW1hZ2VyeVByb3ZpZGVyfSAqL1xuICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy50aWxpbmdTY2hlbWVfO31cbiAgfSxcblxuICAndGlsZURpc2NhcmRQb2xpY3knOiB7XG4gICAgJ2dldCc6IGZ1bmN0aW9uKCkge3JldHVybiB1bmRlZmluZWQ7fVxuICB9LFxuXG4gICdlcnJvckV2ZW50Jzoge1xuICAgICdnZXQnOiAvKiogQHRoaXMge29sY3MuY29yZS5PTEltYWdlcnlQcm92aWRlcn0gKi9cbiAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZXJyb3JFdmVudF87fVxuICB9LFxuXG4gICdwcm94eSc6IHtcbiAgICAnZ2V0JzogLyoqIEB0aGlzIHtvbGNzLmNvcmUuT0xJbWFnZXJ5UHJvdmlkZXJ9ICovXG4gICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnByb3h5Xzt9XG4gIH0sXG5cbiAgJ2hhc0FscGhhQ2hhbm5lbCc6IHtcbiAgICAnZ2V0JzogZnVuY3Rpb24oKSB7cmV0dXJuIHRydWU7fVxuICB9LFxuXG4gICdwaWNrRmVhdHVyZXMnOiB7XG4gICAgJ2dldCc6IGZ1bmN0aW9uKCkge3JldHVybiB1bmRlZmluZWQ7fVxuICB9XG59KTtcblxuXG5leHBvcnQgZGVmYXVsdCBPTEltYWdlcnlQcm92aWRlcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbGNzLmNvcmVcbiAqL1xuaW1wb3J0IHtsaW5lYXIgYXMgbGluZWFyRWFzaW5nfSBmcm9tICdvbC9lYXNpbmcuanMnO1xuaW1wb3J0IG9sTGF5ZXJUaWxlIGZyb20gJ29sL2xheWVyL1RpbGUuanMnO1xuaW1wb3J0IG9sTGF5ZXJJbWFnZSBmcm9tICdvbC9sYXllci9JbWFnZS5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9uLCB0cmFuc2Zvcm1FeHRlbnR9IGZyb20gJ29sL3Byb2ouanMnO1xuaW1wb3J0IG9sU291cmNlSW1hZ2VTdGF0aWMgZnJvbSAnb2wvc291cmNlL0ltYWdlU3RhdGljLmpzJztcbmltcG9ydCBvbFNvdXJjZUltYWdlV01TIGZyb20gJ29sL3NvdXJjZS9JbWFnZVdNUy5qcyc7XG5pbXBvcnQgb2xTb3VyY2VUaWxlSW1hZ2UgZnJvbSAnb2wvc291cmNlL1RpbGVJbWFnZS5qcyc7XG5pbXBvcnQgb2xTb3VyY2VUaWxlV01TIGZyb20gJ29sL3NvdXJjZS9UaWxlV01TLmpzJztcbmltcG9ydCB7ZGVmYXVsdEltYWdlTG9hZEZ1bmN0aW9ufSBmcm9tICdvbC9zb3VyY2UvSW1hZ2UuanMnO1xuaW1wb3J0IG9sY3NDb3JlT0xJbWFnZXJ5UHJvdmlkZXIgZnJvbSAnLi9jb3JlL09MSW1hZ2VyeVByb3ZpZGVyLmpzJztcbmltcG9ydCBvbGNzVXRpbCBmcm9tICcuL3V0aWwuanMnO1xuXG5cbmNvbnN0IGV4cG9ydHMgPSB7fTtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENlc2l1bVVybERlZmluaXRpb25cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1cmxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzdWJkb21haW5zXG4gKi9cblxuXG4vKipcbiAqIE9wdGlvbnMgZm9yIHJvdGF0ZSBhcm91bmQgYXhpcyBjb3JlIGZ1bmN0aW9uLlxuICogQHR5cGVkZWYge09iamVjdH0gUm90YXRlQXJvdW5kQXhpc09wdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbl1cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTogbnVtYmVyfSBbZWFzaW5nXVxuICogQHByb3BlcnR5IHtmdW5jdGlvbigpOiB2b2lkfSBbY2FsbGJhY2tdXG4gKi9cblxuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTGF5ZXJXaXRoUGFyZW50c1xuICogQHByb3BlcnR5IHtpbXBvcnQoJ29sL2xheWVyL0Jhc2UuanMnKS5kZWZhdWx0fSBsYXllclxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoJ29sL2xheWVyL0dyb3VwLmpzJykuZGVmYXVsdD59IHBhcmVudHNcbiAqL1xuXG5cbi8qKlxuICogQ29tcHV0ZSB0aGUgcGl4ZWwgd2lkdGggYW5kIGhlaWdodCBvZiBhIHBvaW50IGluIG1ldGVycyB1c2luZyB0aGVcbiAqIGNhbWVyYSBmcnVzdHVtLlxuICogQHBhcmFtIHshQ2VzaXVtLlNjZW5lfSBzY2VuZVxuICogQHBhcmFtIHshQ2VzaXVtLkNhcnRlc2lhbjN9IHRhcmdldFxuICogQHJldHVybiB7IUNlc2l1bS5DYXJ0ZXNpYW4yfSB0aGUgcGl4ZWwgc2l6ZVxuICogQGFwaVxuICovXG5leHBvcnRzLmNvbXB1dGVQaXhlbFNpemVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbihzY2VuZSwgdGFyZ2V0KSB7XG4gIGNvbnN0IGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgY29uc3QgY2FudmFzID0gc2NlbmUuY2FudmFzO1xuICBjb25zdCBmcnVzdHVtID0gY2FtZXJhLmZydXN0dW07XG4gIGNvbnN0IGRpc3RhbmNlID0gQ2VzaXVtLkNhcnRlc2lhbjMubWFnbml0dWRlKENlc2l1bS5DYXJ0ZXNpYW4zLnN1YnRyYWN0KFxuICAgICAgY2FtZXJhLnBvc2l0aW9uLCB0YXJnZXQsIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKSk7XG4gIHJldHVybiBmcnVzdHVtLmdldFBpeGVsRGltZW5zaW9ucyhjYW52YXMuY2xpZW50V2lkdGgsIGNhbnZhcy5jbGllbnRIZWlnaHQsXG4gICAgICBkaXN0YW5jZSwgc2NlbmUucGl4ZWxSYXRpbywgbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKCkpO1xufTtcblxuXG4vKipcbiAqIENvbXB1dGUgYm91bmRpbmcgYm94IGFyb3VuZCBhIHRhcmdldCBwb2ludC5cbiAqIEBwYXJhbSB7IUNlc2l1bS5TY2VuZX0gc2NlbmVcbiAqIEBwYXJhbSB7IUNlc2l1bS5DYXJ0ZXNpYW4zfSB0YXJnZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgSGFsZiB0aGUgc2lkZSBvZiB0aGUgYm94LCBpbiBwaXhlbHMuXG4gKiBAcmV0dXJuIHtBcnJheTxDZXNpdW0uQ2FydG9ncmFwaGljPn0gYm90dG9tIGxlZnQgYW5kIHRvcCByaWdodFxuICogY29vcmRpbmF0ZXMgb2YgdGhlIGJveFxuICovXG5leHBvcnRzLmNvbXB1dGVCb3VuZGluZ0JveEF0VGFyZ2V0ID0gZnVuY3Rpb24oc2NlbmUsIHRhcmdldCwgYW1vdW50KSB7XG4gIGNvbnN0IHBpeGVsU2l6ZSA9IGV4cG9ydHMuY29tcHV0ZVBpeGVsU2l6ZUF0Q29vcmRpbmF0ZShzY2VuZSwgdGFyZ2V0KTtcbiAgY29uc3QgdHJhbnNmb3JtID0gQ2VzaXVtLlRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWUodGFyZ2V0KTtcblxuICBjb25zdCBib3R0b21MZWZ0ID0gQ2VzaXVtLk1hdHJpeDQubXVsdGlwbHlCeVBvaW50KFxuICAgICAgdHJhbnNmb3JtLFxuICAgICAgbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKC1waXhlbFNpemUueCAqIGFtb3VudCwgLXBpeGVsU2l6ZS55ICogYW1vdW50LCAwKSxcbiAgICAgIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKTtcblxuICBjb25zdCB0b3BSaWdodCA9IENlc2l1bS5NYXRyaXg0Lm11bHRpcGx5QnlQb2ludChcbiAgICAgIHRyYW5zZm9ybSxcbiAgICAgIG5ldyBDZXNpdW0uQ2FydGVzaWFuMyhwaXhlbFNpemUueCAqIGFtb3VudCwgcGl4ZWxTaXplLnkgKiBhbW91bnQsIDApLFxuICAgICAgbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCkpO1xuXG4gIHJldHVybiBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LmNhcnRlc2lhbkFycmF5VG9DYXJ0b2dyYXBoaWNBcnJheShcbiAgICAgIFtib3R0b21MZWZ0LCB0b3BSaWdodF0pO1xufTtcblxuXG4vKipcbiAqXG4gKiBAcGFyYW0geyFvbC5nZW9tLkdlb21ldHJ5fSBnZW9tZXRyeVxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICogQGFwaVxuICovXG5leHBvcnRzLmFwcGx5SGVpZ2h0T2Zmc2V0VG9HZW9tZXRyeSA9IGZ1bmN0aW9uKGdlb21ldHJ5LCBoZWlnaHQpIHtcbiAgZ2VvbWV0cnkuYXBwbHlUcmFuc2Zvcm0oKGlucHV0LCBvdXRwdXQsIHN0cmlkZSkgPT4ge1xuICAgIGNvbnNvbGUuYXNzZXJ0KGlucHV0ID09PSBvdXRwdXQpO1xuICAgIGlmIChzdHJpZGUgIT09IHVuZGVmaW5lZCAmJiBzdHJpZGUgPj0gMykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRwdXQubGVuZ3RoOyBpICs9IHN0cmlkZSkge1xuICAgICAgICBvdXRwdXRbaSArIDJdID0gb3V0cHV0W2kgKyAyXSArIGhlaWdodDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtvbC5Db29yZGluYXRlfSBjb29yZGluYXRlc1xuICogQHBhcmFtIHtudW1iZXI9fSByb3RhdGlvblxuICogQHBhcmFtIHshQ2VzaXVtLkNhcnRlc2lhbjM9fSB0cmFuc2xhdGlvblxuICogQHBhcmFtIHshQ2VzaXVtLkNhcnRlc2lhbjM9fSBzY2FsZVxuICogQHJldHVybiB7IUNlc2l1bS5NYXRyaXg0fVxuICogQGFwaVxuICovXG5leHBvcnRzLmNyZWF0ZU1hdHJpeEF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbihjb29yZGluYXRlcywgcm90YXRpb24gPSAwLCB0cmFuc2xhdGlvbiA9IENlc2l1bS5DYXJ0ZXNpYW4zLlpFUk8sIHNjYWxlID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDEsIDEsIDEpKSB7XG4gIGNvbnN0IHBvc2l0aW9uID0gZXhwb3J0cy5vbDQzMjZDb29yZGluYXRlVG9DZXNpdW1DYXJ0ZXNpYW4oY29vcmRpbmF0ZXMpO1xuICBjb25zdCByYXdNYXRyaXggPSBDZXNpdW0uVHJhbnNmb3Jtcy5lYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZShwb3NpdGlvbik7XG4gIGNvbnN0IHF1YXRlcm5pb24gPSBDZXNpdW0uUXVhdGVybmlvbi5mcm9tQXhpc0FuZ2xlKENlc2l1bS5DYXJ0ZXNpYW4zLlVOSVRfWiwgLXJvdGF0aW9uKTtcbiAgY29uc3Qgcm90YXRpb25NYXRyaXggPSBDZXNpdW0uTWF0cml4NC5mcm9tVHJhbnNsYXRpb25RdWF0ZXJuaW9uUm90YXRpb25TY2FsZSh0cmFuc2xhdGlvbiwgcXVhdGVybmlvbiwgc2NhbGUpO1xuICByZXR1cm4gQ2VzaXVtLk1hdHJpeDQubXVsdGlwbHkocmF3TWF0cml4LCByb3RhdGlvbk1hdHJpeCwgbmV3IENlc2l1bS5NYXRyaXg0KCkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7IUNlc2l1bS5DYW1lcmF9IGNhbWVyYVxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlXG4gKiBAcGFyYW0geyFDZXNpdW0uQ2FydGVzaWFuM30gYXhpc1xuICogQHBhcmFtIHshQ2VzaXVtLk1hdHJpeDR9IHRyYW5zZm9ybVxuICogQHBhcmFtIHtSb3RhdGVBcm91bmRBeGlzT3B0aW9uPX0gb3B0X29wdGlvbnNcbiAqIEBhcGlcbiAqL1xuZXhwb3J0cy5yb3RhdGVBcm91bmRBeGlzID0gZnVuY3Rpb24oY2FtZXJhLCBhbmdsZSwgYXhpcywgdHJhbnNmb3JtLFxuICAgIG9wdF9vcHRpb25zKSB7XG4gIGNvbnN0IGNsYW1wID0gQ2VzaXVtLk1hdGguY2xhbXA7XG4gIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IENlc2l1bS5kZWZhdWx0VmFsdWU7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICBjb25zdCBkdXJhdGlvbiA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmR1cmF0aW9uLCA1MDApOyAvLyBtc1xuICBjb25zdCBlYXNpbmcgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5lYXNpbmcsIGxpbmVhckVhc2luZyk7XG4gIGNvbnN0IGNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjaztcblxuICBsZXQgbGFzdFByb2dyZXNzID0gMDtcbiAgY29uc3Qgb2xkVHJhbnNmb3JtID0gbmV3IENlc2l1bS5NYXRyaXg0KCk7XG5cbiAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICBjb25zdCBzdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB0aW1lRGlmZmVyZW5jZSA9IHRpbWVzdGFtcCAtIHN0YXJ0O1xuICAgIGNvbnN0IHByb2dyZXNzID0gZWFzaW5nKGNsYW1wKHRpbWVEaWZmZXJlbmNlIC8gZHVyYXRpb24sIDAsIDEpKTtcbiAgICBjb25zb2xlLmFzc2VydChwcm9ncmVzcyA+PSBsYXN0UHJvZ3Jlc3MpO1xuXG4gICAgY2FtZXJhLnRyYW5zZm9ybS5jbG9uZShvbGRUcmFuc2Zvcm0pO1xuICAgIGNvbnN0IHN0ZXBBbmdsZSA9IChwcm9ncmVzcyAtIGxhc3RQcm9ncmVzcykgKiBhbmdsZTtcbiAgICBsYXN0UHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICBjYW1lcmEubG9va0F0VHJhbnNmb3JtKHRyYW5zZm9ybSk7XG4gICAgY2FtZXJhLnJvdGF0ZShheGlzLCBzdGVwQW5nbGUpO1xuICAgIGNhbWVyYS5sb29rQXRUcmFuc2Zvcm0ob2xkVHJhbnNmb3JtKTtcblxuICAgIGlmIChwcm9ncmVzcyA8IDEpIHtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0geyFDZXNpdW0uU2NlbmV9IHNjZW5lXG4gKiBAcGFyYW0ge251bWJlcn0gaGVhZGluZ1xuICogQHBhcmFtIHshQ2VzaXVtLkNhcnRlc2lhbjN9IGJvdHRvbUNlbnRlclxuICogQHBhcmFtIHtSb3RhdGVBcm91bmRBeGlzT3B0aW9uPX0gb3B0X29wdGlvbnNcbiAqIEBhcGlcbiAqL1xuZXhwb3J0cy5zZXRIZWFkaW5nVXNpbmdCb3R0b21DZW50ZXIgPSBmdW5jdGlvbihzY2VuZSwgaGVhZGluZyxcbiAgICBib3R0b21DZW50ZXIsIG9wdF9vcHRpb25zKSB7XG4gIGNvbnN0IGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgLy8gQ29tcHV0ZSB0aGUgY2FtZXJhIHBvc2l0aW9uIHRvIHplbml0aCBxdWF0ZXJuaW9uXG4gIGNvbnN0IGFuZ2xlVG9aZW5pdGggPSBleHBvcnRzLmNvbXB1dGVBbmdsZVRvWmVuaXRoKHNjZW5lLCBib3R0b21DZW50ZXIpO1xuICBjb25zdCBheGlzID0gY2FtZXJhLnJpZ2h0O1xuICBjb25zdCBxdWF0ZXJuaW9uID0gQ2VzaXVtLlF1YXRlcm5pb24uZnJvbUF4aXNBbmdsZShheGlzLCBhbmdsZVRvWmVuaXRoKTtcbiAgY29uc3Qgcm90YXRpb24gPSBDZXNpdW0uTWF0cml4My5mcm9tUXVhdGVybmlvbihxdWF0ZXJuaW9uKTtcblxuICAvLyBHZXQgdGhlIHplbml0aCBwb2ludCBmcm9tIHRoZSByb3RhdGlvbiBvZiB0aGUgcG9zaXRpb24gdmVjdG9yXG4gIGNvbnN0IHZlY3RvciA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICBDZXNpdW0uQ2FydGVzaWFuMy5zdWJ0cmFjdChjYW1lcmEucG9zaXRpb24sIGJvdHRvbUNlbnRlciwgdmVjdG9yKTtcbiAgY29uc3QgemVuaXRoID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCk7XG4gIENlc2l1bS5NYXRyaXgzLm11bHRpcGx5QnlWZWN0b3Iocm90YXRpb24sIHZlY3RvciwgemVuaXRoKTtcbiAgQ2VzaXVtLkNhcnRlc2lhbjMuYWRkKHplbml0aCwgYm90dG9tQ2VudGVyLCB6ZW5pdGgpO1xuXG4gIC8vIEFjdHVhbGx5IHJvdGF0ZSBhcm91bmQgdGhlIHplbml0aCBub3JtYWxcbiAgY29uc3QgdHJhbnNmb3JtID0gQ2VzaXVtLk1hdHJpeDQuZnJvbVRyYW5zbGF0aW9uKHplbml0aCk7XG4gIGNvbnN0IHJvdGF0ZUFyb3VuZEF4aXMgPSBleHBvcnRzLnJvdGF0ZUFyb3VuZEF4aXM7XG4gIHJvdGF0ZUFyb3VuZEF4aXMoY2FtZXJhLCBoZWFkaW5nLCB6ZW5pdGgsIHRyYW5zZm9ybSwgb3B0X29wdGlvbnMpO1xufTtcblxuXG4vKipcbiAqIEdldCB0aGUgM0QgcG9zaXRpb24gb2YgdGhlIGdpdmVuIHBpeGVsIG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0geyFDZXNpdW0uU2NlbmV9IHNjZW5lXG4gKiBAcGFyYW0geyFDZXNpdW0uQ2FydGVzaWFuMn0gcGl4ZWxcbiAqIEByZXR1cm4geyFDZXNpdW0uQ2FydGVzaWFuM3x1bmRlZmluZWR9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMucGlja09uVGVycmFpbk9yRWxsaXBzb2lkID0gZnVuY3Rpb24oc2NlbmUsIHBpeGVsKSB7XG4gIGNvbnN0IHJheSA9IHNjZW5lLmNhbWVyYS5nZXRQaWNrUmF5KHBpeGVsKTtcbiAgY29uc3QgdGFyZ2V0ID0gc2NlbmUuZ2xvYmUucGljayhyYXksIHNjZW5lKTtcbiAgcmV0dXJuIHRhcmdldCB8fCBzY2VuZS5jYW1lcmEucGlja0VsbGlwc29pZChwaXhlbCk7XG59O1xuXG5cbi8qKlxuICogR2V0IHRoZSAzRCBwb3NpdGlvbiBvZiB0aGUgcG9pbnQgYXQgdGhlIGJvdHRvbS1jZW50ZXIgb2YgdGhlIHNjcmVlbi5cbiAqIEBwYXJhbSB7IUNlc2l1bS5TY2VuZX0gc2NlbmVcbiAqIEByZXR1cm4geyFDZXNpdW0uQ2FydGVzaWFuM3x1bmRlZmluZWR9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMucGlja0JvdHRvbVBvaW50ID0gZnVuY3Rpb24oc2NlbmUpIHtcbiAgY29uc3QgY2FudmFzID0gc2NlbmUuY2FudmFzO1xuICBjb25zdCBib3R0b20gPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoXG4gICAgICBjYW52YXMuY2xpZW50V2lkdGggLyAyLCBjYW52YXMuY2xpZW50SGVpZ2h0KTtcbiAgcmV0dXJuIGV4cG9ydHMucGlja09uVGVycmFpbk9yRWxsaXBzb2lkKHNjZW5lLCBib3R0b20pO1xufTtcblxuXG4vKipcbiAqIEdldCB0aGUgM0QgcG9zaXRpb24gb2YgdGhlIHBvaW50IGF0IHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbi5cbiAqIEBwYXJhbSB7IUNlc2l1bS5TY2VuZX0gc2NlbmVcbiAqIEByZXR1cm4geyFDZXNpdW0uQ2FydGVzaWFuM3x1bmRlZmluZWR9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMucGlja0NlbnRlclBvaW50ID0gZnVuY3Rpb24oc2NlbmUpIHtcbiAgY29uc3QgY2FudmFzID0gc2NlbmUuY2FudmFzO1xuICBjb25zdCBjZW50ZXIgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoXG4gICAgICBjYW52YXMuY2xpZW50V2lkdGggLyAyLFxuICAgICAgY2FudmFzLmNsaWVudEhlaWdodCAvIDIpO1xuICByZXR1cm4gZXhwb3J0cy5waWNrT25UZXJyYWluT3JFbGxpcHNvaWQoc2NlbmUsIGNlbnRlcik7XG59O1xuXG5cbi8qKlxuICogQ29tcHV0ZSB0aGUgc2lnbmVkIHRpbHQgYW5nbGUgb24gZ2xvYmUsIGJldHdlZW4gdGhlIG9wcG9zaXRlIG9mIHRoZVxuICogY2FtZXJhIGRpcmVjdGlvbiBhbmQgdGhlIHRhcmdldCBub3JtYWwuIFJldHVybiB1bmRlZmluZWQgaWYgdGhlcmUgaXMgbm9cbiAqIGludGVyc2VjdGlvbiBvZiB0aGUgY2FtZXJhIGRpcmVjdGlvbiB3aXRoIHRoZSBnbG9iZS5cbiAqIEBwYXJhbSB7IUNlc2l1bS5TY2VuZX0gc2NlbmVcbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMuY29tcHV0ZVNpZ25lZFRpbHRBbmdsZU9uR2xvYmUgPSBmdW5jdGlvbihzY2VuZSkge1xuICBjb25zdCBjYW1lcmEgPSBzY2VuZS5jYW1lcmE7XG4gIGNvbnN0IHJheSA9IG5ldyBDZXNpdW0uUmF5KGNhbWVyYS5wb3NpdGlvbiwgY2FtZXJhLmRpcmVjdGlvbik7XG4gIGxldCB0YXJnZXQgPSBzY2VuZS5nbG9iZS5waWNrKHJheSwgc2NlbmUpO1xuXG4gIGlmICghdGFyZ2V0KSB7XG4gICAgLy8gbm8gdGlsZXMgaW4gdGhlIGFyZWEgd2VyZSBsb2FkZWQ/XG4gICAgY29uc3QgZWxsaXBzb2lkID0gQ2VzaXVtLkVsbGlwc29pZC5XR1M4NDtcbiAgICBjb25zdCBvYmogPSBDZXNpdW0uSW50ZXJzZWN0aW9uVGVzdHMucmF5RWxsaXBzb2lkKHJheSwgZWxsaXBzb2lkKTtcbiAgICBpZiAob2JqKSB7XG4gICAgICB0YXJnZXQgPSBDZXNpdW0uUmF5LmdldFBvaW50KHJheSwgb2JqLnN0YXJ0KTtcbiAgICB9XG4gIH1cblxuICBpZiAoIXRhcmdldCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zdCBub3JtYWwgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKTtcbiAgQ2VzaXVtLkVsbGlwc29pZC5XR1M4NC5nZW9jZW50cmljU3VyZmFjZU5vcm1hbCh0YXJnZXQsIG5vcm1hbCk7XG5cbiAgY29uc3QgYW5nbGVCZXR3ZWVuID0gZXhwb3J0cy5zaWduZWRBbmdsZUJldHdlZW47XG4gIGNvbnN0IGFuZ2xlID0gYW5nbGVCZXR3ZWVuKGNhbWVyYS5kaXJlY3Rpb24sIG5vcm1hbCwgY2FtZXJhLnJpZ2h0KSAtIE1hdGguUEk7XG4gIHJldHVybiBDZXNpdW0uTWF0aC5jb252ZXJ0TG9uZ2l0dWRlUmFuZ2UoYW5nbGUpO1xufTtcblxuXG4vKipcbiAqIENvbXB1dGUgdGhlIHJheSBmcm9tIHRoZSBjYW1lcmEgdG8gdGhlIGJvdHRvbS1jZW50ZXIgb2YgdGhlIHNjcmVlbi5cbiAqIEBwYXJhbSB7IUNlc2l1bS5TY2VuZX0gc2NlbmVcbiAqIEByZXR1cm4geyFDZXNpdW0uUmF5fVxuICovXG5leHBvcnRzLmJvdHRvbUZvdlJheSA9IGZ1bmN0aW9uKHNjZW5lKSB7XG4gIGNvbnN0IGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgY29uc3QgZm92eTIgPSBjYW1lcmEuZnJ1c3R1bS5mb3Z5IC8gMjtcbiAgY29uc3QgZGlyZWN0aW9uID0gY2FtZXJhLmRpcmVjdGlvbjtcbiAgY29uc3Qgcm90YXRpb24gPSBDZXNpdW0uUXVhdGVybmlvbi5mcm9tQXhpc0FuZ2xlKGNhbWVyYS5yaWdodCwgZm92eTIpO1xuICBjb25zdCBtYXRyaXggPSBDZXNpdW0uTWF0cml4My5mcm9tUXVhdGVybmlvbihyb3RhdGlvbik7XG4gIGNvbnN0IHZlY3RvciA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICBDZXNpdW0uTWF0cml4My5tdWx0aXBseUJ5VmVjdG9yKG1hdHJpeCwgZGlyZWN0aW9uLCB2ZWN0b3IpO1xuICByZXR1cm4gbmV3IENlc2l1bS5SYXkoY2FtZXJhLnBvc2l0aW9uLCB2ZWN0b3IpO1xufTtcblxuXG4vKipcbiAqIENvbXB1dGUgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIENhcnRlc2lhbjMuXG4gKiBAcGFyYW0geyFDZXNpdW0uQ2FydGVzaWFuM30gZmlyc3RcbiAqIEBwYXJhbSB7IUNlc2l1bS5DYXJ0ZXNpYW4zfSBzZWNvbmRcbiAqIEBwYXJhbSB7IUNlc2l1bS5DYXJ0ZXNpYW4zfSBub3JtYWwgTm9ybWFsIHRvIHRlc3Qgb3JpZW50YXRpb24gYWdhaW5zdC5cbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZXhwb3J0cy5zaWduZWRBbmdsZUJldHdlZW4gPSBmdW5jdGlvbihmaXJzdCwgc2Vjb25kLCBub3JtYWwpIHtcbiAgLy8gV2UgYXJlIHVzaW5nIHRoZSBkb3QgZm9yIHRoZSBhbmdsZS5cbiAgLy8gVGhlbiB0aGUgY3Jvc3MgYW5kIHRoZSBkb3QgZm9yIHRoZSBzaWduLlxuICBjb25zdCBhID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCk7XG4gIGNvbnN0IGIgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKTtcbiAgY29uc3QgYyA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICBDZXNpdW0uQ2FydGVzaWFuMy5ub3JtYWxpemUoZmlyc3QsIGEpO1xuICBDZXNpdW0uQ2FydGVzaWFuMy5ub3JtYWxpemUoc2Vjb25kLCBiKTtcbiAgQ2VzaXVtLkNhcnRlc2lhbjMuY3Jvc3MoYSwgYiwgYyk7XG5cbiAgY29uc3QgY29zaW5lID0gQ2VzaXVtLkNhcnRlc2lhbjMuZG90KGEsIGIpO1xuICBjb25zdCBzaW5lID0gQ2VzaXVtLkNhcnRlc2lhbjMubWFnbml0dWRlKGMpO1xuXG4gIC8vIFNpZ24gb2YgdGhlIHZlY3RvciBwcm9kdWN0IGFuZCB0aGUgb3JpZW50YXRpb24gbm9ybWFsXG4gIGNvbnN0IHNpZ24gPSBDZXNpdW0uQ2FydGVzaWFuMy5kb3Qobm9ybWFsLCBjKTtcbiAgY29uc3QgYW5nbGUgPSBNYXRoLmF0YW4yKHNpbmUsIGNvc2luZSk7XG4gIHJldHVybiBzaWduID49IDAgPyBhbmdsZSA6IC1hbmdsZTtcbn07XG5cblxuLyoqXG4gKiBDb21wdXRlIHRoZSByb3RhdGlvbiBhbmdsZSBhcm91bmQgYSBnaXZlbiBwb2ludCwgbmVlZGVkIHRvIHJlYWNoIHRoZVxuICogemVuaXRoIHBvc2l0aW9uLlxuICogQXQgYSB6ZW5pdGggcG9zaXRpb24sIHRoZSBjYW1lcmEgZGlyZWN0aW9uIGlzIGdvaW5nIHRocm91Z3RoIHRoZSBlYXJ0aFxuICogY2VudGVyIGFuZCB0aGUgZnJ1c3RydW0gYm90dG9tIHJheSBpcyBnb2luZyB0aHJvdWdoIHRoZSBjaG9zZW4gcGl2b3RcbiAqIHBvaW50LlxuICogVGhlIGJvdHRvbS1jZW50ZXIgb2YgdGhlIHNjcmVlbiBpcyBhIGdvb2QgY2FuZGlkYXRlIGZvciB0aGUgcGl2b3QgcG9pbnQuXG4gKiBAcGFyYW0geyFDZXNpdW0uU2NlbmV9IHNjZW5lXG4gKiBAcGFyYW0geyFDZXNpdW0uQ2FydGVzaWFuM30gcGl2b3QgUG9pbnQgYXJvdW5kIHdoaWNoIHRoZSBjYW1lcmEgcm90YXRlcy5cbiAqIEByZXR1cm4ge251bWJlcn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0cy5jb21wdXRlQW5nbGVUb1plbml0aCA9IGZ1bmN0aW9uKHNjZW5lLCBwaXZvdCkge1xuICAvLyBUaGlzIGFuZ2xlIGlzIHRoZSBzdW0gb2YgdGhlIGFuZ2xlcyAnZnknIGFuZCAnYScsIHdoaWNoIGFyZSBkZWZpbmVkXG4gIC8vIHVzaW5nIHRoZSBwaXZvdCBwb2ludCBhbmQgaXRzIHN1cmZhY2Ugbm9ybWFsLlxuICAvLyAgICAgICAgWmVuaXRoIHwgICAgY2FtZXJhXG4gIC8vICAgICAgICAgICBcXCAgIHwgICAvXG4gIC8vICAgICAgICAgICAgXFxmeXwgIC9cbiAgLy8gICAgICAgICAgICAgXFwgfGEvXG4gIC8vICAgICAgICAgICAgICBcXHwvcGl2b3RcbiAgY29uc3QgY2FtZXJhID0gc2NlbmUuY2FtZXJhO1xuICBjb25zdCBmeSA9IGNhbWVyYS5mcnVzdHVtLmZvdnkgLyAyO1xuICBjb25zdCByYXkgPSBleHBvcnRzLmJvdHRvbUZvdlJheShzY2VuZSk7XG4gIGNvbnN0IGRpcmVjdGlvbiA9IENlc2l1bS5DYXJ0ZXNpYW4zLmNsb25lKHJheS5kaXJlY3Rpb24pO1xuICBDZXNpdW0uQ2FydGVzaWFuMy5uZWdhdGUoZGlyZWN0aW9uLCBkaXJlY3Rpb24pO1xuXG4gIGNvbnN0IG5vcm1hbCA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICBDZXNpdW0uRWxsaXBzb2lkLldHUzg0Lmdlb2NlbnRyaWNTdXJmYWNlTm9ybWFsKHBpdm90LCBub3JtYWwpO1xuXG4gIGNvbnN0IGxlZnQgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKTtcbiAgQ2VzaXVtLkNhcnRlc2lhbjMubmVnYXRlKGNhbWVyYS5yaWdodCwgbGVmdCk7XG5cbiAgY29uc3QgYSA9IGV4cG9ydHMuc2lnbmVkQW5nbGVCZXR3ZWVuKG5vcm1hbCwgZGlyZWN0aW9uLCBsZWZ0KTtcbiAgcmV0dXJuIGEgKyBmeTtcbn07XG5cblxuLyoqXG4gKiBDb252ZXJ0IGFuIE9wZW5MYXllcnMgZXh0ZW50IHRvIGEgQ2VzaXVtIHJlY3RhbmdsZS5cbiAqIEBwYXJhbSB7b2wuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtvbC5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBFeHRlbnQgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0Nlc2l1bS5SZWN0YW5nbGV9IFRoZSBjb3JyZXNwb25kaW5nIENlc2l1bSByZWN0YW5nbGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMuZXh0ZW50VG9SZWN0YW5nbGUgPSBmdW5jdGlvbihleHRlbnQsIHByb2plY3Rpb24pIHtcbiAgaWYgKGV4dGVudCAmJiBwcm9qZWN0aW9uKSB7XG4gICAgY29uc3QgZXh0ID0gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgcHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICAgIHJldHVybiBDZXNpdW0uUmVjdGFuZ2xlLmZyb21EZWdyZWVzKGV4dFswXSwgZXh0WzFdLCBleHRbMl0sIGV4dFszXSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBDcmVhdGVzIENlc2l1bS5JbWFnZXJ5TGF5ZXIgYmVzdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBvbC5sYXllci5MYXllci5cbiAqIE9ubHkgc3VwcG9ydHMgcmFzdGVyIGxheWVycyBhbmQgc3RhdGljIGltYWdlc1xuICogQHBhcmFtIHshb2wuTWFwfSBvbE1hcFxuICogQHBhcmFtIHshb2wubGF5ZXIuQmFzZX0gb2xMYXllclxuICogQHBhcmFtIHshb2wucHJvai5Qcm9qZWN0aW9ufSB2aWV3UHJvaiBQcm9qZWN0aW9uIG9mIHRoZSB2aWV3LlxuICogQHJldHVybiB7P0Nlc2l1bS5JbWFnZXJ5TGF5ZXJ9IG51bGwgaWYgbm90IHBvc3NpYmxlIChvciBzdXBwb3J0ZWQpXG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMudGlsZUxheWVyVG9JbWFnZXJ5TGF5ZXIgPSBmdW5jdGlvbihvbE1hcCwgb2xMYXllciwgdmlld1Byb2opIHtcblxuICBpZiAoIShvbExheWVyIGluc3RhbmNlb2Ygb2xMYXllclRpbGUpICYmICEob2xMYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJJbWFnZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxldCBwcm92aWRlciA9IG51bGw7XG4gIGxldCBzb3VyY2UgPSBvbExheWVyLmdldFNvdXJjZSgpO1xuXG4gIC8vIENvbnZlcnQgSW1hZ2VXTVMgdG8gVGlsZVdNU1xuICBpZiAoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VJbWFnZVdNUyAmJiBzb3VyY2UuZ2V0VXJsKCkgJiZcbiAgICBzb3VyY2UuZ2V0SW1hZ2VMb2FkRnVuY3Rpb24oKSA9PT0gZGVmYXVsdEltYWdlTG9hZEZ1bmN0aW9uKSB7XG4gICAgY29uc3Qgc291cmNlUHJvcHMgPSB7XG4gICAgICAnb2xjcy5wcm94eSc6IHNvdXJjZS5nZXQoJ29sY3MucHJveHknKSxcbiAgICAgICdvbGNzLmV4dGVudCc6IHNvdXJjZS5nZXQoJ29sY3MuZXh0ZW50JyksXG4gICAgICAnb2xjcy5wcm9qZWN0aW9uJzogc291cmNlLmdldCgnb2xjcy5wcm9qZWN0aW9uJyksXG4gICAgICAnb2xjcy5pbWFnZXNvdXJjZSc6IHNvdXJjZVxuICAgIH07XG4gICAgc291cmNlID0gbmV3IG9sU291cmNlVGlsZVdNUyh7XG4gICAgICB1cmw6IHNvdXJjZS5nZXRVcmwoKSxcbiAgICAgIGF0dHJpYnV0aW9uczogc291cmNlLmdldEF0dHJpYnV0aW9ucygpLFxuICAgICAgcHJvamVjdGlvbjogc291cmNlLmdldFByb2plY3Rpb24oKSxcbiAgICAgIHBhcmFtczogc291cmNlLmdldFBhcmFtcygpXG4gICAgfSk7XG4gICAgc291cmNlLnNldFByb3BlcnRpZXMoc291cmNlUHJvcHMpO1xuICB9XG5cbiAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlVGlsZUltYWdlKSB7XG4gICAgbGV0IHByb2plY3Rpb24gPSBvbGNzVXRpbC5nZXRTb3VyY2VQcm9qZWN0aW9uKHNvdXJjZSk7XG5cbiAgICBpZiAoIXByb2plY3Rpb24pIHtcbiAgICAgIC8vIGlmIG5vdCBleHBsaWNpdCwgYXNzdW1lIHRoZSBzYW1lIHByb2plY3Rpb24gYXMgdmlld1xuICAgICAgcHJvamVjdGlvbiA9IHZpZXdQcm9qO1xuICAgIH1cblxuICAgIGlmIChleHBvcnRzLmlzQ2VzaXVtUHJvamVjdGlvbihwcm9qZWN0aW9uKSkge1xuICAgICAgcHJvdmlkZXIgPSBuZXcgb2xjc0NvcmVPTEltYWdlcnlQcm92aWRlcihvbE1hcCwgc291cmNlLCB2aWV3UHJvaik7XG4gICAgfVxuICAgIC8vIFByb2plY3Rpb24gbm90IHN1cHBvcnRlZCBieSBDZXNpdW1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICB9IGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlSW1hZ2VTdGF0aWMpIHtcbiAgICBsZXQgcHJvamVjdGlvbiA9IG9sY3NVdGlsLmdldFNvdXJjZVByb2plY3Rpb24oc291cmNlKTtcblxuICAgIGlmICghcHJvamVjdGlvbikge1xuICAgICAgcHJvamVjdGlvbiA9IHZpZXdQcm9qO1xuICAgIH1cblxuICAgIGlmIChleHBvcnRzLmlzQ2VzaXVtUHJvamVjdGlvbihwcm9qZWN0aW9uKSkge1xuICAgICAgcHJvdmlkZXIgPSBuZXcgQ2VzaXVtLlNpbmdsZVRpbGVJbWFnZXJ5UHJvdmlkZXIoe1xuICAgICAgICB1cmw6IHNvdXJjZS5nZXRVcmwoKSxcbiAgICAgICAgcmVjdGFuZ2xlOiBuZXcgQ2VzaXVtLlJlY3RhbmdsZS5mcm9tRGVncmVlcyhcbiAgICAgICAgICAgIHNvdXJjZS5nZXRJbWFnZUV4dGVudCgpWzBdLFxuICAgICAgICAgICAgc291cmNlLmdldEltYWdlRXh0ZW50KClbMV0sXG4gICAgICAgICAgICBzb3VyY2UuZ2V0SW1hZ2VFeHRlbnQoKVsyXSxcbiAgICAgICAgICAgIHNvdXJjZS5nZXRJbWFnZUV4dGVudCgpWzNdXG4gICAgICAgIClcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBQcm9qZWN0aW9uIG5vdCBzdXBwb3J0ZWQgYnkgQ2VzaXVtXG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gc291cmNlcyBvdGhlciB0aGFuIFRpbGVJbWFnZXxJbWFnZVN0YXRpYyBhcmUgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWRcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIHRoZSBwcm92aWRlciBpcyBhbHdheXMgbm9uLW51bGwgaWYgd2UgZ290IHRoaXMgZmFyXG5cbiAgY29uc3QgbGF5ZXJPcHRpb25zID0ge307XG5cbiAgY29uc3QgZm9yY2VkRXh0ZW50ID0gLyoqIEB0eXBlIHtvbC5FeHRlbnR9ICovIChvbExheWVyLmdldCgnb2xjcy5leHRlbnQnKSk7XG4gIGNvbnN0IGV4dCA9IGZvcmNlZEV4dGVudCB8fCBvbExheWVyLmdldEV4dGVudCgpO1xuICBpZiAoZXh0KSB7XG4gICAgbGF5ZXJPcHRpb25zLnJlY3RhbmdsZSA9IGV4cG9ydHMuZXh0ZW50VG9SZWN0YW5nbGUoZXh0LCB2aWV3UHJvaik7XG4gIH1cblxuICBjb25zdCBjZXNpdW1MYXllciA9IG5ldyBDZXNpdW0uSW1hZ2VyeUxheWVyKHByb3ZpZGVyLCBsYXllck9wdGlvbnMpO1xuICByZXR1cm4gY2VzaXVtTGF5ZXI7XG59O1xuXG5cbi8qKlxuICogU3luY2hyb25pemVzIHRoZSBsYXllciByZW5kZXJpbmcgcHJvcGVydGllcyAob3BhY2l0eSwgdmlzaWJsZSlcbiAqIHRvIHRoZSBnaXZlbiBDZXNpdW0gSW1hZ2VyeUxheWVyLlxuICogQHBhcmFtIHtvbGNzeC5MYXllcldpdGhQYXJlbnRzfSBvbExheWVyV2l0aFBhcmVudHNcbiAqIEBwYXJhbSB7IUNlc2l1bS5JbWFnZXJ5TGF5ZXJ9IGNzTGF5ZXJcbiAqIEBhcGlcbiAqL1xuZXhwb3J0cy51cGRhdGVDZXNpdW1MYXllclByb3BlcnRpZXMgPSBmdW5jdGlvbihvbExheWVyV2l0aFBhcmVudHMsIGNzTGF5ZXIpIHtcbiAgbGV0IG9wYWNpdHkgPSAxO1xuICBsZXQgdmlzaWJsZSA9IHRydWU7XG4gIFtvbExheWVyV2l0aFBhcmVudHMubGF5ZXJdLmNvbmNhdChvbExheWVyV2l0aFBhcmVudHMucGFyZW50cykuZm9yRWFjaCgob2xMYXllcikgPT4ge1xuICAgIGNvbnN0IGxheWVyT3BhY2l0eSA9IG9sTGF5ZXIuZ2V0T3BhY2l0eSgpO1xuICAgIGlmIChsYXllck9wYWNpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgb3BhY2l0eSAqPSBsYXllck9wYWNpdHk7XG4gICAgfVxuICAgIGNvbnN0IGxheWVyVmlzaWJsZSA9IG9sTGF5ZXIuZ2V0VmlzaWJsZSgpO1xuICAgIGlmIChsYXllclZpc2libGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmlzaWJsZSAmPSBsYXllclZpc2libGU7XG4gICAgfVxuICB9KTtcbiAgY3NMYXllci5hbHBoYSA9IG9wYWNpdHk7XG4gIGNzTGF5ZXIuc2hvdyA9IHZpc2libGU7XG59O1xuXG5cbi8qKlxuICogQ29udmVydCBhIDJEIG9yIDNEIE9wZW5MYXllcnMgY29vcmRpbmF0ZSB0byBDZXNpdW0uXG4gKiBAcGFyYW0ge29sLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgT2wzIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHshQ2VzaXVtLkNhcnRlc2lhbjN9IENlc2l1bSBjYXJ0ZXNpYW4gY29vcmRpbmF0ZVxuICogQGFwaVxuICovXG5leHBvcnRzLm9sNDMyNkNvb3JkaW5hdGVUb0Nlc2l1bUNhcnRlc2lhbiA9IGZ1bmN0aW9uKGNvb3JkaW5hdGUpIHtcbiAgY29uc3QgY29vID0gY29vcmRpbmF0ZTtcbiAgcmV0dXJuIGNvby5sZW5ndGggPiAyID9cbiAgICBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcyhjb29bMF0sIGNvb1sxXSwgY29vWzJdKSA6XG4gICAgQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMoY29vWzBdLCBjb29bMV0pO1xufTtcblxuXG4vKipcbiAqIENvbnZlcnQgYW4gYXJyYXkgb2YgMkQgb3IgM0QgT3BlbkxheWVycyBjb29yZGluYXRlcyB0byBDZXNpdW0uXG4gKiBAcGFyYW0ge0FycmF5Ljwhb2wuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIE9sMyBjb29yZGluYXRlcy5cbiAqIEByZXR1cm4geyFBcnJheS48Q2VzaXVtLkNhcnRlc2lhbjM+fSBDZXNpdW0gY2FydGVzaWFuIGNvb3JkaW5hdGVzXG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMub2w0MzI2Q29vcmRpbmF0ZUFycmF5VG9Dc0NhcnRlc2lhbnMgPSBmdW5jdGlvbihjb29yZGluYXRlcykge1xuICBjb25zb2xlLmFzc2VydChjb29yZGluYXRlcyAhPT0gbnVsbCk7XG4gIGNvbnN0IHRvQ2FydGVzaWFuID0gZXhwb3J0cy5vbDQzMjZDb29yZGluYXRlVG9DZXNpdW1DYXJ0ZXNpYW47XG4gIGNvbnN0IGNhcnRlc2lhbnMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7ICsraSkge1xuICAgIGNhcnRlc2lhbnMucHVzaCh0b0NhcnRlc2lhbihjb29yZGluYXRlc1tpXSkpO1xuICB9XG4gIHJldHVybiBjYXJ0ZXNpYW5zO1xufTtcblxuXG4vKipcbiAqIFJlcHJvamVjdCBhbiBPcGVuTGF5ZXJzIGdlb21ldHJ5IHRvIEVQU0c6NDMyNiBpZiBuZWVkZWQuXG4gKiBUaGUgZ2VvbWV0cnkgd2lsbCBiZSBjbG9uZWQgb25seSB3aGVuIG9yaWdpbmFsIHByb2plY3Rpb24gaXMgbm90IEVQU0c6NDMyNlxuICogYW5kIHRoZSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2hhbGxvdyBjb3BpZWQuXG4gKiBAcGFyYW0geyFUfSBnZW9tZXRyeVxuICogQHBhcmFtIHshb2wuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25cbiAqIEByZXR1cm4geyFUfVxuICogQHRlbXBsYXRlIFRcbiAqIEBhcGlcbiAqL1xuZXhwb3J0cy5vbEdlb21ldHJ5Q2xvbmVUbzQzMjYgPSBmdW5jdGlvbihnZW9tZXRyeSwgcHJvamVjdGlvbikge1xuICBjb25zb2xlLmFzc2VydChwcm9qZWN0aW9uKTtcblxuICBjb25zdCBwcm9qNDMyNiA9IGdldFByb2plY3Rpb24oJ0VQU0c6NDMyNicpO1xuICBjb25zdCBwcm9qID0gZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgaWYgKHByb2ogIT09IHByb2o0MzI2KSB7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IGdlb21ldHJ5LmdldFByb3BlcnRpZXMoKTtcbiAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCk7XG4gICAgZ2VvbWV0cnkudHJhbnNmb3JtKHByb2osIHByb2o0MzI2KTtcbiAgICBnZW9tZXRyeS5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICB9XG4gIHJldHVybiBnZW9tZXRyeTtcbn07XG5cblxuLyoqXG4gKiBDb252ZXJ0IGFuIE9wZW5MYXllcnMgY29sb3IgdG8gQ2VzaXVtLlxuICogQHBhcmFtIHtvbC5Db2xvcnxDYW52YXNHcmFkaWVudHxDYW52YXNQYXR0ZXJufHN0cmluZ30gb2xDb2xvclxuICogQHJldHVybiB7IUNlc2l1bS5Db2xvcn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0cy5jb252ZXJ0Q29sb3JUb0Nlc2l1bSA9IGZ1bmN0aW9uKG9sQ29sb3IpIHtcbiAgb2xDb2xvciA9IG9sQ29sb3IgfHwgJ2JsYWNrJztcbiAgaWYgKEFycmF5LmlzQXJyYXkob2xDb2xvcikpIHtcbiAgICByZXR1cm4gbmV3IENlc2l1bS5Db2xvcihcbiAgICAgICAgQ2VzaXVtLkNvbG9yLmJ5dGVUb0Zsb2F0KG9sQ29sb3JbMF0pLFxuICAgICAgICBDZXNpdW0uQ29sb3IuYnl0ZVRvRmxvYXQob2xDb2xvclsxXSksXG4gICAgICAgIENlc2l1bS5Db2xvci5ieXRlVG9GbG9hdChvbENvbG9yWzJdKSxcbiAgICAgICAgb2xDb2xvclszXVxuICAgICk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9sQ29sb3IgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gQ2VzaXVtLkNvbG9yLmZyb21Dc3NDb2xvclN0cmluZyhvbENvbG9yKTtcbiAgfSBlbHNlIGlmIChvbENvbG9yIGluc3RhbmNlb2YgQ2FudmFzUGF0dGVybiB8fCBvbENvbG9yIGluc3RhbmNlb2YgQ2FudmFzR3JhZGllbnQpIHtcbiAgICAvLyBSZW5kZXIgdGhlIENhbnZhc1BhdHRlcm4vQ2FudmFzR3JhZGllbnQgaW50byBhIGNhbnZhcyB0aGF0IHdpbGwgYmUgc2VudCB0byBDZXNpdW0gYXMgbWF0ZXJpYWxcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gMjU2O1xuICAgIGN0eC5maWxsU3R5bGUgPSBvbENvbG9yO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIHJldHVybiBuZXcgQ2VzaXVtLkltYWdlTWF0ZXJpYWxQcm9wZXJ0eSh7XG4gICAgICBpbWFnZTogY2FudmFzXG4gICAgfSk7XG4gIH1cbiAgY29uc29sZS5hc3NlcnQoZmFsc2UsICdpbXBvc3NpYmxlJyk7XG59O1xuXG5cbi8qKlxuICogQ29udmVydCBhbiBPcGVuTGF5ZXJzIHVybCB0byBDZXNpdW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHshQ2VzaXVtVXJsRGVmaW5pdGlvbn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0cy5jb252ZXJ0VXJsVG9DZXNpdW0gPSBmdW5jdGlvbih1cmwpIHtcbiAgbGV0IHN1YmRvbWFpbnMgPSAnJztcbiAgY29uc3QgcmUgPSAvXFx7KFxcZHxbYS16XSktKFxcZHxbYS16XSlcXH0vO1xuICBjb25zdCBtYXRjaCA9IHJlLmV4ZWModXJsKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgdXJsID0gdXJsLnJlcGxhY2UocmUsICd7c30nKTtcbiAgICBjb25zdCBzdGFydENoYXJDb2RlID0gbWF0Y2hbMV0uY2hhckNvZGVBdCgwKTtcbiAgICBjb25zdCBzdG9wQ2hhckNvZGUgPSBtYXRjaFsyXS5jaGFyQ29kZUF0KDApO1xuICAgIGxldCBjaGFyQ29kZTtcbiAgICBmb3IgKGNoYXJDb2RlID0gc3RhcnRDaGFyQ29kZTsgY2hhckNvZGUgPD0gc3RvcENoYXJDb2RlOyArK2NoYXJDb2RlKSB7XG4gICAgICBzdWJkb21haW5zICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIHVybCxcbiAgICBzdWJkb21haW5zXG4gIH07XG59O1xuXG5cbi8qKlxuICogQW5pbWF0ZSB0aGUgcmV0dXJuIHRvIGEgdG9wLWRvd24gdmlldyBmcm9tIHRoZSB6ZW5pdGguXG4gKiBUaGUgY2FtZXJhIGlzIHJvdGF0ZWQgdG8gb3JpZW50IHRvIHRoZSBOb3J0aC5cbiAqIEBwYXJhbSB7IW9sLk1hcH0gbWFwXG4gKiBAcGFyYW0geyFDZXNpdW0uU2NlbmV9IHNjZW5lXG4gKiBAcmV0dXJuIHtQcm9taXNlPHVuZGVmaW5lZD59XG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMucmVzZXRUb05vcnRoWmVuaXRoID0gZnVuY3Rpb24obWFwLCBzY2VuZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgICBjb25zdCBwaXZvdCA9IGV4cG9ydHMucGlja0JvdHRvbVBvaW50KHNjZW5lKTtcbiAgICBpZiAoIXBpdm90KSB7XG4gICAgICByZWplY3QoJ0NvdWxkIG5vdCBnZXQgYm90dG9tIHBpdm90Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudEhlYWRpbmcgPSBtYXAuZ2V0VmlldygpLmdldFJvdGF0aW9uKCk7XG4gICAgaWYgKGN1cnJlbnRIZWFkaW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlamVjdCgnVGhlIHZpZXcgaXMgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFuZ2xlID0gZXhwb3J0cy5jb21wdXRlQW5nbGVUb1plbml0aChzY2VuZSwgcGl2b3QpO1xuXG4gICAgLy8gUG9pbnQgdG8gTm9ydGhcbiAgICBleHBvcnRzLnNldEhlYWRpbmdVc2luZ0JvdHRvbUNlbnRlcihzY2VuZSwgY3VycmVudEhlYWRpbmcsIHBpdm90KTtcblxuICAgIC8vIEdvIHRvIHplbml0aFxuICAgIGNvbnN0IHRyYW5zZm9ybSA9IENlc2l1bS5NYXRyaXg0LmZyb21UcmFuc2xhdGlvbihwaXZvdCk7XG4gICAgY29uc3QgYXhpcyA9IGNhbWVyYS5yaWdodDtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGV4cG9ydHMubm9ybWFsaXplVmlldyh2aWV3KTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgZXhwb3J0cy5yb3RhdGVBcm91bmRBeGlzKGNhbWVyYSwgLWFuZ2xlLCBheGlzLCB0cmFuc2Zvcm0sIG9wdGlvbnMpO1xuICB9KTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0geyFDZXNpdW0uU2NlbmV9IHNjZW5lXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgaW4gcmFkaWFuXG4gKiBAcmV0dXJuIHtQcm9taXNlPHVuZGVmaW5lZD59XG4gKiBAYXBpXG4gKi9cbmV4cG9ydHMucm90YXRlQXJvdW5kQm90dG9tQ2VudGVyID0gZnVuY3Rpb24oc2NlbmUsIGFuZ2xlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgY2FtZXJhID0gc2NlbmUuY2FtZXJhO1xuICAgIGNvbnN0IHBpdm90ID0gZXhwb3J0cy5waWNrQm90dG9tUG9pbnQoc2NlbmUpO1xuICAgIGlmICghcGl2b3QpIHtcbiAgICAgIHJlamVjdCgnY291bGQgbm90IGdldCBib3R0b20gcGl2b3QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0ge2NhbGxiYWNrOiByZXNvbHZlfTtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBDZXNpdW0uTWF0cml4NC5mcm9tVHJhbnNsYXRpb24ocGl2b3QpO1xuICAgIGNvbnN0IGF4aXMgPSBjYW1lcmEucmlnaHQ7XG4gICAgY29uc3Qgcm90YXRlQXJvdW5kQXhpcyA9IGV4cG9ydHMucm90YXRlQXJvdW5kQXhpcztcbiAgICByb3RhdGVBcm91bmRBeGlzKGNhbWVyYSwgLWFuZ2xlLCBheGlzLCB0cmFuc2Zvcm0sIG9wdGlvbnMpO1xuICB9KTtcbn07XG5cblxuLyoqXG4gKiBTZXQgdGhlIE9wZW5MYXllcnMgdmlldyB0byBhIHNwZWNpZmljIHJvdGF0aW9uIGFuZFxuICogdGhlIG5lYXJlc3QgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7b2wuVmlld30gdmlld1xuICogQHBhcmFtIHtudW1iZXI9fSBhbmdsZVxuICogQGFwaVxuICovXG5leHBvcnRzLm5vcm1hbGl6ZVZpZXcgPSBmdW5jdGlvbih2aWV3LCBhbmdsZSA9IDApIHtcbiAgY29uc3QgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuICB2aWV3LnNldFJvdGF0aW9uKGFuZ2xlKTtcbiAgaWYgKHZpZXcuY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgIHZpZXcuc2V0UmVzb2x1dGlvbih2aWV3LmNvbnN0cmFpblJlc29sdXRpb24ocmVzb2x1dGlvbikpO1xuICB9IGVsc2Uge1xuICAgIHZpZXcuc2V0UmVzb2x1dGlvbih2aWV3LmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbihyZXNvbHV0aW9uKSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIHByb2plY3Rpb24gaXMgbWFuYWdlZCBieSBDZXNpdW0gKFdHUzg0IG9yIE1lcmNhdG9yIFNwaGVyaWMpXG4gKlxuICogQHBhcmFtIHtvbC5wcm9qLlByb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIGl0J3MgbWFuYWdlZCBieSBDZXNpdW0uXG4gKi9cbmV4cG9ydHMuaXNDZXNpdW1Qcm9qZWN0aW9uID0gZnVuY3Rpb24ocHJvamVjdGlvbikge1xuICBjb25zdCBpczM4NTcgPSBwcm9qZWN0aW9uID09PSBnZXRQcm9qZWN0aW9uKCdFUFNHOjM4NTcnKTtcbiAgY29uc3QgaXM0MzI2ID0gcHJvamVjdGlvbiA9PT0gZ2V0UHJvamVjdGlvbignRVBTRzo0MzI2Jyk7XG4gIHJldHVybiBpczM4NTcgfHwgaXM0MzI2O1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBleHBvcnRzO1xuIiwiLyoqXG4gKiBDb252ZXJ0cyByYWRpYW5zIHRvIHRvIGRlZ3JlZXMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5SYWRpYW5zIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIGluIGRlZ3JlZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RlZ3JlZXMoYW5nbGVJblJhZGlhbnMpIHtcbiAgcmV0dXJuIGFuZ2xlSW5SYWRpYW5zICogMTgwIC8gTWF0aC5QSTtcbn1cblxuXG4vKipcbiAqIENvbnZlcnRzIGRlZ3JlZXMgdG8gcmFkaWFucy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJbkRlZ3JlZXMgQW5nbGUgaW4gZGVncmVlcy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gcmFkaWFucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFucyhhbmdsZUluRGVncmVlcykge1xuICByZXR1cm4gYW5nbGVJbkRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sY3MuQ2FtZXJhXG4gKi9cblxuaW1wb3J0IHt1bkJ5S2V5IGFzIG9sT2JzZXJ2YWJsZVVuQnlLZXl9IGZyb20gJ29sL09ic2VydmFibGUuanMnO1xuaW1wb3J0IHt0b1JhZGlhbnMsIHRvRGVncmVlc30gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7Z2V0VHJhbnNmb3JtfSBmcm9tICdvbC9wcm9qLmpzJztcbmltcG9ydCBvbGNzQ29yZSBmcm9tICcuL2NvcmUuanMnO1xuXG5jbGFzcyBDYW1lcmEge1xuICAvKipcbiAgICogVGhpcyBvYmplY3QgdGFrZXMgY2FyZSBvZiBhZGRpdGlvbmFsIDNkLXNwZWNpZmljIHByb3BlcnRpZXMgb2YgdGhlIHZpZXcgYW5kXG4gICAqIGVuc3VyZXMgcHJvcGVyIHN5bmNocm9uaXphdGlvbiB3aXRoIHRoZSB1bmRlcmx5aW5nIHJhdyBDZXNpdW0uQ2FtZXJhIG9iamVjdC5cbiAgICogQHBhcmFtIHshQ2VzaXVtLlNjZW5lfSBzY2VuZVxuICAgKiBAcGFyYW0geyFvbC5NYXB9IG1hcFxuICAgKiBAYXBpXG4gICAqL1xuICBjb25zdHJ1Y3RvcihzY2VuZSwgbWFwKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFDZXNpdW0uU2NlbmV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNjZW5lXyA9IHNjZW5lO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFDZXNpdW0uQ2FtZXJhfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jYW1fID0gc2NlbmUuY2FtZXJhO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFvbC5NYXB9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1hcF8gPSBtYXA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P29sLlZpZXd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnZpZXdfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/b2wuRXZlbnRzS2V5fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy52aWV3TGlzdGVuS2V5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IW9sLlRyYW5zZm9ybUZ1bmN0aW9ufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50b0xvbkxhdF8gPSBDYW1lcmEuaWRlbnRpdHlQcm9qZWN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFvbC5UcmFuc2Zvcm1GdW5jdGlvbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZnJvbUxvbkxhdF8gPSBDYW1lcmEuaWRlbnRpdHlQcm9qZWN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogMCAtLSB0b3Bkb3duLCBQSS8yIC0tIHRoZSBob3Jpem9uXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudGlsdF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZGlzdGFuY2VfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/Q2VzaXVtLk1hdHJpeDR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxhc3RDYW1lcmFWaWV3TWF0cml4XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZGlzY2FyZCBjaGFuZ2UgZXZlbnRzIG9uIHZpZXcgY2F1c2VkIGJ5IHVwZGF0ZVZpZXcgbWV0aG9kLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy52aWV3VXBkYXRlSW5Qcm9ncmVzc18gPSBmYWxzZTtcblxuICAgIHRoaXMubWFwXy5vbignY2hhbmdlOnZpZXcnLCAoZSkgPT4ge1xuICAgICAgdGhpcy5zZXRWaWV3Xyh0aGlzLm1hcF8uZ2V0VmlldygpKTtcbiAgICB9KTtcbiAgICB0aGlzLnNldFZpZXdfKHRoaXMubWFwXy5nZXRWaWV3KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IGlucHV0IElucHV0IGNvb3JkaW5hdGUgYXJyYXkuXG4gICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj49fSBvcHRfb3V0cHV0IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbi5cbiAgICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59IElucHV0IGNvb3JkaW5hdGUgYXJyYXkgKHNhbWUgYXJyYXkgYXMgaW5wdXQpLlxuICAgKi9cbiAgc3RhdGljIGlkZW50aXR5UHJvamVjdGlvbihpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIGNvbnN0IGRpbSA9IG9wdF9kaW1lbnNpb24gfHwgaW5wdXQubGVuZ3RoO1xuICAgIGlmIChvcHRfb3V0cHV0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpbTsgKytpKSB7XG4gICAgICAgIG9wdF9vdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P29sLlZpZXd9IHZpZXcgTmV3IHZpZXcgdG8gdXNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2V0Vmlld18odmlldykge1xuICAgIGlmICh0aGlzLnZpZXdfKSB7XG4gICAgICBvbE9ic2VydmFibGVVbkJ5S2V5KHRoaXMudmlld0xpc3RlbktleV8pO1xuICAgICAgdGhpcy52aWV3TGlzdGVuS2V5XyA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy52aWV3XyA9IHZpZXc7XG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIGNvbnN0IHRvTG9uTGF0ID0gZ2V0VHJhbnNmb3JtKHZpZXcuZ2V0UHJvamVjdGlvbigpLCAnRVBTRzo0MzI2Jyk7XG4gICAgICBjb25zdCBmcm9tTG9uTGF0ID0gZ2V0VHJhbnNmb3JtKCdFUFNHOjQzMjYnLCB2aWV3LmdldFByb2plY3Rpb24oKSk7XG4gICAgICBjb25zb2xlLmFzc2VydCh0b0xvbkxhdCAmJiBmcm9tTG9uTGF0KTtcblxuICAgICAgdGhpcy50b0xvbkxhdF8gPSB0b0xvbkxhdDtcbiAgICAgIHRoaXMuZnJvbUxvbkxhdF8gPSBmcm9tTG9uTGF0O1xuXG4gICAgICB0aGlzLnZpZXdMaXN0ZW5LZXlfID0gdmlldy5vbigncHJvcGVydHljaGFuZ2UnLCBlID0+IHRoaXMuaGFuZGxlVmlld0V2ZW50XyhlKSk7XG5cbiAgICAgIHRoaXMucmVhZEZyb21WaWV3KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudG9Mb25MYXRfID0gQ2FtZXJhLmlkZW50aXR5UHJvamVjdGlvbjtcbiAgICAgIHRoaXMuZnJvbUxvbkxhdF8gPSBDYW1lcmEuaWRlbnRpdHlQcm9qZWN0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez99IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZVZpZXdFdmVudF8oZSkge1xuICAgIGlmICghdGhpcy52aWV3VXBkYXRlSW5Qcm9ncmVzc18pIHtcbiAgICAgIHRoaXMucmVhZEZyb21WaWV3KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWFkaW5nIEluIHJhZGlhbnMuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldEhlYWRpbmcoaGVhZGluZykge1xuICAgIGlmICghdGhpcy52aWV3Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudmlld18uc2V0Um90YXRpb24oaGVhZGluZyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gSGVhZGluZyBpbiByYWRpYW5zLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRIZWFkaW5nKCkge1xuICAgIGlmICghdGhpcy52aWV3Xykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLnZpZXdfLmdldFJvdGF0aW9uKCk7XG4gICAgcmV0dXJuIHJvdGF0aW9uIHx8IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbHQgSW4gcmFkaWFucy5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VGlsdCh0aWx0KSB7XG4gICAgdGhpcy50aWx0XyA9IHRpbHQ7XG4gICAgdGhpcy51cGRhdGVDYW1lcmFfKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBUaWx0IGluIHJhZGlhbnMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRpbHQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsdF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIEluIG1ldGVycy5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0RGlzdGFuY2UoZGlzdGFuY2UpIHtcbiAgICB0aGlzLmRpc3RhbmNlXyA9IGRpc3RhbmNlO1xuICAgIHRoaXMudXBkYXRlQ2FtZXJhXygpO1xuICAgIHRoaXMudXBkYXRlVmlldygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UgaW4gbWV0ZXJzLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXREaXN0YW5jZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXN0YW5jZV87XG4gIH1cblxuICAvKipcbiAgICogU2hvcnRjdXQgZm9yIG9sLlZpZXcuc2V0Q2VudGVyKCkuXG4gICAqIEBwYXJhbSB7IW9sLkNvb3JkaW5hdGV9IGNlbnRlciBTYW1lIHByb2plY3Rpb24gYXMgdGhlIG9sLlZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldENlbnRlcihjZW50ZXIpIHtcbiAgICBpZiAoIXRoaXMudmlld18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy52aWV3Xy5zZXRDZW50ZXIoY2VudGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG9ydGN1dCBmb3Igb2wuVmlldy5nZXRDZW50ZXIoKS5cbiAgICogQHJldHVybiB7b2wuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFNhbWUgcHJvamVjdGlvbiBhcyB0aGUgb2wuVmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Q2VudGVyKCkge1xuICAgIGlmICghdGhpcy52aWV3Xykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmlld18uZ2V0Q2VudGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIGNhbWVyYS5cbiAgICogQHBhcmFtIHshb2wuQ29vcmRpbmF0ZX0gcG9zaXRpb24gU2FtZSBwcm9qZWN0aW9uIGFzIHRoZSBvbC5WaWV3LlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRQb3NpdGlvbihwb3NpdGlvbikge1xuICAgIGlmICghdGhpcy50b0xvbkxhdF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGwgPSB0aGlzLnRvTG9uTGF0Xyhwb3NpdGlvbik7XG4gICAgY29uc29sZS5hc3NlcnQobGwpO1xuXG4gICAgY29uc3QgY2FydG8gPSBuZXcgQ2VzaXVtLkNhcnRvZ3JhcGhpYyhcbiAgICAgICAgdG9SYWRpYW5zKGxsWzBdKSxcbiAgICAgICAgdG9SYWRpYW5zKGxsWzFdKSxcbiAgICAgICAgdGhpcy5nZXRBbHRpdHVkZSgpKTtcblxuICAgIHRoaXMuY2FtXy5zZXRWaWV3KHtcbiAgICAgIGRlc3RpbmF0aW9uOiBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKGNhcnRvKVxuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlVmlldygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgcG9zaXRpb24gdW5kZXIgdGhlIGNhbWVyYS5cbiAgICogQHJldHVybiB7IW9sLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBTYW1lIHByb2plY3Rpb24gYXMgdGhlIG9sLlZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFBvc2l0aW9uKCkge1xuICAgIGlmICghdGhpcy5mcm9tTG9uTGF0Xykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2FydG8gPSBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKHRoaXMuY2FtXy5wb3NpdGlvbik7XG5cbiAgICBjb25zdCBwb3MgPSB0aGlzLmZyb21Mb25MYXRfKFtcbiAgICAgIHRvRGVncmVlcyhjYXJ0by5sb25naXR1ZGUpLFxuICAgICAgdG9EZWdyZWVzKGNhcnRvLmxhdGl0dWRlKVxuICAgIF0pO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHBvcyk7XG4gICAgcmV0dXJuIHBvcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYWx0aXR1ZGUgSW4gbWV0ZXJzLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRBbHRpdHVkZShhbHRpdHVkZSkge1xuICAgIGNvbnN0IGNhcnRvID0gQ2VzaXVtLkVsbGlwc29pZC5XR1M4NC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhcbiAgICAgICAgdGhpcy5jYW1fLnBvc2l0aW9uKTtcbiAgICBjYXJ0by5oZWlnaHQgPSBhbHRpdHVkZTtcbiAgICB0aGlzLmNhbV8ucG9zaXRpb24gPSBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKGNhcnRvKTtcblxuICAgIHRoaXMudXBkYXRlVmlldygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gQWx0aXR1ZGUgaW4gbWV0ZXJzLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBbHRpdHVkZSgpIHtcbiAgICBjb25zdCBjYXJ0byA9IENlc2l1bS5FbGxpcHNvaWQuV0dTODQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoXG4gICAgICAgIHRoaXMuY2FtXy5wb3NpdGlvbik7XG5cbiAgICByZXR1cm4gY2FydG8uaGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHN0YXRlIG9mIHRoZSB1bmRlcmx5aW5nIENlc2l1bS5DYW1lcmFcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHZhbHVlcyBvZiB0aGUgcHJvcGVydGllcy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZUNhbWVyYV8oKSB7XG4gICAgaWYgKCF0aGlzLnZpZXdfIHx8ICF0aGlzLnRvTG9uTGF0Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjZW50ZXIgPSB0aGlzLnZpZXdfLmdldENlbnRlcigpO1xuICAgIGlmICghY2VudGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxsID0gdGhpcy50b0xvbkxhdF8oY2VudGVyKTtcbiAgICBjb25zb2xlLmFzc2VydChsbCk7XG5cbiAgICBjb25zdCBjYXJ0byA9IG5ldyBDZXNpdW0uQ2FydG9ncmFwaGljKHRvUmFkaWFucyhsbFswXSksXG4gICAgICAgIHRvUmFkaWFucyhsbFsxXSkpO1xuICAgIGlmICh0aGlzLnNjZW5lXy5nbG9iZSkge1xuICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5zY2VuZV8uZ2xvYmUuZ2V0SGVpZ2h0KGNhcnRvKTtcbiAgICAgIGNhcnRvLmhlaWdodCA9IGhlaWdodCB8fCAwO1xuICAgIH1cblxuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gQ2VzaXVtLkVsbGlwc29pZC5XR1M4NC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihjYXJ0byk7XG5cbiAgICAvKiogQHR5cGUge0Nlc2l1bS5vcHRpb25zT3JpZW50YXRpb259ICovXG4gICAgY29uc3Qgb3JpZW50YXRpb24gPSB7XG4gICAgICBwaXRjaDogdGhpcy50aWx0XyAtIENlc2l1bS5NYXRoLlBJX09WRVJfVFdPLFxuICAgICAgaGVhZGluZzogLXRoaXMudmlld18uZ2V0Um90YXRpb24oKSxcbiAgICAgIHJvbGw6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgdGhpcy5jYW1fLnNldFZpZXcoe1xuICAgICAgZGVzdGluYXRpb24sXG4gICAgICBvcmllbnRhdGlvblxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW1fLm1vdmVCYWNrd2FyZCh0aGlzLmRpc3RhbmNlXyk7XG5cbiAgICB0aGlzLmNoZWNrQ2FtZXJhQ2hhbmdlKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIHZhbHVlcyBvZiB0aGUgcHJvcGVydGllcyBmcm9tIHRoZSBjdXJyZW50IG9sLlZpZXcgc3RhdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlYWRGcm9tVmlldygpIHtcbiAgICBpZiAoIXRoaXMudmlld18gfHwgIXRoaXMudG9Mb25MYXRfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNlbnRlciA9IHRoaXMudmlld18uZ2V0Q2VudGVyKCk7XG4gICAgaWYgKGNlbnRlciA9PT0gdW5kZWZpbmVkIHx8IGNlbnRlciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsbCA9IHRoaXMudG9Mb25MYXRfKGNlbnRlcik7XG4gICAgY29uc29sZS5hc3NlcnQobGwpO1xuXG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IHRoaXMudmlld18uZ2V0UmVzb2x1dGlvbigpO1xuICAgIHRoaXMuZGlzdGFuY2VfID0gdGhpcy5jYWxjRGlzdGFuY2VGb3JSZXNvbHV0aW9uKFxuICAgICAgICByZXNvbHV0aW9uIHx8IDAsIHRvUmFkaWFucyhsbFsxXSkpO1xuXG4gICAgdGhpcy51cGRhdGVDYW1lcmFfKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgdmFsdWVzIG9mIHRoZSBwcm9wZXJ0aWVzIGZyb20gdGhlIGN1cnJlbnQgQ2VzaXVtLkNhbWVyYSBzdGF0ZS5cbiAgICogTW9kaWZpZXMgdGhlIGNlbnRlciwgcmVzb2x1dGlvbiBhbmQgcm90YXRpb24gcHJvcGVydGllcyBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgdXBkYXRlVmlldygpIHtcbiAgICBpZiAoIXRoaXMudmlld18gfHwgIXRoaXMuZnJvbUxvbkxhdF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy52aWV3VXBkYXRlSW5Qcm9ncmVzc18gPSB0cnVlO1xuXG4gICAgLy8gdGFyZ2V0ICYgZGlzdGFuY2VcbiAgICBjb25zdCBlbGxpcHNvaWQgPSBDZXNpdW0uRWxsaXBzb2lkLldHUzg0O1xuICAgIGNvbnN0IHNjZW5lID0gdGhpcy5zY2VuZV87XG4gICAgY29uc3QgdGFyZ2V0ID0gb2xjc0NvcmUucGlja0NlbnRlclBvaW50KHNjZW5lKTtcblxuICAgIGxldCBiZXN0VGFyZ2V0ID0gdGFyZ2V0O1xuICAgIGlmICghYmVzdFRhcmdldCkge1xuICAgICAgLy9UT0RPOiBob3cgdG8gaGFuZGxlIHRoaXMgcHJvcGVybHkgP1xuICAgICAgY29uc3QgZ2xvYmUgPSBzY2VuZS5nbG9iZTtcbiAgICAgIGNvbnN0IGNhcnRvID0gdGhpcy5jYW1fLnBvc2l0aW9uQ2FydG9ncmFwaGljLmNsb25lKCk7XG4gICAgICBjb25zdCBoZWlnaHQgPSBnbG9iZS5nZXRIZWlnaHQoY2FydG8pO1xuICAgICAgY2FydG8uaGVpZ2h0ID0gaGVpZ2h0IHx8IDA7XG4gICAgICBiZXN0VGFyZ2V0ID0gQ2VzaXVtLkVsbGlwc29pZC5XR1M4NC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihjYXJ0byk7XG4gICAgfVxuICAgIHRoaXMuZGlzdGFuY2VfID0gQ2VzaXVtLkNhcnRlc2lhbjMuZGlzdGFuY2UoYmVzdFRhcmdldCwgdGhpcy5jYW1fLnBvc2l0aW9uKTtcbiAgICBjb25zdCBiZXN0VGFyZ2V0Q2FydG9ncmFwaGljID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGJlc3RUYXJnZXQpO1xuICAgIHRoaXMudmlld18uc2V0Q2VudGVyKHRoaXMuZnJvbUxvbkxhdF8oW1xuICAgICAgdG9EZWdyZWVzKGJlc3RUYXJnZXRDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlKSxcbiAgICAgIHRvRGVncmVlcyhiZXN0VGFyZ2V0Q2FydG9ncmFwaGljLmxhdGl0dWRlKV0pKTtcblxuICAgIC8vIHJlc29sdXRpb25cbiAgICB0aGlzLnZpZXdfLnNldFJlc29sdXRpb24oXG4gICAgICAgIHRoaXMuY2FsY1Jlc29sdXRpb25Gb3JEaXN0YW5jZSh0aGlzLmRpc3RhbmNlXyxcbiAgICAgICAgICAgIGJlc3RUYXJnZXRDYXJ0b2dyYXBoaWMgPyBiZXN0VGFyZ2V0Q2FydG9ncmFwaGljLmxhdGl0dWRlIDogMCkpO1xuXG5cbiAgICAvKlxuICAgICAqIFNpbmNlIHdlIGFyZSBwb3NpdGlvbmluZyB0aGUgdGFyZ2V0LCB0aGUgdmFsdWVzIG9mIGhlYWRpbmcgYW5kIHRpbHRcbiAgICAgKiBuZWVkIHRvIGJlIGNhbGN1bGF0ZWQgX2F0IHRoZSB0YXJnZXRfLlxuICAgICAqL1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIGNvbnN0IHBvcyA9IHRoaXMuY2FtXy5wb3NpdGlvbjtcblxuICAgICAgLy8gbm9ybWFsIHRvIHRoZSBlbGxpcHNvaWQgYXQgdGhlIHRhcmdldFxuICAgICAgY29uc3QgdGFyZ2V0Tm9ybWFsID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCk7XG4gICAgICBlbGxpcHNvaWQuZ2VvY2VudHJpY1N1cmZhY2VOb3JtYWwodGFyZ2V0LCB0YXJnZXROb3JtYWwpO1xuXG4gICAgICAvLyB2ZWN0b3IgZnJvbSB0aGUgdGFyZ2V0IHRvIHRoZSBjYW1lcmFcbiAgICAgIGNvbnN0IHRhcmdldFRvQ2FtZXJhID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCk7XG4gICAgICBDZXNpdW0uQ2FydGVzaWFuMy5zdWJ0cmFjdChwb3MsIHRhcmdldCwgdGFyZ2V0VG9DYW1lcmEpO1xuICAgICAgQ2VzaXVtLkNhcnRlc2lhbjMubm9ybWFsaXplKHRhcmdldFRvQ2FtZXJhLCB0YXJnZXRUb0NhbWVyYSk7XG5cblxuICAgICAgLy8gSEVBRElOR1xuICAgICAgY29uc3QgdXAgPSB0aGlzLmNhbV8udXA7XG4gICAgICBjb25zdCByaWdodCA9IHRoaXMuY2FtXy5yaWdodDtcbiAgICAgIGNvbnN0IG5vcm1hbCA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygtdGFyZ2V0LnksIHRhcmdldC54LCAwKTsgLy8gd2hhdCBpcyBpdD9cbiAgICAgIGNvbnN0IGhlYWRpbmcgPSBDZXNpdW0uQ2FydGVzaWFuMy5hbmdsZUJldHdlZW4ocmlnaHQsIG5vcm1hbCk7XG4gICAgICBjb25zdCBjcm9zcyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmNyb3NzKHRhcmdldCwgdXAsIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKTtcbiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gY3Jvc3MuejtcblxuICAgICAgdGhpcy52aWV3Xy5zZXRSb3RhdGlvbigob3JpZW50YXRpb24gPCAwID8gaGVhZGluZyA6IC1oZWFkaW5nKSk7XG5cbiAgICAgIC8vIFRJTFRcbiAgICAgIGNvbnN0IHRpbHRBbmdsZSA9IE1hdGguYWNvcyhcbiAgICAgICAgICBDZXNpdW0uQ2FydGVzaWFuMy5kb3QodGFyZ2V0Tm9ybWFsLCB0YXJnZXRUb0NhbWVyYSkpO1xuICAgICAgdGhpcy50aWx0XyA9IGlzTmFOKHRpbHRBbmdsZSkgPyAwIDogdGlsdEFuZ2xlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBmYWxsYmFjayB3aGVuIHRoZXJlIGlzIG5vIHRhcmdldFxuICAgICAgdGhpcy52aWV3Xy5zZXRSb3RhdGlvbih0aGlzLmNhbV8uaGVhZGluZyk7XG4gICAgICB0aGlzLnRpbHRfID0gLXRoaXMuY2FtXy5waXRjaCArIE1hdGguUEkgLyAyO1xuICAgIH1cblxuICAgIHRoaXMudmlld1VwZGF0ZUluUHJvZ3Jlc3NfID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHVuZGVybHlpbmcgY2FtZXJhIHN0YXRlIGhhcyBjaGFuZ2VkIGFuZCBlbnN1cmUgc3luY2hyb25pemF0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZG9udFN5bmMgRG8gbm90IHN5bmNocm9uaXplIHRoZSB2aWV3LlxuICAgKi9cbiAgY2hlY2tDYW1lcmFDaGFuZ2Uob3B0X2RvbnRTeW5jKSB7XG4gICAgY29uc3Qgb2xkID0gdGhpcy5sYXN0Q2FtZXJhVmlld01hdHJpeF87XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuY2FtXy52aWV3TWF0cml4O1xuXG4gICAgaWYgKCFvbGQgfHwgIUNlc2l1bS5NYXRyaXg0LmVxdWFsc0Vwc2lsb24ob2xkLCBjdXJyZW50LCAxZS01KSkge1xuICAgICAgdGhpcy5sYXN0Q2FtZXJhVmlld01hdHJpeF8gPSBjdXJyZW50LmNsb25lKCk7XG4gICAgICBpZiAob3B0X2RvbnRTeW5jICE9PSB0cnVlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBjYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGJldHdlZW4gY2FtZXJhIGFuZCBjZW50ZXJwb2ludCBiYXNlZCBvbiB0aGUgcmVzb2x1dGlvbiBhbmQgbGF0aXR1ZGUgdmFsdWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gTnVtYmVyIG9mIG1hcCB1bml0cyBwZXIgcGl4ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsYXRpdHVkZSBMYXRpdHVkZSBpbiByYWRpYW5zLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBjYWxjdWxhdGVkIGRpc3RhbmNlLlxuICAgKiBAYXBpXG4gICAqL1xuICBjYWxjRGlzdGFuY2VGb3JSZXNvbHV0aW9uKHJlc29sdXRpb24sIGxhdGl0dWRlKSB7XG4gICAgY29uc3QgY2FudmFzID0gdGhpcy5zY2VuZV8uY2FudmFzO1xuICAgIGNvbnN0IGZvdnkgPSB0aGlzLmNhbV8uZnJ1c3R1bS5mb3Z5OyAvLyB2ZXJ0aWNhbCBmaWVsZCBvZiB2aWV3XG4gICAgY29uc29sZS5hc3NlcnQoIWlzTmFOKGZvdnkpKTtcbiAgICBjb25zdCBtZXRlcnNQZXJVbml0ID0gdGhpcy52aWV3Xy5nZXRQcm9qZWN0aW9uKCkuZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuXG4gICAgLy8gbnVtYmVyIG9mIFwibWFwIHVuaXRzXCIgdmlzaWJsZSBpbiAyRCAodmVydGljYWxseSlcbiAgICBjb25zdCB2aXNpYmxlTWFwVW5pdHMgPSByZXNvbHV0aW9uICogY2FudmFzLmNsaWVudEhlaWdodDtcblxuICAgIC8vIFRoZSBtZXRlcnNQZXJVbml0IGRvZXMgbm90IHRha2UgbGF0aXR1ZGUgaW50byBhY2NvdW50LCBidXQgaXQgc2hvdWxkXG4gICAgLy8gYmUgbG93ZXIgd2l0aCBpbmNyZWFzaW5nIGxhdGl0dWRlIC0tIHdlIGhhdmUgdG8gY29tcGVuc2F0ZS5cbiAgICAvLyBJbiAzRCBpdCBpcyBub3QgcG9zc2libGUgdG8gbWFpbnRhaW4gdGhlIHJlc29sdXRpb24gYXQgbW9yZSB0aGFuIG9uZSBwb2ludCxcbiAgICAvLyBzbyBpdCBvbmx5IG1ha2VzIHNlbnNlIHRvIHVzZSB0aGUgbGF0aXR1ZGUgb2YgdGhlIFwidGFyZ2V0XCIgcG9pbnQuXG4gICAgY29uc3QgcmVsYXRpdmVDaXJjdW1mZXJlbmNlID0gTWF0aC5jb3MoTWF0aC5hYnMobGF0aXR1ZGUpKTtcblxuICAgIC8vIGhvdyBtYW55IG1ldGVycyBzaG91bGQgYmUgdmlzaWJsZSBpbiAzRFxuICAgIGNvbnN0IHZpc2libGVNZXRlcnMgPSB2aXNpYmxlTWFwVW5pdHMgKiBtZXRlcnNQZXJVbml0ICogcmVsYXRpdmVDaXJjdW1mZXJlbmNlO1xuXG4gICAgLy8gZGlzdGFuY2UgcmVxdWlyZWQgdG8gdmlldyB0aGUgY2FsY3VsYXRlZCBsZW5ndGggaW4gbWV0ZXJzXG4gICAgLy9cbiAgICAvLyAgZm92eS8yXG4gICAgLy8gICAgfFxcXG4gICAgLy8gIHggfCBcXFxuICAgIC8vICAgIHwtLVxcXG4gICAgLy8gdmlzaWJsZU1ldGVycy8yXG4gICAgY29uc3QgcmVxdWlyZWREaXN0YW5jZSA9ICh2aXNpYmxlTWV0ZXJzIC8gMikgLyBNYXRoLnRhbihmb3Z5IC8gMik7XG5cbiAgICAvLyBOT1RFOiBUaGlzIGNhbGN1bGF0aW9uIGlzIG5vdCBhYnNvbHV0ZWx5IHByZWNpc2UsIGJlY2F1c2UgbWV0ZXJzUGVyVW5pdFxuICAgIC8vIGlzIGEgZ3JlYXQgc2ltcGxpZmljYXRpb24uIEl0IGRvZXMgbm90IHRha2UgZWxsaXBzb2lkL3RlcnJhaW4gaW50byBhY2NvdW50LlxuXG4gICAgcmV0dXJuIHJlcXVpcmVkRGlzdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogY2FsY3VsYXRlIHRoZSByZXNvbHV0aW9uIGJhc2VkIG9uIGEgZGlzdGFuY2UoY2FtZXJhIHRvIHBvc2l0aW9uKSBhbmQgbGF0aXR1ZGUgdmFsdWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsYXRpdHVkZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBjYWxjdWxhdGVkIHJlc29sdXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGNhbGNSZXNvbHV0aW9uRm9yRGlzdGFuY2UoZGlzdGFuY2UsIGxhdGl0dWRlKSB7XG4gICAgLy8gU2VlIHRoZSByZXZlcnNlIGNhbGN1bGF0aW9uIChjYWxjRGlzdGFuY2VGb3JSZXNvbHV0aW9uKSBmb3IgZGV0YWlsc1xuICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuc2NlbmVfLmNhbnZhcztcbiAgICBjb25zdCBmb3Z5ID0gdGhpcy5jYW1fLmZydXN0dW0uZm92eTtcbiAgICBjb25zdCBtZXRlcnNQZXJVbml0ID0gdGhpcy52aWV3Xy5nZXRQcm9qZWN0aW9uKCkuZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuXG4gICAgY29uc3QgdmlzaWJsZU1ldGVycyA9IDIgKiBkaXN0YW5jZSAqIE1hdGgudGFuKGZvdnkgLyAyKTtcbiAgICBjb25zdCByZWxhdGl2ZUNpcmN1bWZlcmVuY2UgPSBNYXRoLmNvcyhNYXRoLmFicyhsYXRpdHVkZSkpO1xuICAgIGNvbnN0IHZpc2libGVNYXBVbml0cyA9IHZpc2libGVNZXRlcnMgLyBtZXRlcnNQZXJVbml0IC8gcmVsYXRpdmVDaXJjdW1mZXJlbmNlO1xuICAgIGNvbnN0IHJlc29sdXRpb24gPSB2aXNpYmxlTWFwVW5pdHMgLyBjYW52YXMuY2xpZW50SGVpZ2h0O1xuXG4gICAgcmV0dXJuIHJlc29sdXRpb247XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBDYW1lcmE7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvbkV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjYWRkXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEFERDogJ2FkZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9Db2xsZWN0aW9uLkNvbGxlY3Rpb25FdmVudCNyZW1vdmVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUkVNT1ZFOiAncmVtb3ZlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsZWN0aW9uRXZlbnRUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0NvbGxlY3Rpb25cbiAqL1xuaW1wb3J0IEFzc2VydGlvbkVycm9yIGZyb20gJy4vQXNzZXJ0aW9uRXJyb3IuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgUHJvcGVydHkgPSB7XG4gICAgTEVOR1RIOiAnbGVuZ3RoJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG52YXIgQ29sbGVjdGlvbkV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb2xsZWN0aW9uRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb25FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7Kj19IG9wdF9lbGVtZW50IEVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXggVGhlIGluZGV4IG9mIHRoZSBhZGRlZCBvciByZW1vdmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvbkV2ZW50KHR5cGUsIG9wdF9lbGVtZW50LCBvcHRfaW5kZXgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlbGVtZW50IHRoYXQgaXMgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudCA9IG9wdF9lbGVtZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGluZGV4IG9mIHRoZSBhZGRlZCBvciByZW1vdmVkIGVsZW1lbnQuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmluZGV4ID0gb3B0X2luZGV4O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBDb2xsZWN0aW9uRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgeyBDb2xsZWN0aW9uRXZlbnQgfTtcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdW5pcXVlPWZhbHNlXSBEaXNhbGxvdyB0aGUgc2FtZSBpdGVtIGZyb20gYmVpbmcgYWRkZWQgdG9cbiAqIHRoZSBjb2xsZWN0aW9uIHR3aWNlLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFuIGV4cGFuZGVkIHZlcnNpb24gb2Ygc3RhbmRhcmQgSlMgQXJyYXksIGFkZGluZyBjb252ZW5pZW5jZSBtZXRob2RzIGZvclxuICogbWFuaXB1bGF0aW9uLiBBZGQgYW5kIHJlbW92ZSBjaGFuZ2VzIHRvIHRoZSBDb2xsZWN0aW9uIHRyaWdnZXIgYSBDb2xsZWN0aW9uXG4gKiBldmVudC4gTm90ZSB0aGF0IHRoaXMgZG9lcyBub3QgY292ZXIgY2hhbmdlcyB0byB0aGUgb2JqZWN0cyBfd2l0aGluXyB0aGVcbiAqIENvbGxlY3Rpb247IHRoZXkgdHJpZ2dlciBldmVudHMgb24gdGhlIGFwcHJvcHJpYXRlIG9iamVjdCwgbm90IG9uIHRoZVxuICogQ29sbGVjdGlvbiBhcyBhIHdob2xlLlxuICpcbiAqIEBmaXJlcyBDb2xsZWN0aW9uRXZlbnRcbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQGFwaVxuICovXG52YXIgQ29sbGVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29sbGVjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PFQ+PX0gb3B0X2FycmF5IEFycmF5LlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIENvbGxlY3Rpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uKG9wdF9hcnJheSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW5pcXVlXyA9ICEhb3B0aW9ucy51bmlxdWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PFQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXJyYXlfID0gb3B0X2FycmF5ID8gb3B0X2FycmF5IDogW107XG4gICAgICAgIGlmIChfdGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBfdGhpcy5hcnJheV8ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmFzc2VydFVuaXF1ZV8oX3RoaXMuYXJyYXlfW2ldLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBlbGVtZW50cyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuZ2V0TGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgZWxlbWVudHMgdG8gdGhlIGNvbGxlY3Rpb24uICBUaGlzIHB1c2hlcyBlYWNoIGl0ZW0gaW4gdGhlIHByb3ZpZGVkIGFycmF5XG4gICAgICogdG8gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyIEFycmF5LlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb248VD59IFRoaXMgY29sbGVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKGFycikge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5wdXNoKGFycltpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJdGVyYXRlIG92ZXIgZWFjaCBlbGVtZW50LCBjYWxsaW5nIHRoZSBwcm92aWRlZCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIG51bWJlciwgQXJyYXk8VD4pOiAqfSBmIFRoZSBmdW5jdGlvbiB0byBjYWxsXG4gICAgICogICAgIGZvciBldmVyeSBlbGVtZW50LiBUaGlzIGZ1bmN0aW9uIHRha2VzIDMgYXJndW1lbnRzICh0aGUgZWxlbWVudCwgdGhlXG4gICAgICogICAgIGluZGV4IGFuZCB0aGUgYXJyYXkpLiBUaGUgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoZikge1xuICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5XztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgZihhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSByZWZlcmVuY2UgdG8gdGhlIHVuZGVybHlpbmcgQXJyYXkgb2JqZWN0LiBXYXJuaW5nOiBpZiB0aGUgYXJyYXlcbiAgICAgKiBpcyBtdXRhdGVkLCBubyBldmVudHMgd2lsbCBiZSBkaXNwYXRjaGVkIGJ5IHRoZSBjb2xsZWN0aW9uLCBhbmQgdGhlXG4gICAgICogY29sbGVjdGlvbidzIFwibGVuZ3RoXCIgcHJvcGVydHkgd29uJ3QgYmUgaW4gc3luYyB3aXRoIHRoZSBhY3R1YWwgbGVuZ3RoXG4gICAgICogb2YgdGhlIGFycmF5LlxuICAgICAqIEByZXR1cm4geyFBcnJheTxUPn0gQXJyYXkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmdldEFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJheV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcmV0dXJuIHtUfSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5pdGVtID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxlbmd0aCBvZiB0aGlzIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldChQcm9wZXJ0eS5MRU5HVEgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5zZXJ0IGFuIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJyYXlfLnNwbGljZShpbmRleCwgMCwgZWxlbSk7XG4gICAgICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgZWxlbSwgaW5kZXgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uIGFuZCByZXR1cm4gaXQuXG4gICAgICogUmV0dXJuIGB1bmRlZmluZWRgIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUF0KHRoaXMuZ2V0TGVuZ3RoKCkgLSAxKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluc2VydCB0aGUgcHJvdmlkZWQgZWxlbWVudCBhdCB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTmV3IGxlbmd0aCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHRoaXMuaW5zZXJ0QXQobiwgZWxlbSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExlbmd0aCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGVsZW1lbnQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgZWxlbWVudCBvciB1bmRlZmluZWQgaWYgbm9uZSBmb3VuZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgdmFyIGFyciA9IHRoaXMuYXJyYXlfO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgaWYgKGFycltpXSA9PT0gZWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUF0KGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4IGFuZCByZXR1cm4gaXQuXG4gICAgICogUmV0dXJuIGB1bmRlZmluZWRgIGlmIHRoZSBjb2xsZWN0aW9uIGRvZXMgbm90IGNvbnRhaW4gdGhpcyBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFZhbHVlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB2YXIgcHJldiA9IHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICAgICAgdGhpcy5hcnJheV8uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2LCBpbmRleCkpO1xuICAgICAgICByZXR1cm4gcHJldjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5zZXRBdCA9IGZ1bmN0aW9uIChpbmRleCwgZWxlbSkge1xuICAgICAgICB2YXIgbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIGlmIChpbmRleCA8IG4pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXYgPSB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgICAgICAgICB0aGlzLmFycmF5X1tpbmRleF0gPSBlbGVtO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYsIGluZGV4KSk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgZWxlbSwgaW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBuOyBqIDwgaW5kZXg7ICsraikge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0QXQoaiwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0QXQoaW5kZXgsIGVsZW0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUxlbmd0aF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkxFTkdUSCwgdGhpcy5hcnJheV8ubGVuZ3RoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZXhjZXB0IE9wdGlvbmFsIGluZGV4IHRvIGlnbm9yZS5cbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5hc3NlcnRVbmlxdWVfID0gZnVuY3Rpb24gKGVsZW0sIG9wdF9leGNlcHQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5hcnJheV8ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJyYXlfW2ldID09PSBlbGVtICYmIGkgIT09IG9wdF9leGNlcHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoNTgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ29sbGVjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQ29sbGVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbGxlY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvR3JvdXBcbiAqL1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduLCBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBnZXRDaGFuZ2VFdmVudFR5cGUgfSBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0PnxpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBbbGF5ZXJzXSBDaGlsZCBsYXllcnMuXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBMQVlFUlM6ICdsYXllcnMnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gb2YgbGF5ZXJzIHRoYXQgYXJlIGhhbmRsZWQgdG9nZXRoZXIuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBncm91cC9Db2xsZWN0aW9uIGNoYW5nZXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgTGF5ZXJHcm91cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXJHcm91cCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyR3JvdXAob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gLyoqIEB0eXBlIHtPcHRpb25zfSAqLyAoYXNzaWduKHt9LCBvcHRpb25zKSk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5sYXllcnM7XG4gICAgICAgIHZhciBsYXllcnMgPSBvcHRpb25zLmxheWVycztcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheWVyc0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5saXN0ZW5lcktleXNfID0ge307XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKFByb3BlcnR5LkxBWUVSUyksIF90aGlzLmhhbmRsZUxheWVyc0NoYW5nZWRfKTtcbiAgICAgICAgaWYgKGxheWVycykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGF5ZXJzKSkge1xuICAgICAgICAgICAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKGxheWVycy5zbGljZSgpLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKGxheWVycykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0Myk7IC8vIEV4cGVjdGVkIGBsYXllcnNgIHRvIGJlIGFuIGFycmF5IG9yIGEgYENvbGxlY3Rpb25gXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsYXllcnMgPSBuZXcgQ29sbGVjdGlvbih1bmRlZmluZWQsIHsgdW5pcXVlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNldExheWVycyhsYXllcnMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJzQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5wdXNoKGxpc3RlbihsYXllcnMsIENvbGxlY3Rpb25FdmVudFR5cGUuQURELCB0aGlzLmhhbmRsZUxheWVyc0FkZF8sIHRoaXMpLCBsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgdGhpcy5oYW5kbGVMYXllcnNSZW1vdmVfLCB0aGlzKSk7XG4gICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMubGlzdGVuZXJLZXlzXykge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2lkXS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyKHRoaXMubGlzdGVuZXJLZXlzXyk7XG4gICAgICAgIHZhciBsYXllcnNBcnJheSA9IGxheWVycy5nZXRBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllcnNBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllcnNBcnJheVtpXTtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1tnZXRVaWQobGF5ZXIpXSA9IFtcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllciwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGNvbGxlY3Rpb25FdmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNBZGRfID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25FdmVudCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0fSAqLyAoY29sbGVjdGlvbkV2ZW50LmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19bZ2V0VWlkKGxheWVyKV0gPSBbXG4gICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICAgICAgbGlzdGVuKGxheWVyLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc1JlbW92ZV8gPSBmdW5jdGlvbiAoY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHR9ICovIChjb2xsZWN0aW9uRXZlbnQuZWxlbWVudCk7XG4gICAgICAgIHZhciBrZXkgPSBnZXRVaWQobGF5ZXIpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcktleXNfW2tleV07XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgICAqIGluIHRoaXMgZ3JvdXAuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IENvbGxlY3Rpb24gb2ZcbiAgICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZSBsYXllcnN9IHRoYXQgYXJlIHBhcnQgb2YgdGhpcyBncm91cC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSAqLyAodGhpcy5nZXQoUHJvcGVydHkuTEFZRVJTKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbiBjb2xsZWN0aW9ufSBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyIGxheWVyc31cbiAgICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBDb2xsZWN0aW9uIG9mXG4gICAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2UgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuc2V0TGF5ZXJzID0gZnVuY3Rpb24gKGxheWVycykge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5MQVlFUlMsIGxheWVycyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD49fSBvcHRfYXJyYXkgQXJyYXkgb2YgbGF5ZXJzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICB2YXIgYXJyYXkgPSBvcHRfYXJyYXkgIT09IHVuZGVmaW5lZCA/IG9wdF9hcnJheSA6IFtdO1xuICAgICAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBsYXllci5nZXRMYXllcnNBcnJheShhcnJheSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+PX0gb3B0X3N0YXRlcyBPcHRpb25hbCBsaXN0IG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgdmFyIHN0YXRlcyA9IG9wdF9zdGF0ZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICAgICAgdmFyIHBvcyA9IHN0YXRlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLmdldExheWVyU3RhdGVzQXJyYXkoc3RhdGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBvd25MYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSBwb3MsIGlpID0gc3RhdGVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gc3RhdGVzW2ldO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5vcGFjaXR5ICo9IG93bkxheWVyU3RhdGUub3BhY2l0eTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUudmlzaWJsZSA9IGxheWVyU3RhdGUudmlzaWJsZSAmJiBvd25MYXllclN0YXRlLnZpc2libGU7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1heFJlc29sdXRpb24gPSBNYXRoLm1pbihsYXllclN0YXRlLm1heFJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWF4UmVzb2x1dGlvbik7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heChsYXllclN0YXRlLm1pblJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWluUmVzb2x1dGlvbik7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1pblpvb20gPSBNYXRoLm1heChsYXllclN0YXRlLm1pblpvb20sIG93bkxheWVyU3RhdGUubWluWm9vbSk7XG4gICAgICAgICAgICBsYXllclN0YXRlLm1heFpvb20gPSBNYXRoLm1pbihsYXllclN0YXRlLm1heFpvb20sIG93bkxheWVyU3RhdGUubWF4Wm9vbSk7XG4gICAgICAgICAgICBpZiAob3duTGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXllclN0YXRlLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKGxheWVyU3RhdGUuZXh0ZW50LCBvd25MYXllclN0YXRlLmV4dGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlLmV4dGVudCA9IG93bkxheWVyU3RhdGUuZXh0ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNvdXJjZVN0YXRlLlJFQURZO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyR3JvdXA7XG59KEJhc2VMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgTGF5ZXJHcm91cDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdyb3VwLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbGNzLkFic3RyYWN0U3luY2hyb25pemVyXG4gKi9cbmltcG9ydCB7dW5CeUtleSBhcyBvbE9ic2VydmFibGVVbkJ5S2V5fSBmcm9tICdvbC9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCBvbExheWVyR3JvdXAgZnJvbSAnb2wvbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IHtvbGNzTGlzdGVuLCBnZXRVaWR9IGZyb20gJy4vdXRpbC5qcyc7XG5cblxuY2xhc3MgQWJzdHJhY3RTeW5jaHJvbml6ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshb2wuTWFwfSBtYXBcbiAgICogQHBhcmFtIHshQ2VzaXVtLlNjZW5lfSBzY2VuZVxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBAYWJzdHJhY3RcbiAgICogQGFwaVxuICAgKi9cbiAgY29uc3RydWN0b3IobWFwLCBzY2VuZSkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHshb2wuTWFwfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLm1hcCA9IG1hcDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtvbC5WaWV3fVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLnZpZXcgPSBtYXAuZ2V0VmlldygpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFDZXNpdW0uU2NlbmV9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtvbC5Db2xsZWN0aW9uLjxvbC5sYXllci5CYXNlPn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy5vbExheWVycyA9IG1hcC5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7b2wubGF5ZXIuR3JvdXB9XG4gICAgICovXG4gICAgdGhpcy5tYXBMYXllckdyb3VwID0gbWFwLmdldExheWVyR3JvdXAoKTtcblxuICAgIC8qKlxuICAgICAqIE1hcCBvZiBPcGVuTGF5ZXJzIGxheWVyIGlkcyAoZnJvbSBnZXRVaWQpIHRvIHRoZSBDZXNpdW0gSW1hZ2VyeUxheWVycy5cbiAgICAgKiBOdWxsIHZhbHVlIG1lYW5zLCB0aGF0IHdlIGFyZSB1bmFibGUgdG8gY3JlYXRlIGVxdWl2YWxlbnQgbGF5ZXJzLlxuICAgICAqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgP0FycmF5LjxUPj59XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJNYXAgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIE1hcCBvZiBsaXN0ZW4ga2V5cyBmb3IgT3BlbkxheWVycyBsYXllciBsYXllcnMgaWRzIChmcm9tIGdldFVpZCkuXG4gICAgICogQHR5cGUgeyFPYmplY3QuPHN0cmluZywgQXJyYXk8b2wuRXZlbnRzS2V5Pj59XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHRoaXMub2xMYXllckxpc3RlbktleXMgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIE1hcCBvZiBsaXN0ZW4ga2V5cyBmb3IgT3BlbkxheWVycyBsYXllciBncm91cHMgaWRzIChmcm9tIGdldFVpZCkuXG4gICAgICogQHR5cGUgeyFPYmplY3QuPHN0cmluZywgIUFycmF5LjxvbC5FdmVudHNLZXk+Pn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub2xHcm91cExpc3RlbktleXNfID0ge307XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveSBhbGwgYW5kIHBlcmZvcm0gY29tcGxldGUgc3luY2hyb25pemF0aW9uIG9mIHRoZSBsYXllcnMuXG4gICAqIEBhcGlcbiAgICovXG4gIHN5bmNocm9uaXplKCkge1xuICAgIHRoaXMuZGVzdHJveUFsbCgpO1xuICAgIHRoaXMuYWRkTGF5ZXJzXyh0aGlzLm1hcExheWVyR3JvdXApO1xuICB9XG5cbiAgLyoqXG4gICAqIE9yZGVyIGNvdW50ZXJwYXJ0cyB1c2luZyB0aGUgc2FtZSBhbGdvcml0aG0gYXMgdGhlIE9wZW5sYXllcnMgcmVuZGVyZXI6XG4gICAqIHotaW5kZXggdGhlbiBvcmlnaW5hbCBzZXF1ZW5jZSBvcmRlci5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgb3JkZXJMYXllcnMoKSB7XG4gICAgLy8gT3JkZXJpbmcgbG9naWNzIGlzIGhhbmRsZWQgaW4gc3ViY2xhc3Nlcy5cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBsYXllciBoaWVyYXJjaHkuXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuQmFzZX0gcm9vdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWRkTGF5ZXJzXyhyb290KSB7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoJ29sc2MvY29yZS5qcycpLkxheWVyV2l0aFBhcmVudHM+fSAqL1xuICAgIGNvbnN0IGZpZm8gPSBbe1xuICAgICAgbGF5ZXI6IHJvb3QsXG4gICAgICBwYXJlbnRzOiBbXVxuICAgIH1dO1xuICAgIHdoaWxlIChmaWZvLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG9sTGF5ZXJXaXRoUGFyZW50cyA9IGZpZm8uc3BsaWNlKDAsIDEpWzBdO1xuICAgICAgY29uc3Qgb2xMYXllciA9IG9sTGF5ZXJXaXRoUGFyZW50cy5sYXllcjtcbiAgICAgIGNvbnN0IG9sTGF5ZXJJZCA9IGdldFVpZChvbExheWVyKS50b1N0cmluZygpO1xuICAgICAgdGhpcy5vbExheWVyTGlzdGVuS2V5c1tvbExheWVySWRdID0gW107XG4gICAgICBjb25zb2xlLmFzc2VydCghdGhpcy5sYXllck1hcFtvbExheWVySWRdKTtcblxuICAgICAgbGV0IGNlc2l1bU9iamVjdHMgPSBudWxsO1xuICAgICAgaWYgKG9sTGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICAgICAgdGhpcy5saXN0ZW5Gb3JHcm91cENoYW5nZXNfKG9sTGF5ZXIpO1xuICAgICAgICBpZiAob2xMYXllciAhPT0gdGhpcy5tYXBMYXllckdyb3VwKSB7XG4gICAgICAgICAgY2VzaXVtT2JqZWN0cyA9IHRoaXMuY3JlYXRlU2luZ2xlTGF5ZXJDb3VudGVycGFydHMob2xMYXllcldpdGhQYXJlbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNlc2l1bU9iamVjdHMpIHtcbiAgICAgICAgICBvbExheWVyLmdldExheWVycygpLmZvckVhY2goKGwpID0+IHtcbiAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld09sTGF5ZXJXaXRoUGFyZW50cyA9IHtcbiAgICAgICAgICAgICAgICBsYXllcjogbCxcbiAgICAgICAgICAgICAgICBwYXJlbnRzOiBvbExheWVyID09PSB0aGlzLm1hcExheWVyR3JvdXAgP1xuICAgICAgICAgICAgICAgICAgW10gOlxuICAgICAgICAgICAgICAgICAgW29sTGF5ZXJXaXRoUGFyZW50cy5sYXllcl0uY29uY2F0KG9sTGF5ZXJXaXRoUGFyZW50cy5wYXJlbnRzKVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBmaWZvLnB1c2gobmV3T2xMYXllcldpdGhQYXJlbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2VzaXVtT2JqZWN0cyA9IHRoaXMuY3JlYXRlU2luZ2xlTGF5ZXJDb3VudGVycGFydHMob2xMYXllcldpdGhQYXJlbnRzKTtcbiAgICAgICAgaWYgKCFjZXNpdW1PYmplY3RzKSB7XG4gICAgICAgICAgLy8ga2VlcCBhbiBleWUgb24gdGhlIGxheWVycyB0aGF0IG9uY2UgZmFpbGVkIHRvIGJlIGFkZGVkIChtaWdodCB3b3JrIHdoZW4gdGhlIGxheWVyIGlzIHVwZGF0ZWQpXG4gICAgICAgICAgLy8gZm9yIGV4YW1wbGUgd2hlbiBhIHNvdXJjZSBpcyBzZXQgYWZ0ZXIgdGhlIGxheWVyIGlzIGFkZGVkIHRvIHRoZSBtYXBcbiAgICAgICAgICBjb25zdCBsYXllcklkID0gb2xMYXllcklkO1xuICAgICAgICAgIGNvbnN0IGxheWVyV2l0aFBhcmVudHMgPSBvbExheWVyV2l0aFBhcmVudHM7XG4gICAgICAgICAgY29uc3Qgb25MYXllckNoYW5nZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjZXNpdW1PYmpzID0gdGhpcy5jcmVhdGVTaW5nbGVMYXllckNvdW50ZXJwYXJ0cyhsYXllcldpdGhQYXJlbnRzKTtcbiAgICAgICAgICAgIGlmIChjZXNpdW1PYmpzKSB7XG4gICAgICAgICAgICAgIC8vIHVuc3Vic2NyaWJlIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgIGxheWVyV2l0aFBhcmVudHMubGF5ZXIudW4oJ2NoYW5nZScsIG9uTGF5ZXJDaGFuZ2UpO1xuICAgICAgICAgICAgICB0aGlzLmFkZENlc2l1bU9iamVjdHNfKGNlc2l1bU9ianMsIGxheWVySWQsIGxheWVyV2l0aFBhcmVudHMubGF5ZXIpO1xuICAgICAgICAgICAgICB0aGlzLm9yZGVyTGF5ZXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLm9sTGF5ZXJMaXN0ZW5LZXlzW29sTGF5ZXJJZF0ucHVzaChvbGNzTGlzdGVuKGxheWVyV2l0aFBhcmVudHMubGF5ZXIsICdjaGFuZ2UnLCBvbkxheWVyQ2hhbmdlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGFkZCBDZXNpdW0gbGF5ZXJzXG4gICAgICBpZiAoY2VzaXVtT2JqZWN0cykge1xuICAgICAgICB0aGlzLmFkZENlc2l1bU9iamVjdHNfKGNlc2l1bU9iamVjdHMsIG9sTGF5ZXJJZCwgb2xMYXllcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5vcmRlckxheWVycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBDZXNpdW0gb2JqZWN0cy5cbiAgICogQHBhcmFtIHtBcnJheS48VD59IGNlc2l1bU9iamVjdHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxheWVySWRcbiAgICogQHBhcmFtIHtvbC5sYXllci5CYXNlfSBsYXllclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWRkQ2VzaXVtT2JqZWN0c18oY2VzaXVtT2JqZWN0cywgbGF5ZXJJZCwgbGF5ZXIpIHtcbiAgICB0aGlzLmxheWVyTWFwW2xheWVySWRdID0gY2VzaXVtT2JqZWN0cztcbiAgICB0aGlzLm9sTGF5ZXJMaXN0ZW5LZXlzW2xheWVySWRdLnB1c2gob2xjc0xpc3RlbihsYXllciwgJ2NoYW5nZTp6SW5kZXgnLCAoKSA9PiB0aGlzLm9yZGVyTGF5ZXJzKCkpKTtcbiAgICBjZXNpdW1PYmplY3RzLmZvckVhY2goKGNlc2l1bU9iamVjdCkgPT4ge1xuICAgICAgdGhpcy5hZGRDZXNpdW1PYmplY3QoY2VzaXVtT2JqZWN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW5kIGRlc3Ryb3kgYSBzaW5nbGUgbGF5ZXIuXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuTGF5ZXJ9IGxheWVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGNvdW50ZXJwYXJ0IGRlc3Ryb3llZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVtb3ZlQW5kRGVzdHJveVNpbmdsZUxheWVyXyhsYXllcikge1xuICAgIGNvbnN0IHVpZCA9IGdldFVpZChsYXllcikudG9TdHJpbmcoKTtcbiAgICBjb25zdCBjb3VudGVycGFydHMgPSB0aGlzLmxheWVyTWFwW3VpZF07XG4gICAgaWYgKCEhY291bnRlcnBhcnRzKSB7XG4gICAgICBjb3VudGVycGFydHMuZm9yRWFjaCgoY291bnRlcnBhcnQpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVTaW5nbGVDZXNpdW1PYmplY3QoY291bnRlcnBhcnQsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5kZXN0cm95Q2VzaXVtT2JqZWN0KGNvdW50ZXJwYXJ0KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbExheWVyTGlzdGVuS2V5c1t1aWRdLmZvckVhY2gob2xPYnNlcnZhYmxlVW5CeUtleSk7XG4gICAgICBkZWxldGUgdGhpcy5vbExheWVyTGlzdGVuS2V5c1t1aWRdO1xuICAgIH1cbiAgICBkZWxldGUgdGhpcy5sYXllck1hcFt1aWRdO1xuICAgIHJldHVybiAhIWNvdW50ZXJwYXJ0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxpc3RlbiBhIHNpbmdsZSBsYXllciBncm91cC5cbiAgICogQHBhcmFtIHtvbC5sYXllci5Hcm91cH0gZ3JvdXBcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVubGlzdGVuU2luZ2xlR3JvdXBfKGdyb3VwKSB7XG4gICAgaWYgKGdyb3VwID09PSB0aGlzLm1hcExheWVyR3JvdXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdWlkID0gZ2V0VWlkKGdyb3VwKS50b1N0cmluZygpO1xuICAgIGNvbnN0IGtleXMgPSB0aGlzLm9sR3JvdXBMaXN0ZW5LZXlzX1t1aWRdO1xuICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBvbE9ic2VydmFibGVVbkJ5S2V5KGtleSk7XG4gICAgfSk7XG4gICAgZGVsZXRlIHRoaXMub2xHcm91cExpc3RlbktleXNfW3VpZF07XG4gICAgZGVsZXRlIHRoaXMubGF5ZXJNYXBbdWlkXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgbGF5ZXIgaGllcmFyY2h5LlxuICAgKiBAcGFyYW0ge29sLmxheWVyLkJhc2V9IHJvb3RcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbW92ZUxheWVyXyhyb290KSB7XG4gICAgaWYgKCEhcm9vdCkge1xuICAgICAgY29uc3QgZmlmbyA9IFtyb290XTtcbiAgICAgIHdoaWxlIChmaWZvLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgb2xMYXllciA9IGZpZm8uc3BsaWNlKDAsIDEpWzBdO1xuICAgICAgICBjb25zdCBkb25lID0gdGhpcy5yZW1vdmVBbmREZXN0cm95U2luZ2xlTGF5ZXJfKG9sTGF5ZXIpO1xuICAgICAgICBpZiAob2xMYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJHcm91cCkge1xuICAgICAgICAgIHRoaXMudW5saXN0ZW5TaW5nbGVHcm91cF8ob2xMYXllcik7XG4gICAgICAgICAgaWYgKCFkb25lKSB7XG4gICAgICAgICAgICAvLyBObyBjb3VudGVycGFydCBmb3IgdGhlIGdyb3VwIGl0c2VsZiBzbyByZW1vdmluZ1xuICAgICAgICAgICAgLy8gZWFjaCBvZiB0aGUgY2hpbGQgbGF5ZXJzLlxuICAgICAgICAgICAgb2xMYXllci5nZXRMYXllcnMoKS5mb3JFYWNoKChsKSA9PiB7XG4gICAgICAgICAgICAgIGZpZm8ucHVzaChsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBsaXN0ZW5lcnMgZm9yIHNpbmdsZSBsYXllciBncm91cCBjaGFuZ2UuXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuR3JvdXB9IGdyb3VwXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBsaXN0ZW5Gb3JHcm91cENoYW5nZXNfKGdyb3VwKSB7XG4gICAgY29uc3QgdXVpZCA9IGdldFVpZChncm91cCkudG9TdHJpbmcoKTtcblxuICAgIGNvbnNvbGUuYXNzZXJ0KHRoaXMub2xHcm91cExpc3RlbktleXNfW3V1aWRdID09PSB1bmRlZmluZWQpO1xuXG4gICAgY29uc3QgbGlzdGVuS2V5QXJyYXkgPSBbXTtcbiAgICB0aGlzLm9sR3JvdXBMaXN0ZW5LZXlzX1t1dWlkXSA9IGxpc3RlbktleUFycmF5O1xuXG4gICAgLy8gb25seSB0aGUga2V5cyB0aGF0IG5lZWQgdG8gYmUgcmVsaXN0ZW5lZCB3aGVuIGNvbGxlY3Rpb24gY2hhbmdlc1xuICAgIGxldCBjb250ZW50S2V5cyA9IFtdO1xuICAgIGNvbnN0IGxpc3RlbkFkZFJlbW92ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBncm91cC5nZXRMYXllcnMoKTtcbiAgICAgIGlmIChjb2xsZWN0aW9uKSB7XG4gICAgICAgIGNvbnRlbnRLZXlzID0gW1xuICAgICAgICAgIGNvbGxlY3Rpb24ub24oJ2FkZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRMYXllcnNfKGV2ZW50LmVsZW1lbnQpO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNvbGxlY3Rpb24ub24oJ3JlbW92ZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMYXllcl8oZXZlbnQuZWxlbWVudCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgXTtcbiAgICAgICAgbGlzdGVuS2V5QXJyYXkucHVzaCguLi5jb250ZW50S2V5cyk7XG4gICAgICB9XG4gICAgfSkuYmluZCh0aGlzKTtcblxuICAgIGxpc3RlbkFkZFJlbW92ZSgpO1xuXG4gICAgbGlzdGVuS2V5QXJyYXkucHVzaChncm91cC5vbignY2hhbmdlOmxheWVycycsIChlKSA9PiB7XG4gICAgICBjb250ZW50S2V5cy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBjb25zdCBpID0gbGlzdGVuS2V5QXJyYXkuaW5kZXhPZihlbCk7XG4gICAgICAgIGlmIChpID49IDApIHtcbiAgICAgICAgICBsaXN0ZW5LZXlBcnJheS5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgb2xPYnNlcnZhYmxlVW5CeUtleShlbCk7XG4gICAgICB9KTtcbiAgICAgIGxpc3RlbkFkZFJlbW92ZSgpO1xuICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBhbGwgdGhlIGNyZWF0ZWQgQ2VzaXVtIG9iamVjdHMuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGRlc3Ryb3lBbGwoKSB7XG4gICAgdGhpcy5yZW1vdmVBbGxDZXNpdW1PYmplY3RzKHRydWUpOyAvLyBkZXN0cm95XG4gICAgbGV0IG9iaktleTtcbiAgICBmb3IgKG9iaktleSBpbiB0aGlzLm9sR3JvdXBMaXN0ZW5LZXlzXykge1xuICAgICAgY29uc3Qga2V5cyA9IHRoaXMub2xHcm91cExpc3RlbktleXNfW29iaktleV07XG4gICAgICBrZXlzLmZvckVhY2gob2xPYnNlcnZhYmxlVW5CeUtleSk7XG4gICAgfVxuICAgIGZvciAob2JqS2V5IGluIHRoaXMub2xMYXllckxpc3RlbktleXMpIHtcbiAgICAgIHRoaXMub2xMYXllckxpc3RlbktleXNbb2JqS2V5XS5mb3JFYWNoKG9sT2JzZXJ2YWJsZVVuQnlLZXkpO1xuICAgIH1cbiAgICB0aGlzLm9sR3JvdXBMaXN0ZW5LZXlzXyA9IHt9O1xuICAgIHRoaXMub2xMYXllckxpc3RlbktleXMgPSB7fTtcbiAgICB0aGlzLmxheWVyTWFwID0ge307XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHNpbmdsZSBDZXNpdW0gb2JqZWN0IHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0geyFUfSBvYmplY3RcbiAgICogQGFic3RyYWN0XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGFkZENlc2l1bU9iamVjdChvYmplY3QpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVR9IG9iamVjdFxuICAgKiBAYWJzdHJhY3RcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZGVzdHJveUNlc2l1bU9iamVjdChvYmplY3QpIHt9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBzaW5nbGUgQ2VzaXVtIG9iamVjdCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0geyFUfSBvYmplY3RcbiAgICogQHBhcmFtIHtib29sZWFufSBkZXN0cm95XG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICByZW1vdmVTaW5nbGVDZXNpdW1PYmplY3Qob2JqZWN0LCBkZXN0cm95KSB7fVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIENlc2l1bSBvYmplY3RzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVzdHJveVxuICAgKiBAYWJzdHJhY3RcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcmVtb3ZlQWxsQ2VzaXVtT2JqZWN0cyhkZXN0cm95KSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydCgnb2xzYy9jb3JlLmpzJykuTGF5ZXJXaXRoUGFyZW50c30gb2xMYXllcldpdGhQYXJlbnRzXG4gICAqIEByZXR1cm4gez9BcnJheS48VD59XG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBjcmVhdGVTaW5nbGVMYXllckNvdW50ZXJwYXJ0cyhvbExheWVyV2l0aFBhcmVudHMpIHt9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgQWJzdHJhY3RTeW5jaHJvbml6ZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2xjcy5SYXN0ZXJTeW5jaHJvbml6ZXJcbiAqL1xuaW1wb3J0IG9sTGF5ZXJHcm91cCBmcm9tICdvbC9sYXllci9Hcm91cC5qcyc7XG5pbXBvcnQge2dldFVpZCwgc3RhYmxlU29ydH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCBvbGNzQWJzdHJhY3RTeW5jaHJvbml6ZXIgZnJvbSAnLi9BYnN0cmFjdFN5bmNocm9uaXplci5qcyc7XG5pbXBvcnQgb2xjc0NvcmUgZnJvbSAnLi9jb3JlLmpzJztcblxuY2xhc3MgUmFzdGVyU3luY2hyb25pemVyIGV4dGVuZHMgb2xjc0Fic3RyYWN0U3luY2hyb25pemVyIHtcbiAgLyoqXG4gICAqIFRoaXMgb2JqZWN0IHRha2VzIGNhcmUgb2Ygb25lLWRpcmVjdGlvbmFsIHN5bmNocm9uaXphdGlvbiBvZlxuICAgKiBPcGVubGF5ZXJzIHJhc3RlciBsYXllcnMgdG8gdGhlIGdpdmVuIENlc2l1bSBnbG9iZS5cbiAgICogQHBhcmFtIHshb2wuTWFwfSBtYXBcbiAgICogQHBhcmFtIHshQ2VzaXVtLlNjZW5lfSBzY2VuZVxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGV4dGVuZHMge29sY3NBYnN0cmFjdFN5bmNocm9uaXplci48Q2VzaXVtLkltYWdlcnlMYXllcj59XG4gICAqIEBhcGlcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1hcCwgc2NlbmUpIHtcbiAgICBzdXBlcihtYXAsIHNjZW5lKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshQ2VzaXVtLkltYWdlcnlMYXllckNvbGxlY3Rpb259XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNlc2l1bUxheWVyc18gPSBzY2VuZS5pbWFnZXJ5TGF5ZXJzO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFDZXNpdW0uSW1hZ2VyeUxheWVyQ29sbGVjdGlvbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub3VyTGF5ZXJzXyA9IG5ldyBDZXNpdW0uSW1hZ2VyeUxheWVyQ29sbGVjdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBhZGRDZXNpdW1PYmplY3Qob2JqZWN0KSB7XG4gICAgdGhpcy5jZXNpdW1MYXllcnNfLmFkZChvYmplY3QpO1xuICAgIHRoaXMub3VyTGF5ZXJzXy5hZGQob2JqZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgZGVzdHJveUNlc2l1bU9iamVjdChvYmplY3QpIHtcbiAgICBvYmplY3QuZGVzdHJveSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICByZW1vdmVTaW5nbGVDZXNpdW1PYmplY3Qob2JqZWN0LCBkZXN0cm95KSB7XG4gICAgdGhpcy5jZXNpdW1MYXllcnNfLnJlbW92ZShvYmplY3QsIGRlc3Ryb3kpO1xuICAgIHRoaXMub3VyTGF5ZXJzXy5yZW1vdmUob2JqZWN0LCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHJlbW92ZUFsbENlc2l1bU9iamVjdHMoZGVzdHJveSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vdXJMYXllcnNfLmxlbmd0aDsgKytpKSB7XG4gICAgICB0aGlzLmNlc2l1bUxheWVyc18ucmVtb3ZlKHRoaXMub3VyTGF5ZXJzXy5nZXQoaSksIGRlc3Ryb3kpO1xuICAgIH1cbiAgICB0aGlzLm91ckxheWVyc18ucmVtb3ZlQWxsKGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIENlc2l1bS5JbWFnZXJ5TGF5ZXIuXG4gICAqIE1heSBiZSBvdmVycmlkZW4gYnkgY2hpbGQgY2xhc3NlcyB0byBpbXBsZW1lbnQgY3VzdG9tIGJlaGF2aW9yLlxuICAgKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBoYW5kbGVzIHRpbGVkIGltYWdlcmllcyBpbiBFUFNHOjQzMjYgb3JcbiAgICogRVBTRzozODU5LlxuICAgKiBAcGFyYW0geyFvbC5sYXllci5CYXNlfSBvbExheWVyXG4gICAqIEBwYXJhbSB7IW9sLnByb2ouUHJvamVjdGlvbn0gdmlld1Byb2ogUHJvamVjdGlvbiBvZiB0aGUgdmlldy5cbiAgICogQHJldHVybiB7P0FycmF5LjwhQ2VzaXVtLkltYWdlcnlMYXllcj59IGFycmF5IG9yIG51bGwgaWYgbm90IHBvc3NpYmxlXG4gICAqIChvciBzdXBwb3J0ZWQpXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGNvbnZlcnRMYXllclRvQ2VzaXVtSW1hZ2VyaWVzKG9sTGF5ZXIsIHZpZXdQcm9qKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gb2xjc0NvcmUudGlsZUxheWVyVG9JbWFnZXJ5TGF5ZXIodGhpcy5tYXAsIG9sTGF5ZXIsIHZpZXdQcm9qKTtcbiAgICByZXR1cm4gcmVzdWx0ID8gW3Jlc3VsdF0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBjcmVhdGVTaW5nbGVMYXllckNvdW50ZXJwYXJ0cyhvbExheWVyV2l0aFBhcmVudHMpIHtcbiAgICBjb25zdCBvbExheWVyID0gb2xMYXllcldpdGhQYXJlbnRzLmxheWVyO1xuICAgIGNvbnN0IHVpZCA9IGdldFVpZChvbExheWVyKS50b1N0cmluZygpO1xuICAgIGNvbnN0IHZpZXdQcm9qID0gdGhpcy52aWV3LmdldFByb2plY3Rpb24oKTtcbiAgICBjb25zb2xlLmFzc2VydCh2aWV3UHJvaik7XG4gICAgY29uc3QgY2VzaXVtT2JqZWN0cyA9IHRoaXMuY29udmVydExheWVyVG9DZXNpdW1JbWFnZXJpZXMob2xMYXllciwgdmlld1Byb2opO1xuICAgIGlmIChjZXNpdW1PYmplY3RzKSB7XG4gICAgICBjb25zdCBsaXN0ZW5LZXlBcnJheSA9IFtdO1xuICAgICAgW29sTGF5ZXJXaXRoUGFyZW50cy5sYXllcl0uY29uY2F0KG9sTGF5ZXJXaXRoUGFyZW50cy5wYXJlbnRzKS5mb3JFYWNoKChvbExheWVySXRlbSkgPT4ge1xuICAgICAgICBsaXN0ZW5LZXlBcnJheS5wdXNoKG9sTGF5ZXJJdGVtLm9uKFsnY2hhbmdlOm9wYWNpdHknLCAnY2hhbmdlOnZpc2libGUnXSwgKCkgPT4ge1xuICAgICAgICAgIC8vIHRoZSBjb21waWxlciBkb2VzIG5vdCBzZWVtIHRvIGJlIGFibGUgdG8gaW5mZXIgdGhpc1xuICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KGNlc2l1bU9iamVjdHMpO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VzaXVtT2JqZWN0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb2xjc0NvcmUudXBkYXRlQ2VzaXVtTGF5ZXJQcm9wZXJ0aWVzKG9sTGF5ZXJXaXRoUGFyZW50cywgY2VzaXVtT2JqZWN0c1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9KTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZXNpdW1PYmplY3RzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIG9sY3NDb3JlLnVwZGF0ZUNlc2l1bUxheWVyUHJvcGVydGllcyhvbExheWVyV2l0aFBhcmVudHMsIGNlc2l1bU9iamVjdHNbaV0pO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGVyZSBpcyBubyB3YXkgdG8gbW9kaWZ5IENlc2l1bSBsYXllciBleHRlbnQsXG4gICAgICAvLyB3ZSBoYXZlIHRvIHJlY3JlYXRlIHdoZW4gT3BlbkxheWVycyBsYXllciBleHRlbnQgY2hhbmdlczpcbiAgICAgIGxpc3RlbktleUFycmF5LnB1c2gob2xMYXllci5vbignY2hhbmdlOmV4dGVudCcsIChlKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VzaXVtT2JqZWN0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHRoaXMuY2VzaXVtTGF5ZXJzXy5yZW1vdmUoY2VzaXVtT2JqZWN0c1tpXSwgdHJ1ZSk7IC8vIGRlc3Ryb3lcbiAgICAgICAgICB0aGlzLm91ckxheWVyc18ucmVtb3ZlKGNlc2l1bU9iamVjdHNbaV0sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5sYXllck1hcFtnZXRVaWQob2xMYXllcildOyAvLyBpbnZhbGlkYXRlIHRoZSBtYXAgZW50cnlcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZSgpO1xuICAgICAgfSkpO1xuXG4gICAgICBsaXN0ZW5LZXlBcnJheS5wdXNoKG9sTGF5ZXIub24oJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIC8vIHdoZW4gdGhlIHNvdXJjZSBjaGFuZ2VzLCByZS1hZGQgdGhlIGxheWVyIHRvIGZvcmNlIHVwZGF0ZVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNlc2l1bU9iamVjdHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2VzaXVtTGF5ZXJzXy5pbmRleE9mKGNlc2l1bU9iamVjdHNbaV0pO1xuICAgICAgICAgIGlmIChwb3NpdGlvbiA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmNlc2l1bUxheWVyc18ucmVtb3ZlKGNlc2l1bU9iamVjdHNbaV0sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuY2VzaXVtTGF5ZXJzXy5hZGQoY2VzaXVtT2JqZWN0c1tpXSwgcG9zaXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkpO1xuXG4gICAgICB0aGlzLm9sTGF5ZXJMaXN0ZW5LZXlzW3VpZF0ucHVzaCguLi5saXN0ZW5LZXlBcnJheSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY2VzaXVtT2JqZWN0cykgPyBjZXNpdW1PYmplY3RzIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcmRlciBjb3VudGVycGFydHMgdXNpbmcgdGhlIHNhbWUgYWxnb3JpdGhtIGFzIHRoZSBPcGVubGF5ZXJzIHJlbmRlcmVyOlxuICAgKiB6LWluZGV4IHRoZW4gb3JpZ2luYWwgc2VxdWVuY2Ugb3JkZXIuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBvcmRlckxheWVycygpIHtcbiAgICBjb25zdCBsYXllcnMgPSBbXTtcbiAgICBjb25zdCB6SW5kaWNlcyA9IHt9O1xuICAgIGNvbnN0IHF1ZXVlID0gW3RoaXMubWFwTGF5ZXJHcm91cF07XG5cbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgb2xMYXllciA9IHF1ZXVlLnNwbGljZSgwLCAxKVswXTtcbiAgICAgIGxheWVycy5wdXNoKG9sTGF5ZXIpO1xuICAgICAgekluZGljZXNbZ2V0VWlkKG9sTGF5ZXIpXSA9IG9sTGF5ZXIuZ2V0WkluZGV4KCkgfHwgMDtcblxuICAgICAgaWYgKG9sTGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICAgICAgY29uc3Qgc3VibGF5ZXJzID0gb2xMYXllci5nZXRMYXllcnMoKTtcbiAgICAgICAgaWYgKHN1YmxheWVycykge1xuICAgICAgICAgIC8vIFByZXBlbmQgcXVldWUgd2l0aCBzdWJsYXllcnMgaW4gb3JkZXJcbiAgICAgICAgICBxdWV1ZS51bnNoaWZ0KC4uLnN1YmxheWVycy5nZXRBcnJheSgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHN0YWJsZVNvcnQobGF5ZXJzLCAobGF5ZXIxLCBsYXllcjIpID0+XG4gICAgICB6SW5kaWNlc1tnZXRVaWQobGF5ZXIxKV0gLSB6SW5kaWNlc1tnZXRVaWQobGF5ZXIyKV1cbiAgICApO1xuXG4gICAgbGF5ZXJzLmZvckVhY2goKG9sTGF5ZXIpID0+IHtcbiAgICAgIGNvbnN0IG9sTGF5ZXJJZCA9IGdldFVpZChvbExheWVyKS50b1N0cmluZygpO1xuICAgICAgY29uc3QgY2VzaXVtT2JqZWN0cyA9IHRoaXMubGF5ZXJNYXBbb2xMYXllcklkXTtcbiAgICAgIGlmIChjZXNpdW1PYmplY3RzKSB7XG4gICAgICAgIGNlc2l1bU9iamVjdHMuZm9yRWFjaCgoY2VzaXVtT2JqZWN0KSA9PiB7IHRoaXMucmFpc2VUb1RvcChjZXNpdW1PYmplY3QpOyB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0Nlc2l1bS5JbWFnZXJ5TGF5ZXJ9IGNvdW50ZXJwYXJ0XG4gICAqL1xuICByYWlzZVRvVG9wKGNvdW50ZXJwYXJ0KSB7XG4gICAgdGhpcy5jZXNpdW1MYXllcnNfLnJhaXNlVG9Ub3AoY291bnRlcnBhcnQpO1xuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgUmFzdGVyU3luY2hyb25pemVyO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvUkJ1c2hcbiAqL1xuaW1wb3J0IFJCdXNoXyBmcm9tICdyYnVzaC9yYnVzaC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZSwgZXF1YWxzIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEVudHJ5XG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluWFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pbllcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhYXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWF4WVxuICogQHByb3BlcnR5IHtPYmplY3R9IFt2YWx1ZV1cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBXcmFwcGVyIGFyb3VuZCB0aGUgUkJ1c2ggYnkgVmxhZGltaXIgQWdhZm9ua2luLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3VybmVyL3JidXNoLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbnZhciBSQnVzaCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9tYXhFbnRyaWVzIE1heCBlbnRyaWVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJCdXNoKG9wdF9tYXhFbnRyaWVzKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yYnVzaF8gPSBuZXcgUkJ1c2hfKG9wdF9tYXhFbnRyaWVzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBiZXR3ZWVuIHRoZSBvYmplY3RzIGFkZGVkIHRvIHRoaXMgcmJ1c2ggd3JhcHBlclxuICAgICAgICAgKiBhbmQgdGhlIG9iamVjdHMgdGhhdCBhcmUgYWN0dWFsbHkgYWRkZWQgdG8gdGhlIGludGVybmFsIHJidXNoLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgRW50cnk+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pdGVtc18gPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zZXJ0IGEgdmFsdWUgaW50byB0aGUgUkJ1c2guXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAgICovXG4gICAgUkJ1c2gucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChleHRlbnQsIHZhbHVlKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7RW50cnl9ICovXG4gICAgICAgIHZhciBpdGVtID0ge1xuICAgICAgICAgICAgbWluWDogZXh0ZW50WzBdLFxuICAgICAgICAgICAgbWluWTogZXh0ZW50WzFdLFxuICAgICAgICAgICAgbWF4WDogZXh0ZW50WzJdLFxuICAgICAgICAgICAgbWF4WTogZXh0ZW50WzNdLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJidXNoXy5pbnNlcnQoaXRlbSk7XG4gICAgICAgIHRoaXMuaXRlbXNfW2dldFVpZCh2YWx1ZSldID0gaXRlbTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1bGstaW5zZXJ0IHZhbHVlcyBpbnRvIHRoZSBSQnVzaC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ+fSBleHRlbnRzIEV4dGVudHMuXG4gICAgICogQHBhcmFtIHtBcnJheTxUPn0gdmFsdWVzIFZhbHVlcy5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChleHRlbnRzLCB2YWx1ZXMpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gbmV3IEFycmF5KHZhbHVlcy5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBleHRlbnRzW2ldO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgICAgICAgLyoqIEB0eXBlIHtFbnRyeX0gKi9cbiAgICAgICAgICAgIHZhciBpdGVtID0ge1xuICAgICAgICAgICAgICAgIG1pblg6IGV4dGVudFswXSxcbiAgICAgICAgICAgICAgICBtaW5ZOiBleHRlbnRbMV0sXG4gICAgICAgICAgICAgICAgbWF4WDogZXh0ZW50WzJdLFxuICAgICAgICAgICAgICAgIG1heFk6IGV4dGVudFszXSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaXRlbXNbaV0gPSBpdGVtO1xuICAgICAgICAgICAgdGhpcy5pdGVtc19bZ2V0VWlkKHZhbHVlKV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmJ1c2hfLmxvYWQoaXRlbXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgdmFsdWUgZnJvbSB0aGUgUkJ1c2guXG4gICAgICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBSZW1vdmVkLlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh2YWx1ZSk7XG4gICAgICAgIC8vIGdldCB0aGUgb2JqZWN0IGluIHdoaWNoIHRoZSB2YWx1ZSB3YXMgd3JhcHBlZCB3aGVuIGFkZGluZyB0byB0aGVcbiAgICAgICAgLy8gaW50ZXJuYWwgcmJ1c2guIHRoZW4gdXNlIHRoYXQgb2JqZWN0IHRvIGRvIHRoZSByZW1vdmFsLlxuICAgICAgICB2YXIgaXRlbSA9IHRoaXMuaXRlbXNfW3VpZF07XG4gICAgICAgIGRlbGV0ZSB0aGlzLml0ZW1zX1t1aWRdO1xuICAgICAgICByZXR1cm4gdGhpcy5yYnVzaF8ucmVtb3ZlKGl0ZW0pICE9PSBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBleHRlbnQgb2YgYSB2YWx1ZSBpbiB0aGUgUkJ1c2guXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAgICovXG4gICAgUkJ1c2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChleHRlbnQsIHZhbHVlKSB7XG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5pdGVtc19bZ2V0VWlkKHZhbHVlKV07XG4gICAgICAgIHZhciBiYm94ID0gW2l0ZW0ubWluWCwgaXRlbS5taW5ZLCBpdGVtLm1heFgsIGl0ZW0ubWF4WV07XG4gICAgICAgIGlmICghZXF1YWxzKGJib3gsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0KGV4dGVudCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYWxsIHZhbHVlcyBpbiB0aGUgUkJ1c2guXG4gICAgICogQHJldHVybiB7QXJyYXk8VD59IEFsbC5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLnJidXNoXy5hbGwoKTtcbiAgICAgICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFsbCB2YWx1ZXMgaW4gdGhlIGdpdmVuIGV4dGVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7QXJyYXk8VD59IEFsbCBpbiBleHRlbnQuXG4gICAgICovXG4gICAgUkJ1c2gucHJvdG90eXBlLmdldEluRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICAvKiogQHR5cGUge0VudHJ5fSAqL1xuICAgICAgICB2YXIgYmJveCA9IHtcbiAgICAgICAgICAgIG1pblg6IGV4dGVudFswXSxcbiAgICAgICAgICAgIG1pblk6IGV4dGVudFsxXSxcbiAgICAgICAgICAgIG1heFg6IGV4dGVudFsyXSxcbiAgICAgICAgICAgIG1heFk6IGV4dGVudFszXSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5yYnVzaF8uc2VhcmNoKGJib3gpO1xuICAgICAgICByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxscyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggZWFjaCB2YWx1ZSBpbiB0aGUgdHJlZS5cbiAgICAgKiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSwgdGhpcyB2YWx1ZSBpcyByZXR1cm5lZCB3aXRob3V0XG4gICAgICogY2hlY2tpbmcgdGhlIHJlc3Qgb2YgdGhlIHRyZWUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogKn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gICAgICogQHJldHVybiB7Kn0gQ2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2hfKHRoaXMuZ2V0QWxsKCksIGNhbGxiYWNrKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGxzIGEgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aCBlYWNoIHZhbHVlIGluIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCk6ICp9IGNhbGxiYWNrIENhbGxiYWNrLlxuICAgICAqIEByZXR1cm4geyp9IENhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUuZm9yRWFjaEluRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaF8odGhpcy5nZXRJbkV4dGVudChleHRlbnQpLCBjYWxsYmFjayk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PFQ+fSB2YWx1ZXMgVmFsdWVzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCk6ICp9IGNhbGxiYWNrIENhbGxiYWNrLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybiB7Kn0gQ2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5mb3JFYWNoXyA9IGZ1bmN0aW9uICh2YWx1ZXMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2sodmFsdWVzW2ldKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW1wdHkodGhpcy5pdGVtc18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCB2YWx1ZXMgZnJvbSB0aGUgUkJ1c2guXG4gICAgICovXG4gICAgUkJ1c2gucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJidXNoXy5jbGVhcigpO1xuICAgICAgICB0aGlzLml0ZW1zXyA9IHt9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqL1xuICAgIFJCdXNoLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAob3B0X2V4dGVudCkge1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMucmJ1c2hfLnRvSlNPTigpO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoZGF0YS5taW5YLCBkYXRhLm1pblksIGRhdGEubWF4WCwgZGF0YS5tYXhZLCBvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UkJ1c2h9IHJidXNoIFItVHJlZS5cbiAgICAgKi9cbiAgICBSQnVzaC5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gKHJidXNoKSB7XG4gICAgICAgIHRoaXMucmJ1c2hfLmxvYWQocmJ1c2gucmJ1c2hfLmFsbCgpKTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiByYnVzaC5pdGVtc18pIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNfW2ldID0gcmJ1c2guaXRlbXNfW2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUkJ1c2g7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUkJ1c2g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SQnVzaC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1ZlY3RvckV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIGZlYXR1cmUgaXMgYWRkZWQgdG8gdGhlIHNvdXJjZS5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjYWRkZmVhdHVyZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBRERGRUFUVVJFOiAnYWRkZmVhdHVyZScsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBmZWF0dXJlIGlzIHVwZGF0ZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yLlZlY3RvclNvdXJjZUV2ZW50I2NoYW5nZWZlYXR1cmVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ0hBTkdFRkVBVFVSRTogJ2NoYW5nZWZlYXR1cmUnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjbGVhciBtZXRob2QgaXMgY2FsbGVkIG9uIHRoZSBzb3VyY2UuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yLlZlY3RvclNvdXJjZUV2ZW50I2NsZWFyXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENMRUFSOiAnY2xlYXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgZmVhdHVyZSBpcyByZW1vdmVkIGZyb20gdGhlIHNvdXJjZS5cbiAgICAgKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yI2NsZWFyIHNvdXJjZS5jbGVhcigpfSBmb3IgZXhjZXB0aW9ucy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjcmVtb3ZlZmVhdHVyZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSRU1PVkVGRUFUVVJFOiAncmVtb3ZlZmVhdHVyZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sb2FkaW5nc3RyYXRlZ3lcbiAqL1xuLyoqXG4gKiBTdHJhdGVneSBmdW5jdGlvbiBmb3IgbG9hZGluZyBhbGwgZmVhdHVyZXMgd2l0aCBhIHNpbmdsZSByZXF1ZXN0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gRXh0ZW50cy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbChleHRlbnQsIHJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gW1stSW5maW5pdHksIC1JbmZpbml0eSwgSW5maW5pdHksIEluZmluaXR5XV07XG59XG4vKipcbiAqIFN0cmF0ZWd5IGZ1bmN0aW9uIGZvciBsb2FkaW5nIGZlYXR1cmVzIGJhc2VkIG9uIHRoZSB2aWV3J3MgZXh0ZW50IGFuZFxuICogcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudD59IEV4dGVudHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYm94KGV4dGVudCwgcmVzb2x1dGlvbikge1xuICAgIHJldHVybiBbZXh0ZW50XTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHN0cmF0ZWd5IGZ1bmN0aW9uIGZvciBsb2FkaW5nIGZlYXR1cmVzIGJhc2VkIG9uIGEgdGlsZSBncmlkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudCwgbnVtYmVyKTogQXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gTG9hZGluZyBzdHJhdGVneS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbGUodGlsZUdyaWQpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gRXh0ZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoZXh0ZW50LCByZXNvbHV0aW9uKSB7XG4gICAgICAgIHZhciB6ID0gdGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gKi9cbiAgICAgICAgdmFyIGV4dGVudHMgPSBbXTtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9ICovXG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgMCwgMF07XG4gICAgICAgIGZvciAodGlsZUNvb3JkWzFdID0gdGlsZVJhbmdlLm1pblg7IHRpbGVDb29yZFsxXSA8PSB0aWxlUmFuZ2UubWF4WDsgKyt0aWxlQ29vcmRbMV0pIHtcbiAgICAgICAgICAgIGZvciAodGlsZUNvb3JkWzJdID0gdGlsZVJhbmdlLm1pblk7IHRpbGVDb29yZFsyXSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt0aWxlQ29vcmRbMl0pIHtcbiAgICAgICAgICAgICAgICBleHRlbnRzLnB1c2godGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHRlbnRzO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGluZ3N0cmF0ZWd5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9mb3JtYXQvRm9ybWF0VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBBUlJBWV9CVUZGRVI6ICdhcnJheWJ1ZmZlcicsXG4gICAgSlNPTjogJ2pzb24nLFxuICAgIFRFWFQ6ICd0ZXh0JyxcbiAgICBYTUw6ICd4bWwnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZvcm1hdFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ZlYXR1cmVsb2FkZXJcbiAqL1xuaW1wb3J0IEZvcm1hdFR5cGUgZnJvbSAnLi9mb3JtYXQvRm9ybWF0VHlwZS5qcyc7XG5pbXBvcnQgeyBWT0lEIH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuLyoqXG4gKlxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgd2l0aENyZWRlbnRpYWxzID0gZmFsc2U7XG4vKipcbiAqIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3Rvcn0gc291cmNlcyB1c2UgYSBmdW5jdGlvbiBvZiB0aGlzIHR5cGUgdG9cbiAqIGxvYWQgZmVhdHVyZXMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnR9IHJlcHJlc2VudGluZyB0aGUgYXJlYSB0byBiZSBsb2FkZWQsXG4gKiBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSByZXNvbHV0aW9uIChtYXAgdW5pdHMgcGVyIHBpeGVsKSBhbmQgYW5cbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzXG4gKiBhcmd1bWVudHMuIGB0aGlzYCB3aXRoaW4gdGhlIGZ1bmN0aW9uIGlzIGJvdW5kIHRvIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yfSBpdCdzIGNhbGxlZCBmcm9tLlxuICpcbiAqIFRoZSBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyB0aGUgZmVhdHVyZXMgYW5kIGFkZGluZyB0aGVtIHRvIHRoZVxuICogc291cmNlLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6KGltcG9ydChcIi4vc291cmNlL1ZlY3RvclwiKS5kZWZhdWx0fGltcG9ydChcIi4vVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0KSwgaW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50LCBudW1iZXIsXG4gKiAgICAgICAgICAgICAgICAgICAgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IHZvaWR9IEZlYXR1cmVMb2FkZXJcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J9IHNvdXJjZXMgdXNlIGEgZnVuY3Rpb24gb2YgdGhpcyB0eXBlIHRvXG4gKiBnZXQgdGhlIHVybCB0byBsb2FkIGZlYXR1cmVzIGZyb20uXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnR9IHJlcHJlc2VudGluZyB0aGUgYXJlYVxuICogdG8gYmUgbG9hZGVkLCBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSByZXNvbHV0aW9uIChtYXAgdW5pdHMgcGVyIHBpeGVsKVxuICogYW5kIGFuIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzXG4gKiBhcmd1bWVudHMgYW5kIHJldHVybnMgYSBge3N0cmluZ31gIHJlcHJlc2VudGluZyB0aGUgVVJMLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudCwgbnVtYmVyLCBpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0KTogc3RyaW5nfSBGZWF0dXJlVXJsRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ3xGZWF0dXJlVXJsRnVuY3Rpb259IHVybCBGZWF0dXJlIFVSTCBzZXJ2aWNlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Zvcm1hdC9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZvcm1hdCBGZWF0dXJlIGZvcm1hdC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczppbXBvcnQoXCIuL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdCwgQXJyYXk8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+LCBpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnQpOiB2b2lkfGZ1bmN0aW9uKHRoaXM6aW1wb3J0KFwiLi9zb3VyY2UvVmVjdG9yXCIpLmRlZmF1bHQsIEFycmF5PGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pik6IHZvaWR9IHN1Y2Nlc3NcbiAqICAgICBGdW5jdGlvbiBjYWxsZWQgd2l0aCB0aGUgbG9hZGVkIGZlYXR1cmVzIGFuZCBvcHRpb25hbGx5IHdpdGggdGhlIGRhdGFcbiAqICAgICBwcm9qZWN0aW9uLiBDYWxsZWQgd2l0aCB0aGUgdmVjdG9yIHRpbGUgb3Igc291cmNlIGFzIGB0aGlzYC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczppbXBvcnQoXCIuL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdCk6IHZvaWR8ZnVuY3Rpb24odGhpczppbXBvcnQoXCIuL3NvdXJjZS9WZWN0b3JcIikuZGVmYXVsdCk6IHZvaWR9IGZhaWx1cmVcbiAqICAgICBGdW5jdGlvbiBjYWxsZWQgd2hlbiBsb2FkaW5nIGZhaWxlZC4gQ2FsbGVkIHdpdGggdGhlIHZlY3RvciB0aWxlIG9yXG4gKiAgICAgc291cmNlIGFzIGB0aGlzYC5cbiAqIEByZXR1cm4ge0ZlYXR1cmVMb2FkZXJ9IFRoZSBmZWF0dXJlIGxvYWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRGZWF0dXJlc1hocih1cmwsIGZvcm1hdCwgc3VjY2VzcywgZmFpbHVyZSkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAdGhpcyB7aW1wb3J0KFwiLi9zb3VyY2UvVmVjdG9yXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKCdHRVQnLCB0eXBlb2YgdXJsID09PSAnZnVuY3Rpb24nID8gdXJsKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikgOiB1cmwsIHRydWUpO1xuICAgICAgICBpZiAoZm9ybWF0LmdldFR5cGUoKSA9PSBGb3JtYXRUeXBlLkFSUkFZX0JVRkZFUikge1xuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICAgIH1cbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFscztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgLy8gc3RhdHVzIHdpbGwgYmUgMCBmb3IgZmlsZTovLyB1cmxzXG4gICAgICAgICAgICBpZiAoIXhoci5zdGF0dXMgfHwgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBmb3JtYXQuZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7RG9jdW1lbnR8Tm9kZXxPYmplY3R8c3RyaW5nfHVuZGVmaW5lZH0gKi9cbiAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlID09IEZvcm1hdFR5cGUuSlNPTiB8fCB0eXBlID09IEZvcm1hdFR5cGUuVEVYVCkge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IEZvcm1hdFR5cGUuWE1MKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHhoci5yZXNwb25zZVhNTDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoeGhyLnJlc3BvbnNlVGV4dCwgJ2FwcGxpY2F0aW9uL3htbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gRm9ybWF0VHlwZS5BUlJBWV9CVUZGRVIpIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gLyoqIEB0eXBlIHtBcnJheUJ1ZmZlcn0gKi8gKHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzcy5jYWxsKHRoaXMsIGZvcm1hdC5yZWFkRmVhdHVyZXMoc291cmNlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnQ6IGV4dGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB9KSwgZm9ybWF0LnJlYWRQcm9qZWN0aW9uKHNvdXJjZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZmFpbHVyZS5jYWxsKHRoaXMpO1xuICAgICAgICB9LmJpbmQodGhpcyk7XG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgfSk7XG59XG4vKipcbiAqIENyZWF0ZSBhbiBYSFIgZmVhdHVyZSBsb2FkZXIgZm9yIGEgYHVybGAgYW5kIGBmb3JtYXRgLiBUaGUgZmVhdHVyZSBsb2FkZXJcbiAqIGxvYWRzIGZlYXR1cmVzICh3aXRoIFhIUiksIHBhcnNlcyB0aGUgZmVhdHVyZXMsIGFuZCBhZGRzIHRoZW0gdG8gdGhlXG4gKiB2ZWN0b3Igc291cmNlLlxuICogQHBhcmFtIHtzdHJpbmd8RmVhdHVyZVVybEZ1bmN0aW9ufSB1cmwgRmVhdHVyZSBVUkwgc2VydmljZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9mb3JtYXQvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmb3JtYXQgRmVhdHVyZSBmb3JtYXQuXG4gKiBAcmV0dXJuIHtGZWF0dXJlTG9hZGVyfSBUaGUgZmVhdHVyZSBsb2FkZXIuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB4aHIodXJsLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gbG9hZEZlYXR1cmVzWGhyKHVybCwgZm9ybWF0LCBcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gZmVhdHVyZXMgVGhlIGxvYWRlZCBmZWF0dXJlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRhdGFQcm9qZWN0aW9uIERhdGFcbiAgICAgKiBwcm9qZWN0aW9uLlxuICAgICAqIEB0aGlzIHtpbXBvcnQoXCIuL3NvdXJjZS9WZWN0b3JcIikuZGVmYXVsdHxpbXBvcnQoXCIuL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoZmVhdHVyZXMsIGRhdGFQcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciBzb3VyY2VPclRpbGUgPSAvKiogQHR5cGUgez99ICovICh0aGlzKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VPclRpbGUuYWRkRmVhdHVyZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9zb3VyY2UvVmVjdG9yXCIpLmRlZmF1bHR9ICovIChzb3VyY2VPclRpbGUpLmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcbiAgICAgICAgfVxuICAgIH0sIFxuICAgIC8qIEZJWE1FIGhhbmRsZSBlcnJvciAqLyBWT0lEKTtcbn1cbi8qKlxuICogU2V0dGVyIGZvciB0aGUgd2l0aENyZWRlbnRpYWxzIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBYSFIuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB4aHJXaXRoQ3JlZGVudGlhbHMgVGhlIHZhbHVlIG9mIHdpdGhDcmVkZW50aWFscyB0byBzZXQuXG4gKiBDb21wYXJlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9YTUxIdHRwUmVxdWVzdC9cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFdpdGhDcmVkZW50aWFscyh4aHJXaXRoQ3JlZGVudGlhbHMpIHtcbiAgICB3aXRoQ3JlZGVudGlhbHMgPSB4aHJXaXRoQ3JlZGVudGlhbHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZWF0dXJlbG9hZGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVmVjdG9yXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBSQnVzaCBmcm9tICcuLi9zdHJ1Y3RzL1JCdXNoLmpzJztcbmltcG9ydCBTb3VyY2UgZnJvbSAnLi9Tb3VyY2UuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4vU3RhdGUuanMnO1xuaW1wb3J0IFZlY3RvckV2ZW50VHlwZSBmcm9tICcuL1ZlY3RvckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBUUlVFLCBWT0lEIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFsbCBhcyBhbGxTdHJhdGVneSB9IGZyb20gJy4uL2xvYWRpbmdzdHJhdGVneS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zRXh0ZW50LCBlcXVhbHMgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBnZXRWYWx1ZXMsIGlzRW1wdHkgfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHhociB9IGZyb20gJy4uL2ZlYXR1cmVsb2FkZXIuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9leHRlbnR+RXh0ZW50fSBhbmQgYSByZXNvbHV0aW9uIGFzIGFyZ3VtZW50cywgYW5kXG4gKiByZXR1cm5zIGFuIGFycmF5IG9mIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50fkV4dGVudH0gd2l0aCB0aGUgZXh0ZW50cyB0byBsb2FkLiBVc3VhbGx5IHRoaXNcbiAqIGlzIG9uZSBvZiB0aGUgc3RhbmRhcmQge0BsaW5rIG1vZHVsZTpvbC9sb2FkaW5nc3RyYXRlZ3l9IHN0cmF0ZWdpZXMuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQsIG51bWJlcik6IEFycmF5PGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ+fSBMb2FkaW5nU3RyYXRlZ3lcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXNcbiAqIHR5cGUuXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gR2VvbWV0cnlcbiAqL1xudmFyIFZlY3RvclNvdXJjZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWZWN0b3JTb3VyY2VFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj19IG9wdF9mZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmVjdG9yU291cmNlRXZlbnQodHlwZSwgb3B0X2ZlYXR1cmUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBmZWF0dXJlIGJlaW5nIGFkZGVkIG9yIHJlbW92ZWQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+fHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmVhdHVyZSA9IG9wdF9mZWF0dXJlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBWZWN0b3JTb3VyY2VFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IFZlY3RvclNvdXJjZUV2ZW50IH07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSBbZmVhdHVyZXNdXG4gKiBGZWF0dXJlcy4gSWYgcHJvdmlkZWQgYXMge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSwgdGhlIGZlYXR1cmVzIGluIHRoZSBzb3VyY2VcbiAqIGFuZCB0aGUgY29sbGVjdGlvbiB3aWxsIHN0YXkgaW4gc3luYy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gW2Zvcm1hdF0gVGhlIGZlYXR1cmUgZm9ybWF0IHVzZWQgYnkgdGhlIFhIUlxuICogZmVhdHVyZSBsb2FkZXIgd2hlbiBgdXJsYCBpcyBzZXQuIFJlcXVpcmVkIGlmIGB1cmxgIGlzIHNldCwgb3RoZXJ3aXNlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2ZlYXR1cmVsb2FkZXIuanNcIikuRmVhdHVyZUxvYWRlcn0gW2xvYWRlcl1cbiAqIFRoZSBsb2FkZXIgZnVuY3Rpb24gdXNlZCB0byBsb2FkIGZlYXR1cmVzLCBmcm9tIGEgcmVtb3RlIHNvdXJjZSBmb3IgZXhhbXBsZS5cbiAqIElmIHRoaXMgaXMgbm90IHNldCBhbmQgYHVybGAgaXMgc2V0LCB0aGUgc291cmNlIHdpbGwgY3JlYXRlIGFuZCB1c2UgYW4gWEhSXG4gKiBmZWF0dXJlIGxvYWRlci5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge1ZlY3Rvcn0gZnJvbSAnb2wvc291cmNlJztcbiAqIGltcG9ydCB7R2VvSlNPTn0gZnJvbSAnb2wvZm9ybWF0JztcbiAqIGltcG9ydCB7YmJveH0gZnJvbSAnb2wvbG9hZGluZ3N0cmF0ZWd5JztcbiAqXG4gKiB2YXIgdmVjdG9yU291cmNlID0gbmV3IFZlY3Rvcih7XG4gKiAgIGZvcm1hdDogbmV3IEdlb0pTT04oKSxcbiAqICAgbG9hZGVyOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcbiAqICAgICAgdmFyIHByb2ogPSBwcm9qZWN0aW9uLmdldENvZGUoKTtcbiAqICAgICAgdmFyIHVybCA9ICdodHRwczovL2Fob2NldmFyLmNvbS9nZW9zZXJ2ZXIvd2ZzP3NlcnZpY2U9V0ZTJicgK1xuICogICAgICAgICAgJ3ZlcnNpb249MS4xLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVuYW1lPW9zbTp3YXRlcl9hcmVhcyYnICtcbiAqICAgICAgICAgICdvdXRwdXRGb3JtYXQ9YXBwbGljYXRpb24vanNvbiZzcnNuYW1lPScgKyBwcm9qICsgJyYnICtcbiAqICAgICAgICAgICdiYm94PScgKyBleHRlbnQuam9pbignLCcpICsgJywnICsgcHJvajtcbiAqICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAqICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICB2ZWN0b3JTb3VyY2UucmVtb3ZlTG9hZGVkRXh0ZW50KGV4dGVudCk7XG4gKiAgICAgIH1cbiAqICAgICAgeGhyLm9uZXJyb3IgPSBvbkVycm9yO1xuICogICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwKSB7XG4gKiAgICAgICAgICB2ZWN0b3JTb3VyY2UuYWRkRmVhdHVyZXMoXG4gKiAgICAgICAgICAgICAgdmVjdG9yU291cmNlLmdldEZvcm1hdCgpLnJlYWRGZWF0dXJlcyh4aHIucmVzcG9uc2VUZXh0KSk7XG4gKiAgICAgICAgfSBlbHNlIHtcbiAqICAgICAgICAgIG9uRXJyb3IoKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH1cbiAqICAgICAgeGhyLnNlbmQoKTtcbiAqICAgIH0sXG4gKiAgICBzdHJhdGVneTogYmJveFxuICogIH0pO1xuICogYGBgXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdmVybGFwcz10cnVlXSBUaGlzIHNvdXJjZSBtYXkgaGF2ZSBvdmVybGFwcGluZyBnZW9tZXRyaWVzLlxuICogU2V0dGluZyB0aGlzIHRvIGBmYWxzZWAgKGUuZy4gZm9yIHNvdXJjZXMgd2l0aCBwb2x5Z29ucyB0aGF0IHJlcHJlc2VudCBhZG1pbmlzdHJhdGl2ZVxuICogYm91bmRhcmllcyBvciBUb3BvSlNPTiBzb3VyY2VzKSBhbGxvd3MgdGhlIHJlbmRlcmVyIHRvIG9wdGltaXNlIGZpbGwgYW5kXG4gKiBzdHJva2Ugb3BlcmF0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7TG9hZGluZ1N0cmF0ZWd5fSBbc3RyYXRlZ3ldIFRoZSBsb2FkaW5nIHN0cmF0ZWd5IHRvIHVzZS5cbiAqIEJ5IGRlZmF1bHQgYW4ge0BsaW5rIG1vZHVsZTpvbC9sb2FkaW5nc3RyYXRlZ3l+YWxsfVxuICogc3RyYXRlZ3kgaXMgdXNlZCwgYSBvbmUtb2ZmIHN0cmF0ZWd5IHdoaWNoIGxvYWRzIGFsbCBmZWF0dXJlcyBhdCBvbmNlLlxuICogQHByb3BlcnR5IHtzdHJpbmd8aW1wb3J0KFwiLi4vZmVhdHVyZWxvYWRlci5qc1wiKS5GZWF0dXJlVXJsRnVuY3Rpb259IFt1cmxdXG4gKiBTZXR0aW5nIHRoaXMgb3B0aW9uIGluc3RydWN0cyB0aGUgc291cmNlIHRvIGxvYWQgZmVhdHVyZXMgdXNpbmcgYW4gWEhSIGxvYWRlclxuICogKHNlZSB7QGxpbmsgbW9kdWxlOm9sL2ZlYXR1cmVsb2FkZXJ+eGhyfSkuIFVzZSBhIGBzdHJpbmdgIGFuZCBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9sb2FkaW5nc3RyYXRlZ3l+YWxsfSBmb3IgYSBvbmUtb2ZmIGRvd25sb2FkIG9mIGFsbCBmZWF0dXJlcyBmcm9tXG4gKiB0aGUgZ2l2ZW4gVVJMLiBVc2UgYSB7QGxpbmsgbW9kdWxlOm9sL2ZlYXR1cmVsb2FkZXJ+RmVhdHVyZVVybEZ1bmN0aW9ufSB0byBnZW5lcmF0ZSB0aGUgdXJsIHdpdGhcbiAqIG90aGVyIGxvYWRpbmcgc3RyYXRlZ2llcy5cbiAqIFJlcXVpcmVzIGBmb3JtYXRgIHRvIGJlIHNldCBhcyB3ZWxsLlxuICogV2hlbiBkZWZhdWx0IFhIUiBmZWF0dXJlIGxvYWRlciBpcyBwcm92aWRlZCwgdGhlIGZlYXR1cmVzIHdpbGxcbiAqIGJlIHRyYW5zZm9ybWVkIGZyb20gdGhlIGRhdGEgcHJvamVjdGlvbiB0byB0aGUgdmlldyBwcm9qZWN0aW9uXG4gKiBkdXJpbmcgcGFyc2luZy4gSWYgeW91ciByZW1vdGUgZGF0YSBzb3VyY2UgZG9lcyBub3QgYWR2ZXJ0aXNlIGl0cyBwcm9qZWN0aW9uXG4gKiBwcm9wZXJseSwgdGhpcyB0cmFuc2Zvcm1hdGlvbiB3aWxsIGJlIGluY29ycmVjdC4gRm9yIHNvbWUgZm9ybWF0cywgdGhlXG4gKiBkZWZhdWx0IHByb2plY3Rpb24gKHVzdWFsbHkgRVBTRzo0MzI2KSBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzZXR0aW5nIHRoZVxuICogZGF0YVByb2plY3Rpb24gY29uc3RydWN0b3Igb3B0aW9uIG9uIHRoZSBmb3JtYXQuXG4gKiBOb3RlIHRoYXQgaWYgYSBzb3VyY2UgY29udGFpbnMgbm9uLWZlYXR1cmUgZGF0YSwgc3VjaCBhcyBhIEdlb0pTT04gZ2VvbWV0cnlcbiAqIG9yIGEgS01MIE5ldHdvcmtMaW5rLCB0aGVzZSB3aWxsIGJlIGlnbm9yZWQuIFVzZSBhIGN1c3RvbSBsb2FkZXIgdG8gbG9hZCB0aGVzZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZVNwYXRpYWxJbmRleD10cnVlXVxuICogQnkgZGVmYXVsdCwgYW4gUlRyZWUgaXMgdXNlZCBhcyBzcGF0aWFsIGluZGV4LiBXaGVuIGZlYXR1cmVzIGFyZSByZW1vdmVkIGFuZFxuICogYWRkZWQgZnJlcXVlbnRseSwgYW5kIHRoZSB0b3RhbCBudW1iZXIgb2YgZmVhdHVyZXMgaXMgbG93LCBzZXR0aW5nIHRoaXMgdG9cbiAqIGBmYWxzZWAgbWF5IGltcHJvdmUgcGVyZm9ybWFuY2UuXG4gKlxuICogTm90ZSB0aGF0XG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEZlYXR1cmVzSW5FeHRlbnR9LFxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNnZXRDbG9zZXN0RmVhdHVyZVRvQ29vcmRpbmF0ZX0gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEV4dGVudH0gY2Fubm90IGJlIHVzZWQgd2hlbiBgdXNlU3BhdGlhbEluZGV4YCBpc1xuICogc2V0IHRvIGBmYWxzZWAsIGFuZCB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2ZvckVhY2hGZWF0dXJlSW5FeHRlbnR9IHdpbGwgbG9vcFxuICogdGhyb3VnaCBhbGwgZmVhdHVyZXMuXG4gKlxuICogV2hlbiBzZXQgdG8gYGZhbHNlYCwgdGhlIGZlYXR1cmVzIHdpbGwgYmUgbWFpbnRhaW5lZCBpbiBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSwgd2hpY2ggY2FuIGJlIHJldHJpZXZlZCB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEZlYXR1cmVzQ29sbGVjdGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXcmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuIEZvciB2ZWN0b3IgZWRpdGluZyBhY3Jvc3MgdGhlXG4gKiAtMTgwwrAgYW5kIDE4MMKwIG1lcmlkaWFucyB0byB3b3JrIHByb3Blcmx5LCB0aGlzIHNob3VsZCBiZSBzZXQgdG8gYGZhbHNlYC4gVGhlXG4gKiByZXN1bHRpbmcgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgd2lsbCB0aGVuIGV4Y2VlZCB0aGUgd29ybGQgYm91bmRzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb3ZpZGVzIGEgc291cmNlIG9mIGZlYXR1cmVzIGZvciB2ZWN0b3IgbGF5ZXJzLiBWZWN0b3IgZmVhdHVyZXMgcHJvdmlkZWRcbiAqIGJ5IHRoaXMgc291cmNlIGFyZSBzdWl0YWJsZSBmb3IgZWRpdGluZy4gU2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3RvclRpbGV+VmVjdG9yVGlsZX0gZm9yXG4gKiB2ZWN0b3IgZGF0YSB0aGF0IGlzIG9wdGltaXplZCBmb3IgcmVuZGVyaW5nLlxuICpcbiAqIEBmaXJlcyBWZWN0b3JTb3VyY2VFdmVudFxuICogQGFwaVxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5XG4gKi9cbnZhciBWZWN0b3JTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZlY3RvclNvdXJjZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBWZWN0b3Igc291cmNlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmVjdG9yU291cmNlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIHByb2plY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0YXRlOiBTb3VyY2VTdGF0ZS5SRUFEWSxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogdHJ1ZSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9mZWF0dXJlbG9hZGVyLmpzXCIpLkZlYXR1cmVMb2FkZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sb2FkZXJfID0gVk9JRDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9mb3JtYXQvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZvcm1hdF8gPSBvcHRpb25zLmZvcm1hdDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxhcHNfID0gb3B0aW9ucy5vdmVybGFwcyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnMub3ZlcmxhcHM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfGltcG9ydChcIi4uL2ZlYXR1cmVsb2FkZXIuanNcIikuRmVhdHVyZVVybEZ1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVybF8gPSBvcHRpb25zLnVybDtcbiAgICAgICAgaWYgKG9wdGlvbnMubG9hZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmxvYWRlcl8gPSBvcHRpb25zLmxvYWRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfdGhpcy51cmxfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFzc2VydChfdGhpcy5mb3JtYXRfLCA3KTsgLy8gYGZvcm1hdGAgbXVzdCBiZSBzZXQgd2hlbiBgdXJsYCBpcyBzZXRcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIFhIUiBmZWF0dXJlIGxvYWRlciBmb3IgXCJ1cmxcIiBhbmQgXCJmb3JtYXRcIlxuICAgICAgICAgICAgX3RoaXMubG9hZGVyXyA9IHhocihfdGhpcy51cmxfLCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gKi8gKF90aGlzLmZvcm1hdF8pKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0xvYWRpbmdTdHJhdGVneX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0cmF0ZWd5XyA9XG4gICAgICAgICAgICBvcHRpb25zLnN0cmF0ZWd5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0cmF0ZWd5IDogYWxsU3RyYXRlZ3k7XG4gICAgICAgIHZhciB1c2VTcGF0aWFsSW5kZXggPSBvcHRpb25zLnVzZVNwYXRpYWxJbmRleCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy51c2VTcGF0aWFsSW5kZXggOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1JCdXNoPGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmVhdHVyZXNSdHJlZV8gPSB1c2VTcGF0aWFsSW5kZXggPyBuZXcgUkJ1c2goKSA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7UkJ1c2g8e2V4dGVudDogaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubG9hZGVkRXh0ZW50c1J0cmVlXyA9IG5ldyBSQnVzaCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsb29rdXAgb2YgZmVhdHVyZXMgYnkgaWQgKHRoZSByZXR1cm4gZnJvbSBmZWF0dXJlLmdldElkKCkpLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaWRJbmRleF8gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbG9va3VwIG9mIGZlYXR1cmVzIGJ5IHVpZCAodXNpbmcgZ2V0VWlkKGZlYXR1cmUpKS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVpZEluZGV4XyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZlYXR1cmVDaGFuZ2VLZXlzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fID0gbnVsbDtcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24sIGZlYXR1cmVzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmZlYXR1cmVzKSkge1xuICAgICAgICAgICAgZmVhdHVyZXMgPSBvcHRpb25zLmZlYXR1cmVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuZmVhdHVyZXMpIHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBvcHRpb25zLmZlYXR1cmVzO1xuICAgICAgICAgICAgZmVhdHVyZXMgPSBjb2xsZWN0aW9uLmdldEFycmF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF1c2VTcGF0aWFsSW5kZXggJiYgY29sbGVjdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uID0gbmV3IENvbGxlY3Rpb24oZmVhdHVyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmZWF0dXJlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5hZGRGZWF0dXJlc0ludGVybmFsKGZlYXR1cmVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29sbGVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5iaW5kRmVhdHVyZXNDb2xsZWN0aW9uXyhjb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHNpbmdsZSBmZWF0dXJlIHRvIHRoZSBzb3VyY2UuICBJZiB5b3Ugd2FudCB0byBhZGQgYSBiYXRjaCBvZiBmZWF0dXJlc1xuICAgICAqIGF0IG9uY2UsIGNhbGwge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNhZGRGZWF0dXJlcyAjYWRkRmVhdHVyZXMoKX1cbiAgICAgKiBpbnN0ZWFkLiBBIGZlYXR1cmUgd2lsbCBub3QgYmUgYWRkZWQgdG8gdGhlIHNvdXJjZSBpZiBmZWF0dXJlIHdpdGhcbiAgICAgKiB0aGUgc2FtZSBpZCBpcyBhbHJlYWR5IHRoZXJlLiBUaGUgcmVhc29uIGZvciB0aGlzIGJlaGF2aW9yIGlzIHRvIGF2b2lkXG4gICAgICogZmVhdHVyZSBkdXBsaWNhdGlvbiB3aGVuIHVzaW5nIGJib3ggb3IgdGlsZSBsb2FkaW5nIHN0cmF0ZWdpZXMuXG4gICAgICogTm90ZTogdGhpcyBhbHNvIGFwcGxpZXMgaWYgYW4ge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSBpcyB1c2VkIGZvciBmZWF0dXJlcyxcbiAgICAgKiBtZWFuaW5nIHRoYXQgaWYgYSBmZWF0dXJlIHdpdGggYSBkdXBsaWNhdGUgaWQgaXMgYWRkZWQgaW4gdGhlIGNvbGxlY3Rpb24sIGl0IHdpbGxcbiAgICAgKiBiZSByZW1vdmVkIGZyb20gaXQgcmlnaHQgYXdheS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgRmVhdHVyZSB0byBhZGQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYWRkRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIHRoaXMuYWRkRmVhdHVyZUludGVybmFsKGZlYXR1cmUpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCBhIGZlYXR1cmUgd2l0aG91dCBmaXJpbmcgYSBgY2hhbmdlYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5hZGRGZWF0dXJlSW50ZXJuYWwgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgZmVhdHVyZUtleSA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgICAgaWYgKCF0aGlzLmFkZFRvSW5kZXhfKGZlYXR1cmVLZXksIGZlYXR1cmUpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fLnJlbW92ZShmZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldHVwQ2hhbmdlRXZlbnRzXyhmZWF0dXJlS2V5LCBmZWF0dXJlKTtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5pbnNlcnQoZXh0ZW50LCBmZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldID0gZmVhdHVyZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZlY3RvclNvdXJjZUV2ZW50KFZlY3RvckV2ZW50VHlwZS5BRERGRUFUVVJFLCBmZWF0dXJlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmVhdHVyZUtleSBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGZlYXR1cmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+fSBmZWF0dXJlIFRoZSBmZWF0dXJlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5zZXR1cENoYW5nZUV2ZW50c18gPSBmdW5jdGlvbiAoZmVhdHVyZUtleSwgZmVhdHVyZSkge1xuICAgICAgICB0aGlzLmZlYXR1cmVDaGFuZ2VLZXlzX1tmZWF0dXJlS2V5XSA9IFtcbiAgICAgICAgICAgIGxpc3RlbihmZWF0dXJlLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUZlYXR1cmVDaGFuZ2VfLCB0aGlzKSxcbiAgICAgICAgICAgIGxpc3RlbihmZWF0dXJlLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlRmVhdHVyZUNoYW5nZV8sIHRoaXMpLFxuICAgICAgICBdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmVLZXkgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBmZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gZmVhdHVyZSBUaGUgZmVhdHVyZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZmVhdHVyZSBpcyBcInZhbGlkXCIsIGluIHRoZSBzZW5zZSB0aGF0IGl0IGlzIGFsc28gYVxuICAgICAqICAgICBjYW5kaWRhdGUgZm9yIGluc2VydGlvbiBpbnRvIHRoZSBSdHJlZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYWRkVG9JbmRleF8gPSBmdW5jdGlvbiAoZmVhdHVyZUtleSwgZmVhdHVyZSkge1xuICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuICAgICAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIShpZC50b1N0cmluZygpIGluIHRoaXMuaWRJbmRleF8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pZEluZGV4X1tpZC50b1N0cmluZygpXSA9IGZlYXR1cmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgICAgYXNzZXJ0KCEoZmVhdHVyZUtleSBpbiB0aGlzLnVpZEluZGV4XyksIDMwKTsgLy8gVGhlIHBhc3NlZCBgZmVhdHVyZWAgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHNvdXJjZVxuICAgICAgICAgICAgdGhpcy51aWRJbmRleF9bZmVhdHVyZUtleV0gPSBmZWF0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWxpZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCBhIGJhdGNoIG9mIGZlYXR1cmVzIHRvIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pn0gZmVhdHVyZXMgRmVhdHVyZXMgdG8gYWRkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmFkZEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVzKSB7XG4gICAgICAgIHRoaXMuYWRkRmVhdHVyZXNJbnRlcm5hbChmZWF0dXJlcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIGZlYXR1cmVzIHdpdGhvdXQgZmlyaW5nIGEgYGNoYW5nZWAgZXZlbnQuXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+Pn0gZmVhdHVyZXMgRmVhdHVyZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYWRkRmVhdHVyZXNJbnRlcm5hbCA9IGZ1bmN0aW9uIChmZWF0dXJlcykge1xuICAgICAgICB2YXIgZXh0ZW50cyA9IFtdO1xuICAgICAgICB2YXIgbmV3RmVhdHVyZXMgPSBbXTtcbiAgICAgICAgdmFyIGdlb21ldHJ5RmVhdHVyZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykge1xuICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWRkVG9JbmRleF8oZmVhdHVyZUtleSwgZmVhdHVyZSkpIHtcbiAgICAgICAgICAgICAgICBuZXdGZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMiA9IG5ld0ZlYXR1cmVzLmxlbmd0aDsgaSA8IGxlbmd0aF8yOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlID0gbmV3RmVhdHVyZXNbaV07XG4gICAgICAgICAgICB2YXIgZmVhdHVyZUtleSA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBDaGFuZ2VFdmVudHNfKGZlYXR1cmVLZXksIGZlYXR1cmUpO1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICAgICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4dGVudCA9IGdlb21ldHJ5LmdldEV4dGVudCgpO1xuICAgICAgICAgICAgICAgIGV4dGVudHMucHVzaChleHRlbnQpO1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5RmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldID0gZmVhdHVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc1J0cmVlXykge1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5sb2FkKGV4dGVudHMsIGdlb21ldHJ5RmVhdHVyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMyA9IG5ld0ZlYXR1cmVzLmxlbmd0aDsgaSA8IGxlbmd0aF8zOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmVjdG9yU291cmNlRXZlbnQoVmVjdG9yRXZlbnRUeXBlLkFEREZFQVRVUkUsIG5ld0ZlYXR1cmVzW2ldKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUNvbGxlY3Rpb248aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj59IGNvbGxlY3Rpb24gQ29sbGVjdGlvbi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYmluZEZlYXR1cmVzQ29sbGVjdGlvbl8gPSBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xuICAgICAgICB2YXIgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoVmVjdG9yRXZlbnRUeXBlLkFEREZFQVRVUkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtWZWN0b3JTb3VyY2VFdmVudDxHZW9tZXRyeT59IGV2dCBUaGUgdmVjdG9yIHNvdXJjZSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgaWYgKCFtb2RpZnlpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKGV2dC5mZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBtb2RpZnlpbmdDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoVmVjdG9yRXZlbnRUeXBlLlJFTU9WRUZFQVRVUkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtWZWN0b3JTb3VyY2VFdmVudDxHZW9tZXRyeT59IGV2dCBUaGUgdmVjdG9yIHNvdXJjZSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgaWYgKCFtb2RpZnlpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5yZW1vdmUoZXZ0LmZlYXR1cmUpO1xuICAgICAgICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbGxlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldnQgVGhlIGNvbGxlY3Rpb24gZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGlmICghbW9kaWZ5aW5nQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZShcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59ICovIChldnQuZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29sbGVjdGlvbi5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2dCBUaGUgY29sbGVjdGlvbiBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgaWYgKCFtb2RpZnlpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGZWF0dXJlKFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gKi8gKGV2dC5lbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8gPSBjb2xsZWN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBmZWF0dXJlcyBmcm9tIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2Zhc3QgU2tpcCBkaXNwYXRjaGluZyBvZiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjcmVtb3ZlZmVhdHVyZX0gZXZlbnRzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKG9wdF9mYXN0KSB7XG4gICAgICAgIGlmIChvcHRfZmFzdCkge1xuICAgICAgICAgICAgZm9yICh2YXIgZmVhdHVyZUlkIGluIHRoaXMuZmVhdHVyZUNoYW5nZUtleXNfKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSB0aGlzLmZlYXR1cmVDaGFuZ2VLZXlzX1tmZWF0dXJlSWRdO1xuICAgICAgICAgICAgICAgIGtleXMuZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlQ2hhbmdlS2V5c18gPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmlkSW5kZXhfID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy51aWRJbmRleF8gPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5mb3JFYWNoKHRoaXMucmVtb3ZlRmVhdHVyZUludGVybmFsLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmVhdHVyZUludGVybmFsKHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2lkXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzUnRyZWVfLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18gPSB7fTtcbiAgICAgICAgdmFyIGNsZWFyRXZlbnQgPSBuZXcgVmVjdG9yU291cmNlRXZlbnQoVmVjdG9yRXZlbnRUeXBlLkNMRUFSKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGNsZWFyRXZlbnQpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgZmVhdHVyZXMgb24gdGhlIHNvdXJjZSwgY2FsbGluZyB0aGUgcHJvdmlkZWQgY2FsbGJhY2tcbiAgICAgKiB3aXRoIGVhY2ggb25lLiAgSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYW55IFwidHJ1dGh5XCIgdmFsdWUsIGl0ZXJhdGlvbiB3aWxsXG4gICAgICogc3RvcCBhbmQgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBzYW1lIHZhbHVlLlxuICAgICAqIE5vdGU6IHRoaXMgZnVuY3Rpb24gb25seSBpdGVyYXRlIHRocm91Z2ggdGhlIGZlYXR1cmUgdGhhdCBoYXZlIGEgZGVmaW5lZCBnZW9tZXRyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pik6IFR9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2ggZmVhdHVyZVxuICAgICAqICAgICBvbiB0aGUgc291cmNlLiAgUmV0dXJuIGEgdHJ1dGh5IHZhbHVlIHRvIHN0b3AgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGxhc3QgY2FsbCB0byB0aGUgY2FsbGJhY2suXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc1J0cmVlXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNSdHJlZV8uZm9yRWFjaChjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8uZm9yRWFjaChjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgZmVhdHVyZXMgd2hvc2UgZ2VvbWV0cmllcyBjb250YWluIHRoZSBwcm92aWRlZFxuICAgICAqIGNvb3JkaW5hdGUsIGNhbGxpbmcgdGhlIGNhbGxiYWNrIHdpdGggZWFjaCBmZWF0dXJlLiAgSWYgdGhlIGNhbGxiYWNrIHJldHVybnNcbiAgICAgKiBhIFwidHJ1dGh5XCIgdmFsdWUsIGl0ZXJhdGlvbiB3aWxsIHN0b3AgYW5kIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgc2FtZVxuICAgICAqIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4pOiBUfSBjYWxsYmFjayBDYWxsZWQgd2l0aCBlYWNoIGZlYXR1cmVcbiAgICAgKiAgICAgd2hvc2UgZ29lbWV0cnkgY29udGFpbnMgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVEaXJlY3QgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IFtjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaEZlYXR1cmVJbkV4dGVudChleHRlbnQsIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkuaW50ZXJzZWN0c0Nvb3JkaW5hdGUoY29vcmRpbmF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmVhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgZmVhdHVyZXMgd2hvc2UgYm91bmRpbmcgYm94IGludGVyc2VjdHMgdGhlIHByb3ZpZGVkXG4gICAgICogZXh0ZW50IChub3RlIHRoYXQgdGhlIGZlYXR1cmUncyBnZW9tZXRyeSBtYXkgbm90IGludGVyc2VjdCB0aGUgZXh0ZW50KSxcbiAgICAgKiBjYWxsaW5nIHRoZSBjYWxsYmFjayB3aXRoIGVhY2ggZmVhdHVyZS4gIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgXCJ0cnV0aHlcIlxuICAgICAqIHZhbHVlLCBpdGVyYXRpb24gd2lsbCBzdG9wIGFuZCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHNhbWUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIGludGVyZXN0ZWQgaW4gZmVhdHVyZXMgd2hvc2UgZ2VvbWV0cnkgaW50ZXJzZWN0cyBhbiBleHRlbnQsIGNhbGxcbiAgICAgKiB0aGUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNmb3JFYWNoRmVhdHVyZUludGVyc2VjdGluZ0V4dGVudCAjZm9yRWFjaEZlYXR1cmVJbnRlcnNlY3RpbmdFeHRlbnQoKX0gbWV0aG9kIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBXaGVuIGB1c2VTcGF0aWFsSW5kZXhgIGlzIHNldCB0byBmYWxzZSwgdGhpcyBtZXRob2Qgd2lsbCBsb29wIHRocm91Z2ggYWxsXG4gICAgICogZmVhdHVyZXMsIGVxdWl2YWxlbnQgdG8ge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNmb3JFYWNoRmVhdHVyZSAjZm9yRWFjaEZlYXR1cmUoKX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+KTogVH0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggZWFjaCBmZWF0dXJlXG4gICAgICogICAgIHdob3NlIGJvdW5kaW5nIGJveCBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlSW5FeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc1J0cmVlXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNSdHJlZV8uZm9yRWFjaEluRXh0ZW50KGV4dGVudCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXykge1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fLmZvckVhY2goY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJdGVyYXRlIHRocm91Z2ggYWxsIGZlYXR1cmVzIHdob3NlIGdlb21ldHJ5IGludGVyc2VjdHMgdGhlIHByb3ZpZGVkIGV4dGVudCxcbiAgICAgKiBjYWxsaW5nIHRoZSBjYWxsYmFjayB3aXRoIGVhY2ggZmVhdHVyZS4gIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgXCJ0cnV0aHlcIlxuICAgICAqIHZhbHVlLCBpdGVyYXRpb24gd2lsbCBzdG9wIGFuZCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHNhbWUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBJZiB5b3Ugb25seSB3YW50IHRvIHRlc3QgZm9yIGJvdW5kaW5nIGJveCBpbnRlcnNlY3Rpb24sIGNhbGwgdGhlXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNmb3JFYWNoRmVhdHVyZUluRXh0ZW50ICNmb3JFYWNoRmVhdHVyZUluRXh0ZW50KCl9IG1ldGhvZCBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pik6IFR9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2ggZmVhdHVyZVxuICAgICAqICAgICB3aG9zZSBnZW9tZXRyeSBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlSW50ZXJzZWN0aW5nRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaEZlYXR1cmVJbkV4dGVudChleHRlbnQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGxhc3QgY2FsbCB0byB0aGUgY2FsbGJhY2suXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICAgICAgaWYgKGdlb21ldHJ5LmludGVyc2VjdHNFeHRlbnQoZXh0ZW50KSkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZmVhdHVyZXMgY29sbGVjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VyY2UuIFdpbGwgYmUgYG51bGxgXG4gICAgICogdW5sZXNzIHRoZSBzb3VyY2Ugd2FzIGNvbmZpZ3VyZWQgd2l0aCBgdXNlU3BhdGlhbEluZGV4YCBzZXQgdG8gYGZhbHNlYCwgb3JcbiAgICAgKiB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn0gYXMgYGZlYXR1cmVzYC5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fSBUaGUgY29sbGVjdGlvbiBvZiBmZWF0dXJlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5nZXRGZWF0dXJlc0NvbGxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGZlYXR1cmVzIG9uIHRoZSBzb3VyY2UgaW4gcmFuZG9tIG9yZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fSBGZWF0dXJlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZlYXR1cmVzO1xuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICAgICAgICBmZWF0dXJlcyA9IHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXy5nZXRBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgICAgIGZlYXR1cmVzID0gdGhpcy5mZWF0dXJlc1J0cmVlXy5nZXRBbGwoKTtcbiAgICAgICAgICAgIGlmICghaXNFbXB0eSh0aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzXykpIHtcbiAgICAgICAgICAgICAgICBleHRlbmQoZmVhdHVyZXMsIGdldFZhbHVlcyh0aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzXykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT4+fSAqLyAoZmVhdHVyZXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBmZWF0dXJlcyB3aG9zZSBnZW9tZXRyeSBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj59IEZlYXR1cmVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVzQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgICAgIHRoaXMuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVEaXJlY3QoY29vcmRpbmF0ZSwgZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmVhdHVyZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGZlYXR1cmVzIHdob3NlIGJvdW5kaW5nIGJveCBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBleHRlbnQuICBOb3RlIHRoYXQgdGhpcyByZXR1cm5zIGFuIGFycmF5IG9mXG4gICAgICogYWxsIGZlYXR1cmVzIGludGVyc2VjdGluZyB0aGUgZ2l2ZW4gZXh0ZW50IGluIHJhbmRvbSBvcmRlciAoc28gaXQgbWF5IGluY2x1ZGVcbiAgICAgKiBmZWF0dXJlcyB3aG9zZSBnZW9tZXRyaWVzIGRvIG5vdCBpbnRlcnNlY3QgdGhlIGV4dGVudCkuXG4gICAgICpcbiAgICAgKiBXaGVuIGB1c2VTcGF0aWFsSW5kZXhgIGlzIHNldCB0byBmYWxzZSwgdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYWxsXG4gICAgICogZmVhdHVyZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pj59IEZlYXR1cmVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVzSW5FeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlc1J0cmVlXy5nZXRJbkV4dGVudChleHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXy5nZXRBcnJheSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNsb3Nlc3QgZmVhdHVyZSB0byB0aGUgcHJvdmlkZWQgY29vcmRpbmF0ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhdmFpbGFibGUgd2hlbiB0aGUgc291cmNlIGlzIGNvbmZpZ3VyZWQgd2l0aFxuICAgICAqIGB1c2VTcGF0aWFsSW5kZXhgIHNldCB0byBgZmFsc2VgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+KTpib29sZWFuPX0gb3B0X2ZpbHRlciBGZWF0dXJlIGZpbHRlciBmdW5jdGlvbi5cbiAgICAgKiAgICAgVGhlIGZpbHRlciBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgb25lIGFyZ3VtZW50LCB0aGUge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlIGZlYXR1cmV9XG4gICAgICogICAgIGFuZCBpdCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS4gQnkgZGVmYXVsdCwgbm8gZmlsdGVyaW5nIGlzIG1hZGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gQ2xvc2VzdCBmZWF0dXJlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldENsb3Nlc3RGZWF0dXJlVG9Db29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIG9wdF9maWx0ZXIpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgY2xvc2VzdCBmZWF0dXJlIHVzaW5nIGJyYW5jaCBhbmQgYm91bmQuICBXZSBzdGFydCBzZWFyY2hpbmcgYW5cbiAgICAgICAgLy8gaW5maW5pdGUgZXh0ZW50LCBhbmQgZmluZCB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgZmlyc3QgZmVhdHVyZSBmb3VuZC4gIFRoaXNcbiAgICAgICAgLy8gYmVjb21lcyB0aGUgY2xvc2VzdCBmZWF0dXJlLiAgV2UgdGhlbiBjb21wdXRlIGEgc21hbGxlciBleHRlbnQgd2hpY2ggYW55XG4gICAgICAgIC8vIGNsb3NlciBmZWF0dXJlIG11c3QgaW50ZXJzZWN0LiAgV2UgY29udGludWUgc2VhcmNoaW5nIHdpdGggdGhpcyBzbWFsbGVyXG4gICAgICAgIC8vIGV4dGVudCwgdHJ5aW5nIHRvIGZpbmQgYSBjbG9zZXIgZmVhdHVyZS4gIEV2ZXJ5IHRpbWUgd2UgZmluZCBhIGNsb3NlclxuICAgICAgICAvLyBmZWF0dXJlLCB3ZSB1cGRhdGUgdGhlIGV4dGVudCBiZWluZyBzZWFyY2hlZCBzbyB0aGF0IGFueSBldmVuIGNsb3NlclxuICAgICAgICAvLyBmZWF0dXJlIG11c3QgaW50ZXJzZWN0IGl0LiAgV2UgY29udGludWUgdW50aWwgd2UgcnVuIG91dCBvZiBmZWF0dXJlcy5cbiAgICAgICAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICAgICAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgICAgIHZhciBjbG9zZXN0RmVhdHVyZSA9IG51bGw7XG4gICAgICAgIHZhciBjbG9zZXN0UG9pbnQgPSBbTmFOLCBOYU5dO1xuICAgICAgICB2YXIgbWluU3F1YXJlZERpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgICAgIHZhciBleHRlbnQgPSBbLUluZmluaXR5LCAtSW5maW5pdHksIEluZmluaXR5LCBJbmZpbml0eV07XG4gICAgICAgIHZhciBmaWx0ZXIgPSBvcHRfZmlsdGVyID8gb3B0X2ZpbHRlciA6IFRSVUU7XG4gICAgICAgIHRoaXMuZmVhdHVyZXNSdHJlZV8uZm9yRWFjaEluRXh0ZW50KGV4dGVudCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyKGZlYXR1cmUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c01pblNxdWFyZWREaXN0YW5jZSA9IG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBnZW9tZXRyeS5jbG9zZXN0UG9pbnRYWSh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IHByZXZpb3VzTWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RGZWF0dXJlID0gZmVhdHVyZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBzbmVha3kuICBSZWR1Y2UgdGhlIGV4dGVudCB0aGF0IGl0IGlzIGN1cnJlbnRseSBiZWluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2hlZCB3aGlsZSB0aGUgUi1UcmVlIHRyYXZlcnNhbCB1c2luZyB0aGlzIHNhbWUgZXh0ZW50IG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBzdGlsbCBpbiBwcm9ncmVzcy4gIFRoaXMgaXMgc2FmZSBiZWNhdXNlIHRoZSBuZXcgZXh0ZW50IGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0cmljdGx5IGNvbnRhaW5lZCBieSB0aGUgb2xkIGV4dGVudC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbkRpc3RhbmNlID0gTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVudFswXSA9IHggLSBtaW5EaXN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50WzFdID0geSAtIG1pbkRpc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICBleHRlbnRbMl0gPSB4ICsgbWluRGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVudFszXSA9IHkgKyBtaW5EaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY2xvc2VzdEZlYXR1cmU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBvZiB0aGUgZmVhdHVyZXMgY3VycmVudGx5IGluIHRoZSBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYXZhaWxhYmxlIHdoZW4gdGhlIHNvdXJjZSBpcyBjb25maWd1cmVkIHdpdGhcbiAgICAgKiBgdXNlU3BhdGlhbEluZGV4YCBzZXQgdG8gYGZhbHNlYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IERlc3RpbmF0aW9uIGV4dGVudC4gSWYgcHJvdmlkZWQsIG5vIG5ldyBleHRlbnRcbiAgICAgKiAgICAgd2lsbCBiZSBjcmVhdGVkLiBJbnN0ZWFkLCB0aGF0IGV4dGVudCdzIGNvb3JkaW5hdGVzIHdpbGwgYmUgb3ZlcndyaXR0ZW4uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzUnRyZWVfLmdldEV4dGVudChvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIGZlYXR1cmUgYnkgaXRzIGlkZW50aWZpZXIgKHRoZSB2YWx1ZSByZXR1cm5lZCBieSBmZWF0dXJlLmdldElkKCkpLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgaW5kZXggdHJlYXRzIHN0cmluZyBhbmQgbnVtZXJpYyBpZGVudGlmaWVycyBhcyB0aGUgc2FtZS4gIFNvXG4gICAgICogYHNvdXJjZS5nZXRGZWF0dXJlQnlJZCgyKWAgd2lsbCByZXR1cm4gYSBmZWF0dXJlIHdpdGggaWQgYCcyJ2Agb3IgYDJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBpZCBGZWF0dXJlIGlkZW50aWZpZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gVGhlIGZlYXR1cmUgKG9yIGBudWxsYCBpZiBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBmZWF0dXJlID0gdGhpcy5pZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmUgIT09IHVuZGVmaW5lZCA/IGZlYXR1cmUgOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgZmVhdHVyZSBieSBpdHMgaW50ZXJuYWwgdW5pcXVlIGlkZW50aWZpZXIgKHVzaW5nIGBnZXRVaWRgKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1aWQgRmVhdHVyZSBpZGVudGlmaWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IFRoZSBmZWF0dXJlIChvciBgbnVsbGAgaWYgbm90IGZvdW5kKS5cbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVCeVVpZCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgdmFyIGZlYXR1cmUgPSB0aGlzLnVpZEluZGV4X1t1aWRdO1xuICAgICAgICByZXR1cm4gZmVhdHVyZSAhPT0gdW5kZWZpbmVkID8gZmVhdHVyZSA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZvcm1hdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9mb3JtYXQvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIGZlYXR1cmUgZm9ybWF0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzb3VyY2UgY2FuIGhhdmUgb3ZlcmxhcHBpbmcgZ2VvbWV0cmllcy5cbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldE92ZXJsYXBzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGFwc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHVybCBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8aW1wb3J0KFwiLi4vZmVhdHVyZWxvYWRlci5qc1wiKS5GZWF0dXJlVXJsRnVuY3Rpb258dW5kZWZpbmVkfSBUaGUgdXJsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5oYW5kbGVGZWF0dXJlQ2hhbmdlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZmVhdHVyZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICAgIGlmICghZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIGlmICghKGZlYXR1cmVLZXkgaW4gdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5yZW1vdmUoZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldID0gZmVhdHVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIGlmIChmZWF0dXJlS2V5IGluIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXNSdHJlZV8uaW5zZXJ0KGV4dGVudCwgZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy51cGRhdGUoZXh0ZW50LCBmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlkID0gZmVhdHVyZS5nZXRJZCgpO1xuICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHNpZCA9IGlkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pZEluZGV4X1tzaWRdICE9PSBmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tSWRJbmRleF8oZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pZEluZGV4X1tzaWRdID0gZmVhdHVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbUlkSW5kZXhfKGZlYXR1cmUpO1xuICAgICAgICAgICAgdGhpcy51aWRJbmRleF9bZmVhdHVyZUtleV0gPSBmZWF0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZlY3RvclNvdXJjZUV2ZW50KFZlY3RvckV2ZW50VHlwZS5DSEFOR0VGRUFUVVJFLCBmZWF0dXJlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGZlYXR1cmUgaXMgY29udGFpbmVkIHdpdGhpbiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0PEdlb21ldHJ5Pn0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyBmZWF0dXJlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmhhc0ZlYXR1cmUgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQgaW4gdGhpcy5pZEluZGV4XztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRVaWQoZmVhdHVyZSkgaW4gdGhpcy51aWRJbmRleF87XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNSdHJlZV8uaXNFbXB0eSgpICYmIGlzRW1wdHkodGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUubG9hZEZlYXR1cmVzID0gZnVuY3Rpb24gKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgbG9hZGVkRXh0ZW50c1J0cmVlID0gdGhpcy5sb2FkZWRFeHRlbnRzUnRyZWVfO1xuICAgICAgICB2YXIgZXh0ZW50c1RvTG9hZCA9IHRoaXMuc3RyYXRlZ3lfKGV4dGVudCwgcmVzb2x1dGlvbik7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpLCBpaSkge1xuICAgICAgICAgICAgdmFyIGV4dGVudFRvTG9hZCA9IGV4dGVudHNUb0xvYWRbaV07XG4gICAgICAgICAgICB2YXIgYWxyZWFkeUxvYWRlZCA9IGxvYWRlZEV4dGVudHNSdHJlZS5mb3JFYWNoSW5FeHRlbnQoZXh0ZW50VG9Mb2FkLCBcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHt7ZXh0ZW50OiBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fX0gb2JqZWN0IE9iamVjdC5cbiAgICAgICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5zRXh0ZW50KG9iamVjdC5leHRlbnQsIGV4dGVudFRvTG9hZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghYWxyZWFkeUxvYWRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXNfMS5sb2FkZXJfLmNhbGwodGhpc18xLCBleHRlbnRUb0xvYWQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIGxvYWRlZEV4dGVudHNSdHJlZS5pbnNlcnQoZXh0ZW50VG9Mb2FkLCB7IGV4dGVudDogZXh0ZW50VG9Mb2FkLnNsaWNlKCkgfSk7XG4gICAgICAgICAgICAgICAgdGhpc18xLmxvYWRpbmcgPSB0aGlzXzEubG9hZGVyXyAhPT0gVk9JRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGV4dGVudHNUb0xvYWQubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgX2xvb3BfMShpLCBpaSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jbGVhcih0cnVlKTtcbiAgICAgICAgdGhpcy5sb2FkZWRFeHRlbnRzUnRyZWVfLmNsZWFyKCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVmcmVzaC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFuIGV4dGVudCBmcm9tIHRoZSBsaXN0IG9mIGxvYWRlZCBleHRlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5yZW1vdmVMb2FkZWRFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHZhciBsb2FkZWRFeHRlbnRzUnRyZWUgPSB0aGlzLmxvYWRlZEV4dGVudHNSdHJlZV87XG4gICAgICAgIHZhciBvYmo7XG4gICAgICAgIGxvYWRlZEV4dGVudHNSdHJlZS5mb3JFYWNoSW5FeHRlbnQoZXh0ZW50LCBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoZXF1YWxzKG9iamVjdC5leHRlbnQsIGV4dGVudCkpIHtcbiAgICAgICAgICAgICAgICBvYmogPSBvYmplY3Q7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICBsb2FkZWRFeHRlbnRzUnRyZWUucmVtb3ZlKG9iaik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHNpbmdsZSBmZWF0dXJlIGZyb20gdGhlIHNvdXJjZS4gIElmIHlvdSB3YW50IHRvIHJlbW92ZSBhbGwgZmVhdHVyZXNcbiAgICAgKiBhdCBvbmNlLCB1c2UgdGhlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3Rvcn5WZWN0b3JTb3VyY2UjY2xlYXIgI2NsZWFyKCl9IG1ldGhvZFxuICAgICAqIGluc3RlYWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ8R2VvbWV0cnk+fSBmZWF0dXJlIEZlYXR1cmUgdG8gcmVtb3ZlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLnJlbW92ZUZlYXR1cmUgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgZmVhdHVyZUtleSA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgICAgaWYgKGZlYXR1cmVLZXkgaW4gdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18pIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzX1tmZWF0dXJlS2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5yZW1vdmUoZmVhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVGZWF0dXJlSW50ZXJuYWwoZmVhdHVyZSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGZlYXR1cmUgd2l0aG91dCBmaXJpbmcgYSBgY2hhbmdlYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlSW50ZXJuYWwgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgZmVhdHVyZUtleSA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgICAgdGhpcy5mZWF0dXJlQ2hhbmdlS2V5c19bZmVhdHVyZUtleV0uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgZGVsZXRlIHRoaXMuZmVhdHVyZUNoYW5nZUtleXNfW2ZlYXR1cmVLZXldO1xuICAgICAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5pZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy51aWRJbmRleF9bZmVhdHVyZUtleV07XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmVjdG9yU291cmNlRXZlbnQoVmVjdG9yRXZlbnRUeXBlLlJFTU9WRUZFQVRVUkUsIGZlYXR1cmUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGZlYXR1cmUgZnJvbSB0aGUgaWQgaW5kZXguICBDYWxsZWQgaW50ZXJuYWxseSB3aGVuIHRoZSBmZWF0dXJlIGlkXG4gICAgICogbWF5IGhhdmUgY2hhbmdlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdDxHZW9tZXRyeT59IGZlYXR1cmUgVGhlIGZlYXR1cmUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUmVtb3ZlZCB0aGUgZmVhdHVyZSBmcm9tIHRoZSBpbmRleC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUucmVtb3ZlRnJvbUlkSW5kZXhfID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5pZEluZGV4Xykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaWRJbmRleF9baWRdID09PSBmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaWRJbmRleF9baWRdO1xuICAgICAgICAgICAgICAgIHJlbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZW1vdmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBuZXcgbG9hZGVyIG9mIHRoZSBzb3VyY2UuIFRoZSBuZXh0IHJlbmRlciBjeWNsZSB3aWxsIHVzZSB0aGVcbiAgICAgKiBuZXcgbG9hZGVyLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZmVhdHVyZWxvYWRlci5qc1wiKS5GZWF0dXJlTG9hZGVyfSBsb2FkZXIgVGhlIGxvYWRlciB0byBzZXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuc2V0TG9hZGVyID0gZnVuY3Rpb24gKGxvYWRlcikge1xuICAgICAgICB0aGlzLmxvYWRlcl8gPSBsb2FkZXI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQb2ludHMgdGhlIHNvdXJjZSB0byBhIG5ldyB1cmwuIFRoZSBuZXh0IHJlbmRlciBjeWNsZSB3aWxsIHVzZSB0aGUgbmV3IHVybC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xpbXBvcnQoXCIuLi9mZWF0dXJlbG9hZGVyLmpzXCIpLkZlYXR1cmVVcmxGdW5jdGlvbn0gdXJsIFVybC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5zZXRVcmwgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmZvcm1hdF8sIDcpOyAvLyBgZm9ybWF0YCBtdXN0IGJlIHNldCB3aGVuIGB1cmxgIGlzIHNldFxuICAgICAgICB0aGlzLnNldExvYWRlcih4aHIodXJsLCB0aGlzLmZvcm1hdF8pKTtcbiAgICB9O1xuICAgIHJldHVybiBWZWN0b3JTb3VyY2U7XG59KFNvdXJjZSkpO1xuZXhwb3J0IGRlZmF1bHQgVmVjdG9yU291cmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0ZlYXR1cmVcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QsIHsgZ2V0Q2hhbmdlRXZlbnRUeXBlIH0gZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge3R5cGVvZiBGZWF0dXJlfHR5cGVvZiBpbXBvcnQoXCIuL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IEZlYXR1cmVDbGFzc1xuICovXG4vKipcbiAqIEB0eXBlZGVmIHtGZWF0dXJlfGltcG9ydChcIi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gRmVhdHVyZUxpa2VcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIHZlY3RvciBvYmplY3QgZm9yIGdlb2dyYXBoaWMgZmVhdHVyZXMgd2l0aCBhIGdlb21ldHJ5IGFuZCBvdGhlclxuICogYXR0cmlidXRlIHByb3BlcnRpZXMsIHNpbWlsYXIgdG8gdGhlIGZlYXR1cmVzIGluIHZlY3RvciBmaWxlIGZvcm1hdHMgbGlrZVxuICogR2VvSlNPTi5cbiAqXG4gKiBGZWF0dXJlcyBjYW4gYmUgc3R5bGVkIGluZGl2aWR1YWxseSB3aXRoIGBzZXRTdHlsZWA7IG90aGVyd2lzZSB0aGV5IHVzZSB0aGVcbiAqIHN0eWxlIG9mIHRoZWlyIHZlY3RvciBsYXllci5cbiAqXG4gKiBOb3RlIHRoYXQgYXR0cmlidXRlIHByb3BlcnRpZXMgYXJlIHNldCBhcyB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH0gcHJvcGVydGllcyBvblxuICogdGhlIGZlYXR1cmUgb2JqZWN0LCBzbyB0aGV5IGFyZSBvYnNlcnZhYmxlLCBhbmQgaGF2ZSBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBUeXBpY2FsbHksIGEgZmVhdHVyZSBoYXMgYSBzaW5nbGUgZ2VvbWV0cnkgcHJvcGVydHkuIFlvdSBjYW4gc2V0IHRoZVxuICogZ2VvbWV0cnkgdXNpbmcgdGhlIGBzZXRHZW9tZXRyeWAgbWV0aG9kIGFuZCBnZXQgaXQgd2l0aCBgZ2V0R2VvbWV0cnlgLlxuICogSXQgaXMgcG9zc2libGUgdG8gc3RvcmUgbW9yZSB0aGFuIG9uZSBnZW9tZXRyeSBvbiBhIGZlYXR1cmUgdXNpbmcgYXR0cmlidXRlXG4gKiBwcm9wZXJ0aWVzLiBCeSBkZWZhdWx0LCB0aGUgZ2VvbWV0cnkgdXNlZCBmb3IgcmVuZGVyaW5nIGlzIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBwcm9wZXJ0eSBuYW1lIGBnZW9tZXRyeWAuIElmIHlvdSB3YW50IHRvIHVzZSBhbm90aGVyIGdlb21ldHJ5IHByb3BlcnR5XG4gKiBmb3IgcmVuZGVyaW5nLCB1c2UgdGhlIGBzZXRHZW9tZXRyeU5hbWVgIG1ldGhvZCB0byBjaGFuZ2UgdGhlIGF0dHJpYnV0ZVxuICogcHJvcGVydHkgYXNzb2NpYXRlZCB3aXRoIHRoZSBnZW9tZXRyeSBmb3IgdGhlIGZlYXR1cmUuICBGb3IgZXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICpcbiAqIGltcG9ydCBGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUnO1xuICogaW1wb3J0IFBvbHlnb24gZnJvbSAnb2wvZ2VvbS9Qb2x5Z29uJztcbiAqIGltcG9ydCBQb2ludCBmcm9tICdvbC9nZW9tL1BvaW50JztcbiAqXG4gKiB2YXIgZmVhdHVyZSA9IG5ldyBGZWF0dXJlKHtcbiAqICAgZ2VvbWV0cnk6IG5ldyBQb2x5Z29uKHBvbHlDb29yZHMpLFxuICogICBsYWJlbFBvaW50OiBuZXcgUG9pbnQobGFiZWxDb29yZHMpLFxuICogICBuYW1lOiAnTXkgUG9seWdvbidcbiAqIH0pO1xuICpcbiAqIC8vIGdldCB0aGUgcG9seWdvbiBnZW9tZXRyeVxuICogdmFyIHBvbHkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gKlxuICogLy8gUmVuZGVyIHRoZSBmZWF0dXJlIGFzIGEgcG9pbnQgdXNpbmcgdGhlIGNvb3JkaW5hdGVzIGZyb20gbGFiZWxQb2ludFxuICogZmVhdHVyZS5zZXRHZW9tZXRyeU5hbWUoJ2xhYmVsUG9pbnQnKTtcbiAqXG4gKiAvLyBnZXQgdGhlIHBvaW50IGdlb21ldHJ5XG4gKiB2YXIgcG9pbnQgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gKiBgYGBcbiAqXG4gKiBAYXBpXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeVxuICovXG52YXIgRmVhdHVyZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRmVhdHVyZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0dlb21ldHJ5fE9iamVjdDxzdHJpbmcsICo+PX0gb3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzXG4gICAgICogICAgIFlvdSBtYXkgcGFzcyBhIEdlb21ldHJ5IG9iamVjdCBkaXJlY3RseSwgb3IgYW4gb2JqZWN0IGxpdGVyYWwgY29udGFpbmluZ1xuICAgICAqICAgICBwcm9wZXJ0aWVzLiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgbGl0ZXJhbCwgeW91IG1heSBpbmNsdWRlIGEgR2VvbWV0cnlcbiAgICAgKiAgICAgYXNzb2NpYXRlZCB3aXRoIGEgYGdlb21ldHJ5YCBrZXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRmVhdHVyZShvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmlkXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5nZW9tZXRyeU5hbWVfID0gJ2dlb21ldHJ5JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZXIgcHJvdmlkZWQgc3R5bGUuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0eWxlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0eWxlRnVuY3Rpb25fID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5nZW9tZXRyeUNoYW5nZUtleV8gPSBudWxsO1xuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKGdldENoYW5nZUV2ZW50VHlwZShfdGhpcy5nZW9tZXRyeU5hbWVfKSwgX3RoaXMuaGFuZGxlR2VvbWV0cnlDaGFuZ2VkXyk7XG4gICAgICAgIGlmIChvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqLyAob3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzKS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtHZW9tZXRyeX0gKi8gKG9wdF9nZW9tZXRyeU9yUHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0R2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn0gKi9cbiAgICAgICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IG9wdF9nZW9tZXRyeU9yUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmUgdGhpcyBmZWF0dXJlLiBJZiB0aGUgb3JpZ2luYWwgZmVhdHVyZSBoYXMgYSBnZW9tZXRyeSBpdFxuICAgICAqIGlzIGFsc28gY2xvbmVkLiBUaGUgZmVhdHVyZSBpZCBpcyBub3Qgc2V0IGluIHRoZSBjbG9uZS5cbiAgICAgKiBAcmV0dXJuIHtGZWF0dXJlfSBUaGUgY2xvbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZlYXR1cmUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2xvbmUgPSBuZXcgRmVhdHVyZSh0aGlzLmhhc1Byb3BlcnRpZXMoKSA/IHRoaXMuZ2V0UHJvcGVydGllcygpIDogbnVsbCk7XG4gICAgICAgIGNsb25lLnNldEdlb21ldHJ5TmFtZSh0aGlzLmdldEdlb21ldHJ5TmFtZSgpKTtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeSgpO1xuICAgICAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIGNsb25lLnNldEdlb21ldHJ5KGdlb21ldHJ5LmNsb25lKCkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuZ2V0U3R5bGUoKTtcbiAgICAgICAgaWYgKHN0eWxlKSB7XG4gICAgICAgICAgICBjbG9uZS5zZXRTdHlsZShzdHlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBmZWF0dXJlJ3MgZGVmYXVsdCBnZW9tZXRyeS4gIEEgZmVhdHVyZSBtYXkgaGF2ZSBhbnkgbnVtYmVyIG9mIG5hbWVkXG4gICAgICogZ2VvbWV0cmllcy4gIFRoZSBcImRlZmF1bHRcIiBnZW9tZXRyeSAodGhlIG9uZSB0aGF0IGlzIHJlbmRlcmVkIGJ5IGRlZmF1bHQpIGlzXG4gICAgICogc2V0IHdoZW4gY2FsbGluZyB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNzZXRHZW9tZXRyeX0uXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl8dW5kZWZpbmVkfSBUaGUgZGVmYXVsdCBnZW9tZXRyeSBmb3IgdGhlIGZlYXR1cmUuXG4gICAgICogQGFwaVxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICovXG4gICAgRmVhdHVyZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0dlb21ldHJ5fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KHRoaXMuZ2VvbWV0cnlOYW1lXykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBmZWF0dXJlIGlkZW50aWZpZXIuICBUaGlzIGlzIGEgc3RhYmxlIGlkZW50aWZpZXIgZm9yIHRoZSBmZWF0dXJlIGFuZFxuICAgICAqIGlzIGVpdGhlciBzZXQgd2hlbiByZWFkaW5nIGRhdGEgZnJvbSBhIHJlbW90ZSBzb3VyY2Ugb3Igc2V0IGV4cGxpY2l0bHkgYnlcbiAgICAgKiBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX5GZWF0dXJlI3NldElkfS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8c3RyaW5nfHVuZGVmaW5lZH0gSWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZlYXR1cmUucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIGZlYXR1cmUncyBkZWZhdWx0IGdlb21ldHJ5LiAgQnkgZGVmYXVsdCwgdGhlIGRlZmF1bHRcbiAgICAgKiBnZW9tZXRyeSBpcyBuYW1lZCBgZ2VvbWV0cnlgLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gR2V0IHRoZSBwcm9wZXJ0eSBuYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGVmYXVsdCBnZW9tZXRyeVxuICAgICAqICAgICBmb3IgdGhpcyBmZWF0dXJlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5nZXRHZW9tZXRyeU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlb21ldHJ5TmFtZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZlYXR1cmUncyBzdHlsZS4gV2lsbCByZXR1cm4gd2hhdCB3YXMgcHJvdmlkZWQgdG8gdGhlXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfkZlYXR1cmUjc2V0U3R5bGV9IG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZXx1bmRlZmluZWR9IFRoZSBmZWF0dXJlIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5nZXRTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBmZWF0dXJlJ3Mgc3R5bGUgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH0gUmV0dXJuIGEgZnVuY3Rpb25cbiAgICAgKiByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgc3R5bGUgb2YgdGhpcyBmZWF0dXJlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5nZXRTdHlsZUZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZUZ1bmN0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgRmVhdHVyZS5wcm90b3R5cGUuaGFuZGxlR2VvbWV0cnlDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgRmVhdHVyZS5wcm90b3R5cGUuaGFuZGxlR2VvbWV0cnlDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlDaGFuZ2VLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuZ2VvbWV0cnlDaGFuZ2VLZXlfKTtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlDaGFuZ2VLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KCk7XG4gICAgICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeUNoYW5nZUtleV8gPSBsaXN0ZW4oZ2VvbWV0cnksIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlR2VvbWV0cnlDaGFuZ2VfLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZGVmYXVsdCBnZW9tZXRyeSBmb3IgdGhlIGZlYXR1cmUuICBUaGlzIHdpbGwgdXBkYXRlIHRoZSBwcm9wZXJ0eVxuICAgICAqIHdpdGggdGhlIG5hbWUgcmV0dXJuZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfkZlYXR1cmUjZ2V0R2VvbWV0cnlOYW1lfS5cbiAgICAgKiBAcGFyYW0ge0dlb21ldHJ5fHVuZGVmaW5lZH0gZ2VvbWV0cnkgVGhlIG5ldyBnZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5zZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICB0aGlzLnNldCh0aGlzLmdlb21ldHJ5TmFtZV8sIGdlb21ldHJ5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3R5bGUgZm9yIHRoZSBmZWF0dXJlIHRvIG92ZXJyaWRlIHRoZSBsYXllciBzdHlsZS4gIFRoaXMgY2FuIGJlIGFcbiAgICAgKiBzaW5nbGUgc3R5bGUgb2JqZWN0LCBhbiBhcnJheSBvZiBzdHlsZXMsIG9yIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhXG4gICAgICogcmVzb2x1dGlvbiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBzdHlsZXMuIFRvIHVuc2V0IHRoZSBmZWF0dXJlIHN0eWxlLCBjYWxsXG4gICAgICogYHNldFN0eWxlKClgIHdpdGhvdXQgYXJndW1lbnRzIG9yIGEgZmFsc2V5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2U9fSBvcHRfc3R5bGUgU3R5bGUgZm9yIHRoaXMgZmVhdHVyZS5cbiAgICAgKiBAYXBpXG4gICAgICogQGZpcmVzIG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2V2ZW50OmNoYW5nZVxuICAgICAqL1xuICAgIEZlYXR1cmUucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gKG9wdF9zdHlsZSkge1xuICAgICAgICB0aGlzLnN0eWxlXyA9IG9wdF9zdHlsZTtcbiAgICAgICAgdGhpcy5zdHlsZUZ1bmN0aW9uXyA9ICFvcHRfc3R5bGVcbiAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IGNyZWF0ZVN0eWxlRnVuY3Rpb24ob3B0X3N0eWxlKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZlYXR1cmUgaWQuICBUaGUgZmVhdHVyZSBpZCBpcyBjb25zaWRlcmVkIHN0YWJsZSBhbmQgbWF5IGJlIHVzZWQgd2hlblxuICAgICAqIHJlcXVlc3RpbmcgZmVhdHVyZXMgb3IgY29tcGFyaW5nIGlkZW50aWZpZXJzIHJldHVybmVkIGZyb20gYSByZW1vdGUgc291cmNlLlxuICAgICAqIFRoZSBmZWF0dXJlIGlkIGNhbiBiZSB1c2VkIHdpdGggdGhlXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNnZXRGZWF0dXJlQnlJZH0gbWV0aG9kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ3x1bmRlZmluZWR9IGlkIFRoZSBmZWF0dXJlIGlkLlxuICAgICAqIEBhcGlcbiAgICAgKiBAZmlyZXMgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5CYXNlRXZlbnQjZXZlbnQ6Y2hhbmdlXG4gICAgICovXG4gICAgRmVhdHVyZS5wcm90b3R5cGUuc2V0SWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgdGhpcy5pZF8gPSBpZDtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHByb3BlcnR5IG5hbWUgdG8gYmUgdXNlZCB3aGVuIGdldHRpbmcgdGhlIGZlYXR1cmUncyBkZWZhdWx0IGdlb21ldHJ5LlxuICAgICAqIFdoZW4gY2FsbGluZyB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNnZXRHZW9tZXRyeX0sIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgd2l0aFxuICAgICAqIHRoaXMgbmFtZSB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBwcm9wZXJ0eSBuYW1lIG9mIHRoZSBkZWZhdWx0IGdlb21ldHJ5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGZWF0dXJlLnByb3RvdHlwZS5zZXRHZW9tZXRyeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKHRoaXMuZ2VvbWV0cnlOYW1lXyksIHRoaXMuaGFuZGxlR2VvbWV0cnlDaGFuZ2VkXyk7XG4gICAgICAgIHRoaXMuZ2VvbWV0cnlOYW1lXyA9IG5hbWU7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUodGhpcy5nZW9tZXRyeU5hbWVfKSwgdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfKTtcbiAgICAgICAgdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfKCk7XG4gICAgfTtcbiAgICByZXR1cm4gRmVhdHVyZTtcbn0oQmFzZU9iamVjdCkpO1xuLyoqXG4gKiBDb252ZXJ0IHRoZSBwcm92aWRlZCBvYmplY3QgaW50byBhIGZlYXR1cmUgc3R5bGUgZnVuY3Rpb24uICBGdW5jdGlvbnMgcGFzc2VkXG4gKiB0aHJvdWdoIHVuY2hhbmdlZC4gIEFycmF5cyBvZiBTdHlsZSBvciBzaW5nbGUgc3R5bGUgb2JqZWN0cyB3cmFwcGVkXG4gKiBpbiBhIG5ldyBmZWF0dXJlIHN0eWxlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHshaW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufCFBcnJheTxpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHQ+fCFpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IG9ialxuICogICAgIEEgZmVhdHVyZSBzdHlsZSBmdW5jdGlvbiwgYSBzaW5nbGUgc3R5bGUsIG9yIGFuIGFycmF5IG9mIHN0eWxlcy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbn0gQSBzdHlsZSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBzdHlsZXNfMTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgc3R5bGVzXzEgPSBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvYmopLmdldFpJbmRleCkgPT09ICdmdW5jdGlvbicsIDQxKTsgLy8gRXhwZWN0ZWQgYW4gYGltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVgIG9yIGFuIGFycmF5IG9mIGBpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlYFxuICAgICAgICAgICAgdmFyIHN0eWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9ICovIChvYmopO1xuICAgICAgICAgICAgc3R5bGVzXzEgPSBbc3R5bGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3R5bGVzXzE7XG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgRmVhdHVyZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZlYXR1cmUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Nvb3JkaW5hdGVcbiAqL1xuaW1wb3J0IHsgZ2V0V2lkdGggfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBtb2R1bG8gfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgcGFkTnVtYmVyIH0gZnJvbSAnLi9zdHJpbmcuanMnO1xuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhbiB4eSBjb29yZGluYXRlLiBFeGFtcGxlOiBgWzE2LCA0OF1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvb3JkaW5hdGVcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYW5kXG4gKiB0cmFuc2Zvcm1zIGl0IGludG8gYSBge3N0cmluZ31gLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoQ29vcmRpbmF0ZXx1bmRlZmluZWQpKTogc3RyaW5nfSBDb29yZGluYXRlRm9ybWF0XG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQWRkIGBkZWx0YWAgdG8gYGNvb3JkaW5hdGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kIHJldHVybmVkXG4gKiBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHthZGR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBhZGQoY29vcmQsIFstMiwgNF0pO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbNS44NSwgNTEuOTgzMzMzXVxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBkZWx0YSBEZWx0YS5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBpbnB1dCBjb29yZGluYXRlIGFkanVzdGVkIGJ5XG4gKiB0aGUgZ2l2ZW4gZGVsdGEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoY29vcmRpbmF0ZSwgZGVsdGEpIHtcbiAgICBjb29yZGluYXRlWzBdICs9ICtkZWx0YVswXTtcbiAgICBjb29yZGluYXRlWzFdICs9ICtkZWx0YVsxXTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBjaXJjbGUuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBUaGUgY2lyY2xlLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludCBvbiB0aGUgY2lyY3VtZmVyZW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPbkNpcmNsZShjb29yZGluYXRlLCBjaXJjbGUpIHtcbiAgICB2YXIgciA9IGNpcmNsZS5nZXRSYWRpdXMoKTtcbiAgICB2YXIgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICAgIHZhciB4MCA9IGNlbnRlclswXTtcbiAgICB2YXIgeTAgPSBjZW50ZXJbMV07XG4gICAgdmFyIHgxID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeTEgPSBjb29yZGluYXRlWzFdO1xuICAgIHZhciBkeCA9IHgxIC0geDA7XG4gICAgdmFyIGR5ID0geTEgLSB5MDtcbiAgICBpZiAoZHggPT09IDAgJiYgZHkgPT09IDApIHtcbiAgICAgICAgZHggPSAxO1xuICAgIH1cbiAgICB2YXIgZCA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgdmFyIHggPSB4MCArIChyICogZHgpIC8gZDtcbiAgICB2YXIgeSA9IHkwICsgKHIgKiBkeSkgLyBkO1xuICAgIHJldHVybiBbeCwgeV07XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHBhc3NlZCBjb29yZGluYXRlIG9uIHRoZSBwYXNzZWQgc2VnbWVudC5cbiAqIFRoaXMgaXMgdGhlIGZvb3Qgb2YgdGhlIHBlcnBlbmRpY3VsYXIgb2YgdGhlIGNvb3JkaW5hdGUgdG8gdGhlIHNlZ21lbnQgd2hlblxuICogdGhlIGZvb3QgaXMgb24gdGhlIHNlZ21lbnQsIG9yIHRoZSBjbG9zZXN0IHNlZ21lbnQgY29vcmRpbmF0ZSB3aGVuIHRoZSBmb290XG4gKiBpcyBvdXRzaWRlIHRoZSBzZWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7QXJyYXk8Q29vcmRpbmF0ZT59IHNlZ21lbnQgVGhlIHR3byBjb29yZGluYXRlc1xuICogb2YgdGhlIHNlZ21lbnQuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZlxuICogdGhlIGNvb3JkaW5hdGUgdG8gdGhlIHNlZ21lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0T25TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgICB2YXIgeDAgPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5MCA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIHN0YXJ0ID0gc2VnbWVudFswXTtcbiAgICB2YXIgZW5kID0gc2VnbWVudFsxXTtcbiAgICB2YXIgeDEgPSBzdGFydFswXTtcbiAgICB2YXIgeTEgPSBzdGFydFsxXTtcbiAgICB2YXIgeDIgPSBlbmRbMF07XG4gICAgdmFyIHkyID0gZW5kWzFdO1xuICAgIHZhciBkeCA9IHgyIC0geDE7XG4gICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICB2YXIgYWxvbmcgPSBkeCA9PT0gMCAmJiBkeSA9PT0gMFxuICAgICAgICA/IDBcbiAgICAgICAgOiAoZHggKiAoeDAgLSB4MSkgKyBkeSAqICh5MCAtIHkxKSkgLyAoZHggKiBkeCArIGR5ICogZHkgfHwgMCk7XG4gICAgdmFyIHgsIHk7XG4gICAgaWYgKGFsb25nIDw9IDApIHtcbiAgICAgICAgeCA9IHgxO1xuICAgICAgICB5ID0geTE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFsb25nID49IDEpIHtcbiAgICAgICAgeCA9IHgyO1xuICAgICAgICB5ID0geTI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB4ID0geDEgKyBhbG9uZyAqIGR4O1xuICAgICAgICB5ID0geTEgKyBhbG9uZyAqIGR5O1xuICAgIH1cbiAgICByZXR1cm4gW3gsIHldO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGVGb3JtYXR9IGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gKiB1c2VkIHRvIGZvcm1hdFxuICogYSB7Q29vcmRpbmF0ZX0gdG8gYSBzdHJpbmcuXG4gKlxuICogRXhhbXBsZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2NyZWF0ZVN0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHN0cmluZ2lmeUZ1bmMgPSBjcmVhdGVTdHJpbmdYWSgpO1xuICogICAgIHZhciBvdXQgPSBzdHJpbmdpZnlGdW5jKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc4LCA0OCdcbiAqXG4gKiBFeGFtcGxlIHdpdGggZXhwbGljaXRseSBzcGVjaWZ5aW5nIDIgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKDIpO1xuICogICAgIHZhciBvdXQgPSBzdHJpbmdpZnlGdW5jKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc3Ljg1LCA0Ny45OCdcbiAqXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcmFjdGlvbkRpZ2l0cyBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlRm9ybWF0fSBDb29yZGluYXRlIGZvcm1hdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0cmluZ1hZKG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcgWFkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGhlbWlzcGhlcmVzIEhlbWlzcGhlcmVzLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXMgRGVncmVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2ZyYWN0aW9uRGlnaXRzIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVncmVlc1RvU3RyaW5nSERNUyhoZW1pc3BoZXJlcywgZGVncmVlcywgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgdmFyIG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gICAgdmFyIHggPSBNYXRoLmFicygzNjAwICogbm9ybWFsaXplZERlZ3JlZXMpO1xuICAgIHZhciBkZmxQcmVjaXNpb24gPSBvcHRfZnJhY3Rpb25EaWdpdHMgfHwgMDtcbiAgICB2YXIgcHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIGRmbFByZWNpc2lvbik7XG4gICAgdmFyIGRlZyA9IE1hdGguZmxvb3IoeCAvIDM2MDApO1xuICAgIHZhciBtaW4gPSBNYXRoLmZsb29yKCh4IC0gZGVnICogMzYwMCkgLyA2MCk7XG4gICAgdmFyIHNlYyA9IHggLSBkZWcgKiAzNjAwIC0gbWluICogNjA7XG4gICAgc2VjID0gTWF0aC5jZWlsKHNlYyAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gICAgaWYgKHNlYyA+PSA2MCkge1xuICAgICAgICBzZWMgPSAwO1xuICAgICAgICBtaW4gKz0gMTtcbiAgICB9XG4gICAgaWYgKG1pbiA+PSA2MCkge1xuICAgICAgICBtaW4gPSAwO1xuICAgICAgICBkZWcgKz0gMTtcbiAgICB9XG4gICAgcmV0dXJuIChkZWcgK1xuICAgICAgICAnXFx1MDBiMCAnICtcbiAgICAgICAgcGFkTnVtYmVyKG1pbiwgMikgK1xuICAgICAgICAnXFx1MjAzMiAnICtcbiAgICAgICAgcGFkTnVtYmVyKHNlYywgMiwgZGZsUHJlY2lzaW9uKSArXG4gICAgICAgICdcXHUyMDMzJyArXG4gICAgICAgIChub3JtYWxpemVkRGVncmVlcyA9PSAwXG4gICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICA6ICcgJyArIGhlbWlzcGhlcmVzLmNoYXJBdChub3JtYWxpemVkRGVncmVlcyA8IDAgPyAxIDogMCkpKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4ge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IHRvIGEgc3RyaW5nXG4gKiB1c2luZyB0aGUgZ2l2ZW4gc3RyaW5nIHRlbXBsYXRlLiBUaGUgc3RyaW5ncyBge3h9YCBhbmQgYHt5fWAgaW4gdGhlIHRlbXBsYXRlXG4gKiB3aWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIGZpcnN0IGFuZCBzZWNvbmQgY29vcmRpbmF0ZSB2YWx1ZXMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoOHw0OCkuJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSwgMik7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoNy44NXw0Ny45OCkuJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIEEgdGVtcGxhdGUgc3RyaW5nIHdpdGggYHt4fWAgYW5kIGB7eX1gIHBsYWNlaG9sZGVyc1xuICogICAgIHRoYXQgd2lsbCBiZSByZXBsYWNlZCBieSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBGb3JtYXR0ZWQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChjb29yZGluYXRlLCB0ZW1wbGF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAgICAgICAucmVwbGFjZSgne3h9JywgY29vcmRpbmF0ZVswXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpXG4gICAgICAgICAgICAucmVwbGFjZSgne3l9JywgY29vcmRpbmF0ZVsxXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gY29vcmRpbmF0ZXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMikge1xuICAgIHZhciBlcXVhbHMgPSB0cnVlO1xuICAgIGZvciAodmFyIGkgPSBjb29yZGluYXRlMS5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBpZiAoY29vcmRpbmF0ZTFbaV0gIT0gY29vcmRpbmF0ZTJbaV0pIHtcbiAgICAgICAgICAgIGVxdWFscyA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVxdWFscztcbn1cbi8qKlxuICogUm90YXRlIGBjb29yZGluYXRlYCBieSBgYW5nbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kXG4gKiByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtyb3RhdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgcm90YXRlUmFkaWFucyA9IE1hdGguUEkgLyAyOyAvLyA5MCBkZWdyZWVzXG4gKiAgICAgcm90YXRlKGNvb3JkLCByb3RhdGVSYWRpYW5zKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWy00Ny45ODMzMzMsIDcuODVdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFuLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShjb29yZGluYXRlLCBhbmdsZSkge1xuICAgIHZhciBjb3NBbmdsZSA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIHggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgY29vcmRpbmF0ZVswXSA9IHg7XG4gICAgY29vcmRpbmF0ZVsxXSA9IHk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIFNjYWxlIGBjb29yZGluYXRlYCBieSBgc2NhbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kIHJldHVybmVkXG4gKiBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc2NhbGUgPSAxLjI7XG4gKiAgICAgc2NhbGVDb29yZGluYXRlKGNvb3JkLCBzY2FsZSk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFs5LjQyLCA1Ny41Nzk5OTk2XVxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNjYWxlIFNjYWxlIGZhY3Rvci5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShjb29yZGluYXRlLCBzY2FsZSkge1xuICAgIGNvb3JkaW5hdGVbMF0gKj0gc2NhbGU7XG4gICAgY29vcmRpbmF0ZVsxXSAqPSBzY2FsZTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gY29vcmQxIGFuZCBjb29yZDIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgICB2YXIgZHggPSBjb29yZDFbMF0gLSBjb29yZDJbMF07XG4gICAgdmFyIGR5ID0gY29vcmQxWzFdIC0gY29vcmQyWzFdO1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBEaXN0YW5jZSBiZXR3ZWVuIGNvb3JkMSBhbmQgY29vcmQyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZShjb29yZDEsIGNvb3JkMikpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIHNxdWFyZWQgZGlzdGFuY2UgZnJvbSBhIGNvb3JkaW5hdGUgdG8gYSBsaW5lIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBMaW5lIHNlZ21lbnQgKDJcbiAqIGNvb3JkaW5hdGVzKS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoZSBwb2ludCB0byB0aGUgbGluZSBzZWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlKGNvb3JkaW5hdGUsIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkpO1xufVxuLyoqXG4gKiBGb3JtYXQgYSBnZW9ncmFwaGljIGNvb3JkaW5hdGUgd2l0aCB0aGUgaGVtaXNwaGVyZSwgZGVncmVlcywgbWludXRlcywgYW5kXG4gKiBzZWNvbmRzLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nSERNU30gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ0hETVMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzQ3wrAgNTjigLIgNjDigLMgTiA3wrAgNTDigLIgNjDigLMgRSdcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAxIGZyYWN0aW9uYWwgZGlnaXQ6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdIRE1TfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MC4w4oCzIE4gN8KwIDUw4oCyIDYwLjDigLMgRSdcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2ZyYWN0aW9uRGlnaXRzIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gSGVtaXNwaGVyZSwgZGVncmVlcywgbWludXRlcyBhbmQgc2Vjb25kcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nSERNUyhjb29yZGluYXRlLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICBpZiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gKGRlZ3JlZXNUb1N0cmluZ0hETVMoJ05TJywgY29vcmRpbmF0ZVsxXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgZGVncmVlc1RvU3RyaW5nSERNUygnRVcnLCBjb29yZGluYXRlWzBdLCBvcHRfZnJhY3Rpb25EaWdpdHMpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG4vKipcbiAqIEZvcm1hdCBhIGNvb3JkaW5hdGUgYXMgYSBjb21tYSBkZWxpbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44LCA0OC4wJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBYWS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgcmV0dXJuIGZvcm1hdChjb29yZGluYXRlLCAne3h9LCB7eX0nLCBvcHRfZnJhY3Rpb25EaWdpdHMpO1xufVxuLyoqXG4gKiBNb2RpZmllcyB0aGUgcHJvdmlkZWQgY29vcmRpbmF0ZSBpbi1wbGFjZSB0byBiZSB3aXRoaW4gdGhlIHJlYWwgd29ybGRcbiAqIGV4dGVudC4gVGhlIGxvd2VyIHByb2plY3Rpb24gZXh0ZW50IGJvdW5kYXJ5IGlzIGluY2x1c2l2ZSwgdGhlIHVwcGVyIG9uZVxuICogZXhjbHVzaXZlLlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSB3aXRoaW4gdGhlIHJlYWwgd29ybGQgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgoY29vcmRpbmF0ZSwgcHJvamVjdGlvbikge1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uLmdldEV4dGVudCgpKTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBnZXRXb3JsZHNBd2F5KGNvb3JkaW5hdGUsIHByb2plY3Rpb24sIHdvcmxkV2lkdGgpO1xuICAgICAgICBpZiAod29ybGRzQXdheSkge1xuICAgICAgICAgICAgY29vcmRpbmF0ZVswXSAtPSB3b3JsZHNBd2F5ICogd29ybGRXaWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3NvdXJjZUV4dGVudFdpZHRoIFdpZHRoIG9mIHRoZSBzb3VyY2UgZXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBPZmZzZXQgaW4gd29ybGQgd2lkdGhzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V29ybGRzQXdheShjb29yZGluYXRlLCBwcm9qZWN0aW9uLCBvcHRfc291cmNlRXh0ZW50V2lkdGgpIHtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIHdvcmxkc0F3YXkgPSAwO1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgKGNvb3JkaW5hdGVbMF0gPCBwcm9qZWN0aW9uRXh0ZW50WzBdIHx8IGNvb3JkaW5hdGVbMF0gPiBwcm9qZWN0aW9uRXh0ZW50WzJdKSkge1xuICAgICAgICB2YXIgc291cmNlRXh0ZW50V2lkdGggPSBvcHRfc291cmNlRXh0ZW50V2lkdGggfHwgZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgIHdvcmxkc0F3YXkgPSBNYXRoLmZsb29yKChjb29yZGluYXRlWzBdIC0gcHJvamVjdGlvbkV4dGVudFswXSkgLyBzb3VyY2VFeHRlbnRXaWR0aCk7XG4gICAgfVxuICAgIHJldHVybiB3b3JsZHNBd2F5O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29vcmRpbmF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL0NsdXN0ZXJcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEZlYXR1cmUgZnJvbSAnLi4vRmVhdHVyZS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBQb2ludCBmcm9tICcuLi9nZW9tL1BvaW50LmpzJztcbmltcG9ydCBWZWN0b3JTb3VyY2UgZnJvbSAnLi9WZWN0b3IuanMnO1xuaW1wb3J0IHsgYWRkIGFzIGFkZENvb3JkaW5hdGUsIHNjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZSB9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBidWZmZXIsIGNyZWF0ZUVtcHR5LCBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkaXN0YW5jZT0yMF0gTWluaW11bSBkaXN0YW5jZSBpbiBwaXhlbHMgYmV0d2VlbiBjbHVzdGVycy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRmVhdHVyZSk6UG9pbnR9IFtnZW9tZXRyeUZ1bmN0aW9uXVxuICogRnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV9IGFzIGFyZ3VtZW50IGFuZCByZXR1cm5zIGFuXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2dlb20vUG9pbnR9IGFzIGNsdXN0ZXIgY2FsY3VsYXRpb24gcG9pbnQgZm9yIHRoZSBmZWF0dXJlLiBXaGVuIGFcbiAqIGZlYXR1cmUgc2hvdWxkIG5vdCBiZSBjb25zaWRlcmVkIGZvciBjbHVzdGVyaW5nLCB0aGUgZnVuY3Rpb24gc2hvdWxkIHJldHVyblxuICogYG51bGxgLiBUaGUgZGVmYXVsdCwgd2hpY2ggd29ya3Mgd2hlbiB0aGUgdW5kZXJ5bGluZyBzb3VyY2UgY29udGFpbnMgcG9pbnRcbiAqIGZlYXR1cmVzIG9ubHksIGlzXG4gKiBgYGBqc1xuICogZnVuY3Rpb24oZmVhdHVyZSkge1xuICogICByZXR1cm4gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICogfVxuICogYGBgXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9nZW9tL1BvbHlnb25+UG9seWdvbiNnZXRJbnRlcmlvclBvaW50fSBmb3IgYSB3YXkgdG8gZ2V0IGEgY2x1c3RlclxuICogY2FsY3VsYXRpb24gcG9pbnQgZm9yIHBvbHlnb25zLlxuICogQHByb3BlcnR5IHtWZWN0b3JTb3VyY2V9IFtzb3VyY2VdIFNvdXJjZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExheWVyIHNvdXJjZSB0byBjbHVzdGVyIHZlY3RvciBkYXRhLiBXb3JrcyBvdXQgb2YgdGhlIGJveCB3aXRoIHBvaW50XG4gKiBnZW9tZXRyaWVzLiBGb3Igb3RoZXIgZ2VvbWV0cnkgdHlwZXMsIG9yIGlmIG5vdCBhbGwgZ2VvbWV0cmllcyBzaG91bGQgYmVcbiAqIGNvbnNpZGVyZWQgZm9yIGNsdXN0ZXJpbmcsIGEgY3VzdG9tIGBnZW9tZXRyeUZ1bmN0aW9uYCBjYW4gYmUgZGVmaW5lZC5cbiAqXG4gKiBJZiB0aGUgaW5zdGFuY2UgaXMgZGlzcG9zZWQgd2l0aG91dCBhbHNvIGRpc3Bvc2luZyB0aGUgdW5kZXJseWluZ1xuICogc291cmNlIGBzZXRTb3VyY2UobnVsbClgIGhhcyB0byBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lciByZWZlcmVuY2VcbiAqIGZyb20gdGhlIHdyYXBwZWQgc291cmNlLlxuICogQGFwaVxuICovXG52YXIgQ2x1c3RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2x1c3RlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgQ2x1c3RlciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENsdXN0ZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVzb2x1dGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRpc3RhbmNlID0gb3B0aW9ucy5kaXN0YW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kaXN0YW5jZSA6IDIwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PEZlYXR1cmU+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mZWF0dXJlcyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEByZXR1cm4ge1BvaW50fSBDbHVzdGVyIGNhbGN1bGF0aW9uIHBvaW50LlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5nZW9tZXRyeUZ1bmN0aW9uID1cbiAgICAgICAgICAgIG9wdGlvbnMuZ2VvbWV0cnlGdW5jdGlvbiB8fFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGdlb21ldHJ5LmdldFR5cGUoKSA9PSBHZW9tZXRyeVR5cGUuUE9JTlQsIDEwKTsgLy8gVGhlIGRlZmF1bHQgYGdlb21ldHJ5RnVuY3Rpb25gIGNhbiBvbmx5IGhhbmRsZSBgUG9pbnRgIGdlb21ldHJpZXNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlb21ldHJ5O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIF90aGlzLmJvdW5kUmVmcmVzaF8gPSBfdGhpcy5yZWZyZXNoLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zZXRTb3VyY2Uob3B0aW9ucy5zb3VyY2UgfHwgbnVsbCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBmZWF0dXJlcyBmcm9tIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2Zhc3QgU2tpcCBkaXNwYXRjaGluZyBvZiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjcmVtb3ZlZmVhdHVyZX0gZXZlbnRzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDbHVzdGVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIChvcHRfZmFzdCkge1xuICAgICAgICB0aGlzLmZlYXR1cmVzLmxlbmd0aCA9IDA7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzLCBvcHRfZmFzdCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGRpc3RhbmNlIGluIHBpeGVscyBiZXR3ZWVuIGNsdXN0ZXJzLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENsdXN0ZXIucHJvdG90eXBlLmdldERpc3RhbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgd3JhcHBlZCBzb3VyY2UuXG4gICAgICogQHJldHVybiB7VmVjdG9yU291cmNlfSBTb3VyY2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENsdXN0ZXIucHJvdG90eXBlLmdldFNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIENsdXN0ZXIucHJvdG90eXBlLmxvYWRGZWF0dXJlcyA9IGZ1bmN0aW9uIChleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdGhpcy5zb3VyY2UubG9hZEZlYXR1cmVzKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbik7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB0aGlzLnJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgICAgICB0aGlzLmNsdXN0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZXModGhpcy5mZWF0dXJlcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZGlzdGFuY2UgaW4gcGl4ZWxzIGJldHdlZW4gY2x1c3RlcnMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIFRoZSBkaXN0YW5jZSBpbiBwaXhlbHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENsdXN0ZXIucHJvdG90eXBlLnNldERpc3RhbmNlID0gZnVuY3Rpb24gKGRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXBsYWNlIHRoZSB3cmFwcGVkIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge1ZlY3RvclNvdXJjZX0gc291cmNlIFRoZSBuZXcgc291cmNlIGZvciB0aGlzIGluc3RhbmNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDbHVzdGVyLnByb3RvdHlwZS5zZXRTb3VyY2UgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kUmVmcmVzaF8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kUmVmcmVzaF8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRoZSBzb3VyY2UgY2hhbmdpbmcuXG4gICAgICovXG4gICAgQ2x1c3Rlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB0aGlzLmNsdXN0ZXIoKTtcbiAgICAgICAgdGhpcy5hZGRGZWF0dXJlcyh0aGlzLmZlYXR1cmVzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDbHVzdGVyLnByb3RvdHlwZS5jbHVzdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uID09PSB1bmRlZmluZWQgfHwgIXRoaXMuc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIHZhciBtYXBEaXN0YW5jZSA9IHRoaXMuZGlzdGFuY2UgKiB0aGlzLnJlc29sdXRpb247XG4gICAgICAgIHZhciBmZWF0dXJlcyA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVzKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGNsdXN0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmZWF0dXJlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xuICAgICAgICAgICAgaWYgKCEoZ2V0VWlkKGZlYXR1cmUpIGluIGNsdXN0ZXJlZCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmdlb21ldHJ5RnVuY3Rpb24oZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZXMsIGV4dGVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcihleHRlbnQsIG1hcERpc3RhbmNlLCBleHRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gdGhpcy5zb3VyY2UuZ2V0RmVhdHVyZXNJbkV4dGVudChleHRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMgPSBuZWlnaGJvcnMuZmlsdGVyKGZ1bmN0aW9uIChuZWlnaGJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVpZCA9IGdldFVpZChuZWlnaGJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh1aWQgaW4gY2x1c3RlcmVkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJlZFt1aWRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMucHVzaCh0aGlzLmNyZWF0ZUNsdXN0ZXIobmVpZ2hib3JzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PEZlYXR1cmU+fSBmZWF0dXJlcyBGZWF0dXJlc1xuICAgICAqIEByZXR1cm4ge0ZlYXR1cmV9IFRoZSBjbHVzdGVyIGZlYXR1cmUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENsdXN0ZXIucHJvdG90eXBlLmNyZWF0ZUNsdXN0ZXIgPSBmdW5jdGlvbiAoZmVhdHVyZXMpIHtcbiAgICAgICAgdmFyIGNlbnRyb2lkID0gWzAsIDBdO1xuICAgICAgICBmb3IgKHZhciBpID0gZmVhdHVyZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnlGdW5jdGlvbihmZWF0dXJlc1tpXSk7XG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgICAgICBhZGRDb29yZGluYXRlKGNlbnRyb2lkLCBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZlYXR1cmVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2FsZUNvb3JkaW5hdGUoY2VudHJvaWQsIDEgLyBmZWF0dXJlcy5sZW5ndGgpO1xuICAgICAgICB2YXIgY2x1c3RlciA9IG5ldyBGZWF0dXJlKG5ldyBQb2ludChjZW50cm9pZCkpO1xuICAgICAgICBjbHVzdGVyLnNldCgnZmVhdHVyZXMnLCBmZWF0dXJlcyk7XG4gICAgICAgIHJldHVybiBjbHVzdGVyO1xuICAgIH07XG4gICAgcmV0dXJuIENsdXN0ZXI7XG59KFZlY3RvclNvdXJjZSkpO1xuZXhwb3J0IGRlZmF1bHQgQ2x1c3Rlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNsdXN0ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0ltYWdlXG4gKi9cbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuLi9zaXplLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IG9wYWNpdHlcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcm90YXRlV2l0aFZpZXdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByb3RhdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBzY2FsZVxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBkaXNwbGFjZW1lbnRcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGJhc2UgY2xhc3MgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90IGluc3RhbnRpYXRlZCBpblxuICogYXBwcy4gQmFzZSBjbGFzcyBmb3Ige0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29ufkljb259LCB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0NpcmNsZX5DaXJjbGVTdHlsZX0gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL1JlZ3VsYXJTaGFwZX5SZWd1bGFyU2hhcGV9LlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBJbWFnZVN0eWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlU3R5bGUob3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BhY2l0eV8gPSBvcHRpb25zLm9wYWNpdHk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucm90YXRlV2l0aFZpZXdfID0gb3B0aW9ucy5yb3RhdGVXaXRoVmlldztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IG9wdGlvbnMucm90YXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2NhbGVfID0gb3B0aW9ucy5zY2FsZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjYWxlQXJyYXlfID0gdG9TaXplKG9wdGlvbnMuc2NhbGUpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc3BsYWNlbWVudF8gPSBvcHRpb25zLmRpc3BsYWNlbWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmVzIHRoZSBzdHlsZS5cbiAgICAgKiBAcmV0dXJuIHtJbWFnZVN0eWxlfSBUaGUgY2xvbmVkIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpO1xuICAgICAgICByZXR1cm4gbmV3IEltYWdlU3R5bGUoe1xuICAgICAgICAgICAgb3BhY2l0eTogdGhpcy5nZXRPcGFjaXR5KCksXG4gICAgICAgICAgICBzY2FsZTogQXJyYXkuaXNBcnJheShzY2FsZSkgPyBzY2FsZS5zbGljZSgpIDogc2NhbGUsXG4gICAgICAgICAgICByb3RhdGlvbjogdGhpcy5nZXRSb3RhdGlvbigpLFxuICAgICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHRoaXMuZ2V0Um90YXRlV2l0aFZpZXcoKSxcbiAgICAgICAgICAgIGRpc3BsYWNlbWVudDogdGhpcy5nZXREaXNwbGFjZW1lbnQoKS5zbGljZSgpLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3ltYm9saXplciBvcGFjaXR5LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gT3BhY2l0eS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuZ2V0T3BhY2l0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BhY2l0eV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgc3ltYm9saXplciByb3RhdGVzIHdpdGggdGhlIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBSb3RhdGUgd2l0aCBtYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldFJvdGF0ZVdpdGhWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGVXaXRoVmlld187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN5bW9ibGl6ZXIgcm90YXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSb3RhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuZ2V0Um90YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdGF0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3ltYm9saXplciBzY2FsZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBTY2FsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuZ2V0U2NhbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjYWxlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3ltYm9saXplciBzY2FsZSBhcnJheS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFNjYWxlIGFycmF5LlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldFNjYWxlQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjYWxlQXJyYXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkaXNwbGFjZW1lbnQgb2YgdGhlIHNoYXBlXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gU2hhcGUncyBjZW50ZXIgZGlzcGxhY2VtZW50XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldERpc3BsYWNlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxhY2VtZW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IGluIHBpeGVscy4gVGhlIGFuY2hvciBkZXRlcm1pbmVzIHRoZSBjZW50ZXIgcG9pbnQgZm9yIHRoZVxuICAgICAqIHN5bWJvbGl6ZXIuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gQW5jaG9yLlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldEFuY2hvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGltYWdlIGVsZW1lbnQgZm9yIHRoZSBzeW1ib2xpemVyLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH0gSW1hZ2UgZWxlbWVudC5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fSBJbWFnZSBlbGVtZW50LlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldEhpdERldGVjdGlvbkltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qXG4gICAgICogR2V0IHRoZSBpbWFnZSBwaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldFBpeGVsUmF0aW8gPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gSW1hZ2Ugc3RhdGUuXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuZ2V0SW1hZ2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IEltYWdlIHNpemUuXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuZ2V0SW1hZ2VTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gU2l6ZSBvZiB0aGUgaGl0LWRldGVjdGlvbiBpbWFnZS5cbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5nZXRIaXREZXRlY3Rpb25JbWFnZVNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvcmlnaW4gb2YgdGhlIHN5bWJvbGl6ZXIuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3JpZ2luLlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldE9yaWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNpemUgb2YgdGhlIHN5bWJvbGl6ZXIgKGluIHBpeGVscykuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplLlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvcGFjaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VTdHlsZS5wcm90b3R5cGUuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uIChvcGFjaXR5KSB7XG4gICAgICAgIHRoaXMub3BhY2l0eV8gPSBvcGFjaXR5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdG8gcm90YXRlIHRoZSBzdHlsZSB3aXRoIHRoZSB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSByb3RhdGVXaXRoVmlldyBSb3RhdGUgd2l0aCBtYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLnNldFJvdGF0ZVdpdGhWaWV3ID0gZnVuY3Rpb24gKHJvdGF0ZVdpdGhWaWV3KSB7XG4gICAgICAgIHRoaXMucm90YXRlV2l0aFZpZXdfID0gcm90YXRlV2l0aFZpZXc7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uIChyb3RhdGlvbikge1xuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzY2FsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gc2NhbGUgU2NhbGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLnNldFNjYWxlID0gZnVuY3Rpb24gKHNjYWxlKSB7XG4gICAgICAgIHRoaXMuc2NhbGVfID0gc2NhbGU7XG4gICAgICAgIHRoaXMuc2NhbGVBcnJheV8gPSB0b1NpemUoc2NhbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCk6IHZvaWR9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLmxpc3RlbkltYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKi9cbiAgICBJbWFnZVN0eWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCk6IHZvaWR9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIEltYWdlU3R5bGUucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VDaGFuZ2UgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVN0eWxlO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlU3R5bGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29sb3JcbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogQSBjb2xvciByZXByZXNlbnRlZCBhcyBhIHNob3J0IGFycmF5IFtyZWQsIGdyZWVuLCBibHVlLCBhbHBoYV0uXG4gKiByZWQsIGdyZWVuLCBhbmQgYmx1ZSBzaG91bGQgYmUgaW50ZWdlcnMgaW4gdGhlIHJhbmdlIDAuLjI1NSBpbmNsdXNpdmUuXG4gKiBhbHBoYSBzaG91bGQgYmUgYSBmbG9hdCBpbiB0aGUgcmFuZ2UgMC4uMSBpbmNsdXNpdmUuIElmIG5vIGFscGhhIHZhbHVlIGlzXG4gKiBnaXZlbiB0aGVuIGAxYCB3aWxsIGJlIHVzZWQuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gQ29sb3JcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBUaGlzIFJlZ0V4cCBtYXRjaGVzICMgZm9sbG93ZWQgYnkgMywgNCwgNiwgb3IgOCBoZXggZGlnaXRzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIEhFWF9DT0xPUl9SRV8gPSAvXiMoW2EtZjAtOV17M318W2EtZjAtOV17NH0oPzpbYS1mMC05XXsyfSl7MCwyfSkkL2k7XG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgbWF0Y2hpbmcgcG90ZW50aWFsIG5hbWVkIGNvbG9yIHN0eWxlIHN0cmluZ3MuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgTkFNRURfQ09MT1JfUkVfID0gL14oW2Etel0qKSR8XmhzbGE/XFwoLipcXCkkL2k7XG4vKipcbiAqIFJldHVybiB0aGUgY29sb3IgYXMgYW4gcmdiYSBzdHJpbmcuXG4gKiBAcGFyYW0ge0NvbG9yfHN0cmluZ30gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJnYmEgc3RyaW5nLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNTdHJpbmcoY29sb3IpIHtcbiAgICBpZiAodHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcoY29sb3IpO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJuIG5hbWVkIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yIE5hbWVkIGNvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2Igc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmcm9tTmFtZWQoY29sb3IpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbC5zdHlsZS5jb2xvciA9IGNvbG9yO1xuICAgIGlmIChlbC5zdHlsZS5jb2xvciAhPT0gJycpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZ2IgPSBnZXRDb21wdXRlZFN0eWxlKGVsKS5jb2xvcjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgIHJldHVybiByZ2I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmV4cG9ydCB2YXIgZnJvbVN0cmluZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgLy8gV2UgbWFpbnRhaW4gYSBzbWFsbCBjYWNoZSBvZiBwYXJzZWQgc3RyaW5ncy4gIFRvIHByb3ZpZGUgY2hlYXAgTFJVLWxpa2VcbiAgICAvLyBzZW1hbnRpY3MsIHdoZW5ldmVyIHRoZSBjYWNoZSBncm93cyB0b28gbGFyZ2Ugd2Ugc2ltcGx5IGRlbGV0ZSBhblxuICAgIC8vIGFyYml0cmFyeSAyNSUgb2YgdGhlIGVudHJpZXMuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgTUFYX0NBQ0hFX1NJWkUgPSAxMDI0O1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBDb2xvcj59XG4gICAgICovXG4gICAgdmFyIGNhY2hlID0ge307XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgY2FjaGVTaXplID0gMDtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAgICAgKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmFyIGNvbG9yO1xuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkocykpIHtcbiAgICAgICAgICAgIGNvbG9yID0gY2FjaGVbc107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY2FjaGVTaXplID49IE1BWF9DQUNIRV9TSVpFKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGkrKyAmIDMpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC0tY2FjaGVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sb3IgPSBmcm9tU3RyaW5nSW50ZXJuYWxfKHMpO1xuICAgICAgICAgICAgY2FjaGVbc10gPSBjb2xvcjtcbiAgICAgICAgICAgICsrY2FjaGVTaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9KTtcbn0pKCk7XG4vKipcbiAqIFJldHVybiB0aGUgY29sb3IgYXMgYW4gYXJyYXkuIFRoaXMgZnVuY3Rpb24gbWFpbnRhaW5zIGEgY2FjaGUgb2YgY2FsY3VsYXRlZFxuICogYXJyYXlzIHdoaWNoIG1lYW5zIHRoZSByZXN1bHQgc2hvdWxkIG5vdCBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7Q29sb3J8c3RyaW5nfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzQXJyYXkoY29sb3IpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb2xvcikpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZyb21TdHJpbmcoY29sb3IpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqL1xuZnVuY3Rpb24gZnJvbVN0cmluZ0ludGVybmFsXyhzKSB7XG4gICAgdmFyIHIsIGcsIGIsIGEsIGNvbG9yO1xuICAgIGlmIChOQU1FRF9DT0xPUl9SRV8uZXhlYyhzKSkge1xuICAgICAgICBzID0gZnJvbU5hbWVkKHMpO1xuICAgIH1cbiAgICBpZiAoSEVYX0NPTE9SX1JFXy5leGVjKHMpKSB7XG4gICAgICAgIC8vIGhleFxuICAgICAgICB2YXIgbiA9IHMubGVuZ3RoIC0gMTsgLy8gbnVtYmVyIG9mIGhleCBkaWdpdHNcbiAgICAgICAgdmFyIGQgPSAvLyBudW1iZXIgb2YgZGlnaXRzIHBlciBjaGFubmVsXG4gICAgICAgICB2b2lkIDA7IC8vIG51bWJlciBvZiBkaWdpdHMgcGVyIGNoYW5uZWxcbiAgICAgICAgaWYgKG4gPD0gNCkge1xuICAgICAgICAgICAgZCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkID0gMjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFzQWxwaGEgPSBuID09PSA0IHx8IG4gPT09IDg7XG4gICAgICAgIHIgPSBwYXJzZUludChzLnN1YnN0cigxICsgMCAqIGQsIGQpLCAxNik7XG4gICAgICAgIGcgPSBwYXJzZUludChzLnN1YnN0cigxICsgMSAqIGQsIGQpLCAxNik7XG4gICAgICAgIGIgPSBwYXJzZUludChzLnN1YnN0cigxICsgMiAqIGQsIGQpLCAxNik7XG4gICAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICAgICAgYSA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAzICogZCwgZCksIDE2KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGEgPSAyNTU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQgPT0gMSkge1xuICAgICAgICAgICAgciA9IChyIDw8IDQpICsgcjtcbiAgICAgICAgICAgIGcgPSAoZyA8PCA0KSArIGc7XG4gICAgICAgICAgICBiID0gKGIgPDwgNCkgKyBiO1xuICAgICAgICAgICAgaWYgKGhhc0FscGhhKSB7XG4gICAgICAgICAgICAgICAgYSA9IChhIDw8IDQpICsgYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2xvciA9IFtyLCBnLCBiLCBhIC8gMjU1XTtcbiAgICB9XG4gICAgZWxzZSBpZiAocy5pbmRleE9mKCdyZ2JhKCcpID09IDApIHtcbiAgICAgICAgLy8gcmdiYSgpXG4gICAgICAgIGNvbG9yID0gcy5zbGljZSg1LCAtMSkuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocy5pbmRleE9mKCdyZ2IoJykgPT0gMCkge1xuICAgICAgICAvLyByZ2IoKVxuICAgICAgICBjb2xvciA9IHMuc2xpY2UoNCwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgICAgIGNvbG9yLnB1c2goMSk7XG4gICAgICAgIG5vcm1hbGl6ZShjb2xvcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhc3NlcnQoZmFsc2UsIDE0KTsgLy8gSW52YWxpZCBjb2xvclxuICAgIH1cbiAgICByZXR1cm4gY29sb3I7XG59XG4vKipcbiAqIFRPRE8gdGhpcyBmdW5jdGlvbiBpcyBvbmx5IHVzZWQgaW4gdGhlIHRlc3QsIHdlIHByb2JhYmx5IHNob3VsZG4ndCBleHBvcnQgaXRcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3J9IENsYW1wZWQgY29sb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUoY29sb3IpIHtcbiAgICBjb2xvclswXSA9IGNsYW1wKChjb2xvclswXSArIDAuNSkgfCAwLCAwLCAyNTUpO1xuICAgIGNvbG9yWzFdID0gY2xhbXAoKGNvbG9yWzFdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gICAgY29sb3JbMl0gPSBjbGFtcCgoY29sb3JbMl0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgICBjb2xvclszXSA9IGNsYW1wKGNvbG9yWzNdLCAwLCAxKTtcbiAgICByZXR1cm4gY29sb3I7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhjb2xvcikge1xuICAgIHZhciByID0gY29sb3JbMF07XG4gICAgaWYgKHIgIT0gKHIgfCAwKSkge1xuICAgICAgICByID0gKHIgKyAwLjUpIHwgMDtcbiAgICB9XG4gICAgdmFyIGcgPSBjb2xvclsxXTtcbiAgICBpZiAoZyAhPSAoZyB8IDApKSB7XG4gICAgICAgIGcgPSAoZyArIDAuNSkgfCAwO1xuICAgIH1cbiAgICB2YXIgYiA9IGNvbG9yWzJdO1xuICAgIGlmIChiICE9IChiIHwgMCkpIHtcbiAgICAgICAgYiA9IChiICsgMC41KSB8IDA7XG4gICAgfVxuICAgIHZhciBhID0gY29sb3JbM10gPT09IHVuZGVmaW5lZCA/IDEgOiBjb2xvclszXTtcbiAgICByZXR1cm4gJ3JnYmEoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcsJyArIGEgKyAnKSc7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHN0cmluZyBpcyBhY3R1YWxseSBhIHZhbGlkIGNvbG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZ0NvbG9yKHMpIHtcbiAgICBpZiAoTkFNRURfQ09MT1JfUkVfLnRlc3QocykpIHtcbiAgICAgICAgcyA9IGZyb21OYW1lZChzKTtcbiAgICB9XG4gICAgcmV0dXJuIChIRVhfQ09MT1JfUkVfLnRlc3QocykgfHwgcy5pbmRleE9mKCdyZ2JhKCcpID09PSAwIHx8IHMuaW5kZXhPZigncmdiKCcpID09PSAwKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbG9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb2xvcmxpa2VcbiAqL1xuaW1wb3J0IHsgdG9TdHJpbmcgfSBmcm9tICcuL2NvbG9yLmpzJztcbi8qKlxuICogQSB0eXBlIGFjY2VwdGVkIGJ5IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5maWxsU3R5bGVcbiAqIG9yIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5zdHJva2VTdHlsZS5cbiAqIFJlcHJlc2VudHMgYSBjb2xvciwgcGF0dGVybiwgb3IgZ3JhZGllbnQuIFRoZSBvcmlnaW4gZm9yIHBhdHRlcm5zIGFuZFxuICogZ3JhZGllbnRzIGFzIGZpbGwgc3R5bGUgaXMgYW4gaW5jcmVtZW50IG9mIDUxMiBjc3MgcGl4ZWxzIGZyb20gbWFwIGNvb3JkaW5hdGVcbiAqIGBbMCwgMF1gLiBGb3Igc2VhbWxlc3MgcmVwZWF0IHBhdHRlcm5zLCB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBwYXR0ZXJuIGltYWdlXG4gKiBtdXN0IGJlIGEgZmFjdG9yIG9mIHR3byAoMiwgNCwgOCwgLi4uLCA1MTIpLlxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd8Q2FudmFzUGF0dGVybnxDYW52YXNHcmFkaWVudH0gQ29sb3JMaWtlXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbG9yLmpzXCIpLkNvbG9yfENvbG9yTGlrZX0gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtDb2xvckxpa2V9IFRoZSBjb2xvciBhcyBhbiB7QGxpbmsgb2wvY29sb3JsaWtlfkNvbG9yTGlrZX0uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc0NvbG9yTGlrZShjb2xvcikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbG9yKSkge1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcoY29sb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbG9ybGlrZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvUmVndWxhclNoYXBlXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdHlsZSBmcm9tICcuL0ltYWdlLmpzJztcbmltcG9ydCB7IGFzQXJyYXkgfSBmcm9tICcuLi9jb2xvci5qcyc7XG5pbXBvcnQgeyBhc0NvbG9yTGlrZSB9IGZyb20gJy4uL2NvbG9ybGlrZS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuLi9kb20uanMnO1xuaW1wb3J0IHsgZGVmYXVsdEZpbGxTdHlsZSwgZGVmYXVsdExpbmVDYXAsIGRlZmF1bHRMaW5lSm9pbiwgZGVmYXVsdExpbmVXaWR0aCwgZGVmYXVsdE1pdGVyTGltaXQsIGRlZmF1bHRTdHJva2VTdHlsZSwgfSBmcm9tICcuLi9yZW5kZXIvY2FudmFzLmpzJztcbi8qKlxuICogU3BlY2lmeSByYWRpdXMgZm9yIHJlZ3VsYXIgcG9seWdvbnMsIG9yIHJhZGl1czEgYW5kIHJhZGl1czIgZm9yIHN0YXJzLlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ZpbGwuanNcIikuZGVmYXVsdH0gW2ZpbGxdIEZpbGwgc3R5bGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gcG9pbnRzIE51bWJlciBvZiBwb2ludHMgZm9yIHN0YXJzIGFuZCByZWd1bGFyIHBvbHlnb25zLiBJbiBjYXNlIG9mIGEgcG9seWdvbiwgdGhlIG51bWJlciBvZiBwb2ludHNcbiAqIGlzIHRoZSBudW1iZXIgb2Ygc2lkZXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JhZGl1c10gUmFkaXVzIG9mIGEgcmVndWxhciBwb2x5Z29uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYWRpdXMxXSBPdXRlciByYWRpdXMgb2YgYSBzdGFyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYWRpdXMyXSBJbm5lciByYWRpdXMgb2YgYSBzdGFyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFthbmdsZT0wXSBTaGFwZSdzIGFuZ2xlIGluIHJhZGlhbnMuIEEgdmFsdWUgb2YgMCB3aWxsIGhhdmUgb25lIG9mIHRoZSBzaGFwZSdzIHBvaW50IGZhY2luZyB1cC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW2Rpc3BsYWNlbWVudD1bMCwwXV0gRGlzcGxhY2VtZW50IG9mIHRoZSBzaGFwZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBbc3Ryb2tlXSBTdHJva2Ugc3R5bGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uPTBdIFJvdGF0aW9uIGluIHJhZGlhbnMgKHBvc2l0aXZlIHJvdGF0aW9uIGNsb2Nrd2lzZSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtyb3RhdGVXaXRoVmlldz1mYWxzZV0gV2hldGhlciB0byByb3RhdGUgdGhlIHNoYXBlIHdpdGggdGhlIHZpZXcuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVuZGVyT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbc3Ryb2tlU3R5bGVdXG4gKiBAcHJvcGVydHkge251bWJlcn0gc3Ryb2tlV2lkdGhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzaXplXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IGxpbmVDYXBcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2hcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lRGFzaE9mZnNldFxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gbGluZUpvaW5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaXRlckxpbWl0XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU2V0IHJlZ3VsYXIgc2hhcGUgc3R5bGUgZm9yIHZlY3RvciBmZWF0dXJlcy4gVGhlIHJlc3VsdGluZyBzaGFwZSB3aWxsIGJlXG4gKiBhIHJlZ3VsYXIgcG9seWdvbiB3aGVuIGByYWRpdXNgIGlzIHByb3ZpZGVkLCBvciBhIHN0YXIgd2hlbiBgcmFkaXVzMWAgYW5kXG4gKiBgcmFkaXVzMmAgYXJlIHByb3ZpZGVkLlxuICogQGFwaVxuICovXG52YXIgUmVndWxhclNoYXBlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZWd1bGFyU2hhcGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVndWxhclNoYXBlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHJvdGF0ZVdpdGhWaWV3ID0gb3B0aW9ucy5yb3RhdGVXaXRoVmlldyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGVXaXRoVmlldyA6IGZhbHNlO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICByb3RhdGVXaXRoVmlldzogcm90YXRlV2l0aFZpZXcsXG4gICAgICAgICAgICByb3RhdGlvbjogb3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGlvbiA6IDAsXG4gICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgIGRpc3BsYWNlbWVudDogb3B0aW9ucy5kaXNwbGFjZW1lbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGlzcGxhY2VtZW50IDogWzAsIDBdLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxudW1iZXIsIEhUTUxDYW52YXNFbGVtZW50Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNhbnZhc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhpdERldGVjdGlvbkNhbnZhc18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmlsbF8gPSBvcHRpb25zLmZpbGwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZmlsbCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWdpbl8gPSBbMCwgMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9pbnRzXyA9IG9wdGlvbnMucG9pbnRzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmFkaXVzXyA9XG4gICAgICAgICAgICBvcHRpb25zLnJhZGl1cyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yYWRpdXMgOiBvcHRpb25zLnJhZGl1czE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJhZGl1czJfID0gb3B0aW9ucy5yYWRpdXMyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuZ2xlXyA9IG9wdGlvbnMuYW5nbGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYW5nbGUgOiAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdHJva2VfID0gb3B0aW9ucy5zdHJva2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc3Ryb2tlIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2l6ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlU2l6ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhpdERldGVjdGlvbkltYWdlU2l6ZV8gPSBudWxsO1xuICAgICAgICBfdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIHN0eWxlLlxuICAgICAqIEByZXR1cm4ge1JlZ3VsYXJTaGFwZX0gVGhlIGNsb25lZCBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gbmV3IFJlZ3VsYXJTaGFwZSh7XG4gICAgICAgICAgICBmaWxsOiB0aGlzLmdldEZpbGwoKSA/IHRoaXMuZ2V0RmlsbCgpLmNsb25lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwb2ludHM6IHRoaXMuZ2V0UG9pbnRzKCksXG4gICAgICAgICAgICByYWRpdXM6IHRoaXMuZ2V0UmFkaXVzKCksXG4gICAgICAgICAgICByYWRpdXMyOiB0aGlzLmdldFJhZGl1czIoKSxcbiAgICAgICAgICAgIGFuZ2xlOiB0aGlzLmdldEFuZ2xlKCksXG4gICAgICAgICAgICBzdHJva2U6IHRoaXMuZ2V0U3Ryb2tlKCkgPyB0aGlzLmdldFN0cm9rZSgpLmNsb25lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByb3RhdGlvbjogdGhpcy5nZXRSb3RhdGlvbigpLFxuICAgICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHRoaXMuZ2V0Um90YXRlV2l0aFZpZXcoKSxcbiAgICAgICAgICAgIGRpc3BsYWNlbWVudDogdGhpcy5nZXREaXNwbGFjZW1lbnQoKS5zbGljZSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgc3R5bGUuc2V0T3BhY2l0eSh0aGlzLmdldE9wYWNpdHkoKSk7XG4gICAgICAgIHN0eWxlLnNldFNjYWxlKHRoaXMuZ2V0U2NhbGUoKSk7XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IGluIHBpeGVscy4gVGhlIGFuY2hvciBkZXRlcm1pbmVzIHRoZSBjZW50ZXIgcG9pbnQgZm9yIHRoZVxuICAgICAqIHN5bWJvbGl6ZXIuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gQW5jaG9yLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldEFuY2hvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5jaG9yXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW5nbGUgdXNlZCBpbiBnZW5lcmF0aW5nIHRoZSBzaGFwZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFNoYXBlJ3Mgcm90YXRpb24gaW4gcmFkaWFucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5nZXRBbmdsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5nbGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBmaWxsIHN0eWxlIGZvciB0aGUgc2hhcGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9GaWxsLmpzXCIpLmRlZmF1bHR9IEZpbGwgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0RmlsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsbF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2UgZWxlbWVudC5cbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldEhpdERldGVjdGlvbkltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaGl0RGV0ZWN0aW9uQ2FudmFzXykge1xuICAgICAgICAgICAgdmFyIHJlbmRlck9wdGlvbnMgPSB0aGlzLmNyZWF0ZVJlbmRlck9wdGlvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlSGl0RGV0ZWN0aW9uQ2FudmFzXyhyZW5kZXJPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5oaXREZXRlY3Rpb25DYW52YXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbWFnZSBpY29uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBJbWFnZSBvciBDYW52YXMgZWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW52YXNfW3BpeGVsUmF0aW8gfHwgMV0pIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJPcHRpb25zID0gdGhpcy5jcmVhdGVSZW5kZXJPcHRpb25zKCk7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChyZW5kZXJPcHRpb25zLnNpemUgKiBwaXhlbFJhdGlvIHx8IDEsIHJlbmRlck9wdGlvbnMuc2l6ZSAqIHBpeGVsUmF0aW8gfHwgMSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdfKHJlbmRlck9wdGlvbnMsIGNvbnRleHQsIDAsIDAsIHBpeGVsUmF0aW8gfHwgMSk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhc19bcGl4ZWxSYXRpbyB8fCAxXSA9IGNvbnRleHQuY2FudmFzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhc19bcGl4ZWxSYXRpbyB8fCAxXTtcbiAgICB9O1xuICAgIC8qXG4gICAgICogR2V0IHRoZSBpbWFnZSBwaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIHJldHVybiBwaXhlbFJhdGlvO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBJbWFnZSBzaXplLlxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0SW1hZ2VTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZVNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplIG9mIHRoZSBoaXQtZGV0ZWN0aW9uIGltYWdlLlxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0SGl0RGV0ZWN0aW9uSW1hZ2VTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaXREZXRlY3Rpb25JbWFnZVNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBJbWFnZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmdldEltYWdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgb3JpZ2luIG9mIHRoZSBzeW1ib2xpemVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE9yaWdpbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5nZXRPcmlnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBwb2ludHMgZm9yIGdlbmVyYXRpbmcgdGhlIHNoYXBlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTnVtYmVyIG9mIHBvaW50cyBmb3Igc3RhcnMgYW5kIHJlZ3VsYXIgcG9seWdvbnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0UG9pbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2ludHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSAocHJpbWFyeSkgcmFkaXVzIGZvciB0aGUgc2hhcGUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSYWRpdXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0UmFkaXVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzZWNvbmRhcnkgcmFkaXVzIGZvciB0aGUgc2hhcGUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmFkaXVzMi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5nZXRSYWRpdXMyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpdXMyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2l6ZSBvZiB0aGUgc3ltYm9saXplciAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN0cm9rZSBzdHlsZSBmb3IgdGhlIHNoYXBlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFN0cm9rZSBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5nZXRTdHJva2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cm9rZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KTogdm9pZH0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5saXN0ZW5JbWFnZUNoYW5nZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikgeyB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqL1xuICAgIFJlZ3VsYXJTaGFwZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KTogdm9pZH0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS51bmxpc3RlbkltYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7IH07XG4gICAgLyoqXG4gICAgICogQHJldHVybnMge1JlbmRlck9wdGlvbnN9ICBUaGUgcmVuZGVyIG9wdGlvbnNcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGluZUNhcCA9IGRlZmF1bHRMaW5lQ2FwO1xuICAgICAgICB2YXIgbGluZUpvaW4gPSBkZWZhdWx0TGluZUpvaW47XG4gICAgICAgIHZhciBtaXRlckxpbWl0ID0gMDtcbiAgICAgICAgdmFyIGxpbmVEYXNoID0gbnVsbDtcbiAgICAgICAgdmFyIGxpbmVEYXNoT2Zmc2V0ID0gMDtcbiAgICAgICAgdmFyIHN0cm9rZVN0eWxlO1xuICAgICAgICB2YXIgc3Ryb2tlV2lkdGggPSAwO1xuICAgICAgICBpZiAodGhpcy5zdHJva2VfKSB7XG4gICAgICAgICAgICBzdHJva2VTdHlsZSA9IHRoaXMuc3Ryb2tlXy5nZXRDb2xvcigpO1xuICAgICAgICAgICAgaWYgKHN0cm9rZVN0eWxlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGUgPSBkZWZhdWx0U3Ryb2tlU3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJva2VTdHlsZSA9IGFzQ29sb3JMaWtlKHN0cm9rZVN0eWxlKTtcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoID0gdGhpcy5zdHJva2VfLmdldFdpZHRoKCk7XG4gICAgICAgICAgICBpZiAoc3Ryb2tlV2lkdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoID0gZGVmYXVsdExpbmVXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmVEYXNoID0gdGhpcy5zdHJva2VfLmdldExpbmVEYXNoKCk7XG4gICAgICAgICAgICBsaW5lRGFzaE9mZnNldCA9IHRoaXMuc3Ryb2tlXy5nZXRMaW5lRGFzaE9mZnNldCgpO1xuICAgICAgICAgICAgbGluZUpvaW4gPSB0aGlzLnN0cm9rZV8uZ2V0TGluZUpvaW4oKTtcbiAgICAgICAgICAgIGlmIChsaW5lSm9pbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbGluZUpvaW4gPSBkZWZhdWx0TGluZUpvaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lQ2FwID0gdGhpcy5zdHJva2VfLmdldExpbmVDYXAoKTtcbiAgICAgICAgICAgIGlmIChsaW5lQ2FwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsaW5lQ2FwID0gZGVmYXVsdExpbmVDYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtaXRlckxpbWl0ID0gdGhpcy5zdHJva2VfLmdldE1pdGVyTGltaXQoKTtcbiAgICAgICAgICAgIGlmIChtaXRlckxpbWl0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtaXRlckxpbWl0ID0gZGVmYXVsdE1pdGVyTGltaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNpemUgPSAyICogKHRoaXMucmFkaXVzXyArIHN0cm9rZVdpZHRoKSArIDE7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdHJva2VTdHlsZTogc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsXG4gICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgbGluZUNhcDogbGluZUNhcCxcbiAgICAgICAgICAgIGxpbmVEYXNoOiBsaW5lRGFzaCxcbiAgICAgICAgICAgIGxpbmVEYXNoT2Zmc2V0OiBsaW5lRGFzaE9mZnNldCxcbiAgICAgICAgICAgIGxpbmVKb2luOiBsaW5lSm9pbixcbiAgICAgICAgICAgIG1pdGVyTGltaXQ6IG1pdGVyTGltaXQsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZW5kZXJPcHRpb25zID0gdGhpcy5jcmVhdGVSZW5kZXJPcHRpb25zKCk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKHJlbmRlck9wdGlvbnMuc2l6ZSwgcmVuZGVyT3B0aW9ucy5zaXplKTtcbiAgICAgICAgdGhpcy5kcmF3XyhyZW5kZXJPcHRpb25zLCBjb250ZXh0LCAwLCAwLCAxKTtcbiAgICAgICAgdGhpcy5jYW52YXNfWzFdID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIC8vIGNhbnZhcy53aWR0aCBhbmQgaGVpZ2h0IGFyZSByb3VuZGVkIHRvIHRoZSBjbG9zZXN0IGludGVnZXJcbiAgICAgICAgdmFyIHNpemUgPSBjb250ZXh0LmNhbnZhcy53aWR0aDtcbiAgICAgICAgdmFyIGltYWdlU2l6ZSA9IHNpemU7XG4gICAgICAgIHZhciBkaXNwbGFjZW1lbnQgPSB0aGlzLmdldERpc3BsYWNlbWVudCgpO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkltYWdlU2l6ZV8gPSBbcmVuZGVyT3B0aW9ucy5zaXplLCByZW5kZXJPcHRpb25zLnNpemVdO1xuICAgICAgICB0aGlzLmNyZWF0ZUhpdERldGVjdGlvbkNhbnZhc18ocmVuZGVyT3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYW5jaG9yXyA9IFtzaXplIC8gMiAtIGRpc3BsYWNlbWVudFswXSwgc2l6ZSAvIDIgKyBkaXNwbGFjZW1lbnRbMV1dO1xuICAgICAgICB0aGlzLnNpemVfID0gW3NpemUsIHNpemVdO1xuICAgICAgICB0aGlzLmltYWdlU2l6ZV8gPSBbaW1hZ2VTaXplLCBpbWFnZVNpemVdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1JlbmRlck9wdGlvbnN9IHJlbmRlck9wdGlvbnMgUmVuZGVyIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgVGhlIHJlbmRlcmluZyBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRoZSBvcmlnaW4gZm9yIHRoZSBzeW1ib2wgKHgpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRoZSBvcmlnaW4gZm9yIHRoZSBzeW1ib2wgKHkpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFRoZSBwaXhlbCByYXRpby5cbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmRyYXdfID0gZnVuY3Rpb24gKHJlbmRlck9wdGlvbnMsIGNvbnRleHQsIHgsIHksIHBpeGVsUmF0aW8pIHtcbiAgICAgICAgdmFyIGksIGFuZ2xlMCwgcmFkaXVzQztcbiAgICAgICAgLy8gcmVzZXQgdHJhbnNmb3JtXG4gICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtKHBpeGVsUmF0aW8sIDAsIDAsIHBpeGVsUmF0aW8sIDAsIDApO1xuICAgICAgICAvLyB0aGVuIG1vdmUgdG8gKHgsIHkpXG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICB2YXIgcG9pbnRzID0gdGhpcy5wb2ludHNfO1xuICAgICAgICBpZiAocG9pbnRzID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgY29udGV4dC5hcmMocmVuZGVyT3B0aW9ucy5zaXplIC8gMiwgcmVuZGVyT3B0aW9ucy5zaXplIC8gMiwgdGhpcy5yYWRpdXNfLCAwLCAyICogTWF0aC5QSSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgcmFkaXVzMiA9IHRoaXMucmFkaXVzMl8gIT09IHVuZGVmaW5lZCA/IHRoaXMucmFkaXVzMl8gOiB0aGlzLnJhZGl1c187XG4gICAgICAgICAgICBpZiAocmFkaXVzMiAhPT0gdGhpcy5yYWRpdXNfKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRzID0gMiAqIHBvaW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPD0gcG9pbnRzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhbmdsZTAgPSAoaSAqIDIgKiBNYXRoLlBJKSAvIHBvaW50cyAtIE1hdGguUEkgLyAyICsgdGhpcy5hbmdsZV87XG4gICAgICAgICAgICAgICAgcmFkaXVzQyA9IGkgJSAyID09PSAwID8gdGhpcy5yYWRpdXNfIDogcmFkaXVzMjtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhyZW5kZXJPcHRpb25zLnNpemUgLyAyICsgcmFkaXVzQyAqIE1hdGguY29zKGFuZ2xlMCksIHJlbmRlck9wdGlvbnMuc2l6ZSAvIDIgKyByYWRpdXNDICogTWF0aC5zaW4oYW5nbGUwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZmlsbF8pIHtcbiAgICAgICAgICAgIHZhciBjb2xvciA9IHRoaXMuZmlsbF8uZ2V0Q29sb3IoKTtcbiAgICAgICAgICAgIGlmIChjb2xvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbG9yID0gZGVmYXVsdEZpbGxTdHlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gYXNDb2xvckxpa2UoY29sb3IpO1xuICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlXykge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHJlbmRlck9wdGlvbnMuc3Ryb2tlU3R5bGU7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHJlbmRlck9wdGlvbnMuc3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICBpZiAoY29udGV4dC5zZXRMaW5lRGFzaCAmJiByZW5kZXJPcHRpb25zLmxpbmVEYXNoKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaChyZW5kZXJPcHRpb25zLmxpbmVEYXNoKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID0gcmVuZGVyT3B0aW9ucy5saW5lRGFzaE9mZnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQubGluZUNhcCA9IHJlbmRlck9wdGlvbnMubGluZUNhcDtcbiAgICAgICAgICAgIGNvbnRleHQubGluZUpvaW4gPSByZW5kZXJPcHRpb25zLmxpbmVKb2luO1xuICAgICAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gcmVuZGVyT3B0aW9ucy5taXRlckxpbWl0O1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1JlbmRlck9wdGlvbnN9IHJlbmRlck9wdGlvbnMgUmVuZGVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgUmVndWxhclNoYXBlLnByb3RvdHlwZS5jcmVhdGVIaXREZXRlY3Rpb25DYW52YXNfID0gZnVuY3Rpb24gKHJlbmRlck9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25DYW52YXNfID0gdGhpcy5nZXRJbWFnZSgxKTtcbiAgICAgICAgaWYgKHRoaXMuZmlsbF8pIHtcbiAgICAgICAgICAgIHZhciBjb2xvciA9IHRoaXMuZmlsbF8uZ2V0Q29sb3IoKTtcbiAgICAgICAgICAgIC8vIGRldGVybWluZSBpZiBmaWxsIGlzIHRyYW5zcGFyZW50IChvciBwYXR0ZXJuIG9yIGdyYWRpZW50KVxuICAgICAgICAgICAgdmFyIG9wYWNpdHkgPSAwO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb2xvciA9IGFzQXJyYXkoY29sb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbG9yID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNvbG9yKSkge1xuICAgICAgICAgICAgICAgIG9wYWNpdHkgPSBjb2xvci5sZW5ndGggPT09IDQgPyBjb2xvclszXSA6IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BhY2l0eSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGEgdHJhbnNwYXJlbnQgZmlsbCBzdHlsZSBpcyBzZXQsIGNyZWF0ZSBhbiBleHRyYSBoaXQtZGV0ZWN0aW9uIGltYWdlXG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIGRlZmF1bHQgZmlsbCBzdHlsZVxuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKHJlbmRlck9wdGlvbnMuc2l6ZSwgcmVuZGVyT3B0aW9ucy5zaXplKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkNhbnZhc18gPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdIaXREZXRlY3Rpb25DYW52YXNfKHJlbmRlck9wdGlvbnMsIGNvbnRleHQsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UmVuZGVyT3B0aW9uc30gcmVuZGVyT3B0aW9ucyBSZW5kZXIgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBUaGUgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaGUgb3JpZ2luIGZvciB0aGUgc3ltYm9sICh4KS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaGUgb3JpZ2luIGZvciB0aGUgc3ltYm9sICh5KS5cbiAgICAgKi9cbiAgICBSZWd1bGFyU2hhcGUucHJvdG90eXBlLmRyYXdIaXREZXRlY3Rpb25DYW52YXNfID0gZnVuY3Rpb24gKHJlbmRlck9wdGlvbnMsIGNvbnRleHQsIHgsIHkpIHtcbiAgICAgICAgLy8gbW92ZSB0byAoeCwgeSlcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIHZhciBwb2ludHMgPSB0aGlzLnBvaW50c187XG4gICAgICAgIGlmIChwb2ludHMgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICBjb250ZXh0LmFyYyhyZW5kZXJPcHRpb25zLnNpemUgLyAyLCByZW5kZXJPcHRpb25zLnNpemUgLyAyLCB0aGlzLnJhZGl1c18sIDAsIDIgKiBNYXRoLlBJLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciByYWRpdXMyID0gdGhpcy5yYWRpdXMyXyAhPT0gdW5kZWZpbmVkID8gdGhpcy5yYWRpdXMyXyA6IHRoaXMucmFkaXVzXztcbiAgICAgICAgICAgIGlmIChyYWRpdXMyICE9PSB0aGlzLnJhZGl1c18pIHtcbiAgICAgICAgICAgICAgICBwb2ludHMgPSAyICogcG9pbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDAsIHJhZGl1c0MgPSB2b2lkIDAsIGFuZ2xlMCA9IHZvaWQgMDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPD0gcG9pbnRzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhbmdsZTAgPSAoaSAqIDIgKiBNYXRoLlBJKSAvIHBvaW50cyAtIE1hdGguUEkgLyAyICsgdGhpcy5hbmdsZV87XG4gICAgICAgICAgICAgICAgcmFkaXVzQyA9IGkgJSAyID09PSAwID8gdGhpcy5yYWRpdXNfIDogcmFkaXVzMjtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhyZW5kZXJPcHRpb25zLnNpemUgLyAyICsgcmFkaXVzQyAqIE1hdGguY29zKGFuZ2xlMCksIHJlbmRlck9wdGlvbnMuc2l6ZSAvIDIgKyByYWRpdXNDICogTWF0aC5zaW4oYW5nbGUwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBkZWZhdWx0RmlsbFN0eWxlO1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlXykge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHJlbmRlck9wdGlvbnMuc3Ryb2tlU3R5bGU7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHJlbmRlck9wdGlvbnMuc3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICBpZiAocmVuZGVyT3B0aW9ucy5saW5lRGFzaCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0TGluZURhc2gocmVuZGVyT3B0aW9ucy5saW5lRGFzaCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IHJlbmRlck9wdGlvbnMubGluZURhc2hPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVndWxhclNoYXBlO1xufShJbWFnZVN0eWxlKSk7XG5leHBvcnQgZGVmYXVsdCBSZWd1bGFyU2hhcGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWd1bGFyU2hhcGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0NpcmNsZVxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBSZWd1bGFyU2hhcGUgZnJvbSAnLi9SZWd1bGFyU2hhcGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fSBbZmlsbF0gRmlsbCBzdHlsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByYWRpdXMgQ2lyY2xlIHJhZGl1cy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdHJva2UuanNcIikuZGVmYXVsdH0gW3N0cm9rZV0gU3Ryb2tlIHN0eWxlLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbZGlzcGxhY2VtZW50PVswLDBdXSBkaXNwbGFjZW1lbnRcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTZXQgY2lyY2xlIHN0eWxlIGZvciB2ZWN0b3IgZmVhdHVyZXMuXG4gKiBAYXBpXG4gKi9cbnZhciBDaXJjbGVTdHlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2lyY2xlU3R5bGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDaXJjbGVTdHlsZShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBwb2ludHM6IEluZmluaXR5LFxuICAgICAgICAgICAgZmlsbDogb3B0aW9ucy5maWxsLFxuICAgICAgICAgICAgcmFkaXVzOiBvcHRpb25zLnJhZGl1cyxcbiAgICAgICAgICAgIHN0cm9rZTogb3B0aW9ucy5zdHJva2UsXG4gICAgICAgICAgICBkaXNwbGFjZW1lbnQ6IG9wdGlvbnMuZGlzcGxhY2VtZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRpc3BsYWNlbWVudCA6IFswLCAwXSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIHN0eWxlLlxuICAgICAqIEByZXR1cm4ge0NpcmNsZVN0eWxlfSBUaGUgY2xvbmVkIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDaXJjbGVTdHlsZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IG5ldyBDaXJjbGVTdHlsZSh7XG4gICAgICAgICAgICBmaWxsOiB0aGlzLmdldEZpbGwoKSA/IHRoaXMuZ2V0RmlsbCgpLmNsb25lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdHJva2U6IHRoaXMuZ2V0U3Ryb2tlKCkgPyB0aGlzLmdldFN0cm9rZSgpLmNsb25lKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByYWRpdXM6IHRoaXMuZ2V0UmFkaXVzKCksXG4gICAgICAgICAgICBkaXNwbGFjZW1lbnQ6IHRoaXMuZ2V0RGlzcGxhY2VtZW50KCkuc2xpY2UoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHN0eWxlLnNldE9wYWNpdHkodGhpcy5nZXRPcGFjaXR5KCkpO1xuICAgICAgICBzdHlsZS5zZXRTY2FsZSh0aGlzLmdldFNjYWxlKCkpO1xuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNpcmNsZSByYWRpdXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIENpcmNsZSByYWRpdXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENpcmNsZVN0eWxlLnByb3RvdHlwZS5zZXRSYWRpdXMgPSBmdW5jdGlvbiAocmFkaXVzKSB7XG4gICAgICAgIHRoaXMucmFkaXVzXyA9IHJhZGl1cztcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIHJldHVybiBDaXJjbGVTdHlsZTtcbn0oUmVndWxhclNoYXBlKSk7XG5leHBvcnQgZGVmYXVsdCBDaXJjbGVTdHlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNpcmNsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvRmlsbFxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2NvbG9yPW51bGxdIEEgY29sb3IsIGdyYWRpZW50IG9yIHBhdHRlcm4uXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9jb2xvcn5Db2xvcn0gYW5kIHtAbGluayBtb2R1bGU6b2wvY29sb3JsaWtlfkNvbG9yTGlrZX0gZm9yIHBvc3NpYmxlIGZvcm1hdHMuXG4gKiBEZWZhdWx0IG51bGw7IGlmIG51bGwsIHRoZSBDYW52YXMvcmVuZGVyZXIgZGVmYXVsdCBibGFjayB3aWxsIGJlIHVzZWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU2V0IGZpbGwgc3R5bGUgZm9yIHZlY3RvciBmZWF0dXJlcy5cbiAqIEBhcGlcbiAqL1xudmFyIEZpbGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBGaWxsKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29sb3JfID0gb3B0aW9ucy5jb2xvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xvciA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb25lcyB0aGUgc3R5bGUuIFRoZSBjb2xvciBpcyBub3QgY2xvbmVkIGlmIGl0IGlzIGFuIHtAbGluayBtb2R1bGU6b2wvY29sb3JsaWtlfkNvbG9yTGlrZX0uXG4gICAgICogQHJldHVybiB7RmlsbH0gVGhlIGNsb25lZCBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRmlsbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb2xvciA9IHRoaXMuZ2V0Q29sb3IoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWxsKHtcbiAgICAgICAgICAgIGNvbG9yOiBBcnJheS5pc0FycmF5KGNvbG9yKSA/IGNvbG9yLnNsaWNlKCkgOiBjb2xvciB8fCB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBmaWxsIGNvbG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfGltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IENvbG9yLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGaWxsLnByb3RvdHlwZS5nZXRDb2xvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb2xvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gY29sb3IgQ29sb3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZpbGwucHJvdG90eXBlLnNldENvbG9yID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY29sb3JfID0gY29sb3I7XG4gICAgfTtcbiAgICByZXR1cm4gRmlsbDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBGaWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmlsbC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvU3Ryb2tlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcnxpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY29sb3JdIEEgY29sb3IsIGdyYWRpZW50IG9yIHBhdHRlcm4uXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9jb2xvcn5Db2xvcn0gYW5kIHtAbGluayBtb2R1bGU6b2wvY29sb3JsaWtlfkNvbG9yTGlrZX0gZm9yIHBvc3NpYmxlIGZvcm1hdHMuXG4gKiBEZWZhdWx0IG51bGw7IGlmIG51bGwsIHRoZSBDYW52YXMvcmVuZGVyZXIgZGVmYXVsdCBibGFjayB3aWxsIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtsaW5lQ2FwPSdyb3VuZCddIExpbmUgY2FwIHN0eWxlOiBgYnV0dGAsIGByb3VuZGAsIG9yIGBzcXVhcmVgLlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gW2xpbmVKb2luPSdyb3VuZCddIExpbmUgam9pbiBzdHlsZTogYGJldmVsYCwgYHJvdW5kYCwgb3IgYG1pdGVyYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW2xpbmVEYXNoXSBMaW5lIGRhc2ggcGF0dGVybi4gRGVmYXVsdCBpcyBgbnVsbGAgKG5vIGRhc2gpLlxuICogUGxlYXNlIG5vdGUgdGhhdCBJbnRlcm5ldCBFeHBsb3JlciAxMCBhbmQgbG93ZXIgZG8gbm90IHN1cHBvcnQgdGhlIGBzZXRMaW5lRGFzaGAgbWV0aG9kIG9uXG4gKiB0aGUgYENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRGAgYW5kIHRoZXJlZm9yZSB0aGlzIG9wdGlvbiB3aWxsIGhhdmUgbm8gdmlzdWFsIGVmZmVjdCBpbiB0aGVzZSBicm93c2Vycy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZURhc2hPZmZzZXQ9MF0gTGluZSBkYXNoIG9mZnNldC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWl0ZXJMaW1pdD0xMF0gTWl0ZXIgbGltaXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3dpZHRoXSBXaWR0aC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTZXQgc3Ryb2tlIHN0eWxlIGZvciB2ZWN0b3IgZmVhdHVyZXMuXG4gKiBOb3RlIHRoYXQgdGhlIGRlZmF1bHRzIGdpdmVuIGFyZSB0aGUgQ2FudmFzIGRlZmF1bHRzLCB3aGljaCB3aWxsIGJlIHVzZWQgaWZcbiAqIG9wdGlvbiBpcyBub3QgZGVmaW5lZC4gVGhlIGBnZXRgIGZ1bmN0aW9ucyByZXR1cm4gd2hhdGV2ZXIgd2FzIGVudGVyZWQgaW5cbiAqIHRoZSBvcHRpb25zOyB0aGV5IHdpbGwgbm90IHJldHVybiB0aGUgZGVmYXVsdC5cbiAqIEBhcGlcbiAqL1xudmFyIFN0cm9rZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN0cm9rZShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfGltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbG9yXyA9IG9wdGlvbnMuY29sb3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sb3IgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0NhbnZhc0xpbmVDYXB8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saW5lQ2FwXyA9IG9wdGlvbnMubGluZUNhcDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saW5lRGFzaF8gPSBvcHRpb25zLmxpbmVEYXNoICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxpbmVEYXNoIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saW5lRGFzaE9mZnNldF8gPSBvcHRpb25zLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0NhbnZhc0xpbmVKb2lufHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGluZUpvaW5fID0gb3B0aW9ucy5saW5lSm9pbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taXRlckxpbWl0XyA9IG9wdGlvbnMubWl0ZXJMaW1pdDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aWR0aF8gPSBvcHRpb25zLndpZHRoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIHN0eWxlLlxuICAgICAqIEByZXR1cm4ge1N0cm9rZX0gVGhlIGNsb25lZCBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbG9yID0gdGhpcy5nZXRDb2xvcigpO1xuICAgICAgICByZXR1cm4gbmV3IFN0cm9rZSh7XG4gICAgICAgICAgICBjb2xvcjogQXJyYXkuaXNBcnJheShjb2xvcikgPyBjb2xvci5zbGljZSgpIDogY29sb3IgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgbGluZUNhcDogdGhpcy5nZXRMaW5lQ2FwKCksXG4gICAgICAgICAgICBsaW5lRGFzaDogdGhpcy5nZXRMaW5lRGFzaCgpID8gdGhpcy5nZXRMaW5lRGFzaCgpLnNsaWNlKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBsaW5lRGFzaE9mZnNldDogdGhpcy5nZXRMaW5lRGFzaE9mZnNldCgpLFxuICAgICAgICAgICAgbGluZUpvaW46IHRoaXMuZ2V0TGluZUpvaW4oKSxcbiAgICAgICAgICAgIG1pdGVyTGltaXQ6IHRoaXMuZ2V0TWl0ZXJMaW1pdCgpLFxuICAgICAgICAgICAgd2lkdGg6IHRoaXMuZ2V0V2lkdGgoKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN0cm9rZSBjb2xvci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcnxpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBDb2xvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5nZXRDb2xvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaW5lIGNhcCB0eXBlIGZvciB0aGUgc3Ryb2tlLlxuICAgICAqIEByZXR1cm4ge0NhbnZhc0xpbmVDYXB8dW5kZWZpbmVkfSBMaW5lIGNhcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5nZXRMaW5lQ2FwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saW5lQ2FwXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGluZSBkYXNoIHN0eWxlIGZvciB0aGUgc3Ryb2tlLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IExpbmUgZGFzaC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5nZXRMaW5lRGFzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZURhc2hfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaW5lIGRhc2ggb2Zmc2V0IGZvciB0aGUgc3Ryb2tlLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IExpbmUgZGFzaCBvZmZzZXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuZ2V0TGluZURhc2hPZmZzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVEYXNoT2Zmc2V0XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGluZSBqb2luIHR5cGUgZm9yIHRoZSBzdHJva2UuXG4gICAgICogQHJldHVybiB7Q2FudmFzTGluZUpvaW58dW5kZWZpbmVkfSBMaW5lIGpvaW4uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuZ2V0TGluZUpvaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVKb2luXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWl0ZXIgbGltaXQgZm9yIHRoZSBzdHJva2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gTWl0ZXIgbGltaXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuZ2V0TWl0ZXJMaW1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWl0ZXJMaW1pdF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN0cm9rZSB3aWR0aC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBXaWR0aC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGhfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb2xvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gY29sb3IgQ29sb3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuc2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvcl8gPSBjb2xvcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGluZSBjYXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NhbnZhc0xpbmVDYXB8dW5kZWZpbmVkfSBsaW5lQ2FwIExpbmUgY2FwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLnNldExpbmVDYXAgPSBmdW5jdGlvbiAobGluZUNhcCkge1xuICAgICAgICB0aGlzLmxpbmVDYXBfID0gbGluZUNhcDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGluZSBkYXNoLlxuICAgICAqXG4gICAgICogUGxlYXNlIG5vdGUgdGhhdCBJbnRlcm5ldCBFeHBsb3JlciAxMCBhbmQgbG93ZXIgW2RvIG5vdCBzdXBwb3J0XVttZG5dIHRoZVxuICAgICAqIGBzZXRMaW5lRGFzaGAgbWV0aG9kIG9uIHRoZSBgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEYCBhbmQgdGhlcmVmb3JlIHRoaXNcbiAgICAgKiBwcm9wZXJ0eSB3aWxsIGhhdmUgbm8gdmlzdWFsIGVmZmVjdCBpbiB0aGVzZSBicm93c2Vycy5cbiAgICAgKlxuICAgICAqIFttZG5dOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEL3NldExpbmVEYXNoI0Jyb3dzZXJfY29tcGF0aWJpbGl0eVxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaCBMaW5lIGRhc2guXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0cm9rZS5wcm90b3R5cGUuc2V0TGluZURhc2ggPSBmdW5jdGlvbiAobGluZURhc2gpIHtcbiAgICAgICAgdGhpcy5saW5lRGFzaF8gPSBsaW5lRGFzaDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGluZSBkYXNoIG9mZnNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gbGluZURhc2hPZmZzZXQgTGluZSBkYXNoIG9mZnNldC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3Ryb2tlLnByb3RvdHlwZS5zZXRMaW5lRGFzaE9mZnNldCA9IGZ1bmN0aW9uIChsaW5lRGFzaE9mZnNldCkge1xuICAgICAgICB0aGlzLmxpbmVEYXNoT2Zmc2V0XyA9IGxpbmVEYXNoT2Zmc2V0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsaW5lIGpvaW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NhbnZhc0xpbmVKb2lufHVuZGVmaW5lZH0gbGluZUpvaW4gTGluZSBqb2luLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLnNldExpbmVKb2luID0gZnVuY3Rpb24gKGxpbmVKb2luKSB7XG4gICAgICAgIHRoaXMubGluZUpvaW5fID0gbGluZUpvaW47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1pdGVyIGxpbWl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSBtaXRlckxpbWl0IE1pdGVyIGxpbWl0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLnNldE1pdGVyTGltaXQgPSBmdW5jdGlvbiAobWl0ZXJMaW1pdCkge1xuICAgICAgICB0aGlzLm1pdGVyTGltaXRfID0gbWl0ZXJMaW1pdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgd2lkdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHdpZHRoIFdpZHRoLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHJva2UucHJvdG90eXBlLnNldFdpZHRoID0gZnVuY3Rpb24gKHdpZHRoKSB7XG4gICAgICAgIHRoaXMud2lkdGhfID0gd2lkdGg7XG4gICAgfTtcbiAgICByZXR1cm4gU3Ryb2tlO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFN0cm9rZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0cm9rZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvU3R5bGVcbiAqL1xuaW1wb3J0IENpcmNsZVN0eWxlIGZyb20gJy4vQ2lyY2xlLmpzJztcbmltcG9ydCBGaWxsIGZyb20gJy4vRmlsbC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBTdHJva2UgZnJvbSAnLi9TdHJva2UuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV9IGFuZCBhIGB7bnVtYmVyfWBcbiAqIHJlcHJlc2VudGluZyB0aGUgdmlldydzIHJlc29sdXRpb24uIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGFcbiAqIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvU3R5bGV9IG9yIGFuIGFycmF5IG9mIHRoZW0uIFRoaXMgd2F5IGUuZy4gYVxuICogdmVjdG9yIGxheWVyIGNhbiBiZSBzdHlsZWQuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB1bmRlZmluZWRgLCB0aGVcbiAqIGZlYXR1cmUgd2lsbCBub3QgYmUgcmVuZGVyZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UsIG51bWJlcik6KFN0eWxlfEFycmF5PFN0eWxlPnx2b2lkKX0gU3R5bGVGdW5jdGlvblxuICovXG4vKipcbiAqIEEge0BsaW5rIFN0eWxlfSwgYW4gYXJyYXkgb2Yge0BsaW5rIFN0eWxlfSwgb3IgYSB7QGxpbmsgU3R5bGVGdW5jdGlvbn0uXG4gKiBAdHlwZWRlZiB7U3R5bGV8QXJyYXk8U3R5bGU+fFN0eWxlRnVuY3Rpb259IFN0eWxlTGlrZVxuICovXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV9IGFzIGFyZ3VtZW50IGFuZCByZXR1cm5zIGFuXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2dlb20vR2VvbWV0cnl9IHRoYXQgd2lsbCBiZSByZW5kZXJlZCBhbmQgc3R5bGVkIGZvciB0aGUgZmVhdHVyZS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSk6XG4gKiAgICAgKGltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZCl9IEdlb21ldHJ5RnVuY3Rpb25cbiAqL1xuLyoqXG4gKiBDdXN0b20gcmVuZGVyZXIgZnVuY3Rpb24uIFRha2VzIHR3byBhcmd1bWVudHM6XG4gKlxuICogMS4gVGhlIHBpeGVsIGNvb3JkaW5hdGVzIG9mIHRoZSBnZW9tZXRyeSBpbiBHZW9KU09OIG5vdGF0aW9uLlxuICogMi4gVGhlIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyflN0YXRlfSBvZiB0aGUgbGF5ZXIgcmVuZGVyZXIuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPnxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PiksaW1wb3J0KFwiLi4vcmVuZGVyLmpzXCIpLlN0YXRlKTogdm9pZH1cbiAqIFJlbmRlckZ1bmN0aW9uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd8aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fEdlb21ldHJ5RnVuY3Rpb259IFtnZW9tZXRyeV0gRmVhdHVyZSBwcm9wZXJ0eSBvciBnZW9tZXRyeVxuICogb3IgZnVuY3Rpb24gcmV0dXJuaW5nIGEgZ2VvbWV0cnkgdG8gcmVuZGVyIGZvciB0aGlzIHN0eWxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ZpbGwuanNcIikuZGVmYXVsdH0gW2ZpbGxdIEZpbGwgc3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gW2ltYWdlXSBJbWFnZSBzdHlsZS5cbiAqIEBwcm9wZXJ0eSB7UmVuZGVyRnVuY3Rpb259IFtyZW5kZXJlcl0gQ3VzdG9tIHJlbmRlcmVyLiBXaGVuIGNvbmZpZ3VyZWQsIGBmaWxsYCwgYHN0cm9rZWAgYW5kIGBpbWFnZWAgd2lsbCBiZVxuICogaWdub3JlZCwgYW5kIHRoZSBwcm92aWRlZCBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIGVhY2ggcmVuZGVyIGZyYW1lIGZvciBlYWNoIGdlb21ldHJ5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBbc3Ryb2tlXSBTdHJva2Ugc3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVGV4dC5qc1wiKS5kZWZhdWx0fSBbdGV4dF0gVGV4dCBzdHlsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBaIGluZGV4LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENvbnRhaW5lciBmb3IgdmVjdG9yIGZlYXR1cmUgcmVuZGVyaW5nIHN0eWxlcy4gQW55IGNoYW5nZXMgbWFkZSB0byB0aGUgc3R5bGVcbiAqIG9yIGl0cyBjaGlsZHJlbiB0aHJvdWdoIGBzZXQqKClgIG1ldGhvZHMgd2lsbCBub3QgdGFrZSBlZmZlY3QgdW50aWwgdGhlXG4gKiBmZWF0dXJlIG9yIGxheWVyIHRoYXQgdXNlcyB0aGUgc3R5bGUgaXMgcmUtcmVuZGVyZWQuXG4gKlxuICogIyMgRmVhdHVyZSBzdHlsZXNcbiAqXG4gKiBJZiBubyBzdHlsZSBpcyBkZWZpbmVkLCB0aGUgZm9sbG93aW5nIGRlZmF1bHQgc3R5bGUgaXMgdXNlZDpcbiAqIGBgYGpzXG4gKiAgaW1wb3J0IHtGaWxsLCBTdHJva2UsIENpcmNsZSwgU3R5bGV9IGZyb20gJ29sL3N0eWxlJztcbiAqXG4gKiAgdmFyIGZpbGwgPSBuZXcgRmlsbCh7XG4gKiAgICBjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMC40KSdcbiAqICB9KTtcbiAqICB2YXIgc3Ryb2tlID0gbmV3IFN0cm9rZSh7XG4gKiAgICBjb2xvcjogJyMzMzk5Q0MnLFxuICogICAgd2lkdGg6IDEuMjVcbiAqICB9KTtcbiAqICB2YXIgc3R5bGVzID0gW1xuICogICAgbmV3IFN0eWxlKHtcbiAqICAgICAgaW1hZ2U6IG5ldyBDaXJjbGUoe1xuICogICAgICAgIGZpbGw6IGZpbGwsXG4gKiAgICAgICAgc3Ryb2tlOiBzdHJva2UsXG4gKiAgICAgICAgcmFkaXVzOiA1XG4gKiAgICAgIH0pLFxuICogICAgICBmaWxsOiBmaWxsLFxuICogICAgICBzdHJva2U6IHN0cm9rZVxuICogICAgfSlcbiAqICBdO1xuICogYGBgXG4gKlxuICogQSBzZXBhcmF0ZSBlZGl0aW5nIHN0eWxlIGhhcyB0aGUgZm9sbG93aW5nIGRlZmF1bHRzOlxuICogYGBganNcbiAqICBpbXBvcnQge0ZpbGwsIFN0cm9rZSwgQ2lyY2xlLCBTdHlsZX0gZnJvbSAnb2wvc3R5bGUnO1xuICogIGltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnb2wvZ2VvbS9HZW9tZXRyeVR5cGUnO1xuICpcbiAqICB2YXIgd2hpdGUgPSBbMjU1LCAyNTUsIDI1NSwgMV07XG4gKiAgdmFyIGJsdWUgPSBbMCwgMTUzLCAyNTUsIDFdO1xuICogIHZhciB3aWR0aCA9IDM7XG4gKiAgc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0xZR09OXSA9IFtcbiAqICAgIG5ldyBTdHlsZSh7XG4gKiAgICAgIGZpbGw6IG5ldyBGaWxsKHtcbiAqICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuNV1cbiAqICAgICAgfSlcbiAqICAgIH0pXG4gKiAgXTtcbiAqICBzdHlsZXNbR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT05dID1cbiAqICAgICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0xZR09OXTtcbiAqICBzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXSA9IFtcbiAqICAgIG5ldyBTdHlsZSh7XG4gKiAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gKiAgICAgICAgY29sb3I6IHdoaXRlLFxuICogICAgICAgIHdpZHRoOiB3aWR0aCArIDJcbiAqICAgICAgfSlcbiAqICAgIH0pLFxuICogICAgbmV3IFN0eWxlKHtcbiAqICAgICAgc3Ryb2tlOiBuZXcgU3Ryb2tlKHtcbiAqICAgICAgICBjb2xvcjogYmx1ZSxcbiAqICAgICAgICB3aWR0aDogd2lkdGhcbiAqICAgICAgfSlcbiAqICAgIH0pXG4gKiAgXTtcbiAqICBzdHlsZXNbR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HXSA9XG4gKiAgICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuTElORV9TVFJJTkddO1xuICogIHN0eWxlc1tHZW9tZXRyeVR5cGUuUE9JTlRdID0gW1xuICogICAgbmV3IFN0eWxlKHtcbiAqICAgICAgaW1hZ2U6IG5ldyBDaXJjbGUoe1xuICogICAgICAgIHJhZGl1czogd2lkdGggKiAyLFxuICogICAgICAgIGZpbGw6IG5ldyBGaWxsKHtcbiAqICAgICAgICAgIGNvbG9yOiBibHVlXG4gKiAgICAgICAgfSksXG4gKiAgICAgICAgc3Ryb2tlOiBuZXcgU3Ryb2tlKHtcbiAqICAgICAgICAgIGNvbG9yOiB3aGl0ZSxcbiAqICAgICAgICAgIHdpZHRoOiB3aWR0aCAvIDJcbiAqICAgICAgICB9KVxuICogICAgICB9KSxcbiAqICAgICAgekluZGV4OiBJbmZpbml0eVxuICogICAgfSlcbiAqICBdO1xuICogIHN0eWxlc1tHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlRdID1cbiAqICAgICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0lOVF07XG4gKiAgc3R5bGVzW0dlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OXSA9XG4gKiAgICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuUE9MWUdPTl0uY29uY2F0KFxuICogICAgICAgICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5MSU5FX1NUUklOR10sXG4gKiAgICAgICAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLlBPSU5UXVxuICogICAgICApO1xuICogYGBgXG4gKlxuICogQGFwaVxuICovXG52YXIgU3R5bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgU3R5bGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdHlsZShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ3xpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8R2VvbWV0cnlGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshR2VvbWV0cnlGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2VvbWV0cnlGdW5jdGlvbl8gPSBkZWZhdWx0R2VvbWV0cnlGdW5jdGlvbjtcbiAgICAgICAgaWYgKG9wdGlvbnMuZ2VvbWV0cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRHZW9tZXRyeShvcHRpb25zLmdlb21ldHJ5KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWxsXyA9IG9wdGlvbnMuZmlsbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5maWxsIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ltYWdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmltYWdlXyA9IG9wdGlvbnMuaW1hZ2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW1hZ2UgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1JlbmRlckZ1bmN0aW9ufG51bGx9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbmRlcmVyXyA9IG9wdGlvbnMucmVuZGVyZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucmVuZGVyZXIgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vU3Ryb2tlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0cm9rZV8gPSBvcHRpb25zLnN0cm9rZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zdHJva2UgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVGV4dC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZXh0XyA9IG9wdGlvbnMudGV4dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50ZXh0IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy56SW5kZXhfID0gb3B0aW9ucy56SW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb25lcyB0aGUgc3R5bGUuXG4gICAgICogQHJldHVybiB7U3R5bGV9IFRoZSBjbG9uZWQgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeSgpO1xuICAgICAgICBpZiAoZ2VvbWV0cnkgJiYgdHlwZW9mIGdlb21ldHJ5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5jbG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU3R5bGUoe1xuICAgICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgICAgICAgZmlsbDogdGhpcy5nZXRGaWxsKCkgPyB0aGlzLmdldEZpbGwoKS5jbG9uZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaW1hZ2U6IHRoaXMuZ2V0SW1hZ2UoKSA/IHRoaXMuZ2V0SW1hZ2UoKS5jbG9uZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLmdldFN0cm9rZSgpID8gdGhpcy5nZXRTdHJva2UoKS5jbG9uZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRUZXh0KCkgPyB0aGlzLmdldFRleHQoKS5jbG9uZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgekluZGV4OiB0aGlzLmdldFpJbmRleCgpLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VzdG9tIHJlbmRlcmVyIGZ1bmN0aW9uIHRoYXQgd2FzIGNvbmZpZ3VyZWQgd2l0aFxuICAgICAqIHtAbGluayAjc2V0UmVuZGVyZXJ9IG9yIHRoZSBgcmVuZGVyZXJgIGNvbnN0cnVjdG9yIG9wdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtSZW5kZXJGdW5jdGlvbnxudWxsfSBDdXN0b20gcmVuZGVyZXIgZnVuY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhIGN1c3RvbSByZW5kZXJlciBmdW5jdGlvbiBmb3IgdGhpcyBzdHlsZS4gV2hlbiBzZXQsIGBmaWxsYCwgYHN0cm9rZWBcbiAgICAgKiBhbmQgYGltYWdlYCBvcHRpb25zIG9mIHRoZSBzdHlsZSB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICogQHBhcmFtIHtSZW5kZXJGdW5jdGlvbnxudWxsfSByZW5kZXJlciBDdXN0b20gcmVuZGVyZXIgZnVuY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5zZXRSZW5kZXJlciA9IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB0aGlzLnJlbmRlcmVyXyA9IHJlbmRlcmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBnZW9tZXRyeSB0byBiZSByZW5kZXJlZC5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fEdlb21ldHJ5RnVuY3Rpb259XG4gICAgICogRmVhdHVyZSBwcm9wZXJ0eSBvciBnZW9tZXRyeSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGdlb21ldHJ5IHRoYXQgd2lsbFxuICAgICAqIGJlIHJlbmRlcmVkIHdpdGggdGhpcyBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3R5bGUucHJvdG90eXBlLmdldEdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW9tZXRyeV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZ1bmN0aW9uIHVzZWQgdG8gZ2VuZXJhdGUgYSBnZW9tZXRyeSBmb3IgcmVuZGVyaW5nLlxuICAgICAqIEByZXR1cm4geyFHZW9tZXRyeUZ1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aXRoIGEgZmVhdHVyZVxuICAgICAqIGFuZCByZXR1cm5zIHRoZSBnZW9tZXRyeSB0byByZW5kZXIgaW5zdGVhZCBvZiB0aGUgZmVhdHVyZSdzIGdlb21ldHJ5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnlGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnlGdW5jdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZpbGwgc3R5bGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9GaWxsLmpzXCIpLmRlZmF1bHR9IEZpbGwgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5nZXRGaWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWxsXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZmlsbCBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRmlsbC5qc1wiKS5kZWZhdWx0fSBmaWxsIEZpbGwgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5zZXRGaWxsID0gZnVuY3Rpb24gKGZpbGwpIHtcbiAgICAgICAgdGhpcy5maWxsXyA9IGZpbGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGltYWdlIHN0eWxlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gSW1hZ2Ugc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBpbWFnZSBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gaW1hZ2UgSW1hZ2Ugc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5zZXRJbWFnZSA9IGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB0aGlzLmltYWdlXyA9IGltYWdlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzdHJva2Ugc3R5bGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9TdHJva2UuanNcIikuZGVmYXVsdH0gU3Ryb2tlIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuZ2V0U3Ryb2tlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJva2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzdHJva2Ugc3R5bGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBzdHJva2UgU3Ryb2tlIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTdHlsZS5wcm90b3R5cGUuc2V0U3Ryb2tlID0gZnVuY3Rpb24gKHN0cm9rZSkge1xuICAgICAgICB0aGlzLnN0cm9rZV8gPSBzdHJva2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRleHQgc3R5bGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9UZXh0LmpzXCIpLmRlZmF1bHR9IFRleHQgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGV4dCBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGV4dC5qc1wiKS5kZWZhdWx0fSB0ZXh0IFRleHQgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5zZXRUZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgdGhpcy50ZXh0XyA9IHRleHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHotaW5kZXggZm9yIHRoZSBzdHlsZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBaSW5kZXguXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFN0eWxlLnByb3RvdHlwZS5nZXRaSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnpJbmRleF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYSBnZW9tZXRyeSB0aGF0IGlzIHJlbmRlcmVkIGluc3RlYWQgb2YgdGhlIGZlYXR1cmUncyBnZW9tZXRyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfGltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxHZW9tZXRyeUZ1bmN0aW9ufSBnZW9tZXRyeVxuICAgICAqICAgICBGZWF0dXJlIHByb3BlcnR5IG9yIGdlb21ldHJ5IG9yIGZ1bmN0aW9uIHJldHVybmluZyBhIGdlb21ldHJ5IHRvIHJlbmRlclxuICAgICAqICAgICBmb3IgdGhpcyBzdHlsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3R5bGUucHJvdG90eXBlLnNldEdlb21ldHJ5ID0gZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2VvbWV0cnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlGdW5jdGlvbl8gPSBnZW9tZXRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgZ2VvbWV0cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChmZWF0dXJlLmdldChnZW9tZXRyeSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlGdW5jdGlvbl8gPSBkZWZhdWx0R2VvbWV0cnlGdW5jdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnZW9tZXRyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZW9tZXRyeV8gPSBnZW9tZXRyeTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgei1pbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gekluZGV4IFpJbmRleC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU3R5bGUucHJvdG90eXBlLnNldFpJbmRleCA9IGZ1bmN0aW9uICh6SW5kZXgpIHtcbiAgICAgICAgdGhpcy56SW5kZXhfID0gekluZGV4O1xuICAgIH07XG4gICAgcmV0dXJuIFN0eWxlO1xufSgpKTtcbi8qKlxuICogQ29udmVydCB0aGUgcHJvdmlkZWQgb2JqZWN0IGludG8gYSBzdHlsZSBmdW5jdGlvbi4gIEZ1bmN0aW9ucyBwYXNzZWQgdGhyb3VnaFxuICogdW5jaGFuZ2VkLiAgQXJyYXlzIG9mIFN0eWxlIG9yIHNpbmdsZSBzdHlsZSBvYmplY3RzIHdyYXBwZWQgaW4gYVxuICogbmV3IHN0eWxlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtTdHlsZUZ1bmN0aW9ufEFycmF5PFN0eWxlPnxTdHlsZX0gb2JqXG4gKiAgICAgQSBzdHlsZSBmdW5jdGlvbiwgYSBzaW5nbGUgc3R5bGUsIG9yIGFuIGFycmF5IG9mIHN0eWxlcy5cbiAqIEByZXR1cm4ge1N0eWxlRnVuY3Rpb259IEEgc3R5bGUgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Z1bmN0aW9uKG9iaikge1xuICAgIHZhciBzdHlsZUZ1bmN0aW9uO1xuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHN0eWxlRnVuY3Rpb24gPSBvYmo7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFN0eWxlPn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBzdHlsZXNfMTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgc3R5bGVzXzEgPSBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvYmopLmdldFpJbmRleCkgPT09ICdmdW5jdGlvbicsIDQxKTsgLy8gRXhwZWN0ZWQgYW4gYFN0eWxlYCBvciBhbiBhcnJheSBvZiBgU3R5bGVgXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSAvKiogQHR5cGUge1N0eWxlfSAqLyAob2JqKTtcbiAgICAgICAgICAgIHN0eWxlc18xID0gW3N0eWxlXTtcbiAgICAgICAgfVxuICAgICAgICBzdHlsZUZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0eWxlc18xO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gc3R5bGVGdW5jdGlvbjtcbn1cbi8qKlxuICogQHR5cGUge0FycmF5PFN0eWxlPn1cbiAqL1xudmFyIGRlZmF1bHRTdHlsZXMgPSBudWxsO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxTdHlsZT59IFN0eWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVmYXVsdFN0eWxlKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgICAvLyBXZSBkb24ndCB1c2UgYW4gaW1tZWRpYXRlbHktaW52b2tlZCBmdW5jdGlvblxuICAgIC8vIGFuZCBhIGNsb3N1cmUgc28gd2UgZG9uJ3QgZ2V0IGFuIGVycm9yIGF0IHNjcmlwdCBldmFsdWF0aW9uIHRpbWUgaW5cbiAgICAvLyBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IENhbnZhcy4gKGltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLkNpcmNsZVN0eWxlIGRvZXNcbiAgICAvLyBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhdCBjb25zdHJ1Y3Rpb24gdGltZSwgd2hpY2ggd2lsbCBjYXVzZSBhbi5lcnJvclxuICAgIC8vIGluIHN1Y2ggYnJvd3NlcnMuKVxuICAgIGlmICghZGVmYXVsdFN0eWxlcykge1xuICAgICAgICB2YXIgZmlsbCA9IG5ldyBGaWxsKHtcbiAgICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwLjQpJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzdHJva2UgPSBuZXcgU3Ryb2tlKHtcbiAgICAgICAgICAgIGNvbG9yOiAnIzMzOTlDQycsXG4gICAgICAgICAgICB3aWR0aDogMS4yNSxcbiAgICAgICAgfSk7XG4gICAgICAgIGRlZmF1bHRTdHlsZXMgPSBbXG4gICAgICAgICAgICBuZXcgU3R5bGUoe1xuICAgICAgICAgICAgICAgIGltYWdlOiBuZXcgQ2lyY2xlU3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICBmaWxsOiBmaWxsLFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHN0cm9rZSxcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiA1LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGZpbGw6IGZpbGwsXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBzdHJva2UsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRTdHlsZXM7XG59XG4vKipcbiAqIERlZmF1bHQgc3R5bGVzIGZvciBlZGl0aW5nIGZlYXR1cmVzLlxuICogQHJldHVybiB7T2JqZWN0PGltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHQsIEFycmF5PFN0eWxlPj59IFN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWRpdGluZ1N0eWxlKCkge1xuICAgIC8qKiBAdHlwZSB7T2JqZWN0PGltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHQsIEFycmF5PFN0eWxlPj59ICovXG4gICAgdmFyIHN0eWxlcyA9IHt9O1xuICAgIHZhciB3aGl0ZSA9IFsyNTUsIDI1NSwgMjU1LCAxXTtcbiAgICB2YXIgYmx1ZSA9IFswLCAxNTMsIDI1NSwgMV07XG4gICAgdmFyIHdpZHRoID0gMztcbiAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLlBPTFlHT05dID0gW1xuICAgICAgICBuZXcgU3R5bGUoe1xuICAgICAgICAgICAgZmlsbDogbmV3IEZpbGwoe1xuICAgICAgICAgICAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMC41XSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICBdO1xuICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTl0gPSBzdHlsZXNbR2VvbWV0cnlUeXBlLlBPTFlHT05dO1xuICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuTElORV9TVFJJTkddID0gW1xuICAgICAgICBuZXcgU3R5bGUoe1xuICAgICAgICAgICAgc3Ryb2tlOiBuZXcgU3Ryb2tlKHtcbiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoICsgMixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFN0eWxlKHtcbiAgICAgICAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gICAgICAgICAgICAgICAgY29sb3I6IGJsdWUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgIF07XG4gICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklOR10gPSBzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXTtcbiAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLkNJUkNMRV0gPSBzdHlsZXNbR2VvbWV0cnlUeXBlLlBPTFlHT05dLmNvbmNhdChzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXSk7XG4gICAgc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0lOVF0gPSBbXG4gICAgICAgIG5ldyBTdHlsZSh7XG4gICAgICAgICAgICBpbWFnZTogbmV3IENpcmNsZVN0eWxlKHtcbiAgICAgICAgICAgICAgICByYWRpdXM6IHdpZHRoICogMixcbiAgICAgICAgICAgICAgICBmaWxsOiBuZXcgRmlsbCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBibHVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoIC8gMixcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgekluZGV4OiBJbmZpbml0eSxcbiAgICAgICAgfSksXG4gICAgXTtcbiAgICBzdHlsZXNbR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UXSA9IHN0eWxlc1tHZW9tZXRyeVR5cGUuUE9JTlRdO1xuICAgIHN0eWxlc1tHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTl0gPSBzdHlsZXNbR2VvbWV0cnlUeXBlLlBPTFlHT05dLmNvbmNhdChzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXSwgc3R5bGVzW0dlb21ldHJ5VHlwZS5QT0lOVF0pO1xuICAgIHJldHVybiBzdHlsZXM7XG59XG4vKipcbiAqIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdpdGggYSBmZWF0dXJlIGFuZCByZXR1cm5zIGl0cyBkZWZhdWx0IGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUgdG8gZ2V0IHRoZSBnZW9tZXRyeSBmb3IuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IEdlb21ldHJ5IHRvIHJlbmRlci5cbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEdlb21ldHJ5RnVuY3Rpb24oZmVhdHVyZSkge1xuICAgIHJldHVybiBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG59XG5leHBvcnQgZGVmYXVsdCBTdHlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0eWxlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VWZWN0b3JcbiAqL1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGNyZWF0ZURlZmF1bHRTdHlsZSwgdG9GdW5jdGlvbiBhcyB0b1N0eWxlRnVuY3Rpb24sIH0gZnJvbSAnLi4vc3R5bGUvU3R5bGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbGF5ZXInXSBBIENTUyBjbGFzcyBuYW1lIHRvIHNldCB0byB0aGUgbGF5ZXIgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9yZW5kZXIuanNcIikuT3JkZXJGdW5jdGlvbn0gW3JlbmRlck9yZGVyXSBSZW5kZXIgb3JkZXIuIEZ1bmN0aW9uIHRvIGJlIHVzZWQgd2hlbiBzb3J0aW5nXG4gKiBmZWF0dXJlcyBiZWZvcmUgcmVuZGVyaW5nLiBCeSBkZWZhdWx0IGZlYXR1cmVzIGFyZSBkcmF3biBpbiB0aGUgb3JkZXIgdGhhdCB0aGV5IGFyZSBjcmVhdGVkLiBVc2VcbiAqIGBudWxsYCB0byBhdm9pZCB0aGUgc29ydCwgYnV0IGdldCBhbiB1bmRlZmluZWQgZHJhdyBvcmRlci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVuZGVyQnVmZmVyPTEwMF0gVGhlIGJ1ZmZlciBpbiBwaXhlbHMgYXJvdW5kIHRoZSB2aWV3cG9ydCBleHRlbnQgdXNlZCBieSB0aGVcbiAqIHJlbmRlcmVyIHdoZW4gZ2V0dGluZyBmZWF0dXJlcyBmcm9tIHRoZSB2ZWN0b3Igc291cmNlIGZvciB0aGUgcmVuZGVyaW5nIG9yIGhpdC1kZXRlY3Rpb24uXG4gKiBSZWNvbW1lbmRlZCB2YWx1ZTogdGhlIHNpemUgb2YgdGhlIGxhcmdlc3Qgc3ltYm9sLCBsaW5lIHdpZHRoIG9yIGxhYmVsLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yLmpzXCIpLmRlZmF1bHR9IFtzb3VyY2VdIFNvdXJjZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IFttYXBdIFNldHMgdGhlIGxheWVyIGFzIG92ZXJsYXkgb24gYSBtYXAuIFRoZSBtYXAgd2lsbCBub3QgbWFuYWdlXG4gKiB0aGlzIGxheWVyIGluIGl0cyBsYXllcnMgY29sbGVjdGlvbiwgYW5kIHRoZSBsYXllciB3aWxsIGJlIHJlbmRlcmVkIG9uIHRvcC4gVGhpcyBpcyB1c2VmdWwgZm9yXG4gKiB0ZW1wb3JhcnkgbGF5ZXJzLiBUaGUgc3RhbmRhcmQgd2F5IHRvIGFkZCBhIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCBpcyB0b1xuICogdXNlIHtAbGluayBtb2R1bGU6b2wvTWFwI2FkZExheWVyfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RlY2x1dHRlcj1mYWxzZV0gRGVjbHV0dGVyIGltYWdlcyBhbmQgdGV4dC4gRGVjbHV0dGVyaW5nIGlzIGFwcGxpZWQgdG8gYWxsXG4gKiBpbWFnZSBhbmQgdGV4dCBzdHlsZXMgb2YgYWxsIFZlY3RvciBhbmQgVmVjdG9yVGlsZSBsYXllcnMgdGhhdCBoYXZlIHNldCB0aGlzIHRvIGB0cnVlYC4gVGhlIHByaW9yaXR5XG4gKiBpcyBkZWZpbmVkIGJ5IHRoZSB6LWluZGV4IG9mIHRoZSBsYXllciwgdGhlIGB6SW5kZXhgIG9mIHRoZSBzdHlsZSBhbmQgdGhlIHJlbmRlciBvcmRlciBvZiBmZWF0dXJlcy5cbiAqIEhpZ2hlciB6LWluZGV4IG1lYW5zIGhpZ2hlciBwcmlvcml0eS4gV2l0aGluIHRoZSBzYW1lIHotaW5kZXgsIGEgZmVhdHVyZSByZW5kZXJlZCBiZWZvcmUgYW5vdGhlciBoYXNcbiAqIGhpZ2hlciBwcmlvcml0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfG51bGx9IFtzdHlsZV0gTGF5ZXIgc3R5bGUuIFdoZW4gc2V0IHRvIGBudWxsYCwgb25seVxuICogZmVhdHVyZXMgdGhhdCBoYXZlIHRoZWlyIG93biBzdHlsZSB3aWxsIGJlIHJlbmRlcmVkLiBTZWUge0BsaW5rIG1vZHVsZTpvbC9zdHlsZX0gZm9yIGRlZmF1bHQgc3R5bGVcbiAqIHdoaWNoIHdpbGwgYmUgdXNlZCBpZiB0aGlzIGlzIG5vdCBzZXQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1cGRhdGVXaGlsZUFuaW1hdGluZz1mYWxzZV0gV2hlbiBzZXQgdG8gYHRydWVgLCBmZWF0dXJlIGJhdGNoZXMgd2lsbFxuICogYmUgcmVjcmVhdGVkIGR1cmluZyBhbmltYXRpb25zLiBUaGlzIG1lYW5zIHRoYXQgbm8gdmVjdG9ycyB3aWxsIGJlIHNob3duIGNsaXBwZWQsIGJ1dCB0aGVcbiAqIHNldHRpbmcgd2lsbCBoYXZlIGEgcGVyZm9ybWFuY2UgaW1wYWN0IGZvciBsYXJnZSBhbW91bnRzIG9mIHZlY3RvciBkYXRhLiBXaGVuIHNldCB0byBgZmFsc2VgLFxuICogYmF0Y2hlcyB3aWxsIGJlIHJlY3JlYXRlZCB3aGVuIG5vIGFuaW1hdGlvbiBpcyBhY3RpdmUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1cGRhdGVXaGlsZUludGVyYWN0aW5nPWZhbHNlXSBXaGVuIHNldCB0byBgdHJ1ZWAsIGZlYXR1cmUgYmF0Y2hlcyB3aWxsXG4gKiBiZSByZWNyZWF0ZWQgZHVyaW5nIGludGVyYWN0aW9ucy4gU2VlIGFsc28gYHVwZGF0ZVdoaWxlQW5pbWF0aW5nYC5cbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmFyIFByb3BlcnR5ID0ge1xuICAgIFJFTkRFUl9PUkRFUjogJ3JlbmRlck9yZGVyJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFZlY3RvciBkYXRhIHRoYXQgaXMgcmVuZGVyZWQgY2xpZW50LXNpZGUuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vc291cmNlL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gVmVjdG9yU291cmNlVHlwZVxuICogQGV4dGVuZHMge0xheWVyPFZlY3RvclNvdXJjZVR5cGU+fVxuICogQGFwaVxuICovXG52YXIgQmFzZVZlY3RvckxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlVmVjdG9yTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlVmVjdG9yTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBiYXNlT3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5zdHlsZTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnJlbmRlckJ1ZmZlcjtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnVwZGF0ZVdoaWxlQW5pbWF0aW5nO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMudXBkYXRlV2hpbGVJbnRlcmFjdGluZztcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVjbHV0dGVyXyA9XG4gICAgICAgICAgICBvcHRpb25zLmRlY2x1dHRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kZWNsdXR0ZXIgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJCdWZmZXJfID1cbiAgICAgICAgICAgIG9wdGlvbnMucmVuZGVyQnVmZmVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJlbmRlckJ1ZmZlciA6IDEwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZXIgcHJvdmlkZWQgc3R5bGUuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdHlsZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3R5bGUgZnVuY3Rpb24gZm9yIHVzZSB3aXRoaW4gdGhlIGxpYnJhcnkuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0eWxlRnVuY3Rpb25fID0gdW5kZWZpbmVkO1xuICAgICAgICBfdGhpcy5zZXRTdHlsZShvcHRpb25zLnN0eWxlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXBkYXRlV2hpbGVBbmltYXRpbmdfID1cbiAgICAgICAgICAgIG9wdGlvbnMudXBkYXRlV2hpbGVBbmltYXRpbmcgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy51cGRhdGVXaGlsZUFuaW1hdGluZ1xuICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVwZGF0ZVdoaWxlSW50ZXJhY3RpbmdfID1cbiAgICAgICAgICAgIG9wdGlvbnMudXBkYXRlV2hpbGVJbnRlcmFjdGluZyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnVwZGF0ZVdoaWxlSW50ZXJhY3RpbmdcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IERlY2x1dHRlci5cbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldERlY2x1dHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjbHV0dGVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdG9wbW9zdCBmZWF0dXJlIHRoYXQgaW50ZXJzZWN0cyB0aGUgZ2l2ZW4gcGl4ZWwgb24gdGhlIHZpZXdwb3J0LiBSZXR1cm5zIGEgcHJvbWlzZVxuICAgICAqIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbiBhcnJheSBvZiBmZWF0dXJlcy4gVGhlIGFycmF5IHdpbGwgZWl0aGVyIGNvbnRhaW4gdGhlIHRvcG1vc3QgZmVhdHVyZVxuICAgICAqIHdoZW4gYSBoaXQgd2FzIGRldGVjdGVkLCBvciBpdCB3aWxsIGJlIGVtcHR5LlxuICAgICAqXG4gICAgICogVGhlIGhpdCBkZXRlY3Rpb24gYWxnb3JpdGhtIHVzZWQgZm9yIHRoaXMgbWV0aG9kIGlzIG9wdGltaXplZCBmb3IgcGVyZm9ybWFuY2UsIGJ1dCBpcyBsZXNzXG4gICAgICogYWNjdXJhdGUgdGhhbiB0aGUgb25lIHVzZWQgaW4ge0BsaW5rIGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0I2dldEZlYXR1cmVzQXRQaXhlbH06IFRleHRcbiAgICAgKiBpcyBub3QgY29uc2lkZXJlZCwgYW5kIGljb25zIGFyZSBvbmx5IHJlcHJlc2VudGVkIGJ5IHRoZWlyIGJvdW5kaW5nIGJveCBpbnN0ZWFkIG9mIHRoZSBleGFjdFxuICAgICAqIGltYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlXCIpLmRlZmF1bHQ+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMuY2FsbCh0aGlzLCBwaXhlbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZW5kZXIgYnVmZmVyLlxuICAgICAqL1xuICAgIEJhc2VWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0UmVuZGVyQnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJCdWZmZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQpOiBudW1iZXJ8bnVsbHx1bmRlZmluZWR9IFJlbmRlclxuICAgICAqICAgICBvcmRlci5cbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlck9yZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIuanNcIikuT3JkZXJGdW5jdGlvbnxudWxsfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlJFTkRFUl9PUkRFUikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzdHlsZSBmb3IgZmVhdHVyZXMuICBUaGlzIHJldHVybnMgd2hhdGV2ZXIgd2FzIHBhc3NlZCB0byB0aGUgYHN0eWxlYFxuICAgICAqIG9wdGlvbiBhdCBjb25zdHJ1Y3Rpb24gb3IgdG8gdGhlIGBzZXRTdHlsZWAgbWV0aG9kLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZXxudWxsfHVuZGVmaW5lZH0gTGF5ZXIgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0U3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3R5bGUgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbnx1bmRlZmluZWR9IExheWVyIHN0eWxlIGZ1bmN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFN0eWxlRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlRnVuY3Rpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcmVuZGVyZWQgbGF5ZXIgc2hvdWxkIGJlIHVwZGF0ZWQgd2hpbGVcbiAgICAgKiAgICAgYW5pbWF0aW5nLlxuICAgICAqL1xuICAgIEJhc2VWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0VXBkYXRlV2hpbGVBbmltYXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVdoaWxlQW5pbWF0aW5nXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHJlbmRlcmVkIGxheWVyIHNob3VsZCBiZSB1cGRhdGVkIHdoaWxlXG4gICAgICogICAgIGludGVyYWN0aW5nLlxuICAgICAqL1xuICAgIEJhc2VWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0VXBkYXRlV2hpbGVJbnRlcmFjdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlV2hpbGVJbnRlcmFjdGluZ187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci5qc1wiKS5PcmRlckZ1bmN0aW9ufG51bGx8dW5kZWZpbmVkfSByZW5kZXJPcmRlclxuICAgICAqICAgICBSZW5kZXIgb3JkZXIuXG4gICAgICovXG4gICAgQmFzZVZlY3RvckxheWVyLnByb3RvdHlwZS5zZXRSZW5kZXJPcmRlciA9IGZ1bmN0aW9uIChyZW5kZXJPcmRlcikge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5SRU5ERVJfT1JERVIsIHJlbmRlck9yZGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3R5bGUgZm9yIGZlYXR1cmVzLiAgVGhpcyBjYW4gYmUgYSBzaW5nbGUgc3R5bGUgb2JqZWN0LCBhbiBhcnJheVxuICAgICAqIG9mIHN0eWxlcywgb3IgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgZmVhdHVyZSBhbmQgcmVzb2x1dGlvbiBhbmQgcmV0dXJuc1xuICAgICAqIGFuIGFycmF5IG9mIHN0eWxlcy4gSWYgc2V0IHRvIGBudWxsYCwgdGhlIGxheWVyIGhhcyBubyBzdHlsZSAoYSBgbnVsbGAgc3R5bGUpLFxuICAgICAqIHNvIG9ubHkgZmVhdHVyZXMgdGhhdCBoYXZlIHRoZWlyIG93biBzdHlsZXMgd2lsbCBiZSByZW5kZXJlZCBpbiB0aGUgbGF5ZXIuIENhbGxcbiAgICAgKiBgc2V0U3R5bGUoKWAgd2l0aG91dCBhcmd1bWVudHMgdG8gcmVzZXQgdG8gdGhlIGRlZmF1bHQgc3R5bGUuIFNlZVxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvc3R5bGV9IGZvciBpbmZvcm1hdGlvbiBvbiB0aGUgZGVmYXVsdCBzdHlsZS5cbiAgICAgKiBAcGFyYW0geyhpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V8bnVsbCk9fSBvcHRfc3R5bGUgTGF5ZXIgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VWZWN0b3JMYXllci5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiAob3B0X3N0eWxlKSB7XG4gICAgICAgIHRoaXMuc3R5bGVfID0gb3B0X3N0eWxlICE9PSB1bmRlZmluZWQgPyBvcHRfc3R5bGUgOiBjcmVhdGVEZWZhdWx0U3R5bGU7XG4gICAgICAgIHRoaXMuc3R5bGVGdW5jdGlvbl8gPVxuICAgICAgICAgICAgb3B0X3N0eWxlID09PSBudWxsID8gdW5kZWZpbmVkIDogdG9TdHlsZUZ1bmN0aW9uKHRoaXMuc3R5bGVfKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZVZlY3RvckxheWVyO1xufShMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgQmFzZVZlY3RvckxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZVZlY3Rvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9JbnN0cnVjdGlvblxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbnZhciBJbnN0cnVjdGlvbiA9IHtcbiAgICBCRUdJTl9HRU9NRVRSWTogMCxcbiAgICBCRUdJTl9QQVRIOiAxLFxuICAgIENJUkNMRTogMixcbiAgICBDTE9TRV9QQVRIOiAzLFxuICAgIENVU1RPTTogNCxcbiAgICBEUkFXX0NIQVJTOiA1LFxuICAgIERSQVdfSU1BR0U6IDYsXG4gICAgRU5EX0dFT01FVFJZOiA3LFxuICAgIEZJTEw6IDgsXG4gICAgTU9WRV9UT19MSU5FX1RPOiA5LFxuICAgIFNFVF9GSUxMX1NUWUxFOiAxMCxcbiAgICBTRVRfU1RST0tFX1NUWUxFOiAxMSxcbiAgICBTVFJPS0U6IDEyLFxufTtcbi8qKlxuICogQHR5cGUge0FycmF5PEluc3RydWN0aW9uPn1cbiAqL1xuZXhwb3J0IHZhciBmaWxsSW5zdHJ1Y3Rpb24gPSBbSW5zdHJ1Y3Rpb24uRklMTF07XG4vKipcbiAqIEB0eXBlIHtBcnJheTxJbnN0cnVjdGlvbj59XG4gKi9cbmV4cG9ydCB2YXIgc3Ryb2tlSW5zdHJ1Y3Rpb24gPSBbSW5zdHJ1Y3Rpb24uU1RST0tFXTtcbi8qKlxuICogQHR5cGUge0FycmF5PEluc3RydWN0aW9uPn1cbiAqL1xuZXhwb3J0IHZhciBiZWdpblBhdGhJbnN0cnVjdGlvbiA9IFtJbnN0cnVjdGlvbi5CRUdJTl9QQVRIXTtcbi8qKlxuICogQHR5cGUge0FycmF5PEluc3RydWN0aW9uPn1cbiAqL1xuZXhwb3J0IHZhciBjbG9zZVBhdGhJbnN0cnVjdGlvbiA9IFtJbnN0cnVjdGlvbi5DTE9TRV9QQVRIXTtcbmV4cG9ydCBkZWZhdWx0IEluc3RydWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5zdHJ1Y3Rpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9WZWN0b3JDb250ZXh0XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ29udGV4dCBmb3IgZHJhd2luZyBnZW9tZXRyaWVzLiAgQSB2ZWN0b3IgY29udGV4dCBpcyBhdmFpbGFibGUgb24gcmVuZGVyXG4gKiBldmVudHMgYW5kIGRvZXMgbm90IG5lZWQgdG8gYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuXG4gKiBAYXBpXG4gKi9cbnZhciBWZWN0b3JDb250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZlY3RvckNvbnRleHQoKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIGdlb21ldHJ5IHdpdGggYSBjdXN0b20gcmVuZGVyZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVuZGVyZXIgUmVuZGVyZXIuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd0N1c3RvbSA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgZmVhdHVyZSwgcmVuZGVyZXIpIHsgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBnZW9tZXRyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkgdG8gcmVuZGVyLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdHZW9tZXRyeSA9IGZ1bmN0aW9uIChnZW9tZXRyeSkgeyB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmVuZGVyaW5nIHN0eWxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBUaGUgcmVuZGVyaW5nIHN0eWxlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gKHN0eWxlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSBjaXJjbGVHZW9tZXRyeSBDaXJjbGUgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3Q2lyY2xlID0gZnVuY3Rpb24gKGNpcmNsZUdlb21ldHJ5LCBmZWF0dXJlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdGZWF0dXJlID0gZnVuY3Rpb24gKGZlYXR1cmUsIHN0eWxlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeUNvbGxlY3Rpb25HZW9tZXRyeSBHZW9tZXRyeSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd0dlb21ldHJ5Q29sbGVjdGlvbiA9IGZ1bmN0aW9uIChnZW9tZXRyeUNvbGxlY3Rpb25HZW9tZXRyeSwgZmVhdHVyZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGxpbmVTdHJpbmdHZW9tZXRyeSBMaW5lIHN0cmluZyBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3TGluZVN0cmluZyA9IGZ1bmN0aW9uIChsaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpIHsgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5IE11bHRpTGluZVN0cmluZyBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3TXVsdGlMaW5lU3RyaW5nID0gZnVuY3Rpb24gKG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LCBmZWF0dXJlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpUG9pbnQuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gbXVsdGlQb2ludEdlb21ldHJ5IE11bHRpUG9pbnQgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd011bHRpUG9pbnQgPSBmdW5jdGlvbiAobXVsdGlQb2ludEdlb21ldHJ5LCBmZWF0dXJlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBtdWx0aVBvbHlnb25HZW9tZXRyeSBNdWx0aVBvbHlnb24gZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd011bHRpUG9seWdvbiA9IGZ1bmN0aW9uIChtdWx0aVBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBwb2ludEdlb21ldHJ5IFBvaW50IGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdQb2ludCA9IGZ1bmN0aW9uIChwb2ludEdlb21ldHJ5LCBmZWF0dXJlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gcG9seWdvbkdlb21ldHJ5IFBvbHlnb24gZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd1BvbHlnb24gPSBmdW5jdGlvbiAocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdUZXh0ID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBmZWF0dXJlKSB7IH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9GaWxsLmpzXCIpLmRlZmF1bHR9IGZpbGxTdHlsZSBGaWxsIHN0eWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IHN0cm9rZVN0eWxlIFN0cm9rZSBzdHlsZS5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiAoZmlsbFN0eWxlLCBzdHJva2VTdHlsZSkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvSW1hZ2UuanNcIikuZGVmYXVsdH0gaW1hZ2VTdHlsZSBJbWFnZSBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwPX0gb3B0X2RlY2x1dHRlckdyb3VwIERlY2x1dHRlci5cbiAgICAgKi9cbiAgICBWZWN0b3JDb250ZXh0LnByb3RvdHlwZS5zZXRJbWFnZVN0eWxlID0gZnVuY3Rpb24gKGltYWdlU3R5bGUsIG9wdF9kZWNsdXR0ZXJHcm91cCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvVGV4dC5qc1wiKS5kZWZhdWx0fSB0ZXh0U3R5bGUgVGV4dCBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3Vwcz19IG9wdF9kZWNsdXR0ZXJHcm91cHMgRGVjbHV0dGVyLlxuICAgICAqL1xuICAgIFZlY3RvckNvbnRleHQucHJvdG90eXBlLnNldFRleHRTdHlsZSA9IGZ1bmN0aW9uICh0ZXh0U3R5bGUsIG9wdF9kZWNsdXR0ZXJHcm91cHMpIHsgfTtcbiAgICByZXR1cm4gVmVjdG9yQ29udGV4dDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBWZWN0b3JDb250ZXh0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yQ29udGV4dC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2luZmxhdGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PX0gb3B0X2Nvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBvcHRfY29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9jb29yZGluYXRlcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICBjb29yZGluYXRlc1tpKytdID0gZmxhdENvb3JkaW5hdGVzLnNsaWNlKGosIGogKyBzdHJpZGUpO1xuICAgIH1cbiAgICBjb29yZGluYXRlcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBjb29yZGluYXRlcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj49fSBvcHRfY29vcmRpbmF0ZXNzIENvb3JkaW5hdGVzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXNzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzcyA9IG9wdF9jb29yZGluYXRlc3MgIT09IHVuZGVmaW5lZCA/IG9wdF9jb29yZGluYXRlc3MgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2pdO1xuICAgICAgICBjb29yZGluYXRlc3NbaSsrXSA9IGluZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVzc1tpXSk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgY29vcmRpbmF0ZXNzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+PX0gb3B0X2Nvb3JkaW5hdGVzc3NcbiAqICAgICBDb29yZGluYXRlc3NzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBDb29yZGluYXRlc3NzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzc3MpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXNzcyA9IG9wdF9jb29yZGluYXRlc3NzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXNzcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3Nbal07XG4gICAgICAgIGNvb3JkaW5hdGVzc3NbaSsrXSA9IGluZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGNvb3JkaW5hdGVzc3NbaV0pO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIGNvb3JkaW5hdGVzc3MubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXNzcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZmxhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9CdWlsZGVyXG4gKi9cbmltcG9ydCBDYW52YXNJbnN0cnVjdGlvbiBmcm9tICcuL0luc3RydWN0aW9uLmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi4vLi4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFJlbGF0aW9uc2hpcCBmcm9tICcuLi8uLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzJztcbmltcG9ydCBWZWN0b3JDb250ZXh0IGZyb20gJy4uL1ZlY3RvckNvbnRleHQuanMnO1xuaW1wb3J0IHsgYXNDb2xvckxpa2UgfSBmcm9tICcuLi8uLi9jb2xvcmxpa2UuanMnO1xuaW1wb3J0IHsgYnVmZmVyLCBjbG9uZSwgY29vcmRpbmF0ZVJlbGF0aW9uc2hpcCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0RmlsbFN0eWxlLCBkZWZhdWx0TGluZUNhcCwgZGVmYXVsdExpbmVEYXNoLCBkZWZhdWx0TGluZURhc2hPZmZzZXQsIGRlZmF1bHRMaW5lSm9pbiwgZGVmYXVsdExpbmVXaWR0aCwgZGVmYXVsdE1pdGVyTGltaXQsIGRlZmF1bHRTdHJva2VTdHlsZSwgfSBmcm9tICcuLi9jYW52YXMuanMnO1xuaW1wb3J0IHsgZXF1YWxzLCByZXZlcnNlU3ViQXJyYXkgfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQgeyBpbmZsYXRlQ29vcmRpbmF0ZXMsIGluZmxhdGVDb29yZGluYXRlc0FycmF5LCBpbmZsYXRlTXVsdGlDb29yZGluYXRlc0FycmF5LCB9IGZyb20gJy4uLy4uL2dlb20vZmxhdC9pbmZsYXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBpbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBoaXQgZGV0ZWN0aW9uIGluc3RydWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgVGhlIGFycmF5IG9mIGFsbCBjb29yZGluYXRlcy5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5UZXh0U3RhdGU+fSBbdGV4dFN0YXRlc10gVGhlIHRleHQgc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdGF0ZT59IFtmaWxsU3RhdGVzXSBUaGUgZmlsbCBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGU+fSBbc3Ryb2tlU3RhdGVzXSBUaGUgc3Ryb2tlIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqL1xudmFyIENhbnZhc0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc0J1aWxkZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhFeHRlbnQgTWF4aW11bSBleHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNCdWlsZGVyKHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50b2xlcmFuY2UgPSB0b2xlcmFuY2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heEV4dGVudCA9IG1heEV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW8gPSBwaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4TGluZVdpZHRoID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTwqPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTwqPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYnVmZmVyZWRNYXhFeHRlbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW5zdHJ1Y3Rpb25zID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBDb29yZGluYXRlXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8Kj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gKi8gKHt9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBkYXNoQXJyYXkgRGFzaCBhcnJheS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBEYXNoIGFycmF5IHdpdGggcGl4ZWwgcmF0aW8gYXBwbGllZFxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmFwcGx5UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIChkYXNoQXJyYXkpIHtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSB0aGlzLnBpeGVsUmF0aW87XG4gICAgICAgIHJldHVybiBwaXhlbFJhdGlvID09IDFcbiAgICAgICAgICAgID8gZGFzaEFycmF5XG4gICAgICAgICAgICA6IGRhc2hBcnJheS5tYXAoZnVuY3Rpb24gKGRhc2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGFzaCAqIHBpeGVsUmF0aW87XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjbG9zZWQgTGFzdCBpbnB1dCBjb29yZGluYXRlIGVxdWFscyBmaXJzdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNraXBGaXJzdCBTa2lwIGZpcnN0IGNvb3JkaW5hdGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTXkgZW5kLlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNsb3NlZCwgc2tpcEZpcnN0KSB7XG4gICAgICAgIHZhciBteUVuZCA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5nZXRCdWZmZXJlZE1heEV4dGVudCgpO1xuICAgICAgICBpZiAoc2tpcEZpcnN0KSB7XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXN0WENvb3JkID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciBsYXN0WUNvb3JkID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB2YXIgbmV4dENvb3JkID0gdGhpcy50bXBDb29yZGluYXRlXztcbiAgICAgICAgdmFyIHNraXBwZWQgPSB0cnVlO1xuICAgICAgICB2YXIgaSwgbGFzdFJlbCwgbmV4dFJlbDtcbiAgICAgICAgZm9yIChpID0gb2Zmc2V0ICsgc3RyaWRlOyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgbmV4dENvb3JkWzBdID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgbmV4dENvb3JkWzFdID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIG5leHRSZWwgPSBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgbmV4dENvb3JkKTtcbiAgICAgICAgICAgIGlmIChuZXh0UmVsICE9PSBsYXN0UmVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNraXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IGxhc3RYQ29vcmQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBsYXN0WUNvb3JkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzW215RW5kKytdID0gbmV4dENvb3JkWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMV07XG4gICAgICAgICAgICAgICAgc2tpcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobmV4dFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IG5leHRDb29yZFsxXTtcbiAgICAgICAgICAgICAgICBza2lwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBza2lwcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RYQ29vcmQgPSBuZXh0Q29vcmRbMF07XG4gICAgICAgICAgICBsYXN0WUNvb3JkID0gbmV4dENvb3JkWzFdO1xuICAgICAgICAgICAgbGFzdFJlbCA9IG5leHRSZWw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTGFzdCBjb29yZGluYXRlIGVxdWFscyBmaXJzdCBvciBvbmx5IG9uZSBwb2ludCB0byBhcHBlbmQ6XG4gICAgICAgIGlmICgoY2xvc2VkICYmIHNraXBwZWQpIHx8IGkgPT09IG9mZnNldCArIHN0cmlkZSkge1xuICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IGxhc3RYQ29vcmQ7XG4gICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzW215RW5kKytdID0gbGFzdFlDb29yZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXlFbmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYnVpbGRlckVuZHMgQnVpbGRlciBlbmRzLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gT2Zmc2V0LlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmRyYXdDdXN0b21Db29yZGluYXRlc18gPSBmdW5jdGlvbiAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgYnVpbGRlckVuZHMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgICAgIHZhciBidWlsZGVyRW5kID0gdGhpcy5hcHBlbmRGbGF0Q29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgYnVpbGRlckVuZHMucHVzaChidWlsZGVyRW5kKTtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlbmRlcmVyIFJlbmRlcmVyLlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmRyYXdDdXN0b20gPSBmdW5jdGlvbiAoZ2VvbWV0cnksIGZlYXR1cmUsIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeShnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgICAgIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICAgICAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBidWlsZGVyQmVnaW4gPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcywgYnVpbGRlckVuZCwgYnVpbGRlckVuZHMsIGJ1aWxkZXJFbmRzcztcbiAgICAgICAgdmFyIG9mZnNldDtcbiAgICAgICAgaWYgKHR5cGUgPT0gR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT04pIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgYnVpbGRlckVuZHNzID0gW107XG4gICAgICAgICAgICB2YXIgZW5kc3MgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RW5kc3MoKTtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG15RW5kcyA9IFtdO1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuZHJhd0N1c3RvbUNvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3NbaV0sIHN0cmlkZSwgbXlFbmRzKTtcbiAgICAgICAgICAgICAgICBidWlsZGVyRW5kc3MucHVzaChteUVuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uQ1VTVE9NLFxuICAgICAgICAgICAgICAgIGJ1aWxkZXJCZWdpbixcbiAgICAgICAgICAgICAgICBidWlsZGVyRW5kc3MsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIsXG4gICAgICAgICAgICAgICAgaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gR2VvbWV0cnlUeXBlLlBPTFlHT04gfHxcbiAgICAgICAgICAgIHR5cGUgPT0gR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HKSB7XG4gICAgICAgICAgICBidWlsZGVyRW5kcyA9IFtdO1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID1cbiAgICAgICAgICAgICAgICB0eXBlID09IEdlb21ldHJ5VHlwZS5QT0xZR09OXG4gICAgICAgICAgICAgICAgICAgID8gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpXG4gICAgICAgICAgICAgICAgICAgIDogZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmRyYXdDdXN0b21Db29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCAwLCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRFbmRzKCksIHN0cmlkZSwgYnVpbGRlckVuZHMpO1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uQ1VTVE9NLFxuICAgICAgICAgICAgICAgIGJ1aWxkZXJCZWdpbixcbiAgICAgICAgICAgICAgICBidWlsZGVyRW5kcyxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeSxcbiAgICAgICAgICAgICAgICByZW5kZXJlcixcbiAgICAgICAgICAgICAgICBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HIHx8XG4gICAgICAgICAgICB0eXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVCkge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBidWlsZGVyRW5kID0gdGhpcy5hcHBlbmRGbGF0Q29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgICAgICAgICAgYnVpbGRlckJlZ2luLFxuICAgICAgICAgICAgICAgIGJ1aWxkZXJFbmQsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIsXG4gICAgICAgICAgICAgICAgaW5mbGF0ZUNvb3JkaW5hdGVzLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBHZW9tZXRyeVR5cGUuUE9JTlQpIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1swXSwgZmxhdENvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgICAgIGJ1aWxkZXJFbmQgPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkNVU1RPTSxcbiAgICAgICAgICAgICAgICBidWlsZGVyQmVnaW4sXG4gICAgICAgICAgICAgICAgYnVpbGRlckVuZCxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeSxcbiAgICAgICAgICAgICAgICByZW5kZXJlcixcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5kR2VvbWV0cnkoZmVhdHVyZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0dlb21ldHJ5XCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgQ2FudmFzQnVpbGRlci5wcm90b3R5cGUuYmVnaW5HZW9tZXRyeSA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gZ2VvbWV0cnkuZ2V0RXh0ZW50KCk7XG4gICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMV8gPSBbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5CRUdJTl9HRU9NRVRSWSxcbiAgICAgICAgICAgIGZlYXR1cmUsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgZXh0ZW50LFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMV8pO1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfID0gW1xuICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uQkVHSU5fR0VPTUVUUlksXG4gICAgICAgICAgICBmZWF0dXJlLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIGV4dGVudCxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaCh0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1NlcmlhbGl6YWJsZUluc3RydWN0aW9uc30gdGhlIHNlcmlhbGl6YWJsZSBpbnN0cnVjdGlvbnMuXG4gICAgICovXG4gICAgQ2FudmFzQnVpbGRlci5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiB0aGlzLmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIGhpdERldGVjdGlvbkluc3RydWN0aW9uczogdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBjb29yZGluYXRlczogdGhpcy5jb29yZGluYXRlcyxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldmVyc2UgdGhlIGhpdCBkZXRlY3Rpb24gaW5zdHJ1Y3Rpb25zLlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLnJldmVyc2VIaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgPSB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucztcbiAgICAgICAgLy8gc3RlcCAxIC0gcmV2ZXJzZSBhcnJheVxuICAgICAgICBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucmV2ZXJzZSgpO1xuICAgICAgICAvLyBzdGVwIDIgLSByZXZlcnNlIGluc3RydWN0aW9ucyB3aXRoaW4gZ2VvbWV0cnkgYmxvY2tzXG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgbiA9IGhpdERldGVjdGlvbkluc3RydWN0aW9ucy5sZW5ndGg7XG4gICAgICAgIHZhciBpbnN0cnVjdGlvbjtcbiAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgIHZhciBiZWdpbiA9IC0xO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbiA9IGhpdERldGVjdGlvbkluc3RydWN0aW9uc1tpXTtcbiAgICAgICAgICAgIHR5cGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vSW5zdHJ1Y3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKGluc3RydWN0aW9uWzBdKTtcbiAgICAgICAgICAgIGlmICh0eXBlID09IENhbnZhc0luc3RydWN0aW9uLkVORF9HRU9NRVRSWSkge1xuICAgICAgICAgICAgICAgIGJlZ2luID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gQ2FudmFzSW5zdHJ1Y3Rpb24uQkVHSU5fR0VPTUVUUlkpIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvblsyXSA9IGk7XG4gICAgICAgICAgICAgICAgcmV2ZXJzZVN1YkFycmF5KHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLCBiZWdpbiwgaSk7XG4gICAgICAgICAgICAgICAgYmVnaW4gPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9GaWxsLmpzXCIpLmRlZmF1bHR9IGZpbGxTdHlsZSBGaWxsIHN0eWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IHN0cm9rZVN0eWxlIFN0cm9rZSBzdHlsZS5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiAoZmlsbFN0eWxlLCBzdHJva2VTdHlsZSkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICBpZiAoZmlsbFN0eWxlKSB7XG4gICAgICAgICAgICB2YXIgZmlsbFN0eWxlQ29sb3IgPSBmaWxsU3R5bGUuZ2V0Q29sb3IoKTtcbiAgICAgICAgICAgIHN0YXRlLmZpbGxTdHlsZSA9IGFzQ29sb3JMaWtlKGZpbGxTdHlsZUNvbG9yID8gZmlsbFN0eWxlQ29sb3IgOiBkZWZhdWx0RmlsbFN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlLmZpbGxTdHlsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgICAgIHZhciBzdHJva2VTdHlsZUNvbG9yID0gc3Ryb2tlU3R5bGUuZ2V0Q29sb3IoKTtcbiAgICAgICAgICAgIHN0YXRlLnN0cm9rZVN0eWxlID0gYXNDb2xvckxpa2Uoc3Ryb2tlU3R5bGVDb2xvciA/IHN0cm9rZVN0eWxlQ29sb3IgOiBkZWZhdWx0U3Ryb2tlU3R5bGUpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZUNhcCA9IHN0cm9rZVN0eWxlLmdldExpbmVDYXAoKTtcbiAgICAgICAgICAgIHN0YXRlLmxpbmVDYXAgPVxuICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlTGluZUNhcCAhPT0gdW5kZWZpbmVkID8gc3Ryb2tlU3R5bGVMaW5lQ2FwIDogZGVmYXVsdExpbmVDYXA7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lRGFzaCA9IHN0cm9rZVN0eWxlLmdldExpbmVEYXNoKCk7XG4gICAgICAgICAgICBzdGF0ZS5saW5lRGFzaCA9IHN0cm9rZVN0eWxlTGluZURhc2hcbiAgICAgICAgICAgICAgICA/IHN0cm9rZVN0eWxlTGluZURhc2guc2xpY2UoKVxuICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVEYXNoO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgPSBzdHJva2VTdHlsZS5nZXRMaW5lRGFzaE9mZnNldCgpO1xuICAgICAgICAgICAgc3RhdGUubGluZURhc2hPZmZzZXQgPSBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0XG4gICAgICAgICAgICAgICAgPyBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0XG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0TGluZURhc2hPZmZzZXQ7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lSm9pbiA9IHN0cm9rZVN0eWxlLmdldExpbmVKb2luKCk7XG4gICAgICAgICAgICBzdGF0ZS5saW5lSm9pbiA9XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGVMaW5lSm9pbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc3Ryb2tlU3R5bGVMaW5lSm9pblxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRMaW5lSm9pbjtcbiAgICAgICAgICAgIHZhciBzdHJva2VTdHlsZVdpZHRoID0gc3Ryb2tlU3R5bGUuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIHN0YXRlLmxpbmVXaWR0aCA9XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGVXaWR0aCAhPT0gdW5kZWZpbmVkID8gc3Ryb2tlU3R5bGVXaWR0aCA6IGRlZmF1bHRMaW5lV2lkdGg7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVNaXRlckxpbWl0ID0gc3Ryb2tlU3R5bGUuZ2V0TWl0ZXJMaW1pdCgpO1xuICAgICAgICAgICAgc3RhdGUubWl0ZXJMaW1pdCA9XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGVNaXRlckxpbWl0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzdHJva2VTdHlsZU1pdGVyTGltaXRcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0TWl0ZXJMaW1pdDtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5saW5lV2lkdGggPiB0aGlzLm1heExpbmVXaWR0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4TGluZVdpZHRoID0gc3RhdGUubGluZVdpZHRoO1xuICAgICAgICAgICAgICAgIC8vIGludmFsaWRhdGUgdGhlIGJ1ZmZlcmVkIG1heCBleHRlbnQgY2FjaGVcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHN0YXRlLmxpbmVDYXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBzdGF0ZS5saW5lRGFzaCA9IG51bGw7XG4gICAgICAgICAgICBzdGF0ZS5saW5lRGFzaE9mZnNldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHN0YXRlLmxpbmVKb2luID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgc3RhdGUubGluZVdpZHRoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgc3RhdGUubWl0ZXJMaW1pdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTwqPn0gRmlsbCBpbnN0cnVjdGlvbi5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVGaWxsID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBmaWxsU3R5bGUgPSBzdGF0ZS5maWxsU3R5bGU7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8Kj59ICovXG4gICAgICAgIHZhciBmaWxsSW5zdHJ1Y3Rpb24gPSBbQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX0ZJTExfU1RZTEUsIGZpbGxTdHlsZV07XG4gICAgICAgIGlmICh0eXBlb2YgZmlsbFN0eWxlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gRmlsbCBpcyBhIHBhdHRlcm4gb3IgZ3JhZGllbnQgLSBhbGlnbiBpdCFcbiAgICAgICAgICAgIGZpbGxJbnN0cnVjdGlvbi5wdXNoKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWxsSW5zdHJ1Y3Rpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLmFwcGx5U3Ryb2tlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2godGhpcy5jcmVhdGVTdHJva2Uoc3RhdGUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAgICogQHJldHVybiB7QXJyYXk8Kj59IFN0cm9rZSBpbnN0cnVjdGlvbi5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVTdHJva2UgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgIHN0YXRlLmxpbmVXaWR0aCAqIHRoaXMucGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHN0YXRlLmxpbmVDYXAsXG4gICAgICAgICAgICBzdGF0ZS5saW5lSm9pbixcbiAgICAgICAgICAgIHN0YXRlLm1pdGVyTGltaXQsXG4gICAgICAgICAgICB0aGlzLmFwcGx5UGl4ZWxSYXRpbyhzdGF0ZS5saW5lRGFzaCksXG4gICAgICAgICAgICBzdGF0ZS5saW5lRGFzaE9mZnNldCAqIHRoaXMucGl4ZWxSYXRpbyxcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOkNhbnZhc0J1aWxkZXIsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGUpOkFycmF5PCo+fSBjcmVhdGVGaWxsIENyZWF0ZSBmaWxsLlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLnVwZGF0ZUZpbGxTdHlsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgY3JlYXRlRmlsbCkge1xuICAgICAgICB2YXIgZmlsbFN0eWxlID0gc3RhdGUuZmlsbFN0eWxlO1xuICAgICAgICBpZiAodHlwZW9mIGZpbGxTdHlsZSAhPT0gJ3N0cmluZycgfHwgc3RhdGUuY3VycmVudEZpbGxTdHlsZSAhPSBmaWxsU3R5bGUpIHtcbiAgICAgICAgICAgIGlmIChmaWxsU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goY3JlYXRlRmlsbC5jYWxsKHRoaXMsIHN0YXRlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50RmlsbFN0eWxlID0gZmlsbFN0eWxlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpDYW52YXNCdWlsZGVyLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlKTogdm9pZH0gYXBwbHlTdHJva2UgQXBwbHkgc3Ryb2tlLlxuICAgICAqL1xuICAgIENhbnZhc0J1aWxkZXIucHJvdG90eXBlLnVwZGF0ZVN0cm9rZVN0eWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhcHBseVN0cm9rZSkge1xuICAgICAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdGF0ZS5zdHJva2VTdHlsZTtcbiAgICAgICAgdmFyIGxpbmVDYXAgPSBzdGF0ZS5saW5lQ2FwO1xuICAgICAgICB2YXIgbGluZURhc2ggPSBzdGF0ZS5saW5lRGFzaDtcbiAgICAgICAgdmFyIGxpbmVEYXNoT2Zmc2V0ID0gc3RhdGUubGluZURhc2hPZmZzZXQ7XG4gICAgICAgIHZhciBsaW5lSm9pbiA9IHN0YXRlLmxpbmVKb2luO1xuICAgICAgICB2YXIgbGluZVdpZHRoID0gc3RhdGUubGluZVdpZHRoO1xuICAgICAgICB2YXIgbWl0ZXJMaW1pdCA9IHN0YXRlLm1pdGVyTGltaXQ7XG4gICAgICAgIGlmIChzdGF0ZS5jdXJyZW50U3Ryb2tlU3R5bGUgIT0gc3Ryb2tlU3R5bGUgfHxcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRMaW5lQ2FwICE9IGxpbmVDYXAgfHxcbiAgICAgICAgICAgIChsaW5lRGFzaCAhPSBzdGF0ZS5jdXJyZW50TGluZURhc2ggJiZcbiAgICAgICAgICAgICAgICAhZXF1YWxzKHN0YXRlLmN1cnJlbnRMaW5lRGFzaCwgbGluZURhc2gpKSB8fFxuICAgICAgICAgICAgc3RhdGUuY3VycmVudExpbmVEYXNoT2Zmc2V0ICE9IGxpbmVEYXNoT2Zmc2V0IHx8XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50TGluZUpvaW4gIT0gbGluZUpvaW4gfHxcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRMaW5lV2lkdGggIT0gbGluZVdpZHRoIHx8XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50TWl0ZXJMaW1pdCAhPSBtaXRlckxpbWl0KSB7XG4gICAgICAgICAgICBpZiAoc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFwcGx5U3Ryb2tlLmNhbGwodGhpcywgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhdGUuY3VycmVudFN0cm9rZVN0eWxlID0gc3Ryb2tlU3R5bGU7XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50TGluZUNhcCA9IGxpbmVDYXA7XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50TGluZURhc2ggPSBsaW5lRGFzaDtcbiAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRMaW5lRGFzaE9mZnNldCA9IGxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICAgICAgc3RhdGUuY3VycmVudExpbmVKb2luID0gbGluZUpvaW47XG4gICAgICAgICAgICBzdGF0ZS5jdXJyZW50TGluZVdpZHRoID0gbGluZVdpZHRoO1xuICAgICAgICAgICAgc3RhdGUuY3VycmVudE1pdGVyTGltaXQgPSBtaXRlckxpbWl0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBDYW52YXNCdWlsZGVyLnByb3RvdHlwZS5lbmRHZW9tZXRyeSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMV9bMl0gPSB0aGlzLmluc3RydWN0aW9ucy5sZW5ndGg7XG4gICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMV8gPSBudWxsO1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfWzJdID0gdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMubGVuZ3RoO1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfID0gbnVsbDtcbiAgICAgICAgdmFyIGVuZEdlb21ldHJ5SW5zdHJ1Y3Rpb24gPSBbQ2FudmFzSW5zdHJ1Y3Rpb24uRU5EX0dFT01FVFJZLCBmZWF0dXJlXTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChlbmRHZW9tZXRyeUluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChlbmRHZW9tZXRyeUluc3RydWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYnVmZmVyZWQgcmVuZGVyaW5nIGV4dGVudC4gIFJlbmRlcmluZyB3aWxsIGJlIGNsaXBwZWQgdG8gdGhlIGV4dGVudFxuICAgICAqIHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3Rvci4gIFRvIGFjY291bnQgZm9yIHN5bWJvbGl6ZXJzIHRoYXQgbWF5IGludGVyc2VjdFxuICAgICAqIHRoaXMgZXh0ZW50LCB3ZSBjYWxjdWxhdGUgYSBidWZmZXJlZCBleHRlbnQgKGUuZy4gYmFzZWQgb24gc3Ryb2tlIHdpZHRoKS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgYnVmZmVyZWQgcmVuZGVyaW5nIGV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzQnVpbGRlci5wcm90b3R5cGUuZ2V0QnVmZmVyZWRNYXhFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXJlZE1heEV4dGVudF8pIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyZWRNYXhFeHRlbnRfID0gY2xvbmUodGhpcy5tYXhFeHRlbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMubWF4TGluZVdpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9ICh0aGlzLnJlc29sdXRpb24gKiAodGhpcy5tYXhMaW5lV2lkdGggKyAxKSkgLyAyO1xuICAgICAgICAgICAgICAgIGJ1ZmZlcih0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50Xywgd2lkdGgsIHRoaXMuYnVmZmVyZWRNYXhFeHRlbnRfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJlZE1heEV4dGVudF87XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzQnVpbGRlcjtcbn0oVmVjdG9yQ29udGV4dCkpO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzQnVpbGRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJ1aWxkZXIuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9JbWFnZUJ1aWxkZXJcbiAqL1xuaW1wb3J0IENhbnZhc0J1aWxkZXIgZnJvbSAnLi9CdWlsZGVyLmpzJztcbmltcG9ydCBDYW52YXNJbnN0cnVjdGlvbiBmcm9tICcuL0luc3RydWN0aW9uLmpzJztcbnZhciBDYW52YXNJbWFnZUJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc0ltYWdlQnVpbGRlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXhpbXVtIGV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc0ltYWdlQnVpbGRlcih0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXBzfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVjbHV0dGVyR3JvdXBzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZVBpeGVsUmF0aW9fID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JYXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5jaG9yWV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhlaWdodF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9wYWNpdHlfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmlnaW5YXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luWV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yb3RhdGVXaXRoVmlld18gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0aW9uXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2NhbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy53aWR0aF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTXkgZW5kLlxuICAgICAqL1xuICAgIENhbnZhc0ltYWdlQnVpbGRlci5wcm90b3R5cGUuZHJhd0Nvb3JkaW5hdGVzXyA9IGZ1bmN0aW9uIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gcG9pbnRHZW9tZXRyeSBQb2ludCBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBDYW52YXNJbWFnZUJ1aWxkZXIucHJvdG90eXBlLmRyYXdQb2ludCA9IGZ1bmN0aW9uIChwb2ludEdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgICAgIGlmICghdGhpcy5pbWFnZV8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnkocG9pbnRHZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBwb2ludEdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gcG9pbnRHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgdmFyIG15QmVnaW4gPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIG15RW5kID0gdGhpcy5kcmF3Q29vcmRpbmF0ZXNfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0lNQUdFLFxuICAgICAgICAgICAgbXlCZWdpbixcbiAgICAgICAgICAgIG15RW5kLFxuICAgICAgICAgICAgdGhpcy5pbWFnZV8sXG4gICAgICAgICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIHRvIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgICAgICAgdGhpcy5hbmNob3JYXyAqIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyxcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWV8gKiB0aGlzLmltYWdlUGl4ZWxSYXRpb18sXG4gICAgICAgICAgICB0aGlzLmRlY2x1dHRlckdyb3Vwc18sXG4gICAgICAgICAgICBNYXRoLmNlaWwodGhpcy5oZWlnaHRfICogdGhpcy5pbWFnZVBpeGVsUmF0aW9fKSxcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eV8sXG4gICAgICAgICAgICB0aGlzLm9yaWdpblhfLFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5ZXyxcbiAgICAgICAgICAgIHRoaXMucm90YXRlV2l0aFZpZXdfLFxuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbl8sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgKHRoaXMuc2NhbGVfWzBdICogdGhpcy5waXhlbFJhdGlvKSAvIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyxcbiAgICAgICAgICAgICAgICAodGhpcy5zY2FsZV9bMV0gKiB0aGlzLnBpeGVsUmF0aW8pIC8gdGhpcy5pbWFnZVBpeGVsUmF0aW9fLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIE1hdGguY2VpbCh0aGlzLndpZHRoXyAqIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyksXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0UsXG4gICAgICAgICAgICBteUJlZ2luLFxuICAgICAgICAgICAgbXlFbmQsXG4gICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkltYWdlXyxcbiAgICAgICAgICAgIC8vIFJlbWFpbmluZyBhcmd1bWVudHMgdG8gRFJBV19JTUFHRSBhcmUgaW4gYWxwaGFiZXRpY2FsIG9yZGVyXG4gICAgICAgICAgICB0aGlzLmFuY2hvclhfLFxuICAgICAgICAgICAgdGhpcy5hbmNob3JZXyxcbiAgICAgICAgICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBzXyxcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0XyxcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eV8sXG4gICAgICAgICAgICB0aGlzLm9yaWdpblhfLFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5ZXyxcbiAgICAgICAgICAgIHRoaXMucm90YXRlV2l0aFZpZXdfLFxuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbl8sXG4gICAgICAgICAgICB0aGlzLnNjYWxlXyxcbiAgICAgICAgICAgIHRoaXMud2lkdGhfLFxuICAgICAgICBdKTtcbiAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBtdWx0aVBvaW50R2VvbWV0cnkgTXVsdGlQb2ludCBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBDYW52YXNJbWFnZUJ1aWxkZXIucHJvdG90eXBlLmRyYXdNdWx0aVBvaW50ID0gZnVuY3Rpb24gKG11bHRpUG9pbnRHZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgICAgICBpZiAoIXRoaXMuaW1hZ2VfKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KG11bHRpUG9pbnRHZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBtdWx0aVBvaW50R2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBtdWx0aVBvaW50R2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIHZhciBteUVuZCA9IHRoaXMuZHJhd0Nvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSk7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSxcbiAgICAgICAgICAgIG15QmVnaW4sXG4gICAgICAgICAgICBteUVuZCxcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VfLFxuICAgICAgICAgICAgLy8gUmVtYWluaW5nIGFyZ3VtZW50cyB0byBEUkFXX0lNQUdFIGFyZSBpbiBhbHBoYWJldGljYWwgb3JkZXJcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWF8gKiB0aGlzLmltYWdlUGl4ZWxSYXRpb18sXG4gICAgICAgICAgICB0aGlzLmFuY2hvcllfICogdGhpcy5pbWFnZVBpeGVsUmF0aW9fLFxuICAgICAgICAgICAgdGhpcy5kZWNsdXR0ZXJHcm91cHNfLFxuICAgICAgICAgICAgTWF0aC5jZWlsKHRoaXMuaGVpZ2h0XyAqIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyksXG4gICAgICAgICAgICB0aGlzLm9wYWNpdHlfLFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5YXyxcbiAgICAgICAgICAgIHRoaXMub3JpZ2luWV8sXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyxcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25fLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICh0aGlzLnNjYWxlX1swXSAqIHRoaXMucGl4ZWxSYXRpbykgLyB0aGlzLmltYWdlUGl4ZWxSYXRpb18sXG4gICAgICAgICAgICAgICAgKHRoaXMuc2NhbGVfWzFdICogdGhpcy5waXhlbFJhdGlvKSAvIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBNYXRoLmNlaWwodGhpcy53aWR0aF8gKiB0aGlzLmltYWdlUGl4ZWxSYXRpb18pLFxuICAgICAgICBdKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0lNQUdFLFxuICAgICAgICAgICAgbXlCZWdpbixcbiAgICAgICAgICAgIG15RW5kLFxuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbWFnZV8sXG4gICAgICAgICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIHRvIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgICAgICAgdGhpcy5hbmNob3JYXyxcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWV8sXG4gICAgICAgICAgICB0aGlzLmRlY2x1dHRlckdyb3Vwc18sXG4gICAgICAgICAgICB0aGlzLmhlaWdodF8sXG4gICAgICAgICAgICB0aGlzLm9wYWNpdHlfLFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5YXyxcbiAgICAgICAgICAgIHRoaXMub3JpZ2luWV8sXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyxcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25fLFxuICAgICAgICAgICAgdGhpcy5zY2FsZV8sXG4gICAgICAgICAgICB0aGlzLndpZHRoXyxcbiAgICAgICAgXSk7XG4gICAgICAgIHRoaXMuZW5kR2VvbWV0cnkoZmVhdHVyZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0J1aWxkZXIuanNcIikuU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zfSB0aGUgc2VyaWFsaXphYmxlIGluc3RydWN0aW9ucy5cbiAgICAgKi9cbiAgICBDYW52YXNJbWFnZUJ1aWxkZXIucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgIC8vIEZJWE1FIHRoaXMgZG9lc24ndCByZWFsbHkgcHJvdGVjdCB1cyBhZ2FpbnN0IGZ1cnRoZXIgY2FsbHMgdG8gZHJhdypHZW9tZXRyeVxuICAgICAgICB0aGlzLmFuY2hvclhfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmFuY2hvcllfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkltYWdlXyA9IG51bGw7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbWFnZVBpeGVsUmF0aW9fID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhlaWdodF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2NhbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9wYWNpdHlfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9yaWdpblhfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9yaWdpbllfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yb3RhdGlvbl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2lkdGhfID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5maW5pc2guY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvSW1hZ2UuanNcIikuZGVmYXVsdH0gaW1hZ2VTdHlsZSBJbWFnZSBzdHlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5EZWNsdXR0ZXJHcm91cH0gZGVjbHV0dGVyR3JvdXBzIERlY2x1dHRlci5cbiAgICAgKi9cbiAgICBDYW52YXNJbWFnZUJ1aWxkZXIucHJvdG90eXBlLnNldEltYWdlU3R5bGUgPSBmdW5jdGlvbiAoaW1hZ2VTdHlsZSwgZGVjbHV0dGVyR3JvdXBzKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBpbWFnZVN0eWxlLmdldEFuY2hvcigpO1xuICAgICAgICB2YXIgc2l6ZSA9IGltYWdlU3R5bGUuZ2V0U2l6ZSgpO1xuICAgICAgICB2YXIgaGl0RGV0ZWN0aW9uSW1hZ2UgPSBpbWFnZVN0eWxlLmdldEhpdERldGVjdGlvbkltYWdlKCk7XG4gICAgICAgIHZhciBpbWFnZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2UodGhpcy5waXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIG9yaWdpbiA9IGltYWdlU3R5bGUuZ2V0T3JpZ2luKCk7XG4gICAgICAgIHRoaXMuaW1hZ2VQaXhlbFJhdGlvXyA9IGltYWdlU3R5bGUuZ2V0UGl4ZWxSYXRpbyh0aGlzLnBpeGVsUmF0aW8pO1xuICAgICAgICB0aGlzLmFuY2hvclhfID0gYW5jaG9yWzBdO1xuICAgICAgICB0aGlzLmFuY2hvcllfID0gYW5jaG9yWzFdO1xuICAgICAgICB0aGlzLmRlY2x1dHRlckdyb3Vwc18gPSBkZWNsdXR0ZXJHcm91cHM7XG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gaGl0RGV0ZWN0aW9uSW1hZ2U7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2U7XG4gICAgICAgIHRoaXMuaGVpZ2h0XyA9IHNpemVbMV07XG4gICAgICAgIHRoaXMub3BhY2l0eV8gPSBpbWFnZVN0eWxlLmdldE9wYWNpdHkoKTtcbiAgICAgICAgdGhpcy5vcmlnaW5YXyA9IG9yaWdpblswXTtcbiAgICAgICAgdGhpcy5vcmlnaW5ZXyA9IG9yaWdpblsxXTtcbiAgICAgICAgdGhpcy5yb3RhdGVXaXRoVmlld18gPSBpbWFnZVN0eWxlLmdldFJvdGF0ZVdpdGhWaWV3KCk7XG4gICAgICAgIHRoaXMucm90YXRpb25fID0gaW1hZ2VTdHlsZS5nZXRSb3RhdGlvbigpO1xuICAgICAgICB0aGlzLnNjYWxlXyA9IGltYWdlU3R5bGUuZ2V0U2NhbGVBcnJheSgpO1xuICAgICAgICB0aGlzLndpZHRoXyA9IHNpemVbMF07XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzSW1hZ2VCdWlsZGVyO1xufShDYW52YXNCdWlsZGVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNJbWFnZUJ1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUJ1aWxkZXIuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9MaW5lU3RyaW5nQnVpbGRlclxuICovXG5pbXBvcnQgQ2FudmFzQnVpbGRlciBmcm9tICcuL0J1aWxkZXIuanMnO1xuaW1wb3J0IENhbnZhc0luc3RydWN0aW9uLCB7IGJlZ2luUGF0aEluc3RydWN0aW9uLCBzdHJva2VJbnN0cnVjdGlvbiwgfSBmcm9tICcuL0luc3RydWN0aW9uLmpzJztcbnZhciBDYW52YXNMaW5lU3RyaW5nQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzTGluZVN0cmluZ0J1aWxkZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhFeHRlbnQgTWF4aW11bSBleHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNMaW5lU3RyaW5nQnVpbGRlcih0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgdG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHx8IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IGVuZC5cbiAgICAgKi9cbiAgICBDYW52YXNMaW5lU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZHJhd0ZsYXRDb29yZGluYXRlc18gPSBmdW5jdGlvbiAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIHZhciBteUVuZCA9IHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgdmFyIG1vdmVUb0xpbmVUb0luc3RydWN0aW9uID0gW1xuICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uTU9WRV9UT19MSU5FX1RPLFxuICAgICAgICAgICAgbXlCZWdpbixcbiAgICAgICAgICAgIG15RW5kLFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChtb3ZlVG9MaW5lVG9JbnN0cnVjdGlvbik7XG4gICAgICAgIHJldHVybiBlbmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gbGluZVN0cmluZ0dlb21ldHJ5IExpbmUgc3RyaW5nIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5kcmF3TGluZVN0cmluZyA9IGZ1bmN0aW9uIChsaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIHZhciBsaW5lV2lkdGggPSBzdGF0ZS5saW5lV2lkdGg7XG4gICAgICAgIGlmIChzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkIHx8IGxpbmVXaWR0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZShzdGF0ZSwgdGhpcy5hcHBseVN0cm9rZSk7XG4gICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeShsaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgIHN0YXRlLmxpbmVXaWR0aCxcbiAgICAgICAgICAgIHN0YXRlLmxpbmVDYXAsXG4gICAgICAgICAgICBzdGF0ZS5saW5lSm9pbixcbiAgICAgICAgICAgIHN0YXRlLm1pdGVyTGltaXQsXG4gICAgICAgICAgICBzdGF0ZS5saW5lRGFzaCxcbiAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICBdLCBiZWdpblBhdGhJbnN0cnVjdGlvbik7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBsaW5lU3RyaW5nR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBsaW5lU3RyaW5nR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHRoaXMuZHJhd0ZsYXRDb29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5IE11bHRpTGluZVN0cmluZyBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKi9cbiAgICBDYW52YXNMaW5lU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZHJhd011bHRpTGluZVN0cmluZyA9IGZ1bmN0aW9uIChtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdGF0ZS5zdHJva2VTdHlsZTtcbiAgICAgICAgdmFyIGxpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aDtcbiAgICAgICAgaWYgKHN0cm9rZVN0eWxlID09PSB1bmRlZmluZWQgfHwgbGluZVdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVN0cm9rZVN0eWxlKHN0YXRlLCB0aGlzLmFwcGx5U3Ryb2tlKTtcbiAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfU1RST0tFX1NUWUxFLFxuICAgICAgICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgICBzdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgICBzdGF0ZS5saW5lQ2FwLFxuICAgICAgICAgICAgc3RhdGUubGluZUpvaW4sXG4gICAgICAgICAgICBzdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgc3RhdGUubGluZURhc2gsXG4gICAgICAgICAgICBzdGF0ZS5saW5lRGFzaE9mZnNldCxcbiAgICAgICAgXSwgYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB2YXIgZW5kcyA9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LmdldEVuZHMoKTtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gbXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuZHJhd0ZsYXRDb29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChlbmRzW2ldKSwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5lbmRHZW9tZXRyeShmZWF0dXJlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vQnVpbGRlci5qc1wiKS5TZXJpYWxpemFibGVJbnN0cnVjdGlvbnN9IHRoZSBzZXJpYWxpemFibGUgaW5zdHJ1Y3Rpb25zLlxuICAgICAqL1xuICAgIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGlmIChzdGF0ZS5sYXN0U3Ryb2tlICE9IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc3RhdGUubGFzdFN0cm9rZSAhPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5maW5pc2guY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAgICovXG4gICAgQ2FudmFzTGluZVN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGx5U3Ryb2tlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5sYXN0U3Ryb2tlICE9IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc3RhdGUubGFzdFN0cm9rZSAhPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgICAgICAgICBzdGF0ZS5sYXN0U3Ryb2tlID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUubGFzdFN0cm9rZSA9IDA7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuYXBwbHlTdHJva2UuY2FsbCh0aGlzLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc0xpbmVTdHJpbmdCdWlsZGVyO1xufShDYW52YXNCdWlsZGVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNMaW5lU3RyaW5nQnVpbGRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpbmVTdHJpbmdCdWlsZGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2ltcGxpZnlcbiAqL1xuLy8gQmFzZWQgb24gc2ltcGxpZnktanMgaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvc2ltcGxpZnktanNcbi8vIENvcHlyaWdodCAoYykgMjAxMiwgVmxhZGltaXIgQWdhZm9ua2luXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4vL1xuLy8gICAgMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuLy8gICAgICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vXG4vLyAgICAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuLy8gICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuLy8gQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuLy8gSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0Vcbi8vIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkVcbi8vIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1Jcbi8vIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4vLyBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1Ncbi8vIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOXG4vLyBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKVxuLy8gQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbi8vIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuaW1wb3J0IHsgc3F1YXJlZERpc3RhbmNlLCBzcXVhcmVkU2VnbWVudERpc3RhbmNlIH0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGlnaFF1YWxpdHkgSGlnaGVzdCBxdWFsaXR5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBTaW1wbGlmaWVkIGxpbmUgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2ltcGxpZnlMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgaGlnaFF1YWxpdHksIG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzKSB7XG4gICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNcbiAgICAgICAgOiBbXTtcbiAgICBpZiAoIWhpZ2hRdWFsaXR5KSB7XG4gICAgICAgIGVuZCA9IHJhZGlhbERpc3RhbmNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIHN0cmlkZSA9IDI7XG4gICAgfVxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwKTtcbiAgICByZXR1cm4gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gICAgdmFyIG4gPSAoZW5kIC0gb2Zmc2V0KSAvIHN0cmlkZTtcbiAgICBpZiAobiA8IDMpIHtcbiAgICAgICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBtYXJrZXJzID0gbmV3IEFycmF5KG4pO1xuICAgIG1hcmtlcnNbMF0gPSAxO1xuICAgIG1hcmtlcnNbbiAtIDFdID0gMTtcbiAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgdmFyIHN0YWNrID0gW29mZnNldCwgZW5kIC0gc3RyaWRlXTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBsYXN0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIHZhciBmaXJzdCA9IHN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgbWF4U3F1YXJlZERpc3RhbmNlID0gMDtcbiAgICAgICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0XTtcbiAgICAgICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0ICsgMV07XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tsYXN0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW2xhc3QgKyAxXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0ICsgc3RyaWRlOyBpIDwgbGFzdDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgdmFyIHkgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgdmFyIHNxdWFyZWREaXN0YW5jZV8xID0gc3F1YXJlZFNlZ21lbnREaXN0YW5jZSh4LCB5LCB4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlXzEgPiBtYXhTcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgbWF4U3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlXzE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heFNxdWFyZWREaXN0YW5jZSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIG1hcmtlcnNbKGluZGV4IC0gb2Zmc2V0KSAvIHN0cmlkZV0gPSAxO1xuICAgICAgICAgICAgaWYgKGZpcnN0ICsgc3RyaWRlIDwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGZpcnN0LCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggKyBzdHJpZGUgPCBsYXN0KSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChpbmRleCwgbGFzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNbaV0pIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGkgKiBzdHJpZGVdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSAqIHN0cmlkZSArIDFdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEVuZHMgU2ltcGxpZmllZCBlbmRzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlcihmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kcy5wdXNoKHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHNpbXBsaWZpZWRFbmRzcyBTaW1wbGlmaWVkIGVuZHNzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHNzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICAgICAgc2ltcGxpZmllZE9mZnNldCA9IGRvdWdsYXNQZXVja2VyQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhZGlhbERpc3RhbmNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIGlmIChlbmQgPD0gb2Zmc2V0ICsgc3RyaWRlKSB7XG4gICAgICAgIC8vIHplcm8gb3Igb25lIHBvaW50LCBubyBzaW1wbGlmaWNhdGlvbiBwb3NzaWJsZSwgc28gY29weSBhbmQgcmV0dXJuXG4gICAgICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgfVxuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAvLyBjb3B5IGZpcnN0IHBvaW50XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gICAgdmFyIHgyID0geDE7XG4gICAgdmFyIHkyID0geTE7XG4gICAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UoeDEsIHkxLCB4MiwgeTIpID4gc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgLy8gY29weSBwb2ludCBhdCBvZmZzZXRcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICAgICAgICB4MSA9IHgyO1xuICAgICAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoeDIgIT0geDEgfHwgeTIgIT0geTEpIHtcbiAgICAgICAgLy8gY29weSBsYXN0IHBvaW50XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHJldHVybiB7bnVtYmVyfSBSb3VuZGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc25hcCh2YWx1ZSwgdG9sZXJhbmNlKSB7XG4gICAgcmV0dXJuIHRvbGVyYW5jZSAqIE1hdGgucm91bmQodmFsdWUgLyB0b2xlcmFuY2UpO1xufVxuLyoqXG4gKiBTaW1wbGlmaWVzIGEgbGluZSBzdHJpbmcgdXNpbmcgYW4gYWxnb3JpdGhtIGRlc2lnbmVkIGJ5IFRpbSBTY2hhdWIuXG4gKiBDb29yZGluYXRlcyBhcmUgc25hcHBlZCB0byB0aGUgbmVhcmVzdCB2YWx1ZSBpbiBhIHZpcnR1YWwgZ3JpZCBhbmRcbiAqIGNvbnNlY3V0aXZlIGR1cGxpY2F0ZSBjb29yZGluYXRlcyBhcmUgZGlzY2FyZGVkLiAgVGhpcyBlZmZlY3RpdmVseSBwcmVzZXJ2ZXNcbiAqIHRvcG9sb2d5IGFzIHRoZSBzaW1wbGlmaWNhdGlvbiBvZiBhbnkgc3Vic2VjdGlvbiBvZiBhIGxpbmUgc3RyaW5nIGlzXG4gKiBpbmRlcGVuZGVudCBvZiB0aGUgcmVzdCBvZiB0aGUgbGluZSBzdHJpbmcuICBUaGlzIG1lYW5zIHRoYXQsIGZvciBleGFtcGxlcyxcbiAqIHRoZSBjb21tb24gZWRnZSBiZXR3ZWVuIHR3byBwb2x5Z29ucyB3aWxsIGJlIHNpbXBsaWZpZWQgdG8gdGhlIHNhbWUgbGluZVxuICogc3RyaW5nIGluZGVwZW5kZW50bHkgaW4gYm90aCBwb2x5Z29ucy4gIFRoaXMgaW1wbGVtZW50YXRpb24gdXNlcyBhIHNpbmdsZVxuICogcGFzcyBvdmVyIHRoZSBjb29yZGluYXRlcyBhbmQgZWxpbWluYXRlcyBpbnRlcm1lZGlhdGUgY29sbGluZWFyIHBvaW50cy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gICAgLy8gZG8gbm90aGluZyBpZiB0aGUgbGluZSBpcyBlbXB0eVxuICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgICAvLyBzbmFwIHRoZSBmaXJzdCBjb29yZGluYXRlIChQMSlcbiAgICB2YXIgeDEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgIHZhciB5MSA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgLy8gYWRkIHRoZSBmaXJzdCBjb29yZGluYXRlIHRvIHRoZSBvdXRwdXRcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MTtcbiAgICAvLyBmaW5kIHRoZSBuZXh0IGNvb3JkaW5hdGUgdGhhdCBkb2VzIG5vdCBzbmFwIHRvIHRoZSBzYW1lIHZhbHVlIGFzIHRoZSBmaXJzdFxuICAgIC8vIGNvb3JkaW5hdGUgKFAyKVxuICAgIHZhciB4MiwgeTI7XG4gICAgZG8ge1xuICAgICAgICB4MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIHRvbGVyYW5jZSk7XG4gICAgICAgIHkyID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICAgICAgICAvLyBhbGwgY29vcmRpbmF0ZXMgc25hcCB0byB0aGUgc2FtZSB2YWx1ZSwgdGhlIGxpbmUgY29sbGFwc2VzIHRvIGEgcG9pbnRcbiAgICAgICAgICAgIC8vIHB1c2ggdGhlIGxhc3Qgc25hcHBlZCB2YWx1ZSBhbnl3YXkgdG8gZW5zdXJlIHRoYXQgdGhlIG91dHB1dCBjb250YWluc1xuICAgICAgICAgICAgLy8gYXQgbGVhc3QgdHdvIHBvaW50c1xuICAgICAgICAgICAgLy8gRklYTUUgc2hvdWxkIHdlIHJlYWxseSByZXR1cm4gYXQgbGVhc3QgdHdvIHBvaW50cyBhbnl3YXk/XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9IHdoaWxlICh4MiA9PSB4MSAmJiB5MiA9PSB5MSk7XG4gICAgd2hpbGUgKG9mZnNldCA8IGVuZCkge1xuICAgICAgICAvLyBzbmFwIHRoZSBuZXh0IGNvb3JkaW5hdGUgKFAzKVxuICAgICAgICB2YXIgeDMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgICAgICB2YXIgeTMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgLy8gc2tpcCBQMyBpZiBpdCBpcyBlcXVhbCB0byBQMlxuICAgICAgICBpZiAoeDMgPT0geDIgJiYgeTMgPT0geTIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVsdGEgYmV0d2VlbiBQMSBhbmQgUDJcbiAgICAgICAgdmFyIGR4MSA9IHgyIC0geDE7XG4gICAgICAgIHZhciBkeTEgPSB5MiAtIHkxO1xuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDMgYW5kIFAxXG4gICAgICAgIHZhciBkeDIgPSB4MyAtIHgxO1xuICAgICAgICB2YXIgZHkyID0geTMgLSB5MTtcbiAgICAgICAgLy8gaWYgUDEsIFAyLCBhbmQgUDMgYXJlIGNvbGluZWFyIGFuZCBQMyBpcyBmdXJ0aGVyIGZyb20gUDEgdGhhbiBQMiBpcyBmcm9tXG4gICAgICAgIC8vIFAxIGluIHRoZSBzYW1lIGRpcmVjdGlvbiB0aGVuIFAyIGlzIG9uIHRoZSBzdHJhaWdodCBsaW5lIGJldHdlZW4gUDEgYW5kXG4gICAgICAgIC8vIFAzXG4gICAgICAgIGlmIChkeDEgKiBkeTIgPT0gZHkxICogZHgyICYmXG4gICAgICAgICAgICAoKGR4MSA8IDAgJiYgZHgyIDwgZHgxKSB8fCBkeDEgPT0gZHgyIHx8IChkeDEgPiAwICYmIGR4MiA+IGR4MSkpICYmXG4gICAgICAgICAgICAoKGR5MSA8IDAgJiYgZHkyIDwgZHkxKSB8fCBkeTEgPT0gZHkyIHx8IChkeTEgPiAwICYmIGR5MiA+IGR5MSkpKSB7XG4gICAgICAgICAgICAvLyBkaXNjYXJkIFAyIGFuZCBzZXQgUDIgPSBQM1xuICAgICAgICAgICAgeDIgPSB4MztcbiAgICAgICAgICAgIHkyID0geTM7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlaXRoZXIgUDEsIFAyLCBhbmQgUDMgYXJlIG5vdCBjb2xpbmVhciwgb3IgdGhleSBhcmUgY29saW5lYXIgYnV0IFAzIGlzXG4gICAgICAgIC8vIGJldHdlZW4gUDMgYW5kIFAxIG9yIG9uIHRoZSBvcHBvc2l0ZSBoYWxmIG9mIHRoZSBsaW5lIHRvIFAyLiAgYWRkIFAyLFxuICAgICAgICAvLyBhbmQgY29udGludWUgd2l0aCBQMSA9IFAyIGFuZCBQMiA9IFAzXG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgeDIgPSB4MztcbiAgICAgICAgeTIgPSB5MztcbiAgICB9XG4gICAgLy8gYWRkIHRoZSBsYXN0IHBvaW50IChQMilcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCk7XG4gICAgICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gc2ltcGxpZmllZEVuZHNzIFNpbXBsaWZpZWQgZW5kc3MuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaW1wbGlmeS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL1BvbHlnb25CdWlsZGVyXG4gKi9cbmltcG9ydCBDYW52YXNCdWlsZGVyIGZyb20gJy4vQnVpbGRlci5qcyc7XG5pbXBvcnQgQ2FudmFzSW5zdHJ1Y3Rpb24sIHsgYmVnaW5QYXRoSW5zdHJ1Y3Rpb24sIGNsb3NlUGF0aEluc3RydWN0aW9uLCBmaWxsSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uLCB9IGZyb20gJy4vSW5zdHJ1Y3Rpb24uanMnO1xuaW1wb3J0IHsgZGVmYXVsdEZpbGxTdHlsZSB9IGZyb20gJy4uL2NhbnZhcy5qcyc7XG5pbXBvcnQgeyBzbmFwIH0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L3NpbXBsaWZ5LmpzJztcbnZhciBDYW52YXNQb2x5Z29uQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzUG9seWdvbkJ1aWxkZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhFeHRlbnQgTWF4aW11bSBleHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNQb2x5Z29uQnVpbGRlcih0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgdG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHx8IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAgICAgKi9cbiAgICBDYW52YXNQb2x5Z29uQnVpbGRlci5wcm90b3R5cGUuZHJhd0ZsYXRDb29yZGluYXRlc3NfID0gZnVuY3Rpb24gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGZpbGwgPSBzdGF0ZS5maWxsU3R5bGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHN0cm9rZSA9IHN0YXRlLnN0cm9rZVN0eWxlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBudW1FbmRzID0gZW5kcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKGJlZ2luUGF0aEluc3RydWN0aW9uKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1FbmRzOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICAgICAgdmFyIG15QmVnaW4gPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBteUVuZCA9IHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgdHJ1ZSwgIXN0cm9rZSk7XG4gICAgICAgICAgICB2YXIgbW92ZVRvTGluZVRvSW5zdHJ1Y3Rpb24gPSBbXG4gICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uTU9WRV9UT19MSU5FX1RPLFxuICAgICAgICAgICAgICAgIG15QmVnaW4sXG4gICAgICAgICAgICAgICAgbXlFbmQsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChtb3ZlVG9MaW5lVG9JbnN0cnVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChzdHJva2UpIHtcbiAgICAgICAgICAgICAgICAvLyBQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb246IG9ubHkgY2FsbCBjbG9zZVBhdGgoKSB3aGVuIHdlIGhhdmUgYSBzdHJva2UuXG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHRoZSByaW5nIGlzIGNsb3NlZCBhbHJlYWR5IChzZWUgYXBwZW5kRmxhdENvb3JkaW5hdGVzIGFib3ZlKS5cbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGNsb3NlUGF0aEluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKGNsb3NlUGF0aEluc3RydWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsbCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChmaWxsSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChmaWxsSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJva2UpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gY2lyY2xlR2VvbWV0cnkgQ2lyY2xlIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgQ2FudmFzUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiAoY2lyY2xlR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGZpbGxTdHlsZSA9IHN0YXRlLmZpbGxTdHlsZTtcbiAgICAgICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIGlmIChmaWxsU3R5bGUgPT09IHVuZGVmaW5lZCAmJiBzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRGaWxsU3Ryb2tlU3R5bGVzXygpO1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnkoY2lyY2xlR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgICAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9GSUxMX1NUWUxFLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWxsU3R5bGUsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgc3RhdGUubGluZUNhcCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lSm9pbixcbiAgICAgICAgICAgICAgICBzdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoLFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGNpcmNsZUdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gY2lyY2xlR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICB2YXIgY2lyY2xlSW5zdHJ1Y3Rpb24gPSBbQ2FudmFzSW5zdHJ1Y3Rpb24uQ0lSQ0xFLCBteUJlZ2luXTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChiZWdpblBhdGhJbnN0cnVjdGlvbiwgY2lyY2xlSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKGJlZ2luUGF0aEluc3RydWN0aW9uLCBjaXJjbGVJbnN0cnVjdGlvbik7XG4gICAgICAgIGlmIChzdGF0ZS5maWxsU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChmaWxsSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChmaWxsSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5zdHJva2VTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5kR2VvbWV0cnkoZmVhdHVyZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gcG9seWdvbkdlb21ldHJ5IFBvbHlnb24gZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgQ2FudmFzUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLmRyYXdQb2x5Z29uID0gZnVuY3Rpb24gKHBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICB2YXIgZmlsbFN0eWxlID0gc3RhdGUuZmlsbFN0eWxlO1xuICAgICAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdGF0ZS5zdHJva2VTdHlsZTtcbiAgICAgICAgaWYgKGZpbGxTdHlsZSA9PT0gdW5kZWZpbmVkICYmIHN0cm9rZVN0eWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldEZpbGxTdHJva2VTdHlsZXNfKCk7XG4gICAgICAgIHRoaXMuYmVnaW5HZW9tZXRyeShwb2x5Z29uR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgICAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9GSUxMX1NUWUxFLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWxsU3R5bGUsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgc3RhdGUubGluZUNhcCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lSm9pbixcbiAgICAgICAgICAgICAgICBzdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoLFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVuZHMgPSBwb2x5Z29uR2VvbWV0cnkuZ2V0RW5kcygpO1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gcG9seWdvbkdlb21ldHJ5LmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBwb2x5Z29uR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHRoaXMuZHJhd0ZsYXRDb29yZGluYXRlc3NfKGZsYXRDb29yZGluYXRlcywgMCwgXG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGVuZHMpLCBzdHJpZGUpO1xuICAgICAgICB0aGlzLmVuZEdlb21ldHJ5KGZlYXR1cmUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBtdWx0aVBvbHlnb25HZW9tZXRyeSBNdWx0aVBvbHlnb24gZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICovXG4gICAgQ2FudmFzUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLmRyYXdNdWx0aVBvbHlnb24gPSBmdW5jdGlvbiAobXVsdGlQb2x5Z29uR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGZpbGxTdHlsZSA9IHN0YXRlLmZpbGxTdHlsZTtcbiAgICAgICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIGlmIChmaWxsU3R5bGUgPT09IHVuZGVmaW5lZCAmJiBzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRGaWxsU3Ryb2tlU3R5bGVzXygpO1xuICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnkobXVsdGlQb2x5Z29uR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgICAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9GSUxMX1NUWUxFLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWxsU3R5bGUsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgc3RhdGUubGluZUNhcCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5saW5lSm9pbixcbiAgICAgICAgICAgICAgICBzdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoLFxuICAgICAgICAgICAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVuZHNzID0gbXVsdGlQb2x5Z29uR2VvbWV0cnkuZ2V0RW5kc3MoKTtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG11bHRpUG9seWdvbkdlb21ldHJ5LmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBtdWx0aVBvbHlnb25HZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuZHJhd0ZsYXRDb29yZGluYXRlc3NfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZEdlb21ldHJ5KGZlYXR1cmUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9CdWlsZGVyLmpzXCIpLlNlcmlhbGl6YWJsZUluc3RydWN0aW9uc30gdGhlIHNlcmlhbGl6YWJsZSBpbnN0cnVjdGlvbnMuXG4gICAgICovXG4gICAgQ2FudmFzUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuICAgICAgICAvLyBXZSB3YW50IHRvIHByZXNlcnZlIHRvcG9sb2d5IHdoZW4gZHJhd2luZyBwb2x5Z29ucy4gIFBvbHlnb25zIGFyZVxuICAgICAgICAvLyBzaW1wbGlmaWVkIHVzaW5nIHF1YW50aXphdGlvbiBhbmQgcG9pbnQgZWxpbWluYXRpb24uIEhvd2V2ZXIsIHdlIG1pZ2h0XG4gICAgICAgIC8vIGhhdmUgcmVjZWl2ZWQgYSBtaXggb2YgcXVhbnRpemVkIGFuZCBub24tcXVhbnRpemVkIGdlb21ldHJpZXMsIHNvIGVuc3VyZVxuICAgICAgICAvLyB0aGF0IGFsbCBhcmUgcXVhbnRpemVkIGJ5IHF1YW50aXppbmcgYWxsIGNvb3JkaW5hdGVzIGluIHRoZSBiYXRjaC5cbiAgICAgICAgdmFyIHRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlO1xuICAgICAgICBpZiAodG9sZXJhbmNlICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSB0aGlzLmNvb3JkaW5hdGVzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzW2ldID0gc25hcChjb29yZGluYXRlc1tpXSwgdG9sZXJhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5maW5pc2guY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLnNldEZpbGxTdHJva2VTdHlsZXNfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICB2YXIgZmlsbFN0eWxlID0gc3RhdGUuZmlsbFN0eWxlO1xuICAgICAgICBpZiAoZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsbFN0eWxlKHN0YXRlLCB0aGlzLmNyZWF0ZUZpbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5zdHJva2VTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0cm9rZVN0eWxlKHN0YXRlLCB0aGlzLmFwcGx5U3Ryb2tlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc1BvbHlnb25CdWlsZGVyO1xufShDYW52YXNCdWlsZGVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNQb2x5Z29uQnVpbGRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvbHlnb25CdWlsZGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc3RyYWlnaHRjaHVua1xuICovXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhBbmdsZSBNYXhpbXVtIGFjY2VwdGFibGUgYW5nbGUgZGVsdGEgYmV0d2VlbiBzZWdtZW50cy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBTdGFydCBhbmQgZW5kIG9mIHRoZSBmaXJzdCBzdWl0YWJsZSBjaHVuayBvZiB0aGVcbiAqIGdpdmVuIGBmbGF0Q29vcmRpbmF0ZXNgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hpbmdDaHVuayhtYXhBbmdsZSwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgdmFyIGNodW5rU3RhcnQgPSBvZmZzZXQ7XG4gICAgdmFyIGNodW5rRW5kID0gb2Zmc2V0O1xuICAgIHZhciBjaHVua00gPSAwO1xuICAgIHZhciBtID0gMDtcbiAgICB2YXIgc3RhcnQgPSBvZmZzZXQ7XG4gICAgdmFyIGFjb3MsIGksIG0xMiwgbTIzLCB4MSwgeTEsIHgxMiwgeTEyLCB4MjMsIHkyMztcbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgaWYgKHgxICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHgyMyA9IHgyIC0geDE7XG4gICAgICAgICAgICB5MjMgPSB5MiAtIHkxO1xuICAgICAgICAgICAgbTIzID0gTWF0aC5zcXJ0KHgyMyAqIHgyMyArIHkyMyAqIHkyMyk7XG4gICAgICAgICAgICBpZiAoeDEyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtICs9IG0xMjtcbiAgICAgICAgICAgICAgICBhY29zID0gTWF0aC5hY29zKCh4MTIgKiB4MjMgKyB5MTIgKiB5MjMpIC8gKG0xMiAqIG0yMykpO1xuICAgICAgICAgICAgICAgIGlmIChhY29zID4gbWF4QW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0gPiBjaHVua00pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rTSA9IG07XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua1N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua0VuZCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gaSAtIHN0cmlkZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtMTIgPSBtMjM7XG4gICAgICAgICAgICB4MTIgPSB4MjM7XG4gICAgICAgICAgICB5MTIgPSB5MjM7XG4gICAgICAgIH1cbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgbSArPSBtMjM7XG4gICAgcmV0dXJuIG0gPiBjaHVua00gPyBbc3RhcnQsIGldIDogW2NodW5rU3RhcnQsIGNodW5rRW5kXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmFpZ2h0Y2h1bmsuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9UZXh0QnVpbGRlclxuICovXG5pbXBvcnQgQ2FudmFzQnVpbGRlciBmcm9tICcuL0J1aWxkZXIuanMnO1xuaW1wb3J0IENhbnZhc0luc3RydWN0aW9uIGZyb20gJy4vSW5zdHJ1Y3Rpb24uanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuLi8uLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgVGV4dFBsYWNlbWVudCBmcm9tICcuLi8uLi9zdHlsZS9UZXh0UGxhY2VtZW50LmpzJztcbmltcG9ydCB7IGFzQ29sb3JMaWtlIH0gZnJvbSAnLi4vLi4vY29sb3JsaWtlLmpzJztcbmltcG9ydCB7IGRlZmF1bHRGaWxsU3R5bGUsIGRlZmF1bHRGb250LCBkZWZhdWx0TGluZUNhcCwgZGVmYXVsdExpbmVEYXNoLCBkZWZhdWx0TGluZURhc2hPZmZzZXQsIGRlZmF1bHRMaW5lSm9pbiwgZGVmYXVsdExpbmVXaWR0aCwgZGVmYXVsdE1pdGVyTGltaXQsIGRlZmF1bHRQYWRkaW5nLCBkZWZhdWx0U3Ryb2tlU3R5bGUsIGRlZmF1bHRUZXh0QWxpZ24sIGRlZmF1bHRUZXh0QmFzZWxpbmUsIHJlZ2lzdGVyRm9udCwgfSBmcm9tICcuLi9jYW52YXMuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBpbnRlcnNlY3RzIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IG1hdGNoaW5nQ2h1bmsgfSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvc3RyYWlnaHRjaHVuay5qcyc7XG4vKipcbiAqIEBjb25zdFxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBURVhUX0FMSUdOID0ge1xuICAgICdsZWZ0JzogMCxcbiAgICAnZW5kJzogMCxcbiAgICAnY2VudGVyJzogMC41LFxuICAgICdyaWdodCc6IDEsXG4gICAgJ3N0YXJ0JzogMSxcbiAgICAndG9wJzogMCxcbiAgICAnbWlkZGxlJzogMC41LFxuICAgICdoYW5naW5nJzogMC4yLFxuICAgICdhbHBoYWJldGljJzogMC44LFxuICAgICdpZGVvZ3JhcGhpYyc6IDAuOCxcbiAgICAnYm90dG9tJzogMSxcbn07XG52YXIgQ2FudmFzVGV4dEJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc1RleHRCdWlsZGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4RXh0ZW50IE1heGltdW0gZXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzVGV4dEJ1aWxkZXIodG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3Vwc31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlY2x1dHRlckdyb3Vwc187XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8SFRNTENhbnZhc0VsZW1lbnQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFiZWxzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dF8gPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0T2Zmc2V0WF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRPZmZzZXRZXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0Um90YXRlV2l0aFZpZXdfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRSb3RhdGlvbl8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dEZpbGxTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZpbGxTdGF0ZXMgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dFN0cm9rZVN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdHJva2VTdGF0ZXMgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dFN0YXRlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZX0gKi8gKHt9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0U3RhdGVzID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dEtleV8gPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5maWxsS2V5XyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0cm9rZUtleV8gPSAnJztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0J1aWxkZXIuanNcIikuU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zfSB0aGUgc2VyaWFsaXphYmxlIGluc3RydWN0aW9ucy5cbiAgICAgKi9cbiAgICBDYW52YXNUZXh0QnVpbGRlci5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5zdHJ1Y3Rpb25zID0gX3N1cGVyLnByb3RvdHlwZS5maW5pc2guY2FsbCh0aGlzKTtcbiAgICAgICAgaW5zdHJ1Y3Rpb25zLnRleHRTdGF0ZXMgPSB0aGlzLnRleHRTdGF0ZXM7XG4gICAgICAgIGluc3RydWN0aW9ucy5maWxsU3RhdGVzID0gdGhpcy5maWxsU3RhdGVzO1xuICAgICAgICBpbnN0cnVjdGlvbnMuc3Ryb2tlU3RhdGVzID0gdGhpcy5zdHJva2VTdGF0ZXM7XG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqL1xuICAgIENhbnZhc1RleHRCdWlsZGVyLnByb3RvdHlwZS5kcmF3VGV4dCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgICAgICB2YXIgZmlsbFN0YXRlID0gdGhpcy50ZXh0RmlsbFN0YXRlXztcbiAgICAgICAgdmFyIHN0cm9rZVN0YXRlID0gdGhpcy50ZXh0U3Ryb2tlU3RhdGVfO1xuICAgICAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVfO1xuICAgICAgICBpZiAodGhpcy50ZXh0XyA9PT0gJycgfHwgIXRleHRTdGF0ZSB8fCAoIWZpbGxTdGF0ZSAmJiAhc3Ryb2tlU3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIHZhciBnZW9tZXRyeVR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBudWxsO1xuICAgICAgICB2YXIgZW5kID0gMjtcbiAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICB2YXIgaSwgaWk7XG4gICAgICAgIGlmICh0ZXh0U3RhdGUucGxhY2VtZW50ID09PSBUZXh0UGxhY2VtZW50LkxJTkUpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJzZWN0cyh0aGlzLmdldEJ1ZmZlcmVkTWF4RXh0ZW50KCksIGdlb21ldHJ5LmdldEV4dGVudCgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbmRzID0gdm9pZCAwO1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnlUeXBlID09IEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORykge1xuICAgICAgICAgICAgICAgIGVuZHMgPSBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnZW9tZXRyeVR5cGUgPT0gR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HKSB7XG4gICAgICAgICAgICAgICAgZW5kcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRFbmRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnZW9tZXRyeVR5cGUgPT0gR2VvbWV0cnlUeXBlLlBPTFlHT04pIHtcbiAgICAgICAgICAgICAgICBlbmRzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KVxuICAgICAgICAgICAgICAgICAgICAuZ2V0RW5kcygpXG4gICAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGdlb21ldHJ5VHlwZSA9PSBHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTikge1xuICAgICAgICAgICAgICAgIHZhciBlbmRzcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRFbmRzcygpO1xuICAgICAgICAgICAgICAgIGVuZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kcy5wdXNoKGVuZHNzW2ldWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJlZ2luR2VvbWV0cnkoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgICAgICAgICAgdmFyIHRleHRBbGlnbiA9IHRleHRTdGF0ZS50ZXh0QWxpZ247XG4gICAgICAgICAgICB2YXIgZmxhdE9mZnNldCA9IDA7XG4gICAgICAgICAgICB2YXIgZmxhdEVuZCA9IHZvaWQgMDtcbiAgICAgICAgICAgIGZvciAodmFyIG8gPSAwLCBvbyA9IGVuZHMubGVuZ3RoOyBvIDwgb287ICsrbykge1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0QWxpZ24gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IG1hdGNoaW5nQ2h1bmsodGV4dFN0YXRlLm1heEFuZ2xlLCBmbGF0Q29vcmRpbmF0ZXMsIGZsYXRPZmZzZXQsIGVuZHNbb10sIHN0cmlkZSk7XG4gICAgICAgICAgICAgICAgICAgIGZsYXRPZmZzZXQgPSByYW5nZVswXTtcbiAgICAgICAgICAgICAgICAgICAgZmxhdEVuZCA9IHJhbmdlWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhdEVuZCA9IGVuZHNbb107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoaSA9IGZsYXRPZmZzZXQ7IGkgPCBmbGF0RW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzW2ldLCBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZW5kID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZmxhdE9mZnNldCA9IGVuZHNbb107XG4gICAgICAgICAgICAgICAgdmFyIGRlY2x1dHRlckdyb3VwID0gdGhpcy5kZWNsdXR0ZXJHcm91cHNfXG4gICAgICAgICAgICAgICAgICAgID8gbyA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRlY2x1dHRlckdyb3Vwc19bMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogW10uY29uY2F0KHRoaXMuZGVjbHV0dGVyR3JvdXBzX1swXSlcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0NoYXJzXyhiZWdpbiwgZW5kLCBkZWNsdXR0ZXJHcm91cCk7XG4gICAgICAgICAgICAgICAgYmVnaW4gPSBlbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuZEdlb21ldHJ5KGZlYXR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5V2lkdGhzID0gbnVsbDtcbiAgICAgICAgICAgIGlmICghdGV4dFN0YXRlLm92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnlXaWR0aHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZ2VvbWV0cnlUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRNaWRwb2ludCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5DSVJDTEU6XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRGbGF0TWlkcG9pbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHN0cmlkZSA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdEludGVyaW9yUG9pbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXh0U3RhdGUub3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5V2lkdGhzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdIC8gdGhpcy5yZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdHJpZGUgPSAzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOlxuICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJpb3JQb2ludHMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdEludGVyaW9yUG9pbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGludGVyaW9yUG9pbnRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGV4dFN0YXRlLm92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnlXaWR0aHMucHVzaChpbnRlcmlvclBvaW50c1tpICsgMl0gLyB0aGlzLnJlc29sdXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzLnB1c2goaW50ZXJpb3JQb2ludHNbaV0sIGludGVyaW9yUG9pbnRzW2kgKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RyaWRlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVuZCA9IHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgMCwgZW5kLCBzdHJpZGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnNhdmVUZXh0U3RhdGVzXygpO1xuICAgICAgICAgICAgaWYgKHRleHRTdGF0ZS5iYWNrZ3JvdW5kRmlsbCB8fCB0ZXh0U3RhdGUuYmFja2dyb3VuZFN0cm9rZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsbFN0cm9rZVN0eWxlKHRleHRTdGF0ZS5iYWNrZ3JvdW5kRmlsbCwgdGV4dFN0YXRlLmJhY2tncm91bmRTdHJva2UpO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhdGUuYmFja2dyb3VuZEZpbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWxsU3R5bGUodGhpcy5zdGF0ZSwgdGhpcy5jcmVhdGVGaWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaCh0aGlzLmNyZWF0ZUZpbGwodGhpcy5zdGF0ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGV4dFN0YXRlLmJhY2tncm91bmRTdHJva2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZSh0aGlzLnN0YXRlLCB0aGlzLmFwcGx5U3Ryb2tlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaCh0aGlzLmNyZWF0ZVN0cm9rZSh0aGlzLnN0YXRlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgICAgICAgIC8vIGFkanVzdCBwYWRkaW5nIGZvciBuZWdhdGl2ZSBzY2FsZVxuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSB0ZXh0U3RhdGUucGFkZGluZztcbiAgICAgICAgICAgIGlmIChwYWRkaW5nICE9IGRlZmF1bHRQYWRkaW5nICYmXG4gICAgICAgICAgICAgICAgKHRleHRTdGF0ZS5zY2FsZVswXSA8IDAgfHwgdGV4dFN0YXRlLnNjYWxlWzFdIDwgMCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcDAgPSB0ZXh0U3RhdGUucGFkZGluZ1swXTtcbiAgICAgICAgICAgICAgICB2YXIgcDEgPSB0ZXh0U3RhdGUucGFkZGluZ1sxXTtcbiAgICAgICAgICAgICAgICB2YXIgcDIgPSB0ZXh0U3RhdGUucGFkZGluZ1syXTtcbiAgICAgICAgICAgICAgICB2YXIgcDMgPSB0ZXh0U3RhdGUucGFkZGluZ1szXTtcbiAgICAgICAgICAgICAgICBpZiAodGV4dFN0YXRlLnNjYWxlWzBdIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBwMSA9IC1wMTtcbiAgICAgICAgICAgICAgICAgICAgcDMgPSAtcDM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0ZXh0U3RhdGUuc2NhbGVbMV0gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHAwID0gLXAwO1xuICAgICAgICAgICAgICAgICAgICBwMiA9IC1wMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFkZGluZyA9IFtwMCwgcDEsIHAyLCBwM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGUgaW1hZ2UgaXMgdW5rbm93biBhdCB0aGlzIHN0YWdlIHNvIHdlIHBhc3MgbnVsbDsgaXQgd2lsbCBiZSBjb21wdXRlZCBhdCByZW5kZXIgdGltZS5cbiAgICAgICAgICAgIC8vIEZvciBjbGFyaXR5LCB3ZSBwYXNzIE5hTiBmb3Igb2Zmc2V0WCwgb2Zmc2V0WSwgd2lkdGggYW5kIGhlaWdodCwgd2hpY2ggd2lsbCBiZSBjb21wdXRlZCBhdFxuICAgICAgICAgICAgLy8gcmVuZGVyIHRpbWUuXG4gICAgICAgICAgICB2YXIgcGl4ZWxSYXRpb18xID0gdGhpcy5waXhlbFJhdGlvO1xuICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgICAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSxcbiAgICAgICAgICAgICAgICBiZWdpbixcbiAgICAgICAgICAgICAgICBlbmQsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgICAgTmFOLFxuICAgICAgICAgICAgICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBzXyxcbiAgICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Um90YXRlV2l0aFZpZXdfLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dFJvdGF0aW9uXyxcbiAgICAgICAgICAgICAgICBbMSwgMV0sXG4gICAgICAgICAgICAgICAgTmFOLFxuICAgICAgICAgICAgICAgIHBhZGRpbmcgPT0gZGVmYXVsdFBhZGRpbmdcbiAgICAgICAgICAgICAgICAgICAgPyBkZWZhdWx0UGFkZGluZ1xuICAgICAgICAgICAgICAgICAgICA6IHBhZGRpbmcubWFwKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcCAqIHBpeGVsUmF0aW9fMTtcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgISF0ZXh0U3RhdGUuYmFja2dyb3VuZEZpbGwsXG4gICAgICAgICAgICAgICAgISF0ZXh0U3RhdGUuYmFja2dyb3VuZFN0cm9rZSxcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRfLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dEtleV8sXG4gICAgICAgICAgICAgICAgdGhpcy5zdHJva2VLZXlfLFxuICAgICAgICAgICAgICAgIHRoaXMuZmlsbEtleV8sXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0T2Zmc2V0WF8sXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0T2Zmc2V0WV8sXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnlXaWR0aHMsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IDEgLyBwaXhlbFJhdGlvXzE7XG4gICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0lNQUdFLFxuICAgICAgICAgICAgICAgIGJlZ2luLFxuICAgICAgICAgICAgICAgIGVuZCxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIE5hTixcbiAgICAgICAgICAgICAgICBOYU4sXG4gICAgICAgICAgICAgICAgdGhpcy5kZWNsdXR0ZXJHcm91cHNfLFxuICAgICAgICAgICAgICAgIE5hTixcbiAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRSb3RhdGVXaXRoVmlld18sXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Um90YXRpb25fLFxuICAgICAgICAgICAgICAgIFtzY2FsZSwgc2NhbGVdLFxuICAgICAgICAgICAgICAgIE5hTixcbiAgICAgICAgICAgICAgICBwYWRkaW5nLFxuICAgICAgICAgICAgICAgICEhdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsLFxuICAgICAgICAgICAgICAgICEhdGV4dFN0YXRlLmJhY2tncm91bmRTdHJva2UsXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0XyxcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRLZXlfLFxuICAgICAgICAgICAgICAgIHRoaXMuc3Ryb2tlS2V5XyxcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxLZXlfLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dE9mZnNldFhfLFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dE9mZnNldFlfLFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5V2lkdGhzLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB0aGlzLmVuZEdlb21ldHJ5KGZlYXR1cmUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENhbnZhc1RleHRCdWlsZGVyLnByb3RvdHlwZS5zYXZlVGV4dFN0YXRlc18gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdHJva2VTdGF0ZSA9IHRoaXMudGV4dFN0cm9rZVN0YXRlXztcbiAgICAgICAgdmFyIHRleHRTdGF0ZSA9IHRoaXMudGV4dFN0YXRlXztcbiAgICAgICAgdmFyIGZpbGxTdGF0ZSA9IHRoaXMudGV4dEZpbGxTdGF0ZV87XG4gICAgICAgIHZhciBzdHJva2VLZXkgPSB0aGlzLnN0cm9rZUtleV87XG4gICAgICAgIGlmIChzdHJva2VTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKCEoc3Ryb2tlS2V5IGluIHRoaXMuc3Ryb2tlU3RhdGVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3Ryb2tlU3RhdGVzW3N0cm9rZUtleV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgbGluZUNhcDogc3Ryb2tlU3RhdGUubGluZUNhcCxcbiAgICAgICAgICAgICAgICAgICAgbGluZURhc2hPZmZzZXQ6IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IHN0cm9rZVN0YXRlLmxpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgbGluZUpvaW46IHN0cm9rZVN0YXRlLmxpbmVKb2luLFxuICAgICAgICAgICAgICAgICAgICBtaXRlckxpbWl0OiBzdHJva2VTdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICAgICAgICAgICAgICBsaW5lRGFzaDogc3Ryb2tlU3RhdGUubGluZURhc2gsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdGV4dEtleSA9IHRoaXMudGV4dEtleV87XG4gICAgICAgIGlmICghKHRleHRLZXkgaW4gdGhpcy50ZXh0U3RhdGVzKSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0U3RhdGVzW3RleHRLZXldID0ge1xuICAgICAgICAgICAgICAgIGZvbnQ6IHRleHRTdGF0ZS5mb250LFxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogdGV4dFN0YXRlLnRleHRBbGlnbiB8fCBkZWZhdWx0VGV4dEFsaWduLFxuICAgICAgICAgICAgICAgIHRleHRCYXNlbGluZTogdGV4dFN0YXRlLnRleHRCYXNlbGluZSB8fCBkZWZhdWx0VGV4dEJhc2VsaW5lLFxuICAgICAgICAgICAgICAgIHNjYWxlOiB0ZXh0U3RhdGUuc2NhbGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBmaWxsS2V5ID0gdGhpcy5maWxsS2V5XztcbiAgICAgICAgaWYgKGZpbGxTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKCEoZmlsbEtleSBpbiB0aGlzLmZpbGxTdGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsU3RhdGVzW2ZpbGxLZXldID0ge1xuICAgICAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IGZpbGxTdGF0ZS5maWxsU3R5bGUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYmVnaW4gQmVnaW4uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9IGRlY2x1dHRlckdyb3VwIERlY2x1dHRlciBncm91cC5cbiAgICAgKi9cbiAgICBDYW52YXNUZXh0QnVpbGRlci5wcm90b3R5cGUuZHJhd0NoYXJzXyA9IGZ1bmN0aW9uIChiZWdpbiwgZW5kLCBkZWNsdXR0ZXJHcm91cCkge1xuICAgICAgICB2YXIgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV87XG4gICAgICAgIHZhciB0ZXh0U3RhdGUgPSB0aGlzLnRleHRTdGF0ZV87XG4gICAgICAgIHZhciBzdHJva2VLZXkgPSB0aGlzLnN0cm9rZUtleV87XG4gICAgICAgIHZhciB0ZXh0S2V5ID0gdGhpcy50ZXh0S2V5XztcbiAgICAgICAgdmFyIGZpbGxLZXkgPSB0aGlzLmZpbGxLZXlfO1xuICAgICAgICB0aGlzLnNhdmVUZXh0U3RhdGVzXygpO1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIGJhc2VsaW5lID0gVEVYVF9BTElHTlt0ZXh0U3RhdGUudGV4dEJhc2VsaW5lXTtcbiAgICAgICAgdmFyIG9mZnNldFkgPSB0aGlzLnRleHRPZmZzZXRZXyAqIHBpeGVsUmF0aW87XG4gICAgICAgIHZhciB0ZXh0ID0gdGhpcy50ZXh0XztcbiAgICAgICAgdmFyIHN0cm9rZVdpZHRoID0gc3Ryb2tlU3RhdGVcbiAgICAgICAgICAgID8gKHN0cm9rZVN0YXRlLmxpbmVXaWR0aCAqIE1hdGguYWJzKHRleHRTdGF0ZS5zY2FsZVswXSkpIC8gMlxuICAgICAgICAgICAgOiAwO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkRSQVdfQ0hBUlMsXG4gICAgICAgICAgICBiZWdpbixcbiAgICAgICAgICAgIGVuZCxcbiAgICAgICAgICAgIGJhc2VsaW5lLFxuICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXAsXG4gICAgICAgICAgICB0ZXh0U3RhdGUub3ZlcmZsb3csXG4gICAgICAgICAgICBmaWxsS2V5LFxuICAgICAgICAgICAgdGV4dFN0YXRlLm1heEFuZ2xlLFxuICAgICAgICAgICAgcGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIG9mZnNldFksXG4gICAgICAgICAgICBzdHJva2VLZXksXG4gICAgICAgICAgICBzdHJva2VXaWR0aCAqIHBpeGVsUmF0aW8sXG4gICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgdGV4dEtleSxcbiAgICAgICAgICAgIDEsXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgICAgIENhbnZhc0luc3RydWN0aW9uLkRSQVdfQ0hBUlMsXG4gICAgICAgICAgICBiZWdpbixcbiAgICAgICAgICAgIGVuZCxcbiAgICAgICAgICAgIGJhc2VsaW5lLFxuICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXAsXG4gICAgICAgICAgICB0ZXh0U3RhdGUub3ZlcmZsb3csXG4gICAgICAgICAgICBmaWxsS2V5LFxuICAgICAgICAgICAgdGV4dFN0YXRlLm1heEFuZ2xlLFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIG9mZnNldFksXG4gICAgICAgICAgICBzdHJva2VLZXksXG4gICAgICAgICAgICBzdHJva2VXaWR0aCxcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICB0ZXh0S2V5LFxuICAgICAgICAgICAgMSAvIHBpeGVsUmF0aW8sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9UZXh0LmpzXCIpLmRlZmF1bHR9IHRleHRTdHlsZSBUZXh0IHN0eWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3Vwc30gZGVjbHV0dGVyR3JvdXBzIERlY2x1dHRlci5cbiAgICAgKi9cbiAgICBDYW52YXNUZXh0QnVpbGRlci5wcm90b3R5cGUuc2V0VGV4dFN0eWxlID0gZnVuY3Rpb24gKHRleHRTdHlsZSwgZGVjbHV0dGVyR3JvdXBzKSB7XG4gICAgICAgIHZhciB0ZXh0U3RhdGUsIGZpbGxTdGF0ZSwgc3Ryb2tlU3RhdGU7XG4gICAgICAgIGlmICghdGV4dFN0eWxlKSB7XG4gICAgICAgICAgICB0aGlzLnRleHRfID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlY2x1dHRlckdyb3Vwc18gPSBkZWNsdXR0ZXJHcm91cHM7XG4gICAgICAgICAgICB2YXIgdGV4dEZpbGxTdHlsZSA9IHRleHRTdHlsZS5nZXRGaWxsKCk7XG4gICAgICAgICAgICBpZiAoIXRleHRGaWxsU3R5bGUpIHtcbiAgICAgICAgICAgICAgICBmaWxsU3RhdGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dEZpbGxTdGF0ZV8gPSBmaWxsU3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaWxsU3RhdGUgPSB0aGlzLnRleHRGaWxsU3RhdGVfO1xuICAgICAgICAgICAgICAgIGlmICghZmlsbFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxTdGF0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdGF0ZX0gKi8gKHt9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0RmlsbFN0YXRlXyA9IGZpbGxTdGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsbFN0YXRlLmZpbGxTdHlsZSA9IGFzQ29sb3JMaWtlKHRleHRGaWxsU3R5bGUuZ2V0Q29sb3IoKSB8fCBkZWZhdWx0RmlsbFN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGUgPSB0ZXh0U3R5bGUuZ2V0U3Ryb2tlKCk7XG4gICAgICAgICAgICBpZiAoIXRleHRTdHJva2VTdHlsZSkge1xuICAgICAgICAgICAgICAgIHN0cm9rZVN0YXRlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBzdHJva2VTdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0cm9rZVN0YXRlID0gdGhpcy50ZXh0U3Ryb2tlU3RhdGVfO1xuICAgICAgICAgICAgICAgIGlmICghc3Ryb2tlU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX0gKi8gKHt9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0U3Ryb2tlU3RhdGVfID0gc3Ryb2tlU3RhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsaW5lRGFzaCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lRGFzaCgpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lRGFzaE9mZnNldCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lRGFzaE9mZnNldCgpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lV2lkdGggPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgbWl0ZXJMaW1pdCA9IHRleHRTdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZUNhcCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lQ2FwKCkgfHwgZGVmYXVsdExpbmVDYXA7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZURhc2ggPSBsaW5lRGFzaCA/IGxpbmVEYXNoLnNsaWNlKCkgOiBkZWZhdWx0TGluZURhc2g7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgPVxuICAgICAgICAgICAgICAgICAgICBsaW5lRGFzaE9mZnNldCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdExpbmVEYXNoT2Zmc2V0IDogbGluZURhc2hPZmZzZXQ7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZUpvaW4gPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZUpvaW4oKSB8fCBkZWZhdWx0TGluZUpvaW47XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZVdpZHRoID1cbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoID09PSB1bmRlZmluZWQgPyBkZWZhdWx0TGluZVdpZHRoIDogbGluZVdpZHRoO1xuICAgICAgICAgICAgICAgIHN0cm9rZVN0YXRlLm1pdGVyTGltaXQgPVxuICAgICAgICAgICAgICAgICAgICBtaXRlckxpbWl0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0TWl0ZXJMaW1pdCA6IG1pdGVyTGltaXQ7XG4gICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUgPSBhc0NvbG9yTGlrZSh0ZXh0U3Ryb2tlU3R5bGUuZ2V0Q29sb3IoKSB8fCBkZWZhdWx0U3Ryb2tlU3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVfO1xuICAgICAgICAgICAgdmFyIGZvbnQgPSB0ZXh0U3R5bGUuZ2V0Rm9udCgpIHx8IGRlZmF1bHRGb250O1xuICAgICAgICAgICAgcmVnaXN0ZXJGb250KGZvbnQpO1xuICAgICAgICAgICAgdmFyIHRleHRTY2FsZSA9IHRleHRTdHlsZS5nZXRTY2FsZUFycmF5KCk7XG4gICAgICAgICAgICB0ZXh0U3RhdGUub3ZlcmZsb3cgPSB0ZXh0U3R5bGUuZ2V0T3ZlcmZsb3coKTtcbiAgICAgICAgICAgIHRleHRTdGF0ZS5mb250ID0gZm9udDtcbiAgICAgICAgICAgIHRleHRTdGF0ZS5tYXhBbmdsZSA9IHRleHRTdHlsZS5nZXRNYXhBbmdsZSgpO1xuICAgICAgICAgICAgdGV4dFN0YXRlLnBsYWNlbWVudCA9IHRleHRTdHlsZS5nZXRQbGFjZW1lbnQoKTtcbiAgICAgICAgICAgIHRleHRTdGF0ZS50ZXh0QWxpZ24gPSB0ZXh0U3R5bGUuZ2V0VGV4dEFsaWduKCk7XG4gICAgICAgICAgICB0ZXh0U3RhdGUudGV4dEJhc2VsaW5lID1cbiAgICAgICAgICAgICAgICB0ZXh0U3R5bGUuZ2V0VGV4dEJhc2VsaW5lKCkgfHwgZGVmYXVsdFRleHRCYXNlbGluZTtcbiAgICAgICAgICAgIHRleHRTdGF0ZS5iYWNrZ3JvdW5kRmlsbCA9IHRleHRTdHlsZS5nZXRCYWNrZ3JvdW5kRmlsbCgpO1xuICAgICAgICAgICAgdGV4dFN0YXRlLmJhY2tncm91bmRTdHJva2UgPSB0ZXh0U3R5bGUuZ2V0QmFja2dyb3VuZFN0cm9rZSgpO1xuICAgICAgICAgICAgdGV4dFN0YXRlLnBhZGRpbmcgPSB0ZXh0U3R5bGUuZ2V0UGFkZGluZygpIHx8IGRlZmF1bHRQYWRkaW5nO1xuICAgICAgICAgICAgdGV4dFN0YXRlLnNjYWxlID0gdGV4dFNjYWxlID09PSB1bmRlZmluZWQgPyBbMSwgMV0gOiB0ZXh0U2NhbGU7XG4gICAgICAgICAgICB2YXIgdGV4dE9mZnNldFggPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WCgpO1xuICAgICAgICAgICAgdmFyIHRleHRPZmZzZXRZID0gdGV4dFN0eWxlLmdldE9mZnNldFkoKTtcbiAgICAgICAgICAgIHZhciB0ZXh0Um90YXRlV2l0aFZpZXcgPSB0ZXh0U3R5bGUuZ2V0Um90YXRlV2l0aFZpZXcoKTtcbiAgICAgICAgICAgIHZhciB0ZXh0Um90YXRpb24gPSB0ZXh0U3R5bGUuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMudGV4dF8gPSB0ZXh0U3R5bGUuZ2V0VGV4dCgpIHx8ICcnO1xuICAgICAgICAgICAgdGhpcy50ZXh0T2Zmc2V0WF8gPSB0ZXh0T2Zmc2V0WCA9PT0gdW5kZWZpbmVkID8gMCA6IHRleHRPZmZzZXRYO1xuICAgICAgICAgICAgdGhpcy50ZXh0T2Zmc2V0WV8gPSB0ZXh0T2Zmc2V0WSA9PT0gdW5kZWZpbmVkID8gMCA6IHRleHRPZmZzZXRZO1xuICAgICAgICAgICAgdGhpcy50ZXh0Um90YXRlV2l0aFZpZXdfID1cbiAgICAgICAgICAgICAgICB0ZXh0Um90YXRlV2l0aFZpZXcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdGV4dFJvdGF0ZVdpdGhWaWV3O1xuICAgICAgICAgICAgdGhpcy50ZXh0Um90YXRpb25fID0gdGV4dFJvdGF0aW9uID09PSB1bmRlZmluZWQgPyAwIDogdGV4dFJvdGF0aW9uO1xuICAgICAgICAgICAgdGhpcy5zdHJva2VLZXlfID0gc3Ryb2tlU3RhdGVcbiAgICAgICAgICAgICAgICA/ICh0eXBlb2Ygc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUgPT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZVxuICAgICAgICAgICAgICAgICAgICA6IGdldFVpZChzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSkpICtcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZUNhcCArXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0ICtcbiAgICAgICAgICAgICAgICAgICAgJ3wnICtcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZVdpZHRoICtcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZUpvaW4gK1xuICAgICAgICAgICAgICAgICAgICBzdHJva2VTdGF0ZS5taXRlckxpbWl0ICtcbiAgICAgICAgICAgICAgICAgICAgJ1snICtcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZURhc2guam9pbigpICtcbiAgICAgICAgICAgICAgICAgICAgJ10nXG4gICAgICAgICAgICAgICAgOiAnJztcbiAgICAgICAgICAgIHRoaXMudGV4dEtleV8gPVxuICAgICAgICAgICAgICAgIHRleHRTdGF0ZS5mb250ICtcbiAgICAgICAgICAgICAgICAgICAgdGV4dFN0YXRlLnNjYWxlICtcbiAgICAgICAgICAgICAgICAgICAgKHRleHRTdGF0ZS50ZXh0QWxpZ24gfHwgJz8nKSArXG4gICAgICAgICAgICAgICAgICAgICh0ZXh0U3RhdGUudGV4dEJhc2VsaW5lIHx8ICc/Jyk7XG4gICAgICAgICAgICB0aGlzLmZpbGxLZXlfID0gZmlsbFN0YXRlXG4gICAgICAgICAgICAgICAgPyB0eXBlb2YgZmlsbFN0YXRlLmZpbGxTdHlsZSA9PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/IGZpbGxTdGF0ZS5maWxsU3R5bGVcbiAgICAgICAgICAgICAgICAgICAgOiAnfCcgKyBnZXRVaWQoZmlsbFN0YXRlLmZpbGxTdHlsZSlcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzVGV4dEJ1aWxkZXI7XG59KENhbnZhc0J1aWxkZXIpKTtcbmV4cG9ydCBkZWZhdWx0IENhbnZhc1RleHRCdWlsZGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGV4dEJ1aWxkZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwXG4gKi9cbmltcG9ydCBCdWlsZGVyIGZyb20gJy4vQnVpbGRlci5qcyc7XG5pbXBvcnQgSW1hZ2VCdWlsZGVyIGZyb20gJy4vSW1hZ2VCdWlsZGVyLmpzJztcbmltcG9ydCBMaW5lU3RyaW5nQnVpbGRlciBmcm9tICcuL0xpbmVTdHJpbmdCdWlsZGVyLmpzJztcbmltcG9ydCBQb2x5Z29uQnVpbGRlciBmcm9tICcuL1BvbHlnb25CdWlsZGVyLmpzJztcbmltcG9ydCBUZXh0QnVpbGRlciBmcm9tICcuL1RleHRCdWlsZGVyLmpzJztcbi8qKlxuICogQHR5cGUge09iamVjdDxpbXBvcnQoXCIuL0J1aWxkZXJUeXBlXCIpLmRlZmF1bHQsIHR5cGVvZiBCdWlsZGVyPn1cbiAqL1xudmFyIEJBVENIX0NPTlNUUlVDVE9SUyA9IHtcbiAgICAnQ2lyY2xlJzogUG9seWdvbkJ1aWxkZXIsXG4gICAgJ0RlZmF1bHQnOiBCdWlsZGVyLFxuICAgICdJbWFnZSc6IEltYWdlQnVpbGRlcixcbiAgICAnTGluZVN0cmluZyc6IExpbmVTdHJpbmdCdWlsZGVyLFxuICAgICdQb2x5Z29uJzogUG9seWdvbkJ1aWxkZXIsXG4gICAgJ1RleHQnOiBUZXh0QnVpbGRlcixcbn07XG52YXIgQnVpbGRlckdyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4RXh0ZW50IE1heCBleHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRlY2x1dHRlciBEZWNsdXR0ZXJpbmcgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCdWlsZGVyR3JvdXAodG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIGRlY2x1dHRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlY2x1dHRlcl8gPSBkZWNsdXR0ZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3Vwc31cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50b2xlcmFuY2VfID0gdG9sZXJhbmNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heEV4dGVudF8gPSBtYXhFeHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsICFPYmplY3Q8aW1wb3J0KFwiLi9CdWlsZGVyVHlwZVwiKS5kZWZhdWx0LCBCdWlsZGVyPj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1aWxkZXJzQnlaSW5kZXhfID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZ3JvdXAgR3JvdXAgd2l0aCBwcmV2aW91cyBidWlsZGVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2NhbnZhc1wiKS5EZWNsdXR0ZXJHcm91cHN9IFRoZSByZXN1bHRpbmcgaW5zdHJ1Y3Rpb24gZ3JvdXBzLlxuICAgICAqL1xuICAgIEJ1aWxkZXJHcm91cC5wcm90b3R5cGUuYWRkRGVjbHV0dGVyID0gZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8Kj59ICovXG4gICAgICAgIHZhciBkZWNsdXR0ZXIgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5kZWNsdXR0ZXJfKSB7XG4gICAgICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXIgPSB0aGlzLmRlY2x1dHRlckdyb3Vwc187XG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChkZWNsdXR0ZXJbMF1bMF0pKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXIgPSBbWzFdXTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlY2x1dHRlckdyb3Vwc18gPSBkZWNsdXR0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlY2x1dHRlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PGltcG9ydChcIi4vQnVpbGRlclR5cGVcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi9CdWlsZGVyLmpzXCIpLlNlcmlhbGl6YWJsZUluc3RydWN0aW9ucz4+fSBUaGUgc2VyaWFsaXphYmxlIGluc3RydWN0aW9uc1xuICAgICAqL1xuICAgIEJ1aWxkZXJHcm91cC5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYnVpbGRlckluc3RydWN0aW9ucyA9IHt9O1xuICAgICAgICBmb3IgKHZhciB6S2V5IGluIHRoaXMuYnVpbGRlcnNCeVpJbmRleF8pIHtcbiAgICAgICAgICAgIGJ1aWxkZXJJbnN0cnVjdGlvbnNbektleV0gPSBidWlsZGVySW5zdHJ1Y3Rpb25zW3pLZXldIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGJ1aWxkZXJzID0gdGhpcy5idWlsZGVyc0J5WkluZGV4X1t6S2V5XTtcbiAgICAgICAgICAgIGZvciAodmFyIGJ1aWxkZXJLZXkgaW4gYnVpbGRlcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVpbGRlckluc3RydWN0aW9uID0gYnVpbGRlcnNbYnVpbGRlcktleV0uZmluaXNoKCk7XG4gICAgICAgICAgICAgICAgYnVpbGRlckluc3RydWN0aW9uc1t6S2V5XVtidWlsZGVyS2V5XSA9IGJ1aWxkZXJJbnN0cnVjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVpbGRlckluc3RydWN0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gekluZGV4IFogaW5kZXguXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHR9IGJ1aWxkZXJUeXBlIFJlcGxheSB0eXBlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1ZlY3RvckNvbnRleHQuanNcIikuZGVmYXVsdH0gUmVwbGF5LlxuICAgICAqL1xuICAgIEJ1aWxkZXJHcm91cC5wcm90b3R5cGUuZ2V0QnVpbGRlciA9IGZ1bmN0aW9uICh6SW5kZXgsIGJ1aWxkZXJUeXBlKSB7XG4gICAgICAgIHZhciB6SW5kZXhLZXkgPSB6SW5kZXggIT09IHVuZGVmaW5lZCA/IHpJbmRleC50b1N0cmluZygpIDogJzAnO1xuICAgICAgICB2YXIgcmVwbGF5cyA9IHRoaXMuYnVpbGRlcnNCeVpJbmRleF9bekluZGV4S2V5XTtcbiAgICAgICAgaWYgKHJlcGxheXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVwbGF5cyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5idWlsZGVyc0J5WkluZGV4X1t6SW5kZXhLZXldID0gcmVwbGF5cztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVwbGF5ID0gcmVwbGF5c1tidWlsZGVyVHlwZV07XG4gICAgICAgIGlmIChyZXBsYXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIENvbnN0cnVjdG9yID0gQkFUQ0hfQ09OU1RSVUNUT1JTW2J1aWxkZXJUeXBlXTtcbiAgICAgICAgICAgIHJlcGxheSA9IG5ldyBDb25zdHJ1Y3Rvcih0aGlzLnRvbGVyYW5jZV8sIHRoaXMubWF4RXh0ZW50XywgdGhpcy5yZXNvbHV0aW9uXywgdGhpcy5waXhlbFJhdGlvXyk7XG4gICAgICAgICAgICByZXBsYXlzW2J1aWxkZXJUeXBlXSA9IHJlcGxheTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwbGF5O1xuICAgIH07XG4gICAgcmV0dXJuIEJ1aWxkZXJHcm91cDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBCdWlsZGVyR3JvdXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CdWlsZGVyR3JvdXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL1RleHRQbGFjZW1lbnRcbiAqL1xuLyoqXG4gKiBUZXh0IHBsYWNlbWVudC4gT25lIG9mIGAncG9pbnQnYCwgYCdsaW5lJ2AuIERlZmF1bHQgaXMgYCdwb2ludCdgLiBOb3RlIHRoYXRcbiAqIGAnbGluZSdgIHJlcXVpcmVzIHRoZSB1bmRlcmx5aW5nIGdlb21ldHJ5IHRvIGJlIGEge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0xpbmVTdHJpbmd+TGluZVN0cmluZ30sXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2dlb20vUG9seWdvbn5Qb2x5Z29ufSwge0BsaW5rIG1vZHVsZTpvbC9nZW9tL011bHRpTGluZVN0cmluZ35NdWx0aUxpbmVTdHJpbmd9IG9yXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2dlb20vTXVsdGlQb2x5Z29ufk11bHRpUG9seWdvbn0uXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUE9JTlQ6ICdwb2ludCcsXG4gICAgTElORTogJ2xpbmUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRleHRQbGFjZW1lbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvQnVpbGRlclR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQ0lSQ0xFOiAnQ2lyY2xlJyxcbiAgICBERUZBVUxUOiAnRGVmYXVsdCcsXG4gICAgSU1BR0U6ICdJbWFnZScsXG4gICAgTElORV9TVFJJTkc6ICdMaW5lU3RyaW5nJyxcbiAgICBQT0xZR09OOiAnUG9seWdvbicsXG4gICAgVEVYVDogJ1RleHQnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJ1aWxkZXJUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvdGV4dHBhdGhcbiAqL1xuaW1wb3J0IHsgbGVycCB9IGZyb20gJy4uLy4uL21hdGguanMnO1xuaW1wb3J0IHsgcm90YXRlIH0gZnJvbSAnLi90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBQYXRoIHRvIHB1dCB0ZXh0IG9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBTdGFydCBvZmZzZXQgb2YgdGhlIGBmbGF0Q29vcmRpbmF0ZXNgLlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQgb2Zmc2V0IG9mIHRoZSBgZmxhdENvb3JkaW5hdGVzYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dCB0byBwbGFjZSBvbiB0aGUgcGF0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydE0gbSBhbG9uZyB0aGUgcGF0aCB3aGVyZSB0aGUgdGV4dCBzdGFydHMuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4QW5nbGUgTWF4IGFuZ2xlIGJldHdlZW4gYWRqYWNlbnQgY2hhcnMgaW4gcmFkaWFucy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZSBUaGUgcHJvZHVjdCBvZiB0aGUgdGV4dCBzY2FsZSBhbmQgdGhlIGRldmljZSBwaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCBzdHJpbmcsIE9iamVjdDxzdHJpbmcsIG51bWJlcj4pOm51bWJlcn0gbWVhc3VyZUFuZENhY2hlVGV4dFdpZHRoIE1lYXN1cmUgYW5kIGNhY2hlIHRleHQgd2lkdGguXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBUaGUgZm9udC5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn0gY2FjaGUgQSBjYWNoZSBvZiBtZWFzdXJlZCB3aWR0aHMuXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24gdG8gYXBwbHkgdG8gdGhlIGZsYXRDb29yZGluYXRlcyB0byBkZXRlcm1pbmUgd2hldGhlciB0ZXh0IG5lZWRzIHRvIGJlIHJldmVyc2VkLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8Kj4+fSBUaGUgcmVzdWx0IGFycmF5IChvciBudWxsIGlmIGBtYXhBbmdsZWAgd2FzXG4gKiBleGNlZWRlZCkuIEVudHJpZXMgb2YgdGhlIGFycmF5IGFyZSB4LCB5LCBhbmNob3JYLCBhbmdsZSwgY2h1bmsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGV4dE9uUGF0aChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRleHQsIHN0YXJ0TSwgbWF4QW5nbGUsIHNjYWxlLCBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgsIGZvbnQsIGNhY2hlLCByb3RhdGlvbikge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAvLyBLZWVwIHRleHQgdXByaWdodFxuICAgIHZhciByZXZlcnNlO1xuICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgICB2YXIgcm90YXRlZENvb3JkaW5hdGVzID0gcm90YXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgcm90YXRpb24sIFtmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdXSk7XG4gICAgICAgIHJldmVyc2UgPVxuICAgICAgICAgICAgcm90YXRlZENvb3JkaW5hdGVzWzBdID5cbiAgICAgICAgICAgICAgICByb3RhdGVkQ29vcmRpbmF0ZXNbcm90YXRlZENvb3JkaW5hdGVzLmxlbmd0aCAtIHN0cmlkZV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXZlcnNlID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF0gPiBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICB9XG4gICAgdmFyIG51bUNoYXJzID0gdGV4dC5sZW5ndGg7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIHZhciBzZWdtZW50TSA9IDA7XG4gICAgdmFyIHNlZ21lbnRMZW5ndGggPSBNYXRoLnNxcnQoTWF0aC5wb3coeDIgLSB4MSwgMikgKyBNYXRoLnBvdyh5MiAtIHkxLCAyKSk7XG4gICAgdmFyIGFuZ2xlQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHZhciBpbmRleCwgcHJldmlvdXNBbmdsZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUNoYXJzOyArK2kpIHtcbiAgICAgICAgaW5kZXggPSByZXZlcnNlID8gbnVtQ2hhcnMgLSBpIC0gMSA6IGk7XG4gICAgICAgIHZhciBjaGFyID0gdGV4dFtpbmRleF07XG4gICAgICAgIHZhciBjaGFyTGVuZ3RoID0gc2NhbGUgKiBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgY2hhciwgY2FjaGUpO1xuICAgICAgICB2YXIgY2hhck0gPSBzdGFydE0gKyBjaGFyTGVuZ3RoIC8gMjtcbiAgICAgICAgd2hpbGUgKG9mZnNldCA8IGVuZCAtIHN0cmlkZSAmJiBzZWdtZW50TSArIHNlZ21lbnRMZW5ndGggPCBjaGFyTSkge1xuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICAgICAgc2VnbWVudE0gKz0gc2VnbWVudExlbmd0aDtcbiAgICAgICAgICAgIHNlZ21lbnRMZW5ndGggPSBNYXRoLnNxcnQoTWF0aC5wb3coeDIgLSB4MSwgMikgKyBNYXRoLnBvdyh5MiAtIHkxLCAyKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNlZ21lbnRQb3MgPSBjaGFyTSAtIHNlZ21lbnRNO1xuICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHkyIC0geTEsIHgyIC0geDEpO1xuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgYW5nbGUgKz0gYW5nbGUgPiAwID8gLU1hdGguUEkgOiBNYXRoLlBJO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmV2aW91c0FuZ2xlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGFuZ2xlIC0gcHJldmlvdXNBbmdsZTtcbiAgICAgICAgICAgIGFuZ2xlQ2hhbmdlZCA9IGFuZ2xlQ2hhbmdlZCB8fCBkZWx0YSAhPT0gMDtcbiAgICAgICAgICAgIGRlbHRhICs9XG4gICAgICAgICAgICAgICAgZGVsdGEgPiBNYXRoLlBJID8gLTIgKiBNYXRoLlBJIDogZGVsdGEgPCAtTWF0aC5QSSA/IDIgKiBNYXRoLlBJIDogMDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkZWx0YSkgPiBtYXhBbmdsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzQW5nbGUgPSBhbmdsZTtcbiAgICAgICAgdmFyIGludGVycG9sYXRlID0gc2VnbWVudFBvcyAvIHNlZ21lbnRMZW5ndGg7XG4gICAgICAgIHZhciB4ID0gbGVycCh4MSwgeDIsIGludGVycG9sYXRlKTtcbiAgICAgICAgdmFyIHkgPSBsZXJwKHkxLCB5MiwgaW50ZXJwb2xhdGUpO1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gW3gsIHksIGNoYXJMZW5ndGggLyAyLCBhbmdsZSwgY2hhcl07XG4gICAgICAgIHN0YXJ0TSArPSBjaGFyTGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gYW5nbGVDaGFuZ2VkXG4gICAgICAgID8gcmVzdWx0XG4gICAgICAgIDogW1tyZXN1bHRbMF1bMF0sIHJlc3VsdFswXVsxXSwgcmVzdWx0WzBdWzJdLCByZXN1bHRbMF1bM10sIHRleHRdXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRleHRwYXRoLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvbGVuZ3RoXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gTGVuZ3RoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZVN0cmluZ0xlbmd0aChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IG9mZnNldCArIHN0cmlkZTsgaSA8IGVuZDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgICBsZW5ndGggKz0gTWF0aC5zcXJ0KCh4MiAtIHgxKSAqICh4MiAtIHgxKSArICh5MiAtIHkxKSAqICh5MiAtIHkxKSk7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBlcmltZXRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgdmFyIHBlcmltZXRlciA9IGxpbmVTdHJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICB2YXIgZHggPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXSAtIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXSAtIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICBwZXJpbWV0ZXIgKz0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICByZXR1cm4gcGVyaW1ldGVyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGVuZ3RoLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yXG4gKi9cbmltcG9ydCBDYW52YXNJbnN0cnVjdGlvbiBmcm9tICcuL0luc3RydWN0aW9uLmpzJztcbmltcG9ydCBSQnVzaCBmcm9tICdyYnVzaC9yYnVzaC5qcyc7XG5pbXBvcnQgeyBURVhUX0FMSUdOIH0gZnJvbSAnLi9UZXh0QnVpbGRlci5qcyc7XG5pbXBvcnQgeyBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyB9IGZyb20gJy4uLy4uL2hhcy5qcyc7XG5pbXBvcnQgeyBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSwgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBzZXRGcm9tQXJyYXkgYXMgdHJhbnNmb3JtU2V0RnJvbUFycmF5LCB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFbXB0eSwgY3JlYXRlT3JVcGRhdGUsIGdldEhlaWdodCwgZ2V0V2lkdGgsIGludGVyc2VjdHMsIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmF1bHRQYWRkaW5nLCBkZWZhdWx0VGV4dEJhc2VsaW5lLCBkcmF3SW1hZ2VPckxhYmVsLCB9IGZyb20gJy4uL2NhbnZhcy5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0VGV4dEFsaWduLCBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgsIG1lYXN1cmVUZXh0SGVpZ2h0LCBtZWFzdXJlVGV4dFdpZHRocywgfSBmcm9tICcuLi9jYW52YXMuanMnO1xuaW1wb3J0IHsgZHJhd1RleHRPblBhdGggfSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvdGV4dHBhdGguanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgbGluZVN0cmluZ0xlbmd0aCB9IGZyb20gJy4uLy4uL2dlb20vZmxhdC9sZW5ndGguanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtMkQgfSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBpbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBoaXQgZGV0ZWN0aW9uIGluc3RydWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgVGhlIGFycmF5IG9mIGFsbCBjb29yZGluYXRlcy5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5UZXh0U3RhdGU+fSB0ZXh0U3RhdGVzIFRoZSB0ZXh0IHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGU+fSBmaWxsU3RhdGVzIFRoZSBmaWxsIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZT59IHN0cm9rZVN0YXRlcyBUaGUgc3Ryb2tlIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqL1xuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xudmFyIHRtcEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4vKipcbiAqIEB0eXBlIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAqL1xudmFyIHRtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovXG52YXIgcDEgPSBbXTtcbi8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqL1xudmFyIHAyID0gW107XG4vKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi9cbnZhciBwMyA9IFtdO1xuLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovXG52YXIgcDQgPSBbXTtcbnZhciBFeGVjdXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3ZlcmxhcHMgVGhlIHJlcGxheSBjYW4gaGF2ZSBvdmVybGFwcGluZyBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSB7U2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zfSBpbnN0cnVjdGlvbnMgVGhlIHNlcmlhbGl6YWJsZSBpbnN0cnVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NpemUuanNcIikuU2l6ZX0gcmVuZGVyQnVmZmVyIFJlbmRlciBidWZmZXIgKHdpZHRoL2hlaWdodCkgaW4gcGl4ZWxzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEV4ZWN1dG9yKHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIG92ZXJsYXBzLCBpbnN0cnVjdGlvbnMsIHJlbmRlckJ1ZmZlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3ZlcmxhcHMgPSBvdmVybGFwcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbGlnbkZpbGxfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWNsdXR0ZXJJdGVtcyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8Kj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucy5pbnN0cnVjdGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb29yZGluYXRlcyA9IGluc3RydWN0aW9ucy5jb29yZGluYXRlcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PG51bWJlcixpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPnxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvb3JkaW5hdGVDYWNoZV8gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbmRlckJ1ZmZlcl8gPSByZW5kZXJCdWZmZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbmRlcmVkVHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8Kj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGl4ZWxDb29yZGluYXRlc18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmlld1JvdGF0aW9uXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maWxsU3RhdGVzID0gaW5zdHJ1Y3Rpb25zLmZpbGxTdGF0ZXMgfHwge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0cm9rZVN0YXRlcyA9IGluc3RydWN0aW9ucy5zdHJva2VTdGF0ZXMgfHwge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5UZXh0U3RhdGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZXh0U3RhdGVzID0gaW5zdHJ1Y3Rpb25zLnRleHRTdGF0ZXMgfHwge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgbnVtYmVyPj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndpZHRoc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuTGFiZWw+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYWJlbHNfID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRleHQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRLZXkgVGV4dCBzdHlsZSBrZXkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGxLZXkgRmlsbCBzdHlsZSBrZXkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cm9rZUtleSBTdHJva2Ugc3R5bGUga2V5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5MYWJlbH0gTGFiZWwuXG4gICAgICovXG4gICAgRXhlY3V0b3IucHJvdG90eXBlLmNyZWF0ZUxhYmVsID0gZnVuY3Rpb24gKHRleHQsIHRleHRLZXksIGZpbGxLZXksIHN0cm9rZUtleSkge1xuICAgICAgICB2YXIga2V5ID0gdGV4dCArIHRleHRLZXkgKyBmaWxsS2V5ICsgc3Ryb2tlS2V5O1xuICAgICAgICBpZiAodGhpcy5sYWJlbHNfW2tleV0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsc19ba2V5XTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Ryb2tlU3RhdGUgPSBzdHJva2VLZXkgPyB0aGlzLnN0cm9rZVN0YXRlc1tzdHJva2VLZXldIDogbnVsbDtcbiAgICAgICAgdmFyIGZpbGxTdGF0ZSA9IGZpbGxLZXkgPyB0aGlzLmZpbGxTdGF0ZXNbZmlsbEtleV0gOiBudWxsO1xuICAgICAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVzW3RleHRLZXldO1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIHNjYWxlID0gW1xuICAgICAgICAgICAgdGV4dFN0YXRlLnNjYWxlWzBdICogcGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHRleHRTdGF0ZS5zY2FsZVsxXSAqIHBpeGVsUmF0aW8sXG4gICAgICAgIF07XG4gICAgICAgIHZhciBhbGlnbiA9IFRFWFRfQUxJR05bdGV4dFN0YXRlLnRleHRBbGlnbiB8fCBkZWZhdWx0VGV4dEFsaWduXTtcbiAgICAgICAgdmFyIHN0cm9rZVdpZHRoID0gc3Ryb2tlS2V5ICYmIHN0cm9rZVN0YXRlLmxpbmVXaWR0aCA/IHN0cm9rZVN0YXRlLmxpbmVXaWR0aCA6IDA7XG4gICAgICAgIHZhciBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xuICAgICAgICB2YXIgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XG4gICAgICAgIHZhciB3aWR0aHMgPSBbXTtcbiAgICAgICAgdmFyIHdpZHRoID0gbWVhc3VyZVRleHRXaWR0aHModGV4dFN0YXRlLmZvbnQsIGxpbmVzLCB3aWR0aHMpO1xuICAgICAgICB2YXIgbGluZUhlaWdodCA9IG1lYXN1cmVUZXh0SGVpZ2h0KHRleHRTdGF0ZS5mb250KTtcbiAgICAgICAgdmFyIGhlaWdodCA9IGxpbmVIZWlnaHQgKiBudW1MaW5lcztcbiAgICAgICAgdmFyIHJlbmRlcldpZHRoID0gd2lkdGggKyBzdHJva2VXaWR0aDtcbiAgICAgICAgdmFyIGNvbnRleHRJbnN0cnVjdGlvbnMgPSBbXTtcbiAgICAgICAgLy8gbWFrZSBjYW52YXMgMiBwaXhlbHMgd2lkZXIgdG8gYWNjb3VudCBmb3IgaXRhbGljIHRleHQgd2lkdGggbWVhc3VyZW1lbnQgZXJyb3JzXG4gICAgICAgIHZhciB3ID0gKHJlbmRlcldpZHRoICsgMikgKiBzY2FsZVswXTtcbiAgICAgICAgdmFyIGggPSAoaGVpZ2h0ICsgc3Ryb2tlV2lkdGgpICogc2NhbGVbMV07XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkxhYmVsfSAqL1xuICAgICAgICB2YXIgbGFiZWwgPSB7XG4gICAgICAgICAgICB3aWR0aDogdyA8IDAgPyBNYXRoLmZsb29yKHcpIDogTWF0aC5jZWlsKHcpLFxuICAgICAgICAgICAgaGVpZ2h0OiBoIDwgMCA/IE1hdGguZmxvb3IoaCkgOiBNYXRoLmNlaWwoaCksXG4gICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zOiBjb250ZXh0SW5zdHJ1Y3Rpb25zLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoc2NhbGVbMF0gIT0gMSB8fCBzY2FsZVsxXSAhPSAxKSB7XG4gICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ3NjYWxlJywgc2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnMucHVzaCgnZm9udCcsIHRleHRTdGF0ZS5mb250KTtcbiAgICAgICAgaWYgKHN0cm9rZUtleSkge1xuICAgICAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdzdHJva2VTdHlsZScsIHN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlKTtcbiAgICAgICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnMucHVzaCgnbGluZVdpZHRoJywgc3Ryb2tlV2lkdGgpO1xuICAgICAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdsaW5lQ2FwJywgc3Ryb2tlU3RhdGUubGluZUNhcCk7XG4gICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ2xpbmVKb2luJywgc3Ryb2tlU3RhdGUubGluZUpvaW4pO1xuICAgICAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdtaXRlckxpbWl0Jywgc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIHZhciBDb250ZXh0ID0gV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgPyBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgICAgICAgICBpZiAoQ29udGV4dC5wcm90b3R5cGUuc2V0TGluZURhc2gpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ3NldExpbmVEYXNoJywgW3N0cm9rZVN0YXRlLmxpbmVEYXNoXSk7XG4gICAgICAgICAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdsaW5lRGFzaE9mZnNldCcsIHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsbEtleSkge1xuICAgICAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdmaWxsU3R5bGUnLCBmaWxsU3RhdGUuZmlsbFN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb25zLnB1c2goJ3RleHRCYXNlbGluZScsICdtaWRkbGUnKTtcbiAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCd0ZXh0QWxpZ24nLCAnY2VudGVyJyk7XG4gICAgICAgIHZhciBsZWZ0UmlnaHQgPSAwLjUgLSBhbGlnbjtcbiAgICAgICAgdmFyIHggPSBhbGlnbiAqIHJlbmRlcldpZHRoICsgbGVmdFJpZ2h0ICogc3Ryb2tlV2lkdGg7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAoc3Ryb2tlS2V5KSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtTGluZXM7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnMucHVzaCgnc3Ryb2tlVGV4dCcsIFtcbiAgICAgICAgICAgICAgICAgICAgbGluZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgIHggKyBsZWZ0UmlnaHQgKiB3aWR0aHNbaV0sXG4gICAgICAgICAgICAgICAgICAgIDAuNSAqIChzdHJva2VXaWR0aCArIGxpbmVIZWlnaHQpICsgaSAqIGxpbmVIZWlnaHQsXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbGxLZXkpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dEluc3RydWN0aW9ucy5wdXNoKCdmaWxsVGV4dCcsIFtcbiAgICAgICAgICAgICAgICAgICAgbGluZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgIHggKyBsZWZ0UmlnaHQgKiB3aWR0aHNbaV0sXG4gICAgICAgICAgICAgICAgICAgIDAuNSAqIChzdHJva2VXaWR0aCArIGxpbmVIZWlnaHQpICsgaSAqIGxpbmVIZWlnaHQsXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYWJlbHNfW2tleV0gPSBsYWJlbDtcbiAgICAgICAgcmV0dXJuIGxhYmVsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcDEgMXN0IHBvaW50IG9mIHRoZSBiYWNrZ3JvdW5kIGJveC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcDIgMm5kIHBvaW50IG9mIHRoZSBiYWNrZ3JvdW5kIGJveC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcDMgM3JkIHBvaW50IG9mIHRoZSBiYWNrZ3JvdW5kIGJveC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcDQgNHRoIHBvaW50IG9mIHRoZSBiYWNrZ3JvdW5kIGJveC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PCo+fSBmaWxsSW5zdHJ1Y3Rpb24gRmlsbCBpbnN0cnVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5PCo+fSBzdHJva2VJbnN0cnVjdGlvbiBTdHJva2UgaW5zdHJ1Y3Rpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBkZWNsdXR0ZXIgRGVjbHV0dGVyLlxuICAgICAqL1xuICAgIEV4ZWN1dG9yLnByb3RvdHlwZS5yZXBsYXlUZXh0QmFja2dyb3VuZF8gPSBmdW5jdGlvbiAoY29udGV4dCwgcDEsIHAyLCBwMywgcDQsIGZpbGxJbnN0cnVjdGlvbiwgc3Ryb2tlSW5zdHJ1Y3Rpb24sIGRlY2x1dHRlcikge1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0Lm1vdmVUby5hcHBseShjb250ZXh0LCBwMSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvLmFwcGx5KGNvbnRleHQsIHAyKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8uYXBwbHkoY29udGV4dCwgcDMpO1xuICAgICAgICBjb250ZXh0LmxpbmVUby5hcHBseShjb250ZXh0LCBwNCk7XG4gICAgICAgIGNvbnRleHQubGluZVRvLmFwcGx5KGNvbnRleHQsIHAxKTtcbiAgICAgICAgaWYgKGZpbGxJbnN0cnVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5hbGlnbkZpbGxfID0gLyoqIEB0eXBlIHtib29sZWFufSAqLyAoZmlsbEluc3RydWN0aW9uWzJdKTtcbiAgICAgICAgICAgIGlmIChkZWNsdXR0ZXIpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gKi8gKGZpbGxJbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpbGxfKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJva2VJbnN0cnVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdHJva2VTdHlsZV8oY29udGV4dCwgXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAoc3Ryb2tlSW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29udGV4dFNjYWxlIFNjYWxlIG9mIHRoZSBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5MYWJlbHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlT3JMYWJlbCBJbWFnZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5jaG9yWCBBbmNob3IgWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5jaG9yWSBBbmNob3IgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5EZWNsdXR0ZXJHcm91cH0gZGVjbHV0dGVyR3JvdXAgRGVjbHV0dGVyIGdyb3VwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblggT3JpZ2luIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblkgT3JpZ2luIFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc2l6ZS5qc1wiKS5TaXplfSBzY2FsZSBTY2FsZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgdG8gcGl4ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gcGFkZGluZyBQYWRkaW5nLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGZpbGxJbnN0cnVjdGlvbiBGaWxsIGluc3RydWN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IHN0cm9rZUluc3RydWN0aW9uIFN0cm9rZSBpbnN0cnVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgaW1hZ2Ugb3IgbGFiZWwgd2FzIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIEV4ZWN1dG9yLnByb3RvdHlwZS5yZXBsYXlJbWFnZU9yTGFiZWxfID0gZnVuY3Rpb24gKGNvbnRleHQsIGNvbnRleHRTY2FsZSwgeCwgeSwgaW1hZ2VPckxhYmVsLCBhbmNob3JYLCBhbmNob3JZLCBkZWNsdXR0ZXJHcm91cCwgaGVpZ2h0LCBvcGFjaXR5LCBvcmlnaW5YLCBvcmlnaW5ZLCByb3RhdGlvbiwgc2NhbGUsIHNuYXBUb1BpeGVsLCB3aWR0aCwgcGFkZGluZywgZmlsbEluc3RydWN0aW9uLCBzdHJva2VJbnN0cnVjdGlvbikge1xuICAgICAgICB2YXIgZmlsbFN0cm9rZSA9IGZpbGxJbnN0cnVjdGlvbiB8fCBzdHJva2VJbnN0cnVjdGlvbjtcbiAgICAgICAgYW5jaG9yWCAqPSBzY2FsZVswXTtcbiAgICAgICAgYW5jaG9yWSAqPSBzY2FsZVsxXTtcbiAgICAgICAgeCAtPSBhbmNob3JYO1xuICAgICAgICB5IC09IGFuY2hvclk7XG4gICAgICAgIHZhciB3ID0gd2lkdGggKyBvcmlnaW5YID4gaW1hZ2VPckxhYmVsLndpZHRoXG4gICAgICAgICAgICA/IGltYWdlT3JMYWJlbC53aWR0aCAtIG9yaWdpblhcbiAgICAgICAgICAgIDogd2lkdGg7XG4gICAgICAgIHZhciBoID0gaGVpZ2h0ICsgb3JpZ2luWSA+IGltYWdlT3JMYWJlbC5oZWlnaHRcbiAgICAgICAgICAgID8gaW1hZ2VPckxhYmVsLmhlaWdodCAtIG9yaWdpbllcbiAgICAgICAgICAgIDogaGVpZ2h0O1xuICAgICAgICB2YXIgYm94VyA9IHBhZGRpbmdbM10gKyB3ICogc2NhbGVbMF0gKyBwYWRkaW5nWzFdO1xuICAgICAgICB2YXIgYm94SCA9IHBhZGRpbmdbMF0gKyBoICogc2NhbGVbMV0gKyBwYWRkaW5nWzJdO1xuICAgICAgICB2YXIgYm94WCA9IHggLSBwYWRkaW5nWzNdO1xuICAgICAgICB2YXIgYm94WSA9IHkgLSBwYWRkaW5nWzBdO1xuICAgICAgICBpZiAoZmlsbFN0cm9rZSB8fCByb3RhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgcDFbMF0gPSBib3hYO1xuICAgICAgICAgICAgcDRbMF0gPSBib3hYO1xuICAgICAgICAgICAgcDFbMV0gPSBib3hZO1xuICAgICAgICAgICAgcDJbMV0gPSBib3hZO1xuICAgICAgICAgICAgcDJbMF0gPSBib3hYICsgYm94VztcbiAgICAgICAgICAgIHAzWzBdID0gcDJbMF07XG4gICAgICAgICAgICBwM1sxXSA9IGJveFkgKyBib3hIO1xuICAgICAgICAgICAgcDRbMV0gPSBwM1sxXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgY2VudGVyWCA9IHggKyBhbmNob3JYO1xuICAgICAgICAgICAgdmFyIGNlbnRlclkgPSB5ICsgYW5jaG9yWTtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLCBjZW50ZXJYLCBjZW50ZXJZLCAxLCAxLCByb3RhdGlvbiwgLWNlbnRlclgsIC1jZW50ZXJZKTtcbiAgICAgICAgICAgIGFwcGx5VHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcDEpO1xuICAgICAgICAgICAgYXBwbHlUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLCBwMik7XG4gICAgICAgICAgICBhcHBseVRyYW5zZm9ybSh0bXBUcmFuc2Zvcm0sIHAzKTtcbiAgICAgICAgICAgIGFwcGx5VHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcDQpO1xuICAgICAgICAgICAgY3JlYXRlT3JVcGRhdGUoTWF0aC5taW4ocDFbMF0sIHAyWzBdLCBwM1swXSwgcDRbMF0pLCBNYXRoLm1pbihwMVsxXSwgcDJbMV0sIHAzWzFdLCBwNFsxXSksIE1hdGgubWF4KHAxWzBdLCBwMlswXSwgcDNbMF0sIHA0WzBdKSwgTWF0aC5tYXgocDFbMV0sIHAyWzFdLCBwM1sxXSwgcDRbMV0pLCB0bXBFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY3JlYXRlT3JVcGRhdGUoYm94WCwgYm94WSwgYm94WCArIGJveFcsIGJveFkgKyBib3hILCB0bXBFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZW5kZXJCdWZmZXJYID0gMDtcbiAgICAgICAgdmFyIHJlbmRlckJ1ZmZlclkgPSAwO1xuICAgICAgICBpZiAoZGVjbHV0dGVyR3JvdXApIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJCdWZmZXIgPSB0aGlzLnJlbmRlckJ1ZmZlcl87XG4gICAgICAgICAgICByZW5kZXJCdWZmZXJbMF0gPSBNYXRoLm1heChyZW5kZXJCdWZmZXJbMF0sIGdldFdpZHRoKHRtcEV4dGVudCkpO1xuICAgICAgICAgICAgcmVuZGVyQnVmZmVyWCA9IHJlbmRlckJ1ZmZlclswXTtcbiAgICAgICAgICAgIHJlbmRlckJ1ZmZlclsxXSA9IE1hdGgubWF4KHJlbmRlckJ1ZmZlclsxXSwgZ2V0SGVpZ2h0KHRtcEV4dGVudCkpO1xuICAgICAgICAgICAgcmVuZGVyQnVmZmVyWSA9IHJlbmRlckJ1ZmZlclsxXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIHZhciBzdHJva2VQYWRkaW5nID0gc3Ryb2tlSW5zdHJ1Y3Rpb25cbiAgICAgICAgICAgID8gKHN0cm9rZUluc3RydWN0aW9uWzJdICogc2NhbGVbMF0pIC8gMlxuICAgICAgICAgICAgOiAwO1xuICAgICAgICB2YXIgaW50ZXJzZWN0cyA9IHRtcEV4dGVudFswXSAtIHN0cm9rZVBhZGRpbmcgPD1cbiAgICAgICAgICAgIChjYW52YXMud2lkdGggKyByZW5kZXJCdWZmZXJYKSAvIGNvbnRleHRTY2FsZSAmJlxuICAgICAgICAgICAgdG1wRXh0ZW50WzJdICsgc3Ryb2tlUGFkZGluZyA+PSAtcmVuZGVyQnVmZmVyWCAvIGNvbnRleHRTY2FsZSAmJlxuICAgICAgICAgICAgdG1wRXh0ZW50WzFdIC0gc3Ryb2tlUGFkZGluZyA8PVxuICAgICAgICAgICAgICAgIChjYW52YXMuaGVpZ2h0ICsgcmVuZGVyQnVmZmVyWSkgLyBjb250ZXh0U2NhbGUgJiZcbiAgICAgICAgICAgIHRtcEV4dGVudFszXSArIHN0cm9rZVBhZGRpbmcgPj0gLXJlbmRlckJ1ZmZlclkgLyBjb250ZXh0U2NhbGU7XG4gICAgICAgIGlmIChzbmFwVG9QaXhlbCkge1xuICAgICAgICAgICAgeCA9IE1hdGgucm91bmQoeCk7XG4gICAgICAgICAgICB5ID0gTWF0aC5yb3VuZCh5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVjbHV0dGVyR3JvdXApIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJzZWN0cyAmJiBkZWNsdXR0ZXJHcm91cFswXSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRlY2x1dHRlckFyZ3MgPSBpbnRlcnNlY3RzXG4gICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybSA/IHRyYW5zZm9ybS5zbGljZSgwKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHksXG4gICAgICAgICAgICAgICAgICAgIGltYWdlT3JMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWSxcbiAgICAgICAgICAgICAgICAgICAgdyxcbiAgICAgICAgICAgICAgICAgICAgaCxcbiAgICAgICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICAgICAgeSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIHRtcEV4dGVudC5zbGljZSgpLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBpZiAoZGVjbHV0dGVyQXJncykge1xuICAgICAgICAgICAgICAgIGlmIChmaWxsU3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2x1dHRlckFyZ3MucHVzaChmaWxsSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uLCBwMS5zbGljZSgwKSwgcDIuc2xpY2UoMCksIHAzLnNsaWNlKDApLCBwNC5zbGljZSgwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlY2x1dHRlckdyb3VwLnB1c2goZGVjbHV0dGVyQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW50ZXJzZWN0cykge1xuICAgICAgICAgICAgaWYgKGZpbGxTdHJva2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxheVRleHRCYWNrZ3JvdW5kXyhjb250ZXh0LCBwMSwgcDIsIHAzLCBwNCwgXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKGZpbGxJbnN0cnVjdGlvbiksIFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8Kj59ICovIChzdHJva2VJbnN0cnVjdGlvbiksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRyYXdJbWFnZU9yTGFiZWwoY29udGV4dCwgdHJhbnNmb3JtLCBvcGFjaXR5LCBpbWFnZU9yTGFiZWwsIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIHgsIHksIHNjYWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKi9cbiAgICBFeGVjdXRvci5wcm90b3R5cGUuZmlsbF8gPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICBpZiAodGhpcy5hbGlnbkZpbGxfKSB7XG4gICAgICAgICAgICB2YXIgb3JpZ2luXzEgPSBhcHBseVRyYW5zZm9ybSh0aGlzLnJlbmRlcmVkVHJhbnNmb3JtXywgWzAsIDBdKTtcbiAgICAgICAgICAgIHZhciByZXBlYXRTaXplID0gNTEyICogdGhpcy5waXhlbFJhdGlvO1xuICAgICAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShvcmlnaW5fMVswXSAlIHJlcGVhdFNpemUsIG9yaWdpbl8xWzFdICUgcmVwZWF0U2l6ZSk7XG4gICAgICAgICAgICBjb250ZXh0LnJvdGF0ZSh0aGlzLnZpZXdSb3RhdGlvbl8pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgICBpZiAodGhpcy5hbGlnbkZpbGxfKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGluc3RydWN0aW9uIEluc3RydWN0aW9uLlxuICAgICAqL1xuICAgIEV4ZWN1dG9yLnByb3RvdHlwZS5zZXRTdHJva2VTdHlsZV8gPSBmdW5jdGlvbiAoY29udGV4dCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzJdKTtcbiAgICAgICAgY29udGV4dC5saW5lQ2FwID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfSAqLyAoaW5zdHJ1Y3Rpb25bM10pO1xuICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn0gKi8gKGluc3RydWN0aW9uWzRdKTtcbiAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls1XSk7XG4gICAgICAgIGlmIChjb250ZXh0LnNldExpbmVEYXNoKSB7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls3XSk7XG4gICAgICAgICAgICBjb250ZXh0LnNldExpbmVEYXNoKC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGluc3RydWN0aW9uWzZdKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfSBkZWNsdXR0ZXJHcm91cCBEZWNsdXR0ZXIgZ3JvdXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgTGF5ZXIgb3BhY2l0eS5cbiAgICAgKiBAcGFyYW0gez99IGRlY2x1dHRlclRyZWUgRGVjbHV0dGVyIHRyZWUuXG4gICAgICogQHJldHVybiB7P30gRGVjbHV0dGVyIHRyZWUuXG4gICAgICovXG4gICAgRXhlY3V0b3IucHJvdG90eXBlLnJlbmRlckRlY2x1dHRlciA9IGZ1bmN0aW9uIChkZWNsdXR0ZXJHcm91cCwgZmVhdHVyZSwgb3BhY2l0eSwgZGVjbHV0dGVyVHJlZSkge1xuICAgICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uLy4uL3N0cnVjdHMvUkJ1c2guanNcIikuRW50cnk+fSAqL1xuICAgICAgICB2YXIgYm94ZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGlpID0gZGVjbHV0dGVyR3JvdXAubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGRlY2x1dHRlckRhdGEgPSBkZWNsdXR0ZXJHcm91cFtpXTtcbiAgICAgICAgICAgIHZhciBib3ggPSBkZWNsdXR0ZXJEYXRhWzExXTtcbiAgICAgICAgICAgIGJveGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1pblg6IGJveFswXSxcbiAgICAgICAgICAgICAgICBtaW5ZOiBib3hbMV0sXG4gICAgICAgICAgICAgICAgbWF4WDogYm94WzJdLFxuICAgICAgICAgICAgICAgIG1heFk6IGJveFszXSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmVhdHVyZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVjbHV0dGVyVHJlZSkge1xuICAgICAgICAgICAgZGVjbHV0dGVyVHJlZSA9IG5ldyBSQnVzaCg5KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29sbGlkZXMgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYm94ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgaWYgKGRlY2x1dHRlclRyZWUuY29sbGlkZXMoYm94ZXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgY29sbGlkZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghY29sbGlkZXMpIHtcbiAgICAgICAgICAgIGRlY2x1dHRlclRyZWUubG9hZChib3hlcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMSwgamogPSBkZWNsdXR0ZXJHcm91cC5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlY2x1dHRlckRhdGEgPSAvKiogQHR5cGUge0FycmF5fSAqLyAoZGVjbHV0dGVyR3JvdXBbal0pO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gZGVjbHV0dGVyRGF0YVswXTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEFscGhhID0gY29udGV4dC5nbG9iYWxBbHBoYTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEFscGhhICE9PSBvcGFjaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBvcGFjaXR5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGVjbHV0dGVyRGF0YS5sZW5ndGggPiAxMikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGxheVRleHRCYWNrZ3JvdW5kXyhkZWNsdXR0ZXJEYXRhWzBdLCBkZWNsdXR0ZXJEYXRhWzE0XSwgZGVjbHV0dGVyRGF0YVsxNV0sIGRlY2x1dHRlckRhdGFbMTZdLCBkZWNsdXR0ZXJEYXRhWzE3XSwgZGVjbHV0dGVyRGF0YVsxMl0sIGRlY2x1dHRlckRhdGFbMTNdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZHJhd0ltYWdlT3JMYWJlbC5hcHBseSh1bmRlZmluZWQsIGRlY2x1dHRlckRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50QWxwaGEgIT09IG9wYWNpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGN1cnJlbnRBbHBoYTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVjbHV0dGVyR3JvdXAubGVuZ3RoID0gMTtcbiAgICAgICAgcmV0dXJuIGRlY2x1dHRlclRyZWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIGRyYXcuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRLZXkgVGhlIGtleSBvZiB0aGUgdGV4dCBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Ryb2tlS2V5IFRoZSBrZXkgZm9yIHRoZSBzdHJva2Ugc3RhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGxLZXkgVGhlIGtleSBmb3IgdGhlIGZpbGwgc3RhdGUuXG4gICAgICogQHJldHVybiB7e2xhYmVsOiBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuTGFiZWwsIGFuY2hvclg6IG51bWJlciwgYW5jaG9yWTogbnVtYmVyfX0gVGhlIHRleHQgaW1hZ2UgYW5kIGl0cyBhbmNob3IuXG4gICAgICovXG4gICAgRXhlY3V0b3IucHJvdG90eXBlLmRyYXdMYWJlbFdpdGhQb2ludFBsYWNlbWVudF8gPSBmdW5jdGlvbiAodGV4dCwgdGV4dEtleSwgc3Ryb2tlS2V5LCBmaWxsS2V5KSB7XG4gICAgICAgIHZhciB0ZXh0U3RhdGUgPSB0aGlzLnRleHRTdGF0ZXNbdGV4dEtleV07XG4gICAgICAgIHZhciBsYWJlbCA9IHRoaXMuY3JlYXRlTGFiZWwodGV4dCwgdGV4dEtleSwgZmlsbEtleSwgc3Ryb2tlS2V5KTtcbiAgICAgICAgdmFyIHN0cm9rZVN0YXRlID0gdGhpcy5zdHJva2VTdGF0ZXNbc3Ryb2tlS2V5XTtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSB0aGlzLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciBhbGlnbiA9IFRFWFRfQUxJR05bdGV4dFN0YXRlLnRleHRBbGlnbiB8fCBkZWZhdWx0VGV4dEFsaWduXTtcbiAgICAgICAgdmFyIGJhc2VsaW5lID0gVEVYVF9BTElHTlt0ZXh0U3RhdGUudGV4dEJhc2VsaW5lIHx8IGRlZmF1bHRUZXh0QmFzZWxpbmVdO1xuICAgICAgICB2YXIgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSAmJiBzdHJva2VTdGF0ZS5saW5lV2lkdGggPyBzdHJva2VTdGF0ZS5saW5lV2lkdGggOiAwO1xuICAgICAgICAvLyBSZW1vdmUgdGhlIDIgcGl4ZWxzIHdlIGFkZGVkIGluIGNyZWF0ZUxhYmVsKCkgZm9yIHRoZSBhbmNob3JcbiAgICAgICAgdmFyIHdpZHRoID0gbGFiZWwud2lkdGggLyBwaXhlbFJhdGlvIC0gMiAqIHRleHRTdGF0ZS5zY2FsZVswXTtcbiAgICAgICAgdmFyIGFuY2hvclggPSBhbGlnbiAqIHdpZHRoICsgMiAqICgwLjUgLSBhbGlnbikgKiBzdHJva2VXaWR0aDtcbiAgICAgICAgdmFyIGFuY2hvclkgPSAoYmFzZWxpbmUgKiBsYWJlbC5oZWlnaHQpIC8gcGl4ZWxSYXRpbyArXG4gICAgICAgICAgICAyICogKDAuNSAtIGJhc2VsaW5lKSAqIHN0cm9rZVdpZHRoO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICAgICAgYW5jaG9yWDogYW5jaG9yWCxcbiAgICAgICAgICAgIGFuY2hvclk6IGFuY2hvclksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbnRleHRTY2FsZSBTY2FsZSBvZiB0aGUgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gICAgICogQHBhcmFtIHtBcnJheTwqPn0gaW5zdHJ1Y3Rpb25zIEluc3RydWN0aW9ucyBhcnJheS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgcG9pbnQgc3ltYm9scyBhbmQgdGV4dCB0byBpbnRlZ2VyIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UpOiBUfHVuZGVmaW5lZH0gZmVhdHVyZUNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2hpdEV4dGVudCBPbmx5IGNoZWNrIGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IHRoaXNcbiAgICAgKiAgICAgZXh0ZW50LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBFeGVjdXRvci5wcm90b3R5cGUuZXhlY3V0ZV8gPSBmdW5jdGlvbiAoY29udGV4dCwgY29udGV4dFNjYWxlLCB0cmFuc2Zvcm0sIGluc3RydWN0aW9ucywgc25hcFRvUGl4ZWwsIGZlYXR1cmVDYWxsYmFjaywgb3B0X2hpdEV4dGVudCkge1xuICAgICAgICB0aGlzLmRlY2x1dHRlckl0ZW1zLmxlbmd0aCA9IDA7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICAgICAgdmFyIHBpeGVsQ29vcmRpbmF0ZXM7XG4gICAgICAgIGlmICh0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfICYmIGVxdWFscyh0cmFuc2Zvcm0sIHRoaXMucmVuZGVyZWRUcmFuc2Zvcm1fKSkge1xuICAgICAgICAgICAgcGl4ZWxDb29yZGluYXRlcyA9IHRoaXMucGl4ZWxDb29yZGluYXRlc187XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGl4ZWxDb29yZGluYXRlc18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwaXhlbENvb3JkaW5hdGVzID0gdHJhbnNmb3JtMkQodGhpcy5jb29yZGluYXRlcywgMCwgdGhpcy5jb29yZGluYXRlcy5sZW5ndGgsIDIsIHRyYW5zZm9ybSwgdGhpcy5waXhlbENvb3JkaW5hdGVzXyk7XG4gICAgICAgICAgICB0cmFuc2Zvcm1TZXRGcm9tQXJyYXkodGhpcy5yZW5kZXJlZFRyYW5zZm9ybV8sIHRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGkgPSAwOyAvLyBpbnN0cnVjdGlvbiBpbmRleFxuICAgICAgICB2YXIgaWkgPSBpbnN0cnVjdGlvbnMubGVuZ3RoOyAvLyBlbmQgb2YgaW5zdHJ1Y3Rpb25zXG4gICAgICAgIHZhciBkID0gMDsgLy8gZGF0YSBpbmRleFxuICAgICAgICB2YXIgZGQ7IC8vIGVuZCBvZiBwZXItaW5zdHJ1Y3Rpb24gZGF0YVxuICAgICAgICB2YXIgYW5jaG9yWCwgYW5jaG9yWSwgcHJldlgsIHByZXZZLCByb3VuZFgsIHJvdW5kWSwgZGVjbHV0dGVyR3JvdXAsIGRlY2x1dHRlckdyb3VwcywgaW1hZ2UsIHRleHQsIHRleHRLZXk7XG4gICAgICAgIHZhciBzdHJva2VLZXksIGZpbGxLZXk7XG4gICAgICAgIHZhciBwZW5kaW5nRmlsbCA9IDA7XG4gICAgICAgIHZhciBwZW5kaW5nU3Ryb2tlID0gMDtcbiAgICAgICAgdmFyIGxhc3RGaWxsSW5zdHJ1Y3Rpb24gPSBudWxsO1xuICAgICAgICB2YXIgbGFzdFN0cm9rZUluc3RydWN0aW9uID0gbnVsbDtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVDYWNoZSA9IHRoaXMuY29vcmRpbmF0ZUNhY2hlXztcbiAgICAgICAgdmFyIHZpZXdSb3RhdGlvbiA9IHRoaXMudmlld1JvdGF0aW9uXztcbiAgICAgICAgdmFyIHZpZXdSb3RhdGlvbkZyb21UcmFuc2Zvcm0gPSBNYXRoLnJvdW5kKE1hdGguYXRhbjIoLXRyYW5zZm9ybVsxXSwgdHJhbnNmb3JtWzBdKSAqIDFlMTIpIC8gMWUxMjtcbiAgICAgICAgdmFyIHN0YXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIuanNcIikuU3RhdGV9ICovICh7XG4gICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgcGl4ZWxSYXRpbzogdGhpcy5waXhlbFJhdGlvLFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogdGhpcy5yZXNvbHV0aW9uLFxuICAgICAgICAgICAgcm90YXRpb246IHZpZXdSb3RhdGlvbixcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFdoZW4gdGhlIGJhdGNoIHNpemUgZ2V0cyB0b28gYmlnLCBwZXJmb3JtYW5jZSBkZWNyZWFzZXMuIDIwMCBpcyBhIGdvb2RcbiAgICAgICAgLy8gYmFsYW5jZSBiZXR3ZWVuIGJhdGNoIHNpemUgYW5kIG51bWJlciBvZiBmaWxsL3N0cm9rZSBpbnN0cnVjdGlvbnMuXG4gICAgICAgIHZhciBiYXRjaFNpemUgPSB0aGlzLmluc3RydWN0aW9ucyAhPSBpbnN0cnVjdGlvbnMgfHwgdGhpcy5vdmVybGFwcyA/IDAgOiAyMDA7XG4gICAgICAgIHZhciAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9ICovIGZlYXR1cmU7XG4gICAgICAgIHZhciB4LCB5O1xuICAgICAgICB3aGlsZSAoaSA8IGlpKSB7XG4gICAgICAgICAgICB2YXIgaW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbnNbaV07XG4gICAgICAgICAgICB2YXIgdHlwZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnN0cnVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoaW5zdHJ1Y3Rpb25bMF0pO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5CRUdJTl9HRU9NRVRSWTpcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmZWF0dXJlLmdldEdlb21ldHJ5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRfaGl0RXh0ZW50ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFpbnRlcnNlY3RzKG9wdF9oaXRFeHRlbnQsIGluc3RydWN0aW9uWzNdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMl0pICsgMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkJFR0lOX1BBVEg6XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nRmlsbCA+IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsXyhjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdGaWxsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSA+IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdTdHJva2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGVuZGluZ0ZpbGwgJiYgIXBlbmRpbmdTdHJva2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2WCA9IE5hTjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZZID0gTmFOO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5DSVJDTEU6XG4gICAgICAgICAgICAgICAgICAgIGQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gcGl4ZWxDb29yZGluYXRlc1tkXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0gcGl4ZWxDb29yZGluYXRlc1tkICsgMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MiA9IHBpeGVsQ29vcmRpbmF0ZXNbZCArIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTIgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAzXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR4ID0geDIgLSB4MTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh4MSArIHIsIHkxKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5hcmMoeDEsIHkxLCByLCAwLCAyICogTWF0aC5QSSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5DTE9TRV9QQVRIOlxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uQ1VTVE9NOlxuICAgICAgICAgICAgICAgICAgICBkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGRkID0gaW5zdHJ1Y3Rpb25bMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoaW5zdHJ1Y3Rpb25bM10pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBpbnN0cnVjdGlvbls0XTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gaW5zdHJ1Y3Rpb24ubGVuZ3RoID09IDYgPyBpbnN0cnVjdGlvbls1XSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZ2VvbWV0cnkgPSBnZW9tZXRyeTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZmVhdHVyZSA9IGZlYXR1cmU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGkgaW4gY29vcmRpbmF0ZUNhY2hlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZUNhY2hlW2ldID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkcyA9IGNvb3JkaW5hdGVDYWNoZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbihwaXhlbENvb3JkaW5hdGVzLCBkLCBkZCwgMiwgY29vcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkc1swXSA9IHBpeGVsQ29vcmRpbmF0ZXNbZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb29yZHNbMV0gPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkcy5sZW5ndGggPSAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyKGNvb3Jkcywgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRTpcbiAgICAgICAgICAgICAgICAgICAgZCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMV0pO1xuICAgICAgICAgICAgICAgICAgICBkZCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMl0pO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IC8qKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fSAqLyAoaW5zdHJ1Y3Rpb25bM10pO1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIGluIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgICAgICAgICAgICAgICBhbmNob3JYID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls0XSk7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclkgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXBzID0gZmVhdHVyZUNhbGxiYWNrID8gbnVsbCA6IGluc3RydWN0aW9uWzZdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls3XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls4XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5YID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls5XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5ZID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxMF0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRlV2l0aFZpZXcgPSAvKiogQHR5cGUge2Jvb2xlYW59ICovIChpbnN0cnVjdGlvblsxMV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRpb24gPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzEyXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vc2l6ZS5qc1wiKS5TaXplfSAqLyAoaW5zdHJ1Y3Rpb25bMTNdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxNF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWltYWdlICYmIGluc3RydWN0aW9uLmxlbmd0aCA+PSAxOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGxhYmVsIGltYWdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bMThdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRLZXkgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGluc3RydWN0aW9uWzE5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VLZXkgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGluc3RydWN0aW9uWzIwXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsS2V5ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChpbnN0cnVjdGlvblsyMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsV2l0aEFuY2hvciA9IHRoaXMuZHJhd0xhYmVsV2l0aFBvaW50UGxhY2VtZW50Xyh0ZXh0LCB0ZXh0S2V5LCBzdHJva2VLZXksIGZpbGxLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBsYWJlbFdpdGhBbmNob3IubGFiZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvblszXSA9IGltYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRPZmZzZXRYID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yWCA9IChsYWJlbFdpdGhBbmNob3IuYW5jaG9yWCAtIHRleHRPZmZzZXRYKSAqIHRoaXMucGl4ZWxSYXRpbztcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uWzRdID0gYW5jaG9yWDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0T2Zmc2V0WSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMjNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclkgPSAobGFiZWxXaXRoQW5jaG9yLmFuY2hvclkgLSB0ZXh0T2Zmc2V0WSkgKiB0aGlzLnBpeGVsUmF0aW87XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbls1XSA9IGFuY2hvclk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbls3XSA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gaW1hZ2Uud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvblsxNF0gPSB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnlXaWR0aHMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5sZW5ndGggPiAyNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnlXaWR0aHMgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzI0XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSB2b2lkIDAsIGJhY2tncm91bmRGaWxsID0gdm9pZCAwLCBiYWNrZ3JvdW5kU3Ryb2tlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24ubGVuZ3RoID4gMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmcgPSAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChpbnN0cnVjdGlvblsxNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEZpbGwgPSAvKiogQHR5cGUge2Jvb2xlYW59ICovIChpbnN0cnVjdGlvblsxNl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFN0cm9rZSA9IC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKGluc3RydWN0aW9uWzE3XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nID0gZGVmYXVsdFBhZGRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kRmlsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFN0cm9rZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3RhdGVXaXRoVmlldyAmJiB2aWV3Um90YXRpb25Gcm9tVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYW52YXMgaXMgZXhwZWN0ZWQgdG8gYmUgcm90YXRlZCB0byByZXZlcnNlIHZpZXcgcm90YXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbiArPSB2aWV3Um90YXRpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXJvdGF0ZVdpdGhWaWV3ICYmICF2aWV3Um90YXRpb25Gcm9tVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYW52YXMgaXMgbm90IHJvdGF0ZWQsIGltYWdlcyBuZWVkIHRvIGJlIHJvdGF0ZWQgYmFjayB0byBiZSBub3J0aC11cC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uIC09IHZpZXdSb3RhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lkdGhJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWNsdXR0ZXJHcm91cEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IGQgPCBkZDsgZCArPSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbWV0cnlXaWR0aHMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeVdpZHRoc1t3aWR0aEluZGV4KytdIDwgd2lkdGggLyB0aGlzLnBpeGVsUmF0aW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWNsdXR0ZXJHcm91cHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBNYXRoLmZsb29yKGRlY2x1dHRlckdyb3VwSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2x1dHRlckdyb3VwID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXBzLmxlbmd0aCA8IGluZGV4ICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbZGVjbHV0dGVyR3JvdXBzWzBdWzBdXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkZWNsdXR0ZXJHcm91cHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbmRlcmVkID0gdGhpcy5yZXBsYXlJbWFnZU9yTGFiZWxfKGNvbnRleHQsIGNvbnRleHRTY2FsZSwgcGl4ZWxDb29yZGluYXRlc1tkXSwgcGl4ZWxDb29yZGluYXRlc1tkICsgMV0sIGltYWdlLCBhbmNob3JYLCBhbmNob3JZLCBkZWNsdXR0ZXJHcm91cCwgaGVpZ2h0LCBvcGFjaXR5LCBvcmlnaW5YLCBvcmlnaW5ZLCByb3RhdGlvbiwgc2NhbGUsIHNuYXBUb1BpeGVsLCB3aWR0aCwgcGFkZGluZywgYmFja2dyb3VuZEZpbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IC8qKiBAdHlwZSB7QXJyYXk8Kj59ICovIChsYXN0RmlsbEluc3RydWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCwgYmFja2dyb3VuZFN0cm9rZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKGxhc3RTdHJva2VJbnN0cnVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsdXR0ZXJHcm91cHNbZGVjbHV0dGVyR3JvdXBzLmxlbmd0aCAtIDFdICE9PSBkZWNsdXR0ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2x1dHRlckdyb3Vwcy5wdXNoKGRlY2x1dHRlckdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWNsdXR0ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWNsdXR0ZXJHcm91cC5sZW5ndGggLSAxID09PSBkZWNsdXR0ZXJHcm91cFswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY2x1dHRlckl0ZW1zLnB1c2godGhpcywgZGVjbHV0dGVyR3JvdXAsIGZlYXR1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsdXR0ZXJHcm91cEluZGV4ICs9IDEgLyBkZWNsdXR0ZXJHcm91cFswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19DSEFSUzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJlZ2luID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VsaW5lID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblszXSk7XG4gICAgICAgICAgICAgICAgICAgIGRlY2x1dHRlckdyb3VwID0gZmVhdHVyZUNhbGxiYWNrID8gbnVsbCA6IGluc3RydWN0aW9uWzRdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlcmZsb3cgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgZmlsbEtleSA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bNl0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4QW5nbGUgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzddKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lYXN1cmVQaXhlbFJhdGlvID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls4XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRZID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls5XSk7XG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZUtleSA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bMTBdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cm9rZVdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxMV0pO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChpbnN0cnVjdGlvblsxMl0pO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0S2V5ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChpbnN0cnVjdGlvblsxM10pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGl4ZWxSYXRpb1NjYWxlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxNF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxNF0pLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVzW3RleHRLZXldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9udCA9IHRleHRTdGF0ZS5mb250O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dFNjYWxlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0YXRlLnNjYWxlWzBdICogbWVhc3VyZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3RhdGUuc2NhbGVbMV0gKiBtZWFzdXJlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlZFdpZHRocyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbnQgaW4gdGhpcy53aWR0aHNfKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWRXaWR0aHMgPSB0aGlzLndpZHRoc19bZm9udF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWRXaWR0aHMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGhzX1tmb250XSA9IGNhY2hlZFdpZHRocztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aExlbmd0aCA9IGxpbmVTdHJpbmdMZW5ndGgocGl4ZWxDb29yZGluYXRlcywgYmVnaW4sIGVuZCwgMik7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0TGVuZ3RoID0gTWF0aC5hYnModGV4dFNjYWxlWzBdKSAqXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgdGV4dCwgY2FjaGVkV2lkdGhzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJmbG93IHx8IHRleHRMZW5ndGggPD0gcGF0aExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRBbGlnbiA9IHRoaXMudGV4dFN0YXRlc1t0ZXh0S2V5XS50ZXh0QWxpZ247XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRNID0gKHBhdGhMZW5ndGggLSB0ZXh0TGVuZ3RoKSAqIFRFWFRfQUxJR05bdGV4dEFsaWduXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGRyYXdUZXh0T25QYXRoKHBpeGVsQ29vcmRpbmF0ZXMsIGJlZ2luLCBlbmQsIDIsIHRleHQsIHN0YXJ0TSwgbWF4QW5nbGUsIE1hdGguYWJzKHRleHRTY2FsZVswXSksIG1lYXN1cmVBbmRDYWNoZVRleHRXaWR0aCwgZm9udCwgY2FjaGVkV2lkdGhzLCB2aWV3Um90YXRpb25Gcm9tVHJhbnNmb3JtID8gMCA6IHRoaXMudmlld1JvdGF0aW9uXyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHZvaWQgMCwgY2MgPSB2b2lkIDAsIGNoYXJzID0gdm9pZCAwLCBsYWJlbCA9IHZvaWQgMCwgcGFydCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Ryb2tlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IDAsIGNjID0gcGFydHMubGVuZ3RoOyBjIDwgY2M7ICsrYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydCA9IHBhcnRzW2NdOyAvLyB4LCB5LCBhbmNob3JYLCByb3RhdGlvbiwgY2h1bmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwYXJ0WzRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsID0gdGhpcy5jcmVhdGVMYWJlbChjaGFycywgdGV4dEtleSwgJycsIHN0cm9rZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JYID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChwYXJ0WzJdKSArIHN0cm9rZVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yWSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZWxpbmUgKiBsYWJlbC5oZWlnaHQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKDAuNSAtIGJhc2VsaW5lKSAqIDIgKiBzdHJva2VXaWR0aCAqIHRleHRTY2FsZVsxXSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFNjYWxlWzBdIC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGxheUltYWdlT3JMYWJlbF8oY29udGV4dCwgY29udGV4dFNjYWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMF0pLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMV0pLCBsYWJlbCwgYW5jaG9yWCwgYW5jaG9yWSwgZGVjbHV0dGVyR3JvdXAsIGxhYmVsLmhlaWdodCwgMSwgMCwgMCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChwYXJ0WzNdKSwgcGl4ZWxSYXRpb1NjYWxlLCBmYWxzZSwgbGFiZWwud2lkdGgsIGRlZmF1bHRQYWRkaW5nLCBudWxsLCBudWxsKSB8fCByZW5kZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsbEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGMgPSAwLCBjYyA9IHBhcnRzLmxlbmd0aDsgYyA8IGNjOyArK2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQgPSBwYXJ0c1tjXTsgLy8geCwgeSwgYW5jaG9yWCwgcm90YXRpb24sIGNodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFycyA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocGFydFs0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IHRoaXMuY3JlYXRlTGFiZWwoY2hhcnMsIHRleHRLZXksIGZpbGxLZXksICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yWSA9IGJhc2VsaW5lICogbGFiZWwuaGVpZ2h0IC0gb2Zmc2V0WTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGxheUltYWdlT3JMYWJlbF8oY29udGV4dCwgY29udGV4dFNjYWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMF0pLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMV0pLCBsYWJlbCwgYW5jaG9yWCwgYW5jaG9yWSwgZGVjbHV0dGVyR3JvdXAsIGxhYmVsLmhlaWdodCwgMSwgMCwgMCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChwYXJ0WzNdKSwgcGl4ZWxSYXRpb1NjYWxlLCBmYWxzZSwgbGFiZWwud2lkdGgsIGRlZmF1bHRQYWRkaW5nLCBudWxsLCBudWxsKSB8fCByZW5kZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNsdXR0ZXJJdGVtcy5wdXNoKHRoaXMsIGRlY2x1dHRlckdyb3VwLCBmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkVORF9HRU9NRVRSWTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVDYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSAqLyAoaW5zdHJ1Y3Rpb25bMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZlYXR1cmVDYWxsYmFjayhmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5GSUxMOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nRmlsbCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsXyhjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uTU9WRV9UT19MSU5FX1RPOlxuICAgICAgICAgICAgICAgICAgICBkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGRkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgICAgICAgICAgIHggPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgICAgICAgICAgICB5ID0gcGl4ZWxDb29yZGluYXRlc1tkICsgMV07XG4gICAgICAgICAgICAgICAgICAgIHJvdW5kWCA9ICh4ICsgMC41KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIHJvdW5kWSA9ICh5ICsgMC41KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3VuZFggIT09IHByZXZYIHx8IHJvdW5kWSAhPT0gcHJldlkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlggPSByb3VuZFg7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2WSA9IHJvdW5kWTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGQgKz0gMjsgZCA8IGRkOyBkICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHBpeGVsQ29vcmRpbmF0ZXNbZCArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm91bmRYID0gKHggKyAwLjUpIHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdW5kWSA9ICh5ICsgMC41KSB8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA9PSBkZCAtIDIgfHwgcm91bmRYICE9PSBwcmV2WCB8fCByb3VuZFkgIT09IHByZXZZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oeCwgeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlggPSByb3VuZFg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlkgPSByb3VuZFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLlNFVF9GSUxMX1NUWUxFOlxuICAgICAgICAgICAgICAgICAgICBsYXN0RmlsbEluc3RydWN0aW9uID0gaW5zdHJ1Y3Rpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxpZ25GaWxsXyA9IGluc3RydWN0aW9uWzJdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ0ZpbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsbF8oY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nRmlsbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1N0cm9rZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5TRVRfU1RST0tFX1NUWUxFOlxuICAgICAgICAgICAgICAgICAgICBsYXN0U3Ryb2tlSW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdTdHJva2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nU3Ryb2tlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0cm9rZVN0eWxlXyhjb250ZXh0LCAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAoaW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLlNUUk9LRTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1N0cm9rZSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICsraTsgLy8gY29uc3VtZSB0aGUgaW5zdHJ1Y3Rpb24gYW55d2F5LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwZW5kaW5nRmlsbCkge1xuICAgICAgICAgICAgdGhpcy5maWxsXyhjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSkge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29udGV4dFNjYWxlIFNjYWxlIG9mIHRoZSBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmlld1JvdGF0aW9uIFZpZXcgcm90YXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzbmFwVG9QaXhlbCBTbmFwIHBvaW50IHN5bWJvbHMgYW5kIHRleHQgdG8gaW50ZWdlciBwaXhlbHMuXG4gICAgICovXG4gICAgRXhlY3V0b3IucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoY29udGV4dCwgY29udGV4dFNjYWxlLCB0cmFuc2Zvcm0sIHZpZXdSb3RhdGlvbiwgc25hcFRvUGl4ZWwpIHtcbiAgICAgICAgdGhpcy52aWV3Um90YXRpb25fID0gdmlld1JvdGF0aW9uO1xuICAgICAgICB0aGlzLmV4ZWN1dGVfKGNvbnRleHQsIGNvbnRleHRTY2FsZSwgdHJhbnNmb3JtLCB0aGlzLmluc3RydWN0aW9ucywgc25hcFRvUGl4ZWwsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2aWV3Um90YXRpb24gVmlldyByb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UpOiBUPX0gb3B0X2ZlYXR1cmVDYWxsYmFja1xuICAgICAqICAgICBGZWF0dXJlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9oaXRFeHRlbnQgT25seSBjaGVjayBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCB0aGlzXG4gICAgICogICAgIGV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgRXhlY3V0b3IucHJvdG90eXBlLmV4ZWN1dGVIaXREZXRlY3Rpb24gPSBmdW5jdGlvbiAoY29udGV4dCwgdHJhbnNmb3JtLCB2aWV3Um90YXRpb24sIG9wdF9mZWF0dXJlQ2FsbGJhY2ssIG9wdF9oaXRFeHRlbnQpIHtcbiAgICAgICAgdGhpcy52aWV3Um90YXRpb25fID0gdmlld1JvdGF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlXyhjb250ZXh0LCAxLCB0cmFuc2Zvcm0sIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLCB0cnVlLCBvcHRfZmVhdHVyZUNhbGxiYWNrLCBvcHRfaGl0RXh0ZW50KTtcbiAgICB9O1xuICAgIHJldHVybiBFeGVjdXRvcjtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBFeGVjdXRvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4ZWN1dG9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXBcbiAqL1xuaW1wb3J0IEJ1aWxkZXJUeXBlIGZyb20gJy4vQnVpbGRlclR5cGUuanMnO1xuaW1wb3J0IEV4ZWN1dG9yIGZyb20gJy4vRXhlY3V0b3IuanMnO1xuaW1wb3J0IHsgYnVmZmVyLCBjcmVhdGVFbXB0eSwgZXh0ZW5kQ29vcmRpbmF0ZSB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4uLy4uL2RvbS5qcyc7XG5pbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSAnLi4vLi4vb2JqLmpzJztcbmltcG9ydCB7IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24gfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0yRCB9IGZyb20gJy4uLy4uL2dlb20vZmxhdC90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHQ+fVxuICovXG52YXIgT1JERVIgPSBbXG4gICAgQnVpbGRlclR5cGUuUE9MWUdPTixcbiAgICBCdWlsZGVyVHlwZS5DSVJDTEUsXG4gICAgQnVpbGRlclR5cGUuTElORV9TVFJJTkcsXG4gICAgQnVpbGRlclR5cGUuSU1BR0UsXG4gICAgQnVpbGRlclR5cGUuVEVYVCxcbiAgICBCdWlsZGVyVHlwZS5ERUZBVUxULFxuXTtcbnZhciBFeGVjdXRvckdyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4RXh0ZW50IE1heCBleHRlbnQgZm9yIGNsaXBwaW5nLiBXaGVuIGFcbiAgICAgKiBgbWF4RXh0ZW50YCB3YXMgc2V0IG9uIHRoZSBCdWlsbGRlciBmb3IgdGhpcyBleGVjdXRvciBncm91cCwgdGhlIHNhbWUgYG1heEV4dGVudGBcbiAgICAgKiBzaG91bGQgYmUgc2V0IGhlcmUsIHVubGVzcyB0aGUgdGFyZ2V0IGNvbnRleHQgZG9lcyBub3QgZXhjZWV0IHRoYXQgZXh0ZW50ICh3aGljaFxuICAgICAqIGNhbiBiZSB0aGUgY2FzZSB3aGVuIHJlbmRlcmluZyB0byB0aWxlcykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJsYXBzIFRoZSBleGVjdXRvciBncm91cCBjYW4gaGF2ZSBvdmVybGFwcGluZyBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFPYmplY3Q8aW1wb3J0KFwiLi9CdWlsZGVyVHlwZS5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuL0J1aWxkZXIuanNcIikuU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zPj59IGFsbEluc3RydWN0aW9uc1xuICAgICAqIFRoZSBzZXJpYWxpemFibGUgaW5zdHJ1Y3Rpb25zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3JlbmRlckJ1ZmZlciBPcHRpb25hbCByZW5kZXJpbmcgYnVmZmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEV4ZWN1dG9yR3JvdXAobWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgYWxsSW5zdHJ1Y3Rpb25zLCBvcHRfcmVuZGVyQnVmZmVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4RXh0ZW50XyA9IG1heEV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vdmVybGFwc18gPSBvdmVybGFwcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW5kZXJCdWZmZXJfID0gb3B0X3JlbmRlckJ1ZmZlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIU9iamVjdDxpbXBvcnQoXCIuL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHQsIGltcG9ydChcIi4vRXhlY3V0b3JcIikuZGVmYXVsdD4+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leGVjdXRvcnNCeVpJbmRleF8gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25UcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlRXhlY3V0b3JzXyhhbGxJbnN0cnVjdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICAgKi9cbiAgICBFeGVjdXRvckdyb3VwLnByb3RvdHlwZS5jbGlwID0gZnVuY3Rpb24gKGNvbnRleHQsIHRyYW5zZm9ybSkge1xuICAgICAgICB2YXIgZmxhdENsaXBDb29yZHMgPSB0aGlzLmdldENsaXBDb29yZHModHJhbnNmb3JtKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oZmxhdENsaXBDb29yZHNbMF0sIGZsYXRDbGlwQ29vcmRzWzFdKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oZmxhdENsaXBDb29yZHNbMl0sIGZsYXRDbGlwQ29vcmRzWzNdKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oZmxhdENsaXBDb29yZHNbNF0sIGZsYXRDbGlwQ29vcmRzWzVdKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oZmxhdENsaXBDb29yZHNbNl0sIGZsYXRDbGlwQ29vcmRzWzddKTtcbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgZXhlY3V0b3JzIGFuZCBwb3B1bGF0ZSB0aGVtIHVzaW5nIHRoZSBwcm92aWRlZCBpbnN0cnVjdGlvbnMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PGltcG9ydChcIi4vQnVpbGRlclR5cGUuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi9CdWlsZGVyLmpzXCIpLlNlcmlhbGl6YWJsZUluc3RydWN0aW9ucz4+fSBhbGxJbnN0cnVjdGlvbnMgVGhlIHNlcmlhbGl6YWJsZSBpbnN0cnVjdGlvbnNcbiAgICAgKi9cbiAgICBFeGVjdXRvckdyb3VwLnByb3RvdHlwZS5jcmVhdGVFeGVjdXRvcnNfID0gZnVuY3Rpb24gKGFsbEluc3RydWN0aW9ucykge1xuICAgICAgICBmb3IgKHZhciB6SW5kZXggaW4gYWxsSW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICB2YXIgZXhlY3V0b3JzID0gdGhpcy5leGVjdXRvcnNCeVpJbmRleF9bekluZGV4XTtcbiAgICAgICAgICAgIGlmIChleGVjdXRvcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGV4ZWN1dG9ycyA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0b3JzQnlaSW5kZXhfW3pJbmRleF0gPSBleGVjdXRvcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW5zdHJ1Y3Rpb25CeVppbmRleCA9IGFsbEluc3RydWN0aW9uc1t6SW5kZXhdO1xuICAgICAgICAgICAgdmFyIHJlbmRlckJ1ZmZlciA9IFt0aGlzLnJlbmRlckJ1ZmZlcl8gfHwgMCwgdGhpcy5yZW5kZXJCdWZmZXJfIHx8IDBdO1xuICAgICAgICAgICAgZm9yICh2YXIgYnVpbGRlclR5cGUgaW4gaW5zdHJ1Y3Rpb25CeVppbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBpbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbkJ5WmluZGV4W2J1aWxkZXJUeXBlXTtcbiAgICAgICAgICAgICAgICBleGVjdXRvcnNbYnVpbGRlclR5cGVdID0gbmV3IEV4ZWN1dG9yKHRoaXMucmVzb2x1dGlvbl8sIHRoaXMucGl4ZWxSYXRpb18sIHRoaXMub3ZlcmxhcHNfLCBpbnN0cnVjdGlvbnMsIHJlbmRlckJ1ZmZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9CdWlsZGVyVHlwZS5qc1wiKS5kZWZhdWx0Pn0gZXhlY3V0b3JzIEV4ZWN1dG9ycy5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBIYXMgZXhlY3V0b3JzIG9mIHRoZSBwcm92aWRlZCB0eXBlcy5cbiAgICAgKi9cbiAgICBFeGVjdXRvckdyb3VwLnByb3RvdHlwZS5oYXNFeGVjdXRvcnMgPSBmdW5jdGlvbiAoZXhlY3V0b3JzKSB7XG4gICAgICAgIGZvciAodmFyIHpJbmRleCBpbiB0aGlzLmV4ZWN1dG9yc0J5WkluZGV4Xykge1xuICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZXMgPSB0aGlzLmV4ZWN1dG9yc0J5WkluZGV4X1t6SW5kZXhdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXhlY3V0b3JzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXhlY3V0b3JzW2ldIGluIGNhbmRpZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UpOiBUfSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IGRlY2x1dHRlcmVkRmVhdHVyZXMgRGVjbHV0dGVyZWQgZmVhdHVyZXMuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIEV4ZWN1dG9yR3JvdXAucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBkZWNsdXR0ZXJlZEZlYXR1cmVzKSB7XG4gICAgICAgIGhpdFRvbGVyYW5jZSA9IE1hdGgucm91bmQoaGl0VG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIGNvbnRleHRTaXplID0gaGl0VG9sZXJhbmNlICogMiArIDE7XG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSBjb21wb3NlVHJhbnNmb3JtKHRoaXMuaGl0RGV0ZWN0aW9uVHJhbnNmb3JtXywgaGl0VG9sZXJhbmNlICsgMC41LCBoaXRUb2xlcmFuY2UgKyAwLjUsIDEgLyByZXNvbHV0aW9uLCAtMSAvIHJlc29sdXRpb24sIC1yb3RhdGlvbiwgLWNvb3JkaW5hdGVbMF0sIC1jb29yZGluYXRlWzFdKTtcbiAgICAgICAgaWYgKCF0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfKSB7XG4gICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKGNvbnRleHRTaXplLCBjb250ZXh0U2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfO1xuICAgICAgICBpZiAoY29udGV4dC5jYW52YXMud2lkdGggIT09IGNvbnRleHRTaXplIHx8XG4gICAgICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQgIT09IGNvbnRleHRTaXplKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNhbnZhcy53aWR0aCA9IGNvbnRleHRTaXplO1xuICAgICAgICAgICAgY29udGV4dC5jYW52YXMuaGVpZ2h0ID0gY29udGV4dFNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjb250ZXh0U2l6ZSwgY29udGV4dFNpemUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBoaXRFeHRlbnQ7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlckJ1ZmZlcl8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGl0RXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgICAgIGV4dGVuZENvb3JkaW5hdGUoaGl0RXh0ZW50LCBjb29yZGluYXRlKTtcbiAgICAgICAgICAgIGJ1ZmZlcihoaXRFeHRlbnQsIHJlc29sdXRpb24gKiAodGhpcy5yZW5kZXJCdWZmZXJfICsgaGl0VG9sZXJhbmNlKSwgaGl0RXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFzayA9IGdldENpcmNsZUFycmF5KGhpdFRvbGVyYW5jZSk7XG4gICAgICAgIHZhciBidWlsZGVyVHlwZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAgICAgKiBAcmV0dXJuIHs/fSBDYWxsYmFjayByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBmZWF0dXJlQ2FsbGJhY2soZmVhdHVyZSkge1xuICAgICAgICAgICAgdmFyIGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNvbnRleHRTaXplLCBjb250ZXh0U2l6ZSlcbiAgICAgICAgICAgICAgICAuZGF0YTtcbiAgICAgICAgICAgIGZvciAodmFyIGlfMSA9IDA7IGlfMSA8IGNvbnRleHRTaXplOyBpXzErKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGpfMSA9IDA7IGpfMSA8IGNvbnRleHRTaXplOyBqXzErKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFza1tpXzFdW2pfMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZURhdGFbKGpfMSAqIGNvbnRleHRTaXplICsgaV8xKSAqIDQgKyAzXSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZGVjbHV0dGVyZWRGZWF0dXJlcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYnVpbGRlclR5cGUgPT0gQnVpbGRlclR5cGUuSU1BR0UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXJUeXBlID09IEJ1aWxkZXJUeXBlLlRFWFQpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsdXR0ZXJlZEZlYXR1cmVzLmluZGV4T2YoZmVhdHVyZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdF8xID0gY2FsbGJhY2soZmVhdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjb250ZXh0U2l6ZSwgY29udGV4dFNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgICAgIHZhciB6cyA9IE9iamVjdC5rZXlzKHRoaXMuZXhlY3V0b3JzQnlaSW5kZXhfKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgenMuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcbiAgICAgICAgdmFyIGksIGosIGV4ZWN1dG9ycywgZXhlY3V0b3IsIHJlc3VsdDtcbiAgICAgICAgZm9yIChpID0genMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIHZhciB6SW5kZXhLZXkgPSB6c1tpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgZXhlY3V0b3JzID0gdGhpcy5leGVjdXRvcnNCeVpJbmRleF9bekluZGV4S2V5XTtcbiAgICAgICAgICAgIGZvciAoaiA9IE9SREVSLmxlbmd0aCAtIDE7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICAgICAgYnVpbGRlclR5cGUgPSBPUkRFUltqXTtcbiAgICAgICAgICAgICAgICBleGVjdXRvciA9IGV4ZWN1dG9yc1tidWlsZGVyVHlwZV07XG4gICAgICAgICAgICAgICAgaWYgKGV4ZWN1dG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZXhlY3V0b3IuZXhlY3V0ZUhpdERldGVjdGlvbihjb250ZXh0LCB0cmFuc2Zvcm0sIHJvdGF0aW9uLCBmZWF0dXJlQ2FsbGJhY2ssIGhpdEV4dGVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBDbGlwIGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIEV4ZWN1dG9yR3JvdXAucHJvdG90eXBlLmdldENsaXBDb29yZHMgPSBmdW5jdGlvbiAodHJhbnNmb3JtKSB7XG4gICAgICAgIHZhciBtYXhFeHRlbnQgPSB0aGlzLm1heEV4dGVudF87XG4gICAgICAgIGlmICghbWF4RXh0ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWluWCA9IG1heEV4dGVudFswXTtcbiAgICAgICAgdmFyIG1pblkgPSBtYXhFeHRlbnRbMV07XG4gICAgICAgIHZhciBtYXhYID0gbWF4RXh0ZW50WzJdO1xuICAgICAgICB2YXIgbWF4WSA9IG1heEV4dGVudFszXTtcbiAgICAgICAgdmFyIGZsYXRDbGlwQ29vcmRzID0gW21pblgsIG1pblksIG1pblgsIG1heFksIG1heFgsIG1heFksIG1heFgsIG1pblldO1xuICAgICAgICB0cmFuc2Zvcm0yRChmbGF0Q2xpcENvb3JkcywgMCwgOCwgMiwgdHJhbnNmb3JtLCBmbGF0Q2xpcENvb3Jkcyk7XG4gICAgICAgIHJldHVybiBmbGF0Q2xpcENvb3JkcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICAgICAqL1xuICAgIEV4ZWN1dG9yR3JvdXAucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpc0VtcHR5KHRoaXMuZXhlY3V0b3JzQnlaSW5kZXhfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbnRleHRTY2FsZSBTY2FsZSBvZiB0aGUgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZpZXdSb3RhdGlvbiBWaWV3IHJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc25hcFRvUGl4ZWwgU25hcCBwb2ludCBzeW1ib2xzIGFuZCB0ZXN0IHRvIGludGVnZXIgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHQ+PX0gb3B0X2J1aWxkZXJUeXBlcyBPcmRlcmVkIHJlcGxheSB0eXBlcyB0byByZXBsYXkuXG4gICAgICogICAgIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvcmVwbGF5fk9SREVSfVxuICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwPj19IG9wdF9kZWNsdXR0ZXJSZXBsYXlzIERlY2x1dHRlciByZXBsYXlzLlxuICAgICAqL1xuICAgIEV4ZWN1dG9yR3JvdXAucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoY29udGV4dCwgY29udGV4dFNjYWxlLCB0cmFuc2Zvcm0sIHZpZXdSb3RhdGlvbiwgc25hcFRvUGl4ZWwsIG9wdF9idWlsZGVyVHlwZXMsIG9wdF9kZWNsdXR0ZXJSZXBsYXlzKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICAgICAgdmFyIHpzID0gT2JqZWN0LmtleXModGhpcy5leGVjdXRvcnNCeVpJbmRleF8pLm1hcChOdW1iZXIpO1xuICAgICAgICB6cy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgICAgICAvLyBzZXR1cCBjbGlwcGluZyBzbyB0aGF0IHRoZSBwYXJ0cyBvZiBvdmVyLXNpbXBsaWZpZWQgZ2VvbWV0cmllcyBhcmUgbm90XG4gICAgICAgIC8vIHZpc2libGUgb3V0c2lkZSB0aGUgY3VycmVudCBleHRlbnQgd2hlbiBwYW5uaW5nXG4gICAgICAgIGlmICh0aGlzLm1heEV4dGVudF8pIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jbGlwKGNvbnRleHQsIHRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJ1aWxkZXJUeXBlcyA9IG9wdF9idWlsZGVyVHlwZXMgPyBvcHRfYnVpbGRlclR5cGVzIDogT1JERVI7XG4gICAgICAgIHZhciBpLCBpaSwgaiwgamosIHJlcGxheXMsIHJlcGxheTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSB6cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgekluZGV4S2V5ID0genNbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHJlcGxheXMgPSB0aGlzLmV4ZWN1dG9yc0J5WkluZGV4X1t6SW5kZXhLZXldO1xuICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSBidWlsZGVyVHlwZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBidWlsZGVyVHlwZSA9IGJ1aWxkZXJUeXBlc1tqXTtcbiAgICAgICAgICAgICAgICByZXBsYXkgPSByZXBsYXlzW2J1aWxkZXJUeXBlXTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdF9kZWNsdXR0ZXJSZXBsYXlzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVpbGRlclR5cGUgPT0gQnVpbGRlclR5cGUuSU1BR0UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyVHlwZSA9PSBCdWlsZGVyVHlwZS5URVhUKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlY2x1dHRlciA9IG9wdF9kZWNsdXR0ZXJSZXBsYXlzW3pJbmRleEtleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRlY2x1dHRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdF9kZWNsdXR0ZXJSZXBsYXlzW3pJbmRleEtleV0gPSBbcmVwbGF5LCB0cmFuc2Zvcm0uc2xpY2UoMCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyLnB1c2gocmVwbGF5LCB0cmFuc2Zvcm0uc2xpY2UoMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5LmV4ZWN1dGUoY29udGV4dCwgY29udGV4dFNjYWxlLCB0cmFuc2Zvcm0sIHZpZXdSb3RhdGlvbiwgc25hcFRvUGl4ZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1heEV4dGVudF8pIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRXhlY3V0b3JHcm91cDtcbn0oKSk7XG4vKipcbiAqIFRoaXMgY2FjaGUgaXMgdXNlZCBmb3Igc3RvcmluZyBjYWxjdWxhdGVkIHBpeGVsIGNpcmNsZXMgZm9yIGluY3JlYXNpbmcgcGVyZm9ybWFuY2UuXG4gKiBJdCBpcyBhIHN0YXRpYyBwcm9wZXJ0eSB0byBhbGxvdyBlYWNoIFJlcGxheWdyb3VwIHRvIGFjY2VzcyBpdC5cbiAqIEB0eXBlIHtPYmplY3Q8bnVtYmVyLCBBcnJheTxBcnJheTwoYm9vbGVhbnx1bmRlZmluZWQpPj4+fVxuICovXG52YXIgY2lyY2xlQXJyYXlDYWNoZSA9IHtcbiAgICAwOiBbW3RydWVdXSxcbn07XG4vKipcbiAqIFRoaXMgbWV0aG9kIGZpbGxzIGEgcm93IGluIHRoZSBhcnJheSBmcm9tIHRoZSBnaXZlbiBjb29yZGluYXRlIHRvIHRoZVxuICogbWlkZGxlIHdpdGggYHRydWVgLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTwoYm9vbGVhbnx1bmRlZmluZWQpPj59IGFycmF5IFRoZSBhcnJheSB0aGF0IHdpbGwgYmUgYWx0ZXJlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkgY29vcmRpbmF0ZS5cbiAqL1xuZnVuY3Rpb24gZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUoYXJyYXksIHgsIHkpIHtcbiAgICB2YXIgaTtcbiAgICB2YXIgcmFkaXVzID0gTWF0aC5mbG9vcihhcnJheS5sZW5ndGggLyAyKTtcbiAgICBpZiAoeCA+PSByYWRpdXMpIHtcbiAgICAgICAgZm9yIChpID0gcmFkaXVzOyBpIDwgeDsgaSsrKSB7XG4gICAgICAgICAgICBhcnJheVtpXVt5XSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoeCA8IHJhZGl1cykge1xuICAgICAgICBmb3IgKGkgPSB4ICsgMTsgaSA8IHJhZGl1czsgaSsrKSB7XG4gICAgICAgICAgICBhcnJheVtpXVt5XSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFRoaXMgbWV0aG9kcyBjcmVhdGVzIGEgY2lyY2xlIGluc2lkZSBhIGZpdHRpbmcgYXJyYXkuIFBvaW50cyBpbnNpZGUgdGhlXG4gKiBjaXJjbGUgYXJlIG1hcmtlZCBieSB0cnVlLCBwb2ludHMgb24gdGhlIG91dHNpZGUgYXJlIHVuZGVmaW5lZC5cbiAqIEl0IHVzZXMgdGhlIG1pZHBvaW50IGNpcmNsZSBhbGdvcml0aG0uXG4gKiBBIGNhY2hlIGlzIHVzZWQgdG8gaW5jcmVhc2UgcGVyZm9ybWFuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFJhZGl1cy5cbiAqIEByZXR1cm5zIHtBcnJheTxBcnJheTwoYm9vbGVhbnx1bmRlZmluZWQpPj59IEFuIGFycmF5IHdpdGggbWFya2VkIGNpcmNsZSBwb2ludHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaXJjbGVBcnJheShyYWRpdXMpIHtcbiAgICBpZiAoY2lyY2xlQXJyYXlDYWNoZVtyYWRpdXNdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGNpcmNsZUFycmF5Q2FjaGVbcmFkaXVzXTtcbiAgICB9XG4gICAgdmFyIGFycmF5U2l6ZSA9IHJhZGl1cyAqIDIgKyAxO1xuICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoYXJyYXlTaXplKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5U2l6ZTsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IG5ldyBBcnJheShhcnJheVNpemUpO1xuICAgIH1cbiAgICB2YXIgeCA9IHJhZGl1cztcbiAgICB2YXIgeSA9IDA7XG4gICAgdmFyIGVycm9yID0gMDtcbiAgICB3aGlsZSAoeCA+PSB5KSB7XG4gICAgICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzICsgeCwgcmFkaXVzICsgeSk7XG4gICAgICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzICsgeSwgcmFkaXVzICsgeCk7XG4gICAgICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzIC0geSwgcmFkaXVzICsgeCk7XG4gICAgICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzIC0geCwgcmFkaXVzICsgeSk7XG4gICAgICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzIC0geCwgcmFkaXVzIC0geSk7XG4gICAgICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzIC0geSwgcmFkaXVzIC0geCk7XG4gICAgICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzICsgeSwgcmFkaXVzIC0geCk7XG4gICAgICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzICsgeCwgcmFkaXVzIC0geSk7XG4gICAgICAgIHkrKztcbiAgICAgICAgZXJyb3IgKz0gMSArIDIgKiB5O1xuICAgICAgICBpZiAoMiAqIChlcnJvciAtIHgpICsgMSA+IDApIHtcbiAgICAgICAgICAgIHggLT0gMTtcbiAgICAgICAgICAgIGVycm9yICs9IDEgLSAyICogeDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaXJjbGVBcnJheUNhY2hlW3JhZGl1c10gPSBhcnI7XG4gICAgcmV0dXJuIGFycjtcbn1cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgQXJyYXk8Kj4+fSBkZWNsdXR0ZXJSZXBsYXlzIERlY2x1dHRlciByZXBsYXlzLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgcG9pbnQgc3ltYm9scyBhbmQgdGV4dCB0byBpbnRlZ2VyIHBpeGVscy5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkRlY2x1dHRlckl0ZW1zPn0gZGVjbHV0dGVySXRlbXMgRGVjbHV0dGVyIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGF5RGVjbHV0dGVyKGRlY2x1dHRlclJlcGxheXMsIGNvbnRleHQsIHJvdGF0aW9uLCBvcGFjaXR5LCBzbmFwVG9QaXhlbCwgZGVjbHV0dGVySXRlbXMpIHtcbiAgICB2YXIgenMgPSBPYmplY3Qua2V5cyhkZWNsdXR0ZXJSZXBsYXlzKVxuICAgICAgICAubWFwKE51bWJlcilcbiAgICAgICAgLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gICAgZm9yICh2YXIgeiA9IDAsIHp6ID0genMubGVuZ3RoOyB6IDwgeno7ICsreikge1xuICAgICAgICB2YXIgZXhlY3V0b3JEYXRhID0gZGVjbHV0dGVyUmVwbGF5c1t6c1t6XS50b1N0cmluZygpXTtcbiAgICAgICAgdmFyIGN1cnJlbnRFeGVjdXRvciA9IHZvaWQgMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXhlY3V0b3JEYXRhLmxlbmd0aDsgaSA8IGlpOykge1xuICAgICAgICAgICAgdmFyIGV4ZWN1dG9yID0gZXhlY3V0b3JEYXRhW2krK107XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gZXhlY3V0b3JEYXRhW2krK107XG4gICAgICAgICAgICBleGVjdXRvci5leGVjdXRlKGNvbnRleHQsIDEsIHRyYW5zZm9ybSwgcm90YXRpb24sIHNuYXBUb1BpeGVsKTtcbiAgICAgICAgICAgIGlmIChleGVjdXRvciAhPT0gY3VycmVudEV4ZWN1dG9yICYmIGV4ZWN1dG9yLmRlY2x1dHRlckl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RXhlY3V0b3IgPSBleGVjdXRvcjtcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXJJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGV4ZWN1dG9yLmRlY2x1dHRlckl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBvcGFjaXR5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgRXhlY3V0b3JHcm91cDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4ZWN1dG9yR3JvdXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvSW1tZWRpYXRlXG4gKi9cbi8vIEZJWE1FIHRlc3QsIGVzcGVjaWFsbHkgcG9seWdvbnMgd2l0aCBob2xlcyBhbmQgbXVsdGlwb2x5Z29uc1xuLy8gRklYTUUgbmVlZCB0byBoYW5kbGUgbGFyZ2UgdGhpY2sgZmVhdHVyZXMgKHdoZXJlIHBpeGVsIHNpemUgbWF0dGVycylcbi8vIEZJWE1FIGFkZCBvZmZzZXQgYW5kIGVuZCB0byBvbC9nZW9tL2ZsYXQvdHJhbnNmb3JtfnRyYW5zZm9ybTJEP1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uLy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBWZWN0b3JDb250ZXh0IGZyb20gJy4uL1ZlY3RvckNvbnRleHQuanMnO1xuaW1wb3J0IHsgYXNDb2xvckxpa2UgfSBmcm9tICcuLi8uLi9jb2xvcmxpa2UuanMnO1xuaW1wb3J0IHsgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0RmlsbFN0eWxlLCBkZWZhdWx0Rm9udCwgZGVmYXVsdExpbmVDYXAsIGRlZmF1bHRMaW5lRGFzaCwgZGVmYXVsdExpbmVEYXNoT2Zmc2V0LCBkZWZhdWx0TGluZUpvaW4sIGRlZmF1bHRMaW5lV2lkdGgsIGRlZmF1bHRNaXRlckxpbWl0LCBkZWZhdWx0U3Ryb2tlU3R5bGUsIGRlZmF1bHRUZXh0QWxpZ24sIGRlZmF1bHRUZXh0QmFzZWxpbmUsIH0gZnJvbSAnLi4vY2FudmFzLmpzJztcbmltcG9ydCB7IGVxdWFscyB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbmltcG9ydCB7IGludGVyc2VjdHMgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtMkQgfSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybUdlb20yRCB9IGZyb20gJy4uLy4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGNvbmNyZXRlIHN1YmNsYXNzIG9mIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL1ZlY3RvckNvbnRleHR9IHRoYXQgaW1wbGVtZW50c1xuICogZGlyZWN0IHJlbmRlcmluZyBvZiBmZWF0dXJlcyBhbmQgZ2VvbWV0cmllcyB0byBhbiBIVE1MNSBDYW52YXMgY29udGV4dC5cbiAqIEluc3RhbmNlcyBvZiB0aGlzIGNsYXNzIGFyZSBjcmVhdGVkIGludGVybmFsbHkgYnkgdGhlIGxpYnJhcnkgYW5kXG4gKiBwcm92aWRlZCB0byBhcHBsaWNhdGlvbiBjb2RlIGFzIHZlY3RvckNvbnRleHQgbWVtYmVyIG9mIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnR9IG9iamVjdCBhc3NvY2lhdGVkIHdpdGggcG9zdGNvbXBvc2UsIHByZWNvbXBvc2UgYW5kXG4gKiByZW5kZXIgZXZlbnRzIGVtaXR0ZWQgYnkgbGF5ZXJzIGFuZCBtYXBzLlxuICovXG52YXIgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmlld1JvdGF0aW9uIFZpZXcgcm90YXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfc3F1YXJlZFRvbGVyYW5jZSBPcHRpb25hbCBzcXVhcmVkIHRvbGVyYW5jZSBmb3Igc2ltcGxpZmljYXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9uPX0gb3B0X3VzZXJUcmFuc2Zvcm0gVHJhbnNmb3JtIGZyb20gdXNlciB0byB2aWV3IHByb2plY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIoY29udGV4dCwgcGl4ZWxSYXRpbywgZXh0ZW50LCB0cmFuc2Zvcm0sIHZpZXdSb3RhdGlvbiwgb3B0X3NxdWFyZWRUb2xlcmFuY2UsIG9wdF91c2VyVHJhbnNmb3JtKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dF8gPSBjb250ZXh0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXh0ZW50XyA9IGV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhbnNmb3JtXyA9IHRyYW5zZm9ybTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3Um90YXRpb25fID0gdmlld1JvdGF0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNxdWFyZWRUb2xlcmFuY2VfID0gb3B0X3NxdWFyZWRUb2xlcmFuY2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVzZXJUcmFuc2Zvcm1fID0gb3B0X3VzZXJUcmFuc2Zvcm07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0RmlsbFN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHRTdHJva2VTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dFRleHRTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmlsbFN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0cm9rZVN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZUFuY2hvclhfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZUFuY2hvcllfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZUhlaWdodF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlT3BhY2l0eV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlT3JpZ2luWF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlT3JpZ2luWV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZVJvdGF0ZVdpdGhWaWV3XyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlUm90YXRpb25fID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZVNjYWxlXyA9IFswLCAwXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZVdpZHRoXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dF8gPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0T2Zmc2V0WF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRPZmZzZXRZXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRSb3RhdGVXaXRoVmlld18gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0Um90YXRpb25fID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0U2NhbGVfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGV4dEZpbGxTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50ZXh0U3Ryb2tlU3RhdGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRleHRTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbENvb3JkaW5hdGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBMb2NhbFRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdJbWFnZXNfID0gZnVuY3Rpb24gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgICAgICBpZiAoIXRoaXMuaW1hZ2VfKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBpeGVsQ29vcmRpbmF0ZXMgPSB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCAyLCB0aGlzLnRyYW5zZm9ybV8sIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgICAgIHZhciBsb2NhbFRyYW5zZm9ybSA9IHRoaXMudG1wTG9jYWxUcmFuc2Zvcm1fO1xuICAgICAgICB2YXIgYWxwaGEgPSBjb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgICAgICBpZiAodGhpcy5pbWFnZU9wYWNpdHlfICE9IDEpIHtcbiAgICAgICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBhbHBoYSAqIHRoaXMuaW1hZ2VPcGFjaXR5XztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLmltYWdlUm90YXRpb25fO1xuICAgICAgICBpZiAodGhpcy5pbWFnZVJvdGF0ZVdpdGhWaWV3Xykge1xuICAgICAgICAgICAgcm90YXRpb24gKz0gdGhpcy52aWV3Um90YXRpb25fO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBpeGVsQ29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgICAgICAgdmFyIHggPSBwaXhlbENvb3JkaW5hdGVzW2ldIC0gdGhpcy5pbWFnZUFuY2hvclhfO1xuICAgICAgICAgICAgdmFyIHkgPSBwaXhlbENvb3JkaW5hdGVzW2kgKyAxXSAtIHRoaXMuaW1hZ2VBbmNob3JZXztcbiAgICAgICAgICAgIGlmIChyb3RhdGlvbiAhPT0gMCB8fFxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VTY2FsZV9bMF0gIT0gMSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VTY2FsZV9bMV0gIT0gMSkge1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJYID0geCArIHRoaXMuaW1hZ2VBbmNob3JYXztcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyWSA9IHkgKyB0aGlzLmltYWdlQW5jaG9yWV87XG4gICAgICAgICAgICAgICAgY29tcG9zZVRyYW5zZm9ybShsb2NhbFRyYW5zZm9ybSwgY2VudGVyWCwgY2VudGVyWSwgMSwgMSwgcm90YXRpb24sIC1jZW50ZXJYLCAtY2VudGVyWSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0uYXBwbHkoY29udGV4dCwgbG9jYWxUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIGNvbnRleHQudHJhbnNsYXRlKGNlbnRlclgsIGNlbnRlclkpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2NhbGUodGhpcy5pbWFnZVNjYWxlX1swXSwgdGhpcy5pbWFnZVNjYWxlX1sxXSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGhpcy5pbWFnZV8sIHRoaXMuaW1hZ2VPcmlnaW5YXywgdGhpcy5pbWFnZU9yaWdpbllfLCB0aGlzLmltYWdlV2lkdGhfLCB0aGlzLmltYWdlSGVpZ2h0XywgLXRoaXMuaW1hZ2VBbmNob3JYXywgLXRoaXMuaW1hZ2VBbmNob3JZXywgdGhpcy5pbWFnZVdpZHRoXywgdGhpcy5pbWFnZUhlaWdodF8pO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGhpcy5pbWFnZV8sIHRoaXMuaW1hZ2VPcmlnaW5YXywgdGhpcy5pbWFnZU9yaWdpbllfLCB0aGlzLmltYWdlV2lkdGhfLCB0aGlzLmltYWdlSGVpZ2h0XywgeCwgeSwgdGhpcy5pbWFnZVdpZHRoXywgdGhpcy5pbWFnZUhlaWdodF8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmltYWdlT3BhY2l0eV8gIT0gMSkge1xuICAgICAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdUZXh0XyA9IGZ1bmN0aW9uIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRleHRTdGF0ZV8gfHwgdGhpcy50ZXh0XyA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50ZXh0RmlsbFN0YXRlXykge1xuICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0RmlsbFN0YXRlXyh0aGlzLnRleHRGaWxsU3RhdGVfKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50ZXh0U3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy50ZXh0U3Ryb2tlU3RhdGVfKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldENvbnRleHRUZXh0U3RhdGVfKHRoaXMudGV4dFN0YXRlXyk7XG4gICAgICAgIHZhciBwaXhlbENvb3JkaW5hdGVzID0gdHJhbnNmb3JtMkQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0aGlzLnRyYW5zZm9ybV8sIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMudGV4dFJvdGF0aW9uXztcbiAgICAgICAgaWYgKHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3Xykge1xuICAgICAgICAgICAgcm90YXRpb24gKz0gdGhpcy52aWV3Um90YXRpb25fO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHZhciB4ID0gcGl4ZWxDb29yZGluYXRlc1tvZmZzZXRdICsgdGhpcy50ZXh0T2Zmc2V0WF87XG4gICAgICAgICAgICB2YXIgeSA9IHBpeGVsQ29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0gKyB0aGlzLnRleHRPZmZzZXRZXztcbiAgICAgICAgICAgIGlmIChyb3RhdGlvbiAhPT0gMCB8fFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dFNjYWxlX1swXSAhPSAxIHx8XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0U2NhbGVfWzFdICE9IDEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxUcmFuc2Zvcm0gPSBjb21wb3NlVHJhbnNmb3JtKHRoaXMudG1wTG9jYWxUcmFuc2Zvcm1fLCB4LCB5LCAxLCAxLCByb3RhdGlvbiwgLXgsIC15KTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnNldFRyYW5zZm9ybS5hcHBseShjb250ZXh0LCBsb2NhbFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zY2FsZSh0aGlzLnRleHRTY2FsZV9bMF0sIHRoaXMudGV4dFNjYWxlX1sxXSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dFN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQodGhpcy50ZXh0XywgMCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRleHRGaWxsU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFRleHQodGhpcy50ZXh0XywgMCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dFN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQodGhpcy50ZXh0XywgeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRleHRGaWxsU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFRleHQodGhpcy50ZXh0XywgeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xvc2UgQ2xvc2UuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLm1vdmVUb0xpbmVUb18gPSBmdW5jdGlvbiAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjbG9zZSkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgICAgIHZhciBwaXhlbENvb3JkaW5hdGVzID0gdHJhbnNmb3JtMkQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0aGlzLnRyYW5zZm9ybV8sIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgICAgICBjb250ZXh0Lm1vdmVUbyhwaXhlbENvb3JkaW5hdGVzWzBdLCBwaXhlbENvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHBpeGVsQ29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgICAgICBpZiAoY2xvc2UpIHtcbiAgICAgICAgICAgIGxlbmd0aCAtPSAyO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAyOyBpIDwgbGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHBpeGVsQ29vcmRpbmF0ZXNbaV0sIHBpeGVsQ29vcmRpbmF0ZXNbaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xvc2UpIHtcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1JpbmdzXyA9IGZ1bmN0aW9uIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5tb3ZlVG9MaW5lVG9fKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzW2ldLCBzdHJpZGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBjaXJjbGUgZ2VvbWV0cnkgaW50byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZSBhbmQgdXNlc1xuICAgICAqIHRoZSBjdXJyZW50IGZpbGwgYW5kIHN0cm9rZSBzdHlsZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IENpcmNsZSBnZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHRoaXMuZXh0ZW50XywgZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXyB8fCB0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGV4dEZpbGxTdGF0ZV8odGhpcy5maWxsU3RhdGVfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGV4dFN0cm9rZVN0YXRlXyh0aGlzLnN0cm9rZVN0YXRlXyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGl4ZWxDb29yZGluYXRlcyA9IHRyYW5zZm9ybUdlb20yRChnZW9tZXRyeSwgdGhpcy50cmFuc2Zvcm1fLCB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfKTtcbiAgICAgICAgICAgIHZhciBkeCA9IHBpeGVsQ29vcmRpbmF0ZXNbMl0gLSBwaXhlbENvb3JkaW5hdGVzWzBdO1xuICAgICAgICAgICAgdmFyIGR5ID0gcGl4ZWxDb29yZGluYXRlc1szXSAtIHBpeGVsQ29vcmRpbmF0ZXNbMV07XG4gICAgICAgICAgICB2YXIgcmFkaXVzID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0LmFyYyhwaXhlbENvb3JkaW5hdGVzWzBdLCBwaXhlbENvb3JkaW5hdGVzWzFdLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGxTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGV4dF8gIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdUZXh0XyhnZW9tZXRyeS5nZXRDZW50ZXIoKSwgMCwgMiwgMik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmVuZGVyaW5nIHN0eWxlLiAgTm90ZSB0aGF0IHNpbmNlIHRoaXMgaXMgYW4gaW1tZWRpYXRlIHJlbmRlcmluZyBBUEksXG4gICAgICogYW55IGB6SW5kZXhgIG9uIHRoZSBwcm92aWRlZCBzdHlsZSB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFRoZSByZW5kZXJpbmcgc3R5bGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChzdHlsZSkge1xuICAgICAgICB0aGlzLnNldEZpbGxTdHJva2VTdHlsZShzdHlsZS5nZXRGaWxsKCksIHN0eWxlLmdldFN0cm9rZSgpKTtcbiAgICAgICAgdGhpcy5zZXRJbWFnZVN0eWxlKHN0eWxlLmdldEltYWdlKCkpO1xuICAgICAgICB0aGlzLnNldFRleHRTdHlsZShzdHlsZS5nZXRUZXh0KCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodHJhbnNmb3JtKSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IHRyYW5zZm9ybTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIGdlb21ldHJ5IGludG8gdGhlIGNhbnZhcy4gIENhbGxcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9jYW52YXMvSW1tZWRpYXRlI3NldFN0eWxlfSBmaXJzdCB0byBzZXQgdGhlIHJlbmRlcmluZyBzdHlsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5IHRvIHJlbmRlci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdHZW9tZXRyeSA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdQb2ludChcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vUG9pbnQuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdMaW5lU3RyaW5nKFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9MWUdPTjpcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdQb2x5Z29uKFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3TXVsdGlQb2ludChcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2ludC5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd011bHRpTGluZVN0cmluZyhcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTjpcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdNdWx0aVBvbHlnb24oXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3R2VvbWV0cnlDb2xsZWN0aW9uKFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5DSVJDTEU6XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Q2lyY2xlKFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBmZWF0dXJlIGludG8gdGhlIGNhbnZhcy4gIE5vdGUgdGhhdCBhbnkgYHpJbmRleGAgb24gdGhlIHByb3ZpZGVkXG4gICAgICogc3R5bGUgd2lsbCBiZSBpZ25vcmVkIC0gZmVhdHVyZXMgYXJlIHJlbmRlcmVkIGltbWVkaWF0ZWx5IGluIHRoZSBvcmRlciB0aGF0XG4gICAgICogdGhpcyBtZXRob2QgaXMgY2FsbGVkLiAgSWYgeW91IG5lZWQgYHpJbmRleGAgc3VwcG9ydCwgeW91IHNob3VsZCBiZSB1c2luZyBhblxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvVmVjdG9yflZlY3RvckxheWVyfSBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0ZlYXR1cmUgPSBmdW5jdGlvbiAoZmVhdHVyZSwgc3R5bGUpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gc3R5bGUuZ2V0R2VvbWV0cnlGdW5jdGlvbigpKGZlYXR1cmUpO1xuICAgICAgICBpZiAoIWdlb21ldHJ5IHx8ICFpbnRlcnNlY3RzKHRoaXMuZXh0ZW50XywgZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdHlsZShzdHlsZSk7XG4gICAgICAgIHRoaXMuZHJhd0dlb21ldHJ5KGdlb21ldHJ5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIEdlb21ldHJ5Q29sbGVjdGlvbiB0byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZSBhbmRcbiAgICAgKiB1c2VzIHRoZSBjdXJyZW50IHN0eWxlcyBhcHByb3ByaWF0ZSBmb3IgZWFjaCBnZW9tZXRyeSBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0dlb21ldHJ5Q29sbGVjdGlvbiA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICB2YXIgZ2VvbWV0cmllcyA9IGdlb21ldHJ5LmdldEdlb21ldHJpZXNBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd0dlb21ldHJ5KGdlb21ldHJpZXNbaV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBQb2ludCBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAgICogdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vUG9pbnQuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IFBvaW50IGdlb21ldHJ5LlxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3UG9pbnQgPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8pIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeS5zaW1wbGlmeVRyYW5zZm9ybWVkKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8sIHRoaXMudXNlclRyYW5zZm9ybV8pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VfKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdJbWFnZXNfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgTXVsdGlQb2ludCBnZW9tZXRyeSAgaW50byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZSBhbmRcbiAgICAgKiB1c2VzIHRoZSBjdXJyZW50IHN0eWxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9pbnQuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IE11bHRpUG9pbnQgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdNdWx0aVBvaW50ID0gZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIGlmICh0aGlzLnNxdWFyZWRUb2xlcmFuY2VfKSB7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeS5zaW1wbGlmeVRyYW5zZm9ybWVkKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8sIHRoaXMudXNlclRyYW5zZm9ybV8pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VfKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdJbWFnZXNfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgTGluZVN0cmluZyBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAgICogdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTGluZVN0cmluZyBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0xpbmVTdHJpbmcgPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8pIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0xpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5LnNpbXBsaWZ5VHJhbnNmb3JtZWQodGhpcy5zcXVhcmVkVG9sZXJhbmNlXywgdGhpcy51c2VyVHJhbnNmb3JtXykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyh0aGlzLmV4dGVudF8sIGdlb21ldHJ5LmdldEV4dGVudCgpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB0aGlzLm1vdmVUb0xpbmVUb18oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBnZW9tZXRyeS5nZXRTdHJpZGUoKSwgZmFsc2UpO1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgICAgICAgIHZhciBmbGF0TWlkcG9pbnQgPSBnZW9tZXRyeS5nZXRGbGF0TWlkcG9pbnQoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRNaWRwb2ludCwgMCwgMiwgMik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIE11bHRpTGluZVN0cmluZyBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlXG4gICAgICogYW5kIHVzZXMgdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBNdWx0aUxpbmVTdHJpbmcgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdNdWx0aUxpbmVTdHJpbmcgPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8pIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkuc2ltcGxpZnlUcmFuc2Zvcm1lZCh0aGlzLnNxdWFyZWRUb2xlcmFuY2VfLCB0aGlzLnVzZXJUcmFuc2Zvcm1fKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdlb21ldHJ5RXh0ZW50ID0gZ2VvbWV0cnkuZ2V0RXh0ZW50KCk7XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyh0aGlzLmV4dGVudF8sIGdlb21ldHJ5RXh0ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgdmFyIGVuZHMgPSAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChnZW9tZXRyeS5nZXRFbmRzKCkpO1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IHRoaXMubW92ZVRvTGluZVRvXyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRfICE9PSAnJykge1xuICAgICAgICAgICAgdmFyIGZsYXRNaWRwb2ludHMgPSBnZW9tZXRyeS5nZXRGbGF0TWlkcG9pbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdUZXh0XyhmbGF0TWlkcG9pbnRzLCAwLCBmbGF0TWlkcG9pbnRzLmxlbmd0aCwgMik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIFBvbHlnb24gZ2VvbWV0cnkgaW50byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZSBhbmQgdXNlc1xuICAgICAqIHRoZSBjdXJyZW50IHN0eWxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IFBvbHlnb24gZ2VvbWV0cnkuXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdQb2x5Z29uID0gZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIGlmICh0aGlzLnNxdWFyZWRUb2xlcmFuY2VfKSB7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeS5zaW1wbGlmeVRyYW5zZm9ybWVkKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8sIHRoaXMudXNlclRyYW5zZm9ybV8pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8gfHwgdGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0RmlsbFN0YXRlXyh0aGlzLmZpbGxTdGF0ZV8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdSaW5nc18oZ2VvbWV0cnkuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChnZW9tZXRyeS5nZXRFbmRzKCkpLCBnZW9tZXRyeS5nZXRTdHJpZGUoKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRfICE9PSAnJykge1xuICAgICAgICAgICAgdmFyIGZsYXRJbnRlcmlvclBvaW50ID0gZ2VvbWV0cnkuZ2V0RmxhdEludGVyaW9yUG9pbnQoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRJbnRlcmlvclBvaW50LCAwLCAyLCAyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIE11bHRpUG9seWdvbiBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZFxuICAgICAqIHVzZXMgdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBNdWx0aVBvbHlnb24gZ2VvbWV0cnkuXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdNdWx0aVBvbHlnb24gPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3F1YXJlZFRvbGVyYW5jZV8pIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkuc2ltcGxpZnlUcmFuc2Zvcm1lZCh0aGlzLnNxdWFyZWRUb2xlcmFuY2VfLCB0aGlzLnVzZXJUcmFuc2Zvcm1fKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHRoaXMuZXh0ZW50XywgZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfIHx8IHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGV4dEZpbGxTdGF0ZV8odGhpcy5maWxsU3RhdGVfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGV4dFN0cm9rZVN0YXRlXyh0aGlzLnN0cm9rZVN0YXRlXyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgdmFyIGVuZHNzID0gZ2VvbWV0cnkuZ2V0RW5kc3MoKTtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmRyYXdSaW5nc18oZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRfICE9PSAnJykge1xuICAgICAgICAgICAgdmFyIGZsYXRJbnRlcmlvclBvaW50cyA9IGdlb21ldHJ5LmdldEZsYXRJbnRlcmlvclBvaW50cygpO1xuICAgICAgICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdEludGVyaW9yUG9pbnRzLCAwLCBmbGF0SW50ZXJpb3JQb2ludHMubGVuZ3RoLCAyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfSBmaWxsU3RhdGUgRmlsbCBzdGF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRDb250ZXh0RmlsbFN0YXRlXyA9IGZ1bmN0aW9uIChmaWxsU3RhdGUpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgICB2YXIgY29udGV4dEZpbGxTdGF0ZSA9IHRoaXMuY29udGV4dEZpbGxTdGF0ZV87XG4gICAgICAgIGlmICghY29udGV4dEZpbGxTdGF0ZSkge1xuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsU3RhdGUuZmlsbFN0eWxlO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0RmlsbFN0YXRlXyA9IHtcbiAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IGZpbGxTdGF0ZS5maWxsU3R5bGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbnRleHRGaWxsU3RhdGUuZmlsbFN0eWxlICE9IGZpbGxTdGF0ZS5maWxsU3R5bGUpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0RmlsbFN0YXRlLmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5maWxsU3R5bGU7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsU3RhdGUuZmlsbFN0eWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX0gc3Ryb2tlU3RhdGUgU3Ryb2tlIHN0YXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldENvbnRleHRTdHJva2VTdGF0ZV8gPSBmdW5jdGlvbiAoc3Ryb2tlU3RhdGUpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgICB2YXIgY29udGV4dFN0cm9rZVN0YXRlID0gdGhpcy5jb250ZXh0U3Ryb2tlU3RhdGVfO1xuICAgICAgICBpZiAoIWNvbnRleHRTdHJva2VTdGF0ZSkge1xuICAgICAgICAgICAgY29udGV4dC5saW5lQ2FwID0gc3Ryb2tlU3RhdGUubGluZUNhcDtcbiAgICAgICAgICAgIGlmIChjb250ZXh0LnNldExpbmVEYXNoKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaChzdHJva2VTdGF0ZS5saW5lRGFzaCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5saW5lSm9pbiA9IHN0cm9rZVN0YXRlLmxpbmVKb2luO1xuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBzdHJva2VTdGF0ZS5saW5lV2lkdGg7XG4gICAgICAgICAgICBjb250ZXh0Lm1pdGVyTGltaXQgPSBzdHJva2VTdGF0ZS5taXRlckxpbWl0O1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0U3Ryb2tlU3RhdGVfID0ge1xuICAgICAgICAgICAgICAgIGxpbmVDYXA6IHN0cm9rZVN0YXRlLmxpbmVDYXAsXG4gICAgICAgICAgICAgICAgbGluZURhc2g6IHN0cm9rZVN0YXRlLmxpbmVEYXNoLFxuICAgICAgICAgICAgICAgIGxpbmVEYXNoT2Zmc2V0OiBzdHJva2VTdGF0ZS5saW5lRGFzaE9mZnNldCxcbiAgICAgICAgICAgICAgICBsaW5lSm9pbjogc3Ryb2tlU3RhdGUubGluZUpvaW4sXG4gICAgICAgICAgICAgICAgbGluZVdpZHRoOiBzdHJva2VTdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgbWl0ZXJMaW1pdDogc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdCxcbiAgICAgICAgICAgICAgICBzdHJva2VTdHlsZTogc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbnRleHRTdHJva2VTdGF0ZS5saW5lQ2FwICE9IHN0cm9rZVN0YXRlLmxpbmVDYXApIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0U3Ryb2tlU3RhdGUubGluZUNhcCA9IHN0cm9rZVN0YXRlLmxpbmVDYXA7XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lQ2FwID0gc3Ryb2tlU3RhdGUubGluZUNhcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZXh0LnNldExpbmVEYXNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlcXVhbHMoY29udGV4dFN0cm9rZVN0YXRlLmxpbmVEYXNoLCBzdHJva2VTdGF0ZS5saW5lRGFzaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaCgoY29udGV4dFN0cm9rZVN0YXRlLmxpbmVEYXNoID0gc3Ryb2tlU3RhdGUubGluZURhc2gpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHRTdHJva2VTdGF0ZS5saW5lRGFzaE9mZnNldCAhPSBzdHJva2VTdGF0ZS5saW5lRGFzaE9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgPSBzdHJva2VTdGF0ZS5saW5lRGFzaE9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUubGluZUpvaW4gIT0gc3Ryb2tlU3RhdGUubGluZUpvaW4pIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0U3Ryb2tlU3RhdGUubGluZUpvaW4gPSBzdHJva2VTdGF0ZS5saW5lSm9pbjtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gc3Ryb2tlU3RhdGUubGluZUpvaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGV4dFN0cm9rZVN0YXRlLmxpbmVXaWR0aCAhPSBzdHJva2VTdGF0ZS5saW5lV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0U3Ryb2tlU3RhdGUubGluZVdpZHRoID0gc3Ryb2tlU3RhdGUubGluZVdpZHRoO1xuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlU3RhdGUubGluZVdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRleHRTdHJva2VTdGF0ZS5taXRlckxpbWl0ICE9IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0U3Ryb2tlU3RhdGUubWl0ZXJMaW1pdCA9IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQ7XG4gICAgICAgICAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUgIT0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0U3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUgPSBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZX0gdGV4dFN0YXRlIFRleHQgc3RhdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0Q29udGV4dFRleHRTdGF0ZV8gPSBmdW5jdGlvbiAodGV4dFN0YXRlKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgICAgdmFyIGNvbnRleHRUZXh0U3RhdGUgPSB0aGlzLmNvbnRleHRUZXh0U3RhdGVfO1xuICAgICAgICB2YXIgdGV4dEFsaWduID0gdGV4dFN0YXRlLnRleHRBbGlnblxuICAgICAgICAgICAgPyB0ZXh0U3RhdGUudGV4dEFsaWduXG4gICAgICAgICAgICA6IGRlZmF1bHRUZXh0QWxpZ247XG4gICAgICAgIGlmICghY29udGV4dFRleHRTdGF0ZSkge1xuICAgICAgICAgICAgY29udGV4dC5mb250ID0gdGV4dFN0YXRlLmZvbnQ7XG4gICAgICAgICAgICBjb250ZXh0LnRleHRBbGlnbiA9IC8qKiBAdHlwZSB7Q2FudmFzVGV4dEFsaWdufSAqLyAodGV4dEFsaWduKTtcbiAgICAgICAgICAgIGNvbnRleHQudGV4dEJhc2VsaW5lID0gLyoqIEB0eXBlIHtDYW52YXNUZXh0QmFzZWxpbmV9ICovICh0ZXh0U3RhdGUudGV4dEJhc2VsaW5lKTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dFRleHRTdGF0ZV8gPSB7XG4gICAgICAgICAgICAgICAgZm9udDogdGV4dFN0YXRlLmZvbnQsXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiB0ZXh0QWxpZ24sXG4gICAgICAgICAgICAgICAgdGV4dEJhc2VsaW5lOiB0ZXh0U3RhdGUudGV4dEJhc2VsaW5lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0VGV4dFN0YXRlLmZvbnQgIT0gdGV4dFN0YXRlLmZvbnQpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0VGV4dFN0YXRlLmZvbnQgPSB0ZXh0U3RhdGUuZm9udDtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZvbnQgPSB0ZXh0U3RhdGUuZm9udDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZXh0VGV4dFN0YXRlLnRleHRBbGlnbiAhPSB0ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0VGV4dFN0YXRlLnRleHRBbGlnbiA9IC8qKiBAdHlwZSB7Q2FudmFzVGV4dEFsaWdufSAqLyAodGV4dEFsaWduKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnRleHRBbGlnbiA9IC8qKiBAdHlwZSB7Q2FudmFzVGV4dEFsaWdufSAqLyAodGV4dEFsaWduKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZXh0VGV4dFN0YXRlLnRleHRCYXNlbGluZSAhPSB0ZXh0U3RhdGUudGV4dEJhc2VsaW5lKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dFRleHRTdGF0ZS50ZXh0QmFzZWxpbmUgPSAvKiogQHR5cGUge0NhbnZhc1RleHRCYXNlbGluZX0gKi8gKHRleHRTdGF0ZS50ZXh0QmFzZWxpbmUpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQudGV4dEJhc2VsaW5lID0gLyoqIEB0eXBlIHtDYW52YXNUZXh0QmFzZWxpbmV9ICovICh0ZXh0U3RhdGUudGV4dEJhc2VsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBmaWxsIGFuZCBzdHJva2Ugc3R5bGUgZm9yIHN1YnNlcXVlbnQgZHJhdyBvcGVyYXRpb25zLiAgVG8gY2xlYXJcbiAgICAgKiBlaXRoZXIgZmlsbCBvciBzdHJva2Ugc3R5bGVzLCBwYXNzIG51bGwgZm9yIHRoZSBhcHByb3ByaWF0ZSBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL0ZpbGwuanNcIikuZGVmYXVsdH0gZmlsbFN0eWxlIEZpbGwgc3R5bGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gc3Ryb2tlU3R5bGUgU3Ryb2tlIHN0eWxlLlxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiAoZmlsbFN0eWxlLCBzdHJva2VTdHlsZSkge1xuICAgICAgICBpZiAoIWZpbGxTdHlsZSkge1xuICAgICAgICAgICAgdGhpcy5maWxsU3RhdGVfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBmaWxsU3R5bGVDb2xvciA9IGZpbGxTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgICAgICAgdGhpcy5maWxsU3RhdGVfID0ge1xuICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogYXNDb2xvckxpa2UoZmlsbFN0eWxlQ29sb3IgPyBmaWxsU3R5bGVDb2xvciA6IGRlZmF1bHRGaWxsU3R5bGUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN0cm9rZVN0eWxlKSB7XG4gICAgICAgICAgICB0aGlzLnN0cm9rZVN0YXRlXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVDb2xvciA9IHN0cm9rZVN0eWxlLmdldENvbG9yKCk7XG4gICAgICAgICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lQ2FwID0gc3Ryb2tlU3R5bGUuZ2V0TGluZUNhcCgpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZURhc2ggPSBzdHJva2VTdHlsZS5nZXRMaW5lRGFzaCgpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgPSBzdHJva2VTdHlsZS5nZXRMaW5lRGFzaE9mZnNldCgpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZUpvaW4gPSBzdHJva2VTdHlsZS5nZXRMaW5lSm9pbigpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlV2lkdGggPSBzdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA9IHN0cm9rZVN0eWxlLmdldE1pdGVyTGltaXQoKTtcbiAgICAgICAgICAgIHRoaXMuc3Ryb2tlU3RhdGVfID0ge1xuICAgICAgICAgICAgICAgIGxpbmVDYXA6IHN0cm9rZVN0eWxlTGluZUNhcCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc3Ryb2tlU3R5bGVMaW5lQ2FwXG4gICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVDYXAsXG4gICAgICAgICAgICAgICAgbGluZURhc2g6IHN0cm9rZVN0eWxlTGluZURhc2ggPyBzdHJva2VTdHlsZUxpbmVEYXNoIDogZGVmYXVsdExpbmVEYXNoLFxuICAgICAgICAgICAgICAgIGxpbmVEYXNoT2Zmc2V0OiBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgID8gc3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldFxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRMaW5lRGFzaE9mZnNldCxcbiAgICAgICAgICAgICAgICBsaW5lSm9pbjogc3Ryb2tlU3R5bGVMaW5lSm9pbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc3Ryb2tlU3R5bGVMaW5lSm9pblxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRMaW5lSm9pbixcbiAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IHRoaXMucGl4ZWxSYXRpb18gKlxuICAgICAgICAgICAgICAgICAgICAoc3Ryb2tlU3R5bGVXaWR0aCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHN0cm9rZVN0eWxlV2lkdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVXaWR0aCksXG4gICAgICAgICAgICAgICAgbWl0ZXJMaW1pdDogc3Ryb2tlU3R5bGVNaXRlckxpbWl0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzdHJva2VTdHlsZU1pdGVyTGltaXRcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0TWl0ZXJMaW1pdCxcbiAgICAgICAgICAgICAgICBzdHJva2VTdHlsZTogYXNDb2xvckxpa2Uoc3Ryb2tlU3R5bGVDb2xvciA/IHN0cm9rZVN0eWxlQ29sb3IgOiBkZWZhdWx0U3Ryb2tlU3R5bGUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBpbWFnZSBzdHlsZSBmb3Igc3Vic2VxdWVudCBkcmF3IG9wZXJhdGlvbnMuICBQYXNzIG51bGwgdG8gcmVtb3ZlXG4gICAgICogdGhlIGltYWdlIHN0eWxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9JbWFnZS5qc1wiKS5kZWZhdWx0fSBpbWFnZVN0eWxlIEltYWdlIHN0eWxlLlxuICAgICAqL1xuICAgIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRJbWFnZVN0eWxlID0gZnVuY3Rpb24gKGltYWdlU3R5bGUpIHtcbiAgICAgICAgaWYgKCFpbWFnZVN0eWxlKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgaW1hZ2VTaXplID0gaW1hZ2VTdHlsZS5nZXRTaXplKCk7XG4gICAgICAgICAgICBpZiAoIWltYWdlU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZUFuY2hvciA9IGltYWdlU3R5bGUuZ2V0QW5jaG9yKCk7XG4gICAgICAgICAgICAgICAgLy8gRklYTUUgcGl4ZWwgcmF0aW9cbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2VJbWFnZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2UoMSk7XG4gICAgICAgICAgICAgICAgdmFyIGltYWdlT3JpZ2luID0gaW1hZ2VTdHlsZS5nZXRPcmlnaW4oKTtcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2VTY2FsZSA9IGltYWdlU3R5bGUuZ2V0U2NhbGVBcnJheSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VBbmNob3JYXyA9IGltYWdlQW5jaG9yWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VBbmNob3JZXyA9IGltYWdlQW5jaG9yWzFdO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VIZWlnaHRfID0gaW1hZ2VTaXplWzFdO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2VJbWFnZTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlT3BhY2l0eV8gPSBpbWFnZVN0eWxlLmdldE9wYWNpdHkoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlT3JpZ2luWF8gPSBpbWFnZU9yaWdpblswXTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlT3JpZ2luWV8gPSBpbWFnZU9yaWdpblsxXTtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlUm90YXRlV2l0aFZpZXdfID0gaW1hZ2VTdHlsZS5nZXRSb3RhdGVXaXRoVmlldygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VSb3RhdGlvbl8gPSBpbWFnZVN0eWxlLmdldFJvdGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVNjYWxlXyA9IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5waXhlbFJhdGlvXyAqIGltYWdlU2NhbGVbMF0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxSYXRpb18gKiBpbWFnZVNjYWxlWzFdLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVdpZHRoXyA9IGltYWdlU2l6ZVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0ZXh0IHN0eWxlIGZvciBzdWJzZXF1ZW50IGRyYXcgb3BlcmF0aW9ucy4gIFBhc3MgbnVsbCB0b1xuICAgICAqIHJlbW92ZSB0aGUgdGV4dCBzdHlsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvVGV4dC5qc1wiKS5kZWZhdWx0fSB0ZXh0U3R5bGUgVGV4dCBzdHlsZS5cbiAgICAgKi9cbiAgICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0VGV4dFN0eWxlID0gZnVuY3Rpb24gKHRleHRTdHlsZSkge1xuICAgICAgICBpZiAoIXRleHRTdHlsZSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0XyA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRleHRGaWxsU3R5bGUgPSB0ZXh0U3R5bGUuZ2V0RmlsbCgpO1xuICAgICAgICAgICAgaWYgKCF0ZXh0RmlsbFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0RmlsbFN0YXRlXyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dEZpbGxTdHlsZUNvbG9yID0gdGV4dEZpbGxTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dEZpbGxTdGF0ZV8gPSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogYXNDb2xvckxpa2UodGV4dEZpbGxTdHlsZUNvbG9yID8gdGV4dEZpbGxTdHlsZUNvbG9yIDogZGVmYXVsdEZpbGxTdHlsZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGUgPSB0ZXh0U3R5bGUuZ2V0U3Ryb2tlKCk7XG4gICAgICAgICAgICBpZiAoIXRleHRTdHJva2VTdHlsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dFN0cm9rZVN0YXRlXyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlQ29sb3IgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0Q29sb3IoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTGluZUNhcCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lQ2FwKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZUxpbmVEYXNoID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVEYXNoKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0ID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVEYXNoT2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZUxpbmVKb2luID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVKb2luKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZVdpZHRoID0gdGV4dFN0cm9rZVN0eWxlLmdldFdpZHRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZU1pdGVyTGltaXQgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TWl0ZXJMaW1pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dFN0cm9rZVN0YXRlXyA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGluZUNhcDogdGV4dFN0cm9rZVN0eWxlTGluZUNhcCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRleHRTdHJva2VTdHlsZUxpbmVDYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdExpbmVDYXAsXG4gICAgICAgICAgICAgICAgICAgIGxpbmVEYXNoOiB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0TGluZURhc2gsXG4gICAgICAgICAgICAgICAgICAgIGxpbmVEYXNoT2Zmc2V0OiB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0TGluZURhc2hPZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgIGxpbmVKb2luOiB0ZXh0U3Ryb2tlU3R5bGVMaW5lSm9pbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRleHRTdHJva2VTdHlsZUxpbmVKb2luXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRMaW5lSm9pbixcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoOiB0ZXh0U3Ryb2tlU3R5bGVXaWR0aCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRleHRTdHJva2VTdHlsZVdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRMaW5lV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIG1pdGVyTGltaXQ6IHRleHRTdHJva2VTdHlsZU1pdGVyTGltaXQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0ZXh0U3Ryb2tlU3R5bGVNaXRlckxpbWl0XG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRNaXRlckxpbWl0LFxuICAgICAgICAgICAgICAgICAgICBzdHJva2VTdHlsZTogYXNDb2xvckxpa2UodGV4dFN0cm9rZVN0eWxlQ29sb3IgPyB0ZXh0U3Ryb2tlU3R5bGVDb2xvciA6IGRlZmF1bHRTdHJva2VTdHlsZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZXh0Rm9udCA9IHRleHRTdHlsZS5nZXRGb250KCk7XG4gICAgICAgICAgICB2YXIgdGV4dE9mZnNldFggPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WCgpO1xuICAgICAgICAgICAgdmFyIHRleHRPZmZzZXRZID0gdGV4dFN0eWxlLmdldE9mZnNldFkoKTtcbiAgICAgICAgICAgIHZhciB0ZXh0Um90YXRlV2l0aFZpZXcgPSB0ZXh0U3R5bGUuZ2V0Um90YXRlV2l0aFZpZXcoKTtcbiAgICAgICAgICAgIHZhciB0ZXh0Um90YXRpb24gPSB0ZXh0U3R5bGUuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgIHZhciB0ZXh0U2NhbGUgPSB0ZXh0U3R5bGUuZ2V0U2NhbGVBcnJheSgpO1xuICAgICAgICAgICAgdmFyIHRleHRUZXh0ID0gdGV4dFN0eWxlLmdldFRleHQoKTtcbiAgICAgICAgICAgIHZhciB0ZXh0VGV4dEFsaWduID0gdGV4dFN0eWxlLmdldFRleHRBbGlnbigpO1xuICAgICAgICAgICAgdmFyIHRleHRUZXh0QmFzZWxpbmUgPSB0ZXh0U3R5bGUuZ2V0VGV4dEJhc2VsaW5lKCk7XG4gICAgICAgICAgICB0aGlzLnRleHRTdGF0ZV8gPSB7XG4gICAgICAgICAgICAgICAgZm9udDogdGV4dEZvbnQgIT09IHVuZGVmaW5lZCA/IHRleHRGb250IDogZGVmYXVsdEZvbnQsXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduOiB0ZXh0VGV4dEFsaWduICE9PSB1bmRlZmluZWQgPyB0ZXh0VGV4dEFsaWduIDogZGVmYXVsdFRleHRBbGlnbixcbiAgICAgICAgICAgICAgICB0ZXh0QmFzZWxpbmU6IHRleHRUZXh0QmFzZWxpbmUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IHRleHRUZXh0QmFzZWxpbmVcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0VGV4dEJhc2VsaW5lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudGV4dF8gPSB0ZXh0VGV4dCAhPT0gdW5kZWZpbmVkID8gdGV4dFRleHQgOiAnJztcbiAgICAgICAgICAgIHRoaXMudGV4dE9mZnNldFhfID1cbiAgICAgICAgICAgICAgICB0ZXh0T2Zmc2V0WCAhPT0gdW5kZWZpbmVkID8gdGhpcy5waXhlbFJhdGlvXyAqIHRleHRPZmZzZXRYIDogMDtcbiAgICAgICAgICAgIHRoaXMudGV4dE9mZnNldFlfID1cbiAgICAgICAgICAgICAgICB0ZXh0T2Zmc2V0WSAhPT0gdW5kZWZpbmVkID8gdGhpcy5waXhlbFJhdGlvXyAqIHRleHRPZmZzZXRZIDogMDtcbiAgICAgICAgICAgIHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3XyA9XG4gICAgICAgICAgICAgICAgdGV4dFJvdGF0ZVdpdGhWaWV3ICE9PSB1bmRlZmluZWQgPyB0ZXh0Um90YXRlV2l0aFZpZXcgOiBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudGV4dFJvdGF0aW9uXyA9IHRleHRSb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gdGV4dFJvdGF0aW9uIDogMDtcbiAgICAgICAgICAgIHRoaXMudGV4dFNjYWxlXyA9IFtcbiAgICAgICAgICAgICAgICB0aGlzLnBpeGVsUmF0aW9fICogdGV4dFNjYWxlWzBdLFxuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxSYXRpb18gKiB0ZXh0U2NhbGVbMV0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXI7XG59KFZlY3RvckNvbnRleHQpKTtcbmV4cG9ydCBkZWZhdWx0IENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1tZWRpYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uQW5jaG9yVW5pdHNcbiAqL1xuLyoqXG4gKiBJY29uIGFuY2hvciB1bml0cy4gT25lIG9mICdmcmFjdGlvbicsICdwaXhlbHMnLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIEFuY2hvciBpcyBhIGZyYWN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZSQUNUSU9OOiAnZnJhY3Rpb24nLFxuICAgIC8qKlxuICAgICAqIEFuY2hvciBpcyBpbiBwaXhlbHNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUElYRUxTOiAncGl4ZWxzJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JY29uQW5jaG9yVW5pdHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0ljb25PcmlnaW5cbiAqL1xuLyoqXG4gKiBJY29uIG9yaWdpbi4gT25lIG9mICdib3R0b20tbGVmdCcsICdib3R0b20tcmlnaHQnLCAndG9wLWxlZnQnLCAndG9wLXJpZ2h0Jy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBPcmlnaW4gaXMgYXQgYm90dG9tIGxlZnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9UVE9NX0xFRlQ6ICdib3R0b20tbGVmdCcsXG4gICAgLyoqXG4gICAgICogT3JpZ2luIGlzIGF0IGJvdHRvbSByaWdodFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1RUT01fUklHSFQ6ICdib3R0b20tcmlnaHQnLFxuICAgIC8qKlxuICAgICAqIE9yaWdpbiBpcyBhdCB0b3AgbGVmdFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUT1BfTEVGVDogJ3RvcC1sZWZ0JyxcbiAgICAvKipcbiAgICAgKiBPcmlnaW4gaXMgYXQgdG9wIHJpZ2h0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRPUF9SSUdIVDogJ3RvcC1yaWdodCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWNvbk9yaWdpbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGVcbiAqL1xuaW1wb3J0IHsgYXNTdHJpbmcgfSBmcm9tICcuLi9jb2xvci5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFNpbmdsZXRvbiBjbGFzcy4gQXZhaWxhYmxlIHRocm91Z2gge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZX5zaGFyZWR9LlxuICovXG52YXIgSWNvbkltYWdlQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSWNvbkltYWdlQ2FjaGUoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWNoZV8gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4Q2FjaGVTaXplXyA9IDMyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgICAgIHRoaXMuY2FjaGVTaXplXyA9IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVTaXplXyA+IHRoaXMubWF4Q2FjaGVTaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5leHBpcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlXykge1xuICAgICAgICAgICAgICAgIHZhciBpY29uSW1hZ2UgPSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAgICAgICAgIGlmICgoaSsrICYgMykgPT09IDAgJiYgIWljb25JbWFnZS5oYXNMaXN0ZW5lcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAgICAgICAgICAgICAtLXRoaXMuY2FjaGVTaXplXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHR9IEljb24gaW1hZ2UuXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcikge1xuICAgICAgICB2YXIga2V5ID0gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgICAgICAgcmV0dXJuIGtleSBpbiB0aGlzLmNhY2hlXyA/IHRoaXMuY2FjaGVfW2tleV0gOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBpY29uSW1hZ2UgSWNvbiBpbWFnZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yLCBpY29uSW1hZ2UpIHtcbiAgICAgICAgdmFyIGtleSA9IGdldEtleShzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcik7XG4gICAgICAgIHRoaXMuY2FjaGVfW2tleV0gPSBpY29uSW1hZ2U7XG4gICAgICAgICsrdGhpcy5jYWNoZVNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjYWNoZSBzaXplIG9mIHRoZSBpY29uIGNhY2hlLiBEZWZhdWx0IGlzIGAzMmAuIENoYW5nZSB0aGlzIHZhbHVlIHdoZW5cbiAgICAgKiB5b3VyIG1hcCB1c2VzIG1vcmUgdGhhbiAzMiBkaWZmZXJlbnQgaWNvbiBpbWFnZXMgYW5kIHlvdSBhcmUgbm90IGNhY2hpbmcgaWNvblxuICAgICAqIHN0eWxlcyBvbiB0aGUgYXBwbGljYXRpb24gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heENhY2hlU2l6ZSBDYWNoZSBtYXggc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAobWF4Q2FjaGVTaXplKSB7XG4gICAgICAgIHRoaXMubWF4Q2FjaGVTaXplXyA9IG1heENhY2hlU2l6ZTtcbiAgICAgICAgdGhpcy5leHBpcmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBJY29uSW1hZ2VDYWNoZTtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ2FjaGUga2V5LlxuICovXG5mdW5jdGlvbiBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgICB2YXIgY29sb3JTdHJpbmcgPSBjb2xvciA/IGFzU3RyaW5nKGNvbG9yKSA6ICdudWxsJztcbiAgICByZXR1cm4gY3Jvc3NPcmlnaW4gKyAnOicgKyBzcmMgKyAnOicgKyBjb2xvclN0cmluZztcbn1cbmV4cG9ydCBkZWZhdWx0IEljb25JbWFnZUNhY2hlO1xuLyoqXG4gKiBUaGUge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZX5JY29uSW1hZ2VDYWNoZX0gZm9yXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25+SWNvbn0gaW1hZ2VzLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHNoYXJlZCA9IG5ldyBJY29uSW1hZ2VDYWNoZSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWNvbkltYWdlQ2FjaGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0ljb25JbWFnZVxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4uL2RvbS5qcyc7XG5pbXBvcnQgeyBzaGFyZWQgYXMgaWNvbkltYWdlQ2FjaGUgfSBmcm9tICcuL0ljb25JbWFnZUNhY2hlLmpzJztcbmltcG9ydCB7IGxpc3RlbkltYWdlIH0gZnJvbSAnLi4vSW1hZ2UuanMnO1xuLyoqXG4gKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICovXG52YXIgdGFpbnRlZFRlc3RDb250ZXh0ID0gbnVsbDtcbnZhciBJY29uSW1hZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEljb25JbWFnZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gc3JjIFNyYy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBpbWFnZVN0YXRlIEltYWdlIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEljb25JbWFnZShpbWFnZSwgc3JjLCBzaXplLCBjcm9zc09yaWdpbiwgaW1hZ2VTdGF0ZSwgY29sb3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VfID0gIWltYWdlID8gbmV3IEltYWdlKCkgOiBpbWFnZTtcbiAgICAgICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICAgICAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovIChfdGhpcy5pbWFnZV8pLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8bnVtYmVyLCBIVE1MQ2FudmFzRWxlbWVudD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jYW52YXNfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2xvcl8gPSBjb2xvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/ZnVuY3Rpb24oKTp2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZVN0YXRlXyA9IGltYWdlU3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2l6ZV8gPSBzaXplO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ3x1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zcmNfID0gc3JjO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhaW50ZWRfO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGltYWdlIGNhbnZhcyBpcyB0YWludGVkLlxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUuaXNUYWludGVkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudGFpbnRlZF8gPT09IHVuZGVmaW5lZCAmJiB0aGlzLmltYWdlU3RhdGVfID09PSBJbWFnZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgaWYgKCF0YWludGVkVGVzdENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICB0YWludGVkVGVzdENvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWludGVkVGVzdENvbnRleHQuZHJhd0ltYWdlKHRoaXMuaW1hZ2VfLCAwLCAwKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGFpbnRlZFRlc3RDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhaW50ZWRfID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRhaW50ZWRUZXN0Q29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy50YWludGVkXyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudGFpbnRlZF8gPT09IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUuZGlzcGF0Y2hDaGFuZ2VFdmVudF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSWNvbkltYWdlLnByb3RvdHlwZS5oYW5kbGVJbWFnZUVycm9yXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pbWFnZVN0YXRlXyA9IEltYWdlU3RhdGUuRVJST1I7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaENoYW5nZUV2ZW50XygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLmhhbmRsZUltYWdlTG9hZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VTdGF0ZV8gPSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VfLndpZHRoID0gdGhpcy5zaXplX1swXTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VfLmhlaWdodCA9IHRoaXMuc2l6ZV9bMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNpemVfID0gW3RoaXMuaW1hZ2VfLndpZHRoLCB0aGlzLmltYWdlXy5oZWlnaHRdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaENoYW5nZUV2ZW50XygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHJldHVybiB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2Ugb3IgQ2FudmFzIGVsZW1lbnQuXG4gICAgICovXG4gICAgSWNvbkltYWdlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIHRoaXMucmVwbGFjZUNvbG9yXyhwaXhlbFJhdGlvKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzX1twaXhlbFJhdGlvXSA/IHRoaXMuY2FudmFzX1twaXhlbFJhdGlvXSA6IHRoaXMuaW1hZ2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBJbWFnZSBvciBDYW52YXMgZWxlbWVudC5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLmdldFBpeGVsUmF0aW8gPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICB0aGlzLnJlcGxhY2VDb2xvcl8ocGl4ZWxSYXRpbyk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhc19bcGl4ZWxSYXRpb10gPyBwaXhlbFJhdGlvIDogMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gSW1hZ2Ugc3RhdGUuXG4gICAgICovXG4gICAgSWNvbkltYWdlLnByb3RvdHlwZS5nZXRJbWFnZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZVN0YXRlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlIGVsZW1lbnQuXG4gICAgICovXG4gICAgSWNvbkltYWdlLnByb3RvdHlwZS5nZXRIaXREZXRlY3Rpb25JbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhpdERldGVjdGlvbkltYWdlXykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNUYWludGVkXygpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5zaXplX1swXTtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5zaXplX1sxXTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkltYWdlXyA9IHRoaXMuaW1hZ2VfO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmhpdERldGVjdGlvbkltYWdlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2l6ZSBvZiB0aGUgaWNvbiAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IEltYWdlIHNpemUuXG4gICAgICovXG4gICAgSWNvbkltYWdlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IEltYWdlIHNyYy5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLmdldFNyYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3JjXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VTdGF0ZV8gPT0gSW1hZ2VTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlU3RhdGVfID0gSW1hZ2VTdGF0ZS5MT0FESU5HO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovICh0aGlzLmltYWdlXykuc3JjID0gdGhpcy5zcmNfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUltYWdlRXJyb3JfKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IGxpc3RlbkltYWdlKHRoaXMuaW1hZ2VfLCB0aGlzLmhhbmRsZUltYWdlTG9hZF8uYmluZCh0aGlzKSwgdGhpcy5oYW5kbGVJbWFnZUVycm9yXy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJY29uSW1hZ2UucHJvdG90eXBlLnJlcGxhY2VDb2xvcl8gPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICBpZiAoIXRoaXMuY29sb3JfIHx8IHRoaXMuY2FudmFzX1twaXhlbFJhdGlvXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdGhpcy5jYW52YXNfW3BpeGVsUmF0aW9dID0gY2FudmFzO1xuICAgICAgICBjYW52YXMud2lkdGggPSBNYXRoLmNlaWwodGhpcy5pbWFnZV8ud2lkdGggKiBwaXhlbFJhdGlvKTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IE1hdGguY2VpbCh0aGlzLmltYWdlXy5oZWlnaHQgKiBwaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguc2NhbGUocGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZV8sIDAsIDApO1xuICAgICAgICBpZiAodGhpcy5pc1RhaW50ZWRfKCkpIHtcbiAgICAgICAgICAgIC8vIElmIHJlYWRpbmcgZnJvbSB0aGUgY2FudmFzIHRocm93cyBhIFNlY3VyaXR5RXJyb3IgdGhlIHNhbWUgZWZmZWN0IGNhbiBiZVxuICAgICAgICAgICAgLy8gYWNoaWV2ZWQgd2l0aCBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIHVzZWQgYXMgdGhlIGRlZmF1bHQsIGJ1dCBpdCBpcyBub3QgZnVsbHkgc3VwcG9ydGVkIGJ5IGFsbFxuICAgICAgICAgICAgLy8gYnJvd3NlcnMuIEUuIGcuIEludGVybmV0IEV4cGxvcmVyIDExIGRvZXMgbm90IHN1cHBvcnQgdGhlIG11bHRpcGx5XG4gICAgICAgICAgICAvLyBvcGVyYXRpb24gYW5kIHRoZSByZXN1bHRpbmcgaW1hZ2Ugc2hhcGUgd2lsbCBiZSBjb21wbGV0ZWxseSBmaWxsZWQgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIHByb3ZpZGVkIGNvbG9yLlxuICAgICAgICAgICAgLy8gU28gdGhpcyBpcyBvbmx5IHVzZWQgYXMgYSBmYWxsYmFjay4gSXQgaXMgc3RpbGwgYmV0dGVyIHRoYW4gaGF2aW5nIG5vIGljb25cbiAgICAgICAgICAgIC8vIGF0IGFsbC5cbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5jb2xvcl87XG4gICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ211bHRpcGx5JztcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiKCcgKyBjWzBdICsgJywnICsgY1sxXSArICcsJyArIGNbMl0gKyAnKSc7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24taW4nO1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlXywgMCwgMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltZ0RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIHZhciBkYXRhID0gaW1nRGF0YS5kYXRhO1xuICAgICAgICB2YXIgciA9IHRoaXMuY29sb3JfWzBdIC8gMjU1LjA7XG4gICAgICAgIHZhciBnID0gdGhpcy5jb2xvcl9bMV0gLyAyNTUuMDtcbiAgICAgICAgdmFyIGIgPSB0aGlzLmNvbG9yX1syXSAvIDI1NS4wO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkYXRhLmxlbmd0aDsgaSA8IGlpOyBpICs9IDQpIHtcbiAgICAgICAgICAgIGRhdGFbaV0gKj0gcjtcbiAgICAgICAgICAgIGRhdGFbaSArIDFdICo9IGc7XG4gICAgICAgICAgICBkYXRhW2kgKyAyXSAqPSBiO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1nRGF0YSwgMCwgMCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEljb25JbWFnZS5wcm90b3R5cGUudW5saXN0ZW5JbWFnZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnVubGlzdGVuXykge1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8oKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEljb25JbWFnZTtcbn0oRXZlbnRUYXJnZXQpKTtcbi8qKlxuICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBpbWFnZSBJbWFnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IGltYWdlU3RhdGUgSW1hZ2Ugc3RhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0ljb25JbWFnZX0gSWNvbiBpbWFnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChpbWFnZSwgc3JjLCBzaXplLCBjcm9zc09yaWdpbiwgaW1hZ2VTdGF0ZSwgY29sb3IpIHtcbiAgICB2YXIgaWNvbkltYWdlID0gaWNvbkltYWdlQ2FjaGUuZ2V0KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgICBpZiAoIWljb25JbWFnZSkge1xuICAgICAgICBpY29uSW1hZ2UgPSBuZXcgSWNvbkltYWdlKGltYWdlLCBzcmMsIHNpemUsIGNyb3NzT3JpZ2luLCBpbWFnZVN0YXRlLCBjb2xvcik7XG4gICAgICAgIGljb25JbWFnZUNhY2hlLnNldChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvciwgaWNvbkltYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIGljb25JbWFnZTtcbn1cbmV4cG9ydCBkZWZhdWx0IEljb25JbWFnZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUljb25JbWFnZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSWNvbkFuY2hvclVuaXRzIGZyb20gJy4vSWNvbkFuY2hvclVuaXRzLmpzJztcbmltcG9ydCBJY29uT3JpZ2luIGZyb20gJy4vSWNvbk9yaWdpbi5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCBJbWFnZVN0eWxlIGZyb20gJy4vSW1hZ2UuanMnO1xuaW1wb3J0IHsgYXNBcnJheSB9IGZyb20gJy4uL2NvbG9yLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldEljb25JbWFnZSB9IGZyb20gJy4vSWNvbkltYWdlLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFthbmNob3I9WzAuNSwgMC41XV0gQW5jaG9yLiBEZWZhdWx0IHZhbHVlIGlzIHRoZSBpY29uIGNlbnRlci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9JY29uT3JpZ2luLmpzXCIpLmRlZmF1bHR9IFthbmNob3JPcmlnaW49J3RvcC1sZWZ0J10gT3JpZ2luIG9mIHRoZSBhbmNob3I6IGBib3R0b20tbGVmdGAsIGBib3R0b20tcmlnaHRgLFxuICogYHRvcC1sZWZ0YCBvciBgdG9wLXJpZ2h0YC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9JY29uQW5jaG9yVW5pdHMuanNcIikuZGVmYXVsdH0gW2FuY2hvclhVbml0cz0nZnJhY3Rpb24nXSBVbml0cyBpbiB3aGljaCB0aGUgYW5jaG9yIHggdmFsdWUgaXNcbiAqIHNwZWNpZmllZC4gQSB2YWx1ZSBvZiBgJ2ZyYWN0aW9uJ2AgaW5kaWNhdGVzIHRoZSB4IHZhbHVlIGlzIGEgZnJhY3Rpb24gb2YgdGhlIGljb24uIEEgdmFsdWUgb2YgYCdwaXhlbHMnYCBpbmRpY2F0ZXNcbiAqIHRoZSB4IHZhbHVlIGluIHBpeGVscy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9JY29uQW5jaG9yVW5pdHMuanNcIikuZGVmYXVsdH0gW2FuY2hvcllVbml0cz0nZnJhY3Rpb24nXSBVbml0cyBpbiB3aGljaCB0aGUgYW5jaG9yIHkgdmFsdWUgaXNcbiAqIHNwZWNpZmllZC4gQSB2YWx1ZSBvZiBgJ2ZyYWN0aW9uJ2AgaW5kaWNhdGVzIHRoZSB5IHZhbHVlIGlzIGEgZnJhY3Rpb24gb2YgdGhlIGljb24uIEEgdmFsdWUgb2YgYCdwaXhlbHMnYCBpbmRpY2F0ZXNcbiAqIHRoZSB5IHZhbHVlIGluIHBpeGVscy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8c3RyaW5nfSBbY29sb3JdIENvbG9yIHRvIHRpbnQgdGhlIGljb24uIElmIG5vdCBzcGVjaWZpZWQsXG4gKiB0aGUgaWNvbiB3aWxsIGJlIGxlZnQgYXMgaXMuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gTm90ZSB0aGF0IHlvdSBtdXN0IHByb3ZpZGUgYVxuICogYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBbaW1nXSBJbWFnZSBvYmplY3QgZm9yIHRoZSBpY29uLiBJZiB0aGUgYHNyY2Agb3B0aW9uIGlzIG5vdCBwcm92aWRlZCB0aGVuIHRoZVxuICogcHJvdmlkZWQgaW1hZ2UgbXVzdCBhbHJlYWR5IGJlIGxvYWRlZC4gQW5kIGluIHRoYXQgY2FzZSwgaXQgaXMgcmVxdWlyZWRcbiAqIHRvIHByb3ZpZGUgdGhlIHNpemUgb2YgdGhlIGltYWdlLCB3aXRoIHRoZSBgaW1nU2l6ZWAgb3B0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbb2Zmc2V0PVswLCAwXV0gT2Zmc2V0LCB3aGljaCwgdG9nZXRoZXIgd2l0aCB0aGUgc2l6ZSBhbmQgdGhlIG9mZnNldCBvcmlnaW4sIGRlZmluZSB0aGVcbiAqIHN1Yi1yZWN0YW5nbGUgdG8gdXNlIGZyb20gdGhlIG9yaWdpbmFsIGljb24gaW1hZ2UuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtkaXNwbGFjZW1lbnQ9WzAsMF1dIERpc3BsYWNlbWVudCB0aGUgaWNvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ljb25PcmlnaW4uanNcIikuZGVmYXVsdH0gW29mZnNldE9yaWdpbj0ndG9wLWxlZnQnXSBPcmlnaW4gb2YgdGhlIG9mZnNldDogYGJvdHRvbS1sZWZ0YCwgYGJvdHRvbS1yaWdodGAsXG4gKiBgdG9wLWxlZnRgIG9yIGB0b3AtcmlnaHRgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgb2YgdGhlIGljb24uXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFtzY2FsZT0xXSBTY2FsZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3JvdGF0ZVdpdGhWaWV3PWZhbHNlXSBXaGV0aGVyIHRvIHJvdGF0ZSB0aGUgaWNvbiB3aXRoIHRoZSB2aWV3LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyb3RhdGlvbj0wXSBSb3RhdGlvbiBpbiByYWRpYW5zIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UpLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFtzaXplXSBJY29uIHNpemUgaW4gcGl4ZWwuIENhbiBiZSB1c2VkIHRvZ2V0aGVyIHdpdGggYG9mZnNldGAgdG8gZGVmaW5lIHRoZVxuICogc3ViLXJlY3RhbmdsZSB0byB1c2UgZnJvbSB0aGUgb3JpZ2luIChzcHJpdGUpIGljb24gaW1hZ2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW2ltZ1NpemVdIEltYWdlIHNpemUgaW4gcGl4ZWxzLiBPbmx5IHJlcXVpcmVkIGlmIGBpbWdgIGlzIHNldCBhbmQgYHNyY2AgaXMgbm90LCBhbmRcbiAqIGZvciBTVkcgaW1hZ2VzIGluIEludGVybmV0IEV4cGxvcmVyIDExLiBUaGUgcHJvdmlkZWQgYGltZ1NpemVgIG5lZWRzIHRvIG1hdGNoIHRoZSBhY3R1YWwgc2l6ZSBvZiB0aGUgaW1hZ2UuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3NyY10gSW1hZ2Ugc291cmNlIFVSSS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTZXQgaWNvbiBzdHlsZSBmb3IgdmVjdG9yIGZlYXR1cmVzLlxuICogQGFwaVxuICovXG52YXIgSWNvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSWNvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEljb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgb3BhY2l0eSA9IG9wdGlvbnMub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFjaXR5IDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcm90YXRpb24gPSBvcHRpb25zLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJvdGF0aW9uIDogMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHNjYWxlID0gb3B0aW9ucy5zY2FsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zY2FsZSA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciByb3RhdGVXaXRoVmlldyA9IG9wdGlvbnMucm90YXRlV2l0aFZpZXcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRlV2l0aFZpZXcgOiBmYWxzZTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiBvcGFjaXR5LFxuICAgICAgICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxuICAgICAgICAgICAgZGlzcGxhY2VtZW50OiBvcHRpb25zLmRpc3BsYWNlbWVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kaXNwbGFjZW1lbnQgOiBbMCwgMF0sXG4gICAgICAgICAgICByb3RhdGVXaXRoVmlldzogcm90YXRlV2l0aFZpZXcsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvcl8gPSBvcHRpb25zLmFuY2hvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hbmNob3IgOiBbMC41LCAwLjVdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ub3JtYWxpemVkQW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JY29uT3JpZ2luLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JPcmlnaW5fID1cbiAgICAgICAgICAgIG9wdGlvbnMuYW5jaG9yT3JpZ2luICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuYW5jaG9yT3JpZ2luXG4gICAgICAgICAgICAgICAgOiBJY29uT3JpZ2luLlRPUF9MRUZUO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vSWNvbkFuY2hvclVuaXRzLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JYVW5pdHNfID1cbiAgICAgICAgICAgIG9wdGlvbnMuYW5jaG9yWFVuaXRzICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuYW5jaG9yWFVuaXRzXG4gICAgICAgICAgICAgICAgOiBJY29uQW5jaG9yVW5pdHMuRlJBQ1RJT047XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JY29uQW5jaG9yVW5pdHMuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvcllVbml0c18gPVxuICAgICAgICAgICAgb3B0aW9ucy5hbmNob3JZVW5pdHMgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5hbmNob3JZVW5pdHNcbiAgICAgICAgICAgICAgICA6IEljb25BbmNob3JVbml0cy5GUkFDVElPTjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3Jvc3NPcmlnaW5fID1cbiAgICAgICAgICAgIG9wdGlvbnMuY3Jvc3NPcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY3Jvc3NPcmlnaW4gOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgaW1hZ2UgPSBvcHRpb25zLmltZyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pbWcgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBpbWdTaXplID0gb3B0aW9ucy5pbWdTaXplICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmltZ1NpemUgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ3x1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgc3JjID0gb3B0aW9ucy5zcmM7XG4gICAgICAgIGFzc2VydCghKHNyYyAhPT0gdW5kZWZpbmVkICYmIGltYWdlKSwgNCk7IC8vIGBpbWFnZWAgYW5kIGBzcmNgIGNhbm5vdCBiZSBwcm92aWRlZCBhdCB0aGUgc2FtZSB0aW1lXG4gICAgICAgIGFzc2VydCghaW1hZ2UgfHwgKGltYWdlICYmIGltZ1NpemUpLCA1KTsgLy8gYGltZ1NpemVgIG11c3QgYmUgc2V0IHdoZW4gYGltYWdlYCBpcyBwcm92aWRlZFxuICAgICAgICBpZiAoKHNyYyA9PT0gdW5kZWZpbmVkIHx8IHNyYy5sZW5ndGggPT09IDApICYmIGltYWdlKSB7XG4gICAgICAgICAgICBzcmMgPSAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovIChpbWFnZSkuc3JjIHx8IGdldFVpZChpbWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHNyYyAhPT0gdW5kZWZpbmVkICYmIHNyYy5sZW5ndGggPiAwLCA2KTsgLy8gQSBkZWZpbmVkIGFuZCBub24tZW1wdHkgYHNyY2Agb3IgYGltYWdlYCBtdXN0IGJlIHByb3ZpZGVkXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGltYWdlU3RhdGUgPSBvcHRpb25zLnNyYyAhPT0gdW5kZWZpbmVkID8gSW1hZ2VTdGF0ZS5JRExFIDogSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2xvcl8gPSBvcHRpb25zLmNvbG9yICE9PSB1bmRlZmluZWQgPyBhc0FycmF5KG9wdGlvbnMuY29sb3IpIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaWNvbkltYWdlXyA9IGdldEljb25JbWFnZShpbWFnZSwgXG4gICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoc3JjKSwgaW1nU2l6ZSwgX3RoaXMuY3Jvc3NPcmlnaW5fLCBpbWFnZVN0YXRlLCBfdGhpcy5jb2xvcl8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vZmZzZXRfID0gb3B0aW9ucy5vZmZzZXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub2Zmc2V0IDogWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vSWNvbk9yaWdpbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub2Zmc2V0T3JpZ2luXyA9XG4gICAgICAgICAgICBvcHRpb25zLm9mZnNldE9yaWdpbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLm9mZnNldE9yaWdpblxuICAgICAgICAgICAgICAgIDogSWNvbk9yaWdpbi5UT1BfTEVGVDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2l6ZV8gPSBvcHRpb25zLnNpemUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc2l6ZSA6IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvbmVzIHRoZSBzdHlsZS4gVGhlIHVuZGVybHlpbmcgSW1hZ2UvSFRNTENhbnZhc0VsZW1lbnQgaXMgbm90IGNsb25lZC5cbiAgICAgKiBAcmV0dXJuIHtJY29ufSBUaGUgY2xvbmVkIHN0eWxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJY29uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpO1xuICAgICAgICByZXR1cm4gbmV3IEljb24oe1xuICAgICAgICAgICAgYW5jaG9yOiB0aGlzLmFuY2hvcl8uc2xpY2UoKSxcbiAgICAgICAgICAgIGFuY2hvck9yaWdpbjogdGhpcy5hbmNob3JPcmlnaW5fLFxuICAgICAgICAgICAgYW5jaG9yWFVuaXRzOiB0aGlzLmFuY2hvclhVbml0c18sXG4gICAgICAgICAgICBhbmNob3JZVW5pdHM6IHRoaXMuYW5jaG9yWVVuaXRzXyxcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luOiB0aGlzLmNyb3NzT3JpZ2luXyxcbiAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXyAmJiB0aGlzLmNvbG9yXy5zbGljZVxuICAgICAgICAgICAgICAgID8gdGhpcy5jb2xvcl8uc2xpY2UoKVxuICAgICAgICAgICAgICAgIDogdGhpcy5jb2xvcl8gfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3JjOiB0aGlzLmdldFNyYygpLFxuICAgICAgICAgICAgb2Zmc2V0OiB0aGlzLm9mZnNldF8uc2xpY2UoKSxcbiAgICAgICAgICAgIG9mZnNldE9yaWdpbjogdGhpcy5vZmZzZXRPcmlnaW5fLFxuICAgICAgICAgICAgc2l6ZTogdGhpcy5zaXplXyAhPT0gbnVsbCA/IHRoaXMuc2l6ZV8uc2xpY2UoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9wYWNpdHk6IHRoaXMuZ2V0T3BhY2l0eSgpLFxuICAgICAgICAgICAgc2NhbGU6IEFycmF5LmlzQXJyYXkoc2NhbGUpID8gc2NhbGUuc2xpY2UoKSA6IHNjYWxlLFxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMuZ2V0Um90YXRpb24oKSxcbiAgICAgICAgICAgIHJvdGF0ZVdpdGhWaWV3OiB0aGlzLmdldFJvdGF0ZVdpdGhWaWV3KCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbmNob3IgcG9pbnQgaW4gcGl4ZWxzLiBUaGUgYW5jaG9yIGRldGVybWluZXMgdGhlIGNlbnRlciBwb2ludCBmb3IgdGhlXG4gICAgICogc3ltYm9saXplci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBBbmNob3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldEFuY2hvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubm9ybWFsaXplZEFuY2hvcl8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZWRBbmNob3JfO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbmNob3IgPSB0aGlzLmFuY2hvcl87XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgICAgIGlmICh0aGlzLmFuY2hvclhVbml0c18gPT0gSWNvbkFuY2hvclVuaXRzLkZSQUNUSU9OIHx8XG4gICAgICAgICAgICB0aGlzLmFuY2hvcllVbml0c18gPT0gSWNvbkFuY2hvclVuaXRzLkZSQUNUSU9OKSB7XG4gICAgICAgICAgICBpZiAoIXNpemUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFuY2hvciA9IHRoaXMuYW5jaG9yXy5zbGljZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yWFVuaXRzXyA9PSBJY29uQW5jaG9yVW5pdHMuRlJBQ1RJT04pIHtcbiAgICAgICAgICAgICAgICBhbmNob3JbMF0gKj0gc2l6ZVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFuY2hvcllVbml0c18gPT0gSWNvbkFuY2hvclVuaXRzLkZSQUNUSU9OKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yWzFdICo9IHNpemVbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYW5jaG9yT3JpZ2luXyAhPSBJY29uT3JpZ2luLlRPUF9MRUZUKSB7XG4gICAgICAgICAgICBpZiAoIXNpemUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbmNob3IgPT09IHRoaXMuYW5jaG9yXykge1xuICAgICAgICAgICAgICAgIGFuY2hvciA9IHRoaXMuYW5jaG9yXy5zbGljZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yT3JpZ2luXyA9PSBJY29uT3JpZ2luLlRPUF9SSUdIVCB8fFxuICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yT3JpZ2luXyA9PSBJY29uT3JpZ2luLkJPVFRPTV9SSUdIVCkge1xuICAgICAgICAgICAgICAgIGFuY2hvclswXSA9IC1hbmNob3JbMF0gKyBzaXplWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yT3JpZ2luXyA9PSBJY29uT3JpZ2luLkJPVFRPTV9MRUZUIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5hbmNob3JPcmlnaW5fID09IEljb25PcmlnaW4uQk9UVE9NX1JJR0hUKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yWzFdID0gLWFuY2hvclsxXSArIHNpemVbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3JtYWxpemVkQW5jaG9yXyA9IGFuY2hvcjtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplZEFuY2hvcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludC4gVGhlIGFuY2hvciBkZXRlcm1pbmVzIHRoZSBjZW50ZXIgcG9pbnQgZm9yIHRoZVxuICAgICAqIHN5bWJvbGl6ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBBbmNob3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLnNldEFuY2hvciA9IGZ1bmN0aW9uIChhbmNob3IpIHtcbiAgICAgICAgdGhpcy5hbmNob3JfID0gYW5jaG9yO1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZWRBbmNob3JfID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWNvbiBjb2xvci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gQ29sb3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldENvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGltYWdlIGljb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHJldHVybiB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2Ugb3IgQ2FudmFzIGVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKHBpeGVsUmF0aW8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNvbkltYWdlXy5nZXRJbWFnZShwaXhlbFJhdGlvKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcGl4ZWwgcmF0aW9uIG9mIHRoZSBpbWFnZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbi5wcm90b3R5cGUuZ2V0UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljb25JbWFnZV8uZ2V0UGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gSW1hZ2Ugc2l6ZS5cbiAgICAgKi9cbiAgICBJY29uLnByb3RvdHlwZS5nZXRJbWFnZVNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljb25JbWFnZV8uZ2V0U2l6ZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplIG9mIHRoZSBoaXQtZGV0ZWN0aW9uIGltYWdlLlxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldEhpdERldGVjdGlvbkltYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW1hZ2VTaXplKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IEltYWdlIHN0YXRlLlxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldEltYWdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljb25JbWFnZV8uZ2V0SW1hZ2VTdGF0ZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2UgZWxlbWVudC5cbiAgICAgKi9cbiAgICBJY29uLnByb3RvdHlwZS5nZXRIaXREZXRlY3Rpb25JbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNvbkltYWdlXy5nZXRIaXREZXRlY3Rpb25JbWFnZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvcmlnaW4gb2YgdGhlIHN5bWJvbGl6ZXIuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3JpZ2luLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJY29uLnByb3RvdHlwZS5nZXRPcmlnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm9yaWdpbl8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbl87XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMub2Zmc2V0XztcbiAgICAgICAgdmFyIGRpc3BsYWNlbWVudCA9IHRoaXMuZ2V0RGlzcGxhY2VtZW50KCk7XG4gICAgICAgIGlmICh0aGlzLm9mZnNldE9yaWdpbl8gIT0gSWNvbk9yaWdpbi5UT1BfTEVGVCkge1xuICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFNpemUoKTtcbiAgICAgICAgICAgIHZhciBpY29uSW1hZ2VTaXplID0gdGhpcy5pY29uSW1hZ2VfLmdldFNpemUoKTtcbiAgICAgICAgICAgIGlmICghc2l6ZSB8fCAhaWNvbkltYWdlU2l6ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0LnNsaWNlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5vZmZzZXRPcmlnaW5fID09IEljb25PcmlnaW4uVE9QX1JJR0hUIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRPcmlnaW5fID09IEljb25PcmlnaW4uQk9UVE9NX1JJR0hUKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0WzBdID0gaWNvbkltYWdlU2l6ZVswXSAtIHNpemVbMF0gLSBvZmZzZXRbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vZmZzZXRPcmlnaW5fID09IEljb25PcmlnaW4uQk9UVE9NX0xFRlQgfHxcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldE9yaWdpbl8gPT0gSWNvbk9yaWdpbi5CT1RUT01fUklHSFQpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRbMV0gPSBpY29uSW1hZ2VTaXplWzFdIC0gc2l6ZVsxXSAtIG9mZnNldFsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvZmZzZXRbMF0gKz0gZGlzcGxhY2VtZW50WzBdO1xuICAgICAgICBvZmZzZXRbMV0gKz0gZGlzcGxhY2VtZW50WzFdO1xuICAgICAgICB0aGlzLm9yaWdpbl8gPSBvZmZzZXQ7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGltYWdlIFVSTC5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBJbWFnZSBzcmMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldFNyYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNvbkltYWdlXy5nZXRTcmMoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2l6ZSBvZiB0aGUgaWNvbiAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IEltYWdlIHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5zaXplXyA/IHRoaXMuaWNvbkltYWdlXy5nZXRTaXplKCkgOiB0aGlzLnNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCk6IHZvaWR9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLmxpc3RlbkltYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuaWNvbkltYWdlXy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIGxpc3RlbmVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqIFdoZW4gcmVuZGVyaW5nIGEgZmVhdHVyZSB3aXRoIGFuIGljb24gc3R5bGUsIHRoZSB2ZWN0b3IgcmVuZGVyZXIgd2lsbFxuICAgICAqIGF1dG9tYXRpY2FsbHkgY2FsbCB0aGlzIG1ldGhvZC4gSG93ZXZlciwgeW91IG1pZ2h0IHdhbnQgdG8gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kIHlvdXJzZWxmIGZvciBwcmVsb2FkaW5nIG9yIG90aGVyIHB1cnBvc2VzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJY29uLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmljb25JbWFnZV8ubG9hZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCk6IHZvaWR9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIEljb24ucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VDaGFuZ2UgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5pY29uSW1hZ2VfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgbGlzdGVuZXIpO1xuICAgIH07XG4gICAgcmV0dXJuIEljb247XG59KEltYWdlU3R5bGUpKTtcbmV4cG9ydCBkZWZhdWx0IEljb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JY29uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL2hpdGRldGV0XG4gKi9cbmltcG9ydCBDYW52YXNJbW1lZGlhdGVSZW5kZXJlciBmcm9tICcuL0ltbWVkaWF0ZS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uLy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBJY29uQW5jaG9yVW5pdHMgZnJvbSAnLi4vLi4vc3R5bGUvSWNvbkFuY2hvclVuaXRzLmpzJztcbmltcG9ydCB7IEljb24gfSBmcm9tICcuLi8uLi9zdHlsZS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuLi8uLi9kb20uanMnO1xuaW1wb3J0IHsgaW50ZXJzZWN0cyB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBDYW52YXMgc2l6ZSBpbiBjc3MgcGl4ZWxzLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtPn0gdHJhbnNmb3JtcyBUcmFuc2Zvcm1zXG4gKiBmb3IgcmVuZGVyaW5nIGZlYXR1cmVzIHRvIGFsbCB3b3JsZHMgb2YgdGhlIHZpZXdwb3J0LCBmcm9tIGNvb3JkaW5hdGVzIHRvIGNzc1xuICogcGl4ZWxzLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlPn0gZmVhdHVyZXNcbiAqIEZlYXR1cmVzIHRvIGNvbnNpZGVyIGZvciBoaXQgZGV0ZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH0gc3R5bGVGdW5jdGlvblxuICogTGF5ZXIgc3R5bGUgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7SW1hZ2VEYXRhfSBIaXQgZGV0ZWN0aW9uIGltYWdlIGRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIaXREZXRlY3Rpb25JbWFnZURhdGEoc2l6ZSwgdHJhbnNmb3JtcywgZmVhdHVyZXMsIHN0eWxlRnVuY3Rpb24sIGV4dGVudCwgcmVzb2x1dGlvbiwgcm90YXRpb24pIHtcbiAgICB2YXIgd2lkdGggPSBzaXplWzBdIC8gMjtcbiAgICB2YXIgaGVpZ2h0ID0gc2l6ZVsxXSAvIDI7XG4gICAgdmFyIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQod2lkdGgsIGhlaWdodCk7XG4gICAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgdmFyIHJlbmRlcmVyID0gbmV3IENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyKGNvbnRleHQsIDAuNSwgZXh0ZW50LCBudWxsLCByb3RhdGlvbik7XG4gICAgdmFyIGZlYXR1cmVDb3VudCA9IGZlYXR1cmVzLmxlbmd0aDtcbiAgICAvLyBTdHJldGNoIGhpdCBkZXRlY3Rpb24gaW5kZXggdG8gdXNlIHRoZSB3aG9sZSBhdmFpbGFibGUgY29sb3IgcmFuZ2VcbiAgICB2YXIgaW5kZXhGYWN0b3IgPSBNYXRoLmZsb29yKCgyNTYgKiAyNTYgKiAyNTYgLSAxKSAvIGZlYXR1cmVDb3VudCk7XG4gICAgdmFyIGZlYXR1cmVzQnlaSW5kZXggPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBmZWF0dXJlQ291bnQ7ICsraSkge1xuICAgICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzW2kgLSAxXTtcbiAgICAgICAgdmFyIGZlYXR1cmVTdHlsZUZ1bmN0aW9uID0gZmVhdHVyZS5nZXRTdHlsZUZ1bmN0aW9uKCkgfHwgc3R5bGVGdW5jdGlvbjtcbiAgICAgICAgaWYgKCFzdHlsZUZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3R5bGVzID0gZmVhdHVyZVN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XG4gICAgICAgIGlmICghc3R5bGVzKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3R5bGVzKSkge1xuICAgICAgICAgICAgc3R5bGVzID0gW3N0eWxlc107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gaSAqIGluZGV4RmFjdG9yO1xuICAgICAgICB2YXIgY29sb3IgPSAnIycgKyAoJzAwMDAwMCcgKyBpbmRleC50b1N0cmluZygxNikpLnNsaWNlKC02KTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gc3R5bGVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgIHZhciBvcmlnaW5hbFN0eWxlID0gc3R5bGVzW2pdO1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gb3JpZ2luYWxTdHlsZS5jbG9uZSgpO1xuICAgICAgICAgICAgdmFyIGZpbGwgPSBzdHlsZS5nZXRGaWxsKCk7XG4gICAgICAgICAgICBpZiAoZmlsbCkge1xuICAgICAgICAgICAgICAgIGZpbGwuc2V0Q29sb3IoY29sb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHN0cm9rZSA9IHN0eWxlLmdldFN0cm9rZSgpO1xuICAgICAgICAgICAgaWYgKHN0cm9rZSkge1xuICAgICAgICAgICAgICAgIHN0cm9rZS5zZXRDb2xvcihjb2xvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHlsZS5zZXRUZXh0KHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB2YXIgaW1hZ2UgPSBvcmlnaW5hbFN0eWxlLmdldEltYWdlKCk7XG4gICAgICAgICAgICBpZiAoaW1hZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW1nU2l6ZSA9IGltYWdlLmdldEltYWdlU2l6ZSgpO1xuICAgICAgICAgICAgICAgIGlmICghaW1nU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhc18xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgY2FudmFzXzEud2lkdGggPSBpbWdTaXplWzBdO1xuICAgICAgICAgICAgICAgIGNhbnZhc18xLmhlaWdodCA9IGltZ1NpemVbMV07XG4gICAgICAgICAgICAgICAgdmFyIGltZ0NvbnRleHQgPSBjYW52YXNfMS5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIGltZ0NvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGltZyA9IGltZ0NvbnRleHQuY2FudmFzO1xuICAgICAgICAgICAgICAgIGltZ0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGhfMSA9IGltZ1NpemUgPyBpbWdTaXplWzBdIDogaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRfMSA9IGltZ1NpemUgPyBpbWdTaXplWzFdIDogaW1nLmhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQod2lkdGhfMSwgaGVpZ2h0XzEpO1xuICAgICAgICAgICAgICAgIGljb25Db250ZXh0LmRyYXdJbWFnZShpbWcsIDAsIDApO1xuICAgICAgICAgICAgICAgIHN0eWxlLnNldEltYWdlKG5ldyBJY29uKHtcbiAgICAgICAgICAgICAgICAgICAgaW1nOiBpbWcsXG4gICAgICAgICAgICAgICAgICAgIGltZ1NpemU6IGltZ1NpemUsXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvcjogaW1hZ2UuZ2V0QW5jaG9yKCksXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclhVbml0czogSWNvbkFuY2hvclVuaXRzLlBJWEVMUyxcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yWVVuaXRzOiBJY29uQW5jaG9yVW5pdHMuUElYRUxTLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGltYWdlLmdldE9yaWdpbigpLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBpbWFnZS5nZXRTaXplKCksXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IGltYWdlLmdldE9wYWNpdHkoKSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IGltYWdlLmdldFNjYWxlKCksXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBpbWFnZS5nZXRSb3RhdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICByb3RhdGVXaXRoVmlldzogaW1hZ2UuZ2V0Um90YXRlV2l0aFZpZXcoKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgekluZGV4ID0gTnVtYmVyKHN0eWxlLmdldFpJbmRleCgpKTtcbiAgICAgICAgICAgIHZhciBieUdlb21ldHJ5VHlwZSA9IGZlYXR1cmVzQnlaSW5kZXhbekluZGV4XTtcbiAgICAgICAgICAgIGlmICghYnlHZW9tZXRyeVR5cGUpIHtcbiAgICAgICAgICAgICAgICBieUdlb21ldHJ5VHlwZSA9IHt9O1xuICAgICAgICAgICAgICAgIGZlYXR1cmVzQnlaSW5kZXhbekluZGV4XSA9IGJ5R2VvbWV0cnlUeXBlO1xuICAgICAgICAgICAgICAgIGJ5R2VvbWV0cnlUeXBlW0dlb21ldHJ5VHlwZS5QT0xZR09OXSA9IFtdO1xuICAgICAgICAgICAgICAgIGJ5R2VvbWV0cnlUeXBlW0dlb21ldHJ5VHlwZS5DSVJDTEVdID0gW107XG4gICAgICAgICAgICAgICAgYnlHZW9tZXRyeVR5cGVbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXSA9IFtdO1xuICAgICAgICAgICAgICAgIGJ5R2VvbWV0cnlUeXBlW0dlb21ldHJ5VHlwZS5QT0lOVF0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IHN0eWxlLmdldEdlb21ldHJ5RnVuY3Rpb24oKShmZWF0dXJlKTtcbiAgICAgICAgICAgIGlmIChnZW9tZXRyeSAmJiBpbnRlcnNlY3RzKGV4dGVudCwgZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpKSB7XG4gICAgICAgICAgICAgICAgYnlHZW9tZXRyeVR5cGVbZ2VvbWV0cnkuZ2V0VHlwZSgpLnJlcGxhY2UoJ011bHRpJywgJycpXS5wdXNoKGdlb21ldHJ5LCBzdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHpJbmRleEtleXMgPSBPYmplY3Qua2V5cyhmZWF0dXJlc0J5WkluZGV4KVxuICAgICAgICAubWFwKE51bWJlcilcbiAgICAgICAgLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gekluZGV4S2V5cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBieUdlb21ldHJ5VHlwZSA9IGZlYXR1cmVzQnlaSW5kZXhbekluZGV4S2V5c1tpXV07XG4gICAgICAgIGZvciAodmFyIHR5cGUgaW4gYnlHZW9tZXRyeVR5cGUpIHtcbiAgICAgICAgICAgIHZhciBnZW9tQW5kU3R5bGUgPSBieUdlb21ldHJ5VHlwZVt0eXBlXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGdlb21BbmRTdHlsZS5sZW5ndGg7IGogPCBqajsgaiArPSAyKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2V0U3R5bGUoZ2VvbUFuZFN0eWxlW2ogKyAxXSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDAsIGtrID0gdHJhbnNmb3Jtcy5sZW5ndGg7IGsgPCBrazsgKytrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNldFRyYW5zZm9ybSh0cmFuc2Zvcm1zW2tdKTtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuZHJhd0dlb21ldHJ5KGdlb21BbmRTdHlsZVtqXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3BpeGVsXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBjb29yZGluYXRlIG9uIHRoZSBoaXRcbiAqIGRldGVjdGlvbiBjYW52YXMgaW4gY3NzIHBpeGVscy5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vRmVhdHVyZVwiKS5GZWF0dXJlTGlrZT59IGZlYXR1cmVzIEZlYXR1cmVzLiBIYXMgdG9cbiAqIG1hdGNoIHRoZSBgZmVhdHVyZXNgIGFycmF5IHRoYXQgd2FzIHBhc3NlZCB0byBgY3JlYXRlSGl0RGV0ZWN0aW9uSW1hZ2VEYXRhKClgLlxuICogQHBhcmFtIHtJbWFnZURhdGF9IGltYWdlRGF0YSBIaXQgZGV0ZWN0aW9uIGltYWdlIGRhdGEgZ2VuZXJhdGVkIGJ5XG4gKiBgY3JlYXRlSGl0RGV0ZWN0aW9uSW1hZ2VEYXRhKClgLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vRmVhdHVyZVwiKS5GZWF0dXJlTGlrZT59IGZlYXR1cmVzIEZlYXR1cmVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGl0RGV0ZWN0KHBpeGVsLCBmZWF0dXJlcywgaW1hZ2VEYXRhKSB7XG4gICAgdmFyIHJlc3VsdEZlYXR1cmVzID0gW107XG4gICAgaWYgKGltYWdlRGF0YSkge1xuICAgICAgICB2YXIgaW5kZXggPSAoTWF0aC5yb3VuZChwaXhlbFswXSAvIDIpICsgTWF0aC5yb3VuZChwaXhlbFsxXSAvIDIpICogaW1hZ2VEYXRhLndpZHRoKSAqXG4gICAgICAgICAgICA0O1xuICAgICAgICB2YXIgciA9IGltYWdlRGF0YS5kYXRhW2luZGV4XTtcbiAgICAgICAgdmFyIGcgPSBpbWFnZURhdGEuZGF0YVtpbmRleCArIDFdO1xuICAgICAgICB2YXIgYiA9IGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl07XG4gICAgICAgIHZhciBpID0gYiArIDI1NiAqIChnICsgMjU2ICogcik7XG4gICAgICAgIHZhciBpbmRleEZhY3RvciA9IE1hdGguZmxvb3IoKDI1NiAqIDI1NiAqIDI1NiAtIDEpIC8gZmVhdHVyZXMubGVuZ3RoKTtcbiAgICAgICAgaWYgKGkgJiYgaSAlIGluZGV4RmFjdG9yID09PSAwKSB7XG4gICAgICAgICAgICByZXN1bHRGZWF0dXJlcy5wdXNoKGZlYXR1cmVzW2kgLyBpbmRleEZhY3RvciAtIDFdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0RmVhdHVyZXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oaXRkZXRlY3QuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL3ZlY3RvclxuICovXG5pbXBvcnQgQnVpbGRlclR5cGUgZnJvbSAnLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyVHlwZS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIFRvbGVyYW5jZSBmb3IgZ2VvbWV0cnkgc2ltcGxpZmljYXRpb24gaW4gZGV2aWNlIHBpeGVscy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBTSU1QTElGWV9UT0xFUkFOQ0UgPSAwLjU7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge09iamVjdDxpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0LFxuICogICAgICAgICAgICAgICAgZnVuY3Rpb24oaW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0LFxuICogICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdCwgT2JqZWN0KTogdm9pZD59XG4gKi9cbnZhciBHRU9NRVRSWV9SRU5ERVJFUlMgPSB7XG4gICAgJ1BvaW50JzogcmVuZGVyUG9pbnRHZW9tZXRyeSxcbiAgICAnTGluZVN0cmluZyc6IHJlbmRlckxpbmVTdHJpbmdHZW9tZXRyeSxcbiAgICAnUG9seWdvbic6IHJlbmRlclBvbHlnb25HZW9tZXRyeSxcbiAgICAnTXVsdGlQb2ludCc6IHJlbmRlck11bHRpUG9pbnRHZW9tZXRyeSxcbiAgICAnTXVsdGlMaW5lU3RyaW5nJzogcmVuZGVyTXVsdGlMaW5lU3RyaW5nR2VvbWV0cnksXG4gICAgJ011bHRpUG9seWdvbic6IHJlbmRlck11bHRpUG9seWdvbkdlb21ldHJ5LFxuICAgICdHZW9tZXRyeUNvbGxlY3Rpb24nOiByZW5kZXJHZW9tZXRyeUNvbGxlY3Rpb25HZW9tZXRyeSxcbiAgICAnQ2lyY2xlJzogcmVuZGVyQ2lyY2xlR2VvbWV0cnksXG59O1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUxIEZlYXR1cmUgMS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZTIgRmVhdHVyZSAyLlxuICogQHJldHVybiB7bnVtYmVyfSBPcmRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRPcmRlcihmZWF0dXJlMSwgZmVhdHVyZTIpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoZ2V0VWlkKGZlYXR1cmUxKSwgMTApIC0gcGFyc2VJbnQoZ2V0VWlkKGZlYXR1cmUyKSwgMTApO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgcGl4ZWwgdG9sZXJhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3F1YXJlZFRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gICAgdmFyIHRvbGVyYW5jZSA9IGdldFRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKTtcbiAgICByZXR1cm4gdG9sZXJhbmNlICogdG9sZXJhbmNlO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBpeGVsIHRvbGVyYW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gICAgcmV0dXJuIChTSU1QTElGWV9UT0xFUkFOQ0UgKiByZXNvbHV0aW9uKSAvIHBpeGVsUmF0aW87XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gYnVpbGRlckdyb3VwIEJ1aWxkZXIgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckNpcmNsZUdlb21ldHJ5KGJ1aWxkZXJHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlKSB7XG4gICAgdmFyIGZpbGxTdHlsZSA9IHN0eWxlLmdldEZpbGwoKTtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgICBpZiAoZmlsbFN0eWxlIHx8IHN0cm9rZVN0eWxlKSB7XG4gICAgICAgIHZhciBjaXJjbGVSZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuQ0lSQ0xFKTtcbiAgICAgICAgY2lyY2xlUmVwbGF5LnNldEZpbGxTdHJva2VTdHlsZShmaWxsU3R5bGUsIHN0cm9rZVN0eWxlKTtcbiAgICAgICAgY2lyY2xlUmVwbGF5LmRyYXdDaXJjbGUoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbiAgICB2YXIgdGV4dFN0eWxlID0gc3R5bGUuZ2V0VGV4dCgpO1xuICAgIGlmICh0ZXh0U3R5bGUpIHtcbiAgICAgICAgdmFyIHRleHRSZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuVEVYVCk7XG4gICAgICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgYnVpbGRlckdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgICAgICB0ZXh0UmVwbGF5LmRyYXdUZXh0KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gcmVwbGF5R3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KTogdm9pZH0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IFtvcHRfdHJhbnNmb3JtXSBUcmFuc2Zvcm0gZnJvbSB1c2VyIHRvIHZpZXcgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiBzdHlsZSBpcyBsb2FkaW5nLlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckZlYXR1cmUocmVwbGF5R3JvdXAsIGZlYXR1cmUsIHN0eWxlLCBzcXVhcmVkVG9sZXJhbmNlLCBsaXN0ZW5lciwgb3B0X3RyYW5zZm9ybSkge1xuICAgIHZhciBsb2FkaW5nID0gZmFsc2U7XG4gICAgdmFyIGltYWdlU3R5bGUgPSBzdHlsZS5nZXRJbWFnZSgpO1xuICAgIGlmIChpbWFnZVN0eWxlKSB7XG4gICAgICAgIHZhciBpbWFnZVN0YXRlID0gaW1hZ2VTdHlsZS5nZXRJbWFnZVN0YXRlKCk7XG4gICAgICAgIGlmIChpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEIHx8IGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgaW1hZ2VTdHlsZS51bmxpc3RlbkltYWdlQ2hhbmdlKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgIGltYWdlU3R5bGUubG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW1hZ2VTdGF0ZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpO1xuICAgICAgICAgICAgaW1hZ2VTdHlsZS5saXN0ZW5JbWFnZUNoYW5nZShsaXN0ZW5lcik7XG4gICAgICAgICAgICBsb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXJGZWF0dXJlSW50ZXJuYWwocmVwbGF5R3JvdXAsIGZlYXR1cmUsIHN0eWxlLCBzcXVhcmVkVG9sZXJhbmNlLCBvcHRfdHJhbnNmb3JtKTtcbiAgICByZXR1cm4gbG9hZGluZztcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gW29wdF90cmFuc2Zvcm1dIE9wdGlvbmFsIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyRmVhdHVyZUludGVybmFsKHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZSwgc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSkge1xuICAgIHZhciBnZW9tZXRyeSA9IHN0eWxlLmdldEdlb21ldHJ5RnVuY3Rpb24oKShmZWF0dXJlKTtcbiAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHNpbXBsaWZpZWRHZW9tZXRyeSA9IGdlb21ldHJ5LnNpbXBsaWZ5VHJhbnNmb3JtZWQoc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSk7XG4gICAgdmFyIHJlbmRlcmVyID0gc3R5bGUuZ2V0UmVuZGVyZXIoKTtcbiAgICBpZiAocmVuZGVyZXIpIHtcbiAgICAgICAgcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIHNpbXBsaWZpZWRHZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5UmVuZGVyZXIgPSBHRU9NRVRSWV9SRU5ERVJFUlNbc2ltcGxpZmllZEdlb21ldHJ5LmdldFR5cGUoKV07XG4gICAgICAgIGdlb21ldHJ5UmVuZGVyZXIocmVwbGF5R3JvdXAsIHNpbXBsaWZpZWRHZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICAgIGlmIChnZW9tZXRyeS5nZXRUeXBlKCkgPT0gR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT04pIHtcbiAgICAgICAgdmFyIGdlb21ldHJpZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHJlbmRlckdlb21ldHJ5KHJlcGxheUdyb3VwLCBnZW9tZXRyaWVzW2ldLCBzdHlsZSwgZmVhdHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuREVGQVVMVCk7XG4gICAgcmVwbGF5LmRyYXdDdXN0b20oXG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSksIGZlYXR1cmUsIHN0eWxlLmdldFJlbmRlcmVyKCkpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyR2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICAgIHZhciBnZW9tZXRyaWVzID0gZ2VvbWV0cnkuZ2V0R2VvbWV0cmllc0FycmF5KCk7XG4gICAgdmFyIGksIGlpO1xuICAgIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBnZW9tZXRyeVJlbmRlcmVyID0gR0VPTUVUUllfUkVOREVSRVJTW2dlb21ldHJpZXNbaV0uZ2V0VHlwZSgpXTtcbiAgICAgICAgZ2VvbWV0cnlSZW5kZXJlcihyZXBsYXlHcm91cCwgZ2VvbWV0cmllc1tpXSwgc3R5bGUsIGZlYXR1cmUpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSBidWlsZGVyR3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL0xpbmVTdHJpbmcuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTGluZVN0cmluZ0dlb21ldHJ5KGJ1aWxkZXJHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlKSB7XG4gICAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gICAgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgICAgIHZhciBsaW5lU3RyaW5nUmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLkxJTkVfU1RSSU5HKTtcbiAgICAgICAgbGluZVN0cmluZ1JlcGxheS5zZXRGaWxsU3Ryb2tlU3R5bGUobnVsbCwgc3Ryb2tlU3R5bGUpO1xuICAgICAgICBsaW5lU3RyaW5nUmVwbGF5LmRyYXdMaW5lU3RyaW5nKGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB9XG4gICAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgICBpZiAodGV4dFN0eWxlKSB7XG4gICAgICAgIHZhciB0ZXh0UmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLlRFWFQpO1xuICAgICAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIGJ1aWxkZXJHcm91cC5hZGREZWNsdXR0ZXIoZmFsc2UpKTtcbiAgICAgICAgdGV4dFJlcGxheS5kcmF3VGV4dChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHR9IGJ1aWxkZXJHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlck11bHRpTGluZVN0cmluZ0dlb21ldHJ5KGJ1aWxkZXJHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlKSB7XG4gICAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gICAgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgICAgIHZhciBsaW5lU3RyaW5nUmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLkxJTkVfU1RSSU5HKTtcbiAgICAgICAgbGluZVN0cmluZ1JlcGxheS5zZXRGaWxsU3Ryb2tlU3R5bGUobnVsbCwgc3Ryb2tlU3R5bGUpO1xuICAgICAgICBsaW5lU3RyaW5nUmVwbGF5LmRyYXdNdWx0aUxpbmVTdHJpbmcoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbiAgICB2YXIgdGV4dFN0eWxlID0gc3R5bGUuZ2V0VGV4dCgpO1xuICAgIGlmICh0ZXh0U3R5bGUpIHtcbiAgICAgICAgdmFyIHRleHRSZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuVEVYVCk7XG4gICAgICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgYnVpbGRlckdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgICAgICB0ZXh0UmVwbGF5LmRyYXdUZXh0KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gYnVpbGRlckdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTXVsdGlQb2x5Z29uR2VvbWV0cnkoYnVpbGRlckdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpIHtcbiAgICB2YXIgZmlsbFN0eWxlID0gc3R5bGUuZ2V0RmlsbCgpO1xuICAgIHZhciBzdHJva2VTdHlsZSA9IHN0eWxlLmdldFN0cm9rZSgpO1xuICAgIGlmIChzdHJva2VTdHlsZSB8fCBmaWxsU3R5bGUpIHtcbiAgICAgICAgdmFyIHBvbHlnb25SZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuUE9MWUdPTik7XG4gICAgICAgIHBvbHlnb25SZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpO1xuICAgICAgICBwb2x5Z29uUmVwbGF5LmRyYXdNdWx0aVBvbHlnb24oZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbiAgICB2YXIgdGV4dFN0eWxlID0gc3R5bGUuZ2V0VGV4dCgpO1xuICAgIGlmICh0ZXh0U3R5bGUpIHtcbiAgICAgICAgdmFyIHRleHRSZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuVEVYVCk7XG4gICAgICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgYnVpbGRlckdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgICAgICB0ZXh0UmVwbGF5LmRyYXdUZXh0KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gYnVpbGRlckdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5mdW5jdGlvbiByZW5kZXJQb2ludEdlb21ldHJ5KGJ1aWxkZXJHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlKSB7XG4gICAgdmFyIGltYWdlU3R5bGUgPSBzdHlsZS5nZXRJbWFnZSgpO1xuICAgIGlmIChpbWFnZVN0eWxlKSB7XG4gICAgICAgIGlmIChpbWFnZVN0eWxlLmdldEltYWdlU3RhdGUoKSAhPSBJbWFnZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbWFnZVJlcGxheSA9IGJ1aWxkZXJHcm91cC5nZXRCdWlsZGVyKHN0eWxlLmdldFpJbmRleCgpLCBCdWlsZGVyVHlwZS5JTUFHRSk7XG4gICAgICAgIGltYWdlUmVwbGF5LnNldEltYWdlU3R5bGUoaW1hZ2VTdHlsZSwgYnVpbGRlckdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgICAgICBpbWFnZVJlcGxheS5kcmF3UG9pbnQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbiAgICB2YXIgdGV4dFN0eWxlID0gc3R5bGUuZ2V0VGV4dCgpO1xuICAgIGlmICh0ZXh0U3R5bGUpIHtcbiAgICAgICAgdmFyIHRleHRSZXBsYXkgPSBidWlsZGVyR3JvdXAuZ2V0QnVpbGRlcihzdHlsZS5nZXRaSW5kZXgoKSwgQnVpbGRlclR5cGUuVEVYVCk7XG4gICAgICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgYnVpbGRlckdyb3VwLmFkZERlY2x1dHRlcighIWltYWdlU3R5bGUpKTtcbiAgICAgICAgdGV4dFJlcGxheS5kcmF3VGV4dChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzXCIpLmRlZmF1bHR9IGJ1aWxkZXJHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5mdW5jdGlvbiByZW5kZXJNdWx0aVBvaW50R2VvbWV0cnkoYnVpbGRlckdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpIHtcbiAgICB2YXIgaW1hZ2VTdHlsZSA9IHN0eWxlLmdldEltYWdlKCk7XG4gICAgaWYgKGltYWdlU3R5bGUpIHtcbiAgICAgICAgaWYgKGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpICE9IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlUmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLklNQUdFKTtcbiAgICAgICAgaW1hZ2VSZXBsYXkuc2V0SW1hZ2VTdHlsZShpbWFnZVN0eWxlLCBidWlsZGVyR3JvdXAuYWRkRGVjbHV0dGVyKGZhbHNlKSk7XG4gICAgICAgIGltYWdlUmVwbGF5LmRyYXdNdWx0aVBvaW50KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB9XG4gICAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgICBpZiAodGV4dFN0eWxlKSB7XG4gICAgICAgIHZhciB0ZXh0UmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLlRFWFQpO1xuICAgICAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIGJ1aWxkZXJHcm91cC5hZGREZWNsdXR0ZXIoISFpbWFnZVN0eWxlKSk7XG4gICAgICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSBidWlsZGVyR3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyUG9seWdvbkdlb21ldHJ5KGJ1aWxkZXJHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlKSB7XG4gICAgdmFyIGZpbGxTdHlsZSA9IHN0eWxlLmdldEZpbGwoKTtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgICBpZiAoZmlsbFN0eWxlIHx8IHN0cm9rZVN0eWxlKSB7XG4gICAgICAgIHZhciBwb2x5Z29uUmVwbGF5ID0gYnVpbGRlckdyb3VwLmdldEJ1aWxkZXIoc3R5bGUuZ2V0WkluZGV4KCksIEJ1aWxkZXJUeXBlLlBPTFlHT04pO1xuICAgICAgICBwb2x5Z29uUmVwbGF5LnNldEZpbGxTdHJva2VTdHlsZShmaWxsU3R5bGUsIHN0cm9rZVN0eWxlKTtcbiAgICAgICAgcG9seWdvblJlcGxheS5kcmF3UG9seWdvbihnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxuICAgIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gICAgaWYgKHRleHRTdHlsZSkge1xuICAgICAgICB2YXIgdGV4dFJlcGxheSA9IGJ1aWxkZXJHcm91cC5nZXRCdWlsZGVyKHN0eWxlLmdldFpJbmRleCgpLCBCdWlsZGVyVHlwZS5URVhUKTtcbiAgICAgICAgdGV4dFJlcGxheS5zZXRUZXh0U3R5bGUodGV4dFN0eWxlLCBidWlsZGVyR3JvdXAuYWRkRGVjbHV0dGVyKGZhbHNlKSk7XG4gICAgICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlY3Rvci5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9jYW52YXMvVmVjdG9yTGF5ZXJcbiAqL1xuaW1wb3J0IENhbnZhc0J1aWxkZXJHcm91cCBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qcyc7XG5pbXBvcnQgQ2FudmFzTGF5ZXJSZW5kZXJlciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCBFeGVjdXRvckdyb3VwLCB7IHJlcGxheURlY2x1dHRlciwgfSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXAuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4uLy4uL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7IGFwcGx5LCBtYWtlSW52ZXJzZSwgbWFrZVNjYWxlLCB0b1N0cmluZyBhcyB0cmFuc2Zvcm1Ub1N0cmluZywgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgYnVmZmVyLCBjb250YWluc0V4dGVudCwgY3JlYXRlRW1wdHksIGdldFdpZHRoLCBpbnRlcnNlY3RzIGFzIGludGVyc2VjdHNFeHRlbnQsIHdyYXBYIGFzIHdyYXBFeHRlbnRYLCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVIaXREZXRlY3Rpb25JbWFnZURhdGEsIGhpdERldGVjdCwgfSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL2hpdGRldGVjdC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0T3JkZXIgYXMgZGVmYXVsdFJlbmRlck9yZGVyLCBnZXRUb2xlcmFuY2UgYXMgZ2V0UmVuZGVyVG9sZXJhbmNlLCBnZXRTcXVhcmVkVG9sZXJhbmNlIGFzIGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UsIHJlbmRlckZlYXR1cmUsIH0gZnJvbSAnLi4vdmVjdG9yLmpzJztcbmltcG9ydCB7IGZyb21Vc2VyRXh0ZW50LCBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMsIGdldFVzZXJQcm9qZWN0aW9uLCB0b1VzZXJFeHRlbnQsIH0gZnJvbSAnLi4vLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCB7IHdyYXBYIGFzIHdyYXBDb29yZGluYXRlWCB9IGZyb20gJy4uLy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDYW52YXMgcmVuZGVyZXIgZm9yIHZlY3RvciBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yLmpzXCIpLmRlZmF1bHR9IHZlY3RvckxheWVyIFZlY3RvciBsYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyKHZlY3RvckxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHZlY3RvckxheWVyKSB8fCB0aGlzO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVTdHlsZUltYWdlQ2hhbmdlXyA9IF90aGlzLmhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfLmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpbmdPckludGVyYWN0aW5nXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGlydHlfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SW1hZ2VEYXRhfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkRmVhdHVyZXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmVzb2x1dGlvbl8gPSBOYU47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRSb3RhdGlvbl87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZVwiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRDZW50ZXJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9wcm9qL1Byb2plY3Rpb25cIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUHJvamVjdGlvbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KTogbnVtYmVyfG51bGx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJlbmRlck9yZGVyXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL2NhbnZhcy9FeGVjdXRvckdyb3VwXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXBsYXlHcm91cF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBuZXcgcmVwbGF5IGdyb3VwIGhhZCB0byBiZSBjcmVhdGVkIGJ5IGBwcmVwYXJlRnJhbWUoKWBcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXBsYXlHcm91cENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xpcHBpbmcgdG8gYmUgcGVyZm9ybWVkIGJ5IGByZW5kZXJGcmFtZSgpYFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNsaXBwaW5nID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSByZW5kZXJpbmcgY29udGFpbmVyIGZyb20gYW4gZXhpc3RpbmcgdGFyZ2V0LCBpZiBjb21wYXRpYmxlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBQb3RlbnRpYWwgcmVuZGVyIHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNmb3JtIENTUyBUcmFuc2Zvcm0uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS51c2VDb250YWluZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCB0cmFuc2Zvcm0sIG9wYWNpdHkpIHtcbiAgICAgICAgaWYgKG9wYWNpdHkgPCAxKSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudXNlQ29udGFpbmVyLmNhbGwodGhpcywgdGFyZ2V0LCB0cmFuc2Zvcm0sIG9wYWNpdHkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgICAgICAvLyBzZXQgZm9yd2FyZCBhbmQgaW52ZXJzZSBwaXhlbCB0cmFuc2Zvcm1zXG4gICAgICAgIG1ha2VTY2FsZSh0aGlzLnBpeGVsVHJhbnNmb3JtLCAxIC8gcGl4ZWxSYXRpbywgMSAvIHBpeGVsUmF0aW8pO1xuICAgICAgICBtYWtlSW52ZXJzZSh0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgdGhpcy5waXhlbFRyYW5zZm9ybSk7XG4gICAgICAgIHZhciBjYW52YXNUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1Ub1N0cmluZyh0aGlzLnBpeGVsVHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy51c2VDb250YWluZXIodGFyZ2V0LCBjYW52YXNUcmFuc2Zvcm0sIGxheWVyU3RhdGUub3BhY2l0eSk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIHZhciByZXBsYXlHcm91cCA9IHRoaXMucmVwbGF5R3JvdXBfO1xuICAgICAgICBpZiAoIXJlcGxheUdyb3VwIHx8IHJlcGxheUdyb3VwLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lclJldXNlZCAmJiBjYW52YXMud2lkdGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXNpemUgYW5kIGNsZWFyXG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKGZyYW1lU3RhdGUuc2l6ZVsxXSAqIHBpeGVsUmF0aW8pO1xuICAgICAgICBpZiAoY2FudmFzLndpZHRoICE9IHdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBpZiAoY2FudmFzLnN0eWxlLnRyYW5zZm9ybSAhPT0gY2FudmFzVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGNhbnZhc1RyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5jb250YWluZXJSZXVzZWQpIHtcbiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlUmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgICAgICB2YXIgZXh0ZW50ID0gZnJhbWVTdGF0ZS5leHRlbnQ7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgdmVjdG9yU291cmNlID0gdGhpcy5nZXRMYXllcigpLmdldFNvdXJjZSgpO1xuICAgICAgICAvLyBjbGlwcGVkIHJlbmRlcmluZyBpZiBsYXllciBleHRlbnQgaXMgc2V0XG4gICAgICAgIHZhciBjbGlwcGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChsYXllclN0YXRlLmV4dGVudCAmJiB0aGlzLmNsaXBwaW5nKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJFeHRlbnQgPSBmcm9tVXNlckV4dGVudChsYXllclN0YXRlLmV4dGVudCwgcHJvamVjdGlvbik7XG4gICAgICAgICAgICBjbGlwcGVkID1cbiAgICAgICAgICAgICAgICAhY29udGFpbnNFeHRlbnQobGF5ZXJFeHRlbnQsIGZyYW1lU3RhdGUuZXh0ZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RzRXh0ZW50KGxheWVyRXh0ZW50LCBmcmFtZVN0YXRlLmV4dGVudCk7XG4gICAgICAgICAgICBpZiAoY2xpcHBlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpcFVucm90YXRlZChjb250ZXh0LCBmcmFtZVN0YXRlLCBsYXllckV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZpZXdIaW50cyA9IGZyYW1lU3RhdGUudmlld0hpbnRzO1xuICAgICAgICB2YXIgc25hcFRvUGl4ZWwgPSAhKHZpZXdIaW50c1tWaWV3SGludC5BTklNQVRJTkddIHx8IHZpZXdIaW50c1tWaWV3SGludC5JTlRFUkFDVElOR10pO1xuICAgICAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy5nZXRSZW5kZXJUcmFuc2Zvcm0oY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgcGl4ZWxSYXRpbywgd2lkdGgsIGhlaWdodCwgMCk7XG4gICAgICAgIHZhciBkZWNsdXR0ZXJSZXBsYXlzID0gdGhpcy5nZXRMYXllcigpLmdldERlY2x1dHRlcigpID8ge30gOiBudWxsO1xuICAgICAgICByZXBsYXlHcm91cC5leGVjdXRlKGNvbnRleHQsIDEsIHRyYW5zZm9ybSwgcm90YXRpb24sIHNuYXBUb1BpeGVsLCB1bmRlZmluZWQsIGRlY2x1dHRlclJlcGxheXMpO1xuICAgICAgICBpZiAodmVjdG9yU291cmNlLmdldFdyYXBYKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgICAgICAgICAgIWNvbnRhaW5zRXh0ZW50KHByb2plY3Rpb25FeHRlbnQsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIHZhciBzdGFydFggPSBleHRlbnRbMF07XG4gICAgICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICAgICAgdmFyIHdvcmxkID0gMDtcbiAgICAgICAgICAgIHZhciBvZmZzZXRYID0gdm9pZCAwO1xuICAgICAgICAgICAgd2hpbGUgKHN0YXJ0WCA8IHByb2plY3Rpb25FeHRlbnRbMF0pIHtcbiAgICAgICAgICAgICAgICAtLXdvcmxkO1xuICAgICAgICAgICAgICAgIG9mZnNldFggPSB3b3JsZFdpZHRoICogd29ybGQ7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybV8xID0gdGhpcy5nZXRSZW5kZXJUcmFuc2Zvcm0oY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgcGl4ZWxSYXRpbywgd2lkdGgsIGhlaWdodCwgb2Zmc2V0WCk7XG4gICAgICAgICAgICAgICAgcmVwbGF5R3JvdXAuZXhlY3V0ZShjb250ZXh0LCAxLCB0cmFuc2Zvcm1fMSwgcm90YXRpb24sIHNuYXBUb1BpeGVsLCB1bmRlZmluZWQsIGRlY2x1dHRlclJlcGxheXMpO1xuICAgICAgICAgICAgICAgIHN0YXJ0WCArPSB3b3JsZFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd29ybGQgPSAwO1xuICAgICAgICAgICAgc3RhcnRYID0gZXh0ZW50WzJdO1xuICAgICAgICAgICAgd2hpbGUgKHN0YXJ0WCA+IHByb2plY3Rpb25FeHRlbnRbMl0pIHtcbiAgICAgICAgICAgICAgICArK3dvcmxkO1xuICAgICAgICAgICAgICAgIG9mZnNldFggPSB3b3JsZFdpZHRoICogd29ybGQ7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybV8yID0gdGhpcy5nZXRSZW5kZXJUcmFuc2Zvcm0oY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgcGl4ZWxSYXRpbywgd2lkdGgsIGhlaWdodCwgb2Zmc2V0WCk7XG4gICAgICAgICAgICAgICAgcmVwbGF5R3JvdXAuZXhlY3V0ZShjb250ZXh0LCAxLCB0cmFuc2Zvcm1fMiwgcm90YXRpb24sIHNuYXBUb1BpeGVsLCB1bmRlZmluZWQsIGRlY2x1dHRlclJlcGxheXMpO1xuICAgICAgICAgICAgICAgIHN0YXJ0WCAtPSB3b3JsZFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWNsdXR0ZXJSZXBsYXlzKSB7XG4gICAgICAgICAgICB2YXIgdmlld0hpbnRzXzEgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgICAgICAgIHZhciBoaWZpID0gISh2aWV3SGludHNfMVtWaWV3SGludC5BTklNQVRJTkddIHx8IHZpZXdIaW50c18xW1ZpZXdIaW50LklOVEVSQUNUSU5HXSk7XG4gICAgICAgICAgICByZXBsYXlEZWNsdXR0ZXIoZGVjbHV0dGVyUmVwbGF5cywgY29udGV4dCwgcm90YXRpb24sIDEsIGhpZmksIGZyYW1lU3RhdGUuZGVjbHV0dGVySXRlbXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbGlwcGVkKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvc3RSZW5kZXIoY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIHZhciBvcGFjaXR5ID0gbGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgIGlmIChvcGFjaXR5ICE9PSBwYXJzZUZsb2F0KGNvbnRhaW5lci5zdHlsZS5vcGFjaXR5KSkge1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5ID09PSAxID8gJycgOiBTdHJpbmcob3BhY2l0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRSb3RhdGlvbl8gIT09IHZpZXdTdGF0ZS5yb3RhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJvdGF0aW9uXyA9IHZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzIGxheWVyIGxldmVsIGhpdCBkZXRlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxpbXBvcnQoXCIuLi8uLi9GZWF0dXJlXCIpLmRlZmF1bHQ+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5oaXREZXRlY3Rpb25JbWFnZURhdGFfICYmICF0aGlzLmFuaW1hdGluZ09ySW50ZXJhY3RpbmdfKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBbdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCwgdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHRdO1xuICAgICAgICAgICAgICAgIGFwcGx5KHRoaXMucGl4ZWxUcmFuc2Zvcm0sIHNpemUpO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLnJlbmRlcmVkQ2VudGVyXztcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uXztcbiAgICAgICAgICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLnJlbmRlcmVkUm90YXRpb25fO1xuICAgICAgICAgICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5yZW5kZXJlZFByb2plY3Rpb25fO1xuICAgICAgICAgICAgICAgIHZhciBleHRlbnQgPSB0aGlzLnJlbmRlcmVkRXh0ZW50XztcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBzaXplWzBdIC8gMjtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gc2l6ZVsxXSAvIDI7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKHRoaXMuZ2V0UmVuZGVyVHJhbnNmb3JtKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIDAuNSwgd2lkdGgsIGhlaWdodCwgMCkuc2xpY2UoKSk7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICAgICAgICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLmdldFdyYXBYKCkgJiZcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbi5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICAgICAgICAgICFjb250YWluc0V4dGVudChwcm9qZWN0aW9uRXh0ZW50LCBleHRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydFggPSBleHRlbnRbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3b3JsZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRYID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3RhcnRYIDwgcHJvamVjdGlvbkV4dGVudFswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLS13b3JsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFggPSB3b3JsZFdpZHRoICogd29ybGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zLnB1c2godGhpcy5nZXRSZW5kZXJUcmFuc2Zvcm0oY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgMC41LCB3aWR0aCwgaGVpZ2h0LCBvZmZzZXRYKS5zbGljZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0WCArPSB3b3JsZFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdvcmxkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRYID0gZXh0ZW50WzJdO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3RhcnRYID4gcHJvamVjdGlvbkV4dGVudFsyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKyt3b3JsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFggPSB3b3JsZFdpZHRoICogd29ybGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zLnB1c2godGhpcy5nZXRSZW5kZXJUcmFuc2Zvcm0oY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgMC41LCB3aWR0aCwgaGVpZ2h0LCBvZmZzZXRYKS5zbGljZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0WCAtPSB3b3JsZFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyA9IGNyZWF0ZUhpdERldGVjdGlvbkltYWdlRGF0YShzaXplLCB0cmFuc2Zvcm1zLCB0aGlzLnJlbmRlcmVkRmVhdHVyZXNfLCBsYXllci5nZXRTdHlsZUZ1bmN0aW9uKCksIGV4dGVudCwgcmVzb2x1dGlvbiwgcm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZShoaXREZXRlY3QocGl4ZWwsIHRoaXMucmVuZGVyZWRGZWF0dXJlc18sIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXykpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2U+fSBkZWNsdXR0ZXJlZEZlYXR1cmVzIERlY2x1dHRlcmVkIGZlYXR1cmVzLlxuICAgICAqIEByZXR1cm4ge1R8dm9pZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgZGVjbHV0dGVyZWRGZWF0dXJlcykge1xuICAgICAgICBpZiAoIXRoaXMucmVwbGF5R3JvdXBfKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucm90YXRpb247XG4gICAgICAgICAgICB2YXIgbGF5ZXJfMSA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSAqL1xuICAgICAgICAgICAgdmFyIGZlYXR1cmVzXzEgPSB7fTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnJlcGxheUdyb3VwXy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgaGl0VG9sZXJhbmNlLCBcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHs/fSBDYWxsYmFjayByZXN1bHQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gZmVhdHVyZXNfMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXNfMVtrZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZlYXR1cmUsIGxheWVyXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGxheWVyXzEuZ2V0RGVjbHV0dGVyKCkgPyBkZWNsdXR0ZXJlZEZlYXR1cmVzIDogbnVsbCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFjdGlvbiBuZWNlc3NhcnkgdG8gZ2V0IHRoZSBsYXllciByZW5kZXJlZCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVGb250c0NoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgaWYgKGxheWVyLmdldFZpc2libGUoKSAmJiB0aGlzLnJlcGxheUdyb3VwXykge1xuICAgICAgICAgICAgbGF5ZXIuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdHlsZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBJbWFnZSBzdHlsZSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVTdHlsZUltYWdlQ2hhbmdlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVyIGlzIHJlYWR5IHRvIGJlIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciB2ZWN0b3JMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHZlY3RvclNvdXJjZSA9IHZlY3RvckxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICBpZiAoIXZlY3RvclNvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbmltYXRpbmcgPSBmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5BTklNQVRJTkddO1xuICAgICAgICB2YXIgaW50ZXJhY3RpbmcgPSBmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5JTlRFUkFDVElOR107XG4gICAgICAgIHZhciB1cGRhdGVXaGlsZUFuaW1hdGluZyA9IHZlY3RvckxheWVyLmdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nKCk7XG4gICAgICAgIHZhciB1cGRhdGVXaGlsZUludGVyYWN0aW5nID0gdmVjdG9yTGF5ZXIuZ2V0VXBkYXRlV2hpbGVJbnRlcmFjdGluZygpO1xuICAgICAgICBpZiAoKCF0aGlzLmRpcnR5XyAmJiAhdXBkYXRlV2hpbGVBbmltYXRpbmcgJiYgYW5pbWF0aW5nKSB8fFxuICAgICAgICAgICAgKCF1cGRhdGVXaGlsZUludGVyYWN0aW5nICYmIGludGVyYWN0aW5nKSkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpbmdPckludGVyYWN0aW5nXyA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGluZ09ySW50ZXJhY3RpbmdfID0gZmFsc2U7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlRXh0ZW50ID0gZnJhbWVTdGF0ZS5leHRlbnQ7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciB2ZWN0b3JMYXllclJldmlzaW9uID0gdmVjdG9yTGF5ZXIuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgdmFyIHZlY3RvckxheWVyUmVuZGVyQnVmZmVyID0gdmVjdG9yTGF5ZXIuZ2V0UmVuZGVyQnVmZmVyKCk7XG4gICAgICAgIHZhciB2ZWN0b3JMYXllclJlbmRlck9yZGVyID0gdmVjdG9yTGF5ZXIuZ2V0UmVuZGVyT3JkZXIoKTtcbiAgICAgICAgaWYgKHZlY3RvckxheWVyUmVuZGVyT3JkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmVjdG9yTGF5ZXJSZW5kZXJPcmRlciA9IGRlZmF1bHRSZW5kZXJPcmRlcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2VudGVyID0gdmlld1N0YXRlLmNlbnRlci5zbGljZSgpO1xuICAgICAgICB2YXIgZXh0ZW50ID0gYnVmZmVyKGZyYW1lU3RhdGVFeHRlbnQsIHZlY3RvckxheWVyUmVuZGVyQnVmZmVyICogcmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBsb2FkRXh0ZW50cyA9IFtleHRlbnQuc2xpY2UoKV07XG4gICAgICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgICAgaWYgKHZlY3RvclNvdXJjZS5nZXRXcmFwWCgpICYmXG4gICAgICAgICAgICBwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgICAgICFjb250YWluc0V4dGVudChwcm9qZWN0aW9uRXh0ZW50LCBmcmFtZVN0YXRlLmV4dGVudCkpIHtcbiAgICAgICAgICAgIC8vIEZvciB0aGUgcmVwbGF5IGdyb3VwLCB3ZSBuZWVkIGFuIGV4dGVudCB0aGF0IGludGVyc2VjdHMgdGhlIHJlYWwgd29ybGRcbiAgICAgICAgICAgIC8vICgtMTgwwrAgdG8gKzE4MMKwKS4gVG8gc3VwcG9ydCBnZW9tZXRyaWVzIGluIGEgY29vcmRpbmF0ZSByYW5nZSBmcm9tIC01NDDCsFxuICAgICAgICAgICAgLy8gdG8gKzU0MMKwLCB3ZSBhZGQgYXQgbGVhc3QgMSB3b3JsZCB3aWR0aCBvbiBlYWNoIHNpZGUgb2YgdGhlIHByb2plY3Rpb25cbiAgICAgICAgICAgIC8vIGV4dGVudC4gSWYgdGhlIHZpZXdwb3J0IGlzIHdpZGVyIHRoYW4gdGhlIHdvcmxkLCB3ZSBuZWVkIHRvIGFkZCBoYWxmIG9mXG4gICAgICAgICAgICAvLyB0aGUgdmlld3BvcnQgd2lkdGggdG8gbWFrZSBzdXJlIHdlIGNvdmVyIHRoZSB3aG9sZSB2aWV3cG9ydC5cbiAgICAgICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgICAgICB2YXIgZ3V0dGVyID0gTWF0aC5tYXgoZ2V0V2lkdGgoZXh0ZW50KSAvIDIsIHdvcmxkV2lkdGgpO1xuICAgICAgICAgICAgZXh0ZW50WzBdID0gcHJvamVjdGlvbkV4dGVudFswXSAtIGd1dHRlcjtcbiAgICAgICAgICAgIGV4dGVudFsyXSA9IHByb2plY3Rpb25FeHRlbnRbMl0gKyBndXR0ZXI7XG4gICAgICAgICAgICB3cmFwQ29vcmRpbmF0ZVgoY2VudGVyLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciBsb2FkRXh0ZW50ID0gd3JhcEV4dGVudFgobG9hZEV4dGVudHNbMF0sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgLy8gSWYgdGhlIGV4dGVudCBjcm9zc2VzIHRoZSBkYXRlIGxpbmUsIHdlIGxvYWQgZGF0YSBmb3IgYm90aCBlZGdlcyBvZiB0aGUgd29ybGRzXG4gICAgICAgICAgICBpZiAobG9hZEV4dGVudFswXSA8IHByb2plY3Rpb25FeHRlbnRbMF0gJiZcbiAgICAgICAgICAgICAgICBsb2FkRXh0ZW50WzJdIDwgcHJvamVjdGlvbkV4dGVudFsyXSkge1xuICAgICAgICAgICAgICAgIGxvYWRFeHRlbnRzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICBsb2FkRXh0ZW50WzBdICsgd29ybGRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgbG9hZEV4dGVudFsxXSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZEV4dGVudFsyXSArIHdvcmxkV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGxvYWRFeHRlbnRbM10sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsb2FkRXh0ZW50WzBdID4gcHJvamVjdGlvbkV4dGVudFswXSAmJlxuICAgICAgICAgICAgICAgIGxvYWRFeHRlbnRbMl0gPiBwcm9qZWN0aW9uRXh0ZW50WzJdKSB7XG4gICAgICAgICAgICAgICAgbG9hZEV4dGVudHMucHVzaChbXG4gICAgICAgICAgICAgICAgICAgIGxvYWRFeHRlbnRbMF0gLSB3b3JsZFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBsb2FkRXh0ZW50WzFdLFxuICAgICAgICAgICAgICAgICAgICBsb2FkRXh0ZW50WzJdIC0gd29ybGRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgbG9hZEV4dGVudFszXSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZGlydHlfICYmXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbl8gPT0gcmVzb2x1dGlvbiAmJlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJldmlzaW9uXyA9PSB2ZWN0b3JMYXllclJldmlzaW9uICYmXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkUmVuZGVyT3JkZXJfID09IHZlY3RvckxheWVyUmVuZGVyT3JkZXIgJiZcbiAgICAgICAgICAgIGNvbnRhaW5zRXh0ZW50KHRoaXMucmVuZGVyZWRFeHRlbnRfLCBleHRlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnJlcGxheUdyb3VwQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBsYXlHcm91cF8gPSBudWxsO1xuICAgICAgICB0aGlzLmRpcnR5XyA9IGZhbHNlO1xuICAgICAgICB2YXIgcmVwbGF5R3JvdXAgPSBuZXcgQ2FudmFzQnVpbGRlckdyb3VwKGdldFJlbmRlclRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSwgZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCB2ZWN0b3JMYXllci5nZXREZWNsdXR0ZXIoKSk7XG4gICAgICAgIHZhciB1c2VyUHJvamVjdGlvbiA9IGdldFVzZXJQcm9qZWN0aW9uKCk7XG4gICAgICAgIHZhciB1c2VyVHJhbnNmb3JtO1xuICAgICAgICBpZiAodXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxvYWRFeHRlbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2ZWN0b3JTb3VyY2UubG9hZEZlYXR1cmVzKHRvVXNlckV4dGVudChsb2FkRXh0ZW50c1tpXSwgcHJvamVjdGlvbiksIHJlc29sdXRpb24sIHVzZXJQcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVzZXJUcmFuc2Zvcm0gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnModXNlclByb2plY3Rpb24sIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbG9hZEV4dGVudHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHZlY3RvclNvdXJjZS5sb2FkRmVhdHVyZXMobG9hZEV4dGVudHNbaV0sIHJlc29sdXRpb24sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzcXVhcmVkVG9sZXJhbmNlID0gZ2V0U3F1YXJlZFJlbmRlclRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEB0aGlzIHtDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHJlbmRlciA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGVzO1xuICAgICAgICAgICAgdmFyIHN0eWxlRnVuY3Rpb24gPSBmZWF0dXJlLmdldFN0eWxlRnVuY3Rpb24oKSB8fCB2ZWN0b3JMYXllci5nZXRTdHlsZUZ1bmN0aW9uKCk7XG4gICAgICAgICAgICBpZiAoc3R5bGVGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgIHN0eWxlcyA9IHN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpcnR5ID0gdGhpcy5yZW5kZXJGZWF0dXJlKGZlYXR1cmUsIHNxdWFyZWRUb2xlcmFuY2UsIHN0eWxlcywgcmVwbGF5R3JvdXAsIHVzZXJUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlfID0gdGhpcy5kaXJ0eV8gfHwgZGlydHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgICAgdmFyIHVzZXJFeHRlbnQgPSB0b1VzZXJFeHRlbnQoZXh0ZW50LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSAqL1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSB2ZWN0b3JTb3VyY2UuZ2V0RmVhdHVyZXNJbkV4dGVudCh1c2VyRXh0ZW50KTtcbiAgICAgICAgaWYgKHZlY3RvckxheWVyUmVuZGVyT3JkZXIpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzLnNvcnQodmVjdG9yTGF5ZXJSZW5kZXJPcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcmVuZGVyKGZlYXR1cmVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVkRmVhdHVyZXNfID0gZmVhdHVyZXM7XG4gICAgICAgIHZhciByZXBsYXlHcm91cEluc3RydWN0aW9ucyA9IHJlcGxheUdyb3VwLmZpbmlzaCgpO1xuICAgICAgICB2YXIgZXhlY3V0b3JHcm91cCA9IG5ldyBFeGVjdXRvckdyb3VwKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgdmVjdG9yU291cmNlLmdldE92ZXJsYXBzKCksIHJlcGxheUdyb3VwSW5zdHJ1Y3Rpb25zLCB2ZWN0b3JMYXllci5nZXRSZW5kZXJCdWZmZXIoKSk7XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbl8gPSB2ZWN0b3JMYXllclJldmlzaW9uO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUmVuZGVyT3JkZXJfID0gdmVjdG9yTGF5ZXJSZW5kZXJPcmRlcjtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEV4dGVudF8gPSBleHRlbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZWRDZW50ZXJfID0gY2VudGVyO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUHJvamVjdGlvbl8gPSBwcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLnJlcGxheUdyb3VwXyA9IGV4ZWN1dG9yR3JvdXA7XG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhXyA9IG51bGw7XG4gICAgICAgIHRoaXMucmVwbGF5R3JvdXBDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgcmVuZGVyIHRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR8QXJyYXk8aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdD59IHN0eWxlcyBUaGUgc3R5bGUgb3IgYXJyYXkgb2Ygc3R5bGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL2NhbnZhcy9CdWlsZGVyR3JvdXAuanNcIikuZGVmYXVsdH0gYnVpbGRlckdyb3VwIEJ1aWxkZXIgZ3JvdXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9uPX0gb3B0X3RyYW5zZm9ybSBUcmFuc2Zvcm0gZnJvbSB1c2VyIHRvIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgYW4gaW1hZ2UgaXMgbG9hZGluZy5cbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGZWF0dXJlID0gZnVuY3Rpb24gKGZlYXR1cmUsIHNxdWFyZWRUb2xlcmFuY2UsIHN0eWxlcywgYnVpbGRlckdyb3VwLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgICAgIGlmICghc3R5bGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3R5bGVzKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3R5bGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nID1cbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyRmVhdHVyZShidWlsZGVyR3JvdXAsIGZlYXR1cmUsIHN0eWxlc1tpXSwgc3F1YXJlZFRvbGVyYW5jZSwgdGhpcy5ib3VuZEhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfLCBvcHRfdHJhbnNmb3JtKSB8fCBsb2FkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9hZGluZyA9IHJlbmRlckZlYXR1cmUoYnVpbGRlckdyb3VwLCBmZWF0dXJlLCBzdHlsZXMsIHNxdWFyZWRUb2xlcmFuY2UsIHRoaXMuYm91bmRIYW5kbGVTdHlsZUltYWdlQ2hhbmdlXywgb3B0X3RyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvYWRpbmc7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcjtcbn0oQ2FudmFzTGF5ZXJSZW5kZXJlcikpO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvckxheWVyLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1ZlY3RvclxuICovXG5pbXBvcnQgQmFzZVZlY3RvckxheWVyIGZyb20gJy4vQmFzZVZlY3Rvci5qcyc7XG5pbXBvcnQgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9yZW5kZXJlci9jYW52YXMvVmVjdG9yTGF5ZXIuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBWZWN0b3IgZGF0YSB0aGF0IGlzIHJlbmRlcmVkIGNsaWVudC1zaWRlLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEBleHRlbmRzIHtCYXNlVmVjdG9yTGF5ZXI8aW1wb3J0KFwiLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5kZWZhdWx0Pn1cbiAqIEBhcGlcbiAqL1xudmFyIFZlY3RvckxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWZWN0b3JMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQmFzZVZlY3Rvci5qc1wiKS5PcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBWZWN0b3JMYXllcihvcHRfb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgb3B0X29wdGlvbnMpIHx8IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHJlbmRlcmVyIGZvciB0aGlzIGxheWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IEEgbGF5ZXIgcmVuZGVyZXIuXG4gICAgICovXG4gICAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gVmVjdG9yTGF5ZXI7XG59KEJhc2VWZWN0b3JMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgVmVjdG9yTGF5ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWN0b3IuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1ZlY3RvclRpbGVSZW5kZXJUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIFJlbmRlciBtb2RlIGZvciB2ZWN0b3IgdGlsZXM6XG4gKiAgKiBgJ2ltYWdlJ2A6IFZlY3RvciB0aWxlcyBhcmUgcmVuZGVyZWQgYXMgaW1hZ2VzLiBHcmVhdCBwZXJmb3JtYW5jZSwgYnV0XG4gKiAgICBwb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWx3YXlzIHJvdGF0ZWQgd2l0aCB0aGUgdmlldyBhbmQgcGl4ZWxzIGFyZVxuICogICAgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ2h5YnJpZCdgOiBQb2x5Z29uIGFuZCBsaW5lIGVsZW1lbnRzIGFyZSByZW5kZXJlZCBhcyBpbWFnZXMsIHNvIHBpeGVsc1xuICogICAgYXJlIHNjYWxlZCBkdXJpbmcgem9vbSBhbmltYXRpb25zLiBQb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWNjdXJhdGVseVxuICogICAgcmVuZGVyZWQgYXMgdmVjdG9ycyBhbmQgY2FuIHN0YXkgdXByaWdodCBvbiByb3RhdGVkIHZpZXdzLlxuICogICogYCd2ZWN0b3InYDogRXZlcnl0aGluZyBpcyByZW5kZXJlZCBhcyB2ZWN0b3JzLiBVc2UgdGhpcyBtb2RlIGZvciBpbXByb3ZlZFxuICogICAgcGVyZm9ybWFuY2Ugb24gdmVjdG9yIHRpbGUgbGF5ZXJzIHdpdGggb25seSBhIGZldyByZW5kZXJlZCBmZWF0dXJlcyAoZS5nLlxuICogICAgZm9yIGhpZ2hsaWdodGluZyBhIHN1YnNldCBvZiBmZWF0dXJlcyBvZiBhbm90aGVyIGxheWVyIHdpdGggdGhlIHNhbWVcbiAqICAgIHNvdXJjZSkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBJTUFHRTogJ2ltYWdlJyxcbiAgICBIWUJSSUQ6ICdoeWJyaWQnLFxuICAgIFZFQ1RPUjogJ3ZlY3RvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yVGlsZVJlbmRlclR5cGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvclRpbGVMYXllclxuICovXG5pbXBvcnQgQ2FudmFzQnVpbGRlckdyb3VwIGZyb20gJy4uLy4uL3JlbmRlci9jYW52YXMvQnVpbGRlckdyb3VwLmpzJztcbmltcG9ydCBDYW52YXNFeGVjdXRvckdyb3VwLCB7IHJlcGxheURlY2x1dHRlciwgfSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXAuanMnO1xuaW1wb3J0IENhbnZhc1RpbGVMYXllclJlbmRlcmVyIGZyb20gJy4vVGlsZUxheWVyLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUmVwbGF5VHlwZSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJUeXBlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCBWZWN0b3JUaWxlUmVuZGVyVHlwZSBmcm9tICcuLi8uLi9sYXllci9WZWN0b3JUaWxlUmVuZGVyVHlwZS5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHsgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIG11bHRpcGx5LCByZXNldCBhcyByZXNldFRyYW5zZm9ybSwgc2NhbGUsIHNjYWxlIGFzIHNjYWxlVHJhbnNmb3JtLCB0cmFuc2xhdGUgYXMgdHJhbnNsYXRlVHJhbnNmb3JtLCB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBidWZmZXIsIGNvbnRhaW5zQ29vcmRpbmF0ZSwgY29udGFpbnNFeHRlbnQsIGVxdWFscywgZ2V0SW50ZXJzZWN0aW9uLCBnZXRUb3BMZWZ0LCBpbnRlcnNlY3RzLCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4uLy4uL29iai5qcyc7XG5pbXBvcnQgeyBjcmVhdGVIaXREZXRlY3Rpb25JbWFnZURhdGEsIGhpdERldGVjdCwgfSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL2hpdGRldGVjdC5qcyc7XG5pbXBvcnQgeyBnZXRTcXVhcmVkVG9sZXJhbmNlIGFzIGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UsIHJlbmRlckZlYXR1cmUsIH0gZnJvbSAnLi4vdmVjdG9yLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHRvU2l6ZSB9IGZyb20gJy4uLy4uL3NpemUuanMnO1xuaW1wb3J0IHsgd3JhcFggfSBmcm9tICcuLi8uLi9jb29yZGluYXRlLmpzJztcbi8qKlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHQ+Pn1cbiAqL1xudmFyIElNQUdFX1JFUExBWVMgPSB7XG4gICAgJ2ltYWdlJzogW1xuICAgICAgICBSZXBsYXlUeXBlLlBPTFlHT04sXG4gICAgICAgIFJlcGxheVR5cGUuQ0lSQ0xFLFxuICAgICAgICBSZXBsYXlUeXBlLkxJTkVfU1RSSU5HLFxuICAgICAgICBSZXBsYXlUeXBlLklNQUdFLFxuICAgICAgICBSZXBsYXlUeXBlLlRFWFQsXG4gICAgXSxcbiAgICAnaHlicmlkJzogW1JlcGxheVR5cGUuUE9MWUdPTiwgUmVwbGF5VHlwZS5MSU5FX1NUUklOR10sXG4gICAgJ3ZlY3Rvcic6IFtdLFxufTtcbi8qKlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJUeXBlLmpzXCIpLmRlZmF1bHQ+Pn1cbiAqL1xudmFyIFZFQ1RPUl9SRVBMQVlTID0ge1xuICAgICdpbWFnZSc6IFtSZXBsYXlUeXBlLkRFRkFVTFRdLFxuICAgICdoeWJyaWQnOiBbUmVwbGF5VHlwZS5JTUFHRSwgUmVwbGF5VHlwZS5URVhULCBSZXBsYXlUeXBlLkRFRkFVTFRdLFxuICAgICd2ZWN0b3InOiBbXG4gICAgICAgIFJlcGxheVR5cGUuUE9MWUdPTixcbiAgICAgICAgUmVwbGF5VHlwZS5DSVJDTEUsXG4gICAgICAgIFJlcGxheVR5cGUuTElORV9TVFJJTkcsXG4gICAgICAgIFJlcGxheVR5cGUuSU1BR0UsXG4gICAgICAgIFJlcGxheVR5cGUuVEVYVCxcbiAgICAgICAgUmVwbGF5VHlwZS5ERUZBVUxULFxuICAgIF0sXG59O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDYW52YXMgcmVuZGVyZXIgZm9yIHZlY3RvciB0aWxlIGxheWVycy5cbiAqIEBhcGlcbiAqL1xudmFyIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gbGF5ZXIgVmVjdG9yVGlsZSBsYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBsYXllcikgfHwgdGhpcztcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8gPSBfdGhpcy5oYW5kbGVTdHlsZUltYWdlQ2hhbmdlXy5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGlydHlfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRMYXllclJldmlzaW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm1cIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRQaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUm90YXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi8uLi9WZWN0b3JSZW5kZXJUaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyVGlsZUltYWdlUXVldWVfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTGlzdGVuZXJLZXlzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9WZWN0b3JSZW5kZXJUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvblwiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBxdWV1ZSBRdWV1ZSB0aWxlIGZvciByZW5kZXJpbmcuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9IFRpbGUgbmVlZHMgdG8gYmUgcmVuZGVyZWQuXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVUaWxlID0gZnVuY3Rpb24gKHRpbGUsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIHF1ZXVlKSB7XG4gICAgICAgIHZhciByZW5kZXI7XG4gICAgICAgIHZhciB0aWxlVWlkID0gZ2V0VWlkKHRpbGUpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmICgoKHN0YXRlID09PSBUaWxlU3RhdGUuTE9BREVEICYmIHRpbGUuaGlmaSkgfHxcbiAgICAgICAgICAgIHN0YXRlID09PSBUaWxlU3RhdGUuRVJST1IpICYmXG4gICAgICAgICAgICB0aWxlVWlkIGluIHRoaXMudGlsZUxpc3RlbmVyS2V5c18pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy50aWxlTGlzdGVuZXJLZXlzX1t0aWxlVWlkXSk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50aWxlTGlzdGVuZXJLZXlzX1t0aWxlVWlkXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5MT0FERUQgfHwgc3RhdGUgPT09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFeGVjdXRvckdyb3VwXyh0aWxlLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbGVJbWFnZU5lZWRzUmVuZGVyXyh0aWxlLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVGlsZUltYWdlUXVldWVfW3RpbGVVaWRdID0gdGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlbmRlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0VGlsZSA9IGZ1bmN0aW9uICh6LCB4LCB5LCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGUgPSBsYXllci5nZXRTb3VyY2UoKS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpIDwgVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgdGlsZS53YW50ZWRSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB0aWxlVWlkID0gZ2V0VWlkKHRpbGUpO1xuICAgICAgICAgICAgaWYgKCEodGlsZVVpZCBpbiB0aGlzLnRpbGVMaXN0ZW5lcktleXNfKSkge1xuICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lcktleSA9IGxpc3Rlbih0aWxlLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLnByZXBhcmVUaWxlLmJpbmQodGhpcywgdGlsZSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwgdHJ1ZSkpO1xuICAgICAgICAgICAgICAgIHRoaXMudGlsZUxpc3RlbmVyS2V5c19bdGlsZVVpZF0gPSBsaXN0ZW5lcktleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB2aWV3SGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgICAgICAgIHZhciBoaWZpID0gISh2aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSB8fCB2aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKTtcbiAgICAgICAgICAgIGlmIChoaWZpIHx8ICF0aWxlLndhbnRlZFJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aWxlLndhbnRlZFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlbmRlciA9IHRoaXMucHJlcGFyZVRpbGUodGlsZSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHJlbmRlciAmJiBsYXllci5nZXRSZW5kZXJNb2RlKCkgIT09IFZlY3RvclRpbGVSZW5kZXJUeXBlLlZFQ1RPUikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVGlsZUltYWdlXyh0aWxlLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZXRUaWxlLmNhbGwodGhpcywgeiwgeCwgeSwgZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1ZlY3RvclJlbmRlclRpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRpbGUgaXMgZHJhd2FibGUuXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmlzRHJhd2FibGVUaWxlID0gZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICByZXR1cm4gKF9zdXBlci5wcm90b3R5cGUuaXNEcmF3YWJsZVRpbGUuY2FsbCh0aGlzLCB0aWxlKSAmJlxuICAgICAgICAgICAgKGxheWVyLmdldFJlbmRlck1vZGUoKSA9PT0gVmVjdG9yVGlsZVJlbmRlclR5cGUuVkVDVE9SXG4gICAgICAgICAgICAgICAgPyBnZXRVaWQobGF5ZXIpIGluIHRpbGUuZXhlY3V0b3JHcm91cHNcbiAgICAgICAgICAgICAgICA6IHRpbGUuaGFzQ29udGV4dChsYXllcikpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRpbGVJbWFnZSA9IGZ1bmN0aW9uICh0aWxlKSB7XG4gICAgICAgIHJldHVybiB0aWxlLmdldEltYWdlKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVyIGlzIHJlYWR5IHRvIGJlIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgbGF5ZXJSZXZpc2lvbiA9IHRoaXMuZ2V0TGF5ZXIoKS5nZXRSZXZpc2lvbigpO1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZExheWVyUmV2aXNpb25fICE9IGxheWVyUmV2aXNpb24pIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZWRMYXllclJldmlzaW9uXyA9IGxheWVyUmV2aXNpb247XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZS5jYWxsKHRoaXMsIGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9WZWN0b3JSZW5kZXJUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlRXhlY3V0b3JHcm91cF8gPSBmdW5jdGlvbiAodGlsZSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgICAgIHZhciByZXZpc2lvbiA9IGxheWVyLmdldFJldmlzaW9uKCk7XG4gICAgICAgIHZhciByZW5kZXJPcmRlciA9IGxheWVyLmdldFJlbmRlck9yZGVyKCkgfHwgbnVsbDtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aWxlLndhbnRlZFJlc29sdXRpb247XG4gICAgICAgIHZhciBidWlsZGVyU3RhdGUgPSB0aWxlLmdldFJlcGxheVN0YXRlKGxheWVyKTtcbiAgICAgICAgaWYgKCFidWlsZGVyU3RhdGUuZGlydHkgJiZcbiAgICAgICAgICAgIGJ1aWxkZXJTdGF0ZS5yZW5kZXJlZFJlc29sdXRpb24gPT09IHJlc29sdXRpb24gJiZcbiAgICAgICAgICAgIGJ1aWxkZXJTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID09IHJldmlzaW9uICYmXG4gICAgICAgICAgICBidWlsZGVyU3RhdGUucmVuZGVyZWRSZW5kZXJPcmRlciA9PSByZW5kZXJPcmRlciAmJlxuICAgICAgICAgICAgYnVpbGRlclN0YXRlLnJlbmRlcmVkWiA9PT0gdGlsZS5zb3VyY2VaKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICB2YXIgc291cmNlVGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWQoKTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gc291cmNlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHRpbGVFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZS53cmFwcGVkVGlsZUNvb3JkKTtcbiAgICAgICAgdmFyIHNvdXJjZVRpbGVzID0gc291cmNlLmdldFNvdXJjZVRpbGVzKHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIHRpbGUpO1xuICAgICAgICB2YXIgbGF5ZXJVaWQgPSBnZXRVaWQobGF5ZXIpO1xuICAgICAgICBkZWxldGUgdGlsZS5oaXREZXRlY3Rpb25JbWFnZURhdGFbbGF5ZXJVaWRdO1xuICAgICAgICB0aWxlLmV4ZWN1dG9yR3JvdXBzW2xheWVyVWlkXSA9IFtdO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uICh0LCB0dCkge1xuICAgICAgICAgICAgdmFyIHNvdXJjZVRpbGUgPSBzb3VyY2VUaWxlc1t0XTtcbiAgICAgICAgICAgIGlmIChzb3VyY2VUaWxlLmdldFN0YXRlKCkgIT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc291cmNlVGlsZUNvb3JkID0gc291cmNlVGlsZS50aWxlQ29vcmQ7XG4gICAgICAgICAgICB2YXIgc291cmNlVGlsZUV4dGVudCA9IHNvdXJjZVRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChzb3VyY2VUaWxlQ29vcmQpO1xuICAgICAgICAgICAgdmFyIHNoYXJlZEV4dGVudCA9IGdldEludGVyc2VjdGlvbih0aWxlRXh0ZW50LCBzb3VyY2VUaWxlRXh0ZW50KTtcbiAgICAgICAgICAgIHZhciBidWZmZXJlZEV4dGVudCA9IGVxdWFscyhzb3VyY2VUaWxlRXh0ZW50LCBzaGFyZWRFeHRlbnQpXG4gICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgOiBidWZmZXIoc2hhcmVkRXh0ZW50LCBsYXllci5nZXRSZW5kZXJCdWZmZXIoKSAqIHJlc29sdXRpb24sIHRoaXNfMS50bXBFeHRlbnQpO1xuICAgICAgICAgICAgYnVpbGRlclN0YXRlLmRpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgYnVpbGRlckdyb3VwID0gbmV3IENhbnZhc0J1aWxkZXJHcm91cCgwLCBzaGFyZWRFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIGxheWVyLmdldERlY2x1dHRlcigpKTtcbiAgICAgICAgICAgIHZhciBzcXVhcmVkVG9sZXJhbmNlID0gZ2V0U3F1YXJlZFJlbmRlclRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAgICAgKiBAdGhpcyB7Q2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXJ9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciByZW5kZXIgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZXM7XG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlRnVuY3Rpb24gPSBmZWF0dXJlLmdldFN0eWxlRnVuY3Rpb24oKSB8fCBsYXllci5nZXRTdHlsZUZ1bmN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzID0gc3R5bGVGdW5jdGlvbihmZWF0dXJlLCByZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlydHkgPSB0aGlzLnJlbmRlckZlYXR1cmUoZmVhdHVyZSwgc3F1YXJlZFRvbGVyYW5jZSwgc3R5bGVzLCBidWlsZGVyR3JvdXApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpcnR5XyA9IHRoaXMuZGlydHlfIHx8IGRpcnR5O1xuICAgICAgICAgICAgICAgICAgICBidWlsZGVyU3RhdGUuZGlydHkgPSBidWlsZGVyU3RhdGUuZGlydHkgfHwgZGlydHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IHNvdXJjZVRpbGUuZ2V0RmVhdHVyZXMoKTtcbiAgICAgICAgICAgIGlmIChyZW5kZXJPcmRlciAmJiByZW5kZXJPcmRlciAhPT0gYnVpbGRlclN0YXRlLnJlbmRlcmVkUmVuZGVyT3JkZXIpIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlcy5zb3J0KHJlbmRlck9yZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZlYXR1cmVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghYnVmZmVyZWRFeHRlbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0cyhidWZmZXJlZEV4dGVudCwgZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldEV4dGVudCgpKSkge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXIuY2FsbCh0aGlzXzEsIGZlYXR1cmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBleGVjdXRvckdyb3VwSW5zdHJ1Y3Rpb25zID0gYnVpbGRlckdyb3VwLmZpbmlzaCgpO1xuICAgICAgICAgICAgLy8gbm8gbmVlZCB0byBjbGlwIHdoZW4gdGhlIHJlbmRlciB0aWxlIGlzIGNvdmVyZWQgYnkgYSBzaW5nbGUgc291cmNlIHRpbGVcbiAgICAgICAgICAgIHZhciByZXBsYXlFeHRlbnQgPSBsYXllci5nZXRSZW5kZXJNb2RlKCkgIT09IFZlY3RvclRpbGVSZW5kZXJUeXBlLlZFQ1RPUiAmJlxuICAgICAgICAgICAgICAgIGxheWVyLmdldERlY2x1dHRlcigpICYmXG4gICAgICAgICAgICAgICAgc291cmNlVGlsZXMubGVuZ3RoID09PSAxXG4gICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgOiBzaGFyZWRFeHRlbnQ7XG4gICAgICAgICAgICB2YXIgcmVuZGVyaW5nUmVwbGF5R3JvdXAgPSBuZXcgQ2FudmFzRXhlY3V0b3JHcm91cChyZXBsYXlFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHNvdXJjZS5nZXRPdmVybGFwcygpLCBleGVjdXRvckdyb3VwSW5zdHJ1Y3Rpb25zLCBsYXllci5nZXRSZW5kZXJCdWZmZXIoKSk7XG4gICAgICAgICAgICB0aWxlLmV4ZWN1dG9yR3JvdXBzW2xheWVyVWlkXS5wdXNoKHJlbmRlcmluZ1JlcGxheUdyb3VwKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgIGZvciAodmFyIHQgPSAwLCB0dCA9IHNvdXJjZVRpbGVzLmxlbmd0aDsgdCA8IHR0OyArK3QpIHtcbiAgICAgICAgICAgIF9sb29wXzEodCwgdHQpO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkZXJTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID0gcmV2aXNpb247XG4gICAgICAgIGJ1aWxkZXJTdGF0ZS5yZW5kZXJlZFogPSB0aWxlLnNvdXJjZVo7XG4gICAgICAgIGJ1aWxkZXJTdGF0ZS5yZW5kZXJlZFJlbmRlck9yZGVyID0gcmVuZGVyT3JkZXI7XG4gICAgICAgIGJ1aWxkZXJTdGF0ZS5yZW5kZXJlZFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2U+fSBkZWNsdXR0ZXJlZEZlYXR1cmVzIERlY2x1dHRlcmVkIGZlYXR1cmVzLlxuICAgICAqIEByZXR1cm4ge1R8dm9pZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGRlY2x1dHRlcmVkRmVhdHVyZXMpIHtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgaGl0VG9sZXJhbmNlID0gaGl0VG9sZXJhbmNlID09IHVuZGVmaW5lZCA/IDAgOiBoaXRUb2xlcmFuY2U7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIGRlY2x1dHRlciA9IGxheWVyLmdldERlY2x1dHRlcigpO1xuICAgICAgICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbik7XG4gICAgICAgIC8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSAqL1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSB7fTtcbiAgICAgICAgdmFyIHJlbmRlcmVkVGlsZXMgPSAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uLy4uL1ZlY3RvclJlbmRlclRpbGUuanNcIikuZGVmYXVsdD59ICovICh0aGlzXG4gICAgICAgICAgICAucmVuZGVyZWRUaWxlcyk7XG4gICAgICAgIHZhciBmb3VuZDtcbiAgICAgICAgdmFyIGksIGlpO1xuICAgICAgICB2YXIgX2xvb3BfMiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aWxlID0gcmVuZGVyZWRUaWxlc1tpXTtcbiAgICAgICAgICAgIHZhciB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGUud3JhcHBlZFRpbGVDb29yZCk7XG4gICAgICAgICAgICB2YXIgdGlsZUNvbnRhaW5zQ29vcmRpbmF0ZSA9IGNvbnRhaW5zQ29vcmRpbmF0ZSh0aWxlRXh0ZW50LCBjb29yZGluYXRlKTtcbiAgICAgICAgICAgIGlmICghZGVjbHV0dGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBub3QgZGVjbHV0dGVyaW5nLCB3ZSBvbmx5IG5lZWQgdG8gY29uc2lkZXIgdGhlIHRpbGUgdGhhdCBjb250YWlucyB0aGUgZ2l2ZW5cbiAgICAgICAgICAgICAgICAvLyBjb29yZGluYXRlLCBiZWNhdXNlIGVhY2ggZmVhdHVyZSB3aWxsIGJlIHJlbmRlcmVkIGZvciBlYWNoIHRpbGUgdGhhdCBjb250YWlucyBpdC5cbiAgICAgICAgICAgICAgICBpZiAoIXRpbGVDb250YWluc0Nvb3JkaW5hdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXhlY3V0b3JHcm91cHMgPSB0aWxlLmV4ZWN1dG9yR3JvdXBzW2dldFVpZChsYXllcildO1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gZXhlY3V0b3JHcm91cHMubGVuZ3RoOyB0IDwgdHQ7ICsrdCkge1xuICAgICAgICAgICAgICAgIHZhciBleGVjdXRvckdyb3VwID0gZXhlY3V0b3JHcm91cHNbdF07XG4gICAgICAgICAgICAgICAgZm91bmQgPVxuICAgICAgICAgICAgICAgICAgICBmb3VuZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0b3JHcm91cC5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgaGl0VG9sZXJhbmNlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHs/fSBDYWxsYmFjayByZXN1bHQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGVDb250YWluc0Nvb3JkaW5hdGUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRlY2x1dHRlcmVkRmVhdHVyZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2x1dHRlcmVkRmVhdHVyZXMuaW5kZXhPZihmZWF0dXJlKSAhPT0gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBmZWF0dXJlLmdldElkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBmZWF0dXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZlYXR1cmUsIGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGxheWVyLmdldERlY2x1dHRlcigpID8gZGVjbHV0dGVyZWRGZWF0dXJlcyA6IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHJlbmRlcmVkVGlsZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgX2xvb3BfMigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBsYXllciBsZXZlbCBoaXQgZGV0ZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vLi4vRmVhdHVyZVwiKS5kZWZhdWx0Pj59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGFuIGFycmF5IG9mIGZlYXR1cmVzLlxuICAgICAqL1xuICAgIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkpO1xuICAgICAgICAgICAgdmFyIGxheWVyVWlkID0gZ2V0VWlkKGxheWVyKTtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBsYXllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5yZW5kZXJlZFByb2plY3Rpb247XG4gICAgICAgICAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHRpbGVHcmlkID0gc291cmNlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciBjb29yZGluYXRlID0gYXBwbHlUcmFuc2Zvcm0odGhpcy5yZW5kZXJlZFBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXywgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgICAgICB2YXIgdGlsZUNvb3JkID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uKGNvb3JkaW5hdGUsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgdmFyIHRpbGU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLnJlbmRlcmVkVGlsZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICh0aWxlQ29vcmQudG9TdHJpbmcoKSA9PT0gdGhpcy5yZW5kZXJlZFRpbGVzW2ldLnRpbGVDb29yZC50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGUgPSB0aGlzLnJlbmRlcmVkVGlsZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT09IFRpbGVTdGF0ZS5MT0FERUQgJiYgdGlsZS5oaWZpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh0ZW50XzEgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZS50aWxlQ29vcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5nZXRXcmFwWCgpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbi5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWNvbnRhaW5zRXh0ZW50KHByb2plY3Rpb25FeHRlbnQsIGV4dGVudF8xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBYKGNvb3JkaW5hdGUsIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGlsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRpbGUgfHwgdGlsZS5sb2FkaW5nU291cmNlVGlsZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aWxlLndyYXBwZWRUaWxlQ29vcmQpO1xuICAgICAgICAgICAgdmFyIGNvcm5lciA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICAgICAgICAgIHZhciB0aWxlUGl4ZWwgPSBbXG4gICAgICAgICAgICAgICAgKGNvb3JkaW5hdGVbMF0gLSBjb3JuZXJbMF0pIC8gcmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAoY29ybmVyWzFdIC0gY29vcmRpbmF0ZVsxXSkgLyByZXNvbHV0aW9uLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IHRpbGVcbiAgICAgICAgICAgICAgICAuZ2V0U291cmNlVGlsZXMoKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtdWxhdG9yLCBzb3VyY2VUaWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yLmNvbmNhdChzb3VyY2VUaWxlLmdldEZlYXR1cmVzKCkpO1xuICAgICAgICAgICAgfSwgW10pO1xuICAgICAgICAgICAgdmFyIGhpdERldGVjdGlvbkltYWdlRGF0YSA9IHRpbGUuaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhW2xheWVyVWlkXTtcbiAgICAgICAgICAgIGlmICghaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhICYmICF0aGlzLmFuaW1hdGluZ09ySW50ZXJhY3RpbmdfKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRpbGVHcmlkLmdldFRpbGVTaXplKHRpbGVHcmlkLmdldFpGb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pKSk7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBbdGlsZVNpemVbMF0gLyAyLCB0aWxlU2l6ZVsxXSAvIDJdO1xuICAgICAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMucmVuZGVyZWRSb3RhdGlvbl87XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybXMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVuZGVyVHJhbnNmb3JtKHRpbGVHcmlkLmdldFRpbGVDb29yZENlbnRlcih0aWxlLndyYXBwZWRUaWxlQ29vcmQpLCByZXNvbHV0aW9uLCAwLCAwLjUsIHNpemVbMF0sIHNpemVbMV0sIDApLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhID0gY3JlYXRlSGl0RGV0ZWN0aW9uSW1hZ2VEYXRhKHRpbGVTaXplLCB0cmFuc2Zvcm1zLCBmZWF0dXJlcywgbGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpLCB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZS53cmFwcGVkVGlsZUNvb3JkKSwgdGlsZS5nZXRSZXBsYXlTdGF0ZShsYXllcikucmVuZGVyZWRSZXNvbHV0aW9uLCByb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdGlsZS5oaXREZXRlY3Rpb25JbWFnZURhdGFbbGF5ZXJVaWRdID0gaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZShoaXREZXRlY3QodGlsZVBpeGVsLCBmZWF0dXJlcywgaGl0RGV0ZWN0aW9uSW1hZ2VEYXRhKSk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFjdGlvbiBuZWNlc3NhcnkgdG8gZ2V0IHRoZSBsYXllciByZW5kZXJlZCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlRm9udHNDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGVhcih0aGlzLnJlbmRlclRpbGVJbWFnZVF1ZXVlXyk7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgaWYgKGxheWVyLmdldFZpc2libGUoKSAmJiB0aGlzLnJlbmRlcmVkTGF5ZXJSZXZpc2lvbl8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGF5ZXIuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdHlsZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBJbWFnZSBzdHlsZSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICB2YXIgdmlld0hpbnRzID0gZnJhbWVTdGF0ZS52aWV3SGludHM7XG4gICAgICAgIHZhciBoaWZpID0gISh2aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSB8fCB2aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKTtcbiAgICAgICAgdGhpcy5yZW5kZXJRdWV1ZWRUaWxlSW1hZ2VzXyhoaWZpLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZS5jYWxsKHRoaXMsIGZyYW1lU3RhdGUsIHRhcmdldCk7XG4gICAgICAgIHRoaXMucmVuZGVyZWRQaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8gPSBmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLnNsaWNlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZWRSb3RhdGlvbl8gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkpO1xuICAgICAgICB2YXIgcmVuZGVyTW9kZSA9IGxheWVyLmdldFJlbmRlck1vZGUoKTtcbiAgICAgICAgaWYgKHJlbmRlck1vZGUgPT09IFZlY3RvclRpbGVSZW5kZXJUeXBlLklNQUdFKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICAvLyBVbnF1ZXVlIHRpbGVzIGZyb20gdGhlIGltYWdlIHF1ZXVlIHdoZW4gd2UgZG9uJ3QgbmVlZCBhbnkgbW9yZVxuICAgICAgICB2YXIgdXNlZFRpbGVzID0gZnJhbWVTdGF0ZS51c2VkVGlsZXNbZ2V0VWlkKHNvdXJjZSldO1xuICAgICAgICBmb3IgKHZhciB0aWxlVWlkIGluIHRoaXMucmVuZGVyVGlsZUltYWdlUXVldWVfKSB7XG4gICAgICAgICAgICBpZiAoIXVzZWRUaWxlcyB8fCAhKHRpbGVVaWQgaW4gdXNlZFRpbGVzKSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlbmRlclRpbGVJbWFnZVF1ZXVlX1t0aWxlVWlkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgdmFyIGRlY2x1dHRlclJlcGxheXMgPSBsYXllci5nZXREZWNsdXR0ZXIoKSA/IHt9IDogbnVsbDtcbiAgICAgICAgdmFyIHJlcGxheVR5cGVzID0gVkVDVE9SX1JFUExBWVNbcmVuZGVyTW9kZV07XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBjZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgcm90YXRpb24gPSB2aWV3U3RhdGUucm90YXRpb247XG4gICAgICAgIHZhciBzaXplID0gZnJhbWVTdGF0ZS5zaXplO1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKHNpemVbMF0gKiBwaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoc2l6ZVsxXSAqIHBpeGVsUmF0aW8pO1xuICAgICAgICB2YXIgdGlsZXMgPSB0aGlzLnJlbmRlcmVkVGlsZXM7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbik7XG4gICAgICAgIHZhciBjbGlwcyA9IFtdO1xuICAgICAgICB2YXIgY2xpcFpzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSB0aWxlcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1ZlY3RvclJlbmRlclRpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRpbGVzW2ldKTtcbiAgICAgICAgICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLnRpbGVDb29yZDtcbiAgICAgICAgICAgIHZhciB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGUud3JhcHBlZFRpbGVDb29yZCk7XG4gICAgICAgICAgICB2YXIgd29ybGRPZmZzZXQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCB0aGlzLnRtcEV4dGVudClbMF0gLVxuICAgICAgICAgICAgICAgIHRpbGVFeHRlbnRbMF07XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gbXVsdGlwbHkoc2NhbGUodGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0uc2xpY2UoKSwgMSAvIHBpeGVsUmF0aW8sIDEgLyBwaXhlbFJhdGlvKSwgdGhpcy5nZXRSZW5kZXJUcmFuc2Zvcm0oY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgcGl4ZWxSYXRpbywgd2lkdGgsIGhlaWdodCwgd29ybGRPZmZzZXQpKTtcbiAgICAgICAgICAgIHZhciBleGVjdXRvckdyb3VwcyA9IHRpbGUuZXhlY3V0b3JHcm91cHNbZ2V0VWlkKGxheWVyKV07XG4gICAgICAgICAgICB2YXIgY2xpcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gZXhlY3V0b3JHcm91cHMubGVuZ3RoOyB0IDwgdHQ7ICsrdCkge1xuICAgICAgICAgICAgICAgIHZhciBleGVjdXRvckdyb3VwID0gZXhlY3V0b3JHcm91cHNbdF07XG4gICAgICAgICAgICAgICAgaWYgKCFleGVjdXRvckdyb3VwLmhhc0V4ZWN1dG9ycyhyZXBsYXlUeXBlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc291cmNlVGlsZSBoYXMgbm8gaW5zdHJ1Y3Rpb25zIG9mIHRoZSB0eXBlcyB3ZSB3YW50IHRvIHJlbmRlclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRaID0gdGlsZS50aWxlQ29vcmRbMF07XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDbGlwID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmICghZGVjbHV0dGVyUmVwbGF5cyAmJiAhY2xpcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2xpcCA9IGV4ZWN1dG9yR3JvdXAuZ2V0Q2xpcENvb3Jkcyh0cmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY2xpcCBtYXNrIGZvciByZWdpb25zIGluIHRoaXMgbG93IHJlc29sdXRpb24gdGlsZSB0aGF0IGFyZVxuICAgICAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGZpbGxlZCBieSBhIGhpZ2hlciByZXNvbHV0aW9uIHRpbGVcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gY2xpcHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaXAgPSBjbGlwc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50WiA8IGNsaXBac1tqXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY291bnRlci1jbG9ja3dpc2UgKG91dGVyIHJpbmcpIGZvciBjdXJyZW50IHRpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjdXJyZW50Q2xpcFswXSwgY3VycmVudENsaXBbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzJdLCBjdXJyZW50Q2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbNF0sIGN1cnJlbnRDbGlwWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs2XSwgY3VycmVudENsaXBbN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb2Nrd2lzZSAoaW5uZXIgcmluZykgZm9yIGhpZ2hlciByZXNvbHV0aW9uIHRpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjbGlwWzZdLCBjbGlwWzddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzRdLCBjbGlwWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzJdLCBjbGlwWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzBdLCBjbGlwWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBleGVjdXRvckdyb3VwLmV4ZWN1dGUoY29udGV4dCwgMSwgdHJhbnNmb3JtLCByb3RhdGlvbiwgaGlmaSwgcmVwbGF5VHlwZXMsIGRlY2x1dHRlclJlcGxheXMpO1xuICAgICAgICAgICAgICAgIGlmICghZGVjbHV0dGVyUmVwbGF5cyAmJiAhY2xpcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY2xpcHMucHVzaChjdXJyZW50Q2xpcCk7XG4gICAgICAgICAgICAgICAgICAgIGNsaXBacy5wdXNoKGN1cnJlbnRaKTtcbiAgICAgICAgICAgICAgICAgICAgY2xpcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWNsdXR0ZXJSZXBsYXlzKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgICAgICAgICAgcmVwbGF5RGVjbHV0dGVyKGRlY2x1dHRlclJlcGxheXMsIGNvbnRleHQsIHJvdGF0aW9uLCBsYXllclN0YXRlLm9wYWNpdHksIGhpZmksIGZyYW1lU3RhdGUuZGVjbHV0dGVySXRlbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGlmaSBXZSBoYXZlIHRpbWUgdG8gcmVuZGVyIGEgaGlnaCBmaWRlbGl0eSBtYXAgaW1hZ2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL1BsdWdnYWJsZU1hcC5qcycpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclF1ZXVlZFRpbGVJbWFnZXNfID0gZnVuY3Rpb24gKGhpZmksIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgLy8gV2hlbiB3ZSBkb24ndCBoYXZlIHRpbWUgdG8gcmVuZGVyIGhpZmksIG9ubHkgcmVuZGVyIHRpbGVzIHVudGlsIHdlIGhhdmUgdXNlZCB1cFxuICAgICAgICAvLyBoYWxmIG9mIHRoZSBmcmFtZSBidWRnZXQgb2YgMTYgbXNcbiAgICAgICAgZm9yICh2YXIgdWlkIGluIHRoaXMucmVuZGVyVGlsZUltYWdlUXVldWVfKSB7XG4gICAgICAgICAgICBpZiAoIWhpZmkgJiYgRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDgpIHtcbiAgICAgICAgICAgICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLnJlbmRlclRpbGVJbWFnZVF1ZXVlX1t1aWRdO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVuZGVyVGlsZUltYWdlUXVldWVfW3VpZF07XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRpbGVJbWFnZV8odGlsZSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdHxBcnJheTxpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0Pn0gc3R5bGVzIFRoZSBzdHlsZSBvciBhcnJheSBvZiBzdHlsZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL0J1aWxkZXJHcm91cC5qc1wiKS5kZWZhdWx0fSBleGVjdXRvckdyb3VwIFJlcGxheSBncm91cC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgYW4gaW1hZ2UgaXMgbG9hZGluZy5cbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBzcXVhcmVkVG9sZXJhbmNlLCBzdHlsZXMsIGV4ZWN1dG9yR3JvdXApIHtcbiAgICAgICAgaWYgKCFzdHlsZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbG9hZGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzdHlsZXMpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzdHlsZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGxvYWRpbmcgPVxuICAgICAgICAgICAgICAgICAgICByZW5kZXJGZWF0dXJlKGV4ZWN1dG9yR3JvdXAsIGZlYXR1cmUsIHN0eWxlc1tpXSwgc3F1YXJlZFRvbGVyYW5jZSwgdGhpcy5ib3VuZEhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfKSB8fCBsb2FkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9hZGluZyA9IHJlbmRlckZlYXR1cmUoZXhlY3V0b3JHcm91cCwgZmVhdHVyZSwgc3R5bGVzLCBzcXVhcmVkVG9sZXJhbmNlLCB0aGlzLmJvdW5kSGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsb2FkaW5nO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9WZWN0b3JSZW5kZXJUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQSBuZXcgdGlsZSBpbWFnZSB3YXMgcmVuZGVyZWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUudGlsZUltYWdlTmVlZHNSZW5kZXJfID0gZnVuY3Rpb24gKHRpbGUsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkpO1xuICAgICAgICB2YXIgcmVwbGF5U3RhdGUgPSB0aWxlLmdldFJlcGxheVN0YXRlKGxheWVyKTtcbiAgICAgICAgdmFyIHJldmlzaW9uID0gbGF5ZXIuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgdmFyIHNvdXJjZVogPSB0aWxlLnNvdXJjZVo7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGlsZS53YW50ZWRSZXNvbHV0aW9uO1xuICAgICAgICByZXR1cm4gKHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZVJlc29sdXRpb24gIT09IHJlc29sdXRpb24gfHxcbiAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZVJldmlzaW9uICE9PSByZXZpc2lvbiB8fFxuICAgICAgICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRUaWxlWiAhPT0gc291cmNlWik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1ZlY3RvclJlbmRlclRpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGlsZUltYWdlXyA9IGZ1bmN0aW9uICh0aWxlLCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICAgICAgdmFyIHJlcGxheVN0YXRlID0gdGlsZS5nZXRSZXBsYXlTdGF0ZShsYXllcik7XG4gICAgICAgIHZhciByZXZpc2lvbiA9IGxheWVyLmdldFJldmlzaW9uKCk7XG4gICAgICAgIHZhciBleGVjdXRvckdyb3VwcyA9IHRpbGUuZXhlY3V0b3JHcm91cHNbZ2V0VWlkKGxheWVyKV07XG4gICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZVJldmlzaW9uID0gcmV2aXNpb247XG4gICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZVogPSB0aWxlLnNvdXJjZVo7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLndyYXBwZWRUaWxlQ29vcmQ7XG4gICAgICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHZhciB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24odGlsZS50aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgcmVuZGVyUGl4ZWxSYXRpbyA9IChmcmFtZVN0YXRlLnBpeGVsUmF0aW8gLyB0aWxlLndhbnRlZFJlc29sdXRpb24pICogdGlsZVJlc29sdXRpb247XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aWxlLmdldENvbnRleHQobGF5ZXIpO1xuICAgICAgICAvLyBJbmNyZWFzZSB0aWxlIHNpemUgd2hlbiBvdmVyem9vbWluZyBmb3IgbG93IHBpeGVsIHJhdGlvLCB0byBhdm9pZCBibHVycnkgdGlsZXNcbiAgICAgICAgcGl4ZWxSYXRpbyA9IE1hdGgubWF4KHBpeGVsUmF0aW8sIHJlbmRlclBpeGVsUmF0aW8gLyBwaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIHNpemUgPSBzb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZSh6LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgY29udGV4dC5jYW52YXMud2lkdGggPSBzaXplWzBdO1xuICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBzaXplWzFdO1xuICAgICAgICB2YXIgcmVuZGVyU2NhbGUgPSBwaXhlbFJhdGlvIC8gcmVuZGVyUGl4ZWxSYXRpbztcbiAgICAgICAgaWYgKHJlbmRlclNjYWxlICE9PSAxKSB7XG4gICAgICAgICAgICB2YXIgY2FudmFzVHJhbnNmb3JtID0gcmVzZXRUcmFuc2Zvcm0odGhpcy50bXBUcmFuc2Zvcm1fKTtcbiAgICAgICAgICAgIHNjYWxlVHJhbnNmb3JtKGNhbnZhc1RyYW5zZm9ybSwgcmVuZGVyU2NhbGUsIHJlbmRlclNjYWxlKTtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIGNhbnZhc1RyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCB0aGlzLnRtcEV4dGVudCk7XG4gICAgICAgIHZhciBwaXhlbFNjYWxlID0gcmVuZGVyUGl4ZWxSYXRpbyAvIHJlc29sdXRpb247XG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSByZXNldFRyYW5zZm9ybSh0aGlzLnRtcFRyYW5zZm9ybV8pO1xuICAgICAgICBzY2FsZVRyYW5zZm9ybSh0cmFuc2Zvcm0sIHBpeGVsU2NhbGUsIC1waXhlbFNjYWxlKTtcbiAgICAgICAgdHJhbnNsYXRlVHJhbnNmb3JtKHRyYW5zZm9ybSwgLXRpbGVFeHRlbnRbMF0sIC10aWxlRXh0ZW50WzNdKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXhlY3V0b3JHcm91cHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGV4ZWN1dG9yR3JvdXAgPSBleGVjdXRvckdyb3Vwc1tpXTtcbiAgICAgICAgICAgIGV4ZWN1dG9yR3JvdXAuZXhlY3V0ZShjb250ZXh0LCByZW5kZXJTY2FsZSwgdHJhbnNmb3JtLCAwLCB0cnVlLCBJTUFHRV9SRVBMQVlTW2xheWVyLmdldFJlbmRlck1vZGUoKV0pO1xuICAgICAgICB9XG4gICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZVJlc29sdXRpb24gPSB0aWxlLndhbnRlZFJlc29sdXRpb247XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXI7XG59KENhbnZhc1RpbGVMYXllclJlbmRlcmVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvclRpbGVMYXllci5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9WZWN0b3JUaWxlXG4gKi9cbmltcG9ydCBCYXNlVmVjdG9yTGF5ZXIgZnJvbSAnLi9CYXNlVmVjdG9yLmpzJztcbmltcG9ydCBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9yZW5kZXJlci9jYW52YXMvVmVjdG9yVGlsZUxheWVyLmpzJztcbmltcG9ydCBUaWxlUHJvcGVydHkgZnJvbSAnLi9UaWxlUHJvcGVydHkuanMnO1xuaW1wb3J0IFZlY3RvclRpbGVSZW5kZXJUeXBlIGZyb20gJy4vVmVjdG9yVGlsZVJlbmRlclR5cGUuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbGF5ZXInXSBBIENTUyBjbGFzcyBuYW1lIHRvIHNldCB0byB0aGUgbGF5ZXIgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9yZW5kZXIuanNcIikuT3JkZXJGdW5jdGlvbn0gW3JlbmRlck9yZGVyXSBSZW5kZXIgb3JkZXIuIEZ1bmN0aW9uIHRvIGJlIHVzZWQgd2hlbiBzb3J0aW5nXG4gKiBmZWF0dXJlcyBiZWZvcmUgcmVuZGVyaW5nLiBCeSBkZWZhdWx0IGZlYXR1cmVzIGFyZSBkcmF3biBpbiB0aGUgb3JkZXIgdGhhdCB0aGV5IGFyZSBjcmVhdGVkLiBVc2VcbiAqIGBudWxsYCB0byBhdm9pZCB0aGUgc29ydCwgYnV0IGdldCBhbiB1bmRlZmluZWQgZHJhdyBvcmRlci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVuZGVyQnVmZmVyPTEwMF0gVGhlIGJ1ZmZlciBpbiBwaXhlbHMgYXJvdW5kIHRoZSB0aWxlIGV4dGVudCB1c2VkIGJ5IHRoZVxuICogcmVuZGVyZXIgd2hlbiBnZXR0aW5nIGZlYXR1cmVzIGZyb20gdGhlIHZlY3RvciB0aWxlIGZvciB0aGUgcmVuZGVyaW5nIG9yIGhpdC1kZXRlY3Rpb24uXG4gKiBSZWNvbW1lbmRlZCB2YWx1ZTogVmVjdG9yIHRpbGVzIGFyZSB1c3VhbGx5IGdlbmVyYXRlZCB3aXRoIGEgYnVmZmVyLCBzbyB0aGlzIHZhbHVlIHNob3VsZCBtYXRjaFxuICogdGhlIGxhcmdlc3QgcG9zc2libGUgYnVmZmVyIG9mIHRoZSB1c2VkIHRpbGVzLiBJdCBzaG91bGQgYmUgYXQgbGVhc3QgdGhlIHNpemUgb2YgdGhlIGxhcmdlc3RcbiAqIHBvaW50IHN5bWJvbCBvciBsaW5lIHdpZHRoLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1ZlY3RvclRpbGVSZW5kZXJUeXBlLmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBbcmVuZGVyTW9kZT0naHlicmlkJ10gUmVuZGVyIG1vZGUgZm9yIHZlY3RvciB0aWxlczpcbiAqICAqIGAnaW1hZ2UnYDogVmVjdG9yIHRpbGVzIGFyZSByZW5kZXJlZCBhcyBpbWFnZXMuIEdyZWF0IHBlcmZvcm1hbmNlLCBidXQgcG9pbnQgc3ltYm9scyBhbmQgdGV4dHNcbiAqICAgIGFyZSBhbHdheXMgcm90YXRlZCB3aXRoIHRoZSB2aWV3IGFuZCBwaXhlbHMgYXJlIHNjYWxlZCBkdXJpbmcgem9vbSBhbmltYXRpb25zLiBXaGVuIGBkZWNsdXR0ZXJgXG4gKiAgICBpcyBzZXQgdG8gYHRydWVgLCB0aGUgZGVjbHV0dGVyaW5nIGlzIGRvbmUgcGVyIHRpbGUgcmVzdWx0aW5nIGluIGxhYmVscyBhbmQgcG9pbnQgc3ltYm9scyBnZXR0aW5nXG4gKiAgICBjdXQgb2ZmIGF0IHRpbGUgYm91bmRhcmllcy5cbiAqICAqIGAnaHlicmlkJ2A6IFBvbHlnb24gYW5kIGxpbmUgZWxlbWVudHMgYXJlIHJlbmRlcmVkIGFzIGltYWdlcywgc28gcGl4ZWxzIGFyZSBzY2FsZWQgZHVyaW5nIHpvb21cbiAqICAgIGFuaW1hdGlvbnMuIFBvaW50IHN5bWJvbHMgYW5kIHRleHRzIGFyZSBhY2N1cmF0ZWx5IHJlbmRlcmVkIGFzIHZlY3RvcnMgYW5kIGNhbiBzdGF5IHVwcmlnaHQgb25cbiAqICAgIHJvdGF0ZWQgdmlld3MuXG4gKiAgKiBgJ3ZlY3RvcidgOiBFdmVyeXRoaW5nIGlzIHJlbmRlcmVkIGFzIHZlY3RvcnMuIFVzZSB0aGlzIG1vZGUgZm9yIGltcHJvdmVkIHBlcmZvcm1hbmNlIG9uIHZlY3RvclxuICogICAgdGlsZSBsYXllcnMgd2l0aCBvbmx5IGEgZmV3IHJlbmRlcmVkIGZlYXR1cmVzIChlLmcuIGZvciBoaWdobGlnaHRpbmcgYSBzdWJzZXQgb2YgZmVhdHVyZXMgb2ZcbiAqICAgIGFub3RoZXIgbGF5ZXIgd2l0aCB0aGUgc2FtZSBzb3VyY2UpLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSBbc291cmNlXSBTb3VyY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkZWNsdXR0ZXI9ZmFsc2VdIERlY2x1dHRlciBpbWFnZXMgYW5kIHRleHQuIERlY2x1dHRlcmluZyBpcyBhcHBsaWVkIHRvIGFsbFxuICogaW1hZ2UgYW5kIHRleHQgc3R5bGVzIG9mIGFsbCBWZWN0b3IgYW5kIFZlY3RvclRpbGUgbGF5ZXJzIHRoYXQgaGF2ZSBzZXQgdGhpcyB0byBgdHJ1ZWAuIFRoZSBwcmlvcml0eVxuICogaXMgZGVmaW5lZCBieSB0aGUgei1pbmRleCBvZiB0aGUgbGF5ZXIsIHRoZSBgekluZGV4YCBvZiB0aGUgc3R5bGUgYW5kIHRoZSByZW5kZXIgb3JkZXIgb2YgZmVhdHVyZXMuXG4gKiBIaWdoZXIgei1pbmRleCBtZWFucyBoaWdoZXIgcHJpb3JpdHkuIFdpdGhpbiB0aGUgc2FtZSB6LWluZGV4LCBhIGZlYXR1cmUgcmVuZGVyZWQgYmVmb3JlIGFub3RoZXIgaGFzXG4gKiBoaWdoZXIgcHJpb3JpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX0gW3N0eWxlXSBMYXllciBzdHlsZS4gU2VlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlfSBmb3IgZGVmYXVsdCBzdHlsZSB3aGljaCB3aWxsIGJlIHVzZWQgaWYgdGhpcyBpcyBub3QgZGVmaW5lZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VwZGF0ZVdoaWxlQW5pbWF0aW5nPWZhbHNlXSBXaGVuIHNldCB0byBgdHJ1ZWAsIGZlYXR1cmUgYmF0Y2hlcyB3aWxsIGJlXG4gKiByZWNyZWF0ZWQgZHVyaW5nIGFuaW1hdGlvbnMuIFRoaXMgbWVhbnMgdGhhdCBubyB2ZWN0b3JzIHdpbGwgYmUgc2hvd24gY2xpcHBlZCwgYnV0IHRoZSBzZXR0aW5nXG4gKiB3aWxsIGhhdmUgYSBwZXJmb3JtYW5jZSBpbXBhY3QgZm9yIGxhcmdlIGFtb3VudHMgb2YgdmVjdG9yIGRhdGEuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIGJhdGNoZXNcbiAqIHdpbGwgYmUgcmVjcmVhdGVkIHdoZW4gbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc9ZmFsc2VdIFdoZW4gc2V0IHRvIGB0cnVlYCwgZmVhdHVyZSBiYXRjaGVzIHdpbGwgYmVcbiAqIHJlY3JlYXRlZCBkdXJpbmcgaW50ZXJhY3Rpb25zLiBTZWUgYWxzbyBgdXBkYXRlV2hpbGVBbmltYXRpbmdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwcmVsb2FkPTBdIFByZWxvYWQuIExvYWQgbG93LXJlc29sdXRpb24gdGlsZXMgdXAgdG8gYHByZWxvYWRgIGxldmVscy4gYDBgXG4gKiBtZWFucyBubyBwcmVsb2FkaW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlSW50ZXJpbVRpbGVzT25FcnJvcj10cnVlXSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMYXllciBmb3IgdmVjdG9yIHRpbGUgZGF0YSB0aGF0IGlzIHJlbmRlcmVkIGNsaWVudC1zaWRlLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gKiBAZXh0ZW5kcyB7QmFzZVZlY3RvckxheWVyPGltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICogQGFwaVxuICovXG52YXIgVmVjdG9yVGlsZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWZWN0b3JUaWxlTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBWZWN0b3JUaWxlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBiYXNlT3B0aW9ucyA9IC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAoYXNzaWduKHt9LCBvcHRpb25zKSk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5wcmVsb2FkO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvcjtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZVZlY3Rvci5qc1wiKS5PcHRpb25zfSAqLyAoYmFzZU9wdGlvbnMpKSB8fCB0aGlzO1xuICAgICAgICB2YXIgcmVuZGVyTW9kZSA9IG9wdGlvbnMucmVuZGVyTW9kZSB8fCBWZWN0b3JUaWxlUmVuZGVyVHlwZS5IWUJSSUQ7XG4gICAgICAgIGFzc2VydChyZW5kZXJNb2RlID09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgcmVuZGVyTW9kZSA9PSBWZWN0b3JUaWxlUmVuZGVyVHlwZS5JTUFHRSB8fFxuICAgICAgICAgICAgcmVuZGVyTW9kZSA9PSBWZWN0b3JUaWxlUmVuZGVyVHlwZS5IWUJSSUQgfHxcbiAgICAgICAgICAgIHJlbmRlck1vZGUgPT0gVmVjdG9yVGlsZVJlbmRlclR5cGUuVkVDVE9SLCAyOCk7IC8vIGByZW5kZXJNb2RlYCBtdXN0IGJlIGAnaW1hZ2UnYCwgYCdoeWJyaWQnYCBvciBgJ3ZlY3RvcidgLlxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVmVjdG9yVGlsZVJlbmRlclR5cGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlck1vZGVfID0gcmVuZGVyTW9kZTtcbiAgICAgICAgX3RoaXMuc2V0UHJlbG9hZChvcHRpb25zLnByZWxvYWQgPyBvcHRpb25zLnByZWxvYWQgOiAwKTtcbiAgICAgICAgX3RoaXMuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcihvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3IgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3JcbiAgICAgICAgICAgIDogdHJ1ZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gQSBsYXllciByZW5kZXJlci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVmVjdG9yVGlsZUxheWVyLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlcih0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdG9wbW9zdCBmZWF0dXJlIHRoYXQgaW50ZXJzZWN0cyB0aGUgZ2l2ZW4gcGl4ZWwgb24gdGhlIHZpZXdwb3J0LiBSZXR1cm5zIGEgcHJvbWlzZVxuICAgICAqIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbiBhcnJheSBvZiBmZWF0dXJlcy4gVGhlIGFycmF5IHdpbGwgZWl0aGVyIGNvbnRhaW4gdGhlIHRvcG1vc3QgZmVhdHVyZVxuICAgICAqIHdoZW4gYSBoaXQgd2FzIGRldGVjdGVkLCBvciBpdCB3aWxsIGJlIGVtcHR5LlxuICAgICAqXG4gICAgICogVGhlIGhpdCBkZXRlY3Rpb24gYWxnb3JpdGhtIHVzZWQgZm9yIHRoaXMgbWV0aG9kIGlzIG9wdGltaXplZCBmb3IgcGVyZm9ybWFuY2UsIGJ1dCBpcyBsZXNzXG4gICAgICogYWNjdXJhdGUgdGhhbiB0aGUgb25lIHVzZWQgaW4ge0BsaW5rIGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0I2dldEZlYXR1cmVzQXRQaXhlbH06IFRleHRcbiAgICAgKiBpcyBub3QgY29uc2lkZXJlZCwgYW5kIGljb25zIGFyZSBvbmx5IHJlcHJlc2VudGVkIGJ5IHRoZWlyIGJvdW5kaW5nIGJveCBpbnN0ZWFkIG9mIHRoZSBleGFjdFxuICAgICAqIGltYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlXCIpLmRlZmF1bHQ+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZlY3RvclRpbGVMYXllci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMuY2FsbCh0aGlzLCBwaXhlbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1ZlY3RvclRpbGVSZW5kZXJUeXBlLmpzXCIpLmRlZmF1bHR9IFRoZSByZW5kZXIgbW9kZS5cbiAgICAgKi9cbiAgICBWZWN0b3JUaWxlTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlck1vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlck1vZGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yVGlsZUxheWVyLnByb3RvdHlwZS5nZXRQcmVsb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuUFJFTE9BRCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JUaWxlTGF5ZXIucHJvdG90eXBlLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBUaGUgbGV2ZWwgdG8gcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWZWN0b3JUaWxlTGF5ZXIucHJvdG90eXBlLnNldFByZWxvYWQgPSBmdW5jdGlvbiAocHJlbG9hZCkge1xuICAgICAgICB0aGlzLnNldChUaWxlUHJvcGVydHkuUFJFTE9BRCwgcHJlbG9hZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUludGVyaW1UaWxlc09uRXJyb3IgVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmVjdG9yVGlsZUxheWVyLnByb3RvdHlwZS5zZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yID0gZnVuY3Rpb24gKHVzZUludGVyaW1UaWxlc09uRXJyb3IpIHtcbiAgICAgICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SLCB1c2VJbnRlcmltVGlsZXNPbkVycm9yKTtcbiAgICB9O1xuICAgIHJldHVybiBWZWN0b3JUaWxlTGF5ZXI7XG59KEJhc2VWZWN0b3JMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgVmVjdG9yVGlsZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2Nsb3Nlc3RcbiAqL1xuaW1wb3J0IHsgbGVycCwgc3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWREeCB9IGZyb20gJy4uLy4uL21hdGguanMnO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb2ludCBvbiB0aGUgMkQgbGluZSBzZWdtZW50IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXSB0b1xuICogZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIHRoYXQgaXMgY2xvc2VzdCB0byB0aGUgcG9pbnQgKHgsIHkpLiAgRXh0cmFcbiAqIGRpbWVuc2lvbnMgYXJlIGxpbmVhcmx5IGludGVycG9sYXRlZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0MSBPZmZzZXQgMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQyIE9mZnNldCAyLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQxLCBvZmZzZXQyLCBzdHJpZGUsIHgsIHksIGNsb3Nlc3RQb2ludCkge1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIDFdO1xuICAgIHZhciBkeCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyXSAtIHgxO1xuICAgIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgMV0gLSB5MTtcbiAgICB2YXIgb2Zmc2V0O1xuICAgIGlmIChkeCA9PT0gMCAmJiBkeSA9PT0gMCkge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHQgPSAoKHggLSB4MSkgKiBkeCArICh5IC0geTEpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgaWYgKHQgPiAxKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gbGVycChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIGldLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MiArIGldLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgIH1cbiAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIHNxdWFyZWQgb2YgdGhlIGxhcmdlc3QgZGlzdGFuY2UgYmV0d2VlbiBhbnkgcGFpciBvZiBjb25zZWN1dGl2ZVxuICogY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXgpIHtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgdmFyIHNxdWFyZWREZWx0YSA9IHNxdWFyZWREeCh4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgIGlmIChzcXVhcmVkRGVsdGEgPiBtYXgpIHtcbiAgICAgICAgICAgIG1heCA9IHNxdWFyZWREZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gbWF4O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIG1heCA9IG1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlBcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgbWF4KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBtYXggPSBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X3RtcFBvaW50IFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICB2YXIgaSwgc3F1YXJlZERpc3RhbmNlO1xuICAgIGlmIChtYXhEZWx0YSA9PT0gMCkge1xuICAgICAgICAvLyBBbGwgcG9pbnRzIGFyZSBpZGVudGljYWwsIHNvIGp1c3QgdGVzdCB0aGUgZmlyc3QgcG9pbnQuXG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgdmFyIGluZGV4ID0gb2Zmc2V0ICsgc3RyaWRlO1xuICAgIHdoaWxlIChpbmRleCA8IGVuZCkge1xuICAgICAgICBhc3NpZ25DbG9zZXN0KGZsYXRDb29yZGluYXRlcywgaW5kZXggLSBzdHJpZGUsIGluZGV4LCBzdHJpZGUsIHgsIHksIHRtcFBvaW50KTtcbiAgICAgICAgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIHRtcFBvaW50WzBdLCB0bXBQb2ludFsxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IHRtcFBvaW50W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIGluZGV4ICs9IHN0cmlkZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNraXAgYWhlYWQgbXVsdGlwbGUgcG9pbnRzLCBiZWNhdXNlIHdlIGtub3cgdGhhdCBhbGwgdGhlIHNraXBwZWRcbiAgICAgICAgICAgIC8vIHBvaW50cyBjYW5ub3QgYmUgYW55IGNsb3NlciB0aGFuIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc29cbiAgICAgICAgICAgIC8vIGZhci4gIFdlIGtub3cgdGhpcyBiZWNhdXNlIHdlIGtub3cgaG93IGNsb3NlIHRoZSBjdXJyZW50IHBvaW50IGlzLCBob3dcbiAgICAgICAgICAgIC8vIGNsb3NlIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc28gZmFyIGlzLCBhbmQgdGhlIG1heGltdW1cbiAgICAgICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzLiAgRm9yIGV4YW1wbGUsIGlmIHdlJ3JlIGN1cnJlbnRseVxuICAgICAgICAgICAgLy8gYXQgZGlzdGFuY2UgMTAsIHRoZSBiZXN0IHdlJ3ZlIGZvdW5kIHNvIGZhciBpcyAzLCBhbmQgdGhhdCB0aGUgbWF4aW11bVxuICAgICAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMgaXMgMiwgdGhlbiB3ZSdsbCBuZWVkIHRvIHNraXAgYXRcbiAgICAgICAgICAgIC8vIGxlYXN0ICgxMCAtIDMpIC8gMiA9PSAzIChyb3VuZGVkIGRvd24pIHBvaW50cyB0byBoYXZlIGFueSBjaGFuY2Ugb2ZcbiAgICAgICAgICAgIC8vIGZpbmRpbmcgYSBjbG9zZXIgcG9pbnQuICBXZSB1c2UgTWF0aC5tYXgoLi4uLCAxKSB0byBlbnN1cmUgdGhhdCB3ZVxuICAgICAgICAgICAgLy8gYWx3YXlzIGFkdmFuY2UgYXQgbGVhc3Qgb25lIHBvaW50LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICAgICAgaW5kZXggKz1cbiAgICAgICAgICAgICAgICBzdHJpZGUgKlxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgoKE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UpIC0gTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSkpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heERlbHRhKSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAwLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNSaW5nKSB7XG4gICAgICAgIC8vIENoZWNrIHRoZSBjbG9zaW5nIHNlZ21lbnQuXG4gICAgICAgIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBlbmQgLSBzdHJpZGUsIG9mZnNldCwgc3RyaWRlLCB4LCB5LCB0bXBQb2ludCk7XG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIG9wdF90bXBQb2ludCkge1xuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X3RtcFBvaW50IFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RNdWx0aUFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIHRtcFBvaW50KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvc2VzdC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2FyZWFcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICB2YXIgdHdpY2VBcmVhID0gMDtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB0d2ljZUFyZWEgKz0geTEgKiB4MiAtIHgxICogeTI7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiB0d2ljZUFyZWEgLyAyO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSkge1xuICAgIHZhciBhcmVhID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIGFyZWEgKz0gbGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBhcmVhO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgYXJlYSArPSBsaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFyZWEuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9MaW5lYXJSaW5nXG4gKi9cbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHsgYXNzaWduQ2xvc2VzdFBvaW50LCBtYXhTcXVhcmVkRGVsdGEgfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQgeyBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZUNvb3JkaW5hdGVzIH0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHsgZG91Z2xhc1BldWNrZXIgfSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHsgaW5mbGF0ZUNvb3JkaW5hdGVzIH0gZnJvbSAnLi9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZyBhcyBsaW5lYXJSaW5nQXJlYSB9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGluZWFyIHJpbmcgZ2VvbWV0cnkuIE9ubHkgdXNlZCBhcyBwYXJ0IG9mIHBvbHlnb247IGNhbm5vdCBiZSByZW5kZXJlZFxuICogb24gaXRzIG93bi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBMaW5lYXJSaW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMaW5lYXJSaW5nLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPnxBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiAgICAgRm9yIGludGVybmFsIHVzZSwgZmxhdCBjb29yZGluYXRlcyBpbiBjb21iaW5hdGlvbiB3aXRoIGBvcHRfbGF5b3V0YCBhcmUgYWxzbyBhY2NlcHRlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExpbmVhclJpbmcoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuICAgICAgICBpZiAob3B0X2xheW91dCAhPT0gdW5kZWZpbmVkICYmICFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSkge1xuICAgICAgICAgICAgX3RoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqLyAoY29vcmRpbmF0ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVzKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHshTGluZWFyUmluZ30gQ2xvbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IExpbmVhclJpbmcodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1heERlbHRhUmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YV8gPSBNYXRoLnNxcnQobWF4U3F1YXJlZERlbHRhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCAwKSk7XG4gICAgICAgICAgICB0aGlzLm1heERlbHRhUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhc3NpZ25DbG9zZXN0UG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIHRoaXMubWF4RGVsdGFfLCB0cnVlLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGFyZWEgb2YgdGhlIGxpbmVhciByaW5nIG9uIHByb2plY3RlZCBwbGFuZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKG9uIHByb2plY3RlZCBwbGFuZSkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsaW5lYXJSaW5nQXJlYSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBsaW5lYXIgcmluZy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBDb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXModGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7TGluZWFyUmluZ30gU2ltcGxpZmllZCBMaW5lYXJSaW5nLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgICAgICByZXR1cm4gbmV3IExpbmVhclJpbmcoc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdH0gR2VvbWV0cnkgdHlwZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBsaW5lYXIgcmluZy5cbiAgICAgKiBAcGFyYW0geyFBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMSk7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGVzKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBMaW5lYXJSaW5nO1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgTGluZWFyUmluZztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpbmVhclJpbmcuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9jb250YWluc1xuICovXG5pbXBvcnQgeyBmb3JFYWNoQ29ybmVyIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdDb250YWluc0V4dGVudChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIHZhciBvdXRzaWRlID0gZm9yRWFjaENvcm5lcihleHRlbnQsIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiAhbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gIW91dHNpZGU7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgeCwgeSkge1xuICAgIC8vIGh0dHA6Ly9nZW9tYWxnb3JpdGhtcy5jb20vYTAzLV9pbmNsdXNpb24uaHRtbFxuICAgIC8vIENvcHlyaWdodCAyMDAwIHNvZnRTdXJmZXIsIDIwMTIgRGFuIFN1bmRheVxuICAgIC8vIFRoaXMgY29kZSBtYXkgYmUgZnJlZWx5IHVzZWQgYW5kIG1vZGlmaWVkIGZvciBhbnkgcHVycG9zZVxuICAgIC8vIHByb3ZpZGluZyB0aGF0IHRoaXMgY29weXJpZ2h0IG5vdGljZSBpcyBpbmNsdWRlZCB3aXRoIGl0LlxuICAgIC8vIFNvZnRTdXJmZXIgbWFrZXMgbm8gd2FycmFudHkgZm9yIHRoaXMgY29kZSwgYW5kIGNhbm5vdCBiZSBoZWxkXG4gICAgLy8gbGlhYmxlIGZvciBhbnkgcmVhbCBvciBpbWFnaW5lZCBkYW1hZ2UgcmVzdWx0aW5nIGZyb20gaXRzIHVzZS5cbiAgICAvLyBVc2VycyBvZiB0aGlzIGNvZGUgbXVzdCB2ZXJpZnkgY29ycmVjdG5lc3MgZm9yIHRoZWlyIGFwcGxpY2F0aW9uLlxuICAgIHZhciB3biA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgaWYgKHkxIDw9IHkpIHtcbiAgICAgICAgICAgIGlmICh5MiA+IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA+IDApIHtcbiAgICAgICAgICAgICAgICB3bisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHkyIDw9IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA8IDApIHtcbiAgICAgICAgICAgIHduLS07XG4gICAgICAgIH1cbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHduICE9PSAwO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkge1xuICAgIGlmIChlbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgeCwgeSkge1xuICAgIGlmIChlbmRzcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGFpbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbnRlcnNlY3RzZXh0ZW50XG4gKi9cbmltcG9ydCB7IGNvbnRhaW5zRXh0ZW50LCBjcmVhdGVFbXB0eSwgZXh0ZW5kRmxhdENvb3JkaW5hdGVzLCBpbnRlcnNlY3RzLCBpbnRlcnNlY3RzU2VnbWVudCwgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZm9yRWFjaCBhcyBmb3JFYWNoU2VnbWVudCB9IGZyb20gJy4vc2VnbWVudHMuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50LCBsaW5lYXJSaW5nQ29udGFpbnNYWSB9IGZyb20gJy4vY29udGFpbnMuanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXNFeHRlbnQgPSBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoY3JlYXRlRW1wdHkoKSwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICBpZiAoIWludGVyc2VjdHMoZXh0ZW50LCBjb29yZGluYXRlc0V4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoY29udGFpbnNFeHRlbnQoZXh0ZW50LCBjb29yZGluYXRlc0V4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlc0V4dGVudFswXSA+PSBleHRlbnRbMF0gJiYgY29vcmRpbmF0ZXNFeHRlbnRbMl0gPD0gZXh0ZW50WzJdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZXNFeHRlbnRbMV0gPj0gZXh0ZW50WzFdICYmIGNvb3JkaW5hdGVzRXh0ZW50WzNdIDw9IGV4dGVudFszXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZvckVhY2hTZWdtZW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MSBTdGFydCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQyIEVuZCBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHNlZ21lbnQgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LFxuICAgICAqICAgICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocG9pbnQxLCBwb2ludDIpIHtcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdHNTZWdtZW50KGV4dGVudCwgcG9pbnQxLCBwb2ludDIpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZHNbaV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgaWYgKGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbMV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMF0sIGV4dGVudFszXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFsyXSwgZXh0ZW50WzFdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbM10pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGlmICghaW50ZXJzZWN0c0xpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlbmRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDEsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICBpZiAoIWludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpZiAoaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyc2VjdHNleHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9zZWdtZW50c1xuICovXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBzZWdtZW50IG9mIHRoZSBmbGF0IGNvb3JkaW5hdGVzXG4gKiBhcnJheS4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdFxuICogdmFsdWUgaW1tZWRpYXRlbHkuIE90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBUfSBjYWxsYmFjayBGdW5jdGlvblxuICogICAgIGNhbGxlZCBmb3IgZWFjaCBzZWdtZW50LlxuICogQHJldHVybiB7VHxib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgcG9pbnQxID0gW2ZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV1dO1xuICAgIHZhciBwb2ludDIgPSBbXTtcbiAgICB2YXIgcmV0O1xuICAgIGZvciAoOyBvZmZzZXQgKyBzdHJpZGUgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgcG9pbnQyWzBdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZV07XG4gICAgICAgIHBvaW50MlsxXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBzdHJpZGUgKyAxXTtcbiAgICAgICAgcmV0ID0gY2FsbGJhY2socG9pbnQxLCBwb2ludDIpO1xuICAgICAgICBpZiAocmV0KSB7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIHBvaW50MVswXSA9IHBvaW50MlswXTtcbiAgICAgICAgcG9pbnQxWzFdID0gcG9pbnQyWzFdO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWdtZW50cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3JldmVyc2VcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgd2hpbGUgKG9mZnNldCA8IGVuZCAtIHN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgdG1wID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldO1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldID0gdG1wO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIGVuZCAtPSBzdHJpZGU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV2ZXJzZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L29yaWVudFxuICovXG5pbXBvcnQgeyBjb29yZGluYXRlcyBhcyByZXZlcnNlQ29vcmRpbmF0ZXMgfSBmcm9tICcuL3JldmVyc2UuanMnO1xuLyoqXG4gKiBJcyB0aGUgbGluZWFyIHJpbmcgb3JpZW50ZWQgY2xvY2t3aXNlIGluIGEgY29vcmRpbmF0ZSBzeXN0ZW0gd2l0aCBhIGJvdHRvbS1sZWZ0XG4gKiBjb29yZGluYXRlIG9yaWdpbj8gRm9yIGEgY29vcmRpbmF0ZSBzeXN0ZW0gd2l0aCBhIHRvcC1sZWZ0IGNvb3JkaW5hdGUgb3JpZ2luLFxuICogdGhlIHJpbmcncyBvcmllbnRhdGlvbiBpcyBjbG9ja3dpc2Ugd2hlbiB0aGlzIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gSXMgY2xvY2t3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMTgwMjU2LzIzODkzMjdcbiAgICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DdXJ2ZV9vcmllbnRhdGlvbiNPcmllbnRhdGlvbl9vZl9hX3NpbXBsZV9wb2x5Z29uXG4gICAgdmFyIGZpcnN0VmVydGV4UmVwZWF0ZWQgPSB0cnVlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXSAhPT0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldKSB7XG4gICAgICAgICAgICBmaXJzdFZlcnRleFJlcGVhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlyc3RWZXJ0ZXhSZXBlYXRlZCkge1xuICAgICAgICBlbmQgLT0gc3RyaWRlO1xuICAgIH1cbiAgICB2YXIgaU1pblZlcnRleCA9IGZpbmRDb3JuZXJWZXJ0ZXgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAvLyBPcmllbnRhdGlvbiBtYXRyaXg6XG4gICAgLy8gICAgIFsgMSAgeGEgIHlhIF1cbiAgICAvLyBPID0gfCAxICB4YiAgeWIgfFxuICAgIC8vICAgICBbIDEgIHhjICB5YyBdXG4gICAgdmFyIGlQcmV2aW91c1ZlcnRleCA9IGlNaW5WZXJ0ZXggLSBzdHJpZGU7XG4gICAgaWYgKGlQcmV2aW91c1ZlcnRleCA8IG9mZnNldCkge1xuICAgICAgICBpUHJldmlvdXNWZXJ0ZXggPSBlbmQgLSBzdHJpZGU7XG4gICAgfVxuICAgIHZhciBpTmV4dFZlcnRleCA9IGlNaW5WZXJ0ZXggKyBzdHJpZGU7XG4gICAgaWYgKGlOZXh0VmVydGV4ID49IGVuZCkge1xuICAgICAgICBpTmV4dFZlcnRleCA9IG9mZnNldDtcbiAgICB9XG4gICAgdmFyIGFYID0gZmxhdENvb3JkaW5hdGVzW2lQcmV2aW91c1ZlcnRleF07XG4gICAgdmFyIGFZID0gZmxhdENvb3JkaW5hdGVzW2lQcmV2aW91c1ZlcnRleCArIDFdO1xuICAgIHZhciBiWCA9IGZsYXRDb29yZGluYXRlc1tpTWluVmVydGV4XTtcbiAgICB2YXIgYlkgPSBmbGF0Q29vcmRpbmF0ZXNbaU1pblZlcnRleCArIDFdO1xuICAgIHZhciBjWCA9IGZsYXRDb29yZGluYXRlc1tpTmV4dFZlcnRleF07XG4gICAgdmFyIGNZID0gZmxhdENvb3JkaW5hdGVzW2lOZXh0VmVydGV4ICsgMV07XG4gICAgdmFyIGRldGVybWluYW50ID0gYlggKiBjWSArIGFYICogYlkgKyBhWSAqIGNYIC0gKGFZICogYlggKyBiWSAqIGNYICsgYVggKiBjWSk7XG4gICAgcmV0dXJuIGRldGVybWluYW50IDwgMDtcbn1cbi8vIEZpbmQgdmVydGV4IGFsb25nIG9uZSBlZGdlIG9mIGJvdW5kaW5nIGJveC5cbi8vIEluIHRoaXMgY2FzZSwgd2UgZmluZCBzbWFsbGVzdCB5OyBpbiBjYXNlIG9mIHRpZSBhbHNvIHNtYWxsZXN0IHguXG5mdW5jdGlvbiBmaW5kQ29ybmVyVmVydGV4KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIHZhciBpTWluVmVydGV4ID0gLTE7XG4gICAgdmFyIG1pblkgPSBJbmZpbml0eTtcbiAgICB2YXIgbWluWEF0TWluWSA9IEluZmluaXR5O1xuICAgIGZvciAodmFyIGkgPSBvZmZzZXQ7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICB2YXIgeSA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICAgIGlmICh5ID4gbWluWSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHkgPT0gbWluWSkge1xuICAgICAgICAgICAgaWYgKHggPj0gbWluWEF0TWluWSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE1pbmltdW0gc28gZmFyLlxuICAgICAgICBpTWluVmVydGV4ID0gaTtcbiAgICAgICAgbWluWSA9IHk7XG4gICAgICAgIG1pblhBdE1pblkgPSB4O1xuICAgIH1cbiAgICByZXR1cm4gaU1pblZlcnRleDtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBsaW5lYXIgcmluZ3MgYXJlIG9yaWVudGVkLiAgQnkgZGVmYXVsdCwgbGVmdC1oYW5kIG9yaWVudGF0aW9uXG4gKiBpcyB0ZXN0ZWQgKGZpcnN0IHJpbmcgbXVzdCBiZSBjbG9ja3dpc2UsIHJlbWFpbmluZyByaW5ncyBjb3VudGVyLWNsb2Nrd2lzZSkuXG4gKiBUbyB0ZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBBcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3JpZ2h0IFRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb25cbiAqICAgICAoY291bnRlci1jbG9ja3dpc2UgZXh0ZXJpb3IgcmluZyBhbmQgY2xvY2t3aXNlIGludGVyaW9yIHJpbmdzKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJpbmdzIGFyZSBjb3JyZWN0bHkgb3JpZW50ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIHZhciByaWdodCA9IG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkID8gb3B0X3JpZ2h0IDogZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIGlmICgocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGxpbmVhciByaW5ncyBhcmUgb3JpZW50ZWQuICBCeSBkZWZhdWx0LCBsZWZ0LWhhbmQgb3JpZW50YXRpb25cbiAqIGlzIHRlc3RlZCAoZmlyc3QgcmluZyBtdXN0IGJlIGNsb2Nrd2lzZSwgcmVtYWluaW5nIHJpbmdzIGNvdW50ZXItY2xvY2t3aXNlKS5cbiAqIFRvIHRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb24sIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgQXJyYXkgb2YgYXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQXJlT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaWYgKCFsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3JpZ2h0IEZvbGxvdyB0aGUgcmlnaHQtaGFuZCBydWxlIGZvciBvcmllbnRhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50TGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gICAgdmFyIHJpZ2h0ID0gb3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQgPyBvcHRfcmlnaHQgOiBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHZhciBpc0Nsb2Nrd2lzZSA9IGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgICAgICB2YXIgcmV2ZXJzZSA9IGkgPT09IDBcbiAgICAgICAgICAgID8gKHJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSlcbiAgICAgICAgICAgIDogKHJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiBpc0Nsb2Nrd2lzZSk7XG4gICAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgICAgICByZXZlcnNlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgQXJyYXkgb2YgYXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgb2Zmc2V0ID0gb3JpZW50TGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzW2ldLCBzdHJpZGUsIG9wdF9yaWdodCk7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcmllbnQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2x5Z29uXG4gKi9cbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IExpbmVhclJpbmcgZnJvbSAnLi9MaW5lYXJSaW5nLmpzJztcbmltcG9ydCBQb2ludCBmcm9tICcuL1BvaW50LmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGFycmF5TWF4U3F1YXJlZERlbHRhLCBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCB9IGZyb20gJy4vZmxhdC9jbG9zZXN0LmpzJztcbmltcG9ydCB7IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSwgZ2V0Q2VudGVyIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmxhdGVDb29yZGluYXRlc0FycmF5IH0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkgfSBmcm9tICcuL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyc7XG5pbXBvcnQgeyBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSB9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7IGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkgfSBmcm9tICcuL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5nc0FyZU9yaWVudGVkLCBvcmllbnRMaW5lYXJSaW5ncyB9IGZyb20gJy4vZmxhdC9vcmllbnQuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ3MgYXMgbGluZWFyUmluZ3NBcmVhIH0gZnJvbSAnLi9mbGF0L2FyZWEuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ3NDb250YWluc1hZIH0gZnJvbSAnLi9mbGF0L2NvbnRhaW5zLmpzJztcbmltcG9ydCB7IG1vZHVsbyB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHsgcXVhbnRpemVBcnJheSB9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5pbXBvcnQgeyBvZmZzZXQgYXMgc3BoZXJlT2Zmc2V0IH0gZnJvbSAnLi4vc3BoZXJlLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUG9seWdvbiBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQb2x5Z29uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2x5Z29uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fCFBcnJheTxudW1iZXI+fSBjb29yZGluYXRlc1xuICAgICAqICAgICBBcnJheSBvZiBsaW5lYXIgcmluZ3MgdGhhdCBkZWZpbmUgdGhlIHBvbHlnb24uIFRoZSBmaXJzdCBsaW5lYXIgcmluZyBvZiB0aGVcbiAgICAgKiAgICAgYXJyYXkgZGVmaW5lcyB0aGUgb3V0ZXItYm91bmRhcnkgb3Igc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gRWFjaCBzdWJzZXF1ZW50XG4gICAgICogICAgIGxpbmVhciByaW5nIGRlZmluZXMgYSBob2xlIGluIHRoZSBzdXJmYWNlIG9mIHRoZSBwb2x5Z29uLiBBIGxpbmVhciByaW5nIGlzXG4gICAgICogICAgIGFuIGFycmF5IG9mIHZlcnRpY2VzJyBjb29yZGluYXRlcyB3aGVyZSB0aGUgZmlyc3QgY29vcmRpbmF0ZSBhbmQgdGhlIGxhc3QgYXJlXG4gICAgICogICAgIGVxdWl2YWxlbnQuIChGb3IgaW50ZXJuYWwgdXNlLCBmbGF0IGNvb3JkaW5hdGVzIGluIGNvbWJpbmF0aW9uIHdpdGhcbiAgICAgKiAgICAgYG9wdF9sYXlvdXRgIGFuZCBgb3B0X2VuZHNgIGFyZSBhbHNvIGFjY2VwdGVkLilcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9lbmRzIEVuZHMgKGZvciBpbnRlcm5hbCB1c2Ugd2l0aCBmbGF0IGNvb3JkaW5hdGVzKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2x5Z29uKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0LCBvcHRfZW5kcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbmRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWVudGVkUmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgb3B0X2VuZHMpIHtcbiAgICAgICAgICAgIF90aGlzLnNldEZsYXRDb29yZGluYXRlcyhvcHRfbGF5b3V0LCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICAgICAgICBfdGhpcy5lbmRzXyA9IG9wdF9lbmRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuc2V0Q29vcmRpbmF0ZXMoXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCB0aGUgcGFzc2VkIGxpbmVhciByaW5nIHRvIHRoaXMgcG9seWdvbi5cbiAgICAgKiBAcGFyYW0ge0xpbmVhclJpbmd9IGxpbmVhclJpbmcgTGluZWFyIHJpbmcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmFwcGVuZExpbmVhclJpbmcgPSBmdW5jdGlvbiAobGluZWFyUmluZykge1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVuZCh0aGlzLmZsYXRDb29yZGluYXRlcywgbGluZWFyUmluZy5nZXRGbGF0Q29vcmRpbmF0ZXMoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmRzXy5wdXNoKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4geyFQb2x5Z29ufSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUG9seWdvbih0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLCB0aGlzLmxheW91dCwgdGhpcy5lbmRzXy5zbGljZSgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KGFycmF5TWF4U3F1YXJlZERlbHRhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgMCkpO1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzQ29udGFpbnNYWSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCB4LCB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbGluZWFyUmluZ3NBcmVhKHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGFycmF5IGZvciB0aGlzIGdlb21ldHJ5LiAgVGhpcyBhcnJheSBoYXMgdGhlIHN0cnVjdHVyZVxuICAgICAqIG9mIGEgR2VvSlNPTiBjb29yZGluYXRlIGFycmF5IGZvciBwb2x5Z29ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBPcmllbnQgY29vcmRpbmF0ZXMgYWNjb3JkaW5nIHRvIHRoZSByaWdodC1oYW5kXG4gICAgICogICAgIHJ1bGUgKGNvdW50ZXItY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuXG4gICAgICogICAgIElmIGBmYWxzZWAsIGNvb3JkaW5hdGVzIHdpbGwgYmUgb3JpZW50ZWQgYWNjb3JkaW5nIHRvIHRoZSBsZWZ0LWhhbmQgcnVsZVxuICAgICAqICAgICAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICAgKiAgICAgQnkgZGVmYXVsdCwgY29vcmRpbmF0ZSBvcmllbnRhdGlvbiB3aWxsIGRlcGVuZCBvbiBob3cgdGhlIGdlb21ldHJ5IHdhc1xuICAgICAqICAgICBjb25zdHJ1Y3RlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKG9wdF9yaWdodCkge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICBpZiAob3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgICAgICAgICAgb3JpZW50TGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgb3B0X3JpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEVuZHMuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0RW5kcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludC5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRGbGF0SW50ZXJpb3JQb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZmxhdENlbnRlciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICAgICAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgZmxhdENlbnRlciwgMCk7XG4gICAgICAgICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRJbnRlcmlvclBvaW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBpbnRlcmlvciBwb2ludCBvZiB0aGUgcG9seWdvbi5cbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gSW50ZXJpb3IgcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gICAgICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRJbnRlcmlvclBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMuZ2V0RmxhdEludGVyaW9yUG9pbnQoKSwgR2VvbWV0cnlMYXlvdXQuWFlNKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbnVtYmVyIG9mIHJpbmdzIG9mIHRoZSBwb2x5Z29uLCAgdGhpcyBpbmNsdWRlcyB0aGUgZXh0ZXJpb3JcbiAgICAgKiByaW5nIGFuZCBhbnkgaW50ZXJpb3IgcmluZ3MuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiByaW5ncy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZ0NvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmRzXy5sZW5ndGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIE50aCBsaW5lYXIgcmluZyBvZiB0aGUgcG9seWdvbiBnZW9tZXRyeS4gUmV0dXJuIGBudWxsYCBpZiB0aGVcbiAgICAgKiBnaXZlbiBpbmRleCBpcyBvdXQgb2YgcmFuZ2UuXG4gICAgICogVGhlIGV4dGVyaW9yIGxpbmVhciByaW5nIGlzIGF2YWlsYWJsZSBhdCBpbmRleCBgMGAgYW5kIHRoZSBpbnRlcmlvciByaW5nc1xuICAgICAqIGF0IGluZGV4IGAxYCBhbmQgYmV5b25kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IExpbmVhciByaW5nLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgdGhpcy5lbmRzXy5sZW5ndGggPD0gaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTGluZWFyUmluZyh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZShpbmRleCA9PT0gMCA/IDAgOiB0aGlzLmVuZHNfW2luZGV4IC0gMV0sIHRoaXMuZW5kc19baW5kZXhdKSwgdGhpcy5sYXlvdXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsaW5lYXIgcmluZ3Mgb2YgdGhlIHBvbHlnb24uXG4gICAgICogQHJldHVybiB7QXJyYXk8TGluZWFyUmluZz59IExpbmVhciByaW5ncy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICB2YXIgZW5kcyA9IHRoaXMuZW5kc187XG4gICAgICAgIHZhciBsaW5lYXJSaW5ncyA9IFtdO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgICAgIHZhciBsaW5lYXJSaW5nID0gbmV3IExpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLnNsaWNlKG9mZnNldCwgZW5kKSwgbGF5b3V0KTtcbiAgICAgICAgICAgIGxpbmVhclJpbmdzLnB1c2gobGluZWFyUmluZyk7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3JpZW50ZWQgZmxhdCBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZW50ZWRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgICAgICBpZiAobGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXy5sZW5ndGggPSBvcmllbnRMaW5lYXJSaW5ncyh0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcmllbnRlZFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtQb2x5Z29ufSBTaW1wbGlmaWVkIFBvbHlnb24uXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gcXVhbnRpemVBcnJheSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIE1hdGguc3FydChzcXVhcmVkVG9sZXJhbmNlKSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICByZXR1cm4gbmV3IFBvbHlnb24oc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIHNpbXBsaWZpZWRFbmRzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBHZW9tZXRyeVR5cGUuUE9MWUdPTjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgcG9seWdvbi5cbiAgICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdGhpcy5zZXRMYXlvdXQob3B0X2xheW91dCwgY29vcmRpbmF0ZXMsIDIpO1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbmRzID0gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSwgdGhpcy5lbmRzXyk7XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGVuZHMubGVuZ3RoID09PSAwID8gMCA6IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9seWdvbjtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcbmV4cG9ydCBkZWZhdWx0IFBvbHlnb247XG4vKipcbiAqIENyZWF0ZSBhbiBhcHByb3hpbWF0aW9uIG9mIGEgY2lyY2xlIG9uIHRoZSBzdXJmYWNlIG9mIGEgc3BoZXJlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgKGBbbG9uLCBsYXRdYCBpbiBkZWdyZWVzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIGdyZWF0LWNpcmNsZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgdG9cbiAqICAgICB0aGUgcG9seWdvbiB2ZXJ0aWNlcy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X24gT3B0aW9uYWwgbnVtYmVyIG9mIHZlcnRpY2VzIGZvciB0aGUgcmVzdWx0aW5nXG4gKiAgICAgcG9seWdvbi4gRGVmYXVsdCBpcyBgMzJgLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfc3BoZXJlUmFkaXVzIE9wdGlvbmFsIHJhZGl1cyBmb3IgdGhlIHNwaGVyZSAoZGVmYXVsdHMgdG9cbiAqICAgICB0aGUgRWFydGgncyBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkKS5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBcImNpcmN1bGFyXCIgcG9seWdvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNpcmN1bGFyKGNlbnRlciwgcmFkaXVzLCBvcHRfbiwgb3B0X3NwaGVyZVJhZGl1cykge1xuICAgIHZhciBuID0gb3B0X24gPyBvcHRfbiA6IDMyO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgZXh0ZW5kKGZsYXRDb29yZGluYXRlcywgc3BoZXJlT2Zmc2V0KGNlbnRlciwgcmFkaXVzLCAoMiAqIE1hdGguUEkgKiBpKSAvIG4sIG9wdF9zcGhlcmVSYWRpdXMpKTtcbiAgICB9XG4gICAgZmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbXG4gICAgICAgIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgXSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHBvbHlnb24gZnJvbSBhbiBleHRlbnQuIFRoZSBsYXlvdXQgdXNlZCBpcyBgWFlgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV4dGVudChleHRlbnQpIHtcbiAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW1xuICAgICAgICBtaW5YLFxuICAgICAgICBtaW5ZLFxuICAgICAgICBtaW5YLFxuICAgICAgICBtYXhZLFxuICAgICAgICBtYXhYLFxuICAgICAgICBtYXhZLFxuICAgICAgICBtYXhYLFxuICAgICAgICBtaW5ZLFxuICAgICAgICBtaW5YLFxuICAgICAgICBtaW5ZLFxuICAgIF07XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIFtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICBdKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zaWRlcyBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIHJhZGlhbnMuIERlZmF1bHQgaXMgMC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQ2lyY2xlKGNpcmNsZSwgb3B0X3NpZGVzLCBvcHRfYW5nbGUpIHtcbiAgICB2YXIgc2lkZXMgPSBvcHRfc2lkZXMgPyBvcHRfc2lkZXMgOiAzMjtcbiAgICB2YXIgc3RyaWRlID0gY2lyY2xlLmdldFN0cmlkZSgpO1xuICAgIHZhciBsYXlvdXQgPSBjaXJjbGUuZ2V0TGF5b3V0KCk7XG4gICAgdmFyIGNlbnRlciA9IGNpcmNsZS5nZXRDZW50ZXIoKTtcbiAgICB2YXIgYXJyYXlMZW5ndGggPSBzdHJpZGUgKiAoc2lkZXMgKyAxKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KGFycmF5TGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5TGVuZ3RoOyBpICs9IHN0cmlkZSkge1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbaV0gPSAwO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdID0gMDtcbiAgICAgICAgZm9yICh2YXIgaiA9IDI7IGogPCBzdHJpZGU7IGorKykge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW2kgKyBqXSA9IGNlbnRlcltqXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgZW5kcyA9IFtmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoXTtcbiAgICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgbGF5b3V0LCBlbmRzKTtcbiAgICBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIGNpcmNsZS5nZXRSYWRpdXMoKSwgb3B0X2FuZ2xlKTtcbiAgICByZXR1cm4gcG9seWdvbjtcbn1cbi8qKlxuICogTW9kaWZ5IHRoZSBjb29yZGluYXRlcyBvZiBhIHBvbHlnb24gdG8gbWFrZSBpdCBhIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seWdvbiBQb2x5Z29uIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIHRoZSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIHJhZGlhbnMuIERlZmF1bHQgaXMgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZWd1bGFyKHBvbHlnb24sIGNlbnRlciwgcmFkaXVzLCBvcHRfYW5nbGUpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gcG9seWdvbi5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gcG9seWdvbi5nZXRTdHJpZGUoKTtcbiAgICB2YXIgc2lkZXMgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gc3RyaWRlIC0gMTtcbiAgICB2YXIgc3RhcnRBbmdsZSA9IG9wdF9hbmdsZSA/IG9wdF9hbmdsZSA6IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gc2lkZXM7ICsraSkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gaSAqIHN0cmlkZTtcbiAgICAgICAgdmFyIGFuZ2xlID0gc3RhcnRBbmdsZSArIChtb2R1bG8oaSwgc2lkZXMpICogMiAqIE1hdGguUEkpIC8gc2lkZXM7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdID0gY2VudGVyWzBdICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0gPSBjZW50ZXJbMV0gKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSk7XG4gICAgfVxuICAgIHBvbHlnb24uY2hhbmdlZCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWdvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyaW9ycG9pbnRcbiAqL1xuaW1wb3J0IHsgbGluZWFyUmluZ3NDb250YWluc1hZIH0gZnJvbSAnLi9jb250YWlucy5qcyc7XG5pbXBvcnQgeyBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuLyoqXG4gKiBDYWxjdWxhdGVzIGEgcG9pbnQgdGhhdCBpcyBsaWtlbHkgdG8gbGllIGluIHRoZSBpbnRlcmlvciBvZiB0aGUgbGluZWFyIHJpbmdzLlxuICogSW5zcGlyZWQgYnkgSlRTJ3MgY29tLnZpdmlkc29sdXRpb25zLmp0cy5nZW9tLkdlb21ldHJ5I2dldEludGVyaW9yUG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gZmxhdENlbnRlcnNPZmZzZXQgRmxhdCBjZW50ZXIgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X2Rlc3QgRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBEZXN0aW5hdGlvbiBwb2ludCBhcyBYWU0gY29vcmRpbmF0ZSwgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRPZkFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGZsYXRDZW50ZXJzLCBmbGF0Q2VudGVyc09mZnNldCwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgaSwgaWksIHgsIHgxLCB4MiwgeTEsIHkyO1xuICAgIHZhciB5ID0gZmxhdENlbnRlcnNbZmxhdENlbnRlcnNPZmZzZXQgKyAxXTtcbiAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgdmFyIGludGVyc2VjdGlvbnMgPSBbXTtcbiAgICAvLyBDYWxjdWxhdGUgaW50ZXJzZWN0aW9ucyB3aXRoIHRoZSBob3Jpem9udGFsIGxpbmVcbiAgICBmb3IgKHZhciByID0gMCwgcnIgPSBlbmRzLmxlbmd0aDsgciA8IHJyOyArK3IpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbcl07XG4gICAgICAgIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgICAgIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgICAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIGlmICgoeSA8PSB5MSAmJiB5MiA8PSB5KSB8fCAoeTEgPD0geSAmJiB5IDw9IHkyKSkge1xuICAgICAgICAgICAgICAgIHggPSAoKHkgLSB5MSkgLyAoeTIgLSB5MSkpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9ucy5wdXNoKHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRmluZCB0aGUgbG9uZ2VzdCBzZWdtZW50IG9mIHRoZSBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludFxuICAgIC8vIGluc2lkZSB0aGUgbGluZWFyIHJpbmcuXG4gICAgdmFyIHBvaW50WCA9IE5hTjtcbiAgICB2YXIgbWF4U2VnbWVudExlbmd0aCA9IC1JbmZpbml0eTtcbiAgICBpbnRlcnNlY3Rpb25zLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gICAgeDEgPSBpbnRlcnNlY3Rpb25zWzBdO1xuICAgIGZvciAoaSA9IDEsIGlpID0gaW50ZXJzZWN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHgyID0gaW50ZXJzZWN0aW9uc1tpXTtcbiAgICAgICAgdmFyIHNlZ21lbnRMZW5ndGggPSBNYXRoLmFicyh4MiAtIHgxKTtcbiAgICAgICAgaWYgKHNlZ21lbnRMZW5ndGggPiBtYXhTZWdtZW50TGVuZ3RoKSB7XG4gICAgICAgICAgICB4ID0gKHgxICsgeDIpIC8gMjtcbiAgICAgICAgICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgICAgICAgICBwb2ludFggPSB4O1xuICAgICAgICAgICAgICAgIG1heFNlZ21lbnRMZW5ndGggPSBzZWdtZW50TGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHgxID0geDI7XG4gICAgfVxuICAgIGlmIChpc05hTihwb2ludFgpKSB7XG4gICAgICAgIC8vIFRoZXJlIGlzIG5vIGhvcml6b250YWwgbGluZSB0aGF0IGhhcyBpdHMgY2VudGVyIHBvaW50IGluc2lkZSB0aGUgbGluZWFyXG4gICAgICAgIC8vIHJpbmcuICBVc2UgdGhlIGNlbnRlciBvZiB0aGUgdGhlIGxpbmVhciByaW5nJ3MgZXh0ZW50LlxuICAgICAgICBwb2ludFggPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldF07XG4gICAgfVxuICAgIGlmIChvcHRfZGVzdCkge1xuICAgICAgICBvcHRfZGVzdC5wdXNoKHBvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aCk7XG4gICAgICAgIHJldHVybiBvcHRfZGVzdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbcG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDZW50ZXJzIEZsYXQgY2VudGVycy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEludGVyaW9yIHBvaW50cyBhcyBYWU0gY29vcmRpbmF0ZXMsIHdoZXJlIE0gaXMgdGhlXG4gKiBsZW5ndGggb2YgdGhlIGhvcml6b250YWwgaW50ZXJzZWN0aW9uIHRoYXQgdGhlIHBvaW50IGJlbG9uZ3MgdG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcmlvclBvaW50c09mTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgZmxhdENlbnRlcnMpIHtcbiAgICB2YXIgaW50ZXJpb3JQb2ludHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGludGVyaW9yUG9pbnRzID0gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZmxhdENlbnRlcnMsIDIgKiBpLCBpbnRlcmlvclBvaW50cyk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGludGVyaW9yUG9pbnRzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJpb3Jwb2ludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2xjcy5jb3JlLlZlY3RvckxheWVyQ291bnRlcnBhcnRcbiAqL1xuaW1wb3J0IHt1bkJ5S2V5IGFzIG9sT2JzZXJ2YWJsZVVuQnlLZXl9IGZyb20gJ29sL09ic2VydmFibGUuanMnO1xuXG5cbi8qKlxuICogQ29udGV4dCBmb3IgZmVhdHVyZSBjb252ZXJzaW9uLlxuICogQHR5cGVkZWYge09iamVjdH0gT2xGZWF0dXJlVG9DZXNpdW1Db250ZXh0XG4gKiBAcHJvcGVydHkgeyEoaW1wb3J0KCdvbC9Qcm9qZWN0aW9uLmpzJykuZGVmYXVsdHxzdHJpbmcpfSBwcm9qZWN0aW9uXG4gKiBAcHJvcGVydHkgeyFDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbn0gcHJpbWl0aXZlc1xuICogQHByb3BlcnR5IHtPYmplY3Q8bnVtYmVyLCBBcnJheTwhQ2VzaXVtLlByaW1pdGl2ZXwhQ2VzaXVtLkJpbGxib2FyZD4+fSBmZWF0dXJlVG9DZXNpdW1NYXBcbiAqIEBwcm9wZXJ0eSB7IUNlc2l1bS5CaWxsYm9hcmRDb2xsZWN0aW9ufSBiaWxsYm9hcmRzXG4gKi9cblxuXG5jbGFzcyBWZWN0b3JMYXllckNvdW50ZXJwYXJ0IHtcbiAgLyoqXG4gICogUmVzdWx0IG9mIHRoZSBjb252ZXJzaW9uIG9mIGFuIE9wZW5MYXllcnMgbGF5ZXIgdG8gQ2VzaXVtLlxuICAqIEBwYXJhbSB7IShvbC5wcm9qLlByb2plY3Rpb258c3RyaW5nKX0gbGF5ZXJQcm9qZWN0aW9uXG4gICogQHBhcmFtIHshQ2VzaXVtLlNjZW5lfSBzY2VuZVxuICAqL1xuICBjb25zdHJ1Y3RvcihsYXllclByb2plY3Rpb24sIHNjZW5lKSB7XG4gICAgY29uc3QgYmlsbGJvYXJkcyA9IG5ldyBDZXNpdW0uQmlsbGJvYXJkQ29sbGVjdGlvbih7c2NlbmV9KTtcbiAgICBjb25zdCBwcmltaXRpdmVzID0gbmV3IENlc2l1bS5QcmltaXRpdmVDb2xsZWN0aW9uKCk7XG5cbiAgICAvKipcbiAgICAqIEB0eXBlIHshQXJyYXkuPG9sLkV2ZW50c0tleT59XG4gICAgKi9cbiAgICB0aGlzLm9sTGlzdGVuS2V5cyA9IFtdO1xuXG4gICAgdGhpcy5yb290Q29sbGVjdGlvbl8gPSBuZXcgQ2VzaXVtLlByaW1pdGl2ZUNvbGxlY3Rpb24oKTtcbiAgICAvKipcbiAgICAqIEB0eXBlIHshT2xGZWF0dXJlVG9DZXNpdW1Db250ZXh0fVxuICAgICovXG4gICAgdGhpcy5jb250ZXh0ID0ge1xuICAgICAgcHJvamVjdGlvbjogbGF5ZXJQcm9qZWN0aW9uLFxuICAgICAgYmlsbGJvYXJkcyxcbiAgICAgIGZlYXR1cmVUb0Nlc2l1bU1hcDoge30sXG4gICAgICBwcmltaXRpdmVzXG4gICAgfTtcblxuICAgIHRoaXMucm9vdENvbGxlY3Rpb25fLmFkZChiaWxsYm9hcmRzKTtcbiAgICB0aGlzLnJvb3RDb2xsZWN0aW9uXy5hZGQocHJpbWl0aXZlcyk7XG4gIH1cblxuICAvKipcbiAgKiBVbmxpc3Rlbi5cbiAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLm9sTGlzdGVuS2V5cy5mb3JFYWNoKG9sT2JzZXJ2YWJsZVVuQnlLZXkpO1xuICAgIHRoaXMub2xMaXN0ZW5LZXlzLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgKiBAcmV0dXJuIHshQ2VzaXVtLlByaW1pdGl2ZX1cbiAgKi9cbiAgZ2V0Um9vdFByaW1pdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290Q29sbGVjdGlvbl87XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBWZWN0b3JMYXllckNvdW50ZXJwYXJ0O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sY3MuVmVjdG9yU3luY2hyb25pemVyXG4gKi9cbmltcG9ydCBvbFNvdXJjZVZlY3RvciBmcm9tICdvbC9zb3VyY2UvVmVjdG9yLmpzJztcbmltcG9ydCBvbExheWVyTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IG9sU291cmNlQ2x1c3RlciBmcm9tICdvbC9zb3VyY2UvQ2x1c3Rlci5qcyc7XG5pbXBvcnQgb2xMYXllckltYWdlIGZyb20gJ29sL2xheWVyL0ltYWdlLmpzJztcbmltcG9ydCB7b2xjc0xpc3RlbiwgZ2V0VWlkfSBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IG9sTGF5ZXJWZWN0b3IgZnJvbSAnb2wvbGF5ZXIvVmVjdG9yLmpzJztcbmltcG9ydCBvbExheWVyVmVjdG9yVGlsZSBmcm9tICdvbC9sYXllci9WZWN0b3JUaWxlLmpzJztcbmltcG9ydCBvbGNzQWJzdHJhY3RTeW5jaHJvbml6ZXIgZnJvbSAnLi9BYnN0cmFjdFN5bmNocm9uaXplci5qcyc7XG5pbXBvcnQgb2xjc0ZlYXR1cmVDb252ZXJ0ZXIgZnJvbSAnLi9GZWF0dXJlQ29udmVydGVyLmpzJztcblxuY2xhc3MgVmVjdG9yU3luY2hyb25pemVyIGV4dGVuZHMgb2xjc0Fic3RyYWN0U3luY2hyb25pemVyIHtcbiAgLyoqXG4gICAqIFVuaWRpcmVjdGlvbmFsbHkgc3luY2hyb25pemUgT3BlbkxheWVycyB2ZWN0b3IgbGF5ZXJzIHRvIENlc2l1bS5cbiAgICogQHBhcmFtIHshb2wuTWFwfSBtYXBcbiAgICogQHBhcmFtIHshQ2VzaXVtLlNjZW5lfSBzY2VuZVxuICAgKiBAcGFyYW0ge29sY3MuRmVhdHVyZUNvbnZlcnRlcj19IG9wdF9jb252ZXJ0ZXJcbiAgICogQGV4dGVuZHMge29sY3MuQWJzdHJhY3RTeW5jaHJvbml6ZXIuPG9sY3MuY29yZS5WZWN0b3JMYXllckNvdW50ZXJwYXJ0Pn1cbiAgICogQGFwaVxuICAgKi9cbiAgY29uc3RydWN0b3IobWFwLCBzY2VuZSwgb3B0X2NvbnZlcnRlcikge1xuICAgIHN1cGVyKG1hcCwgc2NlbmUpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHRoaXMuY29udmVydGVyID0gb3B0X2NvbnZlcnRlciB8fCBuZXcgb2xjc0ZlYXR1cmVDb252ZXJ0ZXIoc2NlbmUpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNzQWxsUHJpbWl0aXZlc18gPSBuZXcgQ2VzaXVtLlByaW1pdGl2ZUNvbGxlY3Rpb24oKTtcbiAgICBzY2VuZS5wcmltaXRpdmVzLmFkZCh0aGlzLmNzQWxsUHJpbWl0aXZlc18pO1xuICAgIHRoaXMuY3NBbGxQcmltaXRpdmVzXy5kZXN0cm95UHJpbWl0aXZlcyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBhZGRDZXNpdW1PYmplY3QoY291bnRlcnBhcnQpIHtcbiAgICBjb25zb2xlLmFzc2VydChjb3VudGVycGFydCk7XG4gICAgY291bnRlcnBhcnQuZ2V0Um9vdFByaW1pdGl2ZSgpWydjb3VudGVycGFydCddID0gY291bnRlcnBhcnQ7XG4gICAgdGhpcy5jc0FsbFByaW1pdGl2ZXNfLmFkZChjb3VudGVycGFydC5nZXRSb290UHJpbWl0aXZlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBkZXN0cm95Q2VzaXVtT2JqZWN0KG9iamVjdCkge1xuICAgIG9iamVjdC5nZXRSb290UHJpbWl0aXZlKCkuZGVzdHJveSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICByZW1vdmVTaW5nbGVDZXNpdW1PYmplY3Qob2JqZWN0LCBkZXN0cm95KSB7XG4gICAgb2JqZWN0LmRlc3Ryb3koKTtcbiAgICB0aGlzLmNzQWxsUHJpbWl0aXZlc18uZGVzdHJveVByaW1pdGl2ZXMgPSBkZXN0cm95O1xuICAgIHRoaXMuY3NBbGxQcmltaXRpdmVzXy5yZW1vdmUob2JqZWN0LmdldFJvb3RQcmltaXRpdmUoKSk7XG4gICAgdGhpcy5jc0FsbFByaW1pdGl2ZXNfLmRlc3Ryb3lQcmltaXRpdmVzID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIHJlbW92ZUFsbENlc2l1bU9iamVjdHMoZGVzdHJveSkge1xuICAgIHRoaXMuY3NBbGxQcmltaXRpdmVzXy5kZXN0cm95UHJpbWl0aXZlcyA9IGRlc3Ryb3k7XG4gICAgaWYgKGRlc3Ryb3kpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jc0FsbFByaW1pdGl2ZXNfLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMuY3NBbGxQcmltaXRpdmVzXy5nZXQoaSlbJ2NvdW50ZXJwYXJ0J10uZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNzQWxsUHJpbWl0aXZlc18ucmVtb3ZlQWxsKCk7XG4gICAgdGhpcy5jc0FsbFByaW1pdGl2ZXNfLmRlc3Ryb3lQcmltaXRpdmVzID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogU3luY2hyb25pemVzIHRoZSBsYXllciB2aXNpYmlsaXR5IHByb3BlcnRpZXNcbiAgICogdG8gdGhlIGdpdmVuIENlc2l1bSBQcmltaXRpdmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KCdvbHNjL2NvcmUuanMnKS5MYXllcldpdGhQYXJlbnRzfSBvbExheWVyV2l0aFBhcmVudHNcbiAgICogQHBhcmFtIHshQ2VzaXVtLlByaW1pdGl2ZX0gY3NQcmltaXRpdmVcbiAgICovXG4gIHVwZGF0ZUxheWVyVmlzaWJpbGl0eShvbExheWVyV2l0aFBhcmVudHMsIGNzUHJpbWl0aXZlKSB7XG4gICAgbGV0IHZpc2libGUgPSB0cnVlO1xuICAgIFtvbExheWVyV2l0aFBhcmVudHMubGF5ZXJdLmNvbmNhdChvbExheWVyV2l0aFBhcmVudHMucGFyZW50cykuZm9yRWFjaCgob2xMYXllcikgPT4ge1xuICAgICAgY29uc3QgbGF5ZXJWaXNpYmxlID0gb2xMYXllci5nZXRWaXNpYmxlKCk7XG4gICAgICBpZiAobGF5ZXJWaXNpYmxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmlzaWJsZSAmPSBsYXllclZpc2libGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aXNpYmxlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY3NQcmltaXRpdmUuc2hvdyA9IHZpc2libGU7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGNyZWF0ZVNpbmdsZUxheWVyQ291bnRlcnBhcnRzKG9sTGF5ZXJXaXRoUGFyZW50cykge1xuICAgIGNvbnN0IG9sTGF5ZXIgPSBvbExheWVyV2l0aFBhcmVudHMubGF5ZXI7XG4gICAgaWYgKCEob2xMYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJWZWN0b3IpIHx8IG9sTGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyVmVjdG9yVGlsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnNvbGUuYXNzZXJ0KG9sTGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyTGF5ZXIpO1xuXG4gICAgbGV0IHNvdXJjZSA9IG9sTGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlQ2x1c3Rlcikge1xuICAgICAgc291cmNlID0gc291cmNlLmdldFNvdXJjZSgpO1xuICAgIH1cblxuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmFzc2VydChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVZlY3Rvcik7XG4gICAgY29uc29sZS5hc3NlcnQodGhpcy52aWV3KTtcblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLnZpZXc7XG4gICAgY29uc3QgZmVhdHVyZVByaW1pdGl2ZU1hcCA9IHt9O1xuICAgIGNvbnN0IGNvdW50ZXJwYXJ0ID0gdGhpcy5jb252ZXJ0ZXIub2xWZWN0b3JMYXllclRvQ2VzaXVtKG9sTGF5ZXIsIHZpZXcsXG4gICAgICAgIGZlYXR1cmVQcmltaXRpdmVNYXApO1xuICAgIGNvbnN0IGNzUHJpbWl0aXZlcyA9IGNvdW50ZXJwYXJ0LmdldFJvb3RQcmltaXRpdmUoKTtcbiAgICBjb25zdCBvbExpc3RlbktleXMgPSBjb3VudGVycGFydC5vbExpc3RlbktleXM7XG5cbiAgICBbb2xMYXllcldpdGhQYXJlbnRzLmxheWVyXS5jb25jYXQob2xMYXllcldpdGhQYXJlbnRzLnBhcmVudHMpLmZvckVhY2goKG9sTGF5ZXJJdGVtKSA9PiB7XG4gICAgICBvbExpc3RlbktleXMucHVzaChvbGNzTGlzdGVuKG9sTGF5ZXJJdGVtLCAnY2hhbmdlOnZpc2libGUnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlTGF5ZXJWaXNpYmlsaXR5KG9sTGF5ZXJXaXRoUGFyZW50cywgY3NQcmltaXRpdmVzKTtcbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgICB0aGlzLnVwZGF0ZUxheWVyVmlzaWJpbGl0eShvbExheWVyV2l0aFBhcmVudHMsIGNzUHJpbWl0aXZlcyk7XG5cbiAgICBjb25zdCBvbkFkZEZlYXR1cmUgPSAoZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgY29uc29sZS5hc3NlcnQoXG4gICAgICAgICAgKG9sTGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyVmVjdG9yKSB8fFxuICAgICAgICAgIChvbExheWVyIGluc3RhbmNlb2Ygb2xMYXllckltYWdlKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBjb3VudGVycGFydC5jb250ZXh0O1xuICAgICAgY29uc3QgcHJpbSA9IHRoaXMuY29udmVydGVyLmNvbnZlcnQob2xMYXllciwgdmlldywgZmVhdHVyZSwgY29udGV4dCk7XG4gICAgICBpZiAocHJpbSkge1xuICAgICAgICBmZWF0dXJlUHJpbWl0aXZlTWFwW2dldFVpZChmZWF0dXJlKV0gPSBwcmltO1xuICAgICAgICBjc1ByaW1pdGl2ZXMuYWRkKHByaW0pO1xuICAgICAgfVxuICAgIH0pLmJpbmQodGhpcyk7XG5cbiAgICBjb25zdCBvblJlbW92ZUZlYXR1cmUgPSAoZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgY29uc3QgaWQgPSBnZXRVaWQoZmVhdHVyZSk7XG4gICAgICBjb25zdCBjb250ZXh0ID0gY291bnRlcnBhcnQuY29udGV4dDtcbiAgICAgIGNvbnN0IGJicyA9IGNvbnRleHQuZmVhdHVyZVRvQ2VzaXVtTWFwW2lkXTtcbiAgICAgIGlmIChiYnMpIHtcbiAgICAgICAgZGVsZXRlIGNvbnRleHQuZmVhdHVyZVRvQ2VzaXVtTWFwW2lkXTtcbiAgICAgICAgYmJzLmZvckVhY2goKGJiKSA9PiB7XG4gICAgICAgICAgaWYgKGJiIGluc3RhbmNlb2YgQ2VzaXVtLkJpbGxib2FyZCkge1xuICAgICAgICAgICAgY29udGV4dC5iaWxsYm9hcmRzLnJlbW92ZShiYik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNzUHJpbWl0aXZlID0gZmVhdHVyZVByaW1pdGl2ZU1hcFtpZF07XG4gICAgICBkZWxldGUgZmVhdHVyZVByaW1pdGl2ZU1hcFtpZF07XG4gICAgICBpZiAoY3NQcmltaXRpdmUpIHtcbiAgICAgICAgY3NQcmltaXRpdmVzLnJlbW92ZShjc1ByaW1pdGl2ZSk7XG4gICAgICB9XG4gICAgfSkuYmluZCh0aGlzKTtcblxuICAgIG9sTGlzdGVuS2V5cy5wdXNoKG9sY3NMaXN0ZW4oc291cmNlLCAnYWRkZmVhdHVyZScsIChlKSA9PiB7XG4gICAgICBjb25zb2xlLmFzc2VydChlLmZlYXR1cmUpO1xuICAgICAgb25BZGRGZWF0dXJlKGUuZmVhdHVyZSk7XG4gICAgfSwgdGhpcykpO1xuXG4gICAgb2xMaXN0ZW5LZXlzLnB1c2gob2xjc0xpc3Rlbihzb3VyY2UsICdyZW1vdmVmZWF0dXJlJywgKGUpID0+IHtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGUuZmVhdHVyZSk7XG4gICAgICBvblJlbW92ZUZlYXR1cmUoZS5mZWF0dXJlKTtcbiAgICB9LCB0aGlzKSk7XG5cbiAgICBvbExpc3RlbktleXMucHVzaChvbGNzTGlzdGVuKHNvdXJjZSwgJ2NoYW5nZWZlYXR1cmUnLCAoZSkgPT4ge1xuICAgICAgY29uc3QgZmVhdHVyZSA9IGUuZmVhdHVyZTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGZlYXR1cmUpO1xuICAgICAgb25SZW1vdmVGZWF0dXJlKGZlYXR1cmUpO1xuICAgICAgb25BZGRGZWF0dXJlKGZlYXR1cmUpO1xuICAgIH0sIHRoaXMpKTtcblxuICAgIHJldHVybiBjb3VudGVycGFydCA/IFtjb3VudGVycGFydF0gOiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvclN5bmNocm9uaXplcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbGNzLkZlYXR1cmVDb252ZXJ0ZXJcbiAqL1xuaW1wb3J0IG9sR2VvbUdlb21ldHJ5IGZyb20gJ29sL2dlb20vR2VvbWV0cnkuanMnO1xuaW1wb3J0IG9sU3R5bGVJY29uIGZyb20gJ29sL3N0eWxlL0ljb24uanMnO1xuaW1wb3J0IG9sU291cmNlVmVjdG9yIGZyb20gJ29sL3NvdXJjZS9WZWN0b3IuanMnO1xuaW1wb3J0IG9sU291cmNlQ2x1c3RlciBmcm9tICdvbC9zb3VyY2UvQ2x1c3Rlci5qcyc7XG5pbXBvcnQge2NpcmN1bGFyIGFzIG9sQ3JlYXRlQ2lyY3VsYXJQb2x5Z29ufSBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHtib3VuZGluZ0V4dGVudCwgZ2V0Q2VudGVyfSBmcm9tICdvbC9leHRlbnQuanMnO1xuaW1wb3J0IG9sR2VvbVNpbXBsZUdlb21ldHJ5IGZyb20gJ29sL2dlb20vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IG9sY3NDb3JlIGZyb20gJy4vY29yZS5qcyc7XG5pbXBvcnQgb2xjc0NvcmVWZWN0b3JMYXllckNvdW50ZXJwYXJ0IGZyb20gJy4vY29yZS9WZWN0b3JMYXllckNvdW50ZXJwYXJ0LmpzJztcbmltcG9ydCBvbGNzVXRpbCwge2dldFVpZCwgaXNHcm91bmRQb2x5bGluZVByaW1pdGl2ZVN1cHBvcnRlZH0gZnJvbSAnLi91dGlsLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1vZGVsU3R5bGVcbiAqIEBwcm9wZXJ0eSB7Q2VzaXVtLk1hdHJpeDR9IFtkZWJ1Z01vZGVsTWF0cml4XVxuICogQHByb3BlcnR5IHtDZXNpdW0uTW9kZWxGcm9tR2x0Zk9wdGlvbnN9IGNlc2l1bU9wdGlvbnNcbiAqL1xuXG5cbmNsYXNzIEZlYXR1cmVDb252ZXJ0ZXIge1xuICAvKipcbiAgICogQ29uY3JldGUgYmFzZSBjbGFzcyBmb3IgY29udmVydGluZyBmcm9tIE9wZW5MYXllcnMzIHZlY3RvcnMgdG8gQ2VzaXVtXG4gICAqIHByaW1pdGl2ZXMuXG4gICAqIEV4dGVuZGluZyB0aGlzIGNsYXNzIGlzIHBvc3NpYmxlIHByb3ZpZGVkIHRoYXQgdGhlIGV4dGVuZGluZyBjbGFzcyBhbmRcbiAgICogdGhlIGxpYnJhcnkgYXJlIGNvbXBpbGVkIHRvZ2V0aGVyIGJ5IHRoZSBjbG9zdXJlIGNvbXBpbGVyLlxuICAgKiBAcGFyYW0geyFDZXNpdW0uU2NlbmV9IHNjZW5lIENlc2l1bSBzY2VuZS5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBhcGlcbiAgICovXG4gIGNvbnN0cnVjdG9yKHNjZW5lKSB7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuXG4gICAgLyoqXG4gICAgICogQmluZCBvbmNlIHRvIGhhdmUgYSB1bmlxdWUgZnVuY3Rpb24gZm9yIHVzaW5nIGFzIGEgbGlzdGVuZXJcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24ob2wuc291cmNlLlZlY3Rvci5FdmVudCl9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmJvdW5kT25SZW1vdmVPckNsZWFyRmVhdHVyZUxpc3RlbmVyXyA9IHRoaXMub25SZW1vdmVPckNsZWFyRmVhdHVyZV8uYmluZCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDZXNpdW0uQ2FydGVzaWFuM31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZGVmYXVsdEJpbGxib2FyZEV5ZU9mZnNldF8gPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoMCwgMCwgMTApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2wuc291cmNlLlZlY3Rvci5FdmVudH0gZXZ0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvblJlbW92ZU9yQ2xlYXJGZWF0dXJlXyhldnQpIHtcbiAgICBjb25zdCBzb3VyY2UgPSBldnQudGFyZ2V0O1xuICAgIGNvbnNvbGUuYXNzZXJ0KHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlVmVjdG9yKTtcblxuICAgIGNvbnN0IGNhbmNlbGxlcnMgPSBvbGNzVXRpbC5vYmooc291cmNlKVsnb2xjc19jYW5jZWxsZXJzJ107XG4gICAgaWYgKGNhbmNlbGxlcnMpIHtcbiAgICAgIGNvbnN0IGZlYXR1cmUgPSBldnQuZmVhdHVyZTtcbiAgICAgIGlmIChmZWF0dXJlKSB7XG4gICAgICAgIC8vIHJlbW92ZVxuICAgICAgICBjb25zdCBpZCA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgICAgY29uc3QgY2FuY2VsbGVyID0gY2FuY2VsbGVyc1tpZF07XG4gICAgICAgIGlmIChjYW5jZWxsZXIpIHtcbiAgICAgICAgICBjYW5jZWxsZXIoKTtcbiAgICAgICAgICBkZWxldGUgY2FuY2VsbGVyc1tpZF07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNsZWFyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNhbmNlbGxlcnMpIHtcbiAgICAgICAgICBpZiAoY2FuY2VsbGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBjYW5jZWxsZXJzW2tleV0oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb2xjc1V0aWwub2JqKHNvdXJjZSlbJ29sY3NfY2FuY2VsbGVycyddID0ge307XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuVmVjdG9yfG9sLmxheWVyLkltYWdlfSBsYXllclxuICAgKiBAcGFyYW0geyFvbC5GZWF0dXJlfSBmZWF0dXJlIE9wZW5MYXllcnMgZmVhdHVyZS5cbiAgICogQHBhcmFtIHshQ2VzaXVtLlByaW1pdGl2ZXxDZXNpdW0uTGFiZWx8Q2VzaXVtLkJpbGxib2FyZH0gcHJpbWl0aXZlXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHNldFJlZmVyZW5jZUZvclBpY2tpbmcobGF5ZXIsIGZlYXR1cmUsIHByaW1pdGl2ZSkge1xuICAgIHByaW1pdGl2ZS5vbExheWVyID0gbGF5ZXI7XG4gICAgcHJpbWl0aXZlLm9sRmVhdHVyZSA9IGZlYXR1cmU7XG4gIH1cblxuICAvKipcbiAgICogQmFzaWNzIHByaW1pdGl2ZSBjcmVhdGlvbiB1c2luZyBhIGNvbG9yIGF0dHJpYnV0ZS5cbiAgICogTm90ZSB0aGF0IENlc2l1bSBoYXMgJ2ludGVyaW9yJyBhbmQgb3V0bGluZSBnZW9tZXRyaWVzLlxuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuXG4gICAqIEBwYXJhbSB7IW9sLmdlb20uR2VvbWV0cnl9IG9sR2VvbWV0cnkgT3BlbkxheWVycyBnZW9tZXRyeS5cbiAgICogQHBhcmFtIHshQ2VzaXVtLkdlb21ldHJ5fSBnZW9tZXRyeVxuICAgKiBAcGFyYW0geyFDZXNpdW0uQ29sb3J9IGNvbG9yXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2xpbmVXaWR0aFxuICAgKiBAcmV0dXJuIHtDZXNpdW0uUHJpbWl0aXZlfVxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBjcmVhdGVDb2xvcmVkUHJpbWl0aXZlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBnZW9tZXRyeSwgY29sb3IsIG9wdF9saW5lV2lkdGgpIHtcbiAgICBjb25zdCBjcmVhdGVJbnN0YW5jZSA9IGZ1bmN0aW9uKGdlb21ldHJ5LCBjb2xvcikge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgQ2VzaXVtLkdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgICAgICAvLyBhbHdheXMgdXBkYXRlIENlc2l1bSBleHRlcm5zIGJlZm9yZSBhZGRpbmcgYSBwcm9wZXJ0eVxuICAgICAgICBnZW9tZXRyeVxuICAgICAgfSk7XG4gICAgICBpZiAoY29sb3IgJiYgIShjb2xvciBpbnN0YW5jZW9mIENlc2l1bS5JbWFnZU1hdGVyaWFsUHJvcGVydHkpKSB7XG4gICAgICAgIGluc3RhbmNlLmF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgY29sb3I6IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuZnJvbUNvbG9yKGNvbG9yKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgLy8gYWx3YXlzIHVwZGF0ZSBDZXNpdW0gZXh0ZXJucyBiZWZvcmUgYWRkaW5nIGEgcHJvcGVydHlcbiAgICAgIGZsYXQ6IHRydWUsIC8vIHdvcmsgd2l0aCBhbGwgZ2VvbWV0cmllc1xuICAgICAgcmVuZGVyU3RhdGU6IHtcbiAgICAgICAgZGVwdGhUZXN0OiB7XG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChvcHRfbGluZVdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghb3B0aW9ucy5yZW5kZXJTdGF0ZSkge1xuICAgICAgICBvcHRpb25zLnJlbmRlclN0YXRlID0ge307XG4gICAgICB9XG4gICAgICBvcHRpb25zLnJlbmRlclN0YXRlLmxpbmVXaWR0aCA9IG9wdF9saW5lV2lkdGg7XG4gICAgfVxuXG4gICAgY29uc3QgaW5zdGFuY2VzID0gY3JlYXRlSW5zdGFuY2UoZ2VvbWV0cnksIGNvbG9yKTtcblxuICAgIGNvbnN0IGhlaWdodFJlZmVyZW5jZSA9IHRoaXMuZ2V0SGVpZ2h0UmVmZXJlbmNlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5KTtcblxuICAgIGxldCBwcmltaXRpdmU7XG5cbiAgICBpZiAoaGVpZ2h0UmVmZXJlbmNlID09PSBDZXNpdW0uSGVpZ2h0UmVmZXJlbmNlLkNMQU1QX1RPX0dST1VORCkge1xuICAgICAgY29uc3QgY3RvciA9IGluc3RhbmNlcy5nZW9tZXRyeS5jb25zdHJ1Y3RvcjtcbiAgICAgIGlmIChjdG9yICYmICFjdG9yWydjcmVhdGVTaGFkb3dWb2x1bWUnXSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uR3JvdW5kUHJpbWl0aXZlKHtcbiAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IGluc3RhbmNlc1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlKHtcbiAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IGluc3RhbmNlc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbG9yIGluc3RhbmNlb2YgQ2VzaXVtLkltYWdlTWF0ZXJpYWxQcm9wZXJ0eSkge1xuICAgICAgY29uc3QgZGF0YVVyaSA9IGNvbG9yLmltYWdlLmdldFZhbHVlKCkudG9EYXRhVVJMKCk7XG5cbiAgICAgIHByaW1pdGl2ZS5hcHBlYXJhbmNlID0gbmV3IENlc2l1bS5NYXRlcmlhbEFwcGVhcmFuY2Uoe1xuICAgICAgICBmbGF0OiB0cnVlLFxuICAgICAgICByZW5kZXJTdGF0ZToge1xuICAgICAgICAgIGRlcHRoVGVzdDoge1xuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbWF0ZXJpYWw6IG5ldyBDZXNpdW0uTWF0ZXJpYWwoe1xuICAgICAgICAgIGZhYnJpYzoge1xuICAgICAgICAgICAgdHlwZTogJ0ltYWdlJyxcbiAgICAgICAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgICAgICAgIGltYWdlOiBkYXRhVXJpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByaW1pdGl2ZS5hcHBlYXJhbmNlID0gbmV3IENlc2l1bS5QZXJJbnN0YW5jZUNvbG9yQXBwZWFyYW5jZShvcHRpb25zKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFJlZmVyZW5jZUZvclBpY2tpbmcobGF5ZXIsIGZlYXR1cmUsIHByaW1pdGl2ZSk7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGZpbGwgb3Igc3Ryb2tlIGNvbG9yIGZyb20gYSBwbGFpbiBvbCBzdHlsZS5cbiAgICogQHBhcmFtIHshb2wuc3R5bGUuU3R5bGV8b2wuc3R5bGUuVGV4dH0gc3R5bGVcbiAgICogQHBhcmFtIHtib29sZWFufSBvdXRsaW5lXG4gICAqIEByZXR1cm4geyFDZXNpdW0uQ29sb3J9XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGV4dHJhY3RDb2xvckZyb21PbFN0eWxlKHN0eWxlLCBvdXRsaW5lKSB7XG4gICAgY29uc3QgZmlsbENvbG9yID0gc3R5bGUuZ2V0RmlsbCgpID8gc3R5bGUuZ2V0RmlsbCgpLmdldENvbG9yKCkgOiBudWxsO1xuICAgIGNvbnN0IHN0cm9rZUNvbG9yID0gc3R5bGUuZ2V0U3Ryb2tlKCkgPyBzdHlsZS5nZXRTdHJva2UoKS5nZXRDb2xvcigpIDogbnVsbDtcblxuICAgIGxldCBvbENvbG9yID0gJ2JsYWNrJztcbiAgICBpZiAoc3Ryb2tlQ29sb3IgJiYgb3V0bGluZSkge1xuICAgICAgb2xDb2xvciA9IHN0cm9rZUNvbG9yO1xuICAgIH0gZWxzZSBpZiAoZmlsbENvbG9yKSB7XG4gICAgICBvbENvbG9yID0gZmlsbENvbG9yO1xuICAgIH1cblxuICAgIHJldHVybiBvbGNzQ29yZS5jb252ZXJ0Q29sb3JUb0Nlc2l1bShvbENvbG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHdpZHRoIG9mIHN0cm9rZSBmcm9tIGEgcGxhaW4gb2wgc3R5bGUuXG4gICAqIEBwYXJhbSB7IW9sLnN0eWxlLlN0eWxlfG9sLnN0eWxlLlRleHR9IHN0eWxlXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZXh0cmFjdExpbmVXaWR0aEZyb21PbFN0eWxlKHN0eWxlKSB7XG4gICAgLy8gSGFuZGxpbmcgb2YgbGluZSB3aWR0aCBXZWJHTCBsaW1pdGF0aW9ucyBpcyBoYW5kbGVkIGJ5IENlc2l1bS5cbiAgICBjb25zdCB3aWR0aCA9IHN0eWxlLmdldFN0cm9rZSgpID8gc3R5bGUuZ2V0U3Ryb2tlKCkuZ2V0V2lkdGgoKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gd2lkdGggIT09IHVuZGVmaW5lZCA/IHdpZHRoIDogMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBwcmltaXRpdmUgY29sbGVjdGlvbiBvdXQgb2YgdHdvIENlc2l1bSBnZW9tZXRyaWVzLlxuICAgKiBPbmx5IHRoZSBPcGVuTGF5ZXJzIHN0eWxlIGNvbG9ycyB3aWxsIGJlIHVzZWQuXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuVmVjdG9yfG9sLmxheWVyLkltYWdlfSBsYXllclxuICAgKiBAcGFyYW0geyFvbC5GZWF0dXJlfSBmZWF0dXJlIE9wZW5MYXllcnMgZmVhdHVyZS5cbiAgICogQHBhcmFtIHshb2wuZ2VvbS5HZW9tZXRyeX0gb2xHZW9tZXRyeSBPcGVuTGF5ZXJzIGdlb21ldHJ5LlxuICAgKiBAcGFyYW0geyFDZXNpdW0uR2VvbWV0cnl9IGZpbGxHZW9tZXRyeVxuICAgKiBAcGFyYW0geyFDZXNpdW0uR2VvbWV0cnl9IG91dGxpbmVHZW9tZXRyeVxuICAgKiBAcGFyYW0geyFvbC5zdHlsZS5TdHlsZX0gb2xTdHlsZVxuICAgKiBAcmV0dXJuIHshQ2VzaXVtLlByaW1pdGl2ZUNvbGxlY3Rpb259XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHdyYXBGaWxsQW5kT3V0bGluZUdlb21ldHJpZXMobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIGZpbGxHZW9tZXRyeSwgb3V0bGluZUdlb21ldHJ5LCBvbFN0eWxlKSB7XG4gICAgY29uc3QgZmlsbENvbG9yID0gdGhpcy5leHRyYWN0Q29sb3JGcm9tT2xTdHlsZShvbFN0eWxlLCBmYWxzZSk7XG4gICAgY29uc3Qgb3V0bGluZUNvbG9yID0gdGhpcy5leHRyYWN0Q29sb3JGcm9tT2xTdHlsZShvbFN0eWxlLCB0cnVlKTtcblxuICAgIGNvbnN0IHByaW1pdGl2ZXMgPSBuZXcgQ2VzaXVtLlByaW1pdGl2ZUNvbGxlY3Rpb24oKTtcbiAgICBpZiAob2xTdHlsZS5nZXRGaWxsKCkpIHtcbiAgICAgIGNvbnN0IHAxID0gdGhpcy5jcmVhdGVDb2xvcmVkUHJpbWl0aXZlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LFxuICAgICAgICAgIGZpbGxHZW9tZXRyeSwgZmlsbENvbG9yKTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KCEhcDEpO1xuICAgICAgcHJpbWl0aXZlcy5hZGQocDEpO1xuICAgIH1cblxuICAgIGlmIChvbFN0eWxlLmdldFN0cm9rZSgpICYmIG91dGxpbmVHZW9tZXRyeSkge1xuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmV4dHJhY3RMaW5lV2lkdGhGcm9tT2xTdHlsZShvbFN0eWxlKTtcbiAgICAgIGNvbnN0IHAyID0gdGhpcy5jcmVhdGVDb2xvcmVkUHJpbWl0aXZlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LFxuICAgICAgICAgIG91dGxpbmVHZW9tZXRyeSwgb3V0bGluZUNvbG9yLCB3aWR0aCk7XG4gICAgICBpZiAocDIpIHtcbiAgICAgICAgLy8gU29tZSBvdXRsaW5lIGdlb21ldHJpZXMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgQ2VzaXVtIGluIGNsYW1wIHRvIGdyb3VuZFxuICAgICAgICAvLyBtb2RlLiBUaGVzZSBwcmltaXRpdmVzIGFyZSBza2lwcGVkLlxuICAgICAgICBwcmltaXRpdmVzLmFkZChwMik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByaW1pdGl2ZXM7XG4gIH1cblxuICAvLyBHZW9tZXRyeSBjb252ZXJ0ZXJzXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBDZXNpdW0gcHJpbWl0aXZlIGlmIHN0eWxlIGhhcyBhIHRleHQgY29tcG9uZW50LlxuICAgKiBFdmVudHVhbGx5IHJldHVybiBhIFByaW1pdGl2ZUNvbGxlY3Rpb24gaW5jbHVkaW5nIGN1cnJlbnQgcHJpbWl0aXZlLlxuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuLlxuICAgKiBAcGFyYW0geyFvbC5nZW9tLkdlb21ldHJ5fSBnZW9tZXRyeVxuICAgKiBAcGFyYW0geyFvbC5zdHlsZS5TdHlsZX0gc3R5bGVcbiAgICogQHBhcmFtIHshQ2VzaXVtLlByaW1pdGl2ZX0gcHJpbWl0aXZlIGN1cnJlbnQgcHJpbWl0aXZlXG4gICAqIEByZXR1cm4geyFDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbn1cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgYWRkVGV4dFN0eWxlKGxheWVyLCBmZWF0dXJlLCBnZW9tZXRyeSwgc3R5bGUsIHByaW1pdGl2ZSkge1xuICAgIGxldCBwcmltaXRpdmVzO1xuICAgIGlmICghKHByaW1pdGl2ZSBpbnN0YW5jZW9mIENlc2l1bS5QcmltaXRpdmVDb2xsZWN0aW9uKSkge1xuICAgICAgcHJpbWl0aXZlcyA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbigpO1xuICAgICAgcHJpbWl0aXZlcy5hZGQocHJpbWl0aXZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJpbWl0aXZlcyA9IHByaW1pdGl2ZTtcbiAgICB9XG5cbiAgICBpZiAoIXN0eWxlLmdldFRleHQoKSkge1xuICAgICAgcmV0dXJuIHByaW1pdGl2ZXM7XG4gICAgfVxuXG4gICAgY29uc3QgdGV4dCA9IC8qKiBAdHlwZSB7IW9sLnN0eWxlLlRleHR9ICovIChzdHlsZS5nZXRUZXh0KCkpO1xuICAgIGNvbnN0IGxhYmVsID0gdGhpcy5vbEdlb21ldHJ5NDMyNlRleHRQYXJ0VG9DZXNpdW0obGF5ZXIsIGZlYXR1cmUsIGdlb21ldHJ5LFxuICAgICAgICB0ZXh0KTtcbiAgICBpZiAobGFiZWwpIHtcbiAgICAgIHByaW1pdGl2ZXMuYWRkKGxhYmVsKTtcbiAgICB9XG4gICAgcmV0dXJuIHByaW1pdGl2ZXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgYmlsbGJvYXJkIHRvIGEgQ2VzaXVtLkJpbGxib2FyZENvbGxlY3Rpb24uXG4gICAqIE92ZXJyaWRpbmcgdGhpcyB3cmFwcGVyIGFsbG93cyBtYW5pcHVsYXRpbmcgdGhlIGJpbGxib2FyZCBvcHRpb25zLlxuICAgKiBAcGFyYW0geyFDZXNpdW0uQmlsbGJvYXJkQ29sbGVjdGlvbn0gYmlsbGJvYXJkc1xuICAgKiBAcGFyYW0geyFDZXNpdW0ub3B0aW9uc0JpbGxib2FyZENvbGxlY3Rpb25BZGR9IGJiT3B0aW9uc1xuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuXG4gICAqIEBwYXJhbSB7IW9sLmdlb20uR2VvbWV0cnl9IGdlb21ldHJ5XG4gICAqIEBwYXJhbSB7IW9sLnN0eWxlLlN0eWxlfSBzdHlsZVxuICAgKiBAcmV0dXJuIHshQ2VzaXVtLkJpbGxib2FyZH0gbmV3bHkgY3JlYXRlZCBiaWxsYm9hcmRcbiAgICogQGFwaVxuICAgKi9cbiAgY3NBZGRCaWxsYm9hcmQoYmlsbGJvYXJkcywgYmJPcHRpb25zLCBsYXllciwgZmVhdHVyZSwgZ2VvbWV0cnksIHN0eWxlKSB7XG4gICAgaWYgKCFiYk9wdGlvbnMuZXllT2Zmc2V0KSB7XG4gICAgICBiYk9wdGlvbnMuZXllT2Zmc2V0ID0gdGhpcy5kZWZhdWx0QmlsbGJvYXJkRXllT2Zmc2V0XztcbiAgICB9XG4gICAgY29uc3QgYmIgPSBiaWxsYm9hcmRzLmFkZChiYk9wdGlvbnMpO1xuICAgIHRoaXMuc2V0UmVmZXJlbmNlRm9yUGlja2luZyhsYXllciwgZmVhdHVyZSwgYmIpO1xuICAgIHJldHVybiBiYjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIE9wZW5MYXllcnMgY2lyY2xlIGdlb21ldHJ5IHRvIENlc2l1bS5cbiAgICogQHBhcmFtIHtvbC5sYXllci5WZWN0b3J8b2wubGF5ZXIuSW1hZ2V9IGxheWVyXG4gICAqIEBwYXJhbSB7IW9sLkZlYXR1cmV9IGZlYXR1cmUgT3BlbkxheWVycyBmZWF0dXJlLi5cbiAgICogQHBhcmFtIHshb2wuZ2VvbS5DaXJjbGV9IG9sR2VvbWV0cnkgT3BlbkxheWVycyBjaXJjbGUgZ2VvbWV0cnkuXG4gICAqIEBwYXJhbSB7IW9sLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uXG4gICAqIEBwYXJhbSB7IW9sLnN0eWxlLlN0eWxlfSBvbFN0eWxlXG4gICAqIEByZXR1cm4geyFDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbn0gcHJpbWl0aXZlc1xuICAgKiBAYXBpXG4gICAqL1xuICBvbENpcmNsZUdlb21ldHJ5VG9DZXNpdW0obGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIHByb2plY3Rpb24sIG9sU3R5bGUpIHtcblxuICAgIG9sR2VvbWV0cnkgPSBvbGNzQ29yZS5vbEdlb21ldHJ5Q2xvbmVUbzQzMjYob2xHZW9tZXRyeSwgcHJvamVjdGlvbik7XG4gICAgY29uc29sZS5hc3NlcnQob2xHZW9tZXRyeS5nZXRUeXBlKCkgPT0gJ0NpcmNsZScpO1xuXG4gICAgLy8gb2wuQ29vcmRpbmF0ZVxuICAgIGxldCBjZW50ZXIgPSBvbEdlb21ldHJ5LmdldENlbnRlcigpO1xuICAgIGNvbnN0IGhlaWdodCA9IGNlbnRlci5sZW5ndGggPT0gMyA/IGNlbnRlclsyXSA6IDAuMDtcbiAgICBsZXQgcG9pbnQgPSBjZW50ZXIuc2xpY2UoKTtcbiAgICBwb2ludFswXSArPSBvbEdlb21ldHJ5LmdldFJhZGl1cygpO1xuXG4gICAgLy8gQ2VzaXVtXG4gICAgY2VudGVyID0gb2xjc0NvcmUub2w0MzI2Q29vcmRpbmF0ZVRvQ2VzaXVtQ2FydGVzaWFuKGNlbnRlcik7XG4gICAgcG9pbnQgPSBvbGNzQ29yZS5vbDQzMjZDb29yZGluYXRlVG9DZXNpdW1DYXJ0ZXNpYW4ocG9pbnQpO1xuXG4gICAgLy8gQWNjdXJhdGUgY29tcHV0YXRpb24gb2Ygc3RyYWlnaHQgZGlzdGFuY2VcbiAgICBjb25zdCByYWRpdXMgPSBDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShjZW50ZXIsIHBvaW50KTtcblxuICAgIGNvbnN0IGZpbGxHZW9tZXRyeSA9IG5ldyBDZXNpdW0uQ2lyY2xlR2VvbWV0cnkoe1xuICAgICAgLy8gYWx3YXlzIHVwZGF0ZSBDZXNpdW0gZXh0ZXJucyBiZWZvcmUgYWRkaW5nIGEgcHJvcGVydHlcbiAgICAgIGNlbnRlcixcbiAgICAgIHJhZGl1cyxcbiAgICAgIGhlaWdodFxuICAgIH0pO1xuXG4gICAgbGV0IG91dGxpbmVQcmltaXRpdmUsIG91dGxpbmVHZW9tZXRyeTtcbiAgICBpZiAodGhpcy5nZXRIZWlnaHRSZWZlcmVuY2UobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnkpID09PSBDZXNpdW0uSGVpZ2h0UmVmZXJlbmNlLkNMQU1QX1RPX0dST1VORCkge1xuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmV4dHJhY3RMaW5lV2lkdGhGcm9tT2xTdHlsZShvbFN0eWxlKTtcbiAgICAgIGlmICh3aWR0aCkge1xuICAgICAgICBjb25zdCBjaXJjbGVQb2x5Z29uID0gb2xDcmVhdGVDaXJjdWxhclBvbHlnb24ob2xHZW9tZXRyeS5nZXRDZW50ZXIoKSwgcmFkaXVzKTtcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gb2xjc0NvcmUub2w0MzI2Q29vcmRpbmF0ZUFycmF5VG9Dc0NhcnRlc2lhbnMoY2lyY2xlUG9seWdvbi5nZXRMaW5lYXJSaW5nKDApLmdldENvb3JkaW5hdGVzKCkpO1xuICAgICAgICBpZiAoIWlzR3JvdW5kUG9seWxpbmVQcmltaXRpdmVTdXBwb3J0ZWQodGhpcy5zY2VuZSkpIHtcbiAgICAgICAgICBjb25zdCBjb2xvciA9IHRoaXMuZXh0cmFjdENvbG9yRnJvbU9sU3R5bGUob2xTdHlsZSwgdHJ1ZSk7XG4gICAgICAgICAgb3V0bGluZVByaW1pdGl2ZSA9IHRoaXMuY3JlYXRlU3RhY2tlZEdyb3VuZENvcnJpZG9ycyhsYXllciwgZmVhdHVyZSwgd2lkdGgsIGNvbG9yLCBwb3NpdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dGxpbmVQcmltaXRpdmUgPSBuZXcgQ2VzaXVtLkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlKHtcbiAgICAgICAgICAgIGdlb21ldHJ5SW5zdGFuY2VzOiBuZXcgQ2VzaXVtLkdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgICAgICAgICAgICBnZW9tZXRyeTogbmV3IENlc2l1bS5Hcm91bmRQb2x5bGluZUdlb21ldHJ5KHtwb3NpdGlvbnMsIHdpZHRofSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGFwcGVhcmFuY2U6IG5ldyBDZXNpdW0uUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2Uoe1xuICAgICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5vbFN0eWxlVG9DZXNpdW0oZmVhdHVyZSwgb2xTdHlsZSwgdHJ1ZSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNsYXNzaWZpY2F0aW9uVHlwZTogQ2VzaXVtLkNsYXNzaWZpY2F0aW9uVHlwZS5URVJSQUlOLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG91dGxpbmVQcmltaXRpdmUucmVhZHlQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRSZWZlcmVuY2VGb3JQaWNraW5nKGxheWVyLCBmZWF0dXJlLCBvdXRsaW5lUHJpbWl0aXZlLl9wcmltaXRpdmUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dGxpbmVHZW9tZXRyeSA9IG5ldyBDZXNpdW0uQ2lyY2xlT3V0bGluZUdlb21ldHJ5KHtcbiAgICAgICAgLy8gYWx3YXlzIHVwZGF0ZSBDZXNpdW0gZXh0ZXJucyBiZWZvcmUgYWRkaW5nIGEgcHJvcGVydHlcbiAgICAgICAgY2VudGVyLFxuICAgICAgICByYWRpdXMsXG4gICAgICAgIGV4dHJ1ZGVkSGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgIGhlaWdodFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJpbWl0aXZlcyA9IHRoaXMud3JhcEZpbGxBbmRPdXRsaW5lR2VvbWV0cmllcyhcbiAgICAgICAgbGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIGZpbGxHZW9tZXRyeSwgb3V0bGluZUdlb21ldHJ5LCBvbFN0eWxlKTtcblxuICAgIGlmIChvdXRsaW5lUHJpbWl0aXZlKSB7XG4gICAgICBwcmltaXRpdmVzLmFkZChvdXRsaW5lUHJpbWl0aXZlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYWRkVGV4dFN0eWxlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBvbFN0eWxlLCBwcmltaXRpdmVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuLlxuICAgKiBAcGFyYW0geyFudW1iZXJ9IHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgbGluZS5cbiAgICogQHBhcmFtIHshQ2VzaXVtLkNvbG9yfSBjb2xvciBUaGUgY29sb3Igb2YgdGhlIGxpbmUuXG4gICAqIEBwYXJhbSB7IUFycmF5PENlc2l1bS5DYXJ0ZXNpYW4zPnxBcnJheTxBcnJheTxDZXNpdW0uQ2FydGVzaWFuMz4+fSBwb3NpdGlvbnMgVGhlIHZlcnRpY2VzIG9mIHRoZSBsaW5lKHMpLlxuICAgKiBAcmV0dXJuIHshQ2VzaXVtLkdyb3VuZFByaW1pdGl2ZX0gcHJpbWl0aXZlXG4gICAqL1xuICBjcmVhdGVTdGFja2VkR3JvdW5kQ29ycmlkb3JzKGxheWVyLCBmZWF0dXJlLCB3aWR0aCwgY29sb3IsIHBvc2l0aW9ucykge1xuICAgIC8vIENvbnZlcnQgcG9zaXRpb25zIHRvIGFuIEFycmF5IGlmIGl0IGlzbid0XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBvc2l0aW9uc1swXSkpIHtcbiAgICAgIHBvc2l0aW9ucyA9IFtwb3NpdGlvbnNdO1xuICAgIH1cbiAgICB3aWR0aCA9IE1hdGgubWF4KDMsIHdpZHRoKTsgLy8gQSA8M3B4IHdpZHRoIGlzIHRvbyBzbWFsbCBmb3IgZ3JvdW5kIHByaW1pdGl2ZXNcbiAgICBjb25zdCBnZW9tZXRyeUluc3RhbmNlcyA9IFtdO1xuICAgIGxldCBwcmV2aW91c0Rpc3RhbmNlID0gMDtcbiAgICAvLyBBIHN0YWNrIG9mIGdyb3VuZCBsaW5lcyB3aXRoIGluY3JlYXNpbmcgd2lkdGggKGluIG1ldGVycykgYXJlIGNyZWF0ZWQuXG4gICAgLy8gT25seSBvbmUgb2YgdGhlc2UgbGluZXMgaXMgZGlzcGxheWVkIGF0IGFueSB0aW1lIGdpdmluZyBhIGZlZWxpbmcgb2YgY29udGludWl0eS5cbiAgICAvLyBUaGUgdmFsdWVzIGZvciB0aGUgZGlzdGFuY2UgYW5kIHdpZHRoIGZhY3RvciBhcmUgbW9yZSBvciBsZXNzIGFyYml0cmFyeS5cbiAgICAvLyBBcHBsaWNhdGlvbnMgY2FuIG92ZXJyaWRlIHRoaXMgbG9naWNzIGJ5IHN1YmNsYXNzaW5nIHRoZSBGZWF0dXJlQ29udmVydGVyIGNsYXNzLlxuICAgIGZvciAoY29uc3QgZGlzdGFuY2Ugb2YgWzEwMDAsIDQwMDAsIDE2MDAwLCA2NDAwMCwgMjU0MDAwLCAxMDAwMDAwLCAxMDAwMDAwMF0pIHtcbiAgICAgIHdpZHRoICo9IDIuMTQ7XG4gICAgICBjb25zdCBnZW9tZXRyeU9wdGlvbnMgPSB7XG4gICAgICAgIC8vIGFsd2F5cyB1cGRhdGUgQ2VzaXVtIGV4dGVybnMgYmVmb3JlIGFkZGluZyBhIHByb3BlcnR5XG4gICAgICAgIHdpZHRoLFxuICAgICAgICB2ZXJ0ZXhGb3JtYXQ6IENlc2l1bS5WZXJ0ZXhGb3JtYXQuUE9TSVRJT05fT05MWVxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3QgbGluZVBvc2l0aW9ucyBvZiBwb3NpdGlvbnMpIHtcbiAgICAgICAgZ2VvbWV0cnlPcHRpb25zLnBvc2l0aW9ucyA9IGxpbmVQb3NpdGlvbnM7XG4gICAgICAgIGdlb21ldHJ5SW5zdGFuY2VzLnB1c2gobmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgICAgICBnZW9tZXRyeTogbmV3IENlc2l1bS5Db3JyaWRvckdlb21ldHJ5KGdlb21ldHJ5T3B0aW9ucyksXG4gICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgY29sb3I6IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuZnJvbUNvbG9yKGNvbG9yKSxcbiAgICAgICAgICAgIGRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbjogbmV3IENlc2l1bS5EaXN0YW5jZURpc3BsYXlDb25kaXRpb25HZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlKHByZXZpb3VzRGlzdGFuY2UsIGRpc3RhbmNlIC0gMSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICAgIHByZXZpb3VzRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDZXNpdW0uR3JvdW5kUHJpbWl0aXZlKHtcbiAgICAgIC8vIGFsd2F5cyB1cGRhdGUgQ2VzaXVtIGV4dGVybnMgYmVmb3JlIGFkZGluZyBhIHByb3BlcnR5XG4gICAgICBnZW9tZXRyeUluc3RhbmNlc1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYW4gT3BlbkxheWVycyBsaW5lIHN0cmluZyBnZW9tZXRyeSB0byBDZXNpdW0uXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuVmVjdG9yfG9sLmxheWVyLkltYWdlfSBsYXllclxuICAgKiBAcGFyYW0geyFvbC5GZWF0dXJlfSBmZWF0dXJlIE9wZW5MYXllcnMgZmVhdHVyZS4uXG4gICAqIEBwYXJhbSB7IW9sLmdlb20uTGluZVN0cmluZ30gb2xHZW9tZXRyeSBPcGVuTGF5ZXJzIGxpbmUgc3RyaW5nIGdlb21ldHJ5LlxuICAgKiBAcGFyYW0geyFvbC5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvblxuICAgKiBAcGFyYW0geyFvbC5zdHlsZS5TdHlsZX0gb2xTdHlsZVxuICAgKiBAcmV0dXJuIHshQ2VzaXVtLlByaW1pdGl2ZUNvbGxlY3Rpb259IHByaW1pdGl2ZXNcbiAgICogQGFwaVxuICAgKi9cbiAgb2xMaW5lU3RyaW5nR2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgb2xHZW9tZXRyeSwgcHJvamVjdGlvbiwgb2xTdHlsZSkge1xuXG4gICAgb2xHZW9tZXRyeSA9IG9sY3NDb3JlLm9sR2VvbWV0cnlDbG9uZVRvNDMyNihvbEdlb21ldHJ5LCBwcm9qZWN0aW9uKTtcbiAgICBjb25zb2xlLmFzc2VydChvbEdlb21ldHJ5LmdldFR5cGUoKSA9PSAnTGluZVN0cmluZycpO1xuXG4gICAgY29uc3QgcG9zaXRpb25zID0gb2xjc0NvcmUub2w0MzI2Q29vcmRpbmF0ZUFycmF5VG9Dc0NhcnRlc2lhbnMob2xHZW9tZXRyeS5nZXRDb29yZGluYXRlcygpKTtcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuZXh0cmFjdExpbmVXaWR0aEZyb21PbFN0eWxlKG9sU3R5bGUpO1xuXG4gICAgbGV0IG91dGxpbmVQcmltaXRpdmU7XG4gICAgY29uc3QgaGVpZ2h0UmVmZXJlbmNlID0gdGhpcy5nZXRIZWlnaHRSZWZlcmVuY2UobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnkpO1xuXG4gICAgaWYgKGhlaWdodFJlZmVyZW5jZSA9PT0gQ2VzaXVtLkhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQgJiYgIWlzR3JvdW5kUG9seWxpbmVQcmltaXRpdmVTdXBwb3J0ZWQodGhpcy5zY2VuZSkpIHtcbiAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5leHRyYWN0Q29sb3JGcm9tT2xTdHlsZShvbFN0eWxlLCB0cnVlKTtcbiAgICAgIG91dGxpbmVQcmltaXRpdmUgPSB0aGlzLmNyZWF0ZVN0YWNrZWRHcm91bmRDb3JyaWRvcnMobGF5ZXIsIGZlYXR1cmUsIHdpZHRoLCBjb2xvciwgcG9zaXRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYXBwZWFyYW5jZSA9IG5ldyBDZXNpdW0uUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2Uoe1xuICAgICAgICAvLyBhbHdheXMgdXBkYXRlIENlc2l1bSBleHRlcm5zIGJlZm9yZSBhZGRpbmcgYSBwcm9wZXJ0eVxuICAgICAgICBtYXRlcmlhbDogdGhpcy5vbFN0eWxlVG9DZXNpdW0oZmVhdHVyZSwgb2xTdHlsZSwgdHJ1ZSlcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZ2VvbWV0cnlPcHRpb25zID0ge1xuICAgICAgICAvLyBhbHdheXMgdXBkYXRlIENlc2l1bSBleHRlcm5zIGJlZm9yZSBhZGRpbmcgYSBwcm9wZXJ0eVxuICAgICAgICBwb3NpdGlvbnMsXG4gICAgICAgIHdpZHRoLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHByaW1pdGl2ZU9wdGlvbnMgPSB7XG4gICAgICAgIC8vIGFsd2F5cyB1cGRhdGUgQ2VzaXVtIGV4dGVybnMgYmVmb3JlIGFkZGluZyBhIHByb3BlcnR5XG4gICAgICAgIGFwcGVhcmFuY2VcbiAgICAgIH07XG4gICAgICBpZiAoaGVpZ2h0UmVmZXJlbmNlID09PSBDZXNpdW0uSGVpZ2h0UmVmZXJlbmNlLkNMQU1QX1RPX0dST1VORCkge1xuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBDZXNpdW0uR3JvdW5kUG9seWxpbmVHZW9tZXRyeShnZW9tZXRyeU9wdGlvbnMpO1xuICAgICAgICBwcmltaXRpdmVPcHRpb25zLmdlb21ldHJ5SW5zdGFuY2VzID0gbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgICAgICBnZW9tZXRyeVxuICAgICAgICB9KSxcbiAgICAgICAgb3V0bGluZVByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uR3JvdW5kUG9seWxpbmVQcmltaXRpdmUocHJpbWl0aXZlT3B0aW9ucyk7XG4gICAgICAgIG91dGxpbmVQcmltaXRpdmUucmVhZHlQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0UmVmZXJlbmNlRm9yUGlja2luZyhsYXllciwgZmVhdHVyZSwgb3V0bGluZVByaW1pdGl2ZS5fcHJpbWl0aXZlKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW9tZXRyeU9wdGlvbnMudmVydGV4Rm9ybWF0ID0gYXBwZWFyYW5jZS52ZXJ0ZXhGb3JtYXQ7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IENlc2l1bS5Qb2x5bGluZUdlb21ldHJ5KGdlb21ldHJ5T3B0aW9ucyk7XG4gICAgICAgIHByaW1pdGl2ZU9wdGlvbnMuZ2VvbWV0cnlJbnN0YW5jZXMgPSBuZXcgQ2VzaXVtLkdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgICAgICAgIGdlb21ldHJ5XG4gICAgICAgIH0pLFxuICAgICAgICBvdXRsaW5lUHJpbWl0aXZlID0gbmV3IENlc2l1bS5QcmltaXRpdmUocHJpbWl0aXZlT3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRSZWZlcmVuY2VGb3JQaWNraW5nKGxheWVyLCBmZWF0dXJlLCBvdXRsaW5lUHJpbWl0aXZlKTtcblxuICAgIHJldHVybiB0aGlzLmFkZFRleHRTdHlsZShsYXllciwgZmVhdHVyZSwgb2xHZW9tZXRyeSwgb2xTdHlsZSwgb3V0bGluZVByaW1pdGl2ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhbiBPcGVuTGF5ZXJzIHBvbHlnb24gZ2VvbWV0cnkgdG8gQ2VzaXVtLlxuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuLlxuICAgKiBAcGFyYW0geyFvbC5nZW9tLlBvbHlnb259IG9sR2VvbWV0cnkgT3BlbkxheWVycyBwb2x5Z29uIGdlb21ldHJ5LlxuICAgKiBAcGFyYW0geyFvbC5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvblxuICAgKiBAcGFyYW0geyFvbC5zdHlsZS5TdHlsZX0gb2xTdHlsZVxuICAgKiBAcmV0dXJuIHshQ2VzaXVtLlByaW1pdGl2ZUNvbGxlY3Rpb259IHByaW1pdGl2ZXNcbiAgICogQGFwaVxuICAgKi9cbiAgb2xQb2x5Z29uR2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgb2xHZW9tZXRyeSwgcHJvamVjdGlvbiwgb2xTdHlsZSkge1xuXG4gICAgb2xHZW9tZXRyeSA9IG9sY3NDb3JlLm9sR2VvbWV0cnlDbG9uZVRvNDMyNihvbEdlb21ldHJ5LCBwcm9qZWN0aW9uKTtcbiAgICBjb25zb2xlLmFzc2VydChvbEdlb21ldHJ5LmdldFR5cGUoKSA9PSAnUG9seWdvbicpO1xuXG4gICAgY29uc3QgaGVpZ2h0UmVmZXJlbmNlID0gdGhpcy5nZXRIZWlnaHRSZWZlcmVuY2UobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnkpO1xuXG4gICAgbGV0IGZpbGxHZW9tZXRyeSwgb3V0bGluZUdlb21ldHJ5LCBvdXRsaW5lUHJpbWl0aXZlO1xuICAgIGlmICgob2xHZW9tZXRyeS5nZXRDb29yZGluYXRlcygpWzBdLmxlbmd0aCA9PSA1KSAmJlxuICAgICAgICAoZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldCgnb2xjcy5wb2x5Z29uX2tpbmQnKSA9PT0gJ3JlY3RhbmdsZScpKSB7XG4gICAgICAvLyBDcmVhdGUgYSByZWN0YW5nbGUgYWNjb3JkaW5nIHRvIHRoZSBsb25naXR1ZGUgYW5kIGxhdGl0dWRlIGN1cnZlc1xuICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSBvbEdlb21ldHJ5LmdldENvb3JkaW5hdGVzKClbMF07XG4gICAgICAvLyBFeHRyYWN0IHRoZSBXZXN0LCBTb3V0aCwgRWFzdCwgTm9ydGggY29vcmRpbmF0ZXNcbiAgICAgIGNvbnN0IGV4dGVudCA9IGJvdW5kaW5nRXh0ZW50KGNvb3JkaW5hdGVzKTtcbiAgICAgIGNvbnN0IHJlY3RhbmdsZSA9IENlc2l1bS5SZWN0YW5nbGUuZnJvbURlZ3JlZXMoZXh0ZW50WzBdLCBleHRlbnRbMV0sXG4gICAgICAgICAgZXh0ZW50WzJdLCBleHRlbnRbM10pO1xuXG4gICAgICAvLyBFeHRyYWN0IHRoZSBhdmVyYWdlIGhlaWdodCBvZiB0aGUgdmVydGljZXNcbiAgICAgIGxldCBtYXhIZWlnaHQgPSAwLjA7XG4gICAgICBpZiAoY29vcmRpbmF0ZXNbMF0ubGVuZ3RoID09IDMpIHtcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjb29yZGluYXRlcy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgIG1heEhlaWdodCA9IE1hdGgubWF4KG1heEhlaWdodCwgY29vcmRpbmF0ZXNbY11bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbmRlciB0aGUgY2FydG9ncmFwaGljIHJlY3RhbmdsZVxuICAgICAgZmlsbEdlb21ldHJ5ID0gbmV3IENlc2l1bS5SZWN0YW5nbGVHZW9tZXRyeSh7XG4gICAgICAgIGVsbGlwc29pZDogQ2VzaXVtLkVsbGlwc29pZC5XR1M4NCxcbiAgICAgICAgcmVjdGFuZ2xlLFxuICAgICAgICBoZWlnaHQ6IG1heEhlaWdodFxuICAgICAgfSk7XG5cbiAgICAgIG91dGxpbmVHZW9tZXRyeSA9IG5ldyBDZXNpdW0uUmVjdGFuZ2xlT3V0bGluZUdlb21ldHJ5KHtcbiAgICAgICAgZWxsaXBzb2lkOiBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LFxuICAgICAgICByZWN0YW5nbGUsXG4gICAgICAgIGhlaWdodDogbWF4SGVpZ2h0XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmluZ3MgPSBvbEdlb21ldHJ5LmdldExpbmVhclJpbmdzKCk7XG4gICAgICAvLyBhbHdheXMgdXBkYXRlIENlc2l1bSBleHRlcm5zIGJlZm9yZSBhZGRpbmcgYSBwcm9wZXJ0eVxuICAgICAgY29uc3QgaGllcmFyY2h5ID0ge307XG4gICAgICBjb25zdCBwb2x5Z29uSGllcmFyY2h5ID0gaGllcmFyY2h5O1xuICAgICAgY29uc29sZS5hc3NlcnQocmluZ3MubGVuZ3RoID4gMCk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmluZ3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3Qgb2xQb3MgPSByaW5nc1tpXS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSBvbGNzQ29yZS5vbDQzMjZDb29yZGluYXRlQXJyYXlUb0NzQ2FydGVzaWFucyhvbFBvcyk7XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KHBvc2l0aW9ucyAmJiBwb3NpdGlvbnMubGVuZ3RoID4gMCk7XG4gICAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgICBoaWVyYXJjaHkucG9zaXRpb25zID0gcG9zaXRpb25zO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghaGllcmFyY2h5LmhvbGVzKSB7XG4gICAgICAgICAgICBoaWVyYXJjaHkuaG9sZXMgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGllcmFyY2h5LmhvbGVzLnB1c2goe1xuICAgICAgICAgICAgcG9zaXRpb25zXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZmlsbEdlb21ldHJ5ID0gbmV3IENlc2l1bS5Qb2x5Z29uR2VvbWV0cnkoe1xuICAgICAgICAvLyBhbHdheXMgdXBkYXRlIENlc2l1bSBleHRlcm5zIGJlZm9yZSBhZGRpbmcgYSBwcm9wZXJ0eVxuICAgICAgICBwb2x5Z29uSGllcmFyY2h5LFxuICAgICAgICBwZXJQb3NpdGlvbkhlaWdodDogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNpbmNlIENlc2l1bSBkb2Vzbid0IHlldCBzdXBwb3J0IFBvbHlnb24gb3V0bGluZXMgb24gdGVycmFpbiB5ZXQgKGNvbWluZyBzb29uLi4uPylcbiAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhbiBvdXRsaW5lIGdlb21ldHJ5IGlmIGNsYW1wZWQsIGJ1dCBpbnN0ZWFkIGRvIHRoZSBwb2x5bGluZSBtZXRob2RcbiAgICAgIC8vIGZvciBlYWNoIHJpbmcuIE1vc3Qgb2YgdGhpcyBjb2RlIHNob3VsZCBiZSByZW1vdmVhYmxlIHdoZW4gQ2VzaXVtIGFkZHNcbiAgICAgIC8vIHN1cHBvcnQgZm9yIFBvbHlnb24gb3V0bGluZXMgb24gdGVycmFpbi5cbiAgICAgIGlmIChoZWlnaHRSZWZlcmVuY2UgPT09IENlc2l1bS5IZWlnaHRSZWZlcmVuY2UuQ0xBTVBfVE9fR1JPVU5EKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5leHRyYWN0TGluZVdpZHRoRnJvbU9sU3R5bGUob2xTdHlsZSk7XG4gICAgICAgIGlmICh3aWR0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSBbaGllcmFyY2h5LnBvc2l0aW9uc107XG4gICAgICAgICAgaWYgKGhpZXJhcmNoeS5ob2xlcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaWVyYXJjaHkuaG9sZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goaGllcmFyY2h5LmhvbGVzW2ldLnBvc2l0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghaXNHcm91bmRQb2x5bGluZVByaW1pdGl2ZVN1cHBvcnRlZCh0aGlzLnNjZW5lKSkge1xuICAgICAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmV4dHJhY3RDb2xvckZyb21PbFN0eWxlKG9sU3R5bGUsIHRydWUpO1xuICAgICAgICAgICAgb3V0bGluZVByaW1pdGl2ZSA9IHRoaXMuY3JlYXRlU3RhY2tlZEdyb3VuZENvcnJpZG9ycyhsYXllciwgZmVhdHVyZSwgd2lkdGgsIGNvbG9yLCBwb3NpdGlvbnMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBhcHBlYXJhbmNlID0gbmV3IENlc2l1bS5Qb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZSh7XG4gICAgICAgICAgICAgIC8vIGFsd2F5cyB1cGRhdGUgQ2VzaXVtIGV4dGVybnMgYmVmb3JlIGFkZGluZyBhIHByb3BlcnR5XG4gICAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLm9sU3R5bGVUb0Nlc2l1bShmZWF0dXJlLCBvbFN0eWxlLCB0cnVlKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBnZW9tZXRyeUluc3RhbmNlcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lUG9zaXRpb25zIG9mIHBvc2l0aW9ucykge1xuICAgICAgICAgICAgICBjb25zdCBwb2x5bGluZUdlb21ldHJ5ID0gbmV3IENlc2l1bS5Hcm91bmRQb2x5bGluZUdlb21ldHJ5KHtwb3NpdGlvbnM6IGxpbmVQb3NpdGlvbnMsIHdpZHRofSk7XG4gICAgICAgICAgICAgIGdlb21ldHJ5SW5zdGFuY2VzLnB1c2gobmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogcG9seWxpbmVHZW9tZXRyeVxuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcmltaXRpdmVPcHRpb25zID0ge1xuICAgICAgICAgICAgICAvLyBhbHdheXMgdXBkYXRlIENlc2l1bSBleHRlcm5zIGJlZm9yZSBhZGRpbmcgYSBwcm9wZXJ0eVxuICAgICAgICAgICAgICBhcHBlYXJhbmNlLFxuICAgICAgICAgICAgICBnZW9tZXRyeUluc3RhbmNlc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG91dGxpbmVQcmltaXRpdmUgPSBuZXcgQ2VzaXVtLkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlKHByaW1pdGl2ZU9wdGlvbnMpO1xuICAgICAgICAgICAgb3V0bGluZVByaW1pdGl2ZS5yZWFkeVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0UmVmZXJlbmNlRm9yUGlja2luZyhsYXllciwgZmVhdHVyZSwgb3V0bGluZVByaW1pdGl2ZS5fcHJpbWl0aXZlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWN0dWFsbHkgZG8gdGhlIG5vcm1hbCBwb2x5Z29uIHRoaW5nLiBUaGlzIHNob3VsZCBlbmQgdGhlIHJlbW92YWJsZVxuICAgICAgICAvLyBzZWN0aW9uIG9mIGNvZGUgZGVzY3JpYmVkIGFib3ZlLlxuICAgICAgICBvdXRsaW5lR2VvbWV0cnkgPSBuZXcgQ2VzaXVtLlBvbHlnb25PdXRsaW5lR2VvbWV0cnkoe1xuICAgICAgICAgIC8vIGFsd2F5cyB1cGRhdGUgQ2VzaXVtIGV4dGVybnMgYmVmb3JlIGFkZGluZyBhIHByb3BlcnR5XG4gICAgICAgICAgcG9seWdvbkhpZXJhcmNoeTogaGllcmFyY2h5LFxuICAgICAgICAgIHBlclBvc2l0aW9uSGVpZ2h0OiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHByaW1pdGl2ZXMgPSB0aGlzLndyYXBGaWxsQW5kT3V0bGluZUdlb21ldHJpZXMoXG4gICAgICAgIGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBmaWxsR2VvbWV0cnksIG91dGxpbmVHZW9tZXRyeSwgb2xTdHlsZSk7XG5cbiAgICBpZiAob3V0bGluZVByaW1pdGl2ZSkge1xuICAgICAgcHJpbWl0aXZlcy5hZGQob3V0bGluZVByaW1pdGl2ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYWRkVGV4dFN0eWxlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBvbFN0eWxlLCBwcmltaXRpdmVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHtvbC5GZWF0dXJlfSBmZWF0dXJlIE9wZW5MYXllcnMgZmVhdHVyZS4uXG4gICAqIEBwYXJhbSB7IW9sLmdlb20uR2VvbWV0cnl9IGdlb21ldHJ5XG4gICAqIEByZXR1cm4geyFDZXNpdW0uSGVpZ2h0UmVmZXJlbmNlfVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRIZWlnaHRSZWZlcmVuY2UobGF5ZXIsIGZlYXR1cmUsIGdlb21ldHJ5KSB7XG5cbiAgICAvLyBSZWFkIGZyb20gdGhlIGdlb21ldHJ5XG4gICAgbGV0IGFsdGl0dWRlTW9kZSA9IGdlb21ldHJ5LmdldCgnYWx0aXR1ZGVNb2RlJyk7XG5cbiAgICAvLyBPciBmcm9tIHRoZSBmZWF0dXJlXG4gICAgaWYgKGFsdGl0dWRlTW9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBhbHRpdHVkZU1vZGUgPSBmZWF0dXJlLmdldCgnYWx0aXR1ZGVNb2RlJyk7XG4gICAgfVxuXG4gICAgLy8gT3IgZnJvbSB0aGUgbGF5ZXJcbiAgICBpZiAoYWx0aXR1ZGVNb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGFsdGl0dWRlTW9kZSA9IGxheWVyLmdldCgnYWx0aXR1ZGVNb2RlJyk7XG4gICAgfVxuXG4gICAgbGV0IGhlaWdodFJlZmVyZW5jZSA9IENlc2l1bS5IZWlnaHRSZWZlcmVuY2UuTk9ORTtcbiAgICBpZiAoYWx0aXR1ZGVNb2RlID09PSAnY2xhbXBUb0dyb3VuZCcpIHtcbiAgICAgIGhlaWdodFJlZmVyZW5jZSA9IENlc2l1bS5IZWlnaHRSZWZlcmVuY2UuQ0xBTVBfVE9fR1JPVU5EO1xuICAgIH0gZWxzZSBpZiAoYWx0aXR1ZGVNb2RlID09PSAncmVsYXRpdmVUb0dyb3VuZCcpIHtcbiAgICAgIGhlaWdodFJlZmVyZW5jZSA9IENlc2l1bS5IZWlnaHRSZWZlcmVuY2UuUkVMQVRJVkVfVE9fR1JPVU5EO1xuICAgIH1cblxuICAgIHJldHVybiBoZWlnaHRSZWZlcmVuY2U7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIHBvaW50IGdlb21ldHJ5IHRvIGEgQ2VzaXVtIEJpbGxib2FyZENvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuVmVjdG9yfG9sLmxheWVyLkltYWdlfSBsYXllclxuICAgKiBAcGFyYW0geyFvbC5GZWF0dXJlfSBmZWF0dXJlIE9wZW5MYXllcnMgZmVhdHVyZS4uXG4gICAqIEBwYXJhbSB7IW9sLmdlb20uUG9pbnR9IG9sR2VvbWV0cnkgT3BlbkxheWVycyBwb2ludCBnZW9tZXRyeS5cbiAgICogQHBhcmFtIHshb2wuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25cbiAgICogQHBhcmFtIHshb2wuc3R5bGUuU3R5bGV9IHN0eWxlXG4gICAqIEBwYXJhbSB7IW9sLnN0eWxlLkltYWdlfSBpbWFnZVN0eWxlXG4gICAqIEBwYXJhbSB7IUNlc2l1bS5CaWxsYm9hcmRDb2xsZWN0aW9ufSBiaWxsYm9hcmRzXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUNlc2l1bS5CaWxsYm9hcmQpPX0gb3B0X25ld0JpbGxib2FyZENhbGxiYWNrIENhbGxlZCB3aGVuIHRoZSBuZXcgYmlsbGJvYXJkIGlzIGFkZGVkLlxuICAgKiBAYXBpXG4gICAqL1xuICBjcmVhdGVCaWxsYm9hcmRGcm9tSW1hZ2UoXG4gICAgICBsYXllcixcbiAgICAgIGZlYXR1cmUsXG4gICAgICBvbEdlb21ldHJ5LFxuICAgICAgcHJvamVjdGlvbixcbiAgICAgIHN0eWxlLFxuICAgICAgaW1hZ2VTdHlsZSxcbiAgICAgIGJpbGxib2FyZHMsXG4gICAgICBvcHRfbmV3QmlsbGJvYXJkQ2FsbGJhY2tcbiAgKSB7XG5cbiAgICBpZiAoaW1hZ2VTdHlsZSBpbnN0YW5jZW9mIG9sU3R5bGVJY29uKSB7XG4gICAgICAvLyBtYWtlIHN1cmUgdGhlIGltYWdlIGlzIHNjaGVkdWxlZCBmb3IgbG9hZFxuICAgICAgaW1hZ2VTdHlsZS5sb2FkKCk7XG4gICAgfVxuXG4gICAgY29uc3QgaW1hZ2UgPSBpbWFnZVN0eWxlLmdldEltYWdlKDEpOyAvLyBnZXQgbm9ybWFsIGRlbnNpdHlcbiAgICBjb25zdCBpc0ltYWdlTG9hZGVkID0gZnVuY3Rpb24oaW1hZ2UpIHtcbiAgICAgIHJldHVybiBpbWFnZS5zcmMgIT0gJycgJiZcbiAgICAgICAgICBpbWFnZS5uYXR1cmFsSGVpZ2h0ICE9IDAgJiZcbiAgICAgICAgICBpbWFnZS5uYXR1cmFsV2lkdGggIT0gMCAmJlxuICAgICAgICAgIGltYWdlLmNvbXBsZXRlO1xuICAgIH07XG4gICAgY29uc3QgcmVhbGx5Q3JlYXRlQmlsbGJvYXJkID0gKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIShpbWFnZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50IHx8XG4gICAgICAgICAgaW1hZ2UgaW5zdGFuY2VvZiBJbWFnZSB8fFxuICAgICAgICAgIGltYWdlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY2VudGVyID0gb2xHZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBvbGNzQ29yZS5vbDQzMjZDb29yZGluYXRlVG9DZXNpdW1DYXJ0ZXNpYW4oY2VudGVyKTtcbiAgICAgIGxldCBjb2xvcjtcbiAgICAgIGNvbnN0IG9wYWNpdHkgPSBpbWFnZVN0eWxlLmdldE9wYWNpdHkoKTtcbiAgICAgIGlmIChvcGFjaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29sb3IgPSBuZXcgQ2VzaXVtLkNvbG9yKDEuMCwgMS4wLCAxLjAsIG9wYWNpdHkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzY2FsZSA9IGltYWdlU3R5bGUuZ2V0U2NhbGUoKTtcbiAgICAgIGNvbnN0IGhlaWdodFJlZmVyZW5jZSA9IHRoaXMuZ2V0SGVpZ2h0UmVmZXJlbmNlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5KTtcblxuICAgICAgY29uc3QgYmJPcHRpb25zID0gLyoqIEB0eXBlIHtDZXNpdW0ub3B0aW9uc0JpbGxib2FyZENvbGxlY3Rpb25BZGR9ICovICh7XG4gICAgICAgIC8vIGFsd2F5cyB1cGRhdGUgQ2VzaXVtIGV4dGVybnMgYmVmb3JlIGFkZGluZyBhIHByb3BlcnR5XG4gICAgICAgIGltYWdlLFxuICAgICAgICBjb2xvcixcbiAgICAgICAgc2NhbGUsXG4gICAgICAgIGhlaWdodFJlZmVyZW5jZSxcbiAgICAgICAgcG9zaXRpb25cbiAgICAgIH0pO1xuXG4gICAgICAvLyBtZXJnZSBpbiBjZXNpdW0gb3B0aW9ucyBmcm9tIG9wZW5sYXllcnMgZmVhdHVyZVxuICAgICAgT2JqZWN0LmFzc2lnbihiYk9wdGlvbnMsIGZlYXR1cmUuZ2V0KCdjZXNpdW1PcHRpb25zJykpO1xuXG4gICAgICBpZiAoaW1hZ2VTdHlsZSBpbnN0YW5jZW9mIG9sU3R5bGVJY29uKSB7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IGltYWdlU3R5bGUuZ2V0QW5jaG9yKCk7XG4gICAgICAgIGlmIChhbmNob3IpIHtcbiAgICAgICAgICBiYk9wdGlvbnMucGl4ZWxPZmZzZXQgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoKGltYWdlLndpZHRoIC8gMiAtIGFuY2hvclswXSkgKiBzY2FsZSwgKGltYWdlLmhlaWdodCAvIDIgLSBhbmNob3JbMV0pICogc2NhbGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJiID0gdGhpcy5jc0FkZEJpbGxib2FyZChiaWxsYm9hcmRzLCBiYk9wdGlvbnMsIGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBzdHlsZSk7XG4gICAgICBpZiAob3B0X25ld0JpbGxib2FyZENhbGxiYWNrKSB7XG4gICAgICAgIG9wdF9uZXdCaWxsYm9hcmRDYWxsYmFjayhiYik7XG4gICAgICB9XG4gICAgfSkuYmluZCh0aGlzKTtcblxuICAgIGlmIChpbWFnZSBpbnN0YW5jZW9mIEltYWdlICYmICFpc0ltYWdlTG9hZGVkKGltYWdlKSkge1xuICAgICAgLy8gQ2VzaXVtIHJlcXVpcmVzIHRoZSBpbWFnZSB0byBiZSBsb2FkZWRcbiAgICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgY29uc3QgY2FuY2VsbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbmNlbGxlZCA9IHRydWU7XG4gICAgICB9O1xuICAgICAgc291cmNlLm9uKFsncmVtb3ZlZmVhdHVyZScsICdjbGVhciddLFxuICAgICAgICAgIHRoaXMuYm91bmRPblJlbW92ZU9yQ2xlYXJGZWF0dXJlTGlzdGVuZXJfKTtcbiAgICAgIGxldCBjYW5jZWxsZXJzID0gb2xjc1V0aWwub2JqKHNvdXJjZSlbJ29sY3NfY2FuY2VsbGVycyddO1xuICAgICAgaWYgKCFjYW5jZWxsZXJzKSB7XG4gICAgICAgIGNhbmNlbGxlcnMgPSBvbGNzVXRpbC5vYmooc291cmNlKVsnb2xjc19jYW5jZWxsZXJzJ10gPSB7fTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZnVpZCA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgIGlmIChjYW5jZWxsZXJzW2Z1aWRdKSB7XG4gICAgICAgIC8vIFdoZW4gdGhlIGZlYXR1cmUgY2hhbmdlIHF1aWNrbHksIGEgY2FuY2VsbGVyIG1heSBzdGlsbCBiZSBwcmVzZW50IHNvXG4gICAgICAgIC8vIHdlIGNhbmNlbCBpdCBoZXJlIHRvIHByZXZlbnQgY3JlYXRpb24gb2YgYSBiaWxsYm9hcmQuXG4gICAgICAgIGNhbmNlbGxlcnNbZnVpZF0oKTtcbiAgICAgIH1cbiAgICAgIGNhbmNlbGxlcnNbZnVpZF0gPSBjYW5jZWxsZXI7XG5cbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGltYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBsaXN0ZW5lcik7XG4gICAgICAgIGlmICghYmlsbGJvYXJkcy5pc0Rlc3Ryb3llZCgpICYmICFjYW5jZWxsZWQpIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYmlsbGJvYXJkIGlmIHRoZSBmZWF0dXJlIGlzIHN0aWxsIGRpc3BsYXllZCBvbiB0aGUgbWFwLlxuICAgICAgICAgIHJlYWxseUNyZWF0ZUJpbGxib2FyZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgbGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWFsbHlDcmVhdGVCaWxsYm9hcmQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIHBvaW50IGdlb21ldHJ5IHRvIGEgQ2VzaXVtIEJpbGxib2FyZENvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuVmVjdG9yfG9sLmxheWVyLkltYWdlfSBsYXllclxuICAgKiBAcGFyYW0geyFvbC5GZWF0dXJlfSBmZWF0dXJlIE9wZW5MYXllcnMgZmVhdHVyZS4uXG4gICAqIEBwYXJhbSB7IW9sLmdlb20uUG9pbnR9IG9sR2VvbWV0cnkgT3BlbkxheWVycyBwb2ludCBnZW9tZXRyeS5cbiAgICogQHBhcmFtIHshb2wuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25cbiAgICogQHBhcmFtIHshb2wuc3R5bGUuU3R5bGV9IHN0eWxlXG4gICAqIEBwYXJhbSB7IUNlc2l1bS5CaWxsYm9hcmRDb2xsZWN0aW9ufSBiaWxsYm9hcmRzXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUNlc2l1bS5CaWxsYm9hcmQpPX0gb3B0X25ld0JpbGxib2FyZENhbGxiYWNrIENhbGxlZCB3aGVuXG4gICAqIHRoZSBuZXcgYmlsbGJvYXJkIGlzIGFkZGVkLlxuICAgKiBAcmV0dXJuIHtDZXNpdW0uUHJpbWl0aXZlfSBwcmltaXRpdmVzXG4gICAqIEBhcGlcbiAgICovXG4gIG9sUG9pbnRHZW9tZXRyeVRvQ2VzaXVtKFxuICAgICAgbGF5ZXIsXG4gICAgICBmZWF0dXJlLFxuICAgICAgb2xHZW9tZXRyeSxcbiAgICAgIHByb2plY3Rpb24sXG4gICAgICBzdHlsZSxcbiAgICAgIGJpbGxib2FyZHMsXG4gICAgICBvcHRfbmV3QmlsbGJvYXJkQ2FsbGJhY2tcbiAgKSB7XG4gICAgY29uc29sZS5hc3NlcnQob2xHZW9tZXRyeS5nZXRUeXBlKCkgPT0gJ1BvaW50Jyk7XG4gICAgb2xHZW9tZXRyeSA9IG9sY3NDb3JlLm9sR2VvbWV0cnlDbG9uZVRvNDMyNihvbEdlb21ldHJ5LCBwcm9qZWN0aW9uKTtcblxuICAgIGxldCBtb2RlbFByaW1pdGl2ZSA9IG51bGw7XG4gICAgY29uc3QgaW1hZ2VTdHlsZSA9IHN0eWxlLmdldEltYWdlKCk7XG4gICAgaWYgKGltYWdlU3R5bGUpIHtcbiAgICAgIGNvbnN0IG9sY3NNb2RlbEZ1bmN0aW9uID0gLyoqIEB0eXBlIHtmdW5jdGlvbigpOm9sY3N4Lk1vZGVsU3R5bGV9ICovIChvbEdlb21ldHJ5LmdldCgnb2xjc19tb2RlbCcpIHx8IGZlYXR1cmUuZ2V0KCdvbGNzX21vZGVsJykpO1xuICAgICAgaWYgKG9sY3NNb2RlbEZ1bmN0aW9uKSB7XG4gICAgICAgIGNvbnN0IG9sY3NNb2RlbCA9IG9sY3NNb2RlbEZ1bmN0aW9uKCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSAvKiogQHR5cGUge0Nlc2l1bS5Nb2RlbEZyb21HbHRmT3B0aW9uc30gKi8gKE9iamVjdC5hc3NpZ24oe30sIHtzY2VuZTogdGhpcy5zY2VuZX0sIG9sY3NNb2RlbC5jZXNpdW1PcHRpb25zKSk7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gQ2VzaXVtLk1vZGVsLmZyb21HbHRmKG9wdGlvbnMpO1xuICAgICAgICBtb2RlbFByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbigpO1xuICAgICAgICBtb2RlbFByaW1pdGl2ZS5hZGQobW9kZWwpO1xuICAgICAgICBpZiAob2xjc01vZGVsLmRlYnVnTW9kZWxNYXRyaXgpIHtcbiAgICAgICAgICBtb2RlbFByaW1pdGl2ZS5hZGQobmV3IENlc2l1bS5EZWJ1Z01vZGVsTWF0cml4UHJpbWl0aXZlKHtcbiAgICAgICAgICAgIG1vZGVsTWF0cml4OiBvbGNzTW9kZWwuZGVidWdNb2RlbE1hdHJpeFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jcmVhdGVCaWxsYm9hcmRGcm9tSW1hZ2UobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIHByb2plY3Rpb24sIHN0eWxlLCBpbWFnZVN0eWxlLCBiaWxsYm9hcmRzLCBvcHRfbmV3QmlsbGJvYXJkQ2FsbGJhY2spO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdHlsZS5nZXRUZXh0KCkpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZFRleHRTdHlsZShsYXllciwgZmVhdHVyZSwgb2xHZW9tZXRyeSwgc3R5bGUsIG1vZGVsUHJpbWl0aXZlIHx8IG5ldyBDZXNpdW0uUHJpbWl0aXZlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbW9kZWxQcmltaXRpdmU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYW4gT3BlbkxheWVycyBtdWx0aS1zb21ldGhpbmcgZ2VvbWV0cnkgdG8gQ2VzaXVtLlxuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuLlxuICAgKiBAcGFyYW0geyFvbC5nZW9tLkdlb21ldHJ5fSBnZW9tZXRyeSBPcGVuTGF5ZXJzIGdlb21ldHJ5LlxuICAgKiBAcGFyYW0geyFvbC5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvblxuICAgKiBAcGFyYW0geyFvbC5zdHlsZS5TdHlsZX0gb2xTdHlsZVxuICAgKiBAcGFyYW0geyFDZXNpdW0uQmlsbGJvYXJkQ29sbGVjdGlvbn0gYmlsbGJvYXJkc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFDZXNpdW0uQmlsbGJvYXJkKT19IG9wdF9uZXdCaWxsYm9hcmRDYWxsYmFjayBDYWxsZWQgd2hlblxuICAgKiB0aGUgbmV3IGJpbGxib2FyZCBpcyBhZGRlZC5cbiAgICogQHJldHVybiB7Q2VzaXVtLlByaW1pdGl2ZX0gcHJpbWl0aXZlc1xuICAgKiBAYXBpXG4gICAqL1xuICBvbE11bHRpR2VvbWV0cnlUb0Nlc2l1bShcbiAgICAgIGxheWVyLFxuICAgICAgZmVhdHVyZSxcbiAgICAgIGdlb21ldHJ5LFxuICAgICAgcHJvamVjdGlvbixcbiAgICAgIG9sU3R5bGUsXG4gICAgICBiaWxsYm9hcmRzLFxuICAgICAgb3B0X25ld0JpbGxib2FyZENhbGxiYWNrXG4gICkge1xuICAgIC8vIERvIG5vdCByZXByb2plY3QgdG8gNDMyNiBub3cgYmVjYXVzZSBpdCB3aWxsIGJlIGRvbmUgbGF0ZXIuXG5cbiAgICAvLyBGSVhNRTogd291bGQgYmUgYmV0dGVyIHRvIGNvbWJpbmUgYWxsIGNoaWxkIGdlb21ldHJpZXMgaW4gb25lIHByaW1pdGl2ZVxuICAgIC8vIGluc3RlYWQgd2UgY3JlYXRlIG4gcHJpbWl0aXZlcyBmb3Igc2ltcGxpY2l0eS5cbiAgICBjb25zdCBhY2N1bXVsYXRlID0gZnVuY3Rpb24oZ2VvbWV0cmllcywgZnVuY3Rvcikge1xuICAgICAgY29uc3QgcHJpbWl0aXZlcyA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbigpO1xuICAgICAgZ2VvbWV0cmllcy5mb3JFYWNoKChnZW9tZXRyeSkgPT4ge1xuICAgICAgICBwcmltaXRpdmVzLmFkZChmdW5jdG9yKGxheWVyLCBmZWF0dXJlLCBnZW9tZXRyeSwgcHJvamVjdGlvbiwgb2xTdHlsZSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJpbWl0aXZlcztcbiAgICB9O1xuXG4gICAgbGV0IHN1Ymdlb3M7XG4gICAgc3dpdGNoIChnZW9tZXRyeS5nZXRUeXBlKCkpIHtcbiAgICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7IW9sLmdlb20uTXVsdGlQb2ludH0gKi8gKGdlb21ldHJ5KTtcbiAgICAgICAgc3ViZ2VvcyA9IGdlb21ldHJ5LmdldFBvaW50cygpO1xuICAgICAgICBpZiAob2xTdHlsZS5nZXRUZXh0KCkpIHtcbiAgICAgICAgICBjb25zdCBwcmltaXRpdmVzID0gbmV3IENlc2l1bS5QcmltaXRpdmVDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgc3ViZ2Vvcy5mb3JFYWNoKChnZW9tZXRyeSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoZ2VvbWV0cnkpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5vbFBvaW50R2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbiwgb2xTdHlsZSwgYmlsbGJvYXJkcywgb3B0X25ld0JpbGxib2FyZENhbGxiYWNrKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgcHJpbWl0aXZlcy5hZGQocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWJnZW9zLmZvckVhY2goKGdlb21ldHJ5KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmFzc2VydChnZW9tZXRyeSk7XG4gICAgICAgICAgICB0aGlzLm9sUG9pbnRHZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBnZW9tZXRyeSwgcHJvamVjdGlvbixcbiAgICAgICAgICAgICAgICBvbFN0eWxlLCBiaWxsYm9hcmRzLCBvcHRfbmV3QmlsbGJvYXJkQ2FsbGJhY2spO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICBjYXNlICdNdWx0aUxpbmVTdHJpbmcnOlxuICAgICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7IW9sLmdlb20uTXVsdGlMaW5lU3RyaW5nfSAqLyAoZ2VvbWV0cnkpO1xuICAgICAgICBzdWJnZW9zID0gZ2VvbWV0cnkuZ2V0TGluZVN0cmluZ3MoKTtcbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdGUoc3ViZ2VvcywgdGhpcy5vbExpbmVTdHJpbmdHZW9tZXRyeVRvQ2VzaXVtLmJpbmQodGhpcykpO1xuICAgICAgY2FzZSAnTXVsdGlQb2x5Z29uJzpcbiAgICAgICAgZ2VvbWV0cnkgPSAvKiogQHR5cGUgeyFvbC5nZW9tLk11bHRpUG9seWdvbn0gKi8gKGdlb21ldHJ5KTtcbiAgICAgICAgc3ViZ2VvcyA9IGdlb21ldHJ5LmdldFBvbHlnb25zKCk7XG4gICAgICAgIHJldHVybiBhY2N1bXVsYXRlKHN1Ymdlb3MsIHRoaXMub2xQb2x5Z29uR2VvbWV0cnlUb0Nlc2l1bS5iaW5kKHRoaXMpKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KGZhbHNlLCBgVW5oYW5kbGVkIG11bHRpIGdlb21ldHJ5IHR5cGUke2dlb21ldHJ5LmdldFR5cGUoKX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhbiBPcGVuTGF5ZXJzIHRleHQgc3R5bGUgdG8gQ2VzaXVtLlxuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuLlxuICAgKiBAcGFyYW0geyFvbC5nZW9tLkdlb21ldHJ5fSBnZW9tZXRyeVxuICAgKiBAcGFyYW0geyFvbC5zdHlsZS5UZXh0fSBzdHlsZVxuICAgKiBAcmV0dXJuIHtDZXNpdW0uTGFiZWxDb2xsZWN0aW9ufSBDZXNpdW0gcHJpbWl0aXZlXG4gICAqIEBhcGlcbiAgICovXG4gIG9sR2VvbWV0cnk0MzI2VGV4dFBhcnRUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgZ2VvbWV0cnksIHN0eWxlKSB7XG4gICAgY29uc3QgdGV4dCA9IHN0eWxlLmdldFRleHQoKTtcbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGxhYmVscyA9IG5ldyBDZXNpdW0uTGFiZWxDb2xsZWN0aW9uKHtzY2VuZTogdGhpcy5zY2VuZX0pO1xuICAgIC8vIFRPRE86IGV4cG9ydCBhbmQgdXNlIHRoZSB0ZXh0IGRyYXcgcG9zaXRpb24gZnJvbSBPcGVuTGF5ZXJzIC5cbiAgICAvLyBTZWUgc3JjL29sL3JlbmRlci92ZWN0b3IuanNcbiAgICBjb25zdCBleHRlbnRDZW50ZXIgPSBnZXRDZW50ZXIoZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpO1xuICAgIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVNpbXBsZUdlb21ldHJ5KSB7XG4gICAgICBjb25zdCBmaXJzdCA9IGdlb21ldHJ5LmdldEZpcnN0Q29vcmRpbmF0ZSgpO1xuICAgICAgZXh0ZW50Q2VudGVyWzJdID0gZmlyc3QubGVuZ3RoID09IDMgPyBmaXJzdFsyXSA6IDAuMDtcbiAgICB9XG4gICAgY29uc3Qgb3B0aW9ucyA9IC8qKiBAdHlwZSB7Q2VzaXVtLm9wdGlvbnNMYWJlbENvbGxlY3Rpb259ICovICh7fSk7XG5cbiAgICBvcHRpb25zLnBvc2l0aW9uID0gb2xjc0NvcmUub2w0MzI2Q29vcmRpbmF0ZVRvQ2VzaXVtQ2FydGVzaWFuKGV4dGVudENlbnRlcik7XG5cbiAgICBvcHRpb25zLnRleHQgPSB0ZXh0O1xuXG4gICAgb3B0aW9ucy5oZWlnaHRSZWZlcmVuY2UgPSB0aGlzLmdldEhlaWdodFJlZmVyZW5jZShsYXllciwgZmVhdHVyZSwgZ2VvbWV0cnkpO1xuXG4gICAgY29uc3Qgb2Zmc2V0WCA9IHN0eWxlLmdldE9mZnNldFgoKTtcbiAgICBjb25zdCBvZmZzZXRZID0gc3R5bGUuZ2V0T2Zmc2V0WSgpO1xuICAgIGlmIChvZmZzZXRYICE9IDAgJiYgb2Zmc2V0WSAhPSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXQgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICBvcHRpb25zLnBpeGVsT2Zmc2V0ID0gb2Zmc2V0O1xuICAgIH1cblxuICAgIG9wdGlvbnMuZm9udCA9IHN0eWxlLmdldEZvbnQoKSB8fCAnMTBweCBzYW5zLXNlcmlmJzsgLy8gT3BlbkxheWVycyBkZWZhdWx0XG5cbiAgICBsZXQgbGFiZWxTdHlsZSA9IHVuZGVmaW5lZDtcbiAgICBpZiAoc3R5bGUuZ2V0RmlsbCgpKSB7XG4gICAgICBvcHRpb25zLmZpbGxDb2xvciA9IHRoaXMuZXh0cmFjdENvbG9yRnJvbU9sU3R5bGUoc3R5bGUsIGZhbHNlKTtcbiAgICAgIGxhYmVsU3R5bGUgPSBDZXNpdW0uTGFiZWxTdHlsZS5GSUxMO1xuICAgIH1cbiAgICBpZiAoc3R5bGUuZ2V0U3Ryb2tlKCkpIHtcbiAgICAgIG9wdGlvbnMub3V0bGluZVdpZHRoID0gdGhpcy5leHRyYWN0TGluZVdpZHRoRnJvbU9sU3R5bGUoc3R5bGUpO1xuICAgICAgb3B0aW9ucy5vdXRsaW5lQ29sb3IgPSB0aGlzLmV4dHJhY3RDb2xvckZyb21PbFN0eWxlKHN0eWxlLCB0cnVlKTtcbiAgICAgIGxhYmVsU3R5bGUgPSBDZXNpdW0uTGFiZWxTdHlsZS5PVVRMSU5FO1xuICAgIH1cbiAgICBpZiAoc3R5bGUuZ2V0RmlsbCgpICYmIHN0eWxlLmdldFN0cm9rZSgpKSB7XG4gICAgICBsYWJlbFN0eWxlID0gQ2VzaXVtLkxhYmVsU3R5bGUuRklMTF9BTkRfT1VUTElORTtcbiAgICB9XG4gICAgb3B0aW9ucy5zdHlsZSA9IGxhYmVsU3R5bGU7XG5cbiAgICBsZXQgaG9yaXpvbnRhbE9yaWdpbjtcbiAgICBzd2l0Y2ggKHN0eWxlLmdldFRleHRBbGlnbigpKSB7XG4gICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgaG9yaXpvbnRhbE9yaWdpbiA9IENlc2l1bS5Ib3Jpem9udGFsT3JpZ2luLkxFRlQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICBob3Jpem9udGFsT3JpZ2luID0gQ2VzaXVtLkhvcml6b250YWxPcmlnaW4uUklHSFQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGhvcml6b250YWxPcmlnaW4gPSBDZXNpdW0uSG9yaXpvbnRhbE9yaWdpbi5DRU5URVI7XG4gICAgfVxuICAgIG9wdGlvbnMuaG9yaXpvbnRhbE9yaWdpbiA9IGhvcml6b250YWxPcmlnaW47XG5cbiAgICBpZiAoc3R5bGUuZ2V0VGV4dEJhc2VsaW5lKCkpIHtcbiAgICAgIGxldCB2ZXJ0aWNhbE9yaWdpbjtcbiAgICAgIHN3aXRjaCAoc3R5bGUuZ2V0VGV4dEJhc2VsaW5lKCkpIHtcbiAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICB2ZXJ0aWNhbE9yaWdpbiA9IENlc2l1bS5WZXJ0aWNhbE9yaWdpbi5UT1A7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICAgICAgdmVydGljYWxPcmlnaW4gPSBDZXNpdW0uVmVydGljYWxPcmlnaW4uQ0VOVEVSO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgIHZlcnRpY2FsT3JpZ2luID0gQ2VzaXVtLlZlcnRpY2FsT3JpZ2luLkJPVFRPTTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnYWxwaGFiZXRpYyc6XG4gICAgICAgICAgdmVydGljYWxPcmlnaW4gPSBDZXNpdW0uVmVydGljYWxPcmlnaW4uVE9QO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdoYW5naW5nJzpcbiAgICAgICAgICB2ZXJ0aWNhbE9yaWdpbiA9IENlc2l1bS5WZXJ0aWNhbE9yaWdpbi5CT1RUT007XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoZmFsc2UsIGB1bmhhbmRsZWQgYmFzZWxpbmUgJHtzdHlsZS5nZXRUZXh0QmFzZWxpbmUoKX1gKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMudmVydGljYWxPcmlnaW4gPSB2ZXJ0aWNhbE9yaWdpbjtcbiAgICB9XG5cblxuICAgIGNvbnN0IGwgPSBsYWJlbHMuYWRkKG9wdGlvbnMpO1xuICAgIHRoaXMuc2V0UmVmZXJlbmNlRm9yUGlja2luZyhsYXllciwgZmVhdHVyZSwgbCk7XG4gICAgcmV0dXJuIGxhYmVscztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIE9wZW5MYXllcnMgc3R5bGUgdG8gYSBDZXNpdW0gTWF0ZXJpYWwuXG4gICAqIEBwYXJhbSB7b2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuLlxuICAgKiBAcGFyYW0geyFvbC5zdHlsZS5TdHlsZX0gc3R5bGVcbiAgICogQHBhcmFtIHtib29sZWFufSBvdXRsaW5lXG4gICAqIEByZXR1cm4ge0Nlc2l1bS5NYXRlcmlhbH1cbiAgICogQGFwaVxuICAgKi9cbiAgb2xTdHlsZVRvQ2VzaXVtKGZlYXR1cmUsIHN0eWxlLCBvdXRsaW5lKSB7XG4gICAgY29uc3QgZmlsbCA9IHN0eWxlLmdldEZpbGwoKTtcbiAgICBjb25zdCBzdHJva2UgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgICBpZiAoKG91dGxpbmUgJiYgIXN0cm9rZSkgfHwgKCFvdXRsaW5lICYmICFmaWxsKSkge1xuICAgICAgcmV0dXJuIG51bGw7IC8vIEZJWE1FIHVzZSBhIGRlZmF1bHQgc3R5bGU/IERldmVsb3BlciBlcnJvcj9cbiAgICB9XG5cbiAgICBsZXQgY29sb3IgPSBvdXRsaW5lID8gc3Ryb2tlLmdldENvbG9yKCkgOiBmaWxsLmdldENvbG9yKCk7XG4gICAgY29sb3IgPSBvbGNzQ29yZS5jb252ZXJ0Q29sb3JUb0Nlc2l1bShjb2xvcik7XG5cbiAgICBpZiAob3V0bGluZSAmJiBzdHJva2UuZ2V0TGluZURhc2goKSkge1xuICAgICAgcmV0dXJuIENlc2l1bS5NYXRlcmlhbC5mcm9tVHlwZSgnU3RyaXBlJywge1xuICAgICAgICAvLyBhbHdheXMgdXBkYXRlIENlc2l1bSBleHRlcm5zIGJlZm9yZSBhZGRpbmcgYSBwcm9wZXJ0eVxuICAgICAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICAgICAgcmVwZWF0OiA1MDAsIC8vIFRPRE8gaG93IHRvIGNhbGN1bGF0ZSB0aGlzP1xuICAgICAgICBldmVuQ29sb3I6IGNvbG9yLFxuICAgICAgICBvZGRDb2xvcjogbmV3IENlc2l1bS5Db2xvcigwLCAwLCAwLCAwKSAvLyB0cmFuc3BhcmVudFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBDZXNpdW0uTWF0ZXJpYWwuZnJvbVR5cGUoJ0NvbG9yJywge1xuICAgICAgICAvLyBhbHdheXMgdXBkYXRlIENlc2l1bSBleHRlcm5zIGJlZm9yZSBhZGRpbmcgYSBwcm9wZXJ0eVxuICAgICAgICBjb2xvclxuICAgICAgfSk7XG4gICAgfVxuXG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZSBPcGVuTGF5ZXJzIHBsYWluIHN0eWxlLlxuICAgKiBFdmFsdWF0ZXMgc3R5bGUgZnVuY3Rpb24sIGJsZW5kIGFycmF5cywgZ2V0IGRlZmF1bHQgc3R5bGUuXG4gICAqIEBwYXJhbSB7b2wubGF5ZXIuVmVjdG9yfG9sLmxheWVyLkltYWdlfSBsYXllclxuICAgKiBAcGFyYW0geyFvbC5GZWF0dXJlfSBmZWF0dXJlXG4gICAqIEBwYXJhbSB7b2wuU3R5bGVGdW5jdGlvbnx1bmRlZmluZWR9IGZhbGxiYWNrU3R5bGVGdW5jdGlvblxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvblxuICAgKiBAcmV0dXJuIHtBcnJheS48IW9sLnN0eWxlLlN0eWxlPn0gbnVsbCBpZiBubyBzdHlsZSBpcyBhdmFpbGFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgY29tcHV0ZVBsYWluU3R5bGUobGF5ZXIsIGZlYXR1cmUsIGZhbGxiYWNrU3R5bGVGdW5jdGlvbiwgcmVzb2x1dGlvbikge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtvbC5GZWF0dXJlU3R5bGVGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgY29uc3QgZmVhdHVyZVN0eWxlRnVuY3Rpb24gPSBmZWF0dXJlLmdldFN0eWxlRnVuY3Rpb24oKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtvbC5zdHlsZS5TdHlsZXxBcnJheS48b2wuc3R5bGUuU3R5bGU+fVxuICAgICAqL1xuICAgIGxldCBzdHlsZSA9IG51bGw7XG5cbiAgICBpZiAoZmVhdHVyZVN0eWxlRnVuY3Rpb24pIHtcbiAgICAgIHN0eWxlID0gZmVhdHVyZVN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XG4gICAgfVxuXG4gICAgaWYgKCFzdHlsZSAmJiBmYWxsYmFja1N0eWxlRnVuY3Rpb24pIHtcbiAgICAgIHN0eWxlID0gZmFsbGJhY2tTdHlsZUZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pO1xuICAgIH1cblxuICAgIGlmICghc3R5bGUpIHtcbiAgICAgIC8vIFRoZSBmZWF0dXJlIG11c3Qgbm90IGJlIGRpc3BsYXllZFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gRklYTUUgY29tYmluZSBtYXRlcmlhbHMgYXMgaW4gY2VzaXVtLW1hdGVyaWFscy1wYWNrP1xuICAgIC8vIHRoZW4gdGhpcyBmdW5jdGlvbiBtdXN0IHJldHVybiBhIGN1c3RvbSBtYXRlcmlhbFxuICAgIC8vIE1vcmUgc2ltcGx5LCBjb3VsZCBibGVuZCB0aGUgY29sb3JzIGxpa2UgZGVzY3JpYmVkIGluXG4gICAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BbHBoYV9jb21wb3NpdGluZ1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHN0eWxlKSA/IHN0eWxlIDogW3N0eWxlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBwYXJhbSB7IW9sLkZlYXR1cmV9IGZlYXR1cmVcbiAgICogQHBhcmFtIHshb2wuc3R5bGUuU3R5bGV9IHN0eWxlXG4gICAqIEBwYXJhbSB7IW9sLmdlb20uR2VvbWV0cnk9fSBvcHRfZ2VvbSBHZW9tZXRyeSB0byBiZSBjb252ZXJ0ZWQuXG4gICAqIEByZXR1cm4ge29sLmdlb20uR2VvbWV0cnl8dW5kZWZpbmVkfVxuICAgKi9cbiAgZ2V0R2VvbWV0cnlGcm9tRmVhdHVyZShmZWF0dXJlLCBzdHlsZSwgb3B0X2dlb20pIHtcbiAgICBpZiAob3B0X2dlb20pIHtcbiAgICAgIHJldHVybiBvcHRfZ2VvbTtcbiAgICB9XG5cbiAgICBjb25zdCBnZW9tM2QgPSAvKiogQHR5cGUgeyFvbC5nZW9tLkdlb21ldHJ5fSAqLyhmZWF0dXJlLmdldCgnb2xjcy4zZF9nZW9tZXRyeScpKTtcbiAgICBpZiAoZ2VvbTNkICYmIGdlb20zZCBpbnN0YW5jZW9mIG9sR2VvbUdlb21ldHJ5KSB7XG4gICAgICByZXR1cm4gZ2VvbTNkO1xuICAgIH1cblxuICAgIGlmIChzdHlsZSkge1xuICAgICAgY29uc3QgZ2VvbUZ1bmNSZXMgPSBzdHlsZS5nZXRHZW9tZXRyeUZ1bmN0aW9uKCkoZmVhdHVyZSk7XG4gICAgICBpZiAoZ2VvbUZ1bmNSZXMgaW5zdGFuY2VvZiBvbEdlb21HZW9tZXRyeSkge1xuICAgICAgICByZXR1cm4gZ2VvbUZ1bmNSZXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IG9uZSBPcGVuTGF5ZXJzIGZlYXR1cmUgdXAgdG8gYSBjb2xsZWN0aW9uIG9mIENlc2l1bSBwcmltaXRpdmVzLlxuICAgKiBAcGFyYW0ge29sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZX0gbGF5ZXJcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZSBPcGVuTGF5ZXJzIGZlYXR1cmUuXG4gICAqIEBwYXJhbSB7IW9sLnN0eWxlLlN0eWxlfSBzdHlsZVxuICAgKiBAcGFyYW0geyFpbXBvcnQoJ29sY3MvY29yZS9WZWN0b3JMYXllckNvbnRlcnBhcnQuanMnKS5PbEZlYXR1cmVUb0Nlc2l1bUNvbnRleHR9IGNvbnRleHRcbiAgICogQHBhcmFtIHshb2wuZ2VvbS5HZW9tZXRyeT19IG9wdF9nZW9tIEdlb21ldHJ5IHRvIGJlIGNvbnZlcnRlZC5cbiAgICogQHJldHVybiB7Q2VzaXVtLlByaW1pdGl2ZX0gcHJpbWl0aXZlc1xuICAgKiBAYXBpXG4gICAqL1xuICBvbEZlYXR1cmVUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgc3R5bGUsIGNvbnRleHQsIG9wdF9nZW9tKSB7XG4gICAgbGV0IGdlb20gPSB0aGlzLmdldEdlb21ldHJ5RnJvbUZlYXR1cmUoZmVhdHVyZSwgc3R5bGUsIG9wdF9nZW9tKTtcblxuICAgIGlmICghZ2VvbSkge1xuICAgICAgLy8gT3BlbkxheWVycyBmZWF0dXJlcyBtYXkgbm90IGhhdmUgYSBnZW9tZXRyeVxuICAgICAgLy8gU2VlIGh0dHA6Ly9nZW9qc29uLm9yZy9nZW9qc29uLXNwZWMuaHRtbCNmZWF0dXJlLW9iamVjdHNcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHByb2ogPSBjb250ZXh0LnByb2plY3Rpb247XG4gICAgY29uc3QgbmV3QmlsbGJvYXJkQWRkZWRDYWxsYmFjayA9IGZ1bmN0aW9uKGJiKSB7XG4gICAgICBjb25zdCBmZWF0dXJlQmIgPSBjb250ZXh0LmZlYXR1cmVUb0Nlc2l1bU1hcFtnZXRVaWQoZmVhdHVyZSldO1xuICAgICAgaWYgKGZlYXR1cmVCYiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGZlYXR1cmVCYi5wdXNoKGJiKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb250ZXh0LmZlYXR1cmVUb0Nlc2l1bU1hcFtnZXRVaWQoZmVhdHVyZSldID0gW2JiXTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc3dpdGNoIChnZW9tLmdldFR5cGUoKSkge1xuICAgICAgY2FzZSAnR2VvbWV0cnlDb2xsZWN0aW9uJzpcbiAgICAgICAgY29uc3QgcHJpbWl0aXZlcyA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbigpO1xuICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gLyoqIEB0eXBlIHshb2wuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb259ICovIChnZW9tKTtcbiAgICAgICAgLy8gVE9ETzogdXNlIGdldEdlb21ldHJpZXNBcnJheSgpIGluc3RlYWRcbiAgICAgICAgY29sbGVjdGlvbi5nZXRHZW9tZXRyaWVzKCkuZm9yRWFjaCgoZ2VvbSkgPT4ge1xuICAgICAgICAgIGlmIChnZW9tKSB7XG4gICAgICAgICAgICBjb25zdCBwcmltcyA9IHRoaXMub2xGZWF0dXJlVG9DZXNpdW0obGF5ZXIsIGZlYXR1cmUsIHN0eWxlLCBjb250ZXh0LFxuICAgICAgICAgICAgICAgIGdlb20pO1xuICAgICAgICAgICAgaWYgKHByaW1zKSB7XG4gICAgICAgICAgICAgIHByaW1pdGl2ZXMuYWRkKHByaW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJpbWl0aXZlcztcbiAgICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgICAgZ2VvbSA9IC8qKiBAdHlwZSB7IW9sLmdlb20uUG9pbnR9ICovIChnZW9tKTtcbiAgICAgICAgY29uc3QgYmJzID0gY29udGV4dC5iaWxsYm9hcmRzO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLm9sUG9pbnRHZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBnZW9tLCBwcm9qLFxuICAgICAgICAgICAgc3R5bGUsIGJicywgbmV3QmlsbGJvYXJkQWRkZWRDYWxsYmFjayk7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgLy8gbm8gd3JhcHBpbmcgcHJpbWl0aXZlXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgY2FzZSAnQ2lyY2xlJzpcbiAgICAgICAgZ2VvbSA9IC8qKiBAdHlwZSB7IW9sLmdlb20uQ2lyY2xlfSAqLyAoZ2VvbSk7XG4gICAgICAgIHJldHVybiB0aGlzLm9sQ2lyY2xlR2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgZ2VvbSwgcHJvaixcbiAgICAgICAgICAgIHN0eWxlKTtcbiAgICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgICAgICBnZW9tID0gLyoqIEB0eXBlIHshb2wuZ2VvbS5MaW5lU3RyaW5nfSAqLyAoZ2VvbSk7XG4gICAgICAgIHJldHVybiB0aGlzLm9sTGluZVN0cmluZ0dlb21ldHJ5VG9DZXNpdW0obGF5ZXIsIGZlYXR1cmUsIGdlb20sIHByb2osXG4gICAgICAgICAgICBzdHlsZSk7XG4gICAgICBjYXNlICdQb2x5Z29uJzpcbiAgICAgICAgZ2VvbSA9IC8qKiBAdHlwZSB7IW9sLmdlb20uUG9seWdvbn0gKi8gKGdlb20pO1xuICAgICAgICByZXR1cm4gdGhpcy5vbFBvbHlnb25HZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBnZW9tLCBwcm9qLFxuICAgICAgICAgICAgc3R5bGUpO1xuICAgICAgY2FzZSAnTXVsdGlQb2ludCc6XG4gICAgICBjYXNlICdNdWx0aUxpbmVTdHJpbmcnOlxuICAgICAgY2FzZSAnTXVsdGlQb2x5Z29uJzpcbiAgICAgICAgY29uc3QgcmVzdWx0MiA9IHRoaXMub2xNdWx0aUdlb21ldHJ5VG9DZXNpdW0obGF5ZXIsIGZlYXR1cmUsIGdlb20sIHByb2osXG4gICAgICAgICAgICBzdHlsZSwgY29udGV4dC5iaWxsYm9hcmRzLCBuZXdCaWxsYm9hcmRBZGRlZENhbGxiYWNrKTtcbiAgICAgICAgaWYgKCFyZXN1bHQyKSB7XG4gICAgICAgICAgLy8gbm8gd3JhcHBpbmcgcHJpbWl0aXZlXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDI7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ0xpbmVhclJpbmcnOlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpbmVhclJpbmcgc2hvdWxkIG9ubHkgYmUgcGFydCBvZiBwb2x5Z29uLicpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPbCBnZW9tIHR5cGUgbm90IGhhbmRsZWQgOiAke2dlb20uZ2V0VHlwZSgpfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIE9wZW5MYXllcnMgdmVjdG9yIGxheWVyIHRvIENlc2l1bSBwcmltaXRpdmUgY29sbGVjdGlvbi5cbiAgICogRm9yIGVhY2ggZmVhdHVyZSwgdGhlIGFzc29jaWF0ZWQgcHJpbWl0aXZlIHdpbGwgYmUgc3RvcmVkIGluXG4gICAqIGBmZWF0dXJlUHJpbWl0aXZlTWFwYC5cbiAgICogQHBhcmFtIHshKG9sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZSl9IG9sTGF5ZXJcbiAgICogQHBhcmFtIHshb2wuVmlld30gb2xWaWV3XG4gICAqIEBwYXJhbSB7IU9iamVjdC48bnVtYmVyLCAhQ2VzaXVtLlByaW1pdGl2ZT59IGZlYXR1cmVQcmltaXRpdmVNYXBcbiAgICogQHJldHVybiB7IW9sY3MuY29yZS5WZWN0b3JMYXllckNvdW50ZXJwYXJ0fVxuICAgKiBAYXBpXG4gICAqL1xuICBvbFZlY3RvckxheWVyVG9DZXNpdW0ob2xMYXllciwgb2xWaWV3LCBmZWF0dXJlUHJpbWl0aXZlTWFwKSB7XG4gICAgY29uc3QgcHJvaiA9IG9sVmlldy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IG9sVmlldy5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICBpZiAocmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkIHx8ICFwcm9qKSB7XG4gICAgICBjb25zb2xlLmFzc2VydChmYWxzZSwgJ1ZpZXcgbm90IHJlYWR5Jyk7XG4gICAgICAvLyBhbiBhc3NlcnRpb24gaXMgbm90IGVub3VnaCBmb3IgY2xvc3VyZSB0byBhc3N1bWUgcmVzb2x1dGlvbiBhbmQgcHJvalxuICAgICAgLy8gYXJlIGRlZmluZWRcbiAgICAgIHRocm93IG5ldyBFcnJvcignVmlldyBub3QgcmVhZHknKTtcbiAgICB9XG5cbiAgICBsZXQgc291cmNlID0gb2xMYXllci5nZXRTb3VyY2UoKTtcbiAgICBpZiAoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VDbHVzdGVyKSB7XG4gICAgICBzb3VyY2UgPSBzb3VyY2UuZ2V0U291cmNlKCk7XG4gICAgfVxuXG4gICAgY29uc29sZS5hc3NlcnQoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VWZWN0b3IpO1xuICAgIGNvbnN0IGZlYXR1cmVzID0gc291cmNlLmdldEZlYXR1cmVzKCk7XG4gICAgY29uc3QgY291bnRlcnBhcnQgPSBuZXcgb2xjc0NvcmVWZWN0b3JMYXllckNvdW50ZXJwYXJ0KHByb2osIHRoaXMuc2NlbmUpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBjb3VudGVycGFydC5jb250ZXh0O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcbiAgICAgIGlmICghZmVhdHVyZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQHR5cGUge29sLlN0eWxlRnVuY3Rpb258dW5kZWZpbmVkfVxuICAgICAgICovXG4gICAgICBjb25zdCBsYXllclN0eWxlID0gb2xMYXllci5nZXRTdHlsZUZ1bmN0aW9uKCk7XG4gICAgICBjb25zdCBzdHlsZXMgPSB0aGlzLmNvbXB1dGVQbGFpblN0eWxlKG9sTGF5ZXIsIGZlYXR1cmUsIGxheWVyU3R5bGUsXG4gICAgICAgICAgcmVzb2x1dGlvbik7XG4gICAgICBpZiAoIXN0eWxlcyB8fCAhc3R5bGVzLmxlbmd0aCkge1xuICAgICAgICAvLyBvbmx5ICdyZW5kZXInIGZlYXR1cmVzIHdpdGggYSBzdHlsZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBAdHlwZSB7Q2VzaXVtLlByaW1pdGl2ZXxudWxsfVxuICAgICAgICovXG4gICAgICBsZXQgcHJpbWl0aXZlcyA9IG51bGw7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwcmltcyA9IHRoaXMub2xGZWF0dXJlVG9DZXNpdW0ob2xMYXllciwgZmVhdHVyZSwgc3R5bGVzW2ldLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHByaW1zKSB7XG4gICAgICAgICAgaWYgKCFwcmltaXRpdmVzKSB7XG4gICAgICAgICAgICBwcmltaXRpdmVzID0gcHJpbXM7XG4gICAgICAgICAgfSBlbHNlIGlmIChwcmltcykge1xuICAgICAgICAgICAgbGV0IGkgPSAwLCBwcmltO1xuICAgICAgICAgICAgd2hpbGUgKChwcmltID0gcHJpbXMuZ2V0KGkpKSkge1xuICAgICAgICAgICAgICBwcmltaXRpdmVzLmFkZChwcmltKTtcbiAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFwcmltaXRpdmVzKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZmVhdHVyZVByaW1pdGl2ZU1hcFtnZXRVaWQoZmVhdHVyZSldID0gcHJpbWl0aXZlcztcbiAgICAgIGNvdW50ZXJwYXJ0LmdldFJvb3RQcmltaXRpdmUoKS5hZGQocHJpbWl0aXZlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvdW50ZXJwYXJ0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYW4gT3BlbkxheWVycyBmZWF0dXJlIHRvIENlc2l1bSBwcmltaXRpdmUgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHshKG9sLmxheWVyLlZlY3RvcnxvbC5sYXllci5JbWFnZSl9IGxheWVyXG4gICAqIEBwYXJhbSB7IW9sLlZpZXd9IHZpZXdcbiAgICogQHBhcmFtIHshb2wuRmVhdHVyZX0gZmVhdHVyZVxuICAgKiBAcGFyYW0geyFpbXBvcnQoJ29sY3MvY29yZS9WZWN0b3JMYXllckNvbnRlcnBhcnQuanMnKS5PbEZlYXR1cmVUb0Nlc2l1bUNvbnRleHR9IGNvbnRleHRcbiAgICogQHJldHVybiB7Q2VzaXVtLlByaW1pdGl2ZX1cbiAgICogQGFwaVxuICAgKi9cbiAgY29udmVydChsYXllciwgdmlldywgZmVhdHVyZSwgY29udGV4dCkge1xuICAgIGNvbnN0IHByb2ogPSB2aWV3LmdldFByb2plY3Rpb24oKTtcbiAgICBjb25zdCByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICBpZiAocmVzb2x1dGlvbiA9PSB1bmRlZmluZWQgfHwgIXByb2opIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtvbC5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICBjb25zdCBsYXllclN0eWxlID0gbGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpO1xuXG4gICAgY29uc3Qgc3R5bGVzID0gdGhpcy5jb21wdXRlUGxhaW5TdHlsZShsYXllciwgZmVhdHVyZSwgbGF5ZXJTdHlsZSwgcmVzb2x1dGlvbik7XG5cbiAgICBpZiAoIXN0eWxlcyB8fCAhc3R5bGVzLmxlbmd0aCkge1xuICAgICAgLy8gb25seSAncmVuZGVyJyBmZWF0dXJlcyB3aXRoIGEgc3R5bGVcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnRleHQucHJvamVjdGlvbiA9IHByb2o7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q2VzaXVtLlByaW1pdGl2ZXxudWxsfVxuICAgICAqL1xuICAgIGxldCBwcmltaXRpdmVzID0gbnVsbDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcHJpbXMgPSB0aGlzLm9sRmVhdHVyZVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBzdHlsZXNbaV0sIGNvbnRleHQpO1xuICAgICAgaWYgKCFwcmltaXRpdmVzKSB7XG4gICAgICAgIHByaW1pdGl2ZXMgPSBwcmltcztcbiAgICAgIH0gZWxzZSBpZiAocHJpbXMpIHtcbiAgICAgICAgbGV0IGkgPSAwLCBwcmltO1xuICAgICAgICB3aGlsZSAoKHByaW0gPSBwcmltcy5nZXQoaSkpKSB7XG4gICAgICAgICAgcHJpbWl0aXZlcy5hZGQocHJpbSk7XG4gICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcmltaXRpdmVzO1xuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgRmVhdHVyZUNvbnZlcnRlcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGEgbWFwIGZyYW1lIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjcG9zdHJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT1NUUkVOREVSOiAncG9zdHJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBzdGFydHMgbW92aW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjbW92ZXN0YXJ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1PVkVTVEFSVDogJ21vdmVzdGFydCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBtYXAgaXMgbW92ZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNtb3ZlZW5kXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1PVkVFTkQ6ICdtb3ZlZW5kJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBFdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL092ZXJsYXlQb3NpdGlvbmluZ1xuICovXG4vKipcbiAqIE92ZXJsYXkgcG9zaXRpb246IGAnYm90dG9tLWxlZnQnYCwgYCdib3R0b20tY2VudGVyJ2AsICBgJ2JvdHRvbS1yaWdodCdgLFxuICogYCdjZW50ZXItbGVmdCdgLCBgJ2NlbnRlci1jZW50ZXInYCwgYCdjZW50ZXItcmlnaHQnYCwgYCd0b3AtbGVmdCdgLFxuICogYCd0b3AtY2VudGVyJ2AsIGAndG9wLXJpZ2h0J2BcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBCT1RUT01fTEVGVDogJ2JvdHRvbS1sZWZ0JyxcbiAgICBCT1RUT01fQ0VOVEVSOiAnYm90dG9tLWNlbnRlcicsXG4gICAgQk9UVE9NX1JJR0hUOiAnYm90dG9tLXJpZ2h0JyxcbiAgICBDRU5URVJfTEVGVDogJ2NlbnRlci1sZWZ0JyxcbiAgICBDRU5URVJfQ0VOVEVSOiAnY2VudGVyLWNlbnRlcicsXG4gICAgQ0VOVEVSX1JJR0hUOiAnY2VudGVyLXJpZ2h0JyxcbiAgICBUT1BfTEVGVDogJ3RvcC1sZWZ0JyxcbiAgICBUT1BfQ0VOVEVSOiAndG9wLWNlbnRlcicsXG4gICAgVE9QX1JJR0hUOiAndG9wLXJpZ2h0Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PdmVybGF5UG9zaXRpb25pbmcuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvT3ZlcmxheVxuICovXG5pbXBvcnQgQmFzZU9iamVjdCwgeyBnZXRDaGFuZ2VFdmVudFR5cGUgfSBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgTWFwRXZlbnRUeXBlIGZyb20gJy4vTWFwRXZlbnRUeXBlLmpzJztcbmltcG9ydCBPdmVybGF5UG9zaXRpb25pbmcgZnJvbSAnLi9PdmVybGF5UG9zaXRpb25pbmcuanMnO1xuaW1wb3J0IHsgQ0xBU1NfU0VMRUNUQUJMRSB9IGZyb20gJy4vY3NzLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zRXh0ZW50IH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGgsIHJlbW92ZUNoaWxkcmVuLCByZW1vdmVOb2RlIH0gZnJvbSAnLi9kb20uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcnxzdHJpbmd9IFtpZF0gU2V0IHRoZSBvdmVybGF5IGlkLiBUaGUgb3ZlcmxheSBpZCBjYW4gYmUgdXNlZFxuICogd2l0aCB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI2dldE92ZXJsYXlCeUlkfSBtZXRob2QuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBbZWxlbWVudF0gVGhlIG92ZXJsYXkgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW29mZnNldD1bMCwgMF1dIE9mZnNldHMgaW4gcGl4ZWxzIHVzZWQgd2hlbiBwb3NpdGlvbmluZ1xuICogdGhlIG92ZXJsYXkuIFRoZSBmaXJzdCBlbGVtZW50IGluIHRoZVxuICogYXJyYXkgaXMgdGhlIGhvcml6b250YWwgb2Zmc2V0LiBBIHBvc2l0aXZlIHZhbHVlIHNoaWZ0cyB0aGUgb3ZlcmxheSByaWdodC5cbiAqIFRoZSBzZWNvbmQgZWxlbWVudCBpbiB0aGUgYXJyYXkgaXMgdGhlIHZlcnRpY2FsIG9mZnNldC4gQSBwb3NpdGl2ZSB2YWx1ZVxuICogc2hpZnRzIHRoZSBvdmVybGF5IGRvd24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbcG9zaXRpb25dIFRoZSBvdmVybGF5IHBvc2l0aW9uXG4gKiBpbiBtYXAgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9PdmVybGF5UG9zaXRpb25pbmcuanNcIikuZGVmYXVsdH0gW3Bvc2l0aW9uaW5nPSd0b3AtbGVmdCddIERlZmluZXMgaG93XG4gKiB0aGUgb3ZlcmxheSBpcyBhY3R1YWxseSBwb3NpdGlvbmVkIHdpdGggcmVzcGVjdCB0byBpdHMgYHBvc2l0aW9uYCBwcm9wZXJ0eS5cbiAqIFBvc3NpYmxlIHZhbHVlcyBhcmUgYCdib3R0b20tbGVmdCdgLCBgJ2JvdHRvbS1jZW50ZXInYCwgYCdib3R0b20tcmlnaHQnYCxcbiAqIGAnY2VudGVyLWxlZnQnYCwgYCdjZW50ZXItY2VudGVyJ2AsIGAnY2VudGVyLXJpZ2h0J2AsIGAndG9wLWxlZnQnYCxcbiAqIGAndG9wLWNlbnRlcidgLCBhbmQgYCd0b3AtcmlnaHQnYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3N0b3BFdmVudD10cnVlXSBXaGV0aGVyIGV2ZW50IHByb3BhZ2F0aW9uIHRvIHRoZSBtYXBcbiAqIHZpZXdwb3J0IHNob3VsZCBiZSBzdG9wcGVkLiBJZiBgdHJ1ZWAgdGhlIG92ZXJsYXkgaXMgcGxhY2VkIGluIHRoZSBzYW1lXG4gKiBjb250YWluZXIgYXMgdGhhdCBvZiB0aGUgY29udHJvbHMgKENTUyBjbGFzcyBuYW1lXG4gKiBgb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRgKTsgaWYgYGZhbHNlYCBpdCBpcyBwbGFjZWQgaW4gdGhlIGNvbnRhaW5lclxuICogd2l0aCBDU1MgY2xhc3MgbmFtZSBzcGVjaWZpZWQgYnkgdGhlIGBjbGFzc05hbWVgIHByb3BlcnR5LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW5zZXJ0Rmlyc3Q9dHJ1ZV0gV2hldGhlciB0aGUgb3ZlcmxheSBpcyBpbnNlcnRlZCBmaXJzdFxuICogaW4gdGhlIG92ZXJsYXkgY29udGFpbmVyLCBvciBhcHBlbmRlZC4gSWYgdGhlIG92ZXJsYXkgaXMgcGxhY2VkIGluIHRoZSBzYW1lXG4gKiBjb250YWluZXIgYXMgdGhhdCBvZiB0aGUgY29udHJvbHMgKHNlZSB0aGUgYHN0b3BFdmVudGAgb3B0aW9uKSB5b3Ugd2lsbFxuICogcHJvYmFibHkgc2V0IGBpbnNlcnRGaXJzdGAgdG8gYHRydWVgIHNvIHRoZSBvdmVybGF5IGlzIGRpc3BsYXllZCBiZWxvdyB0aGVcbiAqIGNvbnRyb2xzLlxuICogQHByb3BlcnR5IHtQYW5JbnRvVmlld09wdGlvbnN8Ym9vbGVhbn0gW2F1dG9QYW49ZmFsc2VdIFBhbiB0aGUgbWFwIHdoZW4gY2FsbGluZ1xuICogYHNldFBvc2l0aW9uYCwgc28gdGhhdCB0aGUgb3ZlcmxheSBpcyBlbnRpcmVseSB2aXNpYmxlIGluIHRoZSBjdXJyZW50IHZpZXdwb3J0P1xuICogSWYgYHRydWVgIChkZXByZWNhdGVkKSwgdGhlbiBgYXV0b1BhbkFuaW1hdGlvbmAgYW5kIGBhdXRvUGFuTWFyZ2luYCB3aWxsIGJlXG4gKiB1c2VkIHRvIGRldGVybWluZSB0aGUgcGFubmluZyBwYXJhbWV0ZXJzOyBpZiBhbiBvYmplY3QgaXMgc3VwcGxpZWQgdGhlbiBvdGhlclxuICogcGFyYW1ldGVycyBhcmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7UGFuT3B0aW9uc30gW2F1dG9QYW5BbmltYXRpb25dIFRoZSBhbmltYXRpb24gb3B0aW9ucyB1c2VkIHRvIHBhblxuICogdGhlIG92ZXJsYXkgaW50byB2aWV3LiBUaGlzIGFuaW1hdGlvbiBpcyBvbmx5IHVzZWQgd2hlbiBgYXV0b1BhbmAgaXMgZW5hYmxlZC5cbiAqIEEgYGR1cmF0aW9uYCBhbmQgYGVhc2luZ2AgbWF5IGJlIHByb3ZpZGVkIHRvIGN1c3RvbWl6ZSB0aGUgYW5pbWF0aW9uLlxuICogRGVwcmVjYXRlZCBhbmQgaWdub3JlZCBpZiBgYXV0b1BhbmAgaXMgc3VwcGxpZWQgYXMgYW4gb2JqZWN0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFthdXRvUGFuTWFyZ2luPTIwXSBUaGUgbWFyZ2luIChpbiBwaXhlbHMpIGJldHdlZW4gdGhlXG4gKiBvdmVybGF5IGFuZCB0aGUgYm9yZGVycyBvZiB0aGUgbWFwIHdoZW4gYXV0b3Bhbm5pbmcuIERlcHJlY2F0ZWQgYW5kIGlnbm9yZWRcbiAqIGlmIGBhdXRvUGFuYCBpcyBzdXBwbGllZCBhcyBhbiBvYmplY3QuXG4gKiBAcHJvcGVydHkge1BhbkludG9WaWV3T3B0aW9uc30gW2F1dG9QYW5PcHRpb25zXSBUaGUgb3B0aW9ucyB0byB1c2UgZm9yIHRoZVxuICogYXV0b1Bhbi4gVGhpcyBpcyBvbmx5IHVzZWQgd2hlbiBgYXV0b1BhbmAgaXMgZW5hYmxlZCBhbmQgaGFzIHByZWZlcmVuY2Ugb3ZlclxuICogdGhlIGluZGl2aWR1YWwgYGF1dG9QYW5NYXJnaW5gIGFuZCBgYXV0b1Bhbk9wdGlvbnNgLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLW92ZXJsYXktY29udGFpbmVyIG9sLXNlbGVjdGFibGUnXSBDU1MgY2xhc3NcbiAqIG5hbWUuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUGFuT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDAwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB0byB1c2UuIENhblxuICogYmUgb25lIGZyb20ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd9IG9yIGEgY3VzdG9tIGZ1bmN0aW9uLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZ35pbkFuZE91dH0uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUGFuSW50b1ZpZXdPcHRpb25zXG4gKiBAcHJvcGVydHkge1Bhbk9wdGlvbnN9IFthbmltYXRpb249e31dIFRoZSBhbmltYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIHBhblxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXJnaW49MjBdIFRoZSBtYXJnaW4gKGluIHBpeGVscykgYmV0d2VlbiB0aGVcbiAqIG92ZXJsYXkgYW5kIHRoZSBib3JkZXJzIG9mIHRoZSBtYXAgd2hlbiBwYW5uaW5nIGludG8gdmlldy5cbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByb3RlY3RlZFxuICovXG52YXIgUHJvcGVydHkgPSB7XG4gICAgRUxFTUVOVDogJ2VsZW1lbnQnLFxuICAgIE1BUDogJ21hcCcsXG4gICAgT0ZGU0VUOiAnb2Zmc2V0JyxcbiAgICBQT1NJVElPTjogJ3Bvc2l0aW9uJyxcbiAgICBQT1NJVElPTklORzogJ3Bvc2l0aW9uaW5nJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFuIGVsZW1lbnQgdG8gYmUgZGlzcGxheWVkIG92ZXIgdGhlIG1hcCBhbmQgYXR0YWNoZWQgdG8gYSBzaW5nbGUgbWFwXG4gKiBsb2NhdGlvbi4gIExpa2Uge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0NvbnRyb2x+Q29udHJvbH0sIE92ZXJsYXlzIGFyZVxuICogdmlzaWJsZSB3aWRnZXRzLiBVbmxpa2UgQ29udHJvbHMsIHRoZXkgYXJlIG5vdCBpbiBhIGZpeGVkIHBvc2l0aW9uIG9uIHRoZVxuICogc2NyZWVuLCBidXQgYXJlIHRpZWQgdG8gYSBnZW9ncmFwaGljYWwgY29vcmRpbmF0ZSwgc28gcGFubmluZyB0aGUgbWFwIHdpbGxcbiAqIG1vdmUgYW4gT3ZlcmxheSBidXQgbm90IGEgQ29udHJvbC5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQgT3ZlcmxheSBmcm9tICdvbC9PdmVybGF5JztcbiAqXG4gKiAgICAgdmFyIHBvcHVwID0gbmV3IE92ZXJsYXkoe1xuICogICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJylcbiAqICAgICB9KTtcbiAqICAgICBwb3B1cC5zZXRQb3NpdGlvbihjb29yZGluYXRlKTtcbiAqICAgICBtYXAuYWRkT3ZlcmxheShwb3B1cCk7XG4gKlxuICogQGFwaVxuICovXG52YXIgT3ZlcmxheSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT3ZlcmxheSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgT3ZlcmxheSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE92ZXJsYXkob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7T3B0aW9uc31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHN0cmluZ3x1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pZCA9IG9wdGlvbnMuaWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW5zZXJ0Rmlyc3QgPVxuICAgICAgICAgICAgb3B0aW9ucy5pbnNlcnRGaXJzdCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pbnNlcnRGaXJzdCA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RvcEV2ZW50ID0gb3B0aW9ucy5zdG9wRXZlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc3RvcEV2ZW50IDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBfdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9XG4gICAgICAgICAgICBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmNsYXNzTmFtZVxuICAgICAgICAgICAgICAgIDogJ29sLW92ZXJsYXktY29udGFpbmVyICcgKyBDTEFTU19TRUxFQ1RBQkxFO1xuICAgICAgICBfdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgX3RoaXMuZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgICAgICB2YXIgYXV0b1BhbiA9IG9wdGlvbnMuYXV0b1BhbjtcbiAgICAgICAgaWYgKGF1dG9QYW4gJiYgJ29iamVjdCcgIT09IHR5cGVvZiBhdXRvUGFuKSB7XG4gICAgICAgICAgICBhdXRvUGFuID0ge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogb3B0aW9ucy5hdXRvUGFuQW5pbWF0aW9uLFxuICAgICAgICAgICAgICAgIG1hcmdpbjogb3B0aW9ucy5hdXRvUGFuTWFyZ2luLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7UGFuSW50b1ZpZXdPcHRpb25zfGZhbHNlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXV0b1BhbiA9IC8qKiBAdHlwZSB7UGFuSW50b1ZpZXdPcHRpb25zfSAqLyAoYXV0b1BhbikgfHwgZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHt7dHJhbnNmb3JtXzogc3RyaW5nLFxuICAgICAgICAgKiAgICAgICAgIHZpc2libGU6IGJvb2xlYW59fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWQgPSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1fOiAnJyxcbiAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwUG9zdHJlbmRlckxpc3RlbmVyS2V5ID0gbnVsbDtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoUHJvcGVydHkuRUxFTUVOVCksIF90aGlzLmhhbmRsZUVsZW1lbnRDaGFuZ2VkKTtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoUHJvcGVydHkuTUFQKSwgX3RoaXMuaGFuZGxlTWFwQ2hhbmdlZCk7XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKFByb3BlcnR5Lk9GRlNFVCksIF90aGlzLmhhbmRsZU9mZnNldENoYW5nZWQpO1xuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKGdldENoYW5nZUV2ZW50VHlwZShQcm9wZXJ0eS5QT1NJVElPTiksIF90aGlzLmhhbmRsZVBvc2l0aW9uQ2hhbmdlZCk7XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKFByb3BlcnR5LlBPU0lUSU9OSU5HKSwgX3RoaXMuaGFuZGxlUG9zaXRpb25pbmdDaGFuZ2VkKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRFbGVtZW50KG9wdGlvbnMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc2V0T2Zmc2V0KG9wdGlvbnMub2Zmc2V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9mZnNldCA6IFswLCAwXSk7XG4gICAgICAgIF90aGlzLnNldFBvc2l0aW9uaW5nKG9wdGlvbnMucG9zaXRpb25pbmcgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyAvKiogQHR5cGUge2ltcG9ydChcIi4vT3ZlcmxheVBvc2l0aW9uaW5nLmpzXCIpLmRlZmF1bHR9ICovIChvcHRpb25zLnBvc2l0aW9uaW5nKVxuICAgICAgICAgICAgOiBPdmVybGF5UG9zaXRpb25pbmcuVE9QX0xFRlQpO1xuICAgICAgICBpZiAob3B0aW9ucy5wb3NpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQb3NpdGlvbihvcHRpb25zLnBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgRE9NIGVsZW1lbnQgb2YgdGhpcyBvdmVybGF5LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fHVuZGVmaW5lZH0gVGhlIEVsZW1lbnQgY29udGFpbmluZyB0aGUgb3ZlcmxheS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5nZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtIVE1MRWxlbWVudHx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5FTEVNRU5UKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG92ZXJsYXkgaWRlbnRpZmllciB3aGljaCBpcyBzZXQgb24gY29uc3RydWN0b3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHN0cmluZ3x1bmRlZmluZWR9IElkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBvdmVybGF5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgbWFwIHRoYXQgdGhlXG4gICAgICogb3ZlcmxheSBpcyBwYXJ0IG9mLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5NQVApKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgb2Zmc2V0IG9mIHRoaXMgb3ZlcmxheS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgb2Zmc2V0LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmdldE9mZnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5Lk9GRlNFVCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoaXMgb3ZlcmxheS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBzcGF0aWFsIHBvaW50IHRoYXQgdGhlIG92ZXJsYXkgaXNcbiAgICAgKiAgICAgYW5jaG9yZWQgYXQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlBPU0lUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgcG9zaXRpb25pbmcgb2YgdGhpcyBvdmVybGF5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheVBvc2l0aW9uaW5nLmpzXCIpLmRlZmF1bHR9IEhvdyB0aGUgb3ZlcmxheSBpcyBwb3NpdGlvbmVkXG4gICAgICogICAgIHJlbGF0aXZlIHRvIGl0cyBwb2ludCBvbiB0aGUgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmdldFBvc2l0aW9uaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXlQb3NpdGlvbmluZy5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXQoUHJvcGVydHkuUE9TSVRJT05JTkcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5oYW5kbGVFbGVtZW50Q2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5lbGVtZW50KTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnQoKTtcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmhhbmRsZU1hcENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm1hcFBvc3RyZW5kZXJMaXN0ZW5lcktleSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFBvc3RyZW5kZXJMaXN0ZW5lcktleSk7XG4gICAgICAgICAgICB0aGlzLm1hcFBvc3RyZW5kZXJMaXN0ZW5lcktleSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIGlmIChtYXApIHtcbiAgICAgICAgICAgIHRoaXMubWFwUG9zdHJlbmRlckxpc3RlbmVyS2V5ID0gbGlzdGVuKG1hcCwgTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGl4ZWxQb3NpdGlvbigpO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuc3RvcEV2ZW50XG4gICAgICAgICAgICAgICAgPyBtYXAuZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCgpXG4gICAgICAgICAgICAgICAgOiBtYXAuZ2V0T3ZlcmxheUNvbnRhaW5lcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5zZXJ0Rmlyc3QpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgY29udGFpbmVyLmNoaWxkTm9kZXNbMF0gfHwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGVyZm9ybUF1dG9QYW4oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVQaXhlbFBvc2l0aW9uKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuaGFuZGxlT2Zmc2V0Q2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVQaXhlbFBvc2l0aW9uKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuaGFuZGxlUG9zaXRpb25DaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVBpeGVsUG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy5wZXJmb3JtQXV0b1BhbigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmhhbmRsZVBvc2l0aW9uaW5nQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVQaXhlbFBvc2l0aW9uKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIERPTSBlbGVtZW50IHRvIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG92ZXJsYXkuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudHx1bmRlZmluZWR9IGVsZW1lbnQgVGhlIEVsZW1lbnQgY29udGFpbmluZyB0aGUgb3ZlcmxheS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5zZXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuRUxFTUVOVCwgZWxlbWVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1hcCB0byBiZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBvdmVybGF5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IG1hcCBUaGUgbWFwIHRoYXQgdGhlXG4gICAgICogb3ZlcmxheSBpcyBwYXJ0IG9mLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuTUFQLCBtYXApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvZmZzZXQgZm9yIHRoaXMgb3ZlcmxheS5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IG9mZnNldCBPZmZzZXQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUuc2V0T2Zmc2V0ID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5PRkZTRVQsIG9mZnNldCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHBvc2l0aW9uIGZvciB0aGlzIG92ZXJsYXkuIElmIHRoZSBwb3NpdGlvbiBpcyBgdW5kZWZpbmVkYCB0aGVcbiAgICAgKiBvdmVybGF5IGlzIGhpZGRlbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gcG9zaXRpb24gVGhlIHNwYXRpYWwgcG9pbnQgdGhhdCB0aGUgb3ZlcmxheVxuICAgICAqICAgICBpcyBhbmNob3JlZCBhdC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5QT1NJVElPTiwgcG9zaXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUGFuIHRoZSBtYXAgc28gdGhhdCB0aGUgb3ZlcmxheSBpcyBlbnRpcmVseSB2aXNpc2JsZSBpbiB0aGUgY3VycmVudCB2aWV3cG9ydFxuICAgICAqIChpZiBuZWNlc3NhcnkpIHVzaW5nIHRoZSBjb25maWd1cmVkIGF1dG9QYW4gcGFyYW1ldGVyc1xuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5wZXJmb3JtQXV0b1BhbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXV0b1Bhbikge1xuICAgICAgICAgICAgdGhpcy5wYW5JbnRvVmlldyh0aGlzLmF1dG9QYW4pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQYW4gdGhlIG1hcCBzbyB0aGF0IHRoZSBvdmVybGF5IGlzIGVudGlyZWx5IHZpc2libGUgaW4gdGhlIGN1cnJlbnQgdmlld3BvcnRcbiAgICAgKiAoaWYgbmVjZXNzYXJ5KS5cbiAgICAgKiBAcGFyYW0ge1BhbkludG9WaWV3T3B0aW9ucz19IG9wdF9wYW5JbnRvVmlld09wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIHBhbiBhY3Rpb25cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUucGFuSW50b1ZpZXcgPSBmdW5jdGlvbiAob3B0X3BhbkludG9WaWV3T3B0aW9ucykge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgaWYgKCFtYXAgfHwgIW1hcC5nZXRUYXJnZXRFbGVtZW50KCkgfHwgIXRoaXMuZ2V0KFByb3BlcnR5LlBPU0lUSU9OKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXBSZWN0ID0gdGhpcy5nZXRSZWN0KG1hcC5nZXRUYXJnZXRFbGVtZW50KCksIG1hcC5nZXRTaXplKCkpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgpO1xuICAgICAgICB2YXIgb3ZlcmxheVJlY3QgPSB0aGlzLmdldFJlY3QoZWxlbWVudCwgW1xuICAgICAgICAgICAgb3V0ZXJXaWR0aChlbGVtZW50KSxcbiAgICAgICAgICAgIG91dGVySGVpZ2h0KGVsZW1lbnQpLFxuICAgICAgICBdKTtcbiAgICAgICAgdmFyIHBhbkludG9WaWV3T3B0aW9ucyA9IG9wdF9wYW5JbnRvVmlld09wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBteU1hcmdpbiA9IHBhbkludG9WaWV3T3B0aW9ucy5tYXJnaW4gPT09IHVuZGVmaW5lZCA/IDIwIDogcGFuSW50b1ZpZXdPcHRpb25zLm1hcmdpbjtcbiAgICAgICAgaWYgKCFjb250YWluc0V4dGVudChtYXBSZWN0LCBvdmVybGF5UmVjdCkpIHtcbiAgICAgICAgICAgIC8vIHRoZSBvdmVybGF5IGlzIG5vdCBjb21wbGV0ZWx5IGluc2lkZSB0aGUgdmlld3BvcnQsIHNvIHBhbiB0aGUgbWFwXG4gICAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IG92ZXJsYXlSZWN0WzBdIC0gbWFwUmVjdFswXTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRSaWdodCA9IG1hcFJlY3RbMl0gLSBvdmVybGF5UmVjdFsyXTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRUb3AgPSBvdmVybGF5UmVjdFsxXSAtIG1hcFJlY3RbMV07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0Qm90dG9tID0gbWFwUmVjdFszXSAtIG92ZXJsYXlSZWN0WzNdO1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gWzAsIDBdO1xuICAgICAgICAgICAgaWYgKG9mZnNldExlZnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gbW92ZSBtYXAgdG8gdGhlIGxlZnRcbiAgICAgICAgICAgICAgICBkZWx0YVswXSA9IG9mZnNldExlZnQgLSBteU1hcmdpbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9mZnNldFJpZ2h0IDwgMCkge1xuICAgICAgICAgICAgICAgIC8vIG1vdmUgbWFwIHRvIHRoZSByaWdodFxuICAgICAgICAgICAgICAgIGRlbHRhWzBdID0gTWF0aC5hYnMob2Zmc2V0UmlnaHQpICsgbXlNYXJnaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2Zmc2V0VG9wIDwgMCkge1xuICAgICAgICAgICAgICAgIC8vIG1vdmUgbWFwIHVwXG4gICAgICAgICAgICAgICAgZGVsdGFbMV0gPSBvZmZzZXRUb3AgLSBteU1hcmdpbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9mZnNldEJvdHRvbSA8IDApIHtcbiAgICAgICAgICAgICAgICAvLyBtb3ZlIG1hcCBkb3duXG4gICAgICAgICAgICAgICAgZGVsdGFbMV0gPSBNYXRoLmFicyhvZmZzZXRCb3R0b20pICsgbXlNYXJnaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVsdGFbMF0gIT09IDAgfHwgZGVsdGFbMV0gIT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKG1hcFxuICAgICAgICAgICAgICAgICAgICAuZ2V0VmlldygpXG4gICAgICAgICAgICAgICAgICAgIC5nZXRDZW50ZXJJbnRlcm5hbCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyUHggPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKGNlbnRlcik7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0NlbnRlclB4ID0gW2NlbnRlclB4WzBdICsgZGVsdGFbMF0sIGNlbnRlclB4WzFdICsgZGVsdGFbMV1dO1xuICAgICAgICAgICAgICAgIHZhciBwYW5PcHRpb25zID0gcGFuSW50b1ZpZXdPcHRpb25zLmFuaW1hdGlvbiB8fCB7fTtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VmlldygpLmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcjogbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChuZXdDZW50ZXJQeCksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwYW5PcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHBhbk9wdGlvbnMuZWFzaW5nLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudFxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBUaGUgc2l6ZSBvZiB0aGUgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSBleHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLmdldFJlY3QgPSBmdW5jdGlvbiAoZWxlbWVudCwgc2l6ZSkge1xuICAgICAgICB2YXIgYm94ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIG9mZnNldFggPSBib3gubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldDtcbiAgICAgICAgdmFyIG9mZnNldFkgPSBib3gudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICByZXR1cm4gW29mZnNldFgsIG9mZnNldFksIG9mZnNldFggKyBzaXplWzBdLCBvZmZzZXRZICsgc2l6ZVsxXV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHBvc2l0aW9uaW5nIGZvciB0aGlzIG92ZXJsYXkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXlQb3NpdGlvbmluZy5qc1wiKS5kZWZhdWx0fSBwb3NpdGlvbmluZyBob3cgdGhlIG92ZXJsYXkgaXNcbiAgICAgKiAgICAgcG9zaXRpb25lZCByZWxhdGl2ZSB0byBpdHMgcG9pbnQgb24gdGhlIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5zZXRQb3NpdGlvbmluZyA9IGZ1bmN0aW9uIChwb3NpdGlvbmluZykge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5QT1NJVElPTklORywgcG9zaXRpb25pbmcpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTW9kaWZ5IHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaWJsZSBFbGVtZW50IHZpc2liaWxpdHkuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE92ZXJsYXkucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAodmlzaWJsZSkge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZC52aXNpYmxlICE9PSB2aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHZpc2libGUgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWQudmlzaWJsZSA9IHZpc2libGU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwaXhlbCBwb3NpdGlvbi5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT3ZlcmxheS5wcm90b3R5cGUudXBkYXRlUGl4ZWxQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgaWYgKCFtYXAgfHwgIW1hcC5pc1JlbmRlcmVkKCkgfHwgIXBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwaXhlbCA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKHBvc2l0aW9uKTtcbiAgICAgICAgdmFyIG1hcFNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlcmVkUG9zaXRpb24ocGl4ZWwsIG1hcFNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBUaGUgcGl4ZWwgbG9jYXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9IG1hcFNpemUgVGhlIG1hcCBzaXplLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS51cGRhdGVSZW5kZXJlZFBvc2l0aW9uID0gZnVuY3Rpb24gKHBpeGVsLCBtYXBTaXplKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudC5zdHlsZTtcbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuZ2V0T2Zmc2V0KCk7XG4gICAgICAgIHZhciBwb3NpdGlvbmluZyA9IHRoaXMuZ2V0UG9zaXRpb25pbmcoKTtcbiAgICAgICAgdGhpcy5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQocGl4ZWxbMF0gKyBvZmZzZXRbMF0pICsgJ3B4JztcbiAgICAgICAgdmFyIHkgPSBNYXRoLnJvdW5kKHBpeGVsWzFdICsgb2Zmc2V0WzFdKSArICdweCc7XG4gICAgICAgIHZhciBwb3NYID0gJzAlJztcbiAgICAgICAgdmFyIHBvc1kgPSAnMCUnO1xuICAgICAgICBpZiAocG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLkJPVFRPTV9SSUdIVCB8fFxuICAgICAgICAgICAgcG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLkNFTlRFUl9SSUdIVCB8fFxuICAgICAgICAgICAgcG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLlRPUF9SSUdIVCkge1xuICAgICAgICAgICAgcG9zWCA9ICctMTAwJSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLkJPVFRPTV9DRU5URVIgfHxcbiAgICAgICAgICAgIHBvc2l0aW9uaW5nID09IE92ZXJsYXlQb3NpdGlvbmluZy5DRU5URVJfQ0VOVEVSIHx8XG4gICAgICAgICAgICBwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuVE9QX0NFTlRFUikge1xuICAgICAgICAgICAgcG9zWCA9ICctNTAlJztcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLkJPVFRPTV9MRUZUIHx8XG4gICAgICAgICAgICBwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQk9UVE9NX0NFTlRFUiB8fFxuICAgICAgICAgICAgcG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLkJPVFRPTV9SSUdIVCkge1xuICAgICAgICAgICAgcG9zWSA9ICctMTAwJSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLkNFTlRFUl9MRUZUIHx8XG4gICAgICAgICAgICBwb3NpdGlvbmluZyA9PSBPdmVybGF5UG9zaXRpb25pbmcuQ0VOVEVSX0NFTlRFUiB8fFxuICAgICAgICAgICAgcG9zaXRpb25pbmcgPT0gT3ZlcmxheVBvc2l0aW9uaW5nLkNFTlRFUl9SSUdIVCkge1xuICAgICAgICAgICAgcG9zWSA9ICctNTAlJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyBwb3NYICsgXCIsIFwiICsgcG9zWSArIFwiKSB0cmFuc2xhdGUoXCIgKyB4ICsgXCIsIFwiICsgeSArIFwiKVwiO1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZC50cmFuc2Zvcm1fICE9IHRyYW5zZm9ybSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZC50cmFuc2Zvcm1fID0gdHJhbnNmb3JtO1xuICAgICAgICAgICAgc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBJRTlcbiAgICAgICAgICAgIHN0eWxlLm1zVHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRoZSBvcHRpb25zIHRoaXMgT3ZlcmxheSBoYXMgYmVlbiBjcmVhdGVkIHdpdGhcbiAgICAgKiBAcmV0dXJuIHtPcHRpb25zfSBvdmVybGF5IG9wdGlvbnNcbiAgICAgKi9cbiAgICBPdmVybGF5LnByb3RvdHlwZS5nZXRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xuICAgIH07XG4gICAgcmV0dXJuIE92ZXJsYXk7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IE92ZXJsYXk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PdmVybGF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbGNzLlN5bmNocm9uaXplZE92ZXJsYXlcbiAqL1xuaW1wb3J0IG9sT3ZlcmxheSBmcm9tICdvbC9PdmVybGF5LmpzJztcbmltcG9ydCB7dHJhbnNmb3JtfSBmcm9tICdvbC9wcm9qLmpzJztcbmltcG9ydCB7cmVtb3ZlTm9kZSwgcmVtb3ZlQ2hpbGRyZW59IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQge3VuQnlLZXkgYXMgb2xPYnNlcnZhYmxlVW5CeUtleX0gZnJvbSAnb2wvT2JzZXJ2YWJsZS5qcyc7XG5cblxuLyoqXG4gKiBPcHRpb25zIGZvciBTeW5jaHJvbml6ZWRPdmVybGF5XG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTeW5jaHJvbml6ZWRPdmVybGF5T3B0aW9uc1xuICogQHByb3BlcnR5IHshQ2VzaXVtLlNjZW5lfSBzY2VuZVxuICogQHByb3BlcnR5IHtvbE92ZXJsYXl9IHBhcmVudFxuICogQHByb3BlcnR5IHshaW1wb3J0KCdvbHNjL092ZXJsYXlTeW5jaHJvbml6ZXIuanMnKS5kZWZhdWx0fSBzeW5jaHJvbml6ZXJcbiAqL1xuXG5cbmNsYXNzIFN5bmNocm9uaXplZE92ZXJsYXkgZXh0ZW5kcyBvbE92ZXJsYXkge1xuICAvKipcbiAgICogQHBhcmFtIHtvbGNzeC5TeW5jaHJvbml6ZWRPdmVybGF5T3B0aW9uc30gb3B0aW9ucyBTeW5jaHJvbml6ZWRPdmVybGF5IE9wdGlvbnMuXG4gICAqIEBhcGlcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBjb25zdCBwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgICBzdXBlcihwYXJlbnQuZ2V0T3B0aW9ucygpKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9GdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLnNjZW5lUG9zdFJlbmRlckxpc3RlbmVyUmVtb3Zlcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUNlc2l1bS5TY2VuZX1cbiAgICAgKi9cbiAgICB0aGlzLnNjZW5lXyA9IG9wdGlvbnMuc2NlbmU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshb2xjcy5PdmVybGF5U3luY2hyb25pemVyfVxuICAgICAqL1xuICAgIHRoaXMuc3luY2hyb25pemVyXyA9IG9wdGlvbnMuc3luY2hyb25pemVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IW9sLk92ZXJsYXl9XG4gICAgICovXG4gICAgdGhpcy5wYXJlbnRfID0gcGFyZW50O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7b2wuQ29vcmRpbmF0ZXx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5wb3NpdGlvbldHUzg0XyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge011dGF0aW9uT2JzZXJ2ZXJ9XG4gICAgICovXG4gICAgdGhpcy5vYnNlcnZlcl8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLmhhbmRsZUVsZW1lbnRDaGFuZ2VkLmJpbmQodGhpcykpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXkuPE11dGF0aW9uT2JzZXJ2ZXI+fVxuICAgICAqL1xuICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxvbC5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgIC8vIHN5bmNocm9uaXplIG91ciBPdmVybGF5IHdpdGggdGhlIHBhcmVudCBPdmVybGF5XG4gICAgY29uc3Qgc2V0UHJvcGVydHlGcm9tRXZlbnQgPSBldmVudCA9PiB0aGlzLnNldFByb3BlcnR5RnJvbUV2ZW50XyhldmVudCk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfLnB1c2godGhpcy5wYXJlbnRfLm9uKCdjaGFuZ2U6cG9zaXRpb24nLCBzZXRQcm9wZXJ0eUZyb21FdmVudCkpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKHRoaXMucGFyZW50Xy5vbignY2hhbmdlOmVsZW1lbnQnLCBzZXRQcm9wZXJ0eUZyb21FdmVudCkpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKHRoaXMucGFyZW50Xy5vbignY2hhbmdlOm9mZnNldCcsIHNldFByb3BlcnR5RnJvbUV2ZW50KSk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfLnB1c2godGhpcy5wYXJlbnRfLm9uKCdjaGFuZ2U6cG9zaXRpb24nLCBzZXRQcm9wZXJ0eUZyb21FdmVudCkpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKHRoaXMucGFyZW50Xy5vbignY2hhbmdlOnBvc2l0aW9uaW5nJywgc2V0UHJvcGVydHlGcm9tRXZlbnQpKTtcblxuICAgIHRoaXMuc2V0UHJvcGVydGllcyh0aGlzLnBhcmVudF8uZ2V0UHJvcGVydGllcygpKTtcblxuICAgIHRoaXMuaGFuZGxlTWFwQ2hhbmdlZCgpO1xuICAgIHRoaXMuaGFuZGxlRWxlbWVudENoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb2JzZXJ2ZVRhcmdldF8odGFyZ2V0KSB7XG4gICAgaWYgKCF0aGlzLm9ic2VydmVyXykge1xuICAgICAgLy8gbm90IHJlYWR5LCBza2lwIHRoZSBldmVudCAodGhpcyBvY2N1cnMgb24gY29uc3RydWN0aW9uKVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm9ic2VydmVyXy5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5vYnNlcnZlcl8ub2JzZXJ2ZSh0YXJnZXQsIHtcbiAgICAgIGF0dHJpYnV0ZXM6IGZhbHNlLFxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgICAgIHN1YnRyZWU6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyXy5mb3JFYWNoKChvYnNlcnZlcikgPT4ge1xuICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJfLmxlbmd0aCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IHRhcmdldC5jaGlsZE5vZGVzW2ldO1xuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLmhhbmRsZUVsZW1lbnRDaGFuZ2VkLmJpbmQodGhpcykpO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJfLnB1c2gob2JzZXJ2ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge29sLk9iamVjdC5FdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNldFByb3BlcnR5RnJvbUV2ZW50XyhldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQgJiYgZXZlbnQua2V5KSB7XG4gICAgICB0aGlzLnNldChldmVudC5rZXksIGV2ZW50LnRhcmdldC5nZXQoZXZlbnQua2V5KSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2NlbmUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb3ZlcmxheS5cbiAgICogQHNlZSBvbC5PdmVybGF5LnByb3RvdHlwZS5nZXRNYXBcbiAgICogQHJldHVybiB7IUNlc2l1bS5TY2VuZX0gVGhlIHNjZW5lIHRoYXQgdGhlIG92ZXJsYXkgaXMgcGFydCBvZi5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0U2NlbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2NlbmVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgaGFuZGxlTWFwQ2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5zY2VuZVBvc3RSZW5kZXJMaXN0ZW5lclJlbW92ZXJfKSB7XG4gICAgICB0aGlzLnNjZW5lUG9zdFJlbmRlckxpc3RlbmVyUmVtb3Zlcl8oKTtcbiAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gICAgdGhpcy5zY2VuZVBvc3RSZW5kZXJMaXN0ZW5lclJlbW92ZXJfID0gbnVsbDtcbiAgICBjb25zdCBzY2VuZSA9IHRoaXMuZ2V0U2NlbmUoKTtcbiAgICBpZiAoc2NlbmUpIHtcbiAgICAgIHRoaXMuc2NlbmVQb3N0UmVuZGVyTGlzdGVuZXJSZW1vdmVyXyA9IHNjZW5lLnBvc3RSZW5kZXIuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLnVwZGF0ZVBpeGVsUG9zaXRpb24uYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLnVwZGF0ZVBpeGVsUG9zaXRpb24oKTtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuc3RvcEV2ZW50ID9cbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZXJfLmdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKSA6IHRoaXMuc3luY2hyb25pemVyXy5nZXRPdmVybGF5Q29udGFpbmVyKCk7XG4gICAgICBpZiAodGhpcy5pbnNlcnRGaXJzdCkge1xuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgY29udGFpbmVyLmNoaWxkTm9kZXNbMF0gfHwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBoYW5kbGVQb3NpdGlvbkNoYW5nZWQoKSB7XG4gICAgLy8gdHJhbnNmb3JtIHBvc2l0aW9uIHRvIFdHUzg0XG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCk7XG4gICAgaWYgKHBvc2l0aW9uKSB7XG4gICAgICBjb25zdCBzb3VyY2VQcm9qZWN0aW9uID0gdGhpcy5wYXJlbnRfLmdldE1hcCgpLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICB0aGlzLnBvc2l0aW9uV0dTODRfID0gdHJhbnNmb3JtKHBvc2l0aW9uLCBzb3VyY2VQcm9qZWN0aW9uLCAnRVBTRzo0MzI2Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucG9zaXRpb25XR1M4NF8gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlUGl4ZWxQb3NpdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgaGFuZGxlRWxlbWVudENoYW5nZWQoKSB7XG4gICAgZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUsIHBhcmVudCkge1xuICAgICAgY29uc3QgY2xvbmUgPSBub2RlLmNsb25lTm9kZSgpO1xuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgY2xvbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJywgZXZlbnQpKTtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBub2RlcyA9IG5vZGUuY2hpbGROb2RlcztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFub2Rlc1tpXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNsb25lTm9kZShub2Rlc1tpXSwgY2xvbmUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLmVsZW1lbnQpO1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnQoKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSAmJiBlbGVtZW50LnBhcmVudE5vZGUuY2hpbGROb2Rlcykge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgZWxlbWVudC5wYXJlbnROb2RlLmNoaWxkTm9kZXMpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUsIG51bGwpO1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjbG9uZWROb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAvLyBzZXQgbmV3IE9ic2VydmVyXG4gICAgICB0aGlzLm9ic2VydmVUYXJnZXRfKGVsZW1lbnQucGFyZW50Tm9kZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdXBkYXRlUGl4ZWxQb3NpdGlvbigpIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb25XR1M4NF87XG4gICAgaWYgKCF0aGlzLnNjZW5lXyB8fCAhcG9zaXRpb24pIHtcbiAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBoZWlnaHQgPSAwO1xuICAgIGlmIChwb3NpdGlvbi5sZW5ndGggPT09IDIpIHtcbiAgICAgIGNvbnN0IGdsb2JlSGVpZ2h0ID0gdGhpcy5zY2VuZV8uZ2xvYmUuZ2V0SGVpZ2h0KENlc2l1bS5DYXJ0b2dyYXBoaWMuZnJvbURlZ3JlZXMocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdKSk7XG4gICAgICBpZiAoZ2xvYmVIZWlnaHQgJiYgdGhpcy5zY2VuZV8uZ2xvYmUudGlsZXNMb2FkZWQpIHtcbiAgICAgICAgcG9zaXRpb25bMl0gPSBnbG9iZUhlaWdodDtcbiAgICAgIH1cbiAgICAgIGlmIChnbG9iZUhlaWdodCkge1xuICAgICAgICBoZWlnaHQgPSBnbG9iZUhlaWdodDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaGVpZ2h0ID0gcG9zaXRpb25bMl07XG4gICAgfVxuICAgIGNvbnN0IGNhcnRlc2lhbiA9IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgaGVpZ2h0KTtcbiAgICBjb25zdCBjYW1lcmEgPSB0aGlzLnNjZW5lXy5jYW1lcmE7XG4gICAgY29uc3QgZWxsaXBzb2lkQm91bmRpbmdTcGhlcmUgPSBuZXcgQ2VzaXVtLkJvdW5kaW5nU3BoZXJlKG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpLCA2MzU2NzUyKTtcbiAgICBjb25zdCBvY2NsdWRlciA9IG5ldyBDZXNpdW0uT2NjbHVkZXIoZWxsaXBzb2lkQm91bmRpbmdTcGhlcmUsIGNhbWVyYS5wb3NpdGlvbik7XG4gICAgLy8gY2hlY2sgaWYgb3ZlcmxheSBwb3NpdGlvbiBpcyBiZWhpbmQgdGhlIGhvcml6b25cbiAgICBpZiAoIW9jY2x1ZGVyLmlzUG9pbnRWaXNpYmxlKGNhcnRlc2lhbikpIHtcbiAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGN1bGxpbmdWb2x1bWUgPSBjYW1lcmEuZnJ1c3R1bS5jb21wdXRlQ3VsbGluZ1ZvbHVtZShjYW1lcmEucG9zaXRpb24sIGNhbWVyYS5kaXJlY3Rpb24sIGNhbWVyYS51cCk7XG4gICAgLy8gY2hlY2sgaWYgb3ZlcmxheSBwb3NpdGlvbiBpcyB2aXNpYmxlIGZyb20gdGhlIGNhbWVyYVxuICAgIGlmIChjdWxsaW5nVm9sdW1lLmNvbXB1dGVWaXNpYmlsaXR5KG5ldyBDZXNpdW0uQm91bmRpbmdTcGhlcmUoY2FydGVzaWFuKSkgIT09IDEpIHtcbiAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0VmlzaWJsZSh0cnVlKTtcblxuICAgIGNvbnN0IHBpeGVsQ2FydGVzaWFuID0gdGhpcy5zY2VuZV8uY2FydGVzaWFuVG9DYW52YXNDb29yZGluYXRlcyhjYXJ0ZXNpYW4pO1xuICAgIGNvbnN0IHBpeGVsID0gW3BpeGVsQ2FydGVzaWFuLngsIHBpeGVsQ2FydGVzaWFuLnldO1xuICAgIGNvbnN0IG1hcFNpemUgPSBbdGhpcy5zY2VuZV8uY2FudmFzLndpZHRoLCB0aGlzLnNjZW5lXy5jYW52YXMuaGVpZ2h0XTtcbiAgICB0aGlzLnVwZGF0ZVJlbmRlcmVkUG9zaXRpb24ocGl4ZWwsIG1hcFNpemUpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSBvdmVybGF5LCByZW1vdmluZyBhbGwgaXRzIGxpc3RlbmVycyBhbmQgZWxlbWVudHNcbiAgICogQGFwaVxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5zY2VuZVBvc3RSZW5kZXJMaXN0ZW5lclJlbW92ZXJfKSB7XG4gICAgICB0aGlzLnNjZW5lUG9zdFJlbmRlckxpc3RlbmVyUmVtb3Zlcl8oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJfKSB7XG4gICAgICB0aGlzLm9ic2VydmVyXy5kaXNjb25uZWN0KCk7XG4gICAgfVxuICAgIG9sT2JzZXJ2YWJsZVVuQnlLZXkodGhpcy5saXN0ZW5lcktleXNfKTtcbiAgICB0aGlzLmxpc3RlbmVyS2V5c18uc3BsaWNlKDApO1xuICAgIGlmICh0aGlzLmVsZW1lbnQucmVtb3ZlTm9kZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZU5vZGUodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTeW5jaHJvbml6ZWRPdmVybGF5O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sY3MuT3ZlcmxheVN5bmNocm9uaXplclxuICovXG5pbXBvcnQgb2xjc1N5bmNocm9uaXplZE92ZXJsYXkgZnJvbSAnLi9TeW5jaHJvbml6ZWRPdmVybGF5LmpzJztcbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuL3V0aWwuanMnO1xuXG5jbGFzcyBPdmVybGF5U3luY2hyb25pemVyIHtcbiAgLyoqXG4gICogQHBhcmFtIHshb2wuTWFwfSBtYXBcbiAgKiBAcGFyYW0geyFDZXNpdW0uU2NlbmV9IHNjZW5lXG4gICogQGNvbnN0cnVjdG9yXG4gICogQHRlbXBsYXRlIFRcbiAgKiBAYXBpXG4gICovXG4gIGNvbnN0cnVjdG9yKG1hcCwgc2NlbmUpIHtcbiAgICAvKipcbiAgICAqIEB0eXBlIHshb2wuTWFwfVxuICAgICogQHByb3RlY3RlZFxuICAgICovXG4gICAgdGhpcy5tYXAgPSBtYXA7XG5cbiAgICAvKipcbiAgICAqIEB0eXBlIHtvbC5Db2xsZWN0aW9uLjxvbC5PdmVybGF5Pn1cbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICB0aGlzLm92ZXJsYXlzXyA9IHRoaXMubWFwLmdldE92ZXJsYXlzKCk7XG5cbiAgICAvKipcbiAgICAqIEB0eXBlIHshQ2VzaXVtLlNjZW5lfVxuICAgICogQHByb3RlY3RlZFxuICAgICovXG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuXG4gICAgLyoqXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHR5cGUgeyFFbGVtZW50fVxuICAgICovXG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uY2xhc3NOYW1lID0gJ29sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50JztcbiAgICBjb25zdCBvdmVybGF5RXZlbnRzID0gWydjbGljaycsICdkYmxjbGljaycsICdtb3VzZWRvd24nLCAndG91Y2hzdGFydCcsICdNU1BvaW50ZXJEb3duJywgJ3BvaW50ZXJkb3duJywgJ21vdXNld2hlZWwnLCAnd2hlZWwnXTtcbiAgICBvdmVybGF5RXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGV2dCA9PiBldnQuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgIH0pO1xuICAgIHRoaXMuc2NlbmUuY2FudmFzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xyk7XG5cbiAgICAvKipcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAdHlwZSB7IUVsZW1lbnR9XG4gICAgKi9cbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lcic7XG4gICAgdGhpcy5zY2VuZS5jYW52YXMucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLm92ZXJsYXlDb250YWluZXJfKTtcblxuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7IU9iamVjdDw/LG9sY3MuU3luY2hyb25pemVkT3ZlcmxheT59XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy5vdmVybGF5TWFwXyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdmVybGF5cyB0aGF0IGRvbid0IGFsbG93XG4gICogZXZlbnQgcHJvcGFnYXRpb24uIEVsZW1lbnRzIGFkZGVkIHRvIHRoaXMgY29udGFpbmVyIHdvbid0IGxldCBtb3VzZWRvd24gYW5kXG4gICogdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLCBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXlcbiAgKiBkb24ndCB0cmlnZ2VyIGFueSB7QGxpbmsgb2wuTWFwQnJvd3NlckV2ZW50fS5cbiAgKiBAcmV0dXJuIHshRWxlbWVudH0gVGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyIHRoYXQgc3RvcHMgZXZlbnRzLlxuICAqL1xuICBnZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50KCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfO1xuICB9XG5cbiAgLyoqXG4gICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdmVybGF5cy5cbiAgKiBAcmV0dXJuIHshRWxlbWVudH0gVGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyLlxuICAqL1xuICBnZXRPdmVybGF5Q29udGFpbmVyKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJfO1xuICB9XG5cbiAgLyoqXG4gICogRGVzdHJveSBhbGwgYW5kIHBlcmZvcm0gY29tcGxldGUgc3luY2hyb25pemF0aW9uIG9mIHRoZSBvdmVybGF5cy5cbiAgKiBAYXBpXG4gICovXG4gIHN5bmNocm9uaXplKCkge1xuICAgIHRoaXMuZGVzdHJveUFsbCgpO1xuICAgIHRoaXMuYWRkT3ZlcmxheXMoKTtcbiAgICB0aGlzLm92ZXJsYXlzXy5vbignYWRkJywgdGhpcy5hZGRPdmVybGF5RnJvbUV2ZW50Xy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLm92ZXJsYXlzXy5vbigncmVtb3ZlJywgdGhpcy5yZW1vdmVPdmVybGF5RnJvbUV2ZW50Xy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAqIEBwYXJhbSB7b2wuQ29sbGVjdGlvbi5FdmVudH0gZXZlbnRcbiAgKiBAcHJpdmF0ZVxuICAqL1xuICBhZGRPdmVybGF5RnJvbUV2ZW50XyhldmVudCkge1xuICAgIGNvbnN0IG92ZXJsYXkgPSAvKiogQHR5cGUge29sLk92ZXJsYXl9ICovIChldmVudC5lbGVtZW50KTtcbiAgICB0aGlzLmFkZE92ZXJsYXkob3ZlcmxheSk7XG4gIH1cblxuICAvKipcbiAgKiBAYXBpXG4gICovXG4gIGFkZE92ZXJsYXlzKCkge1xuICAgIHRoaXMub3ZlcmxheXNfLmZvckVhY2goKG92ZXJsYXkpID0+IHsgdGhpcy5hZGRPdmVybGF5KG92ZXJsYXkpOyB9KTtcbiAgfVxuXG4gIC8qKlxuICAqIEBwYXJhbSB7b2wuT3ZlcmxheX0gb3ZlcmxheVxuICAqIEBhcGlcbiAgKi9cbiAgYWRkT3ZlcmxheShvdmVybGF5KSB7XG4gICAgaWYgKCFvdmVybGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNlc2l1bU92ZXJsYXkgPSBuZXcgb2xjc1N5bmNocm9uaXplZE92ZXJsYXkoe1xuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBzeW5jaHJvbml6ZXI6IHRoaXMsXG4gICAgICBwYXJlbnQ6IG92ZXJsYXlcbiAgICB9KTtcblxuICAgIGNvbnN0IG92ZXJsYXlJZCA9IGdldFVpZChvdmVybGF5KS50b1N0cmluZygpO1xuICAgIHRoaXMub3ZlcmxheU1hcF9bb3ZlcmxheUlkXSA9IGNlc2l1bU92ZXJsYXk7XG4gIH1cblxuICAvKipcbiAgKiBAcGFyYW0ge29sLkNvbGxlY3Rpb24uRXZlbnR9IGV2ZW50XG4gICogQHByaXZhdGVcbiAgKi9cbiAgcmVtb3ZlT3ZlcmxheUZyb21FdmVudF8oZXZlbnQpIHtcbiAgICBjb25zdCByZW1vdmVkT3ZlcmxheSA9IC8qKiBAdHlwZSB7b2wuT3ZlcmxheX0gKi8gKGV2ZW50LmVsZW1lbnQpO1xuICAgIHRoaXMucmVtb3ZlT3ZlcmxheShyZW1vdmVkT3ZlcmxheSk7XG4gIH1cblxuICAvKipcbiAgKiBSZW1vdmVzIGFuIG92ZXJsYXkgZnJvbSB0aGUgc2NlbmVcbiAgKiBAcGFyYW0ge29sLk92ZXJsYXl9IG92ZXJsYXlcbiAgKiBAYXBpXG4gICovXG4gIHJlbW92ZU92ZXJsYXkob3ZlcmxheSkge1xuICAgIGNvbnN0IG92ZXJsYXlJZCA9IGdldFVpZChvdmVybGF5KS50b1N0cmluZygpO1xuICAgIGNvbnN0IGNzT3ZlcmxheSA9IHRoaXMub3ZlcmxheU1hcF9bb3ZlcmxheUlkXTtcbiAgICBpZiAoY3NPdmVybGF5KSB7XG4gICAgICBjc092ZXJsYXkuZGVzdHJveSgpO1xuICAgICAgZGVsZXRlIHRoaXMub3ZlcmxheU1hcF9bb3ZlcmxheUlkXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgKiBEZXN0cm95cyBhbGwgdGhlIGNyZWF0ZWQgQ2VzaXVtIG9iamVjdHMuXG4gICogQHByb3RlY3RlZFxuICAqL1xuICBkZXN0cm95QWxsKCkge1xuICAgIE9iamVjdC5rZXlzKHRoaXMub3ZlcmxheU1hcF8pLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMub3ZlcmxheU1hcF9ba2V5XTtcbiAgICAgIG92ZXJsYXkuZGVzdHJveSgpO1xuICAgICAgZGVsZXRlIHRoaXMub3ZlcmxheU1hcF9ba2V5XTtcbiAgICB9KTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IE92ZXJsYXlTeW5jaHJvbml6ZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2xjcy5PTENlc2l1bVxuICovXG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQge2dldFRyYW5zZm9ybX0gZnJvbSAnb2wvcHJvai5qcyc7XG5pbXBvcnQgb2xjc1V0aWwgZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCBvbGNzQ29yZSBmcm9tICcuL2NvcmUuanMnO1xuaW1wb3J0IG9sY3NBdXRvUmVuZGVyTG9vcCBmcm9tICcuL0F1dG9SZW5kZXJMb29wLmpzJztcbmltcG9ydCBvbGNzQ2FtZXJhIGZyb20gJy4vQ2FtZXJhLmpzJztcbmltcG9ydCBvbGNzUmFzdGVyU3luY2hyb25pemVyIGZyb20gJy4vUmFzdGVyU3luY2hyb25pemVyLmpzJztcbmltcG9ydCBvbGNzVmVjdG9yU3luY2hyb25pemVyIGZyb20gJy4vVmVjdG9yU3luY2hyb25pemVyLmpzJztcbmltcG9ydCBvbGNzT3ZlcmxheVN5bmNocm9uaXplciBmcm9tICcuL092ZXJsYXlTeW5jaHJvbml6ZXIuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT0xDZXNpdW1PcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydCgnb2wvTWFwLmpzJykuZGVmYXVsdH0gbWFwIFRoZSBPcGVuTGF5ZXJzIG1hcCB3ZSB3YW50IHRvIHNob3cgb24gYSBDZXNpdW0gc2NlbmUuXG4gKiBAcHJvcGVydHkge0VsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUYXJnZXQgZWxlbWVudCBmb3IgdGhlIENlc2l1bSBzY2VuZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oIWltcG9ydCgnb2wvTWFwLmpzJykuZGVmYXVsdCwgIUNlc2l1bS5TY2VuZSwgIUNlc2l1bS5EYXRhU291cmNlQ29sbGVjdGlvbik6IEFycmF5PGltcG9ydCgnb2xjcy9BYnN0cmFjdFN5bmNocm9uaXplci5qcycpLmRlZmF1bHQ+fVxuICogICAgICBbY3JlYXRlU3luY2hyb25pemVyc10gQ2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgYnkgdGhlIHtAbGluayBvbGNzLk9MQ2VzaXVtfVxuICogICAgICBjb25zdHJ1Y3RvciB0byBjcmVhdGUgY3VzdG9tIHN5bmNocm9uaXplcnMuIFJlY2VpdmVzIGFuIGBvbC5NYXBgIGFuZCBhIGBDZXNpdW0uU2NlbmVgIGFzIGFyZ3VtZW50cyxcbiAqICAgICAgYW5kIG5lZWRzIHRvIHJldHVybiBhbiBhcnJheSBvZiB7QGxpbmsgaW1wb3J0KCdvbGNzL0Fic3RyYWN0U3luY2hyb25pemVyLmpzJykuZGVmYXVsdH0uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKCk6IENlc2l1bS5KdWxpYW5EYXRlfSBbdGltZV0gQ29udHJvbCB0aGUgY3VycmVudCB0aW1lIHVzZWQgYnkgQ2VzaXVtLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc3RvcE9wZW5MYXllcnNFdmVudHNQcm9wYWdhdGlvbl0gUHJldmVudCBwcm9wYWdhdGlvbiBvZiBtb3VzZS90b3VjaCBldmVudHMgdG9cbiAqICAgICAgT3BlbkxheWVycyB3aGVuIENlc2l1bSBpcyBhY3RpdmUuXG4gKiBAcHJvcGVydHkge0Nlc2l1bS5TY2VuZU9wdGlvbnN9IFtzY2VuZU9wdGlvbnNdIEFsbG93cyB0aGUgcGFzc2luZyBvZiBwcm9wZXJ0eSB2YWx1ZSB0byB0aGVcbiAqICAgICAgYENlc2l1bS5TY2VuZWAuXG4gKi9cblxuXG5jbGFzcyBPTENlc2l1bSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFPTENlc2l1bU9wdGlvbnN9IG9wdGlvbnMgT3B0aW9ucy5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBhcGlcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtvbGNzLkF1dG9SZW5kZXJMb29wfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5hdXRvUmVuZGVyTG9vcF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFvbC5NYXB9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1hcF8gPSBvcHRpb25zLm1hcDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshZnVuY3Rpb24oKTogQ2VzaXVtLkp1bGlhbkRhdGV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRpbWVfID0gb3B0aW9ucy50aW1lIHx8IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIENlc2l1bS5KdWxpYW5EYXRlLm5vdygpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBObyBjaGFuZ2Ugb2YgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudG80MzI2VHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybSh0aGlzLm1hcF8uZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSwgJ0VQU0c6NDMyNicpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVzb2x1dGlvblNjYWxlXyA9IDEuMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNhbnZhc0NsaWVudFdpZHRoXyA9IDAuMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNhbnZhc0NsaWVudEhlaWdodF8gPSAwLjA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVzb2x1dGlvblNjYWxlQ2hhbmdlZF8gPSB0cnVlOyAvLyBmb3JjZSByZXNpemVcblxuICAgIGNvbnN0IGZpbGxBcmVhID0gJ3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlOyc7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IUVsZW1lbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNvbnRhaW5lcl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICBjb25zdCBjb250YWluZXJBdHRyaWJ1dGUgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgY29udGFpbmVyQXR0cmlidXRlLnZhbHVlID0gYCR7ZmlsbEFyZWF9dmlzaWJpbGl0eTpoaWRkZW47YDtcbiAgICB0aGlzLmNvbnRhaW5lcl8uc2V0QXR0cmlidXRlTm9kZShjb250YWluZXJBdHRyaWJ1dGUpO1xuXG4gICAgbGV0IHRhcmdldEVsZW1lbnQgPSBvcHRpb25zLnRhcmdldCB8fCB0aGlzLm1hcF8uZ2V0Vmlld3BvcnQoKTtcbiAgICBpZiAodHlwZW9mIHRhcmdldEVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0RWxlbWVudCk7XG4gICAgfVxuICAgIHRhcmdldEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXJfKTtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIENlc2l1bSBjb250YWluZXIgaXMgcGxhY2VkIG92ZXIgdGhlIG9sIG1hcC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaXNPdmVyTWFwXyA9ICF0YXJnZXRFbGVtZW50O1xuXG5cbiAgICBpZiAodGhpcy5pc092ZXJNYXBfICYmIG9wdGlvbnMuc3RvcE9wZW5MYXllcnNFdmVudHNQcm9wYWdhdGlvbikge1xuICAgICAgY29uc3Qgb3ZlcmxheUV2ZW50cyA9IFsnY2xpY2snLCAnZGJsY2xpY2snLCAnbW91c2Vkb3duJywgJ3RvdWNoc3RhcnQnLCAnTVNQb2ludGVyRG93bicsICdwb2ludGVyZG93bicsICdtb3VzZXdoZWVsJywgJ3doZWVsJ107XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBvdmVybGF5RXZlbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJfLmFkZEV2ZW50TGlzdGVuZXIob3ZlcmxheUV2ZW50c1tpXSwgZXZ0ID0+IGV2dC5zdG9wUHJvcGFnYXRpb24oKSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IUhUTUxDYW52YXNFbGVtZW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jYW52YXNfID0gLyoqIEB0eXBlIHshSFRNTENhbnZhc0VsZW1lbnR9ICovIChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdDQU5WQVMnKSk7XG4gICAgY29uc3QgY2FudmFzQXR0cmlidXRlID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgIGNhbnZhc0F0dHJpYnV0ZS52YWx1ZSA9IGZpbGxBcmVhO1xuICAgIHRoaXMuY2FudmFzXy5zZXRBdHRyaWJ1dGVOb2RlKGNhbnZhc0F0dHJpYnV0ZSk7XG5cbiAgICBpZiAob2xjc1V0aWwuc3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZCgpKSB7XG4gICAgICAvLyBub24gc3RhbmRhcmQgQ1NTNFxuICAgICAgdGhpcy5jYW52YXNfLnN0eWxlWydpbWFnZVJlbmRlcmluZyddID0gb2xjc1V0aWwuaW1hZ2VSZW5kZXJpbmdWYWx1ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuY2FudmFzXy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcbiAgICB0aGlzLmNhbnZhc18ub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH07XG5cbiAgICB0aGlzLmNvbnRhaW5lcl8uYXBwZW5kQ2hpbGQodGhpcy5jYW52YXNfKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5lbmFibGVkXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFBcnJheS48b2wuaW50ZXJhY3Rpb24uSW50ZXJhY3Rpb24+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wYXVzZWRJbnRlcmFjdGlvbnNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P29sLmxheWVyLkdyb3VwfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5oaWRkZW5Sb290R3JvdXBfID0gbnVsbDtcblxuICAgIGNvbnN0IHNjZW5lT3B0aW9ucyA9IG9wdGlvbnMuc2NlbmVPcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNjZW5lT3B0aW9ucyA6XG4gICAgICAvKiogQHR5cGUge0Nlc2l1bS5TY2VuZU9wdGlvbnN9ICovICh7fSk7XG4gICAgc2NlbmVPcHRpb25zLmNhbnZhcyA9IHRoaXMuY2FudmFzXztcbiAgICBzY2VuZU9wdGlvbnMuc2NlbmUzRE9ubHkgPSB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFDZXNpdW0uU2NlbmV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNjZW5lXyA9IG5ldyBDZXNpdW0uU2NlbmUoc2NlbmVPcHRpb25zKTtcblxuICAgIGNvbnN0IHNzY2MgPSB0aGlzLnNjZW5lXy5zY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXI7XG5cbiAgICBzc2NjLnRpbHRFdmVudFR5cGVzLnB1c2goe1xuICAgICAgJ2V2ZW50VHlwZSc6IENlc2l1bS5DYW1lcmFFdmVudFR5cGUuTEVGVF9EUkFHLFxuICAgICAgJ21vZGlmaWVyJzogQ2VzaXVtLktleWJvYXJkRXZlbnRNb2RpZmllci5TSElGVFxuICAgIH0pO1xuXG4gICAgc3NjYy50aWx0RXZlbnRUeXBlcy5wdXNoKHtcbiAgICAgICdldmVudFR5cGUnOiBDZXNpdW0uQ2FtZXJhRXZlbnRUeXBlLkxFRlRfRFJBRyxcbiAgICAgICdtb2RpZmllcic6IENlc2l1bS5LZXlib2FyZEV2ZW50TW9kaWZpZXIuQUxUXG4gICAgfSk7XG5cbiAgICBzc2NjLmVuYWJsZUxvb2sgPSBmYWxzZTtcblxuICAgIHRoaXMuc2NlbmVfLmNhbWVyYS5jb25zdHJhaW5lZEF4aXMgPSBDZXNpdW0uQ2FydGVzaWFuMy5VTklUX1o7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IW9sY3MuQ2FtZXJhfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jYW1lcmFfID0gbmV3IG9sY3NDYW1lcmEodGhpcy5zY2VuZV8sIHRoaXMubWFwXyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IUNlc2l1bS5HbG9iZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZ2xvYmVfID0gbmV3IENlc2l1bS5HbG9iZShDZXNpdW0uRWxsaXBzb2lkLldHUzg0KTtcbiAgICB0aGlzLmdsb2JlXy5iYXNlQ29sb3IgPSBDZXNpdW0uQ29sb3IuV0hJVEU7XG4gICAgdGhpcy5zY2VuZV8uZ2xvYmUgPSB0aGlzLmdsb2JlXztcbiAgICB0aGlzLnNjZW5lXy5za3lBdG1vc3BoZXJlID0gbmV3IENlc2l1bS5Ta3lBdG1vc3BoZXJlKCk7XG5cbiAgICAvLyBUaGUgZmlyc3QgbGF5ZXIgb2YgQ2VzaXVtIGlzIHNwZWNpYWw7IHVzaW5nIGEgMXgxIHRyYW5zcGFyZW50IGltYWdlIHRvIHdvcmthcm91bmQgaXQuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9BbmFseXRpY2FsR3JhcGhpY3NJbmMvY2VzaXVtL2lzc3Vlcy8xMzIzIGZvciBkZXRhaWxzLlxuICAgIGNvbnN0IGZpcnN0SW1hZ2VyeVByb3ZpZGVyID0gbmV3IENlc2l1bS5TaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyKHtcbiAgICAgIHVybDogJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBUUFBQUMxSEF3Q0FBQUFDMGxFUVZSNDJtTmtZQUFBQUFZQUFqQ0IwQzhBQUFBQVNVVk9SSzVDWUlJPScsXG4gICAgICByZWN0YW5nbGU6IENlc2l1bS5SZWN0YW5nbGUuZnJvbURlZ3JlZXMoMCwgMCwgMSwgMSkgLy8gdGhlIFJlY3RhbmdsZSBkaW1lbnNpb25zIGFyZSBhcmJpdHJhcnlcbiAgICB9KTtcbiAgICB0aGlzLmdsb2JlXy5pbWFnZXJ5TGF5ZXJzLmFkZEltYWdlcnlQcm92aWRlcihmaXJzdEltYWdlcnlQcm92aWRlciwgMCk7XG5cbiAgICB0aGlzLmRhdGFTb3VyY2VDb2xsZWN0aW9uXyA9IG5ldyBDZXNpdW0uRGF0YVNvdXJjZUNvbGxlY3Rpb24oKTtcbiAgICB0aGlzLmRhdGFTb3VyY2VEaXNwbGF5XyA9IG5ldyBDZXNpdW0uRGF0YVNvdXJjZURpc3BsYXkoe1xuICAgICAgc2NlbmU6IHRoaXMuc2NlbmVfLFxuICAgICAgZGF0YVNvdXJjZUNvbGxlY3Rpb246IHRoaXMuZGF0YVNvdXJjZUNvbGxlY3Rpb25fXG4gICAgfSk7XG5cbiAgICBjb25zdCBzeW5jaHJvbml6ZXJzID0gb3B0aW9ucy5jcmVhdGVTeW5jaHJvbml6ZXJzID9cbiAgICAgIG9wdGlvbnMuY3JlYXRlU3luY2hyb25pemVycyh0aGlzLm1hcF8sIHRoaXMuc2NlbmVfLCB0aGlzLmRhdGFTb3VyY2VDb2xsZWN0aW9uXykgOiBbXG4gICAgICAgIG5ldyBvbGNzUmFzdGVyU3luY2hyb25pemVyKHRoaXMubWFwXywgdGhpcy5zY2VuZV8pLFxuICAgICAgICBuZXcgb2xjc1ZlY3RvclN5bmNocm9uaXplcih0aGlzLm1hcF8sIHRoaXMuc2NlbmVfKSxcbiAgICAgICAgbmV3IG9sY3NPdmVybGF5U3luY2hyb25pemVyKHRoaXMubWFwXywgdGhpcy5zY2VuZV8pXG4gICAgICBdO1xuXG4gICAgLy8gQXNzdXJlcyBjb3JyZWN0IGNhbnZhcyBzaXplIGFmdGVyIGluaXRpYWxpc2F0aW9uXG4gICAgdGhpcy5oYW5kbGVSZXNpemVfKCk7XG5cbiAgICBmb3IgKGxldCBpID0gc3luY2hyb25pemVycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgc3luY2hyb25pemVyc1tpXS5zeW5jaHJvbml6ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRpbWUgb2YgdGhlIGxhc3QgcmVuZGVyZWQgZnJhbWUsIGFzIHJldHVybmVkIGJ5IGBwZXJmb3JtYW5jZS5ub3coKWAuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubGFzdEZyYW1lVGltZV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGlkZW50aWZpZXIgcmV0dXJuZWQgYnkgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAuXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcklkXyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIFRhcmdldCBmcmFtZSByYXRlIGZvciB0aGUgcmVuZGVyIGxvb3AuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0RnJhbWVSYXRlXyA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBDZXNpdW0gcmVuZGVyIGxvb3AgaXMgYmVpbmcgYmxvY2tlZC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYmxvY2tDZXNpdW1SZW5kZXJpbmdfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgd2FybXVwIHJvdXRpbmUgaXMgYWN0aXZlLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy53YXJtaW5nVXBfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7b2wuRmVhdHVyZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudHJhY2tlZEZlYXR1cmVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDZXNpdW0uRW50aXR5fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50cmFja2VkRW50aXR5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q2VzaXVtLkVudGl0eVZpZXd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmVudGl0eVZpZXdfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZV8gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshQ2VzaXVtLkJvdW5kaW5nU3BoZXJlfVxuICAgICAqL1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVTY3JhdGNoXyA9IG5ldyBDZXNpdW0uQm91bmRpbmdTcGhlcmUoKTtcblxuICAgIGNvbnN0IGV2ZW50SGVscGVyID0gbmV3IENlc2l1bS5FdmVudEhlbHBlcigpO1xuICAgIGV2ZW50SGVscGVyLmFkZCh0aGlzLnNjZW5lXy5wb3N0UmVuZGVyLCBPTENlc2l1bS5wcm90b3R5cGUudXBkYXRlVHJhY2tlZEVudGl0eV8sIHRoaXMpO1xuXG4gICAgLy8gQ2VzaXVtIGhhcyBhIG1lY2hhbmlzbSB0byBwcmV2ZW50IHRoZSBjYW1lcmEgdG8gZ28gdW5kZXIgdGhlIHRlcnJhaW4uXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgaXQgaXMgb25seSBhY3RpdmUgd2hlbiBhbGwgdGhlIHRlcnJhaW4gaGFzIGJlZW4gbG9hZGVkLCB3aGljaDpcbiAgICAvLyAtIGRvZXMgbm90IHByZXZlbnQgdGhlIGNhbWVyYSB0byBzaW5rIHVuZGVyIHRlcnJhaW4gYW55bW9yZTtcbiAgICAvLyAtIGludHJvZHVjZSBhIGp1bXBpbmcgZWZmZWN0IG9uY2UgYWxsIHRlcnJhaW4gaGFzIGJlZW4gbG9hZGVkIGFuZCB0aGUgcG9zaXRpb24gb2YgdGhlIGNhbWVyYSBpcyBmaW5hbGx5IGZpeGVkLlxuICAgIC8vIFRoZSBwcm9wZXJ0eSBiZWxvdyBlbmFibGVzIGEgd29ya2Fyb3VuZCBmb3VuZCBpbiB0aGUgQ2FtcHRvY2FtcCBDZXNpdW0gZm9yay5cbiAgICAvLyBTZWUgYWxzbyBodHRwczovL2dpdGh1Yi5jb20vQW5hbHl0aWNhbEdyYXBoaWNzSW5jL2Nlc2l1bS9pc3N1ZXMvNTk5OS5cbiAgICBDZXNpdW0uQ2FtZXJhLmVuYWJsZVN1c3BlbmRUZXJyYWluQWRqdXN0bWVudCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0aGUgQ2VzaXVtIHNjZW5lLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVuZGVyXygpIHtcbiAgICAvLyBpZiBhIGNhbGwgdG8gYHJlcXVlc3RBbmltYXRpb25GcmFtZWAgaXMgcGVuZGluZywgY2FuY2VsIGl0XG4gICAgaWYgKHRoaXMucmVuZGVySWRfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVySWRfKTtcbiAgICAgIHRoaXMucmVuZGVySWRfID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIG9ubHkgcmVuZGVyIGlmIENlc2l1bSBpcyBlbmFibGVkL3dhcm1pbmcgYW5kIHJlbmRlcmluZyBoYXNuJ3QgYmVlbiBibG9ja2VkXG4gICAgaWYgKCh0aGlzLmVuYWJsZWRfIHx8IHRoaXMud2FybWluZ1VwXykgJiYgIXRoaXMuYmxvY2tDZXNpdW1SZW5kZXJpbmdfKSB7XG4gICAgICB0aGlzLnJlbmRlcklkXyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLm9uQW5pbWF0aW9uRnJhbWVfLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmb3IgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmcmFtZVRpbWUgVGhlIGZyYW1lIHRpbWUsIGZyb20gYHBlcmZvcm1hbmNlLm5vdygpYC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uQW5pbWF0aW9uRnJhbWVfKGZyYW1lVGltZSkge1xuICAgIHRoaXMucmVuZGVySWRfID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gY2hlY2sgaWYgYSBmcmFtZSB3YXMgcmVuZGVyZWQgd2l0aGluIHRoZSB0YXJnZXQgZnJhbWUgcmF0ZVxuICAgIGNvbnN0IGludGVydmFsID0gMTAwMC4wIC8gdGhpcy50YXJnZXRGcmFtZVJhdGVfO1xuICAgIGNvbnN0IGRlbHRhID0gZnJhbWVUaW1lIC0gdGhpcy5sYXN0RnJhbWVUaW1lXztcbiAgICBpZiAoZGVsdGEgPCBpbnRlcnZhbCkge1xuICAgICAgLy8gdG9vIHNvb24sIGRvbid0IHJlbmRlciB5ZXRcbiAgICAgIHRoaXMucmVuZGVyXygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHRpbWUgdG8gcmVuZGVyIGEgZnJhbWUsIHNhdmUgdGhlIHRpbWVcbiAgICB0aGlzLmxhc3RGcmFtZVRpbWVfID0gZnJhbWVUaW1lO1xuXG4gICAgY29uc3QganVsaWFuRGF0ZSA9IHRoaXMudGltZV8oKTtcbiAgICB0aGlzLnNjZW5lXy5pbml0aWFsaXplRnJhbWUoKTtcbiAgICB0aGlzLmhhbmRsZVJlc2l6ZV8oKTtcbiAgICB0aGlzLmRhdGFTb3VyY2VEaXNwbGF5Xy51cGRhdGUoanVsaWFuRGF0ZSk7XG5cbiAgICAvLyBVcGRhdGUgdHJhY2tlZCBlbnRpdHlcbiAgICBpZiAodGhpcy5lbnRpdHlWaWV3Xykge1xuICAgICAgY29uc3QgdHJhY2tlZEVudGl0eSA9IHRoaXMudHJhY2tlZEVudGl0eV87XG4gICAgICBjb25zdCB0cmFja2VkU3RhdGUgPSB0aGlzLmRhdGFTb3VyY2VEaXNwbGF5Xy5nZXRCb3VuZGluZ1NwaGVyZSh0cmFja2VkRW50aXR5LCBmYWxzZSwgdGhpcy5ib3VuZGluZ1NwaGVyZVNjcmF0Y2hfKTtcbiAgICAgIGlmICh0cmFja2VkU3RhdGUgPT09IENlc2l1bS5Cb3VuZGluZ1NwaGVyZVN0YXRlLkRPTkUpIHtcbiAgICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVNjcmF0Y2hfLnJhZGl1cyA9IDE7IC8vIGEgcmFkaXVzIG9mIDEgaXMgZW5vdWdoIGZvciB0cmFja2luZyBwb2ludHNcbiAgICAgICAgdGhpcy5lbnRpdHlWaWV3Xy51cGRhdGUoanVsaWFuRGF0ZSwgdGhpcy5ib3VuZGluZ1NwaGVyZVNjcmF0Y2hfKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNjZW5lXy5yZW5kZXIoanVsaWFuRGF0ZSk7XG4gICAgdGhpcy5jYW1lcmFfLmNoZWNrQ2FtZXJhQ2hhbmdlKCk7XG5cbiAgICAvLyByZXF1ZXN0IHRoZSBuZXh0IHJlbmRlciBjYWxsIGFmdGVyIHRoaXMgb25lIGNvbXBsZXRlcyB0byBlbnN1cmUgdGhlIGJyb3dzZXIgZG9lc24ndCBnZXQgYmFja2VkIHVwXG4gICAgdGhpcy5yZW5kZXJfKCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZVRyYWNrZWRFbnRpdHlfKCkge1xuICAgIGlmICghdGhpcy5uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFja2VkRW50aXR5ID0gdGhpcy50cmFja2VkRW50aXR5XztcbiAgICBjb25zdCBzY2VuZSA9IHRoaXMuc2NlbmVfO1xuXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLmRhdGFTb3VyY2VEaXNwbGF5Xy5nZXRCb3VuZGluZ1NwaGVyZSh0cmFja2VkRW50aXR5LCBmYWxzZSwgdGhpcy5ib3VuZGluZ1NwaGVyZVNjcmF0Y2hfKTtcbiAgICBpZiAoc3RhdGUgPT09IENlc2l1bS5Cb3VuZGluZ1NwaGVyZVN0YXRlLlBFTkRJTkcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzY2VuZS5zY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXIuZW5hYmxlVGlsdCA9IGZhbHNlO1xuXG4gICAgY29uc3QgYnMgPSBzdGF0ZSAhPT0gQ2VzaXVtLkJvdW5kaW5nU3BoZXJlU3RhdGUuRkFJTEVEID8gdGhpcy5ib3VuZGluZ1NwaGVyZVNjcmF0Y2hfIDogdW5kZWZpbmVkO1xuICAgIGlmIChicykge1xuICAgICAgYnMucmFkaXVzID0gMTtcbiAgICB9XG4gICAgdGhpcy5lbnRpdHlWaWV3XyA9IG5ldyBDZXNpdW0uRW50aXR5Vmlldyh0cmFja2VkRW50aXR5LCBzY2VuZSwgc2NlbmUubWFwUHJvamVjdGlvbi5lbGxpcHNvaWQpO1xuICAgIHRoaXMuZW50aXR5Vmlld18udXBkYXRlKHRoaXMudGltZV8oKSwgYnMpO1xuICAgIHRoaXMubmVlZFRyYWNrZWRFbnRpdHlVcGRhdGVfID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZVJlc2l6ZV8oKSB7XG4gICAgbGV0IHdpZHRoID0gdGhpcy5jYW52YXNfLmNsaWVudFdpZHRoO1xuICAgIGxldCBoZWlnaHQgPSB0aGlzLmNhbnZhc18uY2xpZW50SGVpZ2h0O1xuXG4gICAgaWYgKHdpZHRoID09PSAwIHwgaGVpZ2h0ID09PSAwKSB7XG4gICAgICAvLyBUaGUgY2FudmFzIERPTSBlbGVtZW50IGlzIG5vdCByZWFkeSB5ZXQuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHdpZHRoID09PSB0aGlzLmNhbnZhc0NsaWVudFdpZHRoXyAmJlxuICAgICAgICBoZWlnaHQgPT09IHRoaXMuY2FudmFzQ2xpZW50SGVpZ2h0XyAmJlxuICAgICAgICAhdGhpcy5yZXNvbHV0aW9uU2NhbGVDaGFuZ2VkXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCByZXNvbHV0aW9uU2NhbGUgPSB0aGlzLnJlc29sdXRpb25TY2FsZV87XG4gICAgaWYgKCFvbGNzVXRpbC5zdXBwb3J0c0ltYWdlUmVuZGVyaW5nUGl4ZWxhdGVkKCkpIHtcbiAgICAgIHJlc29sdXRpb25TY2FsZSAqPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxLjA7XG4gICAgfVxuICAgIHRoaXMucmVzb2x1dGlvblNjYWxlQ2hhbmdlZF8gPSBmYWxzZTtcblxuICAgIHRoaXMuY2FudmFzQ2xpZW50V2lkdGhfID0gd2lkdGg7XG4gICAgdGhpcy5jYW52YXNDbGllbnRIZWlnaHRfID0gaGVpZ2h0O1xuXG4gICAgd2lkdGggKj0gcmVzb2x1dGlvblNjYWxlO1xuICAgIGhlaWdodCAqPSByZXNvbHV0aW9uU2NhbGU7XG5cbiAgICB0aGlzLmNhbnZhc18ud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmNhbnZhc18uaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuc2NlbmVfLmNhbWVyYS5mcnVzdHVtLmFzcGVjdFJhdGlvID0gd2lkdGggLyBoZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IW9sY3MuQ2FtZXJhfVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRDYW1lcmEoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FtZXJhXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshb2wuTWFwfVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRPbE1hcCgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXBfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFvbC5WaWV3fVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRPbFZpZXcoKSB7XG4gICAgY29uc3QgdmlldyA9IHRoaXMubWFwXy5nZXRWaWV3KCk7XG4gICAgY29uc29sZS5hc3NlcnQodmlldyk7XG4gICAgcmV0dXJuIHZpZXc7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUNlc2l1bS5TY2VuZX1cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Q2VzaXVtU2NlbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2NlbmVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFDZXNpdW0uRGF0YVNvdXJjZUNvbGxlY3Rpb259XG4gICAqIEBhcGlcbiAgICovXG4gIGdldERhdGFTb3VyY2VzKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGFTb3VyY2VDb2xsZWN0aW9uXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQ2VzaXVtLkRhdGFTb3VyY2VEaXNwbGF5fVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXREYXRhU291cmNlRGlzcGxheSgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhU291cmNlRGlzcGxheV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0RW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbmFibGVkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGVzL2Rpc2FibGVzIHRoZSBDZXNpdW0uXG4gICAqIFRoaXMgbW9kaWZpZXMgdGhlIHZpc2liaWxpdHkgc3R5bGUgb2YgdGhlIGNvbnRhaW5lciBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRFbmFibGVkKGVuYWJsZSkge1xuICAgIGlmICh0aGlzLmVuYWJsZWRfID09PSBlbmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbmFibGVkXyA9IGVuYWJsZTtcblxuICAgIC8vIHNvbWUgQ2VzaXVtIG9wZXJhdGlvbnMgYXJlIG9wZXJhdGluZyB3aXRoIGNhbnZhcy5jbGllbnRXaWR0aCxcbiAgICAvLyBzbyB3ZSBjYW4ndCByZW1vdmUgaXQgZnJvbSBET00gb3IgZXZlbiBtYWtlIGRpc3BsYXk6bm9uZTtcbiAgICB0aGlzLmNvbnRhaW5lcl8uc3R5bGUudmlzaWJpbGl0eSA9IHRoaXMuZW5hYmxlZF8gPyAndmlzaWJsZScgOiAnaGlkZGVuJztcbiAgICBsZXQgaW50ZXJhY3Rpb25zO1xuICAgIGlmICh0aGlzLmVuYWJsZWRfKSB7XG4gICAgICB0aGlzLnRocm93T25Vbml0aWFsaXplZE1hcF8oKTtcbiAgICAgIGlmICh0aGlzLmlzT3Zlck1hcF8pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zID0gdGhpcy5tYXBfLmdldEludGVyYWN0aW9ucygpO1xuICAgICAgICBpbnRlcmFjdGlvbnMuZm9yRWFjaCgoZWwsIGksIGFycikgPT4ge1xuICAgICAgICAgIHRoaXMucGF1c2VkSW50ZXJhY3Rpb25zXy5wdXNoKGVsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGludGVyYWN0aW9ucy5jbGVhcigpO1xuXG4gICAgICAgIHRoaXMubWFwXy5hZGRJbnRlcmFjdGlvbiA9IGludGVyYWN0aW9uID0+IHRoaXMucGF1c2VkSW50ZXJhY3Rpb25zXy5wdXNoKGludGVyYWN0aW9uKTtcbiAgICAgICAgdGhpcy5tYXBfLnJlbW92ZUludGVyYWN0aW9uID0gaW50ZXJhY3Rpb24gPT5cbiAgICAgICAgICB0aGlzLnBhdXNlZEludGVyYWN0aW9uc18gPSB0aGlzLnBhdXNlZEludGVyYWN0aW9uc18uZmlsdGVyKGkgPT4gaSAhPT0gaW50ZXJhY3Rpb24pO1xuXG4gICAgICAgIGNvbnN0IHJvb3RHcm91cCA9IHRoaXMubWFwXy5nZXRMYXllckdyb3VwKCk7XG4gICAgICAgIGlmIChyb290R3JvdXAuZ2V0VmlzaWJsZSgpKSB7XG4gICAgICAgICAgdGhpcy5oaWRkZW5Sb290R3JvdXBfID0gcm9vdEdyb3VwO1xuICAgICAgICAgIHRoaXMuaGlkZGVuUm9vdEdyb3VwXy5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkuY2xhc3NMaXN0LmFkZCgnb2xjcy1oaWRlb3ZlcmxheScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNhbWVyYV8ucmVhZEZyb21WaWV3KCk7XG4gICAgICB0aGlzLnJlbmRlcl8oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuaXNPdmVyTWFwXykge1xuICAgICAgICBpbnRlcmFjdGlvbnMgPSB0aGlzLm1hcF8uZ2V0SW50ZXJhY3Rpb25zKCk7XG4gICAgICAgIHRoaXMucGF1c2VkSW50ZXJhY3Rpb25zXy5mb3JFYWNoKChpbnRlcmFjdGlvbikgPT4ge1xuICAgICAgICAgIGludGVyYWN0aW9ucy5wdXNoKGludGVyYWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGF1c2VkSW50ZXJhY3Rpb25zXy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHRoaXMubWFwXy5hZGRJbnRlcmFjdGlvbiA9IGludGVyYWN0aW9uID0+IHRoaXMubWFwXy5nZXRJbnRlcmFjdGlvbnMoKS5wdXNoKGludGVyYWN0aW9uKTtcbiAgICAgICAgdGhpcy5tYXBfLnJlbW92ZUludGVyYWN0aW9uID0gaW50ZXJhY3Rpb24gPT4gdGhpcy5tYXBfLmdldEludGVyYWN0aW9ucygpLnJlbW92ZShpbnRlcmFjdGlvbik7XG5cbiAgICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5jbGFzc0xpc3QucmVtb3ZlKCdvbGNzLWhpZGVvdmVybGF5Jyk7XG4gICAgICAgIGlmICh0aGlzLmhpZGRlblJvb3RHcm91cF8pIHtcbiAgICAgICAgICB0aGlzLmhpZGRlblJvb3RHcm91cF8uc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICB0aGlzLmhpZGRlblJvb3RHcm91cF8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FtZXJhXy51cGRhdGVWaWV3KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByZWxvYWQgQ2VzaXVtIHNvIHRoYXQgaXQgaXMgcmVhZHkgd2hlbiB0cmFuc2l0aW9uaW5nIGZyb20gMkQgdG8gM0QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgVGFyZ2V0IGhlaWdodCBvZiB0aGUgY2FtZXJhXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IE1pbGxpc2Vjb25kcyBhZnRlciB3aGljaCB0aGUgd2FybWluZyB3aWxsIHN0b3BcbiAgICogQGFwaVxuICAqL1xuICB3YXJtVXAoaGVpZ2h0LCB0aW1lb3V0KSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZF8pIHtcbiAgICAgIC8vIGFscmVhZHkgZW5hYmxlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnRocm93T25Vbml0aWFsaXplZE1hcF8oKTtcbiAgICB0aGlzLmNhbWVyYV8ucmVhZEZyb21WaWV3KCk7XG4gICAgY29uc3QgZWxsaXBzb2lkID0gdGhpcy5nbG9iZV8uZWxsaXBzb2lkO1xuICAgIGNvbnN0IGNzQ2FtZXJhID0gdGhpcy5zY2VuZV8uY2FtZXJhO1xuICAgIGNvbnN0IHBvc2l0aW9uID0gZWxsaXBzb2lkLmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGNzQ2FtZXJhLnBvc2l0aW9uKTtcbiAgICBpZiAocG9zaXRpb24uaGVpZ2h0IDwgaGVpZ2h0KSB7XG4gICAgICBwb3NpdGlvbi5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICBjc0NhbWVyYS5wb3NpdGlvbiA9IGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihwb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy53YXJtaW5nVXBfID0gdHJ1ZTtcbiAgICB0aGlzLnJlbmRlcl8oKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53YXJtaW5nVXBfID0gZmFsc2U7XG4gICAgfSwgdGltZW91dCk7XG4gIH1cblxuICAvKipcbiAgICogQmxvY2sgQ2VzaXVtIHJlbmRlcmluZyB0byBzYXZlIHJlc291cmNlcy5cbiAgICogQHBhcmFtIHtib29sZWFufSBibG9jayBUcnVlIHRvIGJsb2NrLlxuICAgKiBAYXBpXG4gICovXG4gIHNldEJsb2NrQ2VzaXVtUmVuZGVyaW5nKGJsb2NrKSB7XG4gICAgaWYgKHRoaXMuYmxvY2tDZXNpdW1SZW5kZXJpbmdfICE9PSBibG9jaykge1xuICAgICAgdGhpcy5ibG9ja0Nlc2l1bVJlbmRlcmluZ18gPSBibG9jaztcblxuICAgICAgLy8gcmVzZXQgdGhlIHJlbmRlciBsb29wXG4gICAgICB0aGlzLnJlbmRlcl8oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIHRoZSBnbG9iZSBvbmx5IHdoZW4gbmVjZXNzYXJ5IGluIG9yZGVyIHRvIHNhdmUgcmVzb3VyY2VzLlxuICAgKiBFeHBlcmltZW50YWwuXG4gICAqIEBhcGlcbiAgICovXG4gIGVuYWJsZUF1dG9SZW5kZXJMb29wKCkge1xuICAgIGlmICghdGhpcy5hdXRvUmVuZGVyTG9vcF8pIHtcbiAgICAgIHRoaXMuYXV0b1JlbmRlckxvb3BfID0gbmV3IG9sY3NBdXRvUmVuZGVyTG9vcCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBhdXRvcmVuZGVyIGxvb3AuXG4gICAqIEByZXR1cm4gez9vbGNzLkF1dG9SZW5kZXJMb29wfVxuICAgKiBAYXBpXG4gICovXG4gIGdldEF1dG9SZW5kZXJMb29wKCkge1xuICAgIHJldHVybiB0aGlzLmF1dG9SZW5kZXJMb29wXztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgM0QgQ2VzaXVtIGdsb2JlIGlzIHJlbmRlcmVkIGluIGEgY2FudmFzIHdpdGggdHdvIGRpZmZlcmVudCBkaW1lbnNpb25zOlxuICAgKiBjbGllbnRXaWR0aCBhbmQgY2xpZW50SGVpZ2h0IHdoaWNoIGFyZSB0aGUgZGltZW5zaW9uIG9uIHRoZSBzY3JlZW4gYW5kXG4gICAqIHdpZHRoIGFuZCBoZWlnaHQgd2hpY2ggYXJlIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBkcmF3aW5nIGJ1ZmZlci5cbiAgICpcbiAgICogQnkgdXNpbmcgYSByZXNvbHV0aW9uIHNjYWxlIGxvd2VyIHRoYW4gMS4wLCBpdCBpcyBwb3NzaWJsZSB0byByZW5kZXIgdGhlXG4gICAqIGdsb2JlIGluIGEgYnVmZmVyIHNtYWxsZXIgdGhhbiB0aGUgY2FudmFzIGNsaWVudCBkaW1lbnNpb25zIGFuZCBpbXByb3ZlXG4gICAqIHBlcmZvcm1hbmNlLCBhdCB0aGUgY29zdCBvZiBxdWFsaXR5LlxuICAgKlxuICAgKiBQaXhlbCByYXRpbyBzaG91bGQgYWxzbyBiZSB0YWtlbiBpbnRvIGFjY291bnQ7IGJ5IGRlZmF1bHQsIGEgZGV2aWNlIHdpdGhcbiAgICogcGl4ZWwgcmF0aW8gb2YgMi4wIHdpbGwgaGF2ZSBhIGJ1ZmZlciBzdXJmYWNlIDQgdGltZXMgYmlnZ2VyIHRoYW4gdGhlIGNsaWVudFxuICAgKiBzdXJmYWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICogQHRoaXMge29sY3MuT0xDZXNpdW19XG4gICAqIEBhcGlcbiAgICovXG4gIHNldFJlc29sdXRpb25TY2FsZSh2YWx1ZSkge1xuICAgIHZhbHVlID0gTWF0aC5tYXgoMCwgdmFsdWUpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5yZXNvbHV0aW9uU2NhbGVfKSB7XG4gICAgICB0aGlzLnJlc29sdXRpb25TY2FsZV8gPSBNYXRoLm1heCgwLCB2YWx1ZSk7XG4gICAgICB0aGlzLnJlc29sdXRpb25TY2FsZUNoYW5nZWRfID0gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmF1dG9SZW5kZXJMb29wXykge1xuICAgICAgICB0aGlzLmF1dG9SZW5kZXJMb29wXy5yZXN0YXJ0UmVuZGVyTG9vcCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHRhcmdldCBmcmFtZSByYXRlIGZvciB0aGUgcmVuZGVyZXIuIFNldCB0byBgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZYFxuICAgKiB0byByZW5kZXIgYXMgcXVpY2tseSBhcyBwb3NzaWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBmcmFtZSByYXRlLCBpbiBmcmFtZXMgcGVyIHNlY29uZC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VGFyZ2V0RnJhbWVSYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0RnJhbWVSYXRlXyAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMudGFyZ2V0RnJhbWVSYXRlXyA9IHZhbHVlO1xuXG4gICAgICAvLyByZXNldCB0aGUgcmVuZGVyIGxvb3BcbiAgICAgIHRoaXMucmVuZGVyXygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBPcGVuTGF5ZXJzIG1hcCBpcyBub3QgcHJvcGVybHkgaW5pdGlhbGl6ZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aHJvd09uVW5pdGlhbGl6ZWRNYXBfKCkge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMubWFwXztcbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBjb25zdCBjZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuICAgIGlmICghdmlldy5pc0RlZigpIHx8IGlzTmFOKGNlbnRlclswXSkgfHwgaXNOYU4oY2VudGVyWzFdKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgT3BlbkxheWVycyBtYXAgaXMgbm90IHByb3Blcmx5IGluaXRpYWxpemVkOiAke2NlbnRlcn0gLyAke3ZpZXcuZ2V0UmVzb2x1dGlvbigpfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7b2wuRmVhdHVyZX1cbiAgICovXG4gIGdldCB0cmFja2VkRmVhdHVyZSgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFja2VkRmVhdHVyZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtvbC5GZWF0dXJlfSBmZWF0dXJlXG4gICAqL1xuICBzZXQgdHJhY2tlZEZlYXR1cmUoZmVhdHVyZSkge1xuICAgIGlmICh0aGlzLnRyYWNrZWRGZWF0dXJlXyAhPT0gZmVhdHVyZSkge1xuXG4gICAgICBjb25zdCBzY2VuZSA9IHRoaXMuc2NlbmVfO1xuXG4gICAgICAvL1N0b3AgdHJhY2tpbmdcbiAgICAgIGlmICghZmVhdHVyZSB8fCAhZmVhdHVyZS5nZXRHZW9tZXRyeSgpKSB7XG4gICAgICAgIHRoaXMubmVlZFRyYWNrZWRFbnRpdHlVcGRhdGVfID0gZmFsc2U7XG4gICAgICAgIHNjZW5lLnNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlci5lbmFibGVUaWx0ID0gdHJ1ZTtcblxuICAgICAgICBpZiAodGhpcy50cmFja2VkRW50aXR5Xykge1xuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZURpc3BsYXlfLmRlZmF1bHREYXRhU291cmNlLmVudGl0aWVzLnJlbW92ZSh0aGlzLnRyYWNrZWRFbnRpdHlfKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYWNrZWRFbnRpdHlfID0gbnVsbDtcbiAgICAgICAgdGhpcy50cmFja2VkRmVhdHVyZV8gPSBudWxsO1xuICAgICAgICB0aGlzLmVudGl0eVZpZXdfID0gbnVsbDtcbiAgICAgICAgc2NlbmUuY2FtZXJhLmxvb2tBdFRyYW5zZm9ybShDZXNpdW0uTWF0cml4NC5JREVOVElUWSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmFja2VkRmVhdHVyZV8gPSBmZWF0dXJlO1xuXG4gICAgICAvL1dlIGNhbid0IHN0YXJ0IHRyYWNraW5nIGltbWVkaWF0ZWx5LCBzbyB3ZSBzZXQgYSBmbGFnIGFuZCBzdGFydCB0cmFja2luZ1xuICAgICAgLy93aGVuIHRoZSBib3VuZGluZyBzcGhlcmUgaXMgcmVhZHkgKG1vc3QgbGlrZWx5IG5leHQgZnJhbWUpLlxuICAgICAgdGhpcy5uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZV8gPSB0cnVlO1xuXG4gICAgICBjb25zdCB0bzQzMjZUcmFuc2Zvcm0gPSB0aGlzLnRvNDMyNlRyYW5zZm9ybV87XG4gICAgICBjb25zdCB0b0Nlc2l1bVBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgICBjb25zb2xlLmFzc2VydChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvaW50KTtcbiAgICAgICAgY29uc3QgY29vID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgY29uc3QgY29vNDMyNiA9IHRvNDMyNlRyYW5zZm9ybShjb28sIHVuZGVmaW5lZCwgY29vLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBvbGNzQ29yZS5vbDQzMjZDb29yZGluYXRlVG9DZXNpdW1DYXJ0ZXNpYW4oY29vNDMyNik7XG4gICAgICB9O1xuXG4gICAgICAvLyBDcmVhdGUgYW4gaW52aXNpYmxlIHBvaW50IGVudGl0eSBmb3IgdHJhY2tpbmcuXG4gICAgICAvLyBJdCBpcyBpbmRlcGVuZGFudCBmcm9tIHRoZSBwcmltaXRpdmUvZ2VvbWV0cnkgY3JlYXRlZCBieSB0aGUgdmVjdG9yIHN5bmNocm9uaXplci5cbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICdwb3NpdGlvbic6IG5ldyBDZXNpdW0uQ2FsbGJhY2tQcm9wZXJ0eSgodGltZSwgcmVzdWx0KSA9PiB0b0Nlc2l1bVBvc2l0aW9uKCksIGZhbHNlKSxcbiAgICAgICAgJ3BvaW50Jzoge1xuICAgICAgICAgICdwaXhlbFNpemUnOiAxLFxuICAgICAgICAgICdjb2xvcic6IENlc2l1bS5Db2xvci5UUkFOU1BBUkVOVFxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnRyYWNrZWRFbnRpdHlfID0gdGhpcy5kYXRhU291cmNlRGlzcGxheV8uZGVmYXVsdERhdGFTb3VyY2UuZW50aXRpZXMuYWRkKG9wdGlvbnMpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBPTENlc2l1bTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbGNzLkF1dG9SZW5kZXJMb29wXG4gKi9cblxuY2xhc3MgQXV0b1JlbmRlckxvb3Age1xuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7b2xjcy5PTENlc2l1bX0gb2wzZFxuICAgKi9cbiAgY29uc3RydWN0b3Iob2wzZCkge1xuICAgIHRoaXMub2wzZCA9IG9sM2Q7XG4gICAgdGhpcy5zY2VuZV8gPSBvbDNkLmdldENlc2l1bVNjZW5lKCk7XG4gICAgdGhpcy5jYW52YXNfID0gdGhpcy5zY2VuZV8uY2FudmFzO1xuICAgIHRoaXMuX2JvdW5kTm90aWZ5UmVwYWludFJlcXVpcmVkID0gdGhpcy5ub3RpZnlSZXBhaW50UmVxdWlyZWQuYmluZCh0aGlzKTtcblxuICAgIHRoaXMucmVwYWludEV2ZW50TmFtZXNfID0gW1xuICAgICAgJ21vdXNlbW92ZScsICdtb3VzZWRvd24nLCAnbW91c2V1cCcsXG4gICAgICAndG91Y2hzdGFydCcsICd0b3VjaGVuZCcsICd0b3VjaG1vdmUnLFxuICAgICAgJ3BvaW50ZXJkb3duJywgJ3BvaW50ZXJ1cCcsICdwb2ludGVybW92ZScsXG4gICAgICAnd2hlZWwnXG4gICAgXTtcblxuICAgIHRoaXMuZW5hYmxlKCk7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlLlxuICAgKi9cbiAgZW5hYmxlKCkge1xuICAgIHRoaXMuc2NlbmVfLnJlcXVlc3RSZW5kZXJNb2RlID0gdHJ1ZTtcbiAgICB0aGlzLnNjZW5lXy5tYXhpbXVtUmVuZGVyVGltZUNoYW5nZSA9IDEwMDA7XG4gICAgZm9yIChjb25zdCByZXBhaW50S2V5IG9mIHRoaXMucmVwYWludEV2ZW50TmFtZXNfKSB7XG4gICAgICB0aGlzLmNhbnZhc18uYWRkRXZlbnRMaXN0ZW5lcihyZXBhaW50S2V5LCB0aGlzLl9ib3VuZE5vdGlmeVJlcGFpbnRSZXF1aXJlZCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9ib3VuZE5vdGlmeVJlcGFpbnRSZXF1aXJlZCwgZmFsc2UpO1xuXG4gICAgLy8gTGlzdGVuIGZvciBjaGFuZ2VzIG9uIHRoZSBsYXllciBncm91cFxuICAgIHRoaXMub2wzZC5nZXRPbE1hcCgpLmdldExheWVyR3JvdXAoKS5vbignY2hhbmdlJywgdGhpcy5fYm91bmROb3RpZnlSZXBhaW50UmVxdWlyZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGUuXG4gICAqL1xuICBkaXNhYmxlKCkge1xuICAgIGZvciAoY29uc3QgcmVwYWludEtleSBvZiB0aGlzLnJlcGFpbnRFdmVudE5hbWVzXykge1xuICAgICAgdGhpcy5jYW52YXNfLnJlbW92ZUV2ZW50TGlzdGVuZXIocmVwYWludEtleSwgdGhpcy5fYm91bmROb3RpZnlSZXBhaW50UmVxdWlyZWQsIGZhbHNlKTtcbiAgICB9XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fYm91bmROb3RpZnlSZXBhaW50UmVxdWlyZWQsIGZhbHNlKTtcblxuICAgIHRoaXMub2wzZC5nZXRPbE1hcCgpLmdldExheWVyR3JvdXAoKS51bignY2hhbmdlJywgdGhpcy5fYm91bmROb3RpZnlSZXBhaW50UmVxdWlyZWQpO1xuICAgIHRoaXMuc2NlbmVfLnJlcXVlc3RSZW5kZXJNb2RlID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmVzdGFydCByZW5kZXIgbG9vcC5cbiAgICogRm9yY2UgYSByZXN0YXJ0IG9mIHRoZSByZW5kZXIgbG9vcC5cbiAgICogQGFwaVxuICAgKi9cbiAgcmVzdGFydFJlbmRlckxvb3AoKSB7XG4gICAgdGhpcy5ub3RpZnlSZXBhaW50UmVxdWlyZWQoKTtcbiAgfVxuXG4gIG5vdGlmeVJlcGFpbnRSZXF1aXJlZCgpIHtcbiAgICB0aGlzLnNjZW5lXy5yZXF1ZXN0UmVuZGVyKCk7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBBdXRvUmVuZGVyTG9vcDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9WaWV3UHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQ0VOVEVSOiAnY2VudGVyJyxcbiAgICBSRVNPTFVUSU9OOiAncmVzb2x1dGlvbicsXG4gICAgUk9UQVRJT046ICdyb3RhdGlvbicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlld1Byb3BlcnR5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jZW50ZXJjb25zdHJhaW50XG4gKi9cbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpLCBudW1iZXIsIGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplLCBib29sZWFuPSk6IChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpfSBUeXBlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9ubHlDZW50ZXIgSWYgdHJ1ZSwgdGhlIGNvbnN0cmFpbnQgd2lsbCBvbmx5IGFwcGx5IHRvIHRoZSB2aWV3IGNlbnRlci5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc21vb3RoIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBnbyBzbGlnaHRseSBvdXQgb2YgdGhlIGdpdmVuIGV4dGVudFxuICogKG9ubHkgZHVyaW5nIGludGVyYWN0aW9uIGFuZCBhbmltYXRpb24pLlxuICogQHJldHVybiB7VHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFeHRlbnQoZXh0ZW50LCBvbmx5Q2VudGVyLCBzbW9vdGgpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplOyB1bnVzZWQgaWYgYG9ubHlDZW50ZXJgIHdhcyBzcGVjaWZpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzTW92aW5nIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjZW50ZXIsIHJlc29sdXRpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAoY2VudGVyKSB7XG4gICAgICAgICAgICB2YXIgdmlld1dpZHRoID0gb25seUNlbnRlciA/IDAgOiBzaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2aWV3SGVpZ2h0ID0gb25seUNlbnRlciA/IDAgOiBzaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBtaW5YID0gZXh0ZW50WzBdICsgdmlld1dpZHRoIC8gMjtcbiAgICAgICAgICAgIHZhciBtYXhYID0gZXh0ZW50WzJdIC0gdmlld1dpZHRoIC8gMjtcbiAgICAgICAgICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdICsgdmlld0hlaWdodCAvIDI7XG4gICAgICAgICAgICB2YXIgbWF4WSA9IGV4dGVudFszXSAtIHZpZXdIZWlnaHQgLyAyO1xuICAgICAgICAgICAgLy8gbm90ZTogd2hlbiB6b29taW5nIG91dCBvZiBib3VuZHMsIG1pbiBhbmQgbWF4IHZhbHVlcyBmb3IgeCBhbmQgeSBtYXlcbiAgICAgICAgICAgIC8vIGVuZCB1cCBpbnZlcnRlZCAobWluID4gbWF4KTsgdGhpcyBoYXMgdG8gYmUgYWNjb3VudGVkIGZvclxuICAgICAgICAgICAgaWYgKG1pblggPiBtYXhYKSB7XG4gICAgICAgICAgICAgICAgbWluWCA9IChtYXhYICsgbWluWCkgLyAyO1xuICAgICAgICAgICAgICAgIG1heFggPSBtaW5YO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1pblkgPiBtYXhZKSB7XG4gICAgICAgICAgICAgICAgbWluWSA9IChtYXhZICsgbWluWSkgLyAyO1xuICAgICAgICAgICAgICAgIG1heFkgPSBtaW5ZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHggPSBjbGFtcChjZW50ZXJbMF0sIG1pblgsIG1heFgpO1xuICAgICAgICAgICAgdmFyIHkgPSBjbGFtcChjZW50ZXJbMV0sIG1pblksIG1heFkpO1xuICAgICAgICAgICAgdmFyIHJhdGlvID0gMzAgKiByZXNvbHV0aW9uO1xuICAgICAgICAgICAgLy8gZHVyaW5nIGFuIGludGVyYWN0aW9uLCBhbGxvdyBzb21lIG92ZXJzY3JvbGxcbiAgICAgICAgICAgIGlmIChvcHRfaXNNb3ZpbmcgJiYgc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgeCArPVxuICAgICAgICAgICAgICAgICAgICAtcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgbWluWCAtIGNlbnRlclswXSkgLyByYXRpbykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgY2VudGVyWzBdIC0gbWF4WCkgLyByYXRpbyk7XG4gICAgICAgICAgICAgICAgeSArPVxuICAgICAgICAgICAgICAgICAgICAtcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgbWluWSAtIGNlbnRlclsxXSkgLyByYXRpbykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgY2VudGVyWzFdIC0gbWF4WSkgLyByYXRpbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW3gsIHldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gY2VudGVyIENlbnRlci5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9uZShjZW50ZXIpIHtcbiAgICByZXR1cm4gY2VudGVyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2VudGVyY29uc3RyYWludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgZ2V0SGVpZ2h0LCBnZXRXaWR0aCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpbmVhckZpbmROZWFyZXN0IH0gZnJvbSAnLi9hcnJheS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigobnVtYmVyfHVuZGVmaW5lZCksIG51bWJlciwgaW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemUsIGJvb2xlYW49KTogKG51bWJlcnx1bmRlZmluZWQpfSBUeXBlXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIG1vZGlmaWVkIHJlc29sdXRpb24gdGFraW5nIGludG8gYWNjb3VudCB0aGUgdmlld3BvcnQgc2l6ZSBhbmQgbWF4aW11bVxuICogYWxsb3dlZCBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG1heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gdmlld3BvcnRTaXplIFZpZXdwb3J0IHNpemUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dGdWxsRXh0ZW50IFdoZXRoZXIgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENhcHBlZCByZXNvbHV0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG1heEV4dGVudCwgdmlld3BvcnRTaXplLCBzaG93RnVsbEV4dGVudCkge1xuICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMF07XG4gICAgdmFyIHlSZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMV07XG4gICAgaWYgKHNob3dGdWxsRXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihyZXNvbHV0aW9uLCBNYXRoLm1heCh4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pKTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWluKHJlc29sdXRpb24sIE1hdGgubWluKHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbikpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbW9kaWZpZWQgcmVzb2x1dGlvbiB0byBiZSBiZXR3ZWVuIG1heFJlc29sdXRpb24gYW5kIG1pblJlc29sdXRpb24gd2hpbGVcbiAqIHN0aWxsIGFsbG93aW5nIHRoZSB2YWx1ZSB0byBiZSBzbGlnaHRseSBvdXQgb2YgYm91bmRzLlxuICogTm90ZTogdGhlIGNvbXB1dGF0aW9uIGlzIGJhc2VkIG9uIHRoZSBsb2dhcml0aG0gZnVuY3Rpb24gKGxuKTpcbiAqICAtIGF0IDEsIGxuKHgpIGlzIDBcbiAqICAtIGFib3ZlIDEsIGxuKHgpIGtlZXBzIGluY3JlYXNpbmcgYnV0IGF0IGEgbXVjaCBzbG93ZXIgcGFjZSB0aGFuIHhcbiAqIFRoZSBmaW5hbCByZXN1bHQgaXMgY2xhbXBlZCB0byBwcmV2ZW50IGdldHRpbmcgdG9vIGZhciBhd2F5IGZyb20gYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNtb290aGVkIHJlc29sdXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24pIHtcbiAgICB2YXIgcmVzdWx0ID0gTWF0aC5taW4ocmVzb2x1dGlvbiwgbWF4UmVzb2x1dGlvbik7XG4gICAgdmFyIHJhdGlvID0gNTA7XG4gICAgcmVzdWx0ICo9XG4gICAgICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIHJlc29sdXRpb24gLyBtYXhSZXNvbHV0aW9uIC0gMSkpIC8gcmF0aW8gK1xuICAgICAgICAgICAgMTtcbiAgICBpZiAobWluUmVzb2x1dGlvbikge1xuICAgICAgICByZXN1bHQgPSBNYXRoLm1heChyZXN1bHQsIG1pblJlc29sdXRpb24pO1xuICAgICAgICByZXN1bHQgLz1cbiAgICAgICAgICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIG1pblJlc29sdXRpb24gLyByZXNvbHV0aW9uIC0gMSkpIC9cbiAgICAgICAgICAgICAgICByYXRpbyArXG4gICAgICAgICAgICAgICAgMTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYW1wKHJlc3VsdCwgbWluUmVzb2x1dGlvbiAvIDIsIG1heFJlc29sdXRpb24gKiAyKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSByZXNvbHV0aW9ucyBSZXNvbHV0aW9ucy5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zbW9vdGggSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X21heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3Nob3dGdWxsRXh0ZW50IElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMocmVzb2x1dGlvbnMsIG9wdF9zbW9vdGgsIG9wdF9tYXhFeHRlbnQsIG9wdF9zaG93RnVsbEV4dGVudCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiBEaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc01vdmluZyBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHJlc29sdXRpb25zWzBdO1xuICAgICAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHZhciBjYXBwZWRNYXhSZXMgPSBvcHRfbWF4RXh0ZW50XG4gICAgICAgICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG9wdF9tYXhFeHRlbnQsIHNpemUsIG9wdF9zaG93RnVsbEV4dGVudClcbiAgICAgICAgICAgICAgICA6IG1heFJlc29sdXRpb247XG4gICAgICAgICAgICAvLyBkdXJpbmcgaW50ZXJhY3Rpbmcgb3IgYW5pbWF0aW5nLCBhbGxvdyBpbnRlcm1lZGlhcnkgdmFsdWVzXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYXBwZWQgPSBNYXRoLm1pbihjYXBwZWRNYXhSZXMsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgdmFyIHogPSBNYXRoLmZsb29yKGxpbmVhckZpbmROZWFyZXN0KHJlc29sdXRpb25zLCBjYXBwZWQsIGRpcmVjdGlvbikpO1xuICAgICAgICAgICAgaWYgKHJlc29sdXRpb25zW3pdID4gY2FwcGVkTWF4UmVzICYmIHogPCByZXNvbHV0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW3ogKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uc1t6XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHBvd2VyIFBvd2VyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWluUmVzb2x1dGlvbiBNaW5pbXVtIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc21vb3RoIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9tYXhFeHRlbnQgTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zaG93RnVsbEV4dGVudCBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1Bvd2VyKHBvd2VyLCBtYXhSZXNvbHV0aW9uLCBvcHRfbWluUmVzb2x1dGlvbiwgb3B0X3Ntb290aCwgb3B0X21heEV4dGVudCwgb3B0X3Nob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemUuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzTW92aW5nIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBjYXBwZWRNYXhSZXMgPSBvcHRfbWF4RXh0ZW50XG4gICAgICAgICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG9wdF9tYXhFeHRlbnQsIHNpemUsIG9wdF9zaG93RnVsbEV4dGVudClcbiAgICAgICAgICAgICAgICA6IG1heFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IG9wdF9taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfbWluUmVzb2x1dGlvbiA6IDA7XG4gICAgICAgICAgICAvLyBkdXJpbmcgaW50ZXJhY3Rpbmcgb3IgYW5pbWF0aW5nLCBhbGxvdyBpbnRlcm1lZGlhcnkgdmFsdWVzXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0b2xlcmFuY2UgPSAxZS05O1xuICAgICAgICAgICAgdmFyIG1pblpvb21MZXZlbCA9IE1hdGguY2VpbChNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gY2FwcGVkTWF4UmVzKSAvIE1hdGgubG9nKHBvd2VyKSAtIHRvbGVyYW5jZSk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gLWRpcmVjdGlvbiAqICgwLjUgLSB0b2xlcmFuY2UpICsgMC41O1xuICAgICAgICAgICAgdmFyIGNhcHBlZCA9IE1hdGgubWluKGNhcHBlZE1heFJlcywgcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB2YXIgY2FwcGVkWm9vbUxldmVsID0gTWF0aC5mbG9vcihNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gY2FwcGVkKSAvIE1hdGgubG9nKHBvd2VyKSArIG9mZnNldCk7XG4gICAgICAgICAgICB2YXIgem9vbUxldmVsID0gTWF0aC5tYXgobWluWm9vbUxldmVsLCBjYXBwZWRab29tTGV2ZWwpO1xuICAgICAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIHpvb21MZXZlbCk7XG4gICAgICAgICAgICByZXR1cm4gY2xhbXAobmV3UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBNaW4gcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zbW9vdGggSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X21heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3Nob3dGdWxsRXh0ZW50IElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBvcHRfc21vb3RoLCBvcHRfbWF4RXh0ZW50LCBvcHRfc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXNNb3ZpbmcgVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGNhcHBlZE1heFJlcyA9IG9wdF9tYXhFeHRlbnRcbiAgICAgICAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgb3B0X21heEV4dGVudCwgc2l6ZSwgb3B0X3Nob3dGdWxsRXh0ZW50KVxuICAgICAgICAgICAgICAgIDogbWF4UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBzbW9vdGggPSBvcHRfc21vb3RoICE9PSB1bmRlZmluZWQgPyBvcHRfc21vb3RoIDogdHJ1ZTtcbiAgICAgICAgICAgIGlmICghc21vb3RoIHx8ICFvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMsIG1pblJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb2x1dGlvbmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JvdGF0aW9uY29uc3RyYWludFxuICovXG5pbXBvcnQgeyB0b1JhZGlhbnMgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBib29sZWFuPSk6IChudW1iZXJ8dW5kZWZpbmVkKX0gVHlwZVxuICovXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGUocm90YXRpb24pIHtcbiAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKHJvdGF0aW9uKSB7XG4gICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIE4uXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvTihuKSB7XG4gICAgdmFyIHRoZXRhID0gKDIgKiBNYXRoLlBJKSAvIG47XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc01vdmluZyBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocm90YXRpb24sIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJvdGF0aW9uID0gTWF0aC5mbG9vcihyb3RhdGlvbiAvIHRoZXRhICsgMC41KSAqIHRoZXRhO1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF90b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHJldHVybiB7VHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1plcm8ob3B0X3RvbGVyYW5jZSkge1xuICAgIHZhciB0b2xlcmFuY2UgPSBvcHRfdG9sZXJhbmNlIHx8IHRvUmFkaWFucyg1KTtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzTW92aW5nIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyb3RhdGlvbiwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHJvdGF0aW9uKSA8PSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdGF0aW9uY29uc3RyYWludC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9WaWV3XG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCBWaWV3UHJvcGVydHkgZnJvbSAnLi9WaWV3UHJvcGVydHkuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQsIGNyZWF0ZVByb2plY3Rpb24sIGZyb21Vc2VyQ29vcmRpbmF0ZSwgZnJvbVVzZXJFeHRlbnQsIGdldFVzZXJQcm9qZWN0aW9uLCB0b1VzZXJDb29yZGluYXRlLCB0b1VzZXJFeHRlbnQsIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkQ29vcmRpbmF0ZSwgZXF1YWxzIGFzIGNvb3JkaW5hdGVzRXF1YWwsIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCB9IGZyb20gJy4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgbm9uZSBhcyBjZW50ZXJOb25lLCBjcmVhdGVFeHRlbnQgfSBmcm9tICcuL2NlbnRlcmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgY2xhbXAsIG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uIH0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTbmFwVG9OLCBjcmVhdGVTbmFwVG9aZXJvLCBkaXNhYmxlLCBub25lIGFzIHJvdGF0aW9uTm9uZSwgfSBmcm9tICcuL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTbmFwVG9Qb3dlciwgY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMsIH0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi9lYXNpbmcuanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7IGdldENlbnRlciwgZ2V0Rm9yVmlld0FuZFNpemUsIGdldEhlaWdodCwgZ2V0V2lkdGgsIGlzRW1wdHksIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgaW5BbmRPdXQgfSBmcm9tICcuL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4vYXJyYXkuanMnO1xuaW1wb3J0IHsgZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudCB9IGZyb20gJy4vZ2VvbS9Qb2x5Z29uLmpzJztcbi8qKlxuICogQW4gYW5pbWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtzb3VyY2VDZW50ZXJdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbdGFyZ2V0Q2VudGVyXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSZXNvbHV0aW9uXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSZXNvbHV0aW9uXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSb3RhdGlvbl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0Um90YXRpb25dXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHN0YXJ0XG4gKiBAcHJvcGVydHkge251bWJlcn0gZHVyYXRpb25cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gY29tcGxldGVcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IGVhc2luZ1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTp2b2lkfSBjYWxsYmFja1xuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENvbnN0cmFpbnRzXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY2VudGVyY29uc3RyYWludC5qc1wiKS5UeXBlfSBjZW50ZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9yZXNvbHV0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByZXNvbHV0aW9uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcm90YXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IHJvdGF0aW9uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRml0T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgYm94IHRvIGZpdFxuICogdGhlIGV4dGVudCBpbnRvLiBEZWZhdWx0IGlzIHRoZSBjdXJyZW50IHNpemUgb2YgdGhlIGZpcnN0IG1hcCBpbiB0aGUgRE9NIHRoYXRcbiAqIHVzZXMgdGhpcyB2aWV3LCBvciBgWzEwMCwgMTAwXWAgaWYgbm8gc3VjaCBtYXAgaXMgZm91bmQuXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSBbcGFkZGluZz1bMCwgMCwgMCwgMF1dIFBhZGRpbmcgKGluIHBpeGVscykgdG8gYmVcbiAqIGNsZWFyZWQgaW5zaWRlIHRoZSB2aWV3LiBWYWx1ZXMgaW4gdGhlIGFycmF5IGFyZSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnRcbiAqIHBhZGRpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtuZWFyZXN0PWZhbHNlXSBJZiB0aGUgdmlldyBgY29uc3RyYWluUmVzb2x1dGlvbmAgb3B0aW9uIGlzIGB0cnVlYCxcbiAqIGdldCB0aGUgbmVhcmVzdCBleHRlbnQgaW5zdGVhZCBvZiB0aGUgY2xvc2VzdCB0aGF0IGFjdHVhbGx5IGZpdHMgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb249MF0gTWluaW11bSByZXNvbHV0aW9uIHRoYXQgd2Ugem9vbSB0by5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIHRoYXQgd2Ugem9vbSB0by4gSWZcbiAqIGBtaW5SZXNvbHV0aW9uYCBpcyBnaXZlbiwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbl0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQnkgZGVmYXVsdCwgdGhlcmUgaXMgbm8gYW5pbWF0aW9uIHRvIHRoZSB0YXJnZXQgZXh0ZW50LlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB1c2VkIGR1cmluZ1xuICogdGhlIGFuaW1hdGlvbiAoZGVmYXVsdHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd+aW5BbmRPdXR9KS5cbiAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBmcmFtZSB3aXRoIGEgbnVtYmVyIHJlcHJlc2VudGluZyBhXG4gKiBmcmFjdGlvbiBvZiB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlclxuICogYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdG93YXJkIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbik6dm9pZH0gW2NhbGxiYWNrXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgdmlldyBpcyBpblxuICogaXRzIGZpbmFsIHBvc2l0aW9uLiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBgdHJ1ZWAgaWYgdGhlIGFuaW1hdGlvblxuICogc2VyaWVzIGNvbXBsZXRlZCBvbiBpdHMgb3duIG9yIGBmYWxzZWAgaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWaWV3T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2NlbnRlcl0gVGhlIGluaXRpYWwgY2VudGVyIGZvclxuICogdGhlIHZpZXcuIElmIGEgdXNlciBwcm9qZWN0aW9uIGlzIG5vdCBzZXQsIHRoZSBjb29yZGluYXRlIHN5c3RlbSBmb3IgdGhlIGNlbnRlciBpc1xuICogc3BlY2lmaWVkIHdpdGggdGhlIGBwcm9qZWN0aW9uYCBvcHRpb24uIExheWVyIHNvdXJjZXMgd2lsbCBub3QgYmUgZmV0Y2hlZCBpZiB0aGlzXG4gKiBpcyBub3Qgc2V0LCBidXQgdGhlIGNlbnRlciBjYW4gYmUgc2V0IGxhdGVyIHdpdGgge0BsaW5rICNzZXRDZW50ZXJ9LlxuICogQHByb3BlcnR5IHtib29sZWFufG51bWJlcn0gW2NvbnN0cmFpblJvdGF0aW9uPXRydWVdIFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKiBgZmFsc2VgIG1lYW5zIG5vIGNvbnN0cmFpbnQuIGB0cnVlYCBtZWFucyBubyBjb25zdHJhaW50LCBidXQgc25hcCB0byB6ZXJvXG4gKiBuZWFyIHplcm8uIEEgbnVtYmVyIGNvbnN0cmFpbnMgdGhlIHJvdGF0aW9uIHRvIHRoYXQgbnVtYmVyIG9mIHZhbHVlcy4gRm9yXG4gKiBleGFtcGxlLCBgNGAgd2lsbCBjb25zdHJhaW4gdGhlIHJvdGF0aW9uIHRvIDAsIDkwLCAxODAsIGFuZCAyNzAgZGVncmVlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2VuYWJsZVJvdGF0aW9uPXRydWVdIEVuYWJsZSByb3RhdGlvbi5cbiAqIElmIGBmYWxzZWAsIGEgcm90YXRpb24gY29uc3RyYWludCB0aGF0IGFsd2F5cyBzZXRzIHRoZSByb3RhdGlvbiB0byB6ZXJvIGlzXG4gKiB1c2VkLiBUaGUgYGNvbnN0cmFpblJvdGF0aW9uYCBvcHRpb24gaGFzIG5vIGVmZmVjdCBpZiBgZW5hYmxlUm90YXRpb25gIGlzXG4gKiBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBleHRlbnQgdGhhdCBjb25zdHJhaW5zIHRoZVxuICogdmlldywgaW4gb3RoZXIgd29yZHMsIG5vdGhpbmcgb3V0c2lkZSBvZiB0aGlzIGV4dGVudCBjYW4gYmUgdmlzaWJsZSBvbiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluT25seUNlbnRlcj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyIGFuZCBub3QgdGhlIHdob2xlIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Ntb290aEV4dGVudENvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIGJlIGFwcGxpZWQgc21vb3RobHksIGkuZS4gYWxsb3cgdGhlIHZpZXcgdG8gZ28gc2xpZ2h0bHkgb3V0c2lkZVxuICogb2YgdGhlIGdpdmVuIGBleHRlbnRgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblJlc29sdXRpb25gIChvclxuICogYG1heFpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGluIHN1Y2ggYSB3YXlcbiAqIHRoYXQgdGhlIHByb2plY3Rpb24ncyB2YWxpZGl0eSBleHRlbnQgZml0cyBpbiBhIDI1NngyNTYgcHggdGlsZS4gSWYgdGhlXG4gKiBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvciAodGhlIGRlZmF1bHQpIHRoZW4gYG1heFJlc29sdXRpb25gIGRlZmF1bHRzXG4gKiB0byBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgPSAxNTY1NDMuMDMzOTI4MDQwOTdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiAgSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhSZXNvbHV0aW9uYCAob3JcbiAqIGBtaW5ab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgYXNzdW1pbmcgMjlcbiAqIHpvb20gbGV2ZWxzICh3aXRoIGEgZmFjdG9yIG9mIDIpLiBJZiB0aGUgcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3JcbiAqICh0aGUgZGVmYXVsdCkgdGhlbiBgbWluUmVzb2x1dGlvbmAgZGVmYXVsdHMgdG9cbiAqIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiAvIE1hdGgucG93KDIsIDI4KSA9IDAuMDAwNTgzMTY4MjQ1NTgzOTI1M2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MjhdIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluWm9vbWAgKG9yXG4gKiBgbWF4UmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1pblJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1heFpvb21gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4Wm9vbWAgKG9yXG4gKiBgbWluUmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1heFJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1pblpvb21gLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbXVsdGlXb3JsZD1mYWxzZV0gSWYgYGZhbHNlYCB0aGUgdmlldyBpcyBjb25zdHJhaW5lZCBzb1xuICogb25seSBvbmUgd29ybGQgaXMgdmlzaWJsZSwgYW5kIHlvdSBjYW5ub3QgcGFuIG9mZiB0aGUgZWRnZS4gIElmIGB0cnVlYCB0aGUgbWFwXG4gKiBtYXkgc2hvdyBtdWx0aXBsZSB3b3JsZHMgYXQgbG93IHpvb20gbGV2ZWxzLiAgT25seSB1c2VkIGlmIHRoZSBgcHJvamVjdGlvbmAgaXNcbiAqIGdsb2JhbC4gIE5vdGUgdGhhdCBpZiBgZXh0ZW50YCBpcyBhbHNvIHByb3ZpZGVkIGl0IGlzIGdpdmVuIHByZWNlZGVuY2UuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGFsd2F5c1xuICogYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uOyBmYWxzZSBtZWFuc1xuICogaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIHJlc29sdXRpb25cbiAqIG1pbi9tYXggdmFsdWVzIHdpbGwgYmUgYXBwbGllZCBzbW9vdGhseSwgaS4gZS4gYWxsb3cgdGhlIHZpZXcgdG8gZXhjZWVkIHNsaWdodGx5XG4gKiB0aGUgZ2l2ZW4gcmVzb2x1dGlvbiBvciB6b29tIGJvdW5kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50PWZhbHNlXSBBbGxvdyB0aGUgdmlldyB0byBiZSB6b29tZWQgb3V0IHRvXG4gKiBzaG93IHRoZSBmdWxsIGNvbmZpZ3VyZWQgZXh0ZW50LiBCeSBkZWZhdWx0LCB3aGVuIGEgdmlldyBpcyBjb25maWd1cmVkIHdpdGggYW5cbiAqIGV4dGVudCwgdXNlcnMgd2lsbCBub3QgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGUgdmlld3BvcnQgZXhjZWVkcyB0aGUgZXh0ZW50IGluXG4gKiBlaXRoZXIgZGltZW5zaW9uLiBUaGlzIG1lYW5zIHRoZSBmdWxsIGV4dGVudCBtYXkgbm90IGJlIHZpc2libGUgaWYgdGhlIHZpZXdwb3J0XG4gKiBpcyB0YWxsZXIgb3Igd2lkZXIgdGhhbiB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudC4gSWZcbiAqIHNob3dGdWxsRXh0ZW50IGlzIHRydWUsIHRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGF0IHRoZSB2aWV3cG9ydFxuICogZXhjZWVkcyB0aGUgaGVpZ2h0IG9yIHdpZHRoIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudCwgYnV0IG5vdCBib3RoLCBhbGxvd2luZyB0aGVcbiAqIGZ1bGwgZXh0ZW50IHRvIGJlIHNob3duLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBUaGVcbiAqIHByb2plY3Rpb24uIFRoZSBkZWZhdWx0IGlzIFNwaGVyaWNhbCBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuIFRoZVxuICogdW5pdHMgYXJlIGBwcm9qZWN0aW9uYCB1bml0cyBwZXIgcGl4ZWwgKGUuZy4gbWV0ZXJzIHBlciBwaXhlbCkuIEFuXG4gKiBhbHRlcm5hdGl2ZSB0byBzZXR0aW5nIHRoaXMgaXMgdG8gc2V0IGB6b29tYC4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZVxuICogZmV0Y2hlZCBpZiBuZWl0aGVyIHRoaXMgbm9yIGB6b29tYCBhcmUgZGVmaW5lZCwgYnV0IHRoZXkgY2FuIGJlIHNldCBsYXRlclxuICogd2l0aCB7QGxpbmsgI3NldFpvb219IG9yIHtAbGluayAjc2V0UmVzb2x1dGlvbn0uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc10gUmVzb2x1dGlvbnMgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJZiBzZXQgdGhlIGBtYXhSZXNvbHV0aW9uYCwgYG1pblJlc29sdXRpb25gLFxuICogYG1pblpvb21gLCBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAgb3B0aW9ucyBhcmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gVGhlIGluaXRpYWwgcm90YXRpb24gZm9yIHRoZSB2aWV3IGluIHJhZGlhbnNcbiAqIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UsIDAgbWVhbnMgTm9ydGgpLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tXSBPbmx5IHVzZWQgaWYgYHJlc29sdXRpb25gIGlzIG5vdCBkZWZpbmVkLiBab29tXG4gKiBsZXZlbCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbUZhY3Rvcj0yXSBUaGUgem9vbSBmYWN0b3IgdXNlZCB0byBjb21wdXRlIHRoZVxuICogY29ycmVzcG9uZGluZyByZXNvbHV0aW9uLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvbk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbV0gVGhlIHpvb20gbGV2ZWwgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZiB0aGVcbiAqIGFuaW1hdGlvbi4gVGhpcyB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYHJlc29sdXRpb25gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXNvbHV0aW9uXSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kXG4gKiBvZiB0aGUgYW5pbWF0aW9uLiAgSWYgYHpvb21gIGlzIGFsc28gcHJvdmlkZWQsIHRoaXMgb3B0aW9uIHdpbGwgYmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb25dIFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kIG9mXG4gKiB0aGUgYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gT3B0aW9uYWwgYW5jaG9yIHRvIHJlbWFpbiBmaXhlZFxuICogZHVyaW5nIGEgcm90YXRpb24gb3IgcmVzb2x1dGlvbiBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMDBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZFxuICogZHVyaW5nIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlclxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gcmVzb2x1dGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJvdGF0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gem9vbVxuICovXG4vKipcbiAqIERlZmF1bHQgbWluIHpvb20gbGV2ZWwgZm9yIHRoZSBtYXAgdmlldy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBERUZBVUxUX01JTl9aT09NID0gMDtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBWaWV3IG9iamVjdCByZXByZXNlbnRzIGEgc2ltcGxlIDJEIHZpZXcgb2YgdGhlIG1hcC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBvYmplY3QgdG8gYWN0IHVwb24gdG8gY2hhbmdlIHRoZSBjZW50ZXIsIHJlc29sdXRpb24sXG4gKiBhbmQgcm90YXRpb24gb2YgdGhlIG1hcC5cbiAqXG4gKiBBIFZpZXcgaGFzIGEgYHByb2plY3Rpb25gLiBUaGUgcHJvamVjdGlvbiBkZXRlcm1pbmVzIHRoZVxuICogY29vcmRpbmF0ZSBzeXN0ZW0gb2YgdGhlIGNlbnRlciwgYW5kIGl0cyB1bml0cyBkZXRlcm1pbmUgdGhlIHVuaXRzIG9mIHRoZVxuICogcmVzb2x1dGlvbiAocHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwpLiBUaGUgZGVmYXVsdCBwcm9qZWN0aW9uIGlzXG4gKiBTcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKlxuICogIyMjIFRoZSB2aWV3IHN0YXRlc1xuICpcbiAqIEEgVmlldyBpcyBkZXRlcm1pbmVkIGJ5IHRocmVlIHN0YXRlczogYGNlbnRlcmAsIGByZXNvbHV0aW9uYCxcbiAqIGFuZCBgcm90YXRpb25gLiBFYWNoIHN0YXRlIGhhcyBhIGNvcnJlc3BvbmRpbmcgZ2V0dGVyIGFuZCBzZXR0ZXIsIGUuZy5cbiAqIGBnZXRDZW50ZXJgIGFuZCBgc2V0Q2VudGVyYCBmb3IgdGhlIGBjZW50ZXJgIHN0YXRlLlxuICpcbiAqIFRoZSBgem9vbWAgc3RhdGUgaXMgYWN0dWFsbHkgbm90IHNhdmVkIG9uIHRoZSB2aWV3OiBhbGwgY29tcHV0YXRpb25zXG4gKiBpbnRlcm5hbGx5IHVzZSB0aGUgYHJlc29sdXRpb25gIHN0YXRlLiBTdGlsbCwgdGhlIGBzZXRab29tYCBhbmQgYGdldFpvb21gXG4gKiBtZXRob2RzIGFyZSBhdmFpbGFibGUsIGFzIHdlbGwgYXMgYGdldFJlc29sdXRpb25Gb3Jab29tYCBhbmRcbiAqIGBnZXRab29tRm9yUmVzb2x1dGlvbmAgdG8gc3dpdGNoIGZyb20gb25lIHN5c3RlbSB0byB0aGUgb3RoZXIuXG4gKlxuICogIyMjIFRoZSBjb25zdHJhaW50c1xuICpcbiAqIGBzZXRDZW50ZXJgLCBgc2V0UmVzb2x1dGlvbmAgYW5kIGBzZXRSb3RhdGlvbmAgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHRoZVxuICogc3RhdGVzIG9mIHRoZSB2aWV3LCBidXQgYW55IGNvbnN0cmFpbnQgZGVmaW5lZCBpbiB0aGUgY29uc3RydWN0b3Igd2lsbFxuICogYmUgYXBwbGllZCBhbG9uZyB0aGUgd2F5LlxuICpcbiAqIEEgVmlldyBvYmplY3QgY2FuIGhhdmUgYSAqcmVzb2x1dGlvbiBjb25zdHJhaW50KiwgYSAqcm90YXRpb24gY29uc3RyYWludCpcbiAqIGFuZCBhICpjZW50ZXIgY29uc3RyYWludCouXG4gKlxuICogVGhlICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqIHR5cGljYWxseSByZXN0cmljdHMgbWluL21heCB2YWx1ZXMgYW5kXG4gKiBzbmFwcyB0byBzcGVjaWZpYyByZXNvbHV0aW9ucy4gSXQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgZm9sbG93aW5nXG4gKiBvcHRpb25zOiBgcmVzb2x1dGlvbnNgLCBgbWF4UmVzb2x1dGlvbmAsIGBtYXhab29tYCBhbmQgYHpvb21GYWN0b3JgLlxuICogSWYgYHJlc29sdXRpb25zYCBpcyBzZXQsIHRoZSBvdGhlciB0aHJlZSBvcHRpb25zIGFyZSBpZ25vcmVkLiBTZWVcbiAqIGRvY3VtZW50YXRpb24gZm9yIGVhY2ggb3B0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgdmlld1xuICogb25seSBoYXMgYSBtaW4vbWF4IHJlc3RyaWN0aW9uIGFuZCBhbGxvdyBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMgd2hlblxuICogcGluY2gtem9vbWluZyBmb3IgZXhhbXBsZS5cbiAqXG4gKiBUaGUgKnJvdGF0aW9uIGNvbnN0cmFpbnQqIHNuYXBzIHRvIHNwZWNpZmljIGFuZ2xlcy4gSXQgaXMgZGV0ZXJtaW5lZFxuICogYnkgdGhlIGZvbGxvd2luZyBvcHRpb25zOiBgZW5hYmxlUm90YXRpb25gIGFuZCBgY29uc3RyYWluUm90YXRpb25gLlxuICogQnkgZGVmYXVsdCByb3RhdGlvbiBpcyBhbGxvd2VkIGFuZCBpdHMgdmFsdWUgaXMgc25hcHBlZCB0byB6ZXJvIHdoZW4gYXBwcm9hY2hpbmcgdGhlXG4gKiBob3Jpem9udGFsLlxuICpcbiAqIFRoZSAqY2VudGVyIGNvbnN0cmFpbnQqIGlzIGRldGVybWluZWQgYnkgdGhlIGBleHRlbnRgIG9wdGlvbi4gQnlcbiAqIGRlZmF1bHQgdGhlIHZpZXcgY2VudGVyIGlzIG5vdCBjb25zdHJhaW5lZCBhdCBhbGwuXG4gKlxuICogIyMjIENoYW5naW5nIHRoZSB2aWV3IHN0YXRlXG4gKlxuICogSXQgaXMgaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBgc2V0Wm9vbWAsIGBzZXRSZXNvbHV0aW9uYCwgYHNldENlbnRlcmAgYW5kXG4gKiBgc2V0Um90YXRpb25gIGFyZSBzdWJqZWN0IHRvIHRoZSBhYm92ZSBtZW50aW9uZWQgY29uc3RyYWludHMuIEFzIHN1Y2gsIGl0XG4gKiBtYXkgc29tZXRpbWVzIG5vdCBiZSBwb3NzaWJsZSB0byBrbm93IGluIGFkdmFuY2UgdGhlIHJlc3VsdGluZyBzdGF0ZSBvZiB0aGVcbiAqIFZpZXcuIEZvciBleGFtcGxlLCBjYWxsaW5nIGBzZXRSZXNvbHV0aW9uKDEwKWAgZG9lcyBub3QgZ3VhcmFudGVlIHRoYXRcbiAqIGBnZXRSZXNvbHV0aW9uKClgIHdpbGwgcmV0dXJuIGAxMGAuXG4gKlxuICogQSBjb25zZXF1ZW5jZSBvZiB0aGlzIGlzIHRoYXQsIHdoZW4gYXBwbHlpbmcgYSBkZWx0YSBvbiB0aGUgdmlldyBzdGF0ZSwgb25lXG4gKiBzaG91bGQgdXNlIGBhZGp1c3RDZW50ZXJgLCBgYWRqdXN0Um90YXRpb25gLCBgYWRqdXN0Wm9vbWAgYW5kIGBhZGp1c3RSZXNvbHV0aW9uYFxuICogcmF0aGVyIHRoYW4gdGhlIGNvcnJlc3BvbmRpbmcgc2V0dGVycy4gVGhpcyB3aWxsIGxldCB2aWV3IGRvIGl0cyBpbnRlcm5hbFxuICogY29tcHV0YXRpb25zLiBCZXNpZGVzLCB0aGUgYGFkanVzdCpgIG1ldGhvZHMgYWxzbyB0YWtlIGFuIGBvcHRfYW5jaG9yYFxuICogYXJndW1lbnQgd2hpY2ggYWxsb3dzIHNwZWNpZnlpbmcgYW4gb3JpZ2luIGZvciB0aGUgdHJhbnNmb3JtYXRpb24uXG4gKlxuICogIyMjIEludGVyYWN0aW5nIHdpdGggdGhlIHZpZXdcbiAqXG4gKiBWaWV3IGNvbnN0cmFpbnRzIGFyZSB1c3VhbGx5IG9ubHkgYXBwbGllZCB3aGVuIHRoZSB2aWV3IGlzICphdCByZXN0KiwgbWVhbmluZyB0aGF0XG4gKiBubyBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgb25nb2luZy4gQXMgc3VjaCwgaWYgdGhlIHVzZXIgcHV0cyB0aGUgdmlldyBpbiBhXG4gKiBzdGF0ZSB0aGF0IGlzIG5vdCBlcXVpdmFsZW50IHRvIGEgY29uc3RyYWluZWQgb25lIChlLmcuIHJvdGF0aW5nIHRoZSB2aWV3IHdoZW5cbiAqIHRoZSBzbmFwIGFuZ2xlIGlzIDApLCBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgYXQgdGhlIGludGVyYWN0aW9uIGVuZCB0b1xuICogcHV0IGJhY2sgdGhlIHZpZXcgdG8gYSBzdGFibGUgc3RhdGU7XG4gKlxuICogQGFwaVxuICovXG52YXIgVmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmlldywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zPX0gb3B0X29wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFZpZXcob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGludHNfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PEFycmF5PEFuaW1hdGlvbj4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXBkYXRlQW5pbWF0aW9uS2V5XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdwb3J0U2l6ZV8gPSBbMTAwLCAxMDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldENlbnRlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0Um90YXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgb3B0aW9ucy5jZW50ZXIgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5jZW50ZXIsIF90aGlzLnByb2plY3Rpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5leHRlbnQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQob3B0aW9ucy5leHRlbnQsIF90aGlzLnByb2plY3Rpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5hcHBseU9wdGlvbnNfKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB1cCB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5T3B0aW9uc18gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50SW5mbyA9IGNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWF4UmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1pblJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy56b29tRmFjdG9yXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby56b29tRmFjdG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWm9vbV8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWluWm9vbTtcbiAgICAgICAgdmFyIGNlbnRlckNvbnN0cmFpbnQgPSBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uY29uc3RyYWludDtcbiAgICAgICAgdmFyIHJvdGF0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDb25zdHJhaW50c31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29uc3RyYWludHNfID0ge1xuICAgICAgICAgICAgY2VudGVyOiBjZW50ZXJDb25zdHJhaW50LFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb25Db25zdHJhaW50LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFJvdGF0aW9uKG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRpb24gOiAwKTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChvcHRpb25zLmNlbnRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jZW50ZXIgOiBudWxsKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc29sdXRpb24ob3B0aW9ucy5yZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRab29tKG9wdGlvbnMuem9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1ZpZXdPcHRpb25zfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcHRpb25zXyA9IG9wdGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYW4gdXBkYXRlZCB2ZXJzaW9uIG9mIHRoZSB2aWV3IG9wdGlvbnMgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHZpZXcuICBUaGVcbiAgICAgKiBjdXJyZW50IHJlc29sdXRpb24gKG9yIHpvb20pLCBjZW50ZXIsIGFuZCByb3RhdGlvbiBhcmUgYXBwbGllZCB0byBhbnkgc3RvcmVkXG4gICAgICogb3B0aW9ucy4gIFRoZSBwcm92aWRlZCBvcHRpb25zIGNhbiBiZSB1c2VkIHRvIGFwcGx5IG5ldyBtaW4vbWF4IHpvb20gb3JcbiAgICAgKiByZXNvbHV0aW9uIGxpbWl0cy5cbiAgICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBuZXdPcHRpb25zIE5ldyBvcHRpb25zIHRvIGJlIGFwcGxpZWQuXG4gICAgICogQHJldHVybiB7Vmlld09wdGlvbnN9IE5ldyBvcHRpb25zIHVwZGF0ZWQgd2l0aCB0aGUgY3VycmVudCB2aWV3IHN0YXRlLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFVwZGF0ZWRPcHRpb25zXyA9IGZ1bmN0aW9uIChuZXdPcHRpb25zKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLm9wdGlvbnNfKTtcbiAgICAgICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zLnJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuem9vbSA9IHRoaXMuZ2V0Wm9vbSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByZXNlcnZlIGNlbnRlclxuICAgICAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgLy8gcHJlc2VydmUgcm90YXRpb25cbiAgICAgICAgb3B0aW9ucy5yb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcmV0dXJuIGFzc2lnbih7fSwgb3B0aW9ucywgbmV3T3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbmltYXRlIHRoZSB2aWV3LiAgVGhlIHZpZXcncyBjZW50ZXIsIHpvb20gKG9yIHJlc29sdXRpb24pLCBhbmQgcm90YXRpb25cbiAgICAgKiBjYW4gYmUgYW5pbWF0ZWQgZm9yIHNtb290aCB0cmFuc2l0aW9ucyBiZXR3ZWVuIHZpZXcgc3RhdGVzLiAgRm9yIGV4YW1wbGUsXG4gICAgICogdG8gYW5pbWF0ZSB0aGUgdmlldyB0byBhIG5ldyB6b29tIGxldmVsOlxuICAgICAqXG4gICAgICogICAgIHZpZXcuYW5pbWF0ZSh7em9vbTogdmlldy5nZXRab29tKCkgKyAxfSk7XG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgYW5pbWF0aW9uIGxhc3RzIG9uZSBzZWNvbmQgYW5kIHVzZXMgaW4tYW5kLW91dCBlYXNpbmcuICBZb3VcbiAgICAgKiBjYW4gY3VzdG9taXplIHRoaXMgYmVoYXZpb3IgYnkgaW5jbHVkaW5nIGBkdXJhdGlvbmAgKGluIG1pbGxpc2Vjb25kcykgYW5kXG4gICAgICogYGVhc2luZ2Agb3B0aW9ucyAoc2VlIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfSkuXG4gICAgICpcbiAgICAgKiBUbyBjaGFpbiB0b2dldGhlciBtdWx0aXBsZSBhbmltYXRpb25zLCBjYWxsIHRoZSBtZXRob2Qgd2l0aCBtdWx0aXBsZVxuICAgICAqIGFuaW1hdGlvbiBvYmplY3RzLiAgRm9yIGV4YW1wbGUsIHRvIGZpcnN0IHpvb20gYW5kIHRoZW4gcGFuOlxuICAgICAqXG4gICAgICogICAgIHZpZXcuYW5pbWF0ZSh7em9vbTogMTB9LCB7Y2VudGVyOiBbMCwgMF19KTtcbiAgICAgKlxuICAgICAqIElmIHlvdSBwcm92aWRlIGEgZnVuY3Rpb24gYXMgdGhlIGxhc3QgYXJndW1lbnQgdG8gdGhlIGFuaW1hdGUgbWV0aG9kLCBpdFxuICAgICAqIHdpbGwgZ2V0IGNhbGxlZCBhdCB0aGUgZW5kIG9mIGFuIGFuaW1hdGlvbiBzZXJpZXMuICBUaGUgY2FsbGJhY2sgd2lsbCBiZVxuICAgICAqIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgXG4gICAgICogaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAgICAgKlxuICAgICAqIEFuaW1hdGlvbnMgYXJlIGNhbmNlbGxlZCBieSB1c2VyIGludGVyYWN0aW9ucyAoZS5nLiBkcmFnZ2luZyB0aGUgbWFwKSBvciBieVxuICAgICAqIGNhbGxpbmcgYHZpZXcuc2V0Q2VudGVyKClgLCBgdmlldy5zZXRSZXNvbHV0aW9uKClgLCBvciBgdmlldy5zZXRSb3RhdGlvbigpYFxuICAgICAqIChvciBhbm90aGVyIG1ldGhvZCB0aGF0IGNhbGxzIG9uZSBvZiB0aGVzZSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uXG4gICAgICogICAgIG9wdGlvbnMuICBNdWx0aXBsZSBhbmltYXRpb25zIGNhbiBiZSBydW4gaW4gc2VyaWVzIGJ5IHBhc3NpbmcgbXVsdGlwbGVcbiAgICAgKiAgICAgb3B0aW9ucyBvYmplY3RzLiAgVG8gcnVuIG11bHRpcGxlIGFuaW1hdGlvbnMgaW4gcGFyYWxsZWwsIGNhbGwgdGhlIG1ldGhvZFxuICAgICAqICAgICBtdWx0aXBsZSB0aW1lcy4gIEFuIG9wdGlvbmFsIGNhbGxiYWNrIGNhbiBiZSBwcm92aWRlZCBhcyBhIGZpbmFsXG4gICAgICogICAgIGFyZ3VtZW50LiAgVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlclxuICAgICAqICAgICB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlZCB3aXRob3V0IGJlaW5nIGNhbmNlbGxlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICh2YXJfYXJncykge1xuICAgICAgICBpZiAodGhpcy5pc0RlZigpICYmICF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2VudGVyID0gZnJvbVVzZXJDb29yZGluYXRlKG9wdGlvbnMuY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRpb25zLmFuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJnc1tpXSA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZUludGVybmFsID0gZnVuY3Rpb24gKHZhcl9hcmdzKSB7XG4gICAgICAgIHZhciBhbmltYXRpb25Db3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBjYWxsYmFjaztcbiAgICAgICAgaWYgKGFuaW1hdGlvbkNvdW50ID4gMSAmJlxuICAgICAgICAgICAgdHlwZW9mIGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdO1xuICAgICAgICAgICAgLS1hbmltYXRpb25Db3VudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNEZWYoKSkge1xuICAgICAgICAgICAgLy8gaWYgdmlldyBwcm9wZXJ0aWVzIGFyZSBub3QgeWV0IHNldCwgc2hvcnRjdXQgdG8gdGhlIGZpbmFsIHN0YXRlXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXTtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKHN0YXRlLmNlbnRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJvdGF0aW9uKHN0YXRlLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy50YXJnZXRDZW50ZXJfLnNsaWNlKCk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy50YXJnZXRSb3RhdGlvbl87XG4gICAgICAgIHZhciBzZXJpZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb25Db3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IC8qKiBAdHlwZSB7QW5pbWF0aW9uT3B0aW9uc30gKi8gKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBvcHRpb25zLmFuY2hvcixcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZUNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0Q2VudGVyID0gb3B0aW9ucy5jZW50ZXIuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICBjZW50ZXIgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShvcHRpb25zLnpvb20pO1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24gPSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IG9wdGlvbnMucmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uID0gcm90YXRpb247XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gbW9kdWxvKG9wdGlvbnMucm90YXRpb24gLSByb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uID0gcm90YXRpb24gKyBkZWx0YTtcbiAgICAgICAgICAgICAgICByb3RhdGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGFuaW1hdGlvbiBpcyBhIG5vLW9wXG4gICAgICAgICAgICBpZiAoaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uY29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIHdlIHN0aWxsIHB1c2ggaXQgb250byB0aGUgc2VyaWVzIGZvciBjYWxsYmFjayBoYW5kbGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgKz0gYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VyaWVzLnB1c2goYW5pbWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfLnB1c2goc2VyaWVzKTtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uc18oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0QW5pbWF0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaW50c19bVmlld0hpbnQuQU5JTUFUSU5HXSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlldywgc3VjaCBhcyBwYW5uaW5nIG9yIHpvb21pbmcuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgaW50ZXJhY3RlZCB3aXRoLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRJbnRlcmFjdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LklOVEVSQUNUSU5HXSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYW5jZWwgYW55IG9uZ29pbmcgYW5pbWF0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FuY2VsQW5pbWF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLXRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10pO1xuICAgICAgICB2YXIgYW5jaG9yO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgICAgICAgaWYgKHNlcmllc1swXS5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKHNlcmllc1swXS5jYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gYW5pbWF0aW9uLmFuY2hvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gYW5jaG9yO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFsbCBhbmltYXRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnVwZGF0ZUFuaW1hdGlvbnNfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVBbmltYXRpb25LZXlfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBtb3JlID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzID0gdGhpcy5hbmltYXRpb25zX1tpXTtcbiAgICAgICAgICAgIHZhciBzZXJpZXNDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBzZXJpZXNbal07XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGVsYXBzZWQgPSBub3cgLSBhbmltYXRpb24uc3RhcnQ7XG4gICAgICAgICAgICAgICAgdmFyIGZyYWN0aW9uID0gYW5pbWF0aW9uLmR1cmF0aW9uID4gMCA/IGVsYXBzZWQgLyBhbmltYXRpb24uZHVyYXRpb24gOiAxO1xuICAgICAgICAgICAgICAgIGlmIChmcmFjdGlvbiA+PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IGFuaW1hdGlvbi5lYXNpbmcoZnJhY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MCA9IGFuaW1hdGlvbi5zb3VyY2VDZW50ZXJbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MCA9IGFuaW1hdGlvbi5zb3VyY2VDZW50ZXJbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0geDAgKyBwcm9ncmVzcyAqICh4MSAtIHgwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB5MCArIHByb2dyZXNzICogKHkxIC0geTApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBbeCwgeV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAmJiBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHByb2dyZXNzID09PSAxXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWluZWRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCBzaXplLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShjb25zdHJhaW5lZFJlc29sdXRpb24sIGFuaW1hdGlvbi5hbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gcHJvZ3Jlc3MgPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbW9kdWxvKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5QSVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBhbmltYXRpb24uc291cmNlUm90YXRpb24gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWluZWRSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHJvdGF0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKGNvbnN0cmFpbmVkUm90YXRpb24sIGFuaW1hdGlvbi5hbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fID0gcm90YXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8odHJ1ZSk7XG4gICAgICAgICAgICAgICAgbW9yZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcmllc0NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zX1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLTEpO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHNlcmllc1swXS5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBwcnVuZSBjb21wbGV0ZWQgc2VyaWVzXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18gPSB0aGlzLmFuaW1hdGlvbnNfLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgaWYgKG1vcmUgJiYgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBSb3RhdGlvbiBhbmNob3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJvdGF0aW9uIGFuZCBhbmNob3IuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyUm90YXRlID0gZnVuY3Rpb24gKHJvdGF0aW9uLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFpvb20gYW5jaG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyIGZvciByZXNvbHV0aW9uIGFuZCBhbmNob3IuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyWm9vbSA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIHZhciBjdXJyZW50UmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gYW5jaG9yWzBdIC1cbiAgICAgICAgICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB5ID0gYW5jaG9yWzFdIC1cbiAgICAgICAgICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMV0gLSBjdXJyZW50Q2VudGVyWzFdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGNlbnRlciA9IFt4LCB5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCB2aWV3cG9ydCBzaXplLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcm90YXRpb24gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIG9yIGBbMTAwLCAxMDBdYCB3aGVuIG5vIHZpZXdwb3J0IGlzIGZvdW5kLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFZpZXdwb3J0U2l6ZV8gPSBmdW5jdGlvbiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy52aWV3cG9ydFNpemVfO1xuICAgICAgICBpZiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdyA9IHNpemVbMF07XG4gICAgICAgICAgICB2YXIgaCA9IHNpemVbMV07XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIE1hdGguYWJzKHcgKiBNYXRoLmNvcyhvcHRfcm90YXRpb24pKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGggKiBNYXRoLnNpbihvcHRfcm90YXRpb24pKSxcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5zaW4ob3B0X3JvdGF0aW9uKSkgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhoICogTWF0aC5jb3Mob3B0X3JvdGF0aW9uKSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0b3JlcyB0aGUgdmlld3BvcnQgc2l6ZSBvbiB0aGUgdmlldy4gVGhlIHZpZXdwb3J0IHNpemUgaXMgbm90IHJlYWQgZXZlcnkgdGltZSBmcm9tIHRoZSBET01cbiAgICAgKiB0byBhdm9pZCBwZXJmb3JtYW5jZSBoaXQgYW5kIGxheW91dCByZWZsb3cuXG4gICAgICogVGhpcyBzaG91bGQgYmUgZG9uZSBvbiBtYXAgc2l6ZSBjaGFuZ2UuXG4gICAgICogTm90ZTogdGhlIGNvbnN0cmFpbnRzIGFyZSBub3QgcmVzb2x2ZWQgZHVyaW5nIGFuIGFuaW1hdGlvbiB0byBhdm9pZCBzdG9wcGluZyBpdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfc2l6ZSBWaWV3cG9ydCBzaXplOyBpZiB1bmRlZmluZWQsIFsxMDAsIDEwMF0gaXMgYXNzdW1lZFxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFZpZXdwb3J0U2l6ZSA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0U2l6ZV8gPSBBcnJheS5pc0FycmF5KG9wdF9zaXplKVxuICAgICAgICAgICAgPyBvcHRfc2l6ZS5zbGljZSgpXG4gICAgICAgICAgICA6IFsxMDAsIDEwMF07XG4gICAgICAgIGlmICghdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBjZW50ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgaWYgKCFjZW50ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvVXNlckNvb3JkaW5hdGUoY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyIHdpdGhvdXQgdHJhbnNmb3JtaW5nIHRvIHVzZXIgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q2VudGVySW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0NvbnN0cmFpbnRzfSBDb25zdHJhaW50cy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUmVzb2x1dGlvbiBjb25zdHJhaW50IGlzIHNldFxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNfLmNvbnN0cmFpblJlc29sdXRpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfaGludHMgRGVzdGluYXRpb24gYXJyYXkuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSGludC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRIaW50cyA9IGZ1bmN0aW9uIChvcHRfaGludHMpIHtcbiAgICAgICAgaWYgKG9wdF9oaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRfaGludHNbMF0gPSB0aGlzLmhpbnRzX1swXTtcbiAgICAgICAgICAgIG9wdF9oaW50c1sxXSA9IHRoaXMuaGludHNfWzFdO1xuICAgICAgICAgICAgcmV0dXJuIG9wdF9oaW50cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpbnRzXy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGV4dGVudCBmb3IgdGhlIGN1cnJlbnQgdmlldyBzdGF0ZSBhbmQgdGhlIHBhc3NlZCBzaXplLlxuICAgICAqIFRoZSBzaXplIGlzIHRoZSBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggaW50byB3aGljaCB0aGUgY2FsY3VsYXRlZCBleHRlbnRcbiAgICAgKiBzaG91bGQgZml0LiBJbiBtb3N0IGNhc2VzIHlvdSB3YW50IHRvIGdldCB0aGUgZXh0ZW50IG9mIHRoZSBlbnRpcmUgbWFwLFxuICAgICAqIHRoYXQgaXMgYG1hcC5nZXRTaXplKClgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfc2l6ZSBCb3ggcGl4ZWwgc2l6ZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgc2l6ZVxuICAgICAqIG9mIHRoZSBtYXAgdGhhdCB1c2VzIHRoaXMgdmlldyB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUV4dGVudCA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5jYWxjdWxhdGVFeHRlbnRJbnRlcm5hbChvcHRfc2l6ZSk7XG4gICAgICAgIHJldHVybiB0b1VzZXJFeHRlbnQoZXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3NpemUgQm94IHBpeGVsIHNpemUuIElmIG5vdCBwcm92aWRlZCwgdGhlIHNpemUgb2YgdGhlXG4gICAgICogZmlyc3QgbWFwIHRoYXQgdXNlcyB0aGlzIHZpZXcgd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUV4dGVudEludGVybmFsID0gZnVuY3Rpb24gKG9wdF9zaXplKSB7XG4gICAgICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRWaWV3cG9ydFNpemVfKCk7XG4gICAgICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSk7XG4gICAgICAgIGFzc2VydChjZW50ZXIsIDEpOyAvLyBUaGUgdmlldyBjZW50ZXIgaXMgbm90IGRlZmluZWRcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSAvKiogQHR5cGUgeyFudW1iZXJ9ICovICh0aGlzLmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgIGFzc2VydChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQsIDIpOyAvLyBUaGUgdmlldyByZXNvbHV0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIGFzc2VydChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkLCAzKTsgLy8gVGhlIHZpZXcgcm90YXRpb24gaXMgbm90IGRlZmluZWRcbiAgICAgICAgcmV0dXJuIGdldEZvclZpZXdBbmRTaXplKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWluUmVzb2x1dGlvbl8pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG5ldyBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oeyBtYXhab29tOiB6b29tIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGEgbmV3IG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0TWluWm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7IG1pblpvb206IHpvb20gfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhlIHZpZXcgc2hvdWQgYWxsb3cgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBXaGV0aGVyIHRoZSByZXNvbHV0aW9uIGlzIGNvbnN0cmFpbmVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRDb25zdHJhaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHsgY29uc3RyYWluUmVzb2x1dGlvbjogZW5hYmxlZCB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbnMgZm9yIHRoZSB2aWV3LiBUaGlzIHJldHVybnMgdGhlIGFycmF5IG9mIHJlc29sdXRpb25zXG4gICAgICogcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgVmlldywgb3IgdW5kZWZpbmVkIGlmIG5vbmUgd2VyZSBnaXZlbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb25zIG9mIHRoZSB2aWV3LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciBhIHByb3ZpZGVkIGV4dGVudCAoaW4gbWFwIHVuaXRzKSBhbmQgc2l6ZSAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3NpemUgQm94IHBpeGVsIHNpemUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgcHJvdmlkZWQgZXh0ZW50IHdpbGwgcmVuZGVyIGF0XG4gICAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCwgb3B0X3NpemUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKGZyb21Vc2VyRXh0ZW50KGV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpLCBvcHRfc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICAgKiAgICAgdGhlIGdpdmVuIHNpemUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsID0gZnVuY3Rpb24gKGV4dGVudCwgb3B0X3NpemUpIHtcbiAgICAgICAgdmFyIHNpemUgPSBvcHRfc2l6ZSB8fCB0aGlzLmdldFZpZXdwb3J0U2l6ZV8oKTtcbiAgICAgICAgdmFyIHhSZXNvbHV0aW9uID0gZ2V0V2lkdGgoZXh0ZW50KSAvIHNpemVbMF07XG4gICAgICAgIHZhciB5UmVzb2x1dGlvbiA9IGdldEhlaWdodChleHRlbnQpIC8gc2l6ZVsxXTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgZm9yIGFcbiAgICAgKiByZXNvbHV0aW9uLiBFeHBvbmVudGlhbCBzY2FsaW5nIGlzIGFzc3VtZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcG93ZXIgUG93ZXIuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyKTogbnVtYmVyfSBSZXNvbHV0aW9uIGZvciB2YWx1ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiA9IGZ1bmN0aW9uIChvcHRfcG93ZXIpIHtcbiAgICAgICAgdmFyIHBvd2VyID0gb3B0X3Bvd2VyIHx8IDI7XG4gICAgICAgIHZhciBtYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXyk7XG4gICAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgICAgICAgdmFyIG1heCA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHBvd2VyKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyhwb3dlciwgdmFsdWUgKiBtYXgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb247XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IHJvdGF0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Um90YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcmVzb2x1dGlvbiBmb3IgYSB2YWx1ZSBiZXR3ZWVuXG4gICAgICogMCBhbmQgMS4gRXhwb25lbnRpYWwgc2NhbGluZyBpcyBhc3N1bWVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3Bvd2VyIFBvd2VyLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gVmFsdWUgZm9yIHJlc29sdXRpb24gZnVuY3Rpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24gPSBmdW5jdGlvbiAob3B0X3Bvd2VyKSB7XG4gICAgICAgIHZhciBsb2dQb3dlciA9IE1hdGgubG9nKG9wdF9wb3dlciB8fCAyKTtcbiAgICAgICAgdmFyIG1heFJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgICAgICB2YXIgbWF4ID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gbG9nUG93ZXI7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyByZXNvbHV0aW9uKSAvIGxvZ1Bvd2VyIC8gbWF4O1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1N0YXRlfSBWaWV3IHN0YXRlLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2VudGVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSk7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNlbnRlcjogY2VudGVyLnNsaWNlKDApLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IG51bGwsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgICAgICAgem9vbTogdGhpcy5nZXRab29tKCksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgem9vbSBsZXZlbC4gVGhpcyBtZXRob2QgbWF5IHJldHVybiBub24taW50ZWdlciB6b29tIGxldmVsc1xuICAgICAqIGlmIHRoZSB2aWV3IGRvZXMgbm90IGNvbnN0cmFpbiB0aGUgcmVzb2x1dGlvbiwgb3IgaWYgYW4gaW50ZXJhY3Rpb24gb3JcbiAgICAgKiBhbmltYXRpb24gaXMgdW5kZXJ3YXkuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gWm9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHpvb207XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHpvb20gPSB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB6b29tO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB6b29tIGxldmVsIGZvciBhIHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHpvb20gbGV2ZWwgZm9yIHRoZSBwcm92aWRlZCByZXNvbHV0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRab29tRm9yUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLm1pblpvb21fIHx8IDA7XG4gICAgICAgIHZhciBtYXgsIHpvb21GYWN0b3I7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXykge1xuICAgICAgICAgICAgdmFyIG5lYXJlc3QgPSBsaW5lYXJGaW5kTmVhcmVzdCh0aGlzLnJlc29sdXRpb25zXywgcmVzb2x1dGlvbiwgMSk7XG4gICAgICAgICAgICBvZmZzZXQgPSBuZWFyZXN0O1xuICAgICAgICAgICAgbWF4ID0gdGhpcy5yZXNvbHV0aW9uc19bbmVhcmVzdF07XG4gICAgICAgICAgICBpZiAobmVhcmVzdCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gbWF4IC8gdGhpcy5yZXNvbHV0aW9uc19bbmVhcmVzdCArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF4ID0gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnpvb21GYWN0b3JfO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQgKyBNYXRoLmxvZyhtYXggLyByZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciBhIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB2aWV3IHJlc29sdXRpb24gZm9yIHRoZSBwcm92aWRlZCB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yWm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmFzZUxldmVsID0gY2xhbXAoTWF0aC5mbG9vcih6b29tKSwgMCwgdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICB2YXIgem9vbUZhY3RvciA9IHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbF0gLyB0aGlzLnJlc29sdXRpb25zX1tiYXNlTGV2ZWwgKyAxXTtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsXSAvXG4gICAgICAgICAgICAgICAgTWF0aC5wb3coem9vbUZhY3RvciwgY2xhbXAoem9vbSAtIGJhc2VMZXZlbCwgMCwgMSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5tYXhSZXNvbHV0aW9uXyAvIE1hdGgucG93KHRoaXMuem9vbUZhY3Rvcl8sIHpvb20gLSB0aGlzLm1pblpvb21fKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpdCB0aGUgZ2l2ZW4gZ2VvbWV0cnkgb3IgZXh0ZW50IGJhc2VkIG9uIHRoZSBnaXZlbiBtYXAgc2l6ZSBhbmQgYm9yZGVyLlxuICAgICAqIFRoZSBzaXplIGlzIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCB0byBmaXQgdGhlIGV4dGVudCBpbnRvLlxuICAgICAqIEluIG1vc3QgY2FzZXMgeW91IHdpbGwgd2FudCB0byB1c2UgdGhlIG1hcCBzaXplLCB0aGF0IGlzIGBtYXAuZ2V0U2l6ZSgpYC5cbiAgICAgKiBUYWtlcyBjYXJlIG9mIHRoZSBtYXAgYW5nbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGdlb21ldHJ5T3JFeHRlbnQgVGhlIGdlb21ldHJ5IG9yXG4gICAgICogICAgIGV4dGVudCB0byBmaXQgdGhlIHZpZXcgdG8uXG4gICAgICogQHBhcmFtIHtGaXRPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZml0ID0gZnVuY3Rpb24gKGdlb21ldHJ5T3JFeHRlbnQsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXNzaWduKHsgc2l6ZTogdGhpcy5nZXRWaWV3cG9ydFNpemVfKCkgfSwgb3B0X29wdGlvbnMgfHwge30pO1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqL1xuICAgICAgICB2YXIgZ2VvbWV0cnk7XG4gICAgICAgIGFzc2VydChBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpIHx8XG4gICAgICAgICAgICB0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKGdlb21ldHJ5T3JFeHRlbnQpLmdldFNpbXBsaWZpZWRHZW9tZXRyeSkgPT09XG4gICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJywgMjQpOyAvLyBJbnZhbGlkIGV4dGVudCBvciBnZW9tZXRyeSBwcm92aWRlZCBhcyBgZ2VvbWV0cnlgXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpKSB7XG4gICAgICAgICAgICBhc3NlcnQoIWlzRW1wdHkoZ2VvbWV0cnlPckV4dGVudCksIDI1KTsgLy8gQ2Fubm90IGZpdCBlbXB0eSBleHRlbnQgcHJvdmlkZWQgYXMgYGdlb21ldHJ5YFxuICAgICAgICAgICAgdmFyIGV4dGVudCA9IGZyb21Vc2VyRXh0ZW50KGdlb21ldHJ5T3JFeHRlbnQsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gcG9seWdvbkZyb21FeHRlbnQoZXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnZW9tZXRyeU9yRXh0ZW50LmdldFR5cGUoKSA9PT0gR2VvbWV0cnlUeXBlLkNJUkNMRSkge1xuICAgICAgICAgICAgdmFyIGV4dGVudCA9IGZyb21Vc2VyRXh0ZW50KGdlb21ldHJ5T3JFeHRlbnQuZ2V0RXh0ZW50KCksIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gcG9seWdvbkZyb21FeHRlbnQoZXh0ZW50KTtcbiAgICAgICAgICAgIGdlb21ldHJ5LnJvdGF0ZSh0aGlzLmdldFJvdGF0aW9uKCksIGdldENlbnRlcihleHRlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1c2VyUHJvamVjdGlvbiA9IGdldFVzZXJQcm9qZWN0aW9uKCk7XG4gICAgICAgICAgICBpZiAodXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeU9yRXh0ZW50XG4gICAgICAgICAgICAgICAgICAgIC5jbG9uZSgpXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2Zvcm0odXNlclByb2plY3Rpb24sIHRoaXMuZ2V0UHJvamVjdGlvbigpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5T3JFeHRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maXRJbnRlcm5hbChnZW9tZXRyeSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtGaXRPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5maXRJbnRlcm5hbCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIHNpemUgPSBvcHRpb25zLnNpemU7XG4gICAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBhZGRpbmcgOiBbMCwgMCwgMCwgMF07XG4gICAgICAgIHZhciBuZWFyZXN0ID0gb3B0aW9ucy5uZWFyZXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lYXJlc3QgOiBmYWxzZTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb247XG4gICAgICAgIGlmIChvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy5tYXhab29tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZHMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHJvdGF0ZWQgZXh0ZW50XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoLXJvdGF0aW9uKTtcbiAgICAgICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4oLXJvdGF0aW9uKTtcbiAgICAgICAgdmFyIG1pblJvdFggPSArSW5maW5pdHk7XG4gICAgICAgIHZhciBtaW5Sb3RZID0gK0luZmluaXR5O1xuICAgICAgICB2YXIgbWF4Um90WCA9IC1JbmZpbml0eTtcbiAgICAgICAgdmFyIG1heFJvdFkgPSAtSW5maW5pdHk7XG4gICAgICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmFyIHJvdFggPSBjb29yZHNbaV0gKiBjb3NBbmdsZSAtIGNvb3Jkc1tpICsgMV0gKiBzaW5BbmdsZTtcbiAgICAgICAgICAgIHZhciByb3RZID0gY29vcmRzW2ldICogc2luQW5nbGUgKyBjb29yZHNbaSArIDFdICogY29zQW5nbGU7XG4gICAgICAgICAgICBtaW5Sb3RYID0gTWF0aC5taW4obWluUm90WCwgcm90WCk7XG4gICAgICAgICAgICBtaW5Sb3RZID0gTWF0aC5taW4obWluUm90WSwgcm90WSk7XG4gICAgICAgICAgICBtYXhSb3RYID0gTWF0aC5tYXgobWF4Um90WCwgcm90WCk7XG4gICAgICAgICAgICBtYXhSb3RZID0gTWF0aC5tYXgobWF4Um90WSwgcm90WSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2FsY3VsYXRlIHJlc29sdXRpb25cbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChbbWluUm90WCwgbWluUm90WSwgbWF4Um90WCwgbWF4Um90WV0sIFtzaXplWzBdIC0gcGFkZGluZ1sxXSAtIHBhZGRpbmdbM10sIHNpemVbMV0gLSBwYWRkaW5nWzBdIC0gcGFkZGluZ1syXV0pO1xuICAgICAgICByZXNvbHV0aW9uID0gaXNOYU4ocmVzb2x1dGlvbilcbiAgICAgICAgICAgID8gbWluUmVzb2x1dGlvblxuICAgICAgICAgICAgOiBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG5lYXJlc3QgPyAwIDogMSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBjZW50ZXJcbiAgICAgICAgc2luQW5nbGUgPSAtc2luQW5nbGU7IC8vIGdvIGJhY2sgdG8gb3JpZ2luYWwgcm90YXRpb25cbiAgICAgICAgdmFyIGNlbnRlclJvdFggPSAobWluUm90WCArIG1heFJvdFgpIC8gMjtcbiAgICAgICAgdmFyIGNlbnRlclJvdFkgPSAobWluUm90WSArIG1heFJvdFkpIC8gMjtcbiAgICAgICAgY2VudGVyUm90WCArPSAoKHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAgICAgY2VudGVyUm90WSArPSAoKHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIGNlbnRlclggPSBjZW50ZXJSb3RYICogY29zQW5nbGUgLSBjZW50ZXJSb3RZICogc2luQW5nbGU7XG4gICAgICAgIHZhciBjZW50ZXJZID0gY2VudGVyUm90WSAqIGNvc0FuZ2xlICsgY2VudGVyUm90WCAqIHNpbkFuZ2xlO1xuICAgICAgICB2YXIgY2VudGVyID0gW2NlbnRlclgsIGNlbnRlclldO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrID8gb3B0aW9ucy5jYWxsYmFjayA6IFZPSUQ7XG4gICAgICAgIGlmIChvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogdGhpcy5nZXRDb25zdHJhaW5lZENlbnRlcihjZW50ZXIsIHJlc29sdXRpb24pLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcsXG4gICAgICAgICAgICB9LCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IGNlbnRlcjtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDZW50ZXIgb24gY29vcmRpbmF0ZSBhbmQgdmlldyBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2VudGVyT24gPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5jZW50ZXJPbkludGVybmFsKGZyb21Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmdldFByb2plY3Rpb24oKSksIHNpemUsIHBvc2l0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNlbnRlck9uSW50ZXJuYWwgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHJvdGF0ZWQgcG9zaXRpb25cbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgICAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcygtcm90YXRpb24pO1xuICAgICAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbigtcm90YXRpb24pO1xuICAgICAgICB2YXIgcm90WCA9IGNvb3JkaW5hdGVbMF0gKiBjb3NBbmdsZSAtIGNvb3JkaW5hdGVbMV0gKiBzaW5BbmdsZTtcbiAgICAgICAgdmFyIHJvdFkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIHJvdFggKz0gKHNpemVbMF0gLyAyIC0gcG9zaXRpb25bMF0pICogcmVzb2x1dGlvbjtcbiAgICAgICAgcm90WSArPSAocG9zaXRpb25bMV0gLSBzaXplWzFdIC8gMikgKiByZXNvbHV0aW9uO1xuICAgICAgICAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIGFuZ2xlXG4gICAgICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgICAgIHZhciBjZW50ZXJYID0gcm90WCAqIGNvc0FuZ2xlIC0gcm90WSAqIHNpbkFuZ2xlO1xuICAgICAgICB2YXIgY2VudGVyWSA9IHJvdFkgKiBjb3NBbmdsZSArIHJvdFggKiBzaW5BbmdsZTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChbY2VudGVyWCwgY2VudGVyWV0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZGVmaW5lZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5pc0RlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpICYmIHRoaXMuZ2V0UmVzb2x1dGlvbigpICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHJlbGF0aXZlIGNvb3JkaW5hdGVzIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhQ29vcmRpbmF0ZXMgUmVsYXRpdmUgdmFsdWUgdG8gYWRkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RDZW50ZXIgPSBmdW5jdGlvbiAoZGVsdGFDb29yZGluYXRlcykge1xuICAgICAgICB2YXIgY2VudGVyID0gdG9Vc2VyQ29vcmRpbmF0ZSh0aGlzLnRhcmdldENlbnRlcl8sIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXIoW1xuICAgICAgICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyByZWxhdGl2ZSBjb29yZGluYXRlcyB0byB0aGUgY2VudGVyIG9mIHRoZSB2aWV3LiBBbnkgZXh0ZW50IGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YUNvb3JkaW5hdGVzIFJlbGF0aXZlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RDZW50ZXJJbnRlcm5hbCA9IGZ1bmN0aW9uIChkZWx0YUNvb3JkaW5hdGVzKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLnRhcmdldENlbnRlcl87XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoW1xuICAgICAgICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJhdGlvLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHRoaXMuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsKHJhdGlvLCBhbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdFJlc29sdXRpb25JbnRlcm5hbCA9IGZ1bmN0aW9uIChyYXRpbywgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gKiByYXRpbywgMCwgc2l6ZSwgaXNNb3ZpbmcpO1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJab29tKG5ld1Jlc29sdXRpb24sIG9wdF9hbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gKj0gcmF0aW87XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSB2YWx1ZSB0byB0aGUgdmlldyB6b29tIGxldmVsLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Wm9vbSA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICB0aGlzLmFkanVzdFJlc29sdXRpb24oTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgLWRlbHRhKSwgb3B0X2FuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgdmFsdWUgdG8gdGhlIHZpZXcgcm90YXRpb24sIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcm90YXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSByb3RhdGlvbiwgaW4gcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSb3RhdGlvbiA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgb3B0X2FuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGp1c3RSb3RhdGlvbkludGVybmFsKGRlbHRhLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gcm90YXRpb24sIGluIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSb3RhdGlvbkludGVybmFsID0gZnVuY3Rpb24gKGRlbHRhLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBpc01vdmluZyA9IHRoaXMuZ2V0QW5pbWF0aW5nKCkgfHwgdGhpcy5nZXRJbnRlcmFjdGluZygpO1xuICAgICAgICB2YXIgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXyArIGRlbHRhLCBpc01vdmluZyk7XG4gICAgICAgIGlmIChvcHRfYW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZShuZXdSb3RhdGlvbiwgb3B0X2FuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gKz0gZGVsdGE7XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2VudGVyIG9mIHRoZSBjdXJyZW50IHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRDZW50ZXIgPSBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoZnJvbVVzZXJDb29yZGluYXRlKGNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2VudGVyIHVzaW5nIHRoZSB2aWV3IHByb2plY3Rpb24gKG5vdCB0aGUgdXNlciBwcm9qZWN0aW9uKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gY2VudGVyIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Q2VudGVySW50ZXJuYWwgPSBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1ZpZXdIaW50LmpzXCIpLmRlZmF1bHR9IGhpbnQgSGludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgdmFsdWUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0SGludCA9IGZ1bmN0aW9uIChoaW50LCBkZWx0YSkge1xuICAgICAgICB0aGlzLmhpbnRzX1toaW50XSArPSBkZWx0YTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmhpbnRzX1toaW50XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmVzb2x1dGlvbiBmb3IgdGhpcyB2aWV3LiBBbnkgcmVzb2x1dGlvbiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFRoZSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFJlc29sdXRpb24gPSBmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByb3RhdGlvbiBmb3IgdGhpcyB2aWV3LiBBbnkgcm90YXRpb24gY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgaW4gcmFkaWFucy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uIChyb3RhdGlvbikge1xuICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBab29tIHRvIGEgc3BlY2lmaWMgem9vbSBsZXZlbC4gQW55IHJlc29sdXRpb24gY29uc3RyYWluIHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Wm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKHpvb20pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlY29tcHV0ZSByb3RhdGlvbi9yZXNvbHV0aW9uL2NlbnRlciBiYXNlZCBvbiB0YXJnZXQgdmFsdWVzLlxuICAgICAqIE5vdGU6IHdlIGhhdmUgdG8gY29tcHV0ZSByb3RhdGlvbiBmaXJzdCwgdGhlbiByZXNvbHV0aW9uIGFuZCBjZW50ZXIgY29uc2lkZXJpbmcgdGhhdFxuICAgICAqIHBhcmFtZXRlcnMgY2FuIGluZmx1ZW5jZSBvbmUgYW5vdGhlciBpbiBjYXNlIGEgdmlldyBleHRlbnQgY29uc3RyYWludCBpcyBwcmVzZW50LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9kb05vdENhbmNlbEFuaW1zIERvIG5vdCBjYW5jZWwgYW5pbWF0aW9ucy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZm9yY2VNb3ZpbmcgQXBwbHkgY29uc3RyYWludHMgYXMgaWYgdGhlIHZpZXcgaXMgbW92aW5nLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlUYXJnZXRTdGF0ZV8gPSBmdW5jdGlvbiAob3B0X2RvTm90Q2FuY2VsQW5pbXMsIG9wdF9mb3JjZU1vdmluZykge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKSB8fCBvcHRfZm9yY2VNb3Zpbmc7XG4gICAgICAgIC8vIGNvbXB1dGUgcm90YXRpb25cbiAgICAgICAgdmFyIG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24odGhpcy50YXJnZXRSb3RhdGlvbl8sIGlzTW92aW5nKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8obmV3Um90YXRpb24pO1xuICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGhpcy50YXJnZXRSZXNvbHV0aW9uXywgMCwgc2l6ZSwgaXNNb3ZpbmcpO1xuICAgICAgICB2YXIgbmV3Q2VudGVyID0gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgc2l6ZSwgaXNNb3ZpbmcpO1xuICAgICAgICBpZiAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OKSAhPT0gbmV3Um90YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTiwgbmV3Um90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTikgIT09IG5ld1Jlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OLCBuZXdSZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpIHx8XG4gICAgICAgICAgICAhZXF1YWxzKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpLCBuZXdDZW50ZXIpKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLCBuZXdDZW50ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpICYmICFvcHRfZG9Ob3RDYW5jZWxBbmltcykge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSWYgYW55IGNvbnN0cmFpbnRzIG5lZWQgdG8gYmUgYXBwbGllZCwgYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgICAqIFRoaXMgaXMgdHlwaWNhbGx5IGRvbmUgb24gaW50ZXJhY3Rpb24gZW5kLlxuICAgICAqIE5vdGU6IGNhbGxpbmcgdGhpcyB3aXRoIGEgZHVyYXRpb24gb2YgMCB3aWxsIGFwcGx5IHRoZSBjb25zdHJhaW5lZCB2YWx1ZXMgc3RyYWlnaHQgYXdheSxcbiAgICAgKiB3aXRob3V0IGFuaW1hdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBUaGUgYW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUucmVzb2x2ZUNvbnN0cmFpbnRzID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gb3B0X2R1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZHVyYXRpb24gOiAyMDA7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiB8fCAwO1xuICAgICAgICB2YXIgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXyk7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG5ld1JvdGF0aW9uKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8sIGRpcmVjdGlvbiwgc2l6ZSk7XG4gICAgICAgIHZhciBuZXdDZW50ZXIgPSB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBzaXplKTtcbiAgICAgICAgaWYgKGR1cmF0aW9uID09PSAwICYmICF0aGlzLmNhbmNlbEFuY2hvcl8pIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSBuZXdSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSBuZXdSb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IG5ld0NlbnRlcjtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5jaG9yID0gb3B0X2FuY2hvciB8fCAoZHVyYXRpb24gPT09IDAgPyB0aGlzLmNhbmNlbEFuY2hvcl8gOiB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gbmV3UmVzb2x1dGlvbiB8fFxuICAgICAgICAgICAgdGhpcy5nZXRSb3RhdGlvbigpICE9PSBuZXdSb3RhdGlvbiB8fFxuICAgICAgICAgICAgIXRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSB8fFxuICAgICAgICAgICAgIWVxdWFscyh0aGlzLmdldENlbnRlckludGVybmFsKCksIG5ld0NlbnRlcikpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgcm90YXRpb246IG5ld1JvdGF0aW9uLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogbmV3Q2VudGVyLFxuICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG5ld1Jlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICBhbmNob3I6IGFuY2hvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWRcbiAgICAgKiAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmJlZ2luSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIGVuZGVkLiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkXG4gICAgICogdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZCAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZHVyYXRpb24gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmVuZEludGVyYWN0aW9uID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3IgJiYgZnJvbVVzZXJDb29yZGluYXRlKG9wdF9hbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgdGhpcy5lbmRJbnRlcmFjdGlvbkludGVybmFsKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIGFuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgZW5kZWQuIFRoZSB2aWV3IHN0YXRlIHdpbGwgYmUgcmVzb2x2ZWRcbiAgICAgKiB0byBhIHN0YWJsZSBvbmUgaWYgbmVlZGVkIChkZXBlbmRpbmcgb24gaXRzIGNvbnN0cmFpbnRzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBBbmltYXRpb24gZHVyYXRpb24gaW4gbXMuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5lbmRJbnRlcmFjdGlvbkludGVybmFsID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdmFsaWQgcG9zaXRpb24gZm9yIHRoZSB2aWV3IGNlbnRlciBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgY29uc3RyYWludHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3RhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uIElmIG5vdCBzdXBwbGllZCwgdGhlIGN1cnJlbnQgb25lIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBndWVzcyBhIHZhbGlkIGNlbnRlciBwb3NpdGlvbiBhdCBhIGRpZmZlcmVudCB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gVmFsaWQgY2VudGVyIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpbmVkQ2VudGVyID0gZnVuY3Rpb24gKHRhcmdldENlbnRlciwgb3B0X3RhcmdldFJlc29sdXRpb24pIHtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfLmNlbnRlcih0YXJnZXRDZW50ZXIsIG9wdF90YXJnZXRSZXNvbHV0aW9uIHx8IHRoaXMuZ2V0UmVzb2x1dGlvbigpLCBzaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHZhbGlkIHpvb20gbGV2ZWwgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHZpZXcgY29uc3RyYWludHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSB0YXJnZXRab29tIFRhcmdldCB6b29tLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gW29wdF9kaXJlY3Rpb249MF0gSW5kaWNhdGUgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICAgICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXcgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVmFsaWQgem9vbSBsZXZlbC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5lZFpvb20gPSBmdW5jdGlvbiAodGFyZ2V0Wm9vbSwgb3B0X2RpcmVjdGlvbikge1xuICAgICAgICB2YXIgdGFyZ2V0UmVzID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh0YXJnZXRab29tKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGFyZ2V0UmVzLCBvcHRfZGlyZWN0aW9uKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB2YWxpZCByZXNvbHV0aW9uIGFjY29yZGluZyB0byB0aGUgY3VycmVudCB2aWV3IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IFtvcHRfZGlyZWN0aW9uPTBdIEluZGljYXRlIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3IHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFZhbGlkIHJlc29sdXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHRhcmdldFJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IG9wdF9kaXJlY3Rpb24gfHwgMDtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGFyZ2V0UmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplKTtcbiAgICB9O1xuICAgIHJldHVybiBWaWV3O1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHBhcmFtIHsqfSByZXR1cm5WYWx1ZSBSZXR1cm4gdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCByZXR1cm5WYWx1ZSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayhyZXR1cm5WYWx1ZSk7XG4gICAgfSwgMCk7XG59XG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jZW50ZXJjb25zdHJhaW50LmpzXCIpLlR5cGV9IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2VudGVyQ29uc3RyYWludChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHNtb290aCA9IG9wdGlvbnMuc21vb3RoRXh0ZW50Q29uc3RyYWludCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuc21vb3RoRXh0ZW50Q29uc3RyYWludFxuICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICByZXR1cm4gY3JlYXRlRXh0ZW50KG9wdGlvbnMuZXh0ZW50LCBvcHRpb25zLmNvbnN0cmFpbk9ubHlDZW50ZXIsIHNtb290aCk7XG4gICAgfVxuICAgIHZhciBwcm9qZWN0aW9uID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICBpZiAob3B0aW9ucy5tdWx0aVdvcmxkICE9PSB0cnVlICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKS5zbGljZSgpO1xuICAgICAgICBleHRlbnRbMF0gPSAtSW5maW5pdHk7XG4gICAgICAgIGV4dGVudFsyXSA9IEluZmluaXR5O1xuICAgICAgICByZXR1cm4gY3JlYXRlRXh0ZW50KGV4dGVudCwgZmFsc2UsIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlck5vbmU7XG59XG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7e2NvbnN0cmFpbnQ6IGltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZSwgbWF4UmVzb2x1dGlvbjogbnVtYmVyLFxuICogICAgIG1pblJlc29sdXRpb246IG51bWJlciwgbWluWm9vbTogbnVtYmVyLCB6b29tRmFjdG9yOiBudW1iZXJ9fSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50KG9wdGlvbnMpIHtcbiAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQ7XG4gICAgdmFyIG1heFJlc29sdXRpb247XG4gICAgdmFyIG1pblJlc29sdXRpb247XG4gICAgLy8gVE9ETzogbW92ZSB0aGVzZSB0byBiZSBvbCBjb25zdGFudHNcbiAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycy9pc3N1ZXMvMjA3NlxuICAgIHZhciBkZWZhdWx0TWF4Wm9vbSA9IDI4O1xuICAgIHZhciBkZWZhdWx0Wm9vbUZhY3RvciA9IDI7XG4gICAgdmFyIG1pblpvb20gPSBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IERFRkFVTFRfTUlOX1pPT007XG4gICAgdmFyIG1heFpvb20gPSBvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4Wm9vbSA6IGRlZmF1bHRNYXhab29tO1xuICAgIHZhciB6b29tRmFjdG9yID0gb3B0aW9ucy56b29tRmFjdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21GYWN0b3IgOiBkZWZhdWx0Wm9vbUZhY3RvcjtcbiAgICB2YXIgbXVsdGlXb3JsZCA9IG9wdGlvbnMubXVsdGlXb3JsZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tdWx0aVdvcmxkIDogZmFsc2U7XG4gICAgdmFyIHNtb290aCA9IG9wdGlvbnMuc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnRcbiAgICAgICAgOiB0cnVlO1xuICAgIHZhciBzaG93RnVsbEV4dGVudCA9IG9wdGlvbnMuc2hvd0Z1bGxFeHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc2hvd0Z1bGxFeHRlbnQgOiBmYWxzZTtcbiAgICB2YXIgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgdmFyIHByb2pFeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIHZhciBjb25zdHJhaW5Pbmx5Q2VudGVyID0gb3B0aW9ucy5jb25zdHJhaW5Pbmx5Q2VudGVyO1xuICAgIHZhciBleHRlbnQgPSBvcHRpb25zLmV4dGVudDtcbiAgICBpZiAoIW11bHRpV29ybGQgJiYgIWV4dGVudCAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgICAgY29uc3RyYWluT25seUNlbnRlciA9IGZhbHNlO1xuICAgICAgICBleHRlbnQgPSBwcm9qRXh0ZW50O1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciByZXNvbHV0aW9ucyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIG1heFJlc29sdXRpb24gPSByZXNvbHV0aW9uc1ttaW5ab29tXTtcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9XG4gICAgICAgICAgICByZXNvbHV0aW9uc1ttYXhab29tXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyByZXNvbHV0aW9uc1ttYXhab29tXVxuICAgICAgICAgICAgICAgIDogcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMocmVzb2x1dGlvbnMsIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZU1pbk1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkZWZhdWx0IG1pbiBhbmQgbWF4IHJlc29sdXRpb25cbiAgICAgICAgdmFyIHNpemUgPSAhcHJvakV4dGVudFxuICAgICAgICAgICAgPyAvLyB1c2UgYW4gZXh0ZW50IHRoYXQgY2FuIGZpdCB0aGUgd2hvbGUgd29ybGQgaWYgbmVlZCBiZVxuICAgICAgICAgICAgICAgICgzNjAgKiBNRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10pIC8gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KClcbiAgICAgICAgICAgIDogTWF0aC5tYXgoZ2V0V2lkdGgocHJvakV4dGVudCksIGdldEhlaWdodChwcm9qRXh0ZW50KSk7XG4gICAgICAgIHZhciBkZWZhdWx0TWF4UmVzb2x1dGlvbiA9IHNpemUgLyBERUZBVUxUX1RJTEVfU0laRSAvIE1hdGgucG93KGRlZmF1bHRab29tRmFjdG9yLCBERUZBVUxUX01JTl9aT09NKTtcbiAgICAgICAgdmFyIGRlZmF1bHRNaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gL1xuICAgICAgICAgICAgTWF0aC5wb3coZGVmYXVsdFpvb21GYWN0b3IsIGRlZmF1bHRNYXhab29tIC0gREVGQVVMVF9NSU5fWk9PTSk7XG4gICAgICAgIC8vIHVzZXIgcHJvdmlkZWQgbWF4UmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgIG1heFJlc29sdXRpb24gPSBvcHRpb25zLm1heFJlc29sdXRpb247XG4gICAgICAgIGlmIChtYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1pblpvb20gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF4UmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWluWm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXNlciBwcm92aWRlZCBtaW5SZXNvbHV0aW9uIHRha2VzIHByZWNlZGVuY2VcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICAgICAgaWYgKG1pblJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1pblJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2l2ZW4gZGlzY3JldGUgem9vbSBsZXZlbHMsIG1pblJlc29sdXRpb24gbWF5IGJlIGRpZmZlcmVudCB0aGFuIHByb3ZpZGVkXG4gICAgICAgIG1heFpvb20gPVxuICAgICAgICAgICAgbWluWm9vbSArXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyh6b29tRmFjdG9yKSk7XG4gICAgICAgIG1pblJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSAtIG1pblpvb20pO1xuICAgICAgICBpZiAob3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVNuYXBUb1Bvd2VyKHpvb21GYWN0b3IsIG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZU1pbk1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjb25zdHJhaW50OiByZXNvbHV0aW9uQ29uc3RyYWludCxcbiAgICAgICAgbWF4UmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICAgICAgbWluUmVzb2x1dGlvbjogbWluUmVzb2x1dGlvbixcbiAgICAgICAgbWluWm9vbTogbWluWm9vbSxcbiAgICAgICAgem9vbUZhY3Rvcjogem9vbUZhY3RvcixcbiAgICB9O1xufVxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vcm90YXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSb3RhdGlvbkNvbnN0cmFpbnQob3B0aW9ucykge1xuICAgIHZhciBlbmFibGVSb3RhdGlvbiA9IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gOiB0cnVlO1xuICAgIGlmIChlbmFibGVSb3RhdGlvbikge1xuICAgICAgICB2YXIgY29uc3RyYWluUm90YXRpb24gPSBvcHRpb25zLmNvbnN0cmFpblJvdGF0aW9uO1xuICAgICAgICBpZiAoY29uc3RyYWluUm90YXRpb24gPT09IHVuZGVmaW5lZCB8fCBjb25zdHJhaW5Sb3RhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVNuYXBUb1plcm8oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNvbnN0cmFpblJvdGF0aW9uID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVNuYXBUb04oY29uc3RyYWluUm90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uTm9uZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRpc2FibGU7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICogQHBhcmFtIHtBbmltYXRpb259IGFuaW1hdGlvbiBUaGUgYW5pbWF0aW9uLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pIHtcbiAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlciAmJiBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSB7XG4gICAgICAgIGlmICghY29vcmRpbmF0ZXNFcXVhbChhbmltYXRpb24uc291cmNlQ2VudGVyLCBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAhPT0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSBhbmltYXRpb24udGFyZ2V0Um90YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZXc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL01hcFxuICovXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCB7IFRSVUUgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgbWFrZUludmVyc2UgfSBmcm9tICcuLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgZ2V0V2lkdGggfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgc2hhcmVkIGFzIGljb25JbWFnZUNhY2hlIH0gZnJvbSAnLi4vc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMnO1xuaW1wb3J0IHsgaW5WaWV3IH0gZnJvbSAnLi4vbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IHsgcmVuZGVyRGVjbHV0dGVySXRlbXMgfSBmcm9tICcuLi9yZW5kZXIuanMnO1xuaW1wb3J0IHsgd3JhcFggfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBNYXBSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBSZW5kZXJlcihtYXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVjbHV0dGVyVHJlZV8gPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudCA9IGZ1bmN0aW9uICh0eXBlLCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5jYWxjdWxhdGVNYXRyaWNlczJEID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB2YXIgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gPSBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtO1xuICAgICAgICB2YXIgcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0gPSBmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtO1xuICAgICAgICBjb21wb3NlVHJhbnNmb3JtKGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLnNpemVbMF0gLyAyLCBmcmFtZVN0YXRlLnNpemVbMV0gLyAyLCAxIC8gdmlld1N0YXRlLnJlc29sdXRpb24sIC0xIC8gdmlld1N0YXRlLnJlc29sdXRpb24sIC12aWV3U3RhdGUucm90YXRpb24sIC12aWV3U3RhdGUuY2VudGVyWzBdLCAtdmlld1N0YXRlLmNlbnRlclsxXSk7XG4gICAgICAgIG1ha2VJbnZlcnNlKHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2hlY2tXcmFwcGVkIENoZWNrIGZvciB3cmFwcGVkIGdlb21ldHJpZXMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLFxuICAgICAqICAgICBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcGFyYW0ge1V9IHRoaXNBcmcyIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBTLFQsVVxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgY2FsbGJhY2ssIHRoaXNBcmcsIGxheWVyRmlsdGVyLCB0aGlzQXJnMikge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG1hbmFnZWQgTWFuYWdlZCBsYXllci5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICAgICAqIEByZXR1cm4gez99IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKG1hbmFnZWQsIGZlYXR1cmUsIGxheWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBmZWF0dXJlLCBtYW5hZ2VkID8gbGF5ZXIgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICB2YXIgdHJhbnNsYXRlZENvb3JkaW5hdGUgPSB3cmFwWChjb29yZGluYXRlLnNsaWNlKCksIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgb2Zmc2V0cyA9IFtbMCwgMF1dO1xuICAgICAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpICYmIGNoZWNrV3JhcHBlZCkge1xuICAgICAgICAgICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgICAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgICAgIG9mZnNldHMucHVzaChbLXdvcmxkV2lkdGgsIDBdLCBbd29ybGRXaWR0aCwgMF0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXllclN0YXRlcyA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgdmFyIG51bUxheWVycyA9IGxheWVyU3RhdGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGRlY2x1dHRlcmVkRmVhdHVyZXM7XG4gICAgICAgIGlmICh0aGlzLmRlY2x1dHRlclRyZWVfKSB7XG4gICAgICAgICAgICBkZWNsdXR0ZXJlZEZlYXR1cmVzID0gdGhpcy5kZWNsdXR0ZXJUcmVlXy5hbGwoKS5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRtcENvb3JkID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2Zmc2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IG51bUxheWVycyAtIDE7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc1tqXTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9ICovIChsYXllclN0YXRlLmxheWVyKTtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSAmJlxuICAgICAgICAgICAgICAgICAgICBpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSAmJlxuICAgICAgICAgICAgICAgICAgICBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSBsYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXllclJlbmRlcmVyICYmIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gc291cmNlLmdldFdyYXBYKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRyYW5zbGF0ZWRDb29yZGluYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb29yZGluYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrXzEgPSBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZS5iaW5kKG51bGwsIGxheWVyU3RhdGUubWFuYWdlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBDb29yZFswXSA9IGNvb3JkaW5hdGVzWzBdICsgb2Zmc2V0c1tpXVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcENvb3JkWzFdID0gY29vcmRpbmF0ZXNbMV0gKyBvZmZzZXRzW2ldWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGF5ZXJSZW5kZXJlci5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSh0bXBDb29yZCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFja18xLCBkZWNsdXR0ZXJlZEZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQsIChVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5KSk6IFR9IGNhbGxiYWNrIExheWVyXG4gICAgICogICAgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGxheWVyRmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrV3JhcHBlZCBDaGVjayBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcGFyYW0ge1V9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHRoZXJlIGEgZmVhdHVyZSBhdCB0aGUgZ2l2ZW4gY29vcmRpbmF0ZT9cbiAgICAgKiBAdGVtcGxhdGUgVVxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5oYXNGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBsYXllckZpbHRlciwgdGhpc0FyZykge1xuICAgICAgICB2YXIgaGFzRmVhdHVyZSA9IHRoaXMuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIFRSVUUsIHRoaXMsIGxheWVyRmlsdGVyLCB0aGlzQXJnKTtcbiAgICAgICAgcmV0dXJuIGhhc0ZlYXR1cmUgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlci5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICB0aGlzLmRlY2x1dHRlclRyZWVfID0gcmVuZGVyRGVjbHV0dGVySXRlbXMoZnJhbWVTdGF0ZSwgdGhpcy5kZWNsdXR0ZXJUcmVlXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuc2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBpZiAoaWNvbkltYWdlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goZXhwaXJlSWNvbkNhY2hlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1hcFJlbmRlcmVyO1xufShEaXNwb3NhYmxlKSk7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICovXG5mdW5jdGlvbiBleHBpcmVJY29uQ2FjaGUobWFwLCBmcmFtZVN0YXRlKSB7XG4gICAgaWNvbkltYWdlQ2FjaGUuZXhwaXJlKCk7XG59XG5leHBvcnQgZGVmYXVsdCBNYXBSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyXG4gKi9cbmltcG9ydCBDYW52YXNJbW1lZGlhdGVSZW5kZXJlciBmcm9tICcuL3JlbmRlci9jYW52YXMvSW1tZWRpYXRlLmpzJztcbmltcG9ydCB7IERFVklDRV9QSVhFTF9SQVRJTyB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBtdWx0aXBseSBhcyBtdWx0aXBseVRyYW5zZm9ybSwgc2NhbGUgYXMgc2NhbGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgZ2V0U3F1YXJlZFRvbGVyYW5jZSB9IGZyb20gJy4vcmVuZGVyZXIvdmVjdG9yLmpzJztcbmltcG9ydCB7IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucywgZ2V0VXNlclByb2plY3Rpb24gfSBmcm9tICcuL3Byb2ouanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ2FudmFzIGNvbnRleHQgdGhhdCB0aGUgbGF5ZXIgaXMgYmVpbmcgcmVuZGVyZWQgdG8uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvIHVzZWQgYnkgdGhlIGxheWVyIHJlbmRlcmVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiB0aGF0IHRoZSByZW5kZXIgYmF0Y2ggd2FzIGNyZWF0ZWQgYW5kIG9wdGltaXplZCBmb3IuXG4gKiBUaGlzIGlzIG5vdCB0aGUgdmlldydzIHJlc29sdXRpb24gdGhhdCBpcyBiZWluZyByZW5kZXJlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbiBvZiB0aGUgcmVuZGVyZWQgbGF5ZXIgaW4gcmFkaWFucy5cbiAqL1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRvIGJlIHVzZWQgd2hlbiBzb3J0aW5nIGZlYXR1cmVzIGJlZm9yZSByZW5kZXJpbmcuXG4gKiBJdCB0YWtlcyB0d28gaW5zdGFuY2VzIG9mIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX0gb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL0ZlYXR1cmV9IGFuZCByZXR1cm5zIGEgYHtudW1iZXJ9YC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UpOm51bWJlcn0gT3JkZXJGdW5jdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRvQ29udGV4dE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtzaXplXSBEZXNpcmVkIHNpemUgb2YgdGhlIGNhbnZhcyBpbiBjc3NcbiAqIHBpeGVscy4gV2hlbiBwcm92aWRlZCwgYm90aCBjYW52YXMgYW5kIGNzcyBzaXplIHdpbGwgYmUgc2V0IGFjY29yZGluZyB0byB0aGVcbiAqIGBwaXhlbFJhdGlvYC4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCBjYW52YXMgYW5kIGNzcyBzaXplcyB3aWxsIG5vdCBiZVxuICogYWx0ZXJlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxSYXRpbz13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb10gUGl4ZWwgcmF0aW8gKGNhbnZhc1xuICogcGl4ZWwgdG8gY3NzIHBpeGVsIHJhdGlvKSBmb3IgdGhlIGNhbnZhcy5cbiAqL1xuLyoqXG4gKiBCaW5kcyBhIENhbnZhcyBJbW1lZGlhdGUgQVBJIHRvIGEgY2FudmFzIGNvbnRleHQsIHRvIGFsbG93IGRyYXdpbmcgZ2VvbWV0cmllc1xuICogdG8gdGhlIGNvbnRleHQncyBjYW52YXMuXG4gKlxuICogVGhlIHVuaXRzIGZvciBnZW9tZXRyeSBjb29yZGluYXRlcyBhcmUgY3NzIHBpeGVscyByZWxhdGl2ZSB0byB0aGUgdG9wIGxlZnRcbiAqIGNvcm5lciBvZiB0aGUgY2FudmFzIGVsZW1lbnQuXG4gKiBgYGBqc1xuICogaW1wb3J0IHt0b0NvbnRleHR9IGZyb20gJ29sL3JlbmRlcic7XG4gKiBpbXBvcnQgRmlsbCBmcm9tICdvbC9zdHlsZS9GaWxsJztcbiAqIGltcG9ydCBQb2x5Z29uIGZyb20gJ29sL2dlb20vUG9seWdvbic7XG4gKlxuICogdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICogdmFyIHJlbmRlciA9IHRvQ29udGV4dChjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSxcbiAqICAgICB7IHNpemU6IFsxMDAsIDEwMF0gfSk7XG4gKiByZW5kZXIuc2V0RmlsbFN0cm9rZVN0eWxlKG5ldyBGaWxsKHsgY29sb3I6IGJsdWUgfSkpO1xuICogcmVuZGVyLmRyYXdQb2x5Z29uKFxuICogICAgIG5ldyBQb2x5Z29uKFtbWzAsIDBdLCBbMTAwLCAxMDBdLCBbMTAwLCAwXSwgWzAsIDBdXV0pKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENhbnZhcyBjb250ZXh0LlxuICogQHBhcmFtIHtUb0NvbnRleHRPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAqIEByZXR1cm4ge0NhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyfSBDYW52YXMgSW1tZWRpYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Db250ZXh0KGNvbnRleHQsIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgIHZhciBwaXhlbFJhdGlvID0gb3B0aW9ucy5waXhlbFJhdGlvIHx8IERFVklDRV9QSVhFTF9SQVRJTztcbiAgICB2YXIgc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcbiAgICBpZiAoc2l6ZSkge1xuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplWzBdICogcGl4ZWxSYXRpbztcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemVbMV0gKiBwaXhlbFJhdGlvO1xuICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBzaXplWzBdICsgJ3B4JztcbiAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IHNpemVbMV0gKyAncHgnO1xuICAgIH1cbiAgICB2YXIgZXh0ZW50ID0gWzAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF07XG4gICAgdmFyIHRyYW5zZm9ybSA9IHNjYWxlVHJhbnNmb3JtKGNyZWF0ZVRyYW5zZm9ybSgpLCBwaXhlbFJhdGlvLCBwaXhlbFJhdGlvKTtcbiAgICByZXR1cm4gbmV3IENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyKGNvbnRleHQsIHBpeGVsUmF0aW8sIGV4dGVudCwgdHJhbnNmb3JtLCAwKTtcbn1cbi8qKlxuICogR2V0cyBhIHZlY3RvciBjb250ZXh0IGZvciBkcmF3aW5nIHRvIHRoZSBldmVudCdzIGNhbnZhcy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9yZW5kZXIvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgUmVuZGVyIGV2ZW50LlxuICogQHJldHVybnMge0NhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyfSBWZWN0b3IgY29udGV4dC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZlY3RvckNvbnRleHQoZXZlbnQpIHtcbiAgICB2YXIgZnJhbWVTdGF0ZSA9IGV2ZW50LmZyYW1lU3RhdGU7XG4gICAgdmFyIHRyYW5zZm9ybSA9IG11bHRpcGx5VHJhbnNmb3JtKGV2ZW50LmludmVyc2VQaXhlbFRyYW5zZm9ybS5zbGljZSgpLCBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtKTtcbiAgICB2YXIgc3F1YXJlZFRvbGVyYW5jZSA9IGdldFNxdWFyZWRUb2xlcmFuY2UoZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbiwgZnJhbWVTdGF0ZS5waXhlbFJhdGlvKTtcbiAgICB2YXIgdXNlclRyYW5zZm9ybTtcbiAgICB2YXIgdXNlclByb2plY3Rpb24gPSBnZXRVc2VyUHJvamVjdGlvbigpO1xuICAgIGlmICh1c2VyUHJvamVjdGlvbikge1xuICAgICAgICB1c2VyVHJhbnNmb3JtID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHVzZXJQcm9qZWN0aW9uLCBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDYW52YXNJbW1lZGlhdGVSZW5kZXJlcihldmVudC5jb250ZXh0LCBmcmFtZVN0YXRlLnBpeGVsUmF0aW8sIGZyYW1lU3RhdGUuZXh0ZW50LCB0cmFuc2Zvcm0sIGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uLCBzcXVhcmVkVG9sZXJhbmNlLCB1c2VyVHJhbnNmb3JtKTtcbn1cbi8qKlxuICogR2V0cyB0aGUgcGl4ZWwgb2YgdGhlIGV2ZW50J3MgY2FudmFzIGNvbnRleHQgZnJvbSB0aGUgbWFwIHZpZXdwb3J0J3MgQ1NTIHBpeGVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBSZW5kZXIgZXZlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIENTUyBwaXhlbCByZWxhdGl2ZSB0byB0aGUgdG9wLWxlZnRcbiAqIGNvcm5lciBvZiB0aGUgbWFwIHZpZXdwb3J0LlxuICogQHJldHVybnMge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IFBpeGVsIG9uIHRoZSBldmVudCdzIGNhbnZhcyBjb250ZXh0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVuZGVyUGl4ZWwoZXZlbnQsIHBpeGVsKSB7XG4gICAgdmFyIHJlc3VsdCA9IHBpeGVsLnNsaWNlKDApO1xuICAgIGFwcGx5VHJhbnNmb3JtKGV2ZW50LmludmVyc2VQaXhlbFRyYW5zZm9ybS5zbGljZSgpLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAqIEBwYXJhbSB7P30gZGVjbHV0dGVyVHJlZSBEZWNsdXR0ZXIgdHJlZS5cbiAqIEByZXR1cm5zIHs/fSBEZWNsdXR0ZXIgdHJlZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckRlY2x1dHRlckl0ZW1zKGZyYW1lU3RhdGUsIGRlY2x1dHRlclRyZWUpIHtcbiAgICBpZiAoZGVjbHV0dGVyVHJlZSkge1xuICAgICAgICBkZWNsdXR0ZXJUcmVlLmNsZWFyKCk7XG4gICAgfVxuICAgIHZhciBpdGVtcyA9IGZyYW1lU3RhdGUuZGVjbHV0dGVySXRlbXM7XG4gICAgZm9yICh2YXIgeiA9IGl0ZW1zLmxlbmd0aCAtIDE7IHogPj0gMDsgLS16KSB7XG4gICAgICAgIHZhciBpdGVtID0gaXRlbXNbel07XG4gICAgICAgIHZhciB6SW5kZXhJdGVtcyA9IGl0ZW0uaXRlbXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHpJbmRleEl0ZW1zLmxlbmd0aDsgaSA8IGlpOyBpICs9IDMpIHtcbiAgICAgICAgICAgIGRlY2x1dHRlclRyZWUgPSB6SW5kZXhJdGVtc1tpXS5yZW5kZXJEZWNsdXR0ZXIoekluZGV4SXRlbXNbaSArIDFdLCB6SW5kZXhJdGVtc1tpICsgMl0sIGl0ZW0ub3BhY2l0eSwgZGVjbHV0dGVyVHJlZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXRlbXMubGVuZ3RoID0gMDtcbiAgICByZXR1cm4gZGVjbHV0dGVyVHJlZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbmRlci5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9Db21wb3NpdGVcbiAqL1xuaW1wb3J0IE1hcFJlbmRlcmVyIGZyb20gJy4vTWFwLmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudCBmcm9tICcuLi9yZW5kZXIvRXZlbnQuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGNoZWNrZWRGb250cyB9IGZyb20gJy4uL3JlbmRlci9jYW52YXMuanMnO1xuaW1wb3J0IHsgaW5WaWV3IH0gZnJvbSAnLi4vbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHJlcGxhY2VDaGlsZHJlbiB9IGZyb20gJy4uL2RvbS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyBtYXAgcmVuZGVyZXIuXG4gKiBAYXBpXG4gKi9cbnZhciBDb21wb3NpdGVNYXBSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29tcG9zaXRlTWFwUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb21wb3NpdGVNYXBSZW5kZXJlcihtYXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWFwKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mb250Q2hhbmdlTGlzdGVuZXJLZXlfID0gbGlzdGVuKGNoZWNrZWRGb250cywgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCBtYXAucmVkcmF3VGV4dC5iaW5kKG1hcCkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIHN0eWxlID0gX3RoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIHN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgc3R5bGUuekluZGV4ID0gJzAnO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5jbGFzc05hbWUgPSBDTEFTU19VTlNFTEVDVEFCTEUgKyAnIG9sLWxheWVycyc7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBtYXAuZ2V0Vmlld3BvcnQoKTtcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShfdGhpcy5lbGVtZW50XywgY29udGFpbmVyLmZpcnN0Q2hpbGQgfHwgbnVsbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8SFRNTEVsZW1lbnQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2hpbGRyZW5fID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudCA9IGZ1bmN0aW9uICh0eXBlLCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICBpZiAobWFwLmhhc0xpc3RlbmVyKHR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IG5ldyBSZW5kZXJFdmVudCh0eXBlLCB1bmRlZmluZWQsIGZyYW1lU3RhdGUpO1xuICAgICAgICAgICAgbWFwLmRpc3BhdGNoRXZlbnQoZXZlbnRfMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5mb250Q2hhbmdlTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgdGhpcy5lbGVtZW50Xy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyLlxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudF8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGN1bGF0ZU1hdHJpY2VzMkQoZnJhbWVTdGF0ZSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLnpJbmRleCAtIGIuekluZGV4O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB0aGlzLmNoaWxkcmVuXy5sZW5ndGggPSAwO1xuICAgICAgICB2YXIgcHJldmlvdXNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzQXJyYXlbaV07XG4gICAgICAgICAgICBmcmFtZVN0YXRlLmxheWVySW5kZXggPSBpO1xuICAgICAgICAgICAgaWYgKCFpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSB8fFxuICAgICAgICAgICAgICAgIChsYXllclN0YXRlLnNvdXJjZVN0YXRlICE9IFNvdXJjZVN0YXRlLlJFQURZICYmXG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuc291cmNlU3RhdGUgIT0gU291cmNlU3RhdGUuVU5ERUZJTkVEKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbGF5ZXIucmVuZGVyKGZyYW1lU3RhdGUsIHByZXZpb3VzRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZS5jYWxsKHRoaXMsIGZyYW1lU3RhdGUpO1xuICAgICAgICByZXBsYWNlQ2hpbGRyZW4odGhpcy5lbGVtZW50XywgdGhpcy5jaGlsZHJlbl8pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlBPU1RDT01QT1NFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudF8uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlKGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFjayBMYXllclxuICAgICAqICAgICBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBsYXllckZpbHRlcikge1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBsYXllclN0YXRlcyA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgdmFyIG51bUxheWVycyA9IGxheWVyU3RhdGVzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IG51bUxheWVycyAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2ldO1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgIGlmIChsYXllci5oYXNSZW5kZXJlcigpICYmXG4gICAgICAgICAgICAgICAgaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgJiZcbiAgICAgICAgICAgICAgICBsYXllckZpbHRlcihsYXllcikpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IGxheWVyLmdldFJlbmRlcmVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBsYXllclJlbmRlcmVyLmdldERhdGFBdFBpeGVsKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhsYXllciwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBDb21wb3NpdGVNYXBSZW5kZXJlcjtcbn0oTWFwUmVuZGVyZXIpKTtcbmV4cG9ydCBkZWZhdWx0IENvbXBvc2l0ZU1hcFJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29tcG9zaXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcEV2ZW50XG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+UGx1Z2dhYmxlTWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgZXZlbnQuXG4gKi9cbnZhciBNYXBFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZT19IG9wdF9mcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEV2ZW50KHR5cGUsIG1hcCwgb3B0X2ZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXAgd2hlcmUgdGhlIGV2ZW50IG9jY3VycmVkLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwID0gbWFwO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGZyYW1lIHN0YXRlIGF0IHRoZSB0aW1lIG9mIHRoZSBldmVudC5cbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdF9mcmFtZVN0YXRlIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gTWFwRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEV2ZW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFxuICovXG5pbXBvcnQgTWFwRXZlbnQgZnJvbSAnLi9NYXBFdmVudC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBicm93c2VyIGV2ZW50cyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5QbHVnZ2FibGVNYXB9IGZvciB3aGljaCBldmVudHMgdHJpZ2dlciBhIG1hcCBicm93c2VyIGV2ZW50LlxuICogQHRlbXBsYXRlIHtVSUV2ZW50fSBFVkVOVFxuICovXG52YXIgTWFwQnJvd3NlckV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBCcm93c2VyRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQHBhcmFtIHtFVkVOVH0gb3JpZ2luYWxFdmVudCBPcmlnaW5hbCBldmVudC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZHJhZ2dpbmcgSXMgdGhlIG1hcCBjdXJyZW50bHkgYmVpbmcgZHJhZ2dlZD9cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlPX0gb3B0X2ZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFwQnJvd3NlckV2ZW50KHR5cGUsIG1hcCwgb3JpZ2luYWxFdmVudCwgb3B0X2RyYWdnaW5nLCBvcHRfZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlLCBtYXAsIG9wdF9mcmFtZVN0YXRlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7RVZFTlR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hcCBwaXhlbCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24gY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvb3JkaW5hdGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyBpZiB0aGUgbWFwIGlzIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkLiBPbmx5IHNldCBmb3JcbiAgICAgICAgICogYFBPSU5URVJEUkFHYCBhbmQgYFBPSU5URVJNT1ZFYCBldmVudHMuIERlZmF1bHQgaXMgYGZhbHNlYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRyYWdnaW5nID0gb3B0X2RyYWdnaW5nICE9PSB1bmRlZmluZWQgPyBvcHRfZHJhZ2dpbmcgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZSwgXCJwaXhlbFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFwIHBpeGVsIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBldmVudC5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBpeGVsXykge1xuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxfID0gdGhpcy5tYXAuZ2V0RXZlbnRQaXhlbCh0aGlzLm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGl4ZWxfO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICAgICAgdGhpcy5waXhlbF8gPSBwaXhlbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLCBcImNvb3JkaW5hdGVcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvb3JkaW5hdGUgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC4gIFRoaXMgd2lsbCBiZSBpbiB0aGUgdXNlclxuICAgICAgICAgKiBwcm9qZWN0aW9uIGlmIG9uZSBpcyBzZXQuICBPdGhlcndpc2UgaXQgd2lsbCBiZSBpbiB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvb3JkaW5hdGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlXyA9IHRoaXMubWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwodGhpcy5waXhlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb29yZGluYXRlXztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlXyA9IGNvb3JkaW5hdGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBQcmV2ZW50cyB0aGUgZGVmYXVsdCBicm93c2VyIGFjdGlvbi5cbiAgICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2V2ZW50LnByZXZlbnREZWZhdWx0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnByZXZlbnREZWZhdWx0LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgZnVydGhlciBwcm9wYWdhdGlvbiBvZiB0aGUgY3VycmVudCBldmVudC5cbiAgICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2V2ZW50LnN0b3BQcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBCcm93c2VyRXZlbnQ7XG59KE1hcEV2ZW50KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFR5cGVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuLyoqXG4gKiBDb25zdGFudHMgZm9yIGV2ZW50IG5hbWVzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIEEgdHJ1ZSBzaW5nbGUgY2xpY2sgd2l0aCBubyBkcmFnZ2luZyBhbmQgbm8gZG91YmxlIGNsaWNrLiBOb3RlIHRoYXQgdGhpc1xuICAgICAqIGV2ZW50IGlzIGRlbGF5ZWQgYnkgMjUwIG1zIHRvIGVuc3VyZSB0aGF0IGl0IGlzIG5vdCBhIGRvdWJsZSBjbGljay5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjc2luZ2xlY2xpY2tcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU0lOR0xFQ0xJQ0s6ICdzaW5nbGVjbGljaycsXG4gICAgLyoqXG4gICAgICogQSBjbGljayB3aXRoIG5vIGRyYWdnaW5nLiBBIGRvdWJsZSBjbGljayB3aWxsIGZpcmUgdHdvIG9mIHRoaXMuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2NsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENMSUNLOiBFdmVudFR5cGUuQ0xJQ0ssXG4gICAgLyoqXG4gICAgICogQSB0cnVlIGRvdWJsZSBjbGljaywgd2l0aCBubyBkcmFnZ2luZy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjZGJsY2xpY2tcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgREJMQ0xJQ0s6IEV2ZW50VHlwZS5EQkxDTElDSyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHBvaW50ZXIgaXMgZHJhZ2dlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjcG9pbnRlcmRyYWdcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9JTlRFUkRSQUc6ICdwb2ludGVyZHJhZycsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIG1vdmVkLiBOb3RlIHRoYXQgb24gdG91Y2ggZGV2aWNlcyB0aGlzIGlzXG4gICAgICogdHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBpcyBwYW5uZWQsIHNvIGlzIG5vdCB0aGUgc2FtZSBhcyBtb3VzZW1vdmUuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJtb3ZlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuICAgIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICAgIFBPSU5URVJVUDogJ3BvaW50ZXJ1cCcsXG4gICAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gICAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICAgIFBPSU5URVJFTlRFUjogJ3BvaW50ZXJlbnRlcicsXG4gICAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBDb25zdGFudHMgZm9yIGV2ZW50IG5hbWVzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuICAgIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICAgIFBPSU5URVJVUDogJ3BvaW50ZXJ1cCcsXG4gICAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gICAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICAgIFBPSU5URVJFTlRFUjogJ3BvaW50ZXJlbnRlcicsXG4gICAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRIYW5kbGVyXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlckV2ZW50LmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IERFVklDRV9QSVhFTF9SQVRJTywgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG52YXIgTWFwQnJvd3NlckV2ZW50SGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwQnJvd3NlckV2ZW50SGFuZGxlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBUaGUgbWFwIHdpdGggdGhlIHZpZXdwb3J0IHRvIGxpc3RlbiB0byBldmVudHMgb24uXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBtb3ZlVG9sZXJhbmNlIFRoZSBtaW5pbWFsIGRpc3RhbmNlIHRoZSBwb2ludGVyIG11c3QgdHJhdmVsIHRvIHRyaWdnZXIgYSBtb3ZlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIobWFwLCBtb3ZlVG9sZXJhbmNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1hcCkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgdGhlIGVsZW1lbnQgdGhhdCB3ZSB3aWxsIGxpc3RlbiB0byB0aGUgcmVhbCBldmVudHMgb24uXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHthbnl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jbGlja1RpbWVvdXRJZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHJhZ0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG1vdmVUb2xlcmFuY2VcbiAgICAgICAgICAgID8gbW92ZVRvbGVyYW5jZSAqIERFVklDRV9QSVhFTF9SQVRJT1xuICAgICAgICAgICAgOiBERVZJQ0VfUElYRUxfUkFUSU87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbW9zdCByZWNlbnQgXCJkb3duXCIgdHlwZSBldmVudCAob3IgbnVsbCBpZiBub25lIGhhdmUgb2NjdXJyZWQpLlxuICAgICAgICAgKiBTZXQgb24gcG9pbnRlcmRvd24uXG4gICAgICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kb3duXyA9IG51bGw7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMubWFwXy5nZXRWaWV3cG9ydCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFjdGl2ZVBvaW50ZXJzXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxudW1iZXIsIGJvb2xlYW4+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2tlZFRvdWNoZXNfID0ge307XG4gICAgICAgIF90aGlzLmVsZW1lbnRfID0gZWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBsaXN0ZW4oZWxlbWVudCwgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiwgX3RoaXMuaGFuZGxlUG9pbnRlckRvd25fLCBfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVsYXllZExpc3RlbmVyS2V5XyA9IGxpc3RlbihlbGVtZW50LCBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCBfdGhpcy5yZWxheUV2ZW50XywgX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlVG91Y2hNb3ZlXyA9IF90aGlzLmhhbmRsZVRvdWNoTW92ZV8uYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlRPVUNITU9WRSwgX3RoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmVtdWxhdGVDbGlja18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5jbGlja1RpbWVvdXRJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZG91YmxlLWNsaWNrXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVvdXRJZF8pO1xuICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNsaWNrXG4gICAgICAgICAgICB0aGlzLmNsaWNrVGltZW91dElkXyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5TSU5HTEVDTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDI1MCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEtlZXBzIHRyYWNrIG9uIGhvdyBtYW55IHBvaW50ZXJzIGFyZSBjdXJyZW50bHkgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS51cGRhdGVBY3RpdmVQb2ludGVyc18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHZhciBldmVudCA9IHBvaW50ZXJFdmVudDtcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAgfHxcbiAgICAgICAgICAgIGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSQ0FOQ0VMKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkVG91Y2hlc19bZXZlbnQucG9pbnRlcklkXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgIHRoaXMudHJhY2tlZFRvdWNoZXNfW2V2ZW50LnBvaW50ZXJJZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlUG9pbnRlcnNfID0gT2JqZWN0LmtleXModGhpcy50cmFja2VkVG91Y2hlc18pLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlclVwXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVQb2ludGVyc18ocG9pbnRlckV2ZW50KTtcbiAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICAvLyBXZSBlbXVsYXRlIGNsaWNrIGV2ZW50cyBvbiBsZWZ0IG1vdXNlIGJ1dHRvbiBjbGljaywgdG91Y2ggY29udGFjdCwgYW5kIHBlblxuICAgICAgICAvLyBjb250YWN0LiBpc01vdXNlQWN0aW9uQnV0dG9uIHJldHVybnMgdHJ1ZSBpbiB0aGVzZSBjYXNlcyAoZXZ0LmJ1dHRvbiBpcyBzZXRcbiAgICAgICAgLy8gdG8gMCkuXG4gICAgICAgIC8vIFNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyNidXR0b24tc3RhdGVzXG4gICAgICAgIC8vIFdlIG9ubHkgZmlyZSBjbGljaywgc2luZ2xlY2xpY2ssIGFuZCBkb3VibGVjbGljayBpZiBub2JvZHkgaGFzIGNhbGxlZFxuICAgICAgICAvLyBldmVudC5zdG9wUHJvcGFnYXRpb24oKSBvciBldmVudC5wcmV2ZW50RGVmYXVsdCgpLlxuICAgICAgICBpZiAoIW5ld0V2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCAmJlxuICAgICAgICAgICAgIXRoaXMuZHJhZ2dpbmdfICYmXG4gICAgICAgICAgICB0aGlzLmlzTW91c2VBY3Rpb25CdXR0b25fKHBvaW50ZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuZW11bGF0ZUNsaWNrXyh0aGlzLmRvd25fKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hY3RpdmVQb2ludGVyc18gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdfID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRvd25fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGxlZnQgbW91c2UgYnV0dG9uIHdhcyBwcmVzc2VkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaXNNb3VzZUFjdGlvbkJ1dHRvbl8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiBwb2ludGVyRXZlbnQuYnV0dG9uID09PSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyRG93bl8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICB0aGlzLmRvd25fID0gcG9pbnRlckV2ZW50O1xuICAgICAgICBpZiAodGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4oZG9jdW1lbnQsIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUsIHRoaXMuaGFuZGxlUG9pbnRlck1vdmVfLCB0aGlzKSwgbGlzdGVuKGRvY3VtZW50LCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSwgXG4gICAgICAgICAgICAvKiBOb3RlIHRoYXQgdGhlIGxpc3RlbmVyIGZvciBgcG9pbnRlcmNhbmNlbCBpcyBzZXQgdXAgb25cbiAgICAgICAgICAgICAqIGBwb2ludGVyRXZlbnRIYW5kbGVyX2AgYW5kIG5vdCBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgbGlrZVxuICAgICAgICAgICAgICogdGhlIGBwb2ludGVydXBgIGFuZCBgcG9pbnRlcm1vdmVgIGxpc3RlbmVycy5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBUaGUgcmVhc29uIGZvciB0aGlzIGlzIHRoZSBmb2xsb3dpbmc6IGBUb3VjaFNvdXJjZS52YWN1dW1Ub3VjaGVzXygpYFxuICAgICAgICAgICAgICogaXNzdWVzIGBwb2ludGVyY2FuY2VsYCBldmVudHMsIHdoZW4gdGhlcmUgd2FzIG5vIGB0b3VjaGVuZGAgZm9yIGFcbiAgICAgICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gTm93LCBsZXQncyBzYXkgYSBmaXJzdCBgdG91Y2hzdGFydGAgaXMgcmVnaXN0ZXJlZCBvblxuICAgICAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYC4gVGhlIGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBpcyBzZXQgdXAuXG4gICAgICAgICAgICAgKiBCdXQgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGRvZXNuJ3Qga25vdyBhYm91dCB0aGUgZmlyc3RcbiAgICAgICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gSWYgdGhlcmUgaXMgbm8gYHRvdWNoZW5kYCBmb3IgdGhlIGB0b3VjaHN0YXJ0YCwgd2UgY2FuXG4gICAgICAgICAgICAgKiBvbmx5IHJlY2VpdmUgYSBgdG91Y2hjYW5jZWxgIGZyb20gYHBvaW50ZXJFdmVudEhhbmRsZXJfYCwgYmVjYXVzZSBpdCBpc1xuICAgICAgICAgICAgICogb25seSByZWdpc3RlcmVkIHRoZXJlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsaXN0ZW4odGhpcy5lbGVtZW50XywgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSQ0FOQ0VMLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRfLmdldFJvb3ROb2RlICYmXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSgpICE9PSBkb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4odGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSgpLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlck1vdmVfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICAvLyBCZXR3ZWVuIHBvaW50ZXJkb3duIGFuZCBwb2ludGVydXAsIHBvaW50ZXJtb3ZlIGV2ZW50cyBhcmUgdHJpZ2dlcmVkLlxuICAgICAgICAvLyBUbyBhdm9pZCBhICdmYWxzZScgdG91Y2htb3ZlIGV2ZW50IHRvIGJlIGRpc3BhdGNoZWQsIHdlIHRlc3QgaWYgdGhlIHBvaW50ZXJcbiAgICAgICAgLy8gbW92ZWQgYSBzaWduaWZpY2FudCBkaXN0YW5jZS5cbiAgICAgICAgaWYgKHRoaXMuaXNNb3ZpbmdfKHBvaW50ZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdfID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQsIHRoaXMuZHJhZ2dpbmdfKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdyYXAgYW5kIHJlbGF5IGEgcG9pbnRlciBldmVudC4gIE5vdGUgdGhhdCB0aGlzIHJlcXVpcmVzIHRoYXQgdGhlIHR5cGVcbiAgICAgKiBzdHJpbmcgZm9yIHRoZSBNYXBCcm93c2VyRXZlbnQgbWF0Y2hlcyB0aGUgUG9pbnRlckV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5yZWxheUV2ZW50XyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfID0gcG9pbnRlckV2ZW50O1xuICAgICAgICB2YXIgZHJhZ2dpbmcgPSAhISh0aGlzLmRvd25fICYmIHRoaXMuaXNNb3ZpbmdfKHBvaW50ZXJFdmVudCkpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEJyb3dzZXJFdmVudChwb2ludGVyRXZlbnQudHlwZSwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQsIGRyYWdnaW5nKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGbGV4aWJsZSBoYW5kbGluZyBvZiBhIGB0b3VjaC1hY3Rpb246IG5vbmVgIGNzcyBlcXVpdmFsZW50OiBiZWNhdXNlIGNhbGxpbmdcbiAgICAgKiBgcHJldmVudERlZmF1bHQoKWAgb24gYSBgcG9pbnRlcm1vdmVgIGV2ZW50IGRvZXMgbm90IHN0b3AgbmF0aXZlIHBhZ2Ugc2Nyb2xsaW5nXG4gICAgICogYW5kIHpvb21pbmcsIHdlIGFsc28gbGlzdGVuIGZvciBgdG91Y2htb3ZlYCBhbmQgY2FsbCBgcHJldmVudERlZmF1bHQoKWAgb24gaXRcbiAgICAgKiB3aGVuIGFuIGludGVyYWN0aW9uIChjdXJyZW50bHkgYERyYWdQYW5gIGhhbmRsZXMgdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVUb3VjaE1vdmVfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIER1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbXBpemVuYmVyZy9lbG0tcGVwL2lzc3Vlcy8yLCBgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfYFxuICAgICAgICAvLyBtYXkgbm90IGJlIGluaXRpYWxpemVkIHlldCB3aGVuIHdlIGdldCBoZXJlIG9uIGEgcGxhdGZvcm0gd2l0aG91dCBuYXRpdmUgcG9pbnRlciBldmVudHMuXG4gICAgICAgIGlmICghdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfIHx8XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF8uZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgbW92aW5nLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaXNNb3ZpbmdfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZHJhZ2dpbmdfIHx8XG4gICAgICAgICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WCAtIHRoaXMuZG93bl8uY2xpZW50WCkgPlxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVRvbGVyYW5jZV8gfHxcbiAgICAgICAgICAgIE1hdGguYWJzKHBvaW50ZXJFdmVudC5jbGllbnRZIC0gdGhpcy5kb3duXy5jbGllbnRZKSA+IHRoaXMubW92ZVRvbGVyYW5jZV8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucmVsYXllZExpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudF8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuVE9VQ0hNT1ZFLCB0aGlzLmJvdW5kSGFuZGxlVG91Y2hNb3ZlXyk7XG4gICAgICAgIGlmICh0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuZWxlbWVudF8gPSBudWxsO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcEJyb3dzZXJFdmVudEhhbmRsZXI7XG59KEV2ZW50VGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyRXZlbnRIYW5kbGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgTEFZRVJHUk9VUDogJ2xheWVyZ3JvdXAnLFxuICAgIFNJWkU6ICdzaXplJyxcbiAgICBUQVJHRVQ6ICd0YXJnZXQnLFxuICAgIFZJRVc6ICd2aWV3Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9Qcmlvcml0eVF1ZXVlXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERST1AgPSBJbmZpbml0eTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJpb3JpdHkgcXVldWUuXG4gKlxuICogVGhlIGltcGxlbWVudGF0aW9uIGlzIGluc3BpcmVkIGZyb20gdGhlIENsb3N1cmUgTGlicmFyeSdzIEhlYXAgY2xhc3MgYW5kXG4gKiBQeXRob24ncyBoZWFwcSBtb2R1bGUuXG4gKlxuICogU2VlIGh0dHA6Ly9jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vc3ZuL2RvY3MvY2xvc3VyZV9nb29nX3N0cnVjdHNfaGVhcC5qcy5zb3VyY2UuaHRtbFxuICogYW5kIGh0dHA6Ly9oZy5weXRob24ub3JnL2NweXRob24vZmlsZS8yLjcvTGliL2hlYXBxLnB5LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbnZhciBQcmlvcml0eVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCk6IG51bWJlcn0gcHJpb3JpdHlGdW5jdGlvbiBQcmlvcml0eSBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOiBzdHJpbmd9IGtleUZ1bmN0aW9uIEtleSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQcmlvcml0eVF1ZXVlKHByaW9yaXR5RnVuY3Rpb24sIGtleUZ1bmN0aW9uKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oVCk6IG51bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJpb3JpdHlGdW5jdGlvbl8gPSBwcmlvcml0eUZ1bmN0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKFQpOiBzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtleUZ1bmN0aW9uXyA9IGtleUZ1bmN0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbGVtZW50c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcmlvcml0aWVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucXVldWVkRWxlbWVudHNfID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLnByaW9yaXRpZXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIGNsZWFyKHRoaXMucXVldWVkRWxlbWVudHNfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbmQgcmV0dXJuIHRoZSBoaWdoZXN0LXByaW9yaXR5IGVsZW1lbnQuIE8obG9nIE4pLlxuICAgICAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1swXTtcbiAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBlbGVtZW50cy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgcHJpb3JpdGllcy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudHNbMF0gPSBlbGVtZW50cy5wb3AoKTtcbiAgICAgICAgICAgIHByaW9yaXRpZXNbMF0gPSBwcmlvcml0aWVzLnBvcCgpO1xuICAgICAgICAgICAgdGhpcy5zaWZ0VXBfKDApO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVtZW50S2V5ID0gdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlZEVsZW1lbnRzX1tlbGVtZW50S2V5XTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbnF1ZXVlIGFuIGVsZW1lbnQuIE8obG9nIE4pLlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBlbGVtZW50IHdhcyBhZGRlZCB0byB0aGUgcXVldWUuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGFzc2VydCghKHRoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpIGluIHRoaXMucXVldWVkRWxlbWVudHNfKSwgMzEpOyAvLyBUcmllZCB0byBlbnF1ZXVlIGFuIGBlbGVtZW50YCB0aGF0IHdhcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBxdWV1ZVxuICAgICAgICB2YXIgcHJpb3JpdHkgPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fKGVsZW1lbnQpO1xuICAgICAgICBpZiAocHJpb3JpdHkgIT0gRFJPUCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50c18ucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucHJpb3JpdGllc18ucHVzaChwcmlvcml0eSk7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlZEVsZW1lbnRzX1t0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KV0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaWZ0RG93bl8oMCwgdGhpcy5lbGVtZW50c18ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IENvdW50LlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c18ubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSBsZWZ0IGNoaWxkIGZvci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgbGVmdCBjaGlsZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldExlZnRDaGlsZEluZGV4XyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gaW5kZXggKiAyICsgMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSByaWdodCBjaGlsZCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIHJpZ2h0IGNoaWxkIGZvci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgcmlnaHQgY2hpbGQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRSaWdodENoaWxkSW5kZXhfID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBpbmRleCAqIDIgKyAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIHBhcmVudCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIHBhcmVudCBmb3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHBhcmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldFBhcmVudEluZGV4XyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gKGluZGV4IC0gMSkgPj4gMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1ha2UgdGhpcyBhIGhlYXAuIE8oTikuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5oZWFwaWZ5XyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGZvciAoaSA9ICh0aGlzLmVsZW1lbnRzXy5sZW5ndGggPj4gMSkgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdGhpcy5zaWZ0VXBfKGkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c18ubGVuZ3RoID09PSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMga2V5IHF1ZXVlZC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pc0tleVF1ZXVlZCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGtleSBpbiB0aGlzLnF1ZXVlZEVsZW1lbnRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHF1ZXVlZC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pc1F1ZXVlZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzS2V5UXVldWVkKHRoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSBkb3duLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuc2lmdFVwXyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgY291bnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaW5kZXhdO1xuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0aWVzW2luZGV4XTtcbiAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBpbmRleDtcbiAgICAgICAgd2hpbGUgKGluZGV4IDwgY291bnQgPj4gMSkge1xuICAgICAgICAgICAgdmFyIGxJbmRleCA9IHRoaXMuZ2V0TGVmdENoaWxkSW5kZXhfKGluZGV4KTtcbiAgICAgICAgICAgIHZhciBySW5kZXggPSB0aGlzLmdldFJpZ2h0Q2hpbGRJbmRleF8oaW5kZXgpO1xuICAgICAgICAgICAgdmFyIHNtYWxsZXJDaGlsZEluZGV4ID0gckluZGV4IDwgY291bnQgJiYgcHJpb3JpdGllc1tySW5kZXhdIDwgcHJpb3JpdGllc1tsSW5kZXhdXG4gICAgICAgICAgICAgICAgPyBySW5kZXhcbiAgICAgICAgICAgICAgICA6IGxJbmRleDtcbiAgICAgICAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnRzW3NtYWxsZXJDaGlsZEluZGV4XTtcbiAgICAgICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdGllc1tzbWFsbGVyQ2hpbGRJbmRleF07XG4gICAgICAgICAgICBpbmRleCA9IHNtYWxsZXJDaGlsZEluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnQ7XG4gICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuc2lmdERvd25fKHN0YXJ0SW5kZXgsIGluZGV4KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IFRoZSBpbmRleCBvZiB0aGUgcm9vdC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIG1vdmUgdXAuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5zaWZ0RG93bl8gPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpbmRleF07XG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuICAgICAgICB3aGlsZSAoaW5kZXggPiBzdGFydEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50SW5kZXggPSB0aGlzLmdldFBhcmVudEluZGV4XyhpbmRleCk7XG4gICAgICAgICAgICBpZiAocHJpb3JpdGllc1twYXJlbnRJbmRleF0gPiBwcmlvcml0eSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnRzW3BhcmVudEluZGV4XTtcbiAgICAgICAgICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXRpZXNbcGFyZW50SW5kZXhdO1xuICAgICAgICAgICAgICAgIGluZGV4ID0gcGFyZW50SW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50O1xuICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucmVwcmlvcml0aXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJpb3JpdHlGdW5jdGlvbiA9IHRoaXMucHJpb3JpdHlGdW5jdGlvbl87XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBuID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICB2YXIgZWxlbWVudCwgaSwgcHJpb3JpdHk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICAgICAgICAgIHByaW9yaXR5ID0gcHJpb3JpdHlGdW5jdGlvbihlbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChwcmlvcml0eSA9PSBEUk9QKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW3RoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbaW5kZXgrK10gPSBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzLmxlbmd0aCA9IGluZGV4O1xuICAgICAgICBwcmlvcml0aWVzLmxlbmd0aCA9IGluZGV4O1xuICAgICAgICB0aGlzLmhlYXBpZnlfKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUHJpb3JpdHlRdWV1ZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBQcmlvcml0eVF1ZXVlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJpb3JpdHlRdWV1ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlUXVldWVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFByaW9yaXR5UXVldWUsIHsgRFJPUCB9IGZyb20gJy4vc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHQsIHN0cmluZywgaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIG51bWJlcik6IG51bWJlcn0gUHJpb3JpdHlGdW5jdGlvblxuICovXG52YXIgVGlsZVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlUXVldWUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQcmlvcml0eUZ1bmN0aW9ufSB0aWxlUHJpb3JpdHlGdW5jdGlvbiBUaWxlIHByaW9yaXR5IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogP30gdGlsZUNoYW5nZUNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIHRpbGUgY2hhbmdlIGV2ZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVRdWV1ZSh0aWxlUHJpb3JpdHlGdW5jdGlvbiwgdGlsZUNoYW5nZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFByaW9yaXR5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aWxlUHJpb3JpdHlGdW5jdGlvbi5hcHBseShudWxsLCBlbGVtZW50KTtcbiAgICAgICAgfSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZWxlbWVudFswXSkuZ2V0S2V5KCk7XG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZVRpbGVDaGFuZ2VfID0gX3RoaXMuaGFuZGxlVGlsZUNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbigpOiA/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNoYW5nZUNhbGxiYWNrXyA9IHRpbGVDaGFuZ2VDYWxsYmFjaztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlc0xvYWRpbmdfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZyxib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVzTG9hZGluZ0tleXNfID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBlbGVtZW50IHdhcyBhZGRlZCB0byB0aGUgcXVldWUuXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGFkZGVkID0gX3N1cGVyLnByb3RvdHlwZS5lbnF1ZXVlLmNhbGwodGhpcywgZWxlbWVudCk7XG4gICAgICAgIGlmIChhZGRlZCkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSBlbGVtZW50WzBdO1xuICAgICAgICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFkZGVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgdGlsZXMgbG9hZGluZy5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmdldFRpbGVzTG9hZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXNMb2FkaW5nXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVRdWV1ZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmICgodGlsZS5oaWZpICYmIHN0YXRlID09PSBUaWxlU3RhdGUuTE9BREVEKSB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgdGlsZS5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICAgICAgICB2YXIgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV07XG4gICAgICAgICAgICAgICAgLS10aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRpbGVDaGFuZ2VDYWxsYmFja18oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFRvdGFsTG9hZGluZyBNYXhpbXVtIG51bWJlciB0aWxlcyB0byBsb2FkIHNpbXVsdGFuZW91c2x5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhOZXdMb2FkcyBNYXhpbXVtIG51bWJlciBvZiBuZXcgdGlsZXMgdG8gbG9hZC5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmxvYWRNb3JlVGlsZXMgPSBmdW5jdGlvbiAobWF4VG90YWxMb2FkaW5nLCBtYXhOZXdMb2Fkcykge1xuICAgICAgICB2YXIgbmV3TG9hZHMgPSAwO1xuICAgICAgICB2YXIgc3RhdGUsIHRpbGUsIHRpbGVLZXk7XG4gICAgICAgIHdoaWxlICh0aGlzLnRpbGVzTG9hZGluZ18gPCBtYXhUb3RhbExvYWRpbmcgJiZcbiAgICAgICAgICAgIG5ld0xvYWRzIDwgbWF4TmV3TG9hZHMgJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0Q291bnQoKSA+IDApIHtcbiAgICAgICAgICAgIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5kZXF1ZXVlKClbMF0pO1xuICAgICAgICAgICAgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gVGlsZVN0YXRlLklETEUgJiYgISh0aWxlS2V5IGluIHRoaXMudGlsZXNMb2FkaW5nS2V5c18pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlc0xvYWRpbmdLZXlzX1t0aWxlS2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgKyt0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICAgICAgKytuZXdMb2FkcztcbiAgICAgICAgICAgICAgICB0aWxlLmxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGVRdWV1ZTtcbn0oUHJpb3JpdHlRdWV1ZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZVF1ZXVlO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9QbHVnZ2FibGVNYXAuanMnKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGlsZUNlbnRlciBUaWxlIGNlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlUmVzb2x1dGlvbiBUaWxlIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaWxlUHJpb3JpdHkoZnJhbWVTdGF0ZSwgdGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICAvLyBGaWx0ZXIgb3V0IHRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyB0aGFuIHRoZSBjdXJyZW50IHpvb20gbGV2ZWwsIG9yIHRoYXRcbiAgICAvLyBhcmUgb3V0c2lkZSB0aGUgdmlzaWJsZSBleHRlbnQuXG4gICAgaWYgKCFmcmFtZVN0YXRlIHx8ICEodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzKSkge1xuICAgICAgICByZXR1cm4gRFJPUDtcbiAgICB9XG4gICAgaWYgKCFmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldKSB7XG4gICAgICAgIHJldHVybiBEUk9QO1xuICAgIH1cbiAgICAvLyBQcmlvcml0aXplIHRoZSBoaWdoZXN0IHpvb20gbGV2ZWwgdGlsZXMgY2xvc2VzdCB0byB0aGUgZm9jdXMuXG4gICAgLy8gVGlsZXMgYXQgaGlnaGVyIHpvb20gbGV2ZWxzIGFyZSBwcmlvcml0aXplZCB1c2luZyBNYXRoLmxvZyh0aWxlUmVzb2x1dGlvbikuXG4gICAgLy8gV2l0aGluIGEgem9vbSBsZXZlbCwgdGlsZXMgYXJlIHByaW9yaXRpemVkIGJ5IHRoZSBkaXN0YW5jZSBpbiBwaXhlbHMgYmV0d2VlblxuICAgIC8vIHRoZSBjZW50ZXIgb2YgdGhlIHRpbGUgYW5kIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0LiAgVGhlIGZhY3RvciBvZiA2NTUzNlxuICAgIC8vIG1lYW5zIHRoYXQgdGhlIHByaW9yaXRpemF0aW9uIHNob3VsZCBiZWhhdmUgYXMgZGVzaXJlZCBmb3IgdGlsZXMgdXAgdG9cbiAgICAvLyA2NTUzNiAqIE1hdGgubG9nKDIpID0gNDU0MjYgcGl4ZWxzIGZyb20gdGhlIGZvY3VzLlxuICAgIHZhciBjZW50ZXIgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgdmFyIGRlbHRhWCA9IHRpbGVDZW50ZXJbMF0gLSBjZW50ZXJbMF07XG4gICAgdmFyIGRlbHRhWSA9IHRpbGVDZW50ZXJbMV0gLSBjZW50ZXJbMV07XG4gICAgcmV0dXJuICg2NTUzNiAqIE1hdGgubG9nKHRpbGVSZXNvbHV0aW9uKSArXG4gICAgICAgIE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpIC8gdGlsZVJlc29sdXRpb24pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVF1ZXVlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1BsdWdnYWJsZU1hcFxuICovXG5pbXBvcnQgQmFzZU9iamVjdCwgeyBnZXRDaGFuZ2VFdmVudFR5cGUgfSBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBMYXllckdyb3VwIGZyb20gJy4vbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50SGFuZGxlciBmcm9tICcuL01hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcbmltcG9ydCBNYXBFdmVudFR5cGUgZnJvbSAnLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcFByb3BlcnR5IGZyb20gJy4vTWFwUHJvcGVydHkuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlUXVldWUsIHsgZ2V0VGlsZVByaW9yaXR5IH0gZnJvbSAnLi9UaWxlUXVldWUuanMnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi9WaWV3LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7IERFVklDRV9QSVhFTF9SQVRJTywgSU1BR0VfREVDT0RFLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUywgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBUUlVFIH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsb25lLCBjcmVhdGVPclVwZGF0ZUVtcHR5LCBlcXVhbHMsIGdldEZvclZpZXdBbmRTaXplLCBpc0VtcHR5LCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGZyb21Vc2VyQ29vcmRpbmF0ZSwgdG9Vc2VyQ29vcmRpbmF0ZSB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBoYXNBcmVhIH0gZnJvbSAnLi9zaXplLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHJlbW92ZU5vZGUgfSBmcm9tICcuL2RvbS5qcyc7XG4vKipcbiAqIFN0YXRlIG9mIHRoZSBjdXJyZW50IGZyYW1lLiBPbmx5IGBwaXhlbFJhdGlvYCwgYHRpbWVgIGFuZCBgdmlld1N0YXRlYCBzaG91bGRcbiAqIGJlIHVzZWQgaW4gYXBwbGljYXRpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gRnJhbWVTdGF0ZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHBpeGVsUmF0aW8gVGhlIHBpeGVsIHJhdGlvIG9mIHRoZSBmcmFtZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lIFRoZSB0aW1lIHdoZW4gcmVuZGVyaW5nIG9mIHRoZSBmcmFtZSB3YXMgcmVxdWVzdGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1ZpZXcuanNcIikuU3RhdGV9IHZpZXdTdGF0ZSBUaGUgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYW5pbWF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXG4gKiBAcHJvcGVydHkge251bGx8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnRcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8RGVjbHV0dGVySXRlbXM+fSBkZWNsdXR0ZXJJdGVtc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IGluZGV4XG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGU+fSBsYXllclN0YXRlc0FycmF5XG4gKiBAcHJvcGVydHkge251bWJlcn0gbGF5ZXJJbmRleFxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXG4gKiBAcHJvcGVydHkge0FycmF5PFBvc3RSZW5kZXJGdW5jdGlvbj59IHBvc3RSZW5kZXJGdW5jdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemVcbiAqIEBwcm9wZXJ0eSB7VGlsZVF1ZXVlfSB0aWxlUXVldWVcbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gdXNlZFRpbGVzXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IHZpZXdIaW50c1xuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB3YW50ZWRUaWxlc1xuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlY2x1dHRlckl0ZW1zXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBpdGVtcyBEZWNsdXR0ZXIgaXRlbXMgb2YgYW4gZXhlY3V0b3IuXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3BhY2l0eSBMYXllciBvcGFjaXR5LlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihQbHVnZ2FibGVNYXAsID9GcmFtZVN0YXRlKTogYW55fSBQb3N0UmVuZGVyRnVuY3Rpb25cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBdFBpeGVsT3B0aW9uc1xuICogQHByb3BlcnR5IHt1bmRlZmluZWR8ZnVuY3Rpb24oaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gW2xheWVyRmlsdGVyXSBMYXllciBmaWx0ZXJcbiAqIGZ1bmN0aW9uLiBUaGUgZmlsdGVyIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSBvbmUgYXJndW1lbnQsIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllciBsYXllci1jYW5kaWRhdGV9IGFuZCBpdCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS5cbiAqIE9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYFxuICogd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZSBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2hpdFRvbGVyYW5jZT0wXSBIaXQtZGV0ZWN0aW9uIHRvbGVyYW5jZSBpbiBwaXhlbHMuIFBpeGVsc1xuICogaW5zaWRlIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbiB3aWxsIGJlIGNoZWNrZWQgZm9yIGZlYXR1cmVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY2hlY2tXcmFwcGVkPXRydWVdIENoZWNrLVdyYXBwZWQgV2lsbCBjaGVjayBmb3IgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcyBpbnNpZGUgdGhlIHJhbmdlIG9mXG4gKiAgICsvLSAxIHdvcmxkIHdpZHRoLiBXb3JrcyBvbmx5IGlmIGEgcHJvamVjdGlvbiBpcyB1c2VkIHRoYXQgY2FuIGJlIHdyYXBwZWQuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWFwT3B0aW9uc0ludGVybmFsXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc11cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBbaW50ZXJhY3Rpb25zXVxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxEb2N1bWVudH0ga2V5Ym9hcmRFdmVudFRhcmdldFxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gb3ZlcmxheXNcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IHZhbHVlc1xuICovXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIHRoZSBtYXAuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc11cbiAqIENvbnRyb2xzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sfmRlZmF1bHRzfSBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXSBUaGUgcmF0aW8gYmV0d2VlblxuICogcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzIChkaXBzKSBvbiB0aGUgZGV2aWNlLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gW2ludGVyYWN0aW9uc11cbiAqIEludGVyYWN0aW9ucyB0aGF0IGFyZSBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb25+ZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fHN0cmluZ30gW2tleWJvYXJkRXZlbnRUYXJnZXRdIFRoZSBlbGVtZW50IHRvXG4gKiBsaXN0ZW4gdG8ga2V5Ym9hcmQgZXZlbnRzIG9uLiBUaGlzIGRldGVybWluZXMgd2hlbiB0aGUgYEtleWJvYXJkUGFuYCBhbmRcbiAqIGBLZXlib2FyZFpvb21gIGludGVyYWN0aW9ucyB0cmlnZ2VyLiBGb3IgZXhhbXBsZSwgaWYgdGhpcyBvcHRpb24gaXMgc2V0IHRvXG4gKiBgZG9jdW1lbnRgIHRoZSBrZXlib2FyZCBpbnRlcmFjdGlvbnMgd2lsbCBhbHdheXMgdHJpZ2dlci4gSWYgdGhpcyBvcHRpb24gaXNcbiAqIG5vdCBzcGVjaWZpZWQsIHRoZSBlbGVtZW50IHRoZSBsaWJyYXJ5IGxpc3RlbnMgdG8ga2V5Ym9hcmQgZXZlbnRzIG9uIGlzIHRoZVxuICogbWFwIHRhcmdldCAoaS5lLiB0aGUgdXNlci1wcm92aWRlZCBkaXYgZm9yIHRoZSBtYXApLiBJZiB0aGlzIGlzIG5vdFxuICogYGRvY3VtZW50YCwgdGhlIHRhcmdldCBlbGVtZW50IG5lZWRzIHRvIGJlIGZvY3VzZWQgZm9yIGtleSBldmVudHMgdG8gYmVcbiAqIGVtaXR0ZWQsIHJlcXVpcmluZyB0aGF0IHRoZSB0YXJnZXQgZWxlbWVudCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fENvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fExheWVyR3JvdXB9IFtsYXllcnNdXG4gKiBMYXllcnMuIElmIHRoaXMgaXMgbm90IGRlZmluZWQsIGEgbWFwIHdpdGggbm8gbGF5ZXJzIHdpbGwgYmUgcmVuZGVyZWQuIE5vdGVcbiAqIHRoYXQgbGF5ZXJzIGFyZSByZW5kZXJlZCBpbiB0aGUgb3JkZXIgc3VwcGxpZWQsIHNvIGlmIHlvdSB3YW50LCBmb3IgZXhhbXBsZSxcbiAqIGEgdmVjdG9yIGxheWVyIHRvIGFwcGVhciBvbiB0b3Agb2YgYSB0aWxlIGxheWVyLCBpdCBtdXN0IGNvbWUgYWZ0ZXIgdGhlIHRpbGVcbiAqIGxheWVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhUaWxlc0xvYWRpbmc9MTZdIE1heGltdW0gbnVtYmVyIHRpbGVzIHRvIGxvYWRcbiAqIHNpbXVsdGFuZW91c2x5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlPTFdIFRoZSBtaW5pbXVtIGRpc3RhbmNlIGluIHBpeGVscyB0aGVcbiAqIGN1cnNvciBtdXN0IG1vdmUgdG8gYmUgZGV0ZWN0ZWQgYXMgYSBtYXAgbW92ZSBldmVudCBpbnN0ZWFkIG9mIGEgY2xpY2suXG4gKiBJbmNyZWFzaW5nIHRoaXMgdmFsdWUgY2FuIG1ha2UgaXQgZWFzaWVyIHRvIGNsaWNrIG9uIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gW292ZXJsYXlzXVxuICogT3ZlcmxheXMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIEJ5IGRlZmF1bHQsIG5vIG92ZXJsYXlzIGFyZSBhZGRlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgY29udGFpbmVyIGZvciB0aGUgbWFwLCBlaXRoZXIgdGhlXG4gKiBlbGVtZW50IGl0c2VsZiBvciB0aGUgYGlkYCBvZiB0aGUgZWxlbWVudC4gSWYgbm90IHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb25cbiAqIHRpbWUsIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRUYXJnZXR9IG11c3QgYmUgY2FsbGVkIGZvciB0aGUgbWFwIHRvIGJlXG4gKiByZW5kZXJlZC5cbiAqIEBwcm9wZXJ0eSB7Vmlld30gW3ZpZXddIFRoZSBtYXAncyB2aWV3LiAgTm8gbGF5ZXIgc291cmNlcyB3aWxsIGJlXG4gKiBmZXRjaGVkIHVubGVzcyB0aGlzIGlzIHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjc2V0Vmlld30uXG4gKi9cbi8qKlxuICogQGZpcmVzIGltcG9ydChcIi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLk1hcEJyb3dzZXJFdmVudFxuICogQGZpcmVzIGltcG9ydChcIi4vTWFwRXZlbnQuanNcIikuTWFwRXZlbnRcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0I3ByZWNvbXBvc2VcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0I3Bvc3Rjb21wb3NlXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnQuanNcIikuZGVmYXVsdCNyZW5kZXJjb21wbGV0ZVxuICogQGFwaVxuICovXG52YXIgUGx1Z2dhYmxlTWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQbHVnZ2FibGVNYXAsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNYXBPcHRpb25zfSBvcHRpb25zIE1hcCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBsdWdnYWJsZU1hcChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zSW50ZXJuYWwgPSBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucyk7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8gPSBfdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQuYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4VGlsZXNMb2FkaW5nXyA9XG4gICAgICAgICAgICBvcHRpb25zLm1heFRpbGVzTG9hZGluZyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhUaWxlc0xvYWRpbmcgOiAxNjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbFJhdGlvXyA9XG4gICAgICAgICAgICBvcHRpb25zLnBpeGVsUmF0aW8gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5waXhlbFJhdGlvXG4gICAgICAgICAgICAgICAgOiBERVZJQ0VfUElYRUxfUkFUSU87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uRGVsYXlLZXlfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuaW1hdGlvbkRlbGF5XyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGcmFtZV8oRGF0ZS5ub3coKSk7XG4gICAgICAgIH0uYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVJbmRleF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9GcmFtZVN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV4dGVudCBhdCB0aGUgcHJldmlvdXMgJ21vdmVlbmQnIGV2ZW50LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucHJldmlvdXNFeHRlbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLmNsYXNzTmFtZSA9XG4gICAgICAgICAgICAnb2wtdmlld3BvcnQnICsgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyA/ICcgb2wtdG91Y2gnIDogJycpO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuekluZGV4ID0gJzAnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lcic7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZChfdGhpcy5vdmVybGF5Q29udGFpbmVyXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS56SW5kZXggPSAnMCc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCc7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZChfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7TWFwQnJvd3NlckV2ZW50SGFuZGxlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG9wdGlvbnMubW92ZVRvbGVyYW5jZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfID0gb3B0aW9uc0ludGVybmFsLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXlIYW5kbGVyS2V5c18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRyb2xzID0gb3B0aW9uc0ludGVybmFsLmNvbnRyb2xzIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGlvbnMgPSBvcHRpb25zSW50ZXJuYWwuaW50ZXJhY3Rpb25zIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVybGF5c18gPSBvcHRpb25zSW50ZXJuYWwub3ZlcmxheXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxvb2t1cCBvZiBvdmVybGF5cyBieSBpZC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlJZEluZGV4XyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3VuZGVmaW5lZHxmdW5jdGlvbihFdmVudCk6IHZvaWR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oYW5kbGVSZXNpemVfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxQb3N0UmVuZGVyRnVuY3Rpb24+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtUaWxlUXVldWV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlUXVldWVfID0gbmV3IFRpbGVRdWV1ZShfdGhpcy5nZXRUaWxlUHJpb3JpdHkuYmluZChfdGhpcyksIF90aGlzLmhhbmRsZVRpbGVDaGFuZ2VfLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCksIF90aGlzLmhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyk7XG4gICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZ2V0Q2hhbmdlRXZlbnRUeXBlKE1hcFByb3BlcnR5LlZJRVcpLCBfdGhpcy5oYW5kbGVWaWV3Q2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKGdldENoYW5nZUV2ZW50VHlwZShNYXBQcm9wZXJ0eS5TSVpFKSwgX3RoaXMuaGFuZGxlU2l6ZUNoYW5nZWRfKTtcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihnZXRDaGFuZ2VFdmVudFR5cGUoTWFwUHJvcGVydHkuVEFSR0VUKSwgX3RoaXMuaGFuZGxlVGFyZ2V0Q2hhbmdlZF8pO1xuICAgICAgICAvLyBzZXRQcm9wZXJ0aWVzIHdpbGwgdHJpZ2dlciB0aGUgcmVuZGVyaW5nIG9mIHRoZSBtYXAgaWYgdGhlIG1hcFxuICAgICAgICAvLyBpcyBcImRlZmluZWRcIiBhbHJlYWR5LlxuICAgICAgICBfdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdGlvbnNJbnRlcm5hbC52YWx1ZXMpO1xuICAgICAgICBfdGhpcy5jb250cm9scy5mb3JFYWNoKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoY29udHJvbCkge1xuICAgICAgICAgICAgY29udHJvbC5zZXRNYXAodGhpcyk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zLmZvckVhY2goXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24uXG4gICAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9uLnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5mb3JFYWNoKF90aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5vdmVybGF5c18uYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdGhpcy5hZGRPdmVybGF5SW50ZXJuYWxfKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LmVsZW1lbnQpKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgb3ZlcmxheSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9ICovIChldmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBpZCA9IG92ZXJsYXkuZ2V0SWQoKTtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9IFRoZSBtYXAgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZSBhIG1hcCB0eXBlIHRoYXQgaGFzIGEgY3JlYXRlUmVuZGVyZXIgbWV0aG9kJyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIGNvbnRyb2wgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRDb250cm9sID0gZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgdGhpcy5nZXRDb250cm9scygpLnB1c2goY29udHJvbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIGludGVyYWN0aW9uIHRvIHRoZSBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhbiBpbnRlcmFjdGlvblxuICAgICAqIGF0IGFub3RoZXIgcG9pbnQgb2YgdGhlIGNvbGxlY3Rpb24gdXNlIGBnZXRJbnRlcmFjdGlvbigpYCBhbmQgdGhlIG1ldGhvZHNcbiAgICAgKiBhdmFpbGFibGUgb24ge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAgICogc3RvcCB0aGUgZXZlbnQgcHJvcGFnYXRpb24gZnJvbSB0aGUgaGFuZGxlRXZlbnQgZnVuY3Rpb24uIFRoZSBpbnRlcmFjdGlvbnNcbiAgICAgKiBnZXQgdG8gaGFuZGxlIHRoZSBldmVudHMgaW4gdGhlIHJldmVyc2Ugb3JkZXIgb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byBhZGQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5wdXNoKGludGVyYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGdpdmVuIGxheWVyIHRvIHRoZSB0b3Agb2YgdGhpcyBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhIGxheWVyXG4gICAgICogZWxzZXdoZXJlIGluIHRoZSBzdGFjaywgdXNlIGBnZXRMYXllcnMoKWAgYW5kIHRoZSBtZXRob2RzIGF2YWlsYWJsZSBvblxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRMYXllciA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgZ2l2ZW4gb3ZlcmxheSB0byB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRPdmVybGF5ID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5nZXRPdmVybGF5cygpLnB1c2gob3ZlcmxheSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGRlYWxzIHdpdGggbWFwJ3Mgb3ZlcmxheSBjb2xsZWN0aW9uIGNoYW5nZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRPdmVybGF5SW50ZXJuYWxfID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgICAgdmFyIGlkID0gb3ZlcmxheS5nZXRJZCgpO1xuICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV0gPSBvdmVybGF5O1xuICAgICAgICB9XG4gICAgICAgIG92ZXJsYXkuc2V0TWFwKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRUYXJnZXQobnVsbCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3QgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQsIGFuZCBleGVjdXRlIGFcbiAgICAgKiBjYWxsYmFjayB3aXRoIGVhY2ggaW50ZXJzZWN0aW5nIGZlYXR1cmUuIExheWVycyBpbmNsdWRlZCBpbiB0aGUgZGV0ZWN0aW9uIGNhblxuICAgICAqIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCB0aGUgYGxheWVyRmlsdGVyYCBvcHRpb24gaW4gYG9wdF9vcHRpb25zYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLFxuICAgICAqICAgICBpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBUfSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgd2lsbCBiZVxuICAgICAqICAgICBjYWxsZWQgd2l0aCB0d28gYXJndW1lbnRzLiBUaGUgZmlyc3QgYXJndW1lbnQgaXMgb25lXG4gICAgICogICAgIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZSBmZWF0dXJlfSBvclxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9GZWF0dXJlIHJlbmRlciBmZWF0dXJlfSBhdCB0aGUgcGl4ZWwsIHRoZSBzZWNvbmQgaXNcbiAgICAgKiAgICAgdGhlIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXJ9IG9mIHRoZSBmZWF0dXJlIGFuZCB3aWxsIGJlIG51bGwgZm9yXG4gICAgICogICAgIHVubWFuYWdlZCBsYXllcnMuIFRvIHN0b3AgZGV0ZWN0aW9uLCBjYWxsYmFjayBmdW5jdGlvbnMgY2FuIHJldHVybiBhXG4gICAgICogICAgIHRydXRoeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LCBpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YgbGFzdFxuICAgICAqIGNhbGxiYWNrIGV4ZWN1dGlvbiwgb3IgdGhlIGZpcnN0IHRydXRoeSBjYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gICAgICogQHRlbXBsYXRlIFMsVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgY2FsbGJhY2ssIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICogdGhpcy5mcmFtZVN0YXRlXy5waXhlbFJhdGlvXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIHZhciBsYXllckZpbHRlciA9IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5sYXllckZpbHRlciA6IFRSVUU7XG4gICAgICAgIHZhciBjaGVja1dyYXBwZWQgPSBvcHRfb3B0aW9ucy5jaGVja1dyYXBwZWQgIT09IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGNhbGxiYWNrLCBudWxsLCBsYXllckZpbHRlciwgbnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlPn0gVGhlIGRldGVjdGVkIGZlYXR1cmVzIG9yXG4gICAgICogYW4gZW1wdHkgYXJyYXkgaWYgbm9uZSB3ZXJlIGZvdW5kLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEZlYXR1cmVzQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgICAgIHRoaXMuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKHBpeGVsLCBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgfSwgb3B0X29wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZmVhdHVyZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3QgbGF5ZXJzIHRoYXQgaGF2ZSBhIGNvbG9yIHZhbHVlIGF0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LCBhbmRcbiAgICAgKiBleGVjdXRlIGEgY2FsbGJhY2sgd2l0aCBlYWNoIG1hdGNoaW5nIGxheWVyLiBMYXllcnMgaW5jbHVkZWQgaW4gdGhlXG4gICAgICogZGV0ZWN0aW9uIGNhbiBiZSBjb25maWd1cmVkIHRocm91Z2ggYG9wdF9sYXllckZpbHRlcmAuXG4gICAgICpcbiAgICAgKiBOb3RlOiB0aGlzIG1heSBnaXZlIGZhbHNlIHBvc2l0aXZlcyB1bmxlc3MgdGhlIG1hcCBsYXllcnMgaGF2ZSBoYWQgZGlmZmVyZW50IGBjbGFzc05hbWVgXG4gICAgICogcHJvcGVydGllcyBhc3NpZ25lZCB0byB0aGVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFMsIGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2tcbiAgICAgKiAgICAgTGF5ZXIgY2FsbGJhY2suIFRoaXMgY2FsbGJhY2sgd2lsbCByZWNlaXZlIHR3byBhcmd1bWVudHM6IGZpcnN0IGlzIHRoZVxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyfSwgc2Vjb25kIGFyZ3VtZW50IGlzIGFuIGFycmF5IHJlcHJlc2VudGluZ1xuICAgICAqICAgICBbUiwgRywgQiwgQV0gcGl4ZWwgdmFsdWVzICgwIC0gMjU1KSBhbmQgd2lsbCBiZSBgbnVsbGAgZm9yIGxheWVyIHR5cGVzXG4gICAgICogICAgIHRoYXQgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IHRoaXMgYXJndW1lbnQuIFRvIHN0b3AgZGV0ZWN0aW9uLCBjYWxsYmFja1xuICAgICAqICAgICBmdW5jdGlvbnMgY2FuIHJldHVybiBhIHRydXRoeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zPX0gb3B0X29wdGlvbnMgQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQsIGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZiBsYXN0XG4gICAgICogY2FsbGJhY2sgZXhlY3V0aW9uLCBvciB0aGUgZmlyc3QgdHJ1dGh5IGNhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICAgKiBAdGVtcGxhdGUgUyxUXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZm9yRWFjaExheWVyQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgY2FsbGJhY2ssIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuaGl0VG9sZXJhbmNlICogdGhpcy5mcmFtZVN0YXRlXy5waXhlbFJhdGlvXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIHZhciBsYXllckZpbHRlciA9IG9wdGlvbnMubGF5ZXJGaWx0ZXIgfHwgVFJVRTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmZvckVhY2hMYXllckF0UGl4ZWwocGl4ZWwsIHRoaXMuZnJhbWVTdGF0ZV8sIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGxheWVyRmlsdGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBmZWF0dXJlcyBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQuIExheWVycyBpbmNsdWRlZCBpbiB0aGVcbiAgICAgKiBkZXRlY3Rpb24gY2FuIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCBgb3B0X2xheWVyRmlsdGVyYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25hbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHRoZXJlIGEgZmVhdHVyZSBhdCB0aGUgZ2l2ZW4gcGl4ZWw/XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFzRmVhdHVyZUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRfb3B0aW9ucy5sYXllckZpbHRlciAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICogdGhpcy5mcmFtZVN0YXRlXy5waXhlbFJhdGlvXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIHZhciBjaGVja1dyYXBwZWQgPSBvcHRfb3B0aW9ucy5jaGVja1dyYXBwZWQgIT09IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmZyYW1lU3RhdGVfLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgbGF5ZXJGaWx0ZXIsIG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBpbiB1c2VyIHByb2plY3Rpb24gZm9yIGEgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHRoaXMuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBpbiB2aWV3IHByb2plY3Rpb24gZm9yIGEgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRDb29yZGluYXRlSW50ZXJuYWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHRoaXMuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHBpeGVsIHBvc2l0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LlxuICAgICAqIEBwYXJhbSB7VUlFdmVudH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gUGl4ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRQaXhlbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IHRoaXMudmlld3BvcnRfLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgZXZlbnRQb3NpdGlvbiA9IFxuICAgICAgICAvL0ZJWE1FIEFyZSB3ZSByZWFsbHkgY2FsbGluZyB0aGlzIHdpdGggYSBUb3VjaEV2ZW50IGFueXdoZXJlP1xuICAgICAgICAnY2hhbmdlZFRvdWNoZXMnIGluIGV2ZW50XG4gICAgICAgICAgICA/IC8qKiBAdHlwZSB7VG91Y2hFdmVudH0gKi8gKGV2ZW50KS5jaGFuZ2VkVG91Y2hlc1swXVxuICAgICAgICAgICAgOiAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChldmVudCk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBldmVudFBvc2l0aW9uLmNsaWVudFggLSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQsXG4gICAgICAgICAgICBldmVudFBvc2l0aW9uLmNsaWVudFkgLSB2aWV3cG9ydFBvc2l0aW9uLnRvcCxcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGFyZ2V0IGluIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJldHVybnMgd2hhdCBpcyBlbnRlcmVkIGFzIGFuIG9wdGlvbiBvciBpbiBzZXRUYXJnZXQ6XG4gICAgICogaWYgdGhhdCB3YXMgYW4gZWxlbWVudCwgaXQgcmV0dXJucyBhbiBlbGVtZW50OyBpZiBhIHN0cmluZywgaXQgcmV0dXJucyB0aGF0LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9IFRoZSBFbGVtZW50IG9yIGlkIG9mIHRoZSBFbGVtZW50IHRoYXQgdGhlXG4gICAgICogICAgIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFRhcmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR8c3RyaW5nfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LlRBUkdFVCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBET00gZWxlbWVudCBpbnRvIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLiBJbiBjb250cmFzdCB0b1xuICAgICAqIGBnZXRUYXJnZXRgIHRoaXMgbWV0aG9kIGFsd2F5cyByZXR1cm4gYW4gYEVsZW1lbnRgLCBvciBgbnVsbGAgaWYgdGhlXG4gICAgICogbWFwIGhhcyBubyB0YXJnZXQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSBlbGVtZW50IHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUYXJnZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoKTtcbiAgICAgICAgaWYgKHRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldClcbiAgICAgICAgICAgICAgICA6IHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgICAqIHVzZXIgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIGZvciB0aGUgcGl4ZWwgcG9zaXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICByZXR1cm4gdG9Vc2VyQ29vcmRpbmF0ZSh0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCksIHRoaXMuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgICAqIG1hcCB2aWV3IHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSBmb3IgdGhlIHBpeGVsIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgY29udHJvbHMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgY29udHJvbHNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBDb250cm9scy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRDb250cm9scyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbHM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBvdmVybGF5cy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBvdmVybGF5c1xuICAgICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBPdmVybGF5cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFuIG92ZXJsYXkgYnkgaXRzIGlkZW50aWZpZXIgKHRoZSB2YWx1ZSByZXR1cm5lZCBieSBvdmVybGF5LmdldElkKCkpLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgaW5kZXggdHJlYXRzIHN0cmluZyBhbmQgbnVtZXJpYyBpZGVudGlmaWVycyBhcyB0aGUgc2FtZS4gU29cbiAgICAgKiBgbWFwLmdldE92ZXJsYXlCeUlkKDIpYCB3aWxsIHJldHVybiBhbiBvdmVybGF5IHdpdGggaWQgYCcyJ2Agb3IgYDJgLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gaWQgT3ZlcmxheSBpZGVudGlmaWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBPdmVybGF5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBvdmVybGF5ID0gdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV07XG4gICAgICAgIHJldHVybiBvdmVybGF5ICE9PSB1bmRlZmluZWQgPyBvdmVybGF5IDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGludGVyYWN0aW9ucy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBpbnRlcmFjdGlvbnNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKlxuICAgICAqIEludGVyYWN0aW9ucyBhcmUgdXNlZCBmb3IgZS5nLiBwYW4sIHpvb20gYW5kIHJvdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IEludGVyYWN0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRJbnRlcmFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVyYWN0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGF5ZXJncm91cCBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7TGF5ZXJHcm91cH0gQSBsYXllciBncm91cCBjb250YWluaW5nIHRoZSBsYXllcnMgaW4gdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRMYXllckdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb2xsZWN0aW9uIG9mIGxheWVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7IUNvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBMYXllcnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHJldHVybiBsYXllcnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllcnMgaGF2ZSBzb3VyY2VzIHRoYXQgYXJlIHN0aWxsIGxvYWRpbmcuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllclN0YXRlc0FycmF5W2ldLmxheWVyO1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAmJiBzb3VyY2UubG9hZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSB1c2VyXG4gICAgICogcHJvamVjdGlvbiBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBwaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIEEgbWFwIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICB2YXIgdmlld0Nvb3JkaW5hdGUgPSBmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKHZpZXdDb29yZGluYXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSBtYXAgdmlld1xuICAgICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBBIG1hcCBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IEEgcGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCA9IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBjb29yZGluYXRlLnNsaWNlKDAsIDIpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgcmVuZGVyZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH0gUmVuZGVyZXJcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIG1hcCBpbiB0aGUgRE9NLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuU0laRSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC4gQSB2aWV3IG1hbmFnZXMgcHJvcGVydGllcyBzdWNoIGFzXG4gICAgICogY2VudGVyIGFuZCByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge1ZpZXd9IFRoZSB2aWV3IHRoYXQgY29udHJvbHMgdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtWaWV3fSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuVklFVykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFZpZXdwb3J0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFZpZXdwb3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3cG9ydF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgdGhlIGNvbnRhaW5lciBmb3Igb3ZlcmxheXMuICBFbGVtZW50cyBhZGRlZCB0b1xuICAgICAqIHRoaXMgY29udGFpbmVyIHdpbGwgbGV0IG1vdXNlZG93biBhbmQgdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLFxuICAgICAqIHNvIGNsaWNrcyBhbmQgZ2VzdHVyZXMgb24gYW4gb3ZlcmxheSB3aWxsIHRyaWdnZXIge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fVxuICAgICAqIGV2ZW50cy5cbiAgICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdmVybGF5cyB0aGF0IGRvbid0IGFsbG93XG4gICAgICogZXZlbnQgcHJvcGFnYXRpb24uIEVsZW1lbnRzIGFkZGVkIHRvIHRoaXMgY29udGFpbmVyIHdvbid0IGxldCBtb3VzZWRvd24gYW5kXG4gICAgICogdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLCBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXlcbiAgICAgKiBkb24ndCB0cmlnZ2VyIGFueSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9LlxuICAgICAqIEByZXR1cm4geyFIVE1MRWxlbWVudH0gVGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyIHRoYXQgc3RvcHMgZXZlbnRzLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRpbGVDZW50ZXIgVGlsZSBjZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVSZXNvbHV0aW9uIFRpbGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUaWxlUHJpb3JpdHkgPSBmdW5jdGlvbiAodGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGdldFRpbGVQcmlvcml0eSh0aGlzLmZyYW1lU3RhdGVfLCB0aWxlLCB0aWxlU291cmNlS2V5LCB0aWxlQ2VudGVyLCB0aWxlUmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1VJRXZlbnR9IGJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3R5cGUgVHlwZS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZUJyb3dzZXJFdmVudCA9IGZ1bmN0aW9uIChicm93c2VyRXZlbnQsIG9wdF90eXBlKSB7XG4gICAgICAgIHZhciB0eXBlID0gb3B0X3R5cGUgfHwgYnJvd3NlckV2ZW50LnR5cGU7XG4gICAgICAgIHZhciBtYXBCcm93c2VyRXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KHR5cGUsIHRoaXMsIGJyb3dzZXJFdmVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01hcEJyb3dzZXJFdmVudH0gbWFwQnJvd3NlckV2ZW50IFRoZSBldmVudCB0byBoYW5kbGUuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVNYXBCcm93c2VyRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgLy8gV2l0aCBubyB2aWV3IGRlZmluZWQsIHdlIGNhbm5vdCB0cmFuc2xhdGUgcGl4ZWxzIGludG8gZ2VvZ3JhcGhpY2FsXG4gICAgICAgICAgICAvLyBjb29yZGluYXRlcyBzbyBpbnRlcmFjdGlvbnMgY2Fubm90IGJlIHVzZWQuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge1BvaW50ZXJFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IG9yaWdpbmFsRXZlbnQudHlwZTtcbiAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiB8fFxuICAgICAgICAgICAgZXZlbnRUeXBlID09PSBFdmVudFR5cGUuV0hFRUwgfHxcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9PT0gRXZlbnRUeXBlLktFWURPV04pIHtcbiAgICAgICAgICAgIHZhciByb290Tm9kZSA9IHRoaXMudmlld3BvcnRfLmdldFJvb3ROb2RlXG4gICAgICAgICAgICAgICAgPyB0aGlzLnZpZXdwb3J0Xy5nZXRSb290Tm9kZSgpXG4gICAgICAgICAgICAgICAgOiBkb2N1bWVudDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSByb290Tm9kZSA9PT0gZG9jdW1lbnRcbiAgICAgICAgICAgICAgICA/IC8qKiBAdHlwZSB7Tm9kZX0gKi8gKG9yaWdpbmFsRXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgIDogLyoqIEB0eXBlIHtTaGFkb3dSb290fSAqLyAocm9vdE5vZGUpLmVsZW1lbnRGcm9tUG9pbnQob3JpZ2luYWxFdmVudC5jbGllbnRYLCBvcmlnaW5hbEV2ZW50LmNsaWVudFkpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhlIHRhcmdldCBpcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIgZm9yIGVsZW1lbnRzIHdob3NlIGV2ZW50cyBhcmUgbm90IG1lYW50XG4gICAgICAgICAgICAvLyB0byBiZSBoYW5kbGVkIGJ5IG1hcCBpbnRlcmFjdGlvbnMuXG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNvbnRhaW5zKHRhcmdldCkgfHxcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCBpZiB0aGUgZXZlbnQgdGFyZ2V0IGlzIGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lciB0aGF0IGlzIG5vIGxvbmdlciBpbiB0aGUgcGFnZS5cbiAgICAgICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIGZvciB0aGUgdGFyZ2V0IHRvIG5vIGxvbmdlciBiZSBpbiB0aGUgcGFnZSBpZiBpdCBoYXMgYmVlbiByZW1vdmVkIGluIGFuXG4gICAgICAgICAgICAgICAgLy8gZXZlbnQgbGlzdGVuZXIsIHRoaXMgbWlnaHQgaGFwcGVuIGluIGEgQ29udHJvbCB0aGF0IHJlY3JlYXRlcyBpdCdzIGNvbnRlbnQgYmFzZWQgb25cbiAgICAgICAgICAgICAgICAvLyB1c2VyIGludGVyYWN0aW9uIGVpdGhlciBtYW51YWxseSBvciB2aWEgYSByZW5kZXIgaW4gc29tZXRoaW5nIGxpa2UgaHR0cHM6Ly9yZWFjdGpzLm9yZy9cbiAgICAgICAgICAgICAgICAhKHJvb3ROb2RlID09PSBkb2N1bWVudCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IHJvb3ROb2RlKS5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5mcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgdmFyIGludGVyYWN0aW9uc0FycmF5ID0gdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5nZXRBcnJheSgpO1xuICAgICAgICBpZiAodGhpcy5kaXNwYXRjaEV2ZW50KG1hcEJyb3dzZXJFdmVudCkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gaW50ZXJhY3Rpb25zQXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJhY3Rpb24gPSBpbnRlcmFjdGlvbnNBcnJheVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoIWludGVyYWN0aW9uLmdldEFjdGl2ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29udCA9IGludGVyYWN0aW9uLmhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250KSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlUG9zdFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICAvLyBNYW5hZ2UgdGhlIHRpbGUgcXVldWVcbiAgICAgICAgLy8gSW1hZ2UgbG9hZHMgYXJlIGV4cGVuc2l2ZSBhbmQgYSBsaW1pdGVkIHJlc291cmNlLCBzbyB0cnkgdG8gdXNlIHRoZW1cbiAgICAgICAgLy8gZWZmaWNpZW50bHk6XG4gICAgICAgIC8vICogV2hlbiB0aGUgdmlldyBpcyBzdGF0aWMgd2UgYWxsb3cgYSBsYXJnZSBudW1iZXIgb2YgcGFyYWxsZWwgdGlsZSBsb2Fkc1xuICAgICAgICAvLyAgIHRvIGNvbXBsZXRlIHRoZSBmcmFtZSBhcyBxdWlja2x5IGFzIHBvc3NpYmxlLlxuICAgICAgICAvLyAqIFdoZW4gYW5pbWF0aW5nIG9yIGludGVyYWN0aW5nLCBpbWFnZSBsb2FkcyBjYW4gY2F1c2UgamFua3MsIHNvIHdlIHJlZHVjZVxuICAgICAgICAvLyAgIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsb2FkcyBwZXIgZnJhbWUgYW5kIGxpbWl0IHRoZSBudW1iZXIgb2YgcGFyYWxsZWxcbiAgICAgICAgLy8gICB0aWxlIGxvYWRzIHRvIHJlbWFpbiByZWFjdGl2ZSB0byB2aWV3IGNoYW5nZXMgYW5kIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mXG4gICAgICAgIC8vICAgbG9hZGluZyB0aWxlcyB0aGF0IHdpbGwgcXVpY2tseSBkaXNhcHBlYXIgZnJvbSB2aWV3LlxuICAgICAgICB2YXIgdGlsZVF1ZXVlID0gdGhpcy50aWxlUXVldWVfO1xuICAgICAgICBpZiAoIXRpbGVRdWV1ZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHZhciBtYXhUb3RhbExvYWRpbmcgPSB0aGlzLm1heFRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICB2YXIgbWF4TmV3TG9hZHMgPSBtYXhUb3RhbExvYWRpbmc7XG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBoaW50cyA9IGZyYW1lU3RhdGUudmlld0hpbnRzO1xuICAgICAgICAgICAgICAgIGlmIChoaW50c1tWaWV3SGludC5BTklNQVRJTkddIHx8IGhpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG93T25GcmFtZUJ1ZGdldCA9ICFJTUFHRV9ERUNPREUgJiYgRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDg7XG4gICAgICAgICAgICAgICAgICAgIG1heFRvdGFsTG9hZGluZyA9IGxvd09uRnJhbWVCdWRnZXQgPyAwIDogODtcbiAgICAgICAgICAgICAgICAgICAgbWF4TmV3TG9hZHMgPSBsb3dPbkZyYW1lQnVkZ2V0ID8gMCA6IDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpbGVRdWV1ZS5nZXRUaWxlc0xvYWRpbmcoKSA8IG1heFRvdGFsTG9hZGluZykge1xuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5yZXByaW9yaXRpemUoKTsgLy8gRklYTUUgb25seSBjYWxsIGlmIHZpZXcgaGFzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICB0aWxlUXVldWUubG9hZE1vcmVUaWxlcyhtYXhUb3RhbExvYWRpbmcsIG1heE5ld0xvYWRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJhbWVTdGF0ZSAmJlxuICAgICAgICAgICAgdGhpcy5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUpICYmXG4gICAgICAgICAgICAhZnJhbWVTdGF0ZS5hbmltYXRlICYmXG4gICAgICAgICAgICAhdGhpcy50aWxlUXVldWVfLmdldFRpbGVzTG9hZGluZygpICYmXG4gICAgICAgICAgICAhdGhpcy5nZXRMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlJFTkRFUkNPTVBMRVRFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcG9zdFJlbmRlckZ1bmN0aW9ucyA9IHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc187XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBvc3RSZW5kZXJGdW5jdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uc1tpXSh0aGlzLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlU2l6ZUNoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRWaWV3KCkgJiYgIXRoaXMuZ2V0VmlldygpLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLmdldFZpZXcoKS5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVUYXJnZXRDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gdGFyZ2V0IG1heSBiZSB1bmRlZmluZWQsIG51bGwsIGEgc3RyaW5nIG9yIGFuIEVsZW1lbnQuXG4gICAgICAgIC8vIElmIGl0J3MgYSBzdHJpbmcgd2UgY29udmVydCBpdCB0byBhbiBFbGVtZW50IGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICAvLyBJZiBpdCdzIG5vdCBub3cgYW4gRWxlbWVudCB3ZSByZW1vdmUgdGhlIHZpZXdwb3J0IGZyb20gdGhlIERPTS5cbiAgICAgICAgLy8gSWYgaXQncyBhbiBFbGVtZW50IHdlIGFwcGVuZCB0aGUgdmlld3BvcnQgZWxlbWVudCB0byBpdC5cbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQ7XG4gICAgICAgIGlmICh0aGlzLmdldFRhcmdldCgpKSB7XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMua2V5SGFuZGxlcktleXNfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMua2V5SGFuZGxlcktleXNfW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMua2V5SGFuZGxlcktleXNfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNPTlRFWFRNRU5VLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50Xyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5XSEVFTCwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8pO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFuZGxlUmVzaXplXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUkVTSVpFLCB0aGlzLmhhbmRsZVJlc2l6ZV8sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuICAgICAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8pO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18ubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyXy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheUtleV8pO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbmV3IE1hcEJyb3dzZXJFdmVudEhhbmRsZXIodGhpcywgdGhpcy5tb3ZlVG9sZXJhbmNlXyk7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gTWFwQnJvd3NlckV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8uYWRkRXZlbnRMaXN0ZW5lcihNYXBCcm93c2VyRXZlbnRUeXBlW2tleV0sIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ09OVEVYVE1FTlUsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5XSEVFTCwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8sIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTID8geyBwYXNzaXZlOiBmYWxzZSB9IDogZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGtleWJvYXJkRXZlbnRUYXJnZXQgPSAhdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0X1xuICAgICAgICAgICAgICAgID8gdGFyZ2V0RWxlbWVudFxuICAgICAgICAgICAgICAgIDogdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0XztcbiAgICAgICAgICAgIHRoaXMua2V5SGFuZGxlcktleXNfID0gW1xuICAgICAgICAgICAgICAgIGxpc3RlbihrZXlib2FyZEV2ZW50VGFyZ2V0LCBFdmVudFR5cGUuS0VZRE9XTiwgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihrZXlib2FyZEV2ZW50VGFyZ2V0LCBFdmVudFR5cGUuS0VZUFJFU1MsIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxlUmVzaXplXykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzaXplXyA9IHRoaXMudXBkYXRlU2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5SRVNJWkUsIHRoaXMuaGFuZGxlUmVzaXplXywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgICAvLyB1cGRhdGVTaXplIGNhbGxzIHNldFNpemUsIHNvIG5vIG5lZWQgdG8gY2FsbCB0aGlzLnJlbmRlclxuICAgICAgICAvLyBvdXJzZWx2ZXMgaGVyZS5cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVWaWV3Q2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydFNpemVfKCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IGxpc3Rlbih2aWV3LCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbGlzdGVuKHZpZXcsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sIHRoaXMpO1xuICAgICAgICAgICAgdmlldy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18pIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGF5ZXJHcm91cCA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpO1xuICAgICAgICBpZiAobGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gW1xuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllckdyb3VwLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMucmVuZGVyLCB0aGlzKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5yZW5kZXIsIHRoaXMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgcmVuZGVyZWQuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5pc1JlbmRlcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmZyYW1lU3RhdGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVxdWVzdHMgYW4gaW1tZWRpYXRlIHJlbmRlciBpbiBhIHN5bmNocm9ub3VzIG1hbm5lci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXJTeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8pIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5XygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVkcmF3cyBhbGwgdGV4dCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlZHJhd1RleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllclN0YXRlcyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZXNbaV0ubGF5ZXI7XG4gICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSkge1xuICAgICAgICAgICAgICAgIGxheWVyLmdldFJlbmRlcmVyKCkuaGFuZGxlRm9udHNDaGFuZ2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlcXVlc3QgYSBtYXAgcmVuZGVyaW5nIChhdCB0aGUgbmV4dCBhbmltYXRpb24gZnJhbWUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXJfICYmIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBnaXZlbiBjb250cm9sIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgY29udHJvbCAob3IgdW5kZWZpbmVkXG4gICAgICogICAgIGlmIHRoZSBjb250cm9sIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUNvbnRyb2wgPSBmdW5jdGlvbiAoY29udHJvbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb250cm9scygpLnJlbW92ZShjb250cm9sKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gZnJvbSB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byByZW1vdmUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgaW50ZXJhY3Rpb24gKG9yXG4gICAgICogICAgIHVuZGVmaW5lZCBpZiB0aGUgaW50ZXJhY3Rpb24gd2FzIG5vdCBmb3VuZCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkucmVtb3ZlKGludGVyYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIGxheWVyIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGxheWVyIChvciB1bmRlZmluZWQgaWYgdGhlXG4gICAgICogICAgIGxheWVyIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUxheWVyID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICAgICAgcmV0dXJuIGxheWVycy5yZW1vdmUobGF5ZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBnaXZlbiBvdmVybGF5IGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBvdmVybGF5IChvciB1bmRlZmluZWRcbiAgICAgKiAgICAgaWYgdGhlIG92ZXJsYXkgd2FzIG5vdCBmb3VuZCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlT3ZlcmxheSA9IGZ1bmN0aW9uIChvdmVybGF5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE92ZXJsYXlzKCkucmVtb3ZlKG92ZXJsYXkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgVGltZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyRnJhbWVfID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFNpemUoKTtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICAgICAgdmFyIHByZXZpb3VzRnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIC8qKiBAdHlwZSB7P0ZyYW1lU3RhdGV9ICovXG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gbnVsbDtcbiAgICAgICAgaWYgKHNpemUgIT09IHVuZGVmaW5lZCAmJiBoYXNBcmVhKHNpemUpICYmIHZpZXcgJiYgdmlldy5pc0RlZigpKSB7XG4gICAgICAgICAgICB2YXIgdmlld0hpbnRzID0gdmlldy5nZXRIaW50cyh0aGlzLmZyYW1lU3RhdGVfID8gdGhpcy5mcmFtZVN0YXRlXy52aWV3SGludHMgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IHZpZXcuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm06IHRoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fLFxuICAgICAgICAgICAgICAgIGRlY2x1dHRlckl0ZW1zOiBwcmV2aW91c0ZyYW1lU3RhdGVcbiAgICAgICAgICAgICAgICAgICAgPyBwcmV2aW91c0ZyYW1lU3RhdGUuZGVjbHV0dGVySXRlbXNcbiAgICAgICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgICAgICBleHRlbnQ6IGdldEZvclZpZXdBbmRTaXplKHZpZXdTdGF0ZS5jZW50ZXIsIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCB2aWV3U3RhdGUucm90YXRpb24sIHNpemUpLFxuICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmZyYW1lSW5kZXhfKyssXG4gICAgICAgICAgICAgICAgbGF5ZXJJbmRleDogMCxcbiAgICAgICAgICAgICAgICBsYXllclN0YXRlc0FycmF5OiB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCksXG4gICAgICAgICAgICAgICAgcGl4ZWxSYXRpbzogdGhpcy5waXhlbFJhdGlvXyxcbiAgICAgICAgICAgICAgICBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybTogdGhpcy5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8sXG4gICAgICAgICAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uczogW10sXG4gICAgICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgICAgICB0aWxlUXVldWU6IHRoaXMudGlsZVF1ZXVlXyxcbiAgICAgICAgICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICAgICAgICAgIHVzZWRUaWxlczoge30sXG4gICAgICAgICAgICAgICAgdmlld1N0YXRlOiB2aWV3U3RhdGUsXG4gICAgICAgICAgICAgICAgdmlld0hpbnRzOiB2aWV3SGludHMsXG4gICAgICAgICAgICAgICAgd2FudGVkVGlsZXM6IHt9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lU3RhdGVfID0gZnJhbWVTdGF0ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlcl8ucmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmIChmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZS5hbmltYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18sIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucyk7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNGcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vdmVTdGFydCA9ICF0aGlzLnByZXZpb3VzRXh0ZW50XyB8fFxuICAgICAgICAgICAgICAgICAgICAoIWlzRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhZXF1YWxzKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50XykpO1xuICAgICAgICAgICAgICAgIGlmIChtb3ZlU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuTU9WRVNUQVJULCB0aGlzLCBwcmV2aW91c0ZyYW1lU3RhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c0V4dGVudF8gPSBjcmVhdGVPclVwZGF0ZUVtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaWRsZSA9IHRoaXMucHJldmlvdXNFeHRlbnRfICYmXG4gICAgICAgICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gJiZcbiAgICAgICAgICAgICAgICAhZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddICYmXG4gICAgICAgICAgICAgICAgIWVxdWFscyhmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgICAgICAgaWYgKGlkbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFRU5ELCB0aGlzLCBmcmFtZVN0YXRlKSk7XG4gICAgICAgICAgICAgICAgY2xvbmUoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLCBmcmFtZVN0YXRlKSk7XG4gICAgICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZVBvc3RSZW5kZXIuYmluZCh0aGlzKSwgMCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsYXllcmdyb3VwIG9mIHRoaXMgbWFwLlxuICAgICAqIEBwYXJhbSB7TGF5ZXJHcm91cH0gbGF5ZXJHcm91cCBBIGxheWVyIGdyb3VwIGNvbnRhaW5pbmcgdGhlIGxheWVycyBpbiB0aGlzIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldExheWVyR3JvdXAgPSBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5MQVlFUkdST1VQLCBsYXllckdyb3VwKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2l6ZSBvZiB0aGlzIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gc2l6ZSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIG1hcCBpbiB0aGUgRE9NLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlNJWkUsIHNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0YXJnZXQgZWxlbWVudCB0byByZW5kZXIgdGhpcyBtYXAgaW50by5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9IHRhcmdldCBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudFxuICAgICAqICAgICB0aGF0IHRoZSBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlRBUkdFVCwgdGFyZ2V0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmlldyBmb3IgdGhpcyBtYXAuXG4gICAgICogQHBhcmFtIHtWaWV3fSB2aWV3IFRoZSB2aWV3IHRoYXQgY29udHJvbHMgdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRWaWV3ID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuVklFVywgdmlldyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGb3JjZSBhIHJlY2FsY3VsYXRpb24gb2YgdGhlIG1hcCB2aWV3cG9ydCBzaXplLiAgVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW5cbiAgICAgKiB0aGlyZC1wYXJ0eSBjb2RlIGNoYW5nZXMgdGhlIHNpemUgb2YgdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS51cGRhdGVTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuICAgICAgICBpZiAoIXRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U2l6ZSh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldEVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5zZXRTaXplKFtcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoIC1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJMZWZ0V2lkdGgnXSkgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdMZWZ0J10pIC1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nUmlnaHQnXSkgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlclJpZ2h0V2lkdGgnXSksXG4gICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5vZmZzZXRIZWlnaHQgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlclRvcFdpZHRoJ10pIC1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nVG9wJ10pIC1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nQm90dG9tJ10pIC1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJCb3R0b21XaWR0aCddKSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnRTaXplXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVjb21wdXRlcyB0aGUgdmlld3BvcnQgc2l6ZSBhbmQgc2F2ZSBpdCBvbiB0aGUgdmlldyBvYmplY3QgKGlmIGFueSlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUudXBkYXRlVmlld3BvcnRTaXplXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMudmlld3BvcnRfKTtcbiAgICAgICAgICAgIGlmIChjb21wdXRlZFN0eWxlLndpZHRoICYmIGNvbXB1dGVkU3R5bGUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS53aWR0aCwgMTApLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChjb21wdXRlZFN0eWxlLmhlaWdodCwgMTApLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aWV3LnNldFZpZXdwb3J0U2l6ZShzaXplKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFBsdWdnYWJsZU1hcDtcbn0oQmFzZU9iamVjdCkpO1xuLyoqXG4gKiBAcGFyYW0ge01hcE9wdGlvbnN9IG9wdGlvbnMgTWFwIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtNYXBPcHRpb25zSW50ZXJuYWx9IEludGVybmFsIG1hcCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucykge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgKi9cbiAgICB2YXIga2V5Ym9hcmRFdmVudFRhcmdldCA9IG51bGw7XG4gICAgaWYgKG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGtleWJvYXJkRXZlbnRUYXJnZXQgPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldClcbiAgICAgICAgICAgICAgICA6IG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAqL1xuICAgIHZhciB2YWx1ZXMgPSB7fTtcbiAgICB2YXIgbGF5ZXJHcm91cCA9IG9wdGlvbnMubGF5ZXJzICYmXG4gICAgICAgIHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5sYXllcnMpLmdldExheWVycykgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyAvKiogQHR5cGUge0xheWVyR3JvdXB9ICovIChvcHRpb25zLmxheWVycylcbiAgICAgICAgOiBuZXcgTGF5ZXJHcm91cCh7IGxheWVyczogLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5sYXllcnMpIH0pO1xuICAgIHZhbHVlc1tNYXBQcm9wZXJ0eS5MQVlFUkdST1VQXSA9IGxheWVyR3JvdXA7XG4gICAgdmFsdWVzW01hcFByb3BlcnR5LlRBUkdFVF0gPSBvcHRpb25zLnRhcmdldDtcbiAgICB2YWx1ZXNbTWFwUHJvcGVydHkuVklFV10gPVxuICAgICAgICBvcHRpb25zLnZpZXcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudmlldyA6IG5ldyBWaWV3KCk7XG4gICAgdmFyIGNvbnRyb2xzO1xuICAgIGlmIChvcHRpb25zLmNvbnRyb2xzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5jb250cm9scykpIHtcbiAgICAgICAgICAgIGNvbnRyb2xzID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5jb250cm9scy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMuY29udHJvbHMpLmdldEFycmF5KSA9PT0gJ2Z1bmN0aW9uJywgNDcpOyAvLyBFeHBlY3RlZCBgY29udHJvbHNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIGNvbnRyb2xzID0gLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5jb250cm9scyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGludGVyYWN0aW9ucztcbiAgICBpZiAob3B0aW9ucy5pbnRlcmFjdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmludGVyYWN0aW9ucykpIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMuaW50ZXJhY3Rpb25zLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5pbnRlcmFjdGlvbnMpLmdldEFycmF5KSA9PT1cbiAgICAgICAgICAgICAgICAnZnVuY3Rpb24nLCA0OCk7IC8vIEV4cGVjdGVkIGBpbnRlcmFjdGlvbnNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIGludGVyYWN0aW9ucyA9IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMuaW50ZXJhY3Rpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgb3ZlcmxheXM7XG4gICAgaWYgKG9wdGlvbnMub3ZlcmxheXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLm92ZXJsYXlzKSkge1xuICAgICAgICAgICAgb3ZlcmxheXMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLm92ZXJsYXlzLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5vdmVybGF5cykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0OSk7IC8vIEV4cGVjdGVkIGBvdmVybGF5c2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgICAgICAgb3ZlcmxheXMgPSBvcHRpb25zLm92ZXJsYXlzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvdmVybGF5cyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRyb2xzOiBjb250cm9scyxcbiAgICAgICAgaW50ZXJhY3Rpb25zOiBpbnRlcmFjdGlvbnMsXG4gICAgICAgIGtleWJvYXJkRXZlbnRUYXJnZXQ6IGtleWJvYXJkRXZlbnRUYXJnZXQsXG4gICAgICAgIG92ZXJsYXlzOiBvdmVybGF5cyxcbiAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IFBsdWdnYWJsZU1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBsdWdnYWJsZU1hcC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL0NvbnRyb2xcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBNYXBFdmVudFR5cGUgZnJvbSAnLi4vTWFwRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHJlbW92ZU5vZGUgfSBmcm9tICcuLi9kb20uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBbZWxlbWVudF0gVGhlIGVsZW1lbnQgaXMgdGhlIGNvbnRyb2wnc1xuICogY29udGFpbmVyIGVsZW1lbnQuIFRoaXMgb25seSBuZWVkcyB0byBiZSBzcGVjaWZpZWQgaWYgeW91J3JlIGRldmVsb3BpbmdcbiAqIGEgY3VzdG9tIGNvbnRyb2wuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuXG4gKiB0aGUgY29udHJvbCBzaG91bGQgYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWBcbiAqIGNhbGxiYWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnRcbiAqIHRoZSBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCBpcyBhIHZpc2libGUgd2lkZ2V0IHdpdGggYSBET00gZWxlbWVudCBpbiBhIGZpeGVkIHBvc2l0aW9uIG9uIHRoZVxuICogc2NyZWVuLiBUaGV5IGNhbiBpbnZvbHZlIHVzZXIgaW5wdXQgKGJ1dHRvbnMpLCBvciBiZSBpbmZvcm1hdGlvbmFsIG9ubHk7XG4gKiB0aGUgcG9zaXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyBDU1MuIEJ5IGRlZmF1bHQgdGhlc2UgYXJlIHBsYWNlZCBpbiB0aGVcbiAqIGNvbnRhaW5lciB3aXRoIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAsIGJ1dCBjYW4gdXNlXG4gKiBhbnkgb3V0c2lkZSBET00gZWxlbWVudC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBjb250cm9scy4gWW91IGNhbiB1c2UgaXQgZm9yIHNpbXBsZSBjdXN0b21cbiAqIGNvbnRyb2xzIGJ5IGNyZWF0aW5nIHRoZSBlbGVtZW50IHdpdGggbGlzdGVuZXJzLCBjcmVhdGluZyBhbiBpbnN0YW5jZTpcbiAqIGBgYGpzXG4gKiB2YXIgbXlDb250cm9sID0gbmV3IENvbnRyb2woe2VsZW1lbnQ6IG15RWxlbWVudH0pO1xuICogYGBgXG4gKiBhbmQgdGhlbiBhZGRpbmcgdGhpcyB0byB0aGUgbWFwLlxuICpcbiAqIFRoZSBtYWluIGFkdmFudGFnZSBvZiBoYXZpbmcgdGhpcyBhcyBhIGNvbnRyb2wgcmF0aGVyIHRoYW4gYSBzaW1wbGUgc2VwYXJhdGVcbiAqIERPTSBlbGVtZW50IGlzIHRoYXQgcHJldmVudGluZyBwcm9wYWdhdGlvbiBpcyBoYW5kbGVkIGZvciB5b3UuIENvbnRyb2xzXG4gKiB3aWxsIGFsc28gYmUgb2JqZWN0cyBpbiBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSwgc28geW91IGNhbiB1c2UgdGhlaXIgbWV0aG9kcy5cbiAqXG4gKiBZb3UgY2FuIGFsc28gZXh0ZW5kIHRoaXMgYmFzZSBmb3IgeW91ciBvd24gY29udHJvbCBjbGFzcy4gU2VlXG4gKiBleGFtcGxlcy9jdXN0b20tY29udHJvbHMgZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIGRvIHRoaXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgQ29udHJvbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29udHJvbCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgQ29udHJvbCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbnRyb2wob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudDtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgIW9wdGlvbnMudGFyZ2V0ICYmICFlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudCA/IGVsZW1lbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxpc3RlbmVyS2V5cyA9IFtdO1xuICAgICAgICBpZiAob3B0aW9ucy5yZW5kZXIpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0VGFyZ2V0KG9wdGlvbnMudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY29udHJvbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICAgKiB0aGUgbWFwIGhlcmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmxpc3RlbmVyS2V5c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5tYXBfID0gbWFwO1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXRfXG4gICAgICAgICAgICAgICAgPyB0aGlzLnRhcmdldF9cbiAgICAgICAgICAgICAgICA6IG1hcC5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50KCk7XG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlciAhPT0gVk9JRCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzLnB1c2gobGlzdGVuKG1hcCwgTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMucmVuZGVyLCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIGNvbnRyb2wuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChtYXBFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBzZXQgYSB0YXJnZXQgZWxlbWVudCBmb3IgdGhlIGNvbnRyb2wuIEl0IGhhcyBub1xuICAgICAqIGVmZmVjdCBpZiBpdCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGNvbnRyb2wgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIG1hcCAoaS5lLlxuICAgICAqIGFmdGVyIGBzZXRNYXBgIGlzIGNhbGxlZCBvbiB0aGUgY29udHJvbCkuIElmIG5vIGB0YXJnZXRgIGlzIHNldCBpbiB0aGVcbiAgICAgKiBvcHRpb25zIHBhc3NlZCB0byB0aGUgY29udHJvbCBjb25zdHJ1Y3RvciBhbmQgaWYgYHNldFRhcmdldGAgaXMgbm90IGNhbGxlZFxuICAgICAqIHRoZW4gdGhlIGNvbnRyb2wgaXMgYWRkZWQgdG8gdGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfSB0YXJnZXQgVGFyZ2V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0XyA9XG4gICAgICAgICAgICB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29udHJvbDtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQ29udHJvbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnRyb2wuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9BdHRyaWJ1dGlvblxuICovXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IENMQVNTX0NPTExBUFNFRCwgQ0xBU1NfQ09OVFJPTCwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVxdWFscyB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IHJlbW92ZUNoaWxkcmVuLCByZXBsYWNlTm9kZSB9IGZyb20gJy4uL2RvbS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1hdHRyaWJ1dGlvbiddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91XG4gKiB3YW50IHRoZSBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzXG4gKiB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbGxhcHNpYmxlXSBTcGVjaWZ5IGlmIGF0dHJpYnV0aW9ucyBjYW5cbiAqIGJlIGNvbGxhcHNlZC4gSWYgbm90IHNwZWNpZmllZCwgc291cmNlcyBjb250cm9sIHRoaXMgYmVoYXZpb3Igd2l0aCB0aGVpclxuICogYGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlYCBzZXR0aW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29sbGFwc2VkPXRydWVdIFNwZWNpZnkgaWYgYXR0cmlidXRpb25zIHNob3VsZFxuICogYmUgY29sbGFwc2VkIGF0IHN0YXJ0dXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RpcExhYmVsPSdBdHRyaWJ1dGlvbnMnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2xhYmVsPSdpJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZVxuICogY29sbGFwc2VkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbY29sbGFwc2VMYWJlbD0nwrsnXSBUZXh0IGxhYmVsIHRvIHVzZVxuICogZm9yIHRoZSBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuXG4gKiB0aGUgY29udHJvbCBzaG91bGQgYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWBcbiAqIGNhbGxiYWNrLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENvbnRyb2wgdG8gc2hvdyBhbGwgdGhlIGF0dHJpYnV0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGxheWVyIHNvdXJjZXNcbiAqIGluIHRoZSBtYXAuIFRoaXMgY29udHJvbCBpcyBvbmUgb2YgdGhlIGRlZmF1bHQgY29udHJvbHMgaW5jbHVkZWQgaW4gbWFwcy5cbiAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBzaG93IGluIHRoZSBib3R0b20gcmlnaHQgcG9ydGlvbiBvZiB0aGUgbWFwLCBidXQgdGhpcyBjYW5cbiAqIGJlIGNoYW5nZWQgYnkgdXNpbmcgYSBjc3Mgc2VsZWN0b3IgZm9yIGAub2wtYXR0cmlidXRpb25gLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEF0dHJpYnV0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBdHRyaWJ1dGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBBdHRyaWJ1dGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEF0dHJpYnV0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlcixcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bEVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29sbGFwc2VkXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbGxhcHNlZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xsYXBzZWQgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVycmlkZUNvbGxhcHNpYmxlXyA9IG9wdGlvbnMuY29sbGFwc2libGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29sbGFwc2libGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29sbGFwc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2libGUgOiB0cnVlO1xuICAgICAgICBpZiAoIV90aGlzLmNvbGxhcHNpYmxlXykge1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VkXyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtYXR0cmlidXRpb24nO1xuICAgICAgICB2YXIgdGlwTGFiZWwgPSBvcHRpb25zLnRpcExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpcExhYmVsIDogJ0F0dHJpYnV0aW9ucyc7XG4gICAgICAgIHZhciBjb2xsYXBzZUxhYmVsID0gb3B0aW9ucy5jb2xsYXBzZUxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlTGFiZWwgOiAnXFx1MDBCQic7XG4gICAgICAgIGlmICh0eXBlb2YgY29sbGFwc2VMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXy50ZXh0Q29udGVudCA9IGNvbGxhcHNlTGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGNvbGxhcHNlTGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdpJztcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8gPSBsYWJlbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWN0aXZlTGFiZWwgPSBfdGhpcy5jb2xsYXBzaWJsZV8gJiYgIV90aGlzLmNvbGxhcHNlZF8gPyBfdGhpcy5jb2xsYXBzZUxhYmVsXyA6IF90aGlzLmxhYmVsXztcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGl0bGUgPSB0aXBMYWJlbDtcbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGFjdGl2ZUxhYmVsKTtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMSUNLLCBfdGhpcy5oYW5kbGVDbGlja18uYmluZChfdGhpcyksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIENMQVNTX1VOU0VMRUNUQUJMRSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgQ0xBU1NfQ09OVFJPTCArXG4gICAgICAgICAgICAoX3RoaXMuY29sbGFwc2VkXyAmJiBfdGhpcy5jb2xsYXBzaWJsZV8gPyAnICcgKyBDTEFTU19DT0xMQVBTRUQgOiAnJykgK1xuICAgICAgICAgICAgKF90aGlzLmNvbGxhcHNpYmxlXyA/ICcnIDogJyBvbC11bmNvbGxhcHNpYmxlJyk7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLnVsRWxlbWVudF8pO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgY3VycmVudGx5IHJlbmRlcmVkIHJlc29sdXRpb25zLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb2xsZWN0IGEgbGlzdCBvZiB2aXNpYmxlIGF0dHJpYnV0aW9ucyBhbmQgc2V0IHRoZSBjb2xsYXBzaWJsZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEF0dHJpYnV0aW9ucy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5jb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIHRvIGRldGVybWluZSBpZiBhbiBhdHRyaWJ1dGlvbiBhbHJlYWR5IGV4aXN0cy5cbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBsb29rdXAgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB2aXNpYmxlIGF0dHJpYnV0aW9ucy5cbiAgICAgICAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdmlzaWJsZUF0dHJpYnV0aW9ucyA9IFtdO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzQXJyYXlbaV07XG4gICAgICAgICAgICBpZiAoIWluVmlldyhsYXllclN0YXRlLCBmcmFtZVN0YXRlLnZpZXdTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9ICovIChsYXllclN0YXRlLmxheWVyKS5nZXRTb3VyY2UoKTtcbiAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRpb25HZXR0ZXIgPSBzb3VyY2UuZ2V0QXR0cmlidXRpb25zKCk7XG4gICAgICAgICAgICBpZiAoIWF0dHJpYnV0aW9uR2V0dGVyKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRpb25zID0gYXR0cmlidXRpb25HZXR0ZXIoZnJhbWVTdGF0ZSk7XG4gICAgICAgICAgICBpZiAoIWF0dHJpYnV0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfICYmXG4gICAgICAgICAgICAgICAgc291cmNlLmdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb2xsYXBzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zW2pdIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVBdHRyaWJ1dGlvbnMucHVzaChhdHRyaWJ1dGlvbnNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwW2F0dHJpYnV0aW9uc1tqXV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUF0dHJpYnV0aW9ucy5wdXNoKGF0dHJpYnV0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFthdHRyaWJ1dGlvbnNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpc2libGVBdHRyaWJ1dGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS51cGRhdGVFbGVtZW50XyA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhdHRyaWJ1dGlvbnMgPSB0aGlzLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfKGZyYW1lU3RhdGUpO1xuICAgICAgICB2YXIgdmlzaWJsZSA9IGF0dHJpYnV0aW9ucy5sZW5ndGggPiAwO1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfICE9IHZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gdmlzaWJsZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdmlzaWJsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXF1YWxzKGF0dHJpYnV0aW9ucywgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy51bEVsZW1lbnRfKTtcbiAgICAgICAgLy8gYXBwZW5kIHRoZSBhdHRyaWJ1dGlvbnNcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYXR0cmlidXRpb25zW2ldO1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnRfLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfID0gYXR0cmlidXRpb25zO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuaGFuZGxlVG9nZ2xlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoQ0xBU1NfQ09MTEFQU0VEKTtcbiAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VkXykge1xuICAgICAgICAgICAgcmVwbGFjZU5vZGUodGhpcy5jb2xsYXBzZUxhYmVsXywgdGhpcy5sYWJlbF8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVwbGFjZU5vZGUodGhpcy5sYWJlbF8sIHRoaXMuY29sbGFwc2VMYWJlbF8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sbGFwc2VkXyA9ICF0aGlzLmNvbGxhcHNlZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBhdHRyaWJ1dGlvbiBpcyBjb2xsYXBzaWJsZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNpYmxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuZ2V0Q29sbGFwc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxhcHNpYmxlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoZSBhdHRyaWJ1dGlvbiBzaG91bGQgYmUgY29sbGFwc2libGUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb2xsYXBzaWJsZSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5zZXRDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uIChjb2xsYXBzaWJsZSkge1xuICAgICAgICBpZiAodGhpcy5jb2xsYXBzaWJsZV8gPT09IGNvbGxhcHNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2xsYXBzaWJsZV8gPSBjb2xsYXBzaWJsZTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ29sLXVuY29sbGFwc2libGUnKTtcbiAgICAgICAgaWYgKCFjb2xsYXBzaWJsZSAmJiB0aGlzLmNvbGxhcHNlZF8pIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb2xsYXBzZSBvciBleHBhbmQgdGhlIGF0dHJpYnV0aW9uIGFjY29yZGluZyB0byB0aGUgcGFzc2VkIHBhcmFtZXRlci4gV2lsbFxuICAgICAqIG5vdCBkbyBhbnl0aGluZyBpZiB0aGUgYXR0cmlidXRpb24gaXNuJ3QgY29sbGFwc2libGUgb3IgaWYgdGhlIGN1cnJlbnRcbiAgICAgKiBjb2xsYXBzZWQgc3RhdGUgaXMgYWxyZWFkeSB0aGUgb25lIHJlcXVlc3RlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxhcHNlZCBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuc2V0Q29sbGFwc2VkID0gZnVuY3Rpb24gKGNvbGxhcHNlZCkge1xuICAgICAgICBpZiAoIXRoaXMuY29sbGFwc2libGVfIHx8IHRoaXMuY29sbGFwc2VkXyA9PT0gY29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYHRydWVgIHdoZW4gdGhlIGF0dHJpYnV0aW9uIGlzIGN1cnJlbnRseSBjb2xsYXBzZWQgb3IgYGZhbHNlYFxuICAgICAqIG90aGVyd2lzZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuZ2V0Q29sbGFwc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsYXBzZWRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBhdHRyaWJ1dGlvbiBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50XyhtYXBFdmVudC5mcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIHJldHVybiBBdHRyaWJ1dGlvbjtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgQXR0cmlidXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdHRyaWJ1dGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1JvdGF0ZVxuICovXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IENMQVNTX0NPTlRST0wsIENMQVNTX0hJRERFTiwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtcm90YXRlJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW2xhYmVsPSfih6cnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J1Jlc2V0IHJvdGF0aW9uJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSByb3RhdGUgdGlwLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvSGlkZT10cnVlXSBIaWRlIHRoZSBjb250cm9sIHdoZW4gcm90YXRpb24gaXMgMC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgc2hvdWxkXG4gKiBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTp2b2lkfSBbcmVzZXROb3J0aF0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgaXMgY2xpY2tlZC5cbiAqIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBgcmVzZXROb3J0aGAuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBidXR0b24gY29udHJvbCB0byByZXNldCByb3RhdGlvbiB0byAwLlxuICogVG8gc3R5bGUgdGhpcyBjb250cm9sIHVzZSBjc3Mgc2VsZWN0b3IgYC5vbC1yb3RhdGVgLiBBIGAub2wtaGlkZGVuYCBjc3NcbiAqIHNlbGVjdG9yIGlzIGFkZGVkIHRvIHRoZSBidXR0b24gd2hlbiB0aGUgcm90YXRpb24gaXMgMC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBSb3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBSb3RhdGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSb3RhdGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1yb3RhdGUnO1xuICAgICAgICB2YXIgbGFiZWwgPSBvcHRpb25zLmxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxhYmVsIDogJ1xcdTIxRTcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFiZWxfID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy5jbGFzc05hbWUgPSAnb2wtY29tcGFzcyc7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8udGV4dENvbnRlbnQgPSBsYWJlbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLmNsYXNzTGlzdC5hZGQoJ29sLWNvbXBhc3MnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlwTGFiZWwgPSBvcHRpb25zLnRpcExhYmVsID8gb3B0aW9ucy50aXBMYWJlbCA6ICdSZXNldCByb3RhdGlvbic7XG4gICAgICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IGNsYXNzTmFtZSArICctcmVzZXQnO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGl0bGUgPSB0aXBMYWJlbDtcbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKF90aGlzLmxhYmVsXyk7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMpLCBmYWxzZSk7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50O1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgX3RoaXMuY2FsbFJlc2V0Tm9ydGhfID0gb3B0aW9ucy5yZXNldE5vcnRoID8gb3B0aW9ucy5yZXNldE5vcnRoIDogdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmF1dG9IaWRlXyA9IG9wdGlvbnMuYXV0b0hpZGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXV0b0hpZGUgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yb3RhdGlvbl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChfdGhpcy5hdXRvSGlkZV8pIHtcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSb3RhdGUucHJvdG90eXBlLmhhbmRsZUNsaWNrXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAodGhpcy5jYWxsUmVzZXROb3J0aF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jYWxsUmVzZXROb3J0aF8oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXROb3J0aF8oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSb3RhdGUucHJvdG90eXBlLnJlc2V0Tm9ydGhfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgICAgICAgLy8gdXBvbiBpdFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyA+IDAgJiYgcm90YXRpb24gJSAoMiAqIE1hdGguUEkpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRSb3RhdGlvbigwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSByb3RhdGUgY29udHJvbCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIFJvdGF0ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG1hcEV2ZW50KSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJvdGF0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucm90YXRpb247XG4gICAgICAgIGlmIChyb3RhdGlvbiAhPSB0aGlzLnJvdGF0aW9uXykge1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9ICdyb3RhdGUoJyArIHJvdGF0aW9uICsgJ3JhZCknO1xuICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0hpZGVfKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5zID0gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19ISURERU4pO1xuICAgICAgICAgICAgICAgIGlmICghY29udGFpbnMgJiYgcm90YXRpb24gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnMgJiYgcm90YXRpb24gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhYmVsXy5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICB9O1xuICAgIHJldHVybiBSb3RhdGU7XG59KENvbnRyb2wpKTtcbmV4cG9ydCBkZWZhdWx0IFJvdGF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJvdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1pvb21cbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19DT05UUk9MLCBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLXpvb20nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbem9vbUluTGFiZWw9JysnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHpvb20taW5cbiAqIGJ1dHRvbi4gSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW3pvb21PdXRMYWJlbD0nLSddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1vdXQgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21JblRpcExhYmVsPSdab29tIGluJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tT3V0VGlwTGFiZWw9J1pvb20gb3V0J10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBkZWx0YSBhcHBsaWVkIG9uIGVhY2ggY2xpY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHdpdGggMiBidXR0b25zLCBvbmUgZm9yIHpvb20gaW4gYW5kIG9uZSBmb3Igem9vbSBvdXQuXG4gKiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIG9mIGEgbWFwLiBUbyBzdHlsZSB0aGlzIGNvbnRyb2xcbiAqIHVzZSBjc3Mgc2VsZWN0b3JzIGAub2wtem9vbS1pbmAgYW5kIGAub2wtem9vbS1vdXRgLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFpvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgWm9vbSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFpvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLXpvb20nO1xuICAgICAgICB2YXIgZGVsdGEgPSBvcHRpb25zLmRlbHRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRlbHRhIDogMTtcbiAgICAgICAgdmFyIHpvb21JbkxhYmVsID0gb3B0aW9ucy56b29tSW5MYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5MYWJlbCA6ICcrJztcbiAgICAgICAgdmFyIHpvb21PdXRMYWJlbCA9IG9wdGlvbnMuem9vbU91dExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21PdXRMYWJlbCA6ICdcXHUyMjEyJztcbiAgICAgICAgdmFyIHpvb21JblRpcExhYmVsID0gb3B0aW9ucy56b29tSW5UaXBMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5UaXBMYWJlbCA6ICdab29tIGluJztcbiAgICAgICAgdmFyIHpvb21PdXRUaXBMYWJlbCA9IG9wdGlvbnMuem9vbU91dFRpcExhYmVsICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy56b29tT3V0VGlwTGFiZWxcbiAgICAgICAgICAgIDogJ1pvb20gb3V0JztcbiAgICAgICAgdmFyIGluRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBpbkVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lICsgJy1pbic7XG4gICAgICAgIGluRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIGluRWxlbWVudC50aXRsZSA9IHpvb21JblRpcExhYmVsO1xuICAgICAgICBpbkVsZW1lbnQuYXBwZW5kQ2hpbGQodHlwZW9mIHpvb21JbkxhYmVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tSW5MYWJlbClcbiAgICAgICAgICAgIDogem9vbUluTGFiZWwpO1xuICAgICAgICBpbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzLCBkZWx0YSksIGZhbHNlKTtcbiAgICAgICAgdmFyIG91dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgb3V0RWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyAnLW91dCc7XG4gICAgICAgIG91dEVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBvdXRFbGVtZW50LnRpdGxlID0gem9vbU91dFRpcExhYmVsO1xuICAgICAgICBvdXRFbGVtZW50LmFwcGVuZENoaWxkKHR5cGVvZiB6b29tT3V0TGFiZWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHpvb21PdXRMYWJlbClcbiAgICAgICAgICAgIDogem9vbU91dExhYmVsKTtcbiAgICAgICAgb3V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMsIC1kZWx0YSksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgKyAnICcgKyBDTEFTU19VTlNFTEVDVEFCTEUgKyAnICcgKyBDTEFTU19DT05UUk9MO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChpbkVsZW1lbnQpO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG91dEVsZW1lbnQpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFpvb20gZGVsdGEuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBab29tLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiAoZGVsdGEsIGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuem9vbUJ5RGVsdGFfKGRlbHRhKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgWm9vbS5wcm90b3R5cGUuem9vbUJ5RGVsdGFfID0gZnVuY3Rpb24gKGRlbHRhKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgLy8gdGhlIG1hcCBkb2VzIG5vdCBoYXZlIGEgdmlldywgc28gd2UgY2FuJ3QgYWN0XG4gICAgICAgICAgICAvLyB1cG9uIGl0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN1cnJlbnRab29tID0gdmlldy5nZXRab29tKCk7XG4gICAgICAgIGlmIChjdXJyZW50Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbmV3Wm9vbSA9IHZpZXcuZ2V0Q29uc3RyYWluZWRab29tKGN1cnJlbnRab29tICsgZGVsdGEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25fID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICB6b29tOiBuZXdab29tLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZXcuc2V0Wm9vbShuZXdab29tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFpvb207XG59KENvbnRyb2wpKTtcbmV4cG9ydCBkZWZhdWx0IFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBBQ1RJVkU6ICdhY3RpdmUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb25Qcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IGVhc2VPdXQsIGxpbmVhciB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLiBUaGUgaW50ZXJhY3Rpb25zXG4gKiBhcmUgdHJhdmVyc2VkIGluIHJldmVyc2Ugb3JkZXIgb2YgdGhlIGludGVyYWN0aW9ucyBjb2xsZWN0aW9uIG9mIHRoZSBtYXAuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogVXNlciBhY3Rpb25zIHRoYXQgY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgbWFwLiBTb21lIGFyZSBzaW1pbGFyIHRvIGNvbnRyb2xzLFxuICogYnV0IGFyZSBub3QgYXNzb2NpYXRlZCB3aXRoIGEgRE9NIGVsZW1lbnQuXG4gKiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfSBpc1xuICogZnVuY3Rpb25hbGx5IHRoZSBzYW1lIGFzIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LCBidXQgdHJpZ2dlcmVkXG4gKiBieSBhIGtleWJvYXJkIGV2ZW50IG5vdCBhIGJ1dHRvbiBlbGVtZW50IGV2ZW50LlxuICogQWx0aG91Z2ggaW50ZXJhY3Rpb25zIGRvIG5vdCBoYXZlIGEgRE9NIGVsZW1lbnQsIHNvbWUgb2YgdGhlbSBkbyByZW5kZXJcbiAqIHZlY3RvcnMgYW5kIHNvIGFyZSB2aXNpYmxlIG9uIHRoZSBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBJbnRlcmFjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW50ZXJhY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtJbnRlcmFjdGlvbk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEludGVyYWN0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIGlmIChvcHRfb3B0aW9ucyAmJiBvcHRfb3B0aW9ucy5oYW5kbGVFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlRXZlbnQgPSBvcHRfb3B0aW9ucy5oYW5kbGVFdmVudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG51bGw7XG4gICAgICAgIF90aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgaW50ZXJhY3Rpb24gaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyYWN0aW9uIGlzIGFjdGl2ZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldEFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnRlcmFjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZSBvciBkZWFjdGl2YXRlIHRoZSBpbnRlcmFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFjdGl2ZSBBY3RpdmUuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldEFjdGl2ZSA9IGZ1bmN0aW9uIChhY3RpdmUpIHtcbiAgICAgICAgdGhpcy5zZXQoSW50ZXJhY3Rpb25Qcm9wZXJ0eS5BQ1RJVkUsIGFjdGl2ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGludGVyYWN0aW9uIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAgICogU3ViY2xhc3NlcyBtYXkgc2V0IHVwIGV2ZW50IGhhbmRsZXJzIHRvIGdldCBub3RpZmllZCBhYm91dCBjaGFuZ2VzIHRvXG4gICAgICogdGhlIG1hcCBoZXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgdGhpcy5tYXBfID0gbWFwO1xuICAgIH07XG4gICAgcmV0dXJuIEludGVyYWN0aW9uO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZGVsdGEgRGVsdGEuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhbih2aWV3LCBkZWx0YSwgb3B0X2R1cmF0aW9uKSB7XG4gICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB2aWV3LmdldENlbnRlckludGVybmFsKCk7XG4gICAgaWYgKGN1cnJlbnRDZW50ZXIpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdICsgZGVsdGFbMF0sIGN1cnJlbnRDZW50ZXJbMV0gKyBkZWx0YVsxXV07XG4gICAgICAgIHZpZXcuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDI1MCxcbiAgICAgICAgICAgIGVhc2luZzogbGluZWFyLFxuICAgICAgICAgICAgY2VudGVyOiB2aWV3LmdldENvbnN0cmFpbmVkQ2VudGVyKGNlbnRlciksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YSBmcm9tIHByZXZpb3VzIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgQW5jaG9yIGNvb3JkaW5hdGUgaW4gdGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIG9wdF9hbmNob3IsIG9wdF9kdXJhdGlvbikge1xuICAgIHZhciBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgIGlmIChjdXJyZW50Wm9vbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG5ld1pvb20gPSB2aWV3LmdldENvbnN0cmFpbmVkWm9vbShjdXJyZW50Wm9vbSArIGRlbHRhKTtcbiAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbkZvclpvb20obmV3Wm9vbSk7XG4gICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIHJlc29sdXRpb246IG5ld1Jlc29sdXRpb24sXG4gICAgICAgIGFuY2hvcjogb3B0X2FuY2hvcixcbiAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2R1cmF0aW9uIDogMjUwLFxuICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCBJbnRlcmFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVyYWN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbVxuICovXG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgem9vbUJ5RGVsdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGRvdWJsZSBjbGljay5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSBieSBkb3VibGUtY2xpY2tpbmcgb24gdGhlIG1hcC5cbiAqIEBhcGlcbiAqL1xudmFyIERvdWJsZUNsaWNrWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRG91YmxlQ2xpY2tab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRG91YmxlQ2xpY2tab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGFcbiAgICAgKiBkb3VibGVjbGljaykgYW5kIGV2ZW50dWFsbHkgem9vbXMgdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqL1xuICAgIERvdWJsZUNsaWNrWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICAgICAgICAgIHZhciBicm93c2VyRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGJyb3dzZXJFdmVudC5zaGlmdEtleSA/IC10aGlzLmRlbHRhXyA6IHRoaXMuZGVsdGFfO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIGFuY2hvciwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgbWFwQnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIERvdWJsZUNsaWNrWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERvdWJsZUNsaWNrWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURvdWJsZUNsaWNrWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qb2ludGVyXG4gKi9cbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgZ2V0VmFsdWVzIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZURvd25FdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZG93blwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIHRoZW4gYSBkcmFnXG4gKiBzZXF1ZW5jZSBpcyBzdGFydGVkLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW2hhbmRsZURyYWdFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZHJhZ1wiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzXG4gKiBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZUV2ZW50XVxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGVcbiAqIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9uc1xuICogY2hhaW4uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbaGFuZGxlTW92ZUV2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJtb3ZlXCIgZXZlbnRzLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBcIm1vdmVcIiBldmVudHMuXG4gKiBUaGlzIGZ1bmN0aW9ucyBpcyBhbHNvIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLCBzbyBkdXJpbmcgYSBkcmFnXG4gKiBzZXF1ZW5jZSBib3RoIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCBmdW5jdGlvbiBhbmQgdGhpcyBmdW5jdGlvbiBhcmUgY2FsbGVkLlxuICogSWYgYGhhbmRsZURvd25FdmVudGAgaXMgZGVmaW5lZCBhbmQgaXQgcmV0dXJucyB0cnVlIHRoaXMgZnVuY3Rpb24gd2lsbCBub3RcbiAqIGJlIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZVVwRXZlbnRdXG4gKiAgRnVuY3Rpb24gaGFuZGxpbmcgXCJ1cFwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGVuIHRoZVxuICogY3VycmVudCBkcmFnIHNlcXVlbmNlIGlzIHN0b3BwZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOmJvb2xlYW59IFtzdG9wRG93bl1cbiAqIFNob3VsZCB0aGUgZG93biBldmVudCBiZSBwcm9wYWdhdGVkIHRvIG90aGVyIGludGVyYWN0aW9ucywgb3Igc2hvdWxkIGJlXG4gKiBzdG9wcGVkP1xuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgdGhhdCBjYWxscyB1c2VyLWRlZmluZWQgZnVuY3Rpb25zIG9uIGBkb3duYCwgYG1vdmVgIGFuZCBgdXBgXG4gKiBldmVudHMuIFRoaXMgY2xhc3MgYWxzbyBtYW5hZ2VzIFwiZHJhZyBzZXF1ZW5jZXNcIi5cbiAqXG4gKiBXaGVuIHRoZSBgaGFuZGxlRG93bkV2ZW50YCB1c2VyIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGEgZHJhZyBzZXF1ZW5jZSBpc1xuICogc3RhcnRlZC4gRHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSB0aGUgYGhhbmRsZURyYWdFdmVudGAgdXNlciBmdW5jdGlvbiBpc1xuICogY2FsbGVkIG9uIGBtb3ZlYCBldmVudHMuIFRoZSBkcmFnIHNlcXVlbmNlIGVuZHMgd2hlbiB0aGUgYGhhbmRsZVVwRXZlbnRgXG4gKiB1c2VyIGZ1bmN0aW9uIGlzIGNhbGxlZCBhbmQgcmV0dXJucyBgZmFsc2VgLlxuICogQGFwaVxuICovXG52YXIgUG9pbnRlckludGVyYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2ludGVySW50ZXJhY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2ludGVySW50ZXJhY3Rpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIChvcHRpb25zKSkgfHwgdGhpcztcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlRG93bkV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVEb3duRXZlbnQgPSBvcHRpb25zLmhhbmRsZURvd25FdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVEcmFnRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZURyYWdFdmVudCA9IG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZU1vdmVFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlTW92ZUV2ZW50ID0gb3B0aW9ucy5oYW5kbGVNb3ZlRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlVXBFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlVXBFdmVudCA9IG9wdGlvbnMuaGFuZGxlVXBFdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgICAgICAgX3RoaXMuc3RvcERvd24gPSBvcHRpb25zLnN0b3BEb3duO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBQb2ludGVyRXZlbnQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2tlZFBvaW50ZXJzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFBvaW50ZXJFdmVudD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldFBvaW50ZXJzID0gW107XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBudW1iZXIgb2YgcG9pbnRlcnMgaW52b2x2ZWQgaW4gdGhlIGludGVyYWN0aW9uLFxuICAgICAqIGUuZy4gYDJgIHdoZW4gdHdvIGZpbmdlcnMgYXJlIHVzZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbnVtYmVyIG9mIHBvaW50ZXJzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldFBvaW50ZXJDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBhbmQgbWF5IGNhbGwgaW50b1xuICAgICAqIG90aGVyIGZ1bmN0aW9ucywgaWYgZXZlbnQgc2VxdWVuY2VzIGxpa2UgZS5nLiAnZHJhZycgb3IgJ2Rvd24tdXAnIGV0Yy4gYXJlXG4gICAgICogZGV0ZWN0ZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCFtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0b3BFdmVudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18obWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgcGFnZSBzY3JvbGxpbmcgZHVyaW5nIGRyYWdnaW5nXG4gICAgICAgICAgICAgICAgbWFwQnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkVXAgPSB0aGlzLmhhbmRsZVVwRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPVxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVkVXAgJiYgdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlZCA9IHRoaXMuaGFuZGxlRG93bkV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlID0gaGFuZGxlZDtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBtb3ZlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlTW92ZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgICAqIHRvIG90aGVyIGludGVyYWN0aW9ucyBvciBzaG91bGQgYmUgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhhbmRsZWQgV2FzIHRoZSBldmVudCBoYW5kbGVkIGJ5IHRoZSBpbnRlcmFjdGlvbj9cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuc3RvcERvd24gPSBmdW5jdGlvbiAoaGFuZGxlZCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUudXBkYXRlVHJhY2tlZFBvaW50ZXJzXyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKGlzUG9pbnRlckRyYWdnaW5nRXZlbnQobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgICAgICAgIHZhciBpZCA9IGV2ZW50XzEucG9pbnRlcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdID0gZXZlbnRfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlkIGluIHRoaXMudHJhY2tlZFBvaW50ZXJzXykge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBvbmx5IHdoZW4gdGhlcmUgd2FzIGEgcG9pbnRlcmRvd24gZXZlbnQgZm9yIHRoaXMgcG9pbnRlclxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudF8xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXJnZXRQb2ludGVycyA9IGdldFZhbHVlcyh0aGlzLnRyYWNrZWRQb2ludGVyc18pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUG9pbnRlckludGVyYWN0aW9uO1xufShJbnRlcmFjdGlvbikpO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFBvaW50ZXJFdmVudD59IHBvaW50ZXJFdmVudHMgTGlzdCBvZiBldmVudHMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gQ2VudHJvaWQgcGl4ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjZW50cm9pZChwb2ludGVyRXZlbnRzKSB7XG4gICAgdmFyIGxlbmd0aCA9IHBvaW50ZXJFdmVudHMubGVuZ3RoO1xuICAgIHZhciBjbGllbnRYID0gMDtcbiAgICB2YXIgY2xpZW50WSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjbGllbnRYICs9IHBvaW50ZXJFdmVudHNbaV0uY2xpZW50WDtcbiAgICAgICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gICAgfVxuICAgIHJldHVybiBbY2xpZW50WCAvIGxlbmd0aCwgY2xpZW50WSAvIGxlbmd0aF07XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGV2ZW50IGlzIGEgcG9pbnRlcmRvd24sIHBvaW50ZXJkcmFnXG4gKiAgICAgb3IgcG9pbnRlcnVwIGV2ZW50LlxuICovXG5mdW5jdGlvbiBpc1BvaW50ZXJEcmFnZ2luZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciB0eXBlID0gbWFwQnJvd3NlckV2ZW50LnR5cGU7XG4gICAgcmV0dXJuICh0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOIHx8XG4gICAgICAgIHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcgfHxcbiAgICAgICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApO1xufVxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnRlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL2NvbmRpdGlvblxuICovXG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IEZBTFNFLCBUUlVFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IE1BQywgV0VCS0lUIH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCwgdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gQ29uZGl0aW9uXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIGNvbmRpdGlvbiBmdW5jdGlvbiB0aGF0IHBhc3NlcyB3aGVuIGFsbCBwcm92aWRlZCBjb25kaXRpb25zIHBhc3MuXG4gKiBAcGFyYW0gey4uLkNvbmRpdGlvbn0gdmFyX2FyZ3MgQ29uZGl0aW9ucyB0byBjaGVjay5cbiAqIEByZXR1cm4ge0NvbmRpdGlvbn0gQ29uZGl0aW9uIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsKHZhcl9hcmdzKSB7XG4gICAgdmFyIGNvbmRpdGlvbnMgPSBhcmd1bWVudHM7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQWxsIGNvbmRpdGlvbnMgcGFzc2VkLlxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHBhc3MgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb25kaXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHBhc3MgPSBwYXNzICYmIGNvbmRpdGlvbnNbaV0oZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhc3M7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlIChlLmcuIHdoZW5cbiAqIGFkZGl0aW9uYWxseSB0aGUgc2hpZnQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAob3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIGFsdC1rZXkgYW5kIHNoaWZ0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZVxuICogKGUuZy4gd2hlbiBhZGRpdGlvbmFsbHkgdGhlIHBsYXRmb3JtLW1vZGlmaWVyLWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIGFsdCBhbmQgc2hpZnQga2V5cyBhcmUgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHRTaGlmdEtleXNPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKG9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQudGFyZ2V0LmdldFRhcmdldEVsZW1lbnQoKS5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIG1hcCBoYXMgdGhlIGZvY3VzIG9yIG5vICd0YWJpbmRleCcgYXR0cmlidXRlIHNldC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBtYXAgY29udGFpbmVyIGhhcyB0aGUgZm9jdXMgb3Igbm8gJ3RhYmluZGV4JyBhdHRyaWJ1dGUuXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXNXaXRoVGFiaW5kZXggPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKS5oYXNBdHRyaWJ1dGUoJ3RhYmluZGV4JylcbiAgICAgICAgPyBmb2N1cyhldmVudClcbiAgICAgICAgOiB0cnVlO1xufTtcbi8qKlxuICogUmV0dXJuIGFsd2F5cyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgYWx3YXlzID0gVFJVRTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBgY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkNMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFzIGFuIFwiYWN0aW9uXCItcHJvZHVjaW5nIG1vdXNlIGJ1dHRvbi5cbiAqXG4gKiBCeSBkZWZpbml0aW9uLCB0aGlzIGluY2x1ZGVzIGxlZnQtY2xpY2sgb24gd2luZG93cy9saW51eCwgYW5kIGxlZnQtY2xpY2tcbiAqIHdpdGhvdXQgdGhlIGN0cmwga2V5IG9uIE1hY3MuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IHZhciBtb3VzZUFjdGlvbkJ1dHRvbiA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gb3JpZ2luYWxFdmVudC5idXR0b24gPT0gMCAmJiAhKFdFQktJVCAmJiBNQUMgJiYgb3JpZ2luYWxFdmVudC5jdHJsS2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBhbHdheXMgZmFsc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gRmFsc2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbmV2ZXIgPSBGQUxTRTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgYnJvd3NlciBldmVudCBpcyBhIGBwb2ludGVybW92ZWAgZXZlbnQsIGBmYWxzZWBcbiAqIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBicm93c2VyIGV2ZW50IGlzIGEgYHBvaW50ZXJtb3ZlYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwb2ludGVyTW92ZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gJ3BvaW50ZXJtb3ZlJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xlQ2xpY2sgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgZGJsY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgZGJsY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGRvdWJsZUNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkRCTENMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBubyBtb2RpZmllciBrZXkgKGFsdC0sIHNoaWZ0LSBvciBwbGF0Zm9ybS1tb2RpZmllci1rZXkpIGlzXG4gKiBwcmVzc2VkLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGVyZSBubyBtb2RpZmllciBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5vTW9kaWZpZXJLZXlzID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAoTUFDID8gb3JpZ2luYWxFdmVudC5tZXRhS2V5IDogb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuXG4gKiBhZGRpdGlvbmFsbHkgdGhlIGFsdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBzaGlmdCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGlmdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAoIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyBub3QgZWRpdGFibGUsIGkuZS4gbm90IGEgYDxpbnB1dD5gLSxcbiAqIGA8c2VsZWN0PmAtIG9yIGA8dGV4dGFyZWE+YC1lbGVtZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciB0YXJnZXROb3RFZGl0YWJsZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgdmFyIHRhZ05hbWUgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChvcmlnaW5hbEV2ZW50LnRhcmdldCkudGFnTmFtZTtcbiAgICByZXR1cm4gdGFnTmFtZSAhPT0gJ0lOUFVUJyAmJiB0YWdOYW1lICE9PSAnU0VMRUNUJyAmJiB0YWdOYW1lICE9PSAnVEVYVEFSRUEnO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIG1vdXNlIGRldmljZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBtb3VzZU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpXG4gICAgICAgIC5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LnBvaW50ZXJUeXBlID09ICdtb3VzZSc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSB0b3VjaGFibGUgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHRvdWNoYWJsZSBkZXZpY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgdG91Y2hPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZ0ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudClcbiAgICAgICAgLm9yaWdpbmFsRXZlbnQ7XG4gICAgYXNzZXJ0KHBvaW50ZXJFdnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2dC5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBlbk9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KVxuICAgICAgICAub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2dCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIC8vIHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyN3aWRsLVBvaW50ZXJFdmVudC1wb2ludGVyVHlwZVxuICAgIHJldHVybiBwb2ludGVyRXZ0LnBvaW50ZXJUeXBlID09PSAncGVuJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlciBpblxuICogY29udGFjdCB3aXRoIHRoZSBzdXJmYWNlIG9yIGlmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHByaW1hcnlBY3Rpb24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpXG4gICAgICAgIC5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LmlzUHJpbWFyeSAmJiBwb2ludGVyRXZlbnQuYnV0dG9uID09PSAwO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmRpdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUGFuXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHsgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsIH0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFsbCwgZm9jdXNXaXRoVGFiaW5kZXgsIG5vTW9kaWZpZXJLZXlzLCBwcmltYXJ5QWN0aW9uLCB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSwgc2NhbGUgYXMgc2NhbGVDb29yZGluYXRlLCB9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufm5vTW9kaWZpZXJLZXlzfSBhbmQge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufnByaW1hcnlBY3Rpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIFdoZW4gdGhlIG1hcCdzIHRhcmdldCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBzZXQsXG4gKiB0aGUgaW50ZXJhY3Rpb24gd2lsbCBvbmx5IGhhbmRsZSBldmVudHMgd2hlbiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0tpbmV0aWMuanNcIikuZGVmYXVsdH0gW2tpbmV0aWNdIEtpbmV0aWMgaW5lcnRpYSB0byBhcHBseSB0byB0aGUgcGFuLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBwYW4gdGhlIG1hcCBieSBkcmFnZ2luZyB0aGUgbWFwLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1BhbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ1BhbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdQYW4ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgc3RvcERvd246IEZBTFNFLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2luZXRpY18gPSBvcHRpb25zLmtpbmV0aWM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RQb2ludGVyc0NvdW50XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGFubmluZ18gPSBmYWxzZTtcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICA/IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICA6IGFsbChub01vZGlmaWVyS2V5cywgcHJpbWFyeUFjdGlvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5vbkZvY3VzT25seVxuICAgICAgICAgICAgPyBhbGwoZm9jdXNXaXRoVGFiaW5kZXgsIGNvbmRpdGlvbilcbiAgICAgICAgICAgIDogY29uZGl0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ub0tpbmV0aWNfID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhbm5pbmdfKSB7XG4gICAgICAgICAgICB0aGlzLnBhbm5pbmdfID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFyZ2V0UG9pbnRlcnMgPSB0aGlzLnRhcmdldFBvaW50ZXJzO1xuICAgICAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0YXJnZXRQb2ludGVycyk7XG4gICAgICAgIGlmICh0YXJnZXRQb2ludGVycy5sZW5ndGggPT0gdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy51cGRhdGUoY2VudHJvaWRbMF0sIGNlbnRyb2lkWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3RDZW50cm9pZCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWRbMF0gLSBjZW50cm9pZFswXSxcbiAgICAgICAgICAgICAgICAgICAgY2VudHJvaWRbMV0gLSB0aGlzLmxhc3RDZW50cm9pZFsxXSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgICAgICBzY2FsZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0UmVzb2x1dGlvbigpKTtcbiAgICAgICAgICAgICAgICByb3RhdGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgICAgIHZpZXcuYWRqdXN0Q2VudGVySW50ZXJuYWwoZGVsdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgICAgICAgIC8vIGFmdGVyIG9uZSBmaW5nZXIgZG93biwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIGRvd25cbiAgICAgICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IGNlbnRyb2lkO1xuICAgICAgICB0aGlzLmxhc3RQb2ludGVyc0NvdW50XyA9IHRhcmdldFBvaW50ZXJzLmxlbmd0aDtcbiAgICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUGFuLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ub0tpbmV0aWNfICYmIHRoaXMua2luZXRpY18gJiYgdGhpcy5raW5ldGljXy5lbmQoKSkge1xuICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IHRoaXMua2luZXRpY18uZ2V0RGlzdGFuY2UoKTtcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSB0aGlzLmtpbmV0aWNfLmdldEFuZ2xlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVycHggPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKGNlbnRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGRlc3QgPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKFtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVycHhbMF0gLSBkaXN0YW5jZSAqIE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgICAgICAgICAgICAgY2VudGVycHhbMV0gLSBkaXN0YW5jZSAqIE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcjogdmlldy5nZXRDb25zdHJhaW5lZENlbnRlcihkZXN0KSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFubmluZ18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbm5pbmdfID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgICAgICAvLyByZXNldCBzbyB3ZSBkb24ndCBvdmVyZXN0aW1hdGUgdGhlIGtpbmV0aWMgZW5lcmd5IGFmdGVyXG4gICAgICAgICAgICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciB1cCwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIHVwXG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMCAmJiB0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAgICAgICAvLyBzdG9wIGFueSBjdXJyZW50IGFuaW1hdGlvblxuICAgICAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm8ga2luZXRpYyBhcyBzb29uIGFzIG1vcmUgdGhhbiBvbmUgcG9pbnRlciBvbiB0aGUgc2NyZWVuIGlzXG4gICAgICAgICAgICAvLyBkZXRlY3RlZC4gVGhpcyBpcyB0byBwcmV2ZW50IG5hc3R5IHBhbnMgYWZ0ZXIgcGluY2guXG4gICAgICAgICAgICB0aGlzLm5vS2luZXRpY18gPSB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERyYWdQYW47XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ1Bhbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdQYW4uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgeyBGQUxTRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhbHRTaGlmdEtleXNPbmx5LCBtb3VzZUFjdGlvbkJ1dHRvbiwgbW91c2VPbmx5LCB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgZGlzYWJsZSB9IGZyb20gJy4uL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufmFsdFNoaWZ0S2V5c09ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIHRoZSBhbHQgYW5kIHNoaWZ0IGtleXMgYXJlIGhlbGQgZG93bi5cbiAqXG4gKiBUaGlzIGludGVyYWN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBtb3VzZSBkZXZpY2VzLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1JvdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ1JvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdSb3RhdGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgc3RvcERvd246IEZBTFNFLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHRTaGlmdEtleXNPbmx5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICAgIHZhciB0aGV0YSA9IE1hdGguYXRhbjIoc2l6ZVsxXSAvIDIgLSBvZmZzZXRbMV0sIG9mZnNldFswXSAtIHNpemVbMF0gLyAyKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdEFuZ2xlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSB0aGV0YSAtIHRoaXMubGFzdEFuZ2xlXztcbiAgICAgICAgICAgIHZpZXcuYWRqdXN0Um90YXRpb25JbnRlcm5hbCgtZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHRoZXRhO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2VBY3Rpb25CdXR0b24obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAgICAgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERyYWdSb3RhdGU7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ1JvdGF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdSb3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9Cb3hcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4uL2dlb20vUG9seWdvbi5qcyc7XG52YXIgUmVuZGVyQm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZW5kZXJCb3gsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSBDU1MgY2xhc3MgbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJCb3goY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5nZW9tZXRyeV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5jbGFzc05hbWUgPSAnb2wtYm94ICcgKyBjbGFzc05hbWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVuZFBpeGVsXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0TWFwKG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLnJlbmRlcl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICAgICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgICAgIHZhciBweCA9ICdweCc7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICAgIHN0eWxlLmxlZnQgPSBNYXRoLm1pbihzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFswXSkgKyBweDtcbiAgICAgICAgc3R5bGUudG9wID0gTWF0aC5taW4oc3RhcnRQaXhlbFsxXSwgZW5kUGl4ZWxbMV0pICsgcHg7XG4gICAgICAgIHN0eWxlLndpZHRoID0gTWF0aC5hYnMoZW5kUGl4ZWxbMF0gLSBzdGFydFBpeGVsWzBdKSArIHB4O1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSBNYXRoLmFicyhlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV0pICsgcHg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS50b3AgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIHN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHN0YXJ0UGl4ZWwgU3RhcnQgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgRW5kIHBpeGVsLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuc2V0UGl4ZWxzID0gZnVuY3Rpb24gKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBzdGFydFBpeGVsO1xuICAgICAgICB0aGlzLmVuZFBpeGVsXyA9IGVuZFBpeGVsO1xuICAgICAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9yIHVwZGF0ZXMgdGhlIGNhY2hlZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICAgICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgICAgIHZhciBwaXhlbHMgPSBbXG4gICAgICAgICAgICBzdGFydFBpeGVsLFxuICAgICAgICAgICAgW3N0YXJ0UGl4ZWxbMF0sIGVuZFBpeGVsWzFdXSxcbiAgICAgICAgICAgIGVuZFBpeGVsLFxuICAgICAgICAgICAgW2VuZFBpeGVsWzBdLCBzdGFydFBpeGVsWzFdXSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gcGl4ZWxzLm1hcCh0aGlzLm1hcF8uZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsLCB0aGlzLm1hcF8pO1xuICAgICAgICAvLyBjbG9zZSB0aGUgcG9seWdvblxuICAgICAgICBjb29yZGluYXRlc1s0XSA9IGNvb3JkaW5hdGVzWzBdLnNsaWNlKCk7XG4gICAgICAgIGlmICghdGhpcy5nZW9tZXRyeV8pIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbmV3IFBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5Xy5zZXRDb29yZGluYXRlcyhbY29vcmRpbmF0ZXNdKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlb21ldHJ5XztcbiAgICB9O1xuICAgIHJldHVybiBSZW5kZXJCb3g7XG59KERpc3Bvc2FibGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlbmRlckJveDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJveC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnQm94XG4gKi9cbi8vIEZJWE1FIGRyYXcgZHJhZyBib3hcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IFJlbmRlckJveCBmcm9tICcuLi9yZW5kZXIvQm94LmpzJztcbmltcG9ydCB7IG1vdXNlQWN0aW9uQnV0dG9uIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgYW5kIHJldHVybnMgYSBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsXG4gKiB0cnVlIHNob3VsZCBiZSByZXR1cm5lZC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsKTpib29sZWFufSBFbmRDb25kaXRpb25cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtZHJhZ2JveCddIENTUyBjbGFzcyBuYW1lIGZvciBzdHlsaW5nIHRoZSBib3guXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG9sL2V2ZW50cy9jb25kaXRpb25+bW91c2VBY3Rpb25CdXR0b259LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5BcmVhPTY0XSBUaGUgbWluaW11bSBhcmVhIG9mIHRoZSBib3ggaW4gcGl4ZWwsIHRoaXMgdmFsdWUgaXMgdXNlZCBieSB0aGUgZGVmYXVsdFxuICogYGJveEVuZENvbmRpdGlvbmAgZnVuY3Rpb24uXG4gKiBAcHJvcGVydHkge0VuZENvbmRpdGlvbn0gW2JveEVuZENvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgdG8gaW5kaWNhdGUgd2hldGhlciBhIGBib3hlbmRgIGV2ZW50IHNob3VsZCBiZSBmaXJlZC5cbiAqIERlZmF1bHQgaXMgYHRydWVgIGlmIHRoZSBhcmVhIG9mIHRoZSBib3ggaXMgYmlnZ2VyIHRoYW4gdGhlIGBtaW5BcmVhYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKHRoaXM6RHJhZ0JveCwgaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtvbkJveEVuZF0gQ29kZSB0byBleGVjdXRlIGp1c3RcbiAqIGJlZm9yZSBgYm94ZW5kYCBpcyBmaXJlZC5cbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG52YXIgRHJhZ0JveEV2ZW50VHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgdXBvbiBkcmFnIGJveCBzdGFydC5cbiAgICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveHN0YXJ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPWFNUQVJUOiAnYm94c3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBvbiBkcmFnIHdoZW4gYm94IGlzIGFjdGl2ZS5cbiAgICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGRyYWdcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YRFJBRzogJ2JveGRyYWcnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IGVuZC5cbiAgICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hFTkQ6ICdib3hlbmQnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnQm94fkRyYWdCb3h9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mXG4gKiB0aGlzIHR5cGUuXG4gKi9cbnZhciBEcmFnQm94RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdCb3hFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgZXZlbnQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgT3JpZ2luYXRpbmcgZXZlbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ0JveEV2ZW50KHR5cGUsIGNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvb3JkaW5hdGUgb2YgdGhlIGRyYWcgZXZlbnQuXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlID0gY29vcmRpbmF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcEJyb3dzZXJFdmVudCA9IG1hcEJyb3dzZXJFdmVudDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRHJhZ0JveEV2ZW50O1xufShFdmVudCkpO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gZHJhdyBhIHZlY3RvciBib3ggYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gdGhlIHNoaWZ0IG9yIG90aGVyIGtleSBpcyBoZWxkIGRvd24uIFRoaXMgaXMgdXNlZCwgZm9yIGV4YW1wbGUsXG4gKiBmb3Igem9vbWluZyB0byBhIHNwZWNpZmljIGFyZWEgb2YgdGhlIG1hcFxuICogKHNlZSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdab29tfkRyYWdab29tfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb219KS5cbiAqXG4gKiBAZmlyZXMgRHJhZ0JveEV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnQm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnQm94LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ0JveChvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvQm94LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3hfID0gbmV3IFJlbmRlckJveChvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ2JveCcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1pbkFyZWFfID0gb3B0aW9ucy5taW5BcmVhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbkFyZWEgOiA2NDtcbiAgICAgICAgaWYgKG9wdGlvbnMub25Cb3hFbmQpIHtcbiAgICAgICAgICAgIF90aGlzLm9uQm94RW5kID0gb3B0aW9ucy5vbkJveEVuZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBtb3VzZUFjdGlvbkJ1dHRvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtFbmRDb25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3hFbmRDb25kaXRpb25fID0gb3B0aW9ucy5ib3hFbmRDb25kaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy5ib3hFbmRDb25kaXRpb25cbiAgICAgICAgICAgIDogX3RoaXMuZGVmYXVsdEJveEVuZENvbmRpdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCBjb25kaXRpb24gZm9yIGRldGVybWluaW5nIHdoZXRoZXIgdGhlIGJveGVuZCBldmVudFxuICAgICAqIHNob3VsZCBmaXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBUaGUgb3JpZ2luYXRpbmcgTWFwQnJvd3NlckV2ZW50XG4gICAgICogICAgIGxlYWRpbmcgdG8gdGhlIGJveCBlbmQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBUaGUgc3RhcnRpbmcgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBlbmRQaXhlbCBUaGUgZW5kIHBpeGVsIG9mIHRoZSBib3guXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIGJveGVuZCBjb25kaXRpb24gc2hvdWxkIGJlIGZpcmVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmRlZmF1bHRCb3hFbmRDb25kaXRpb24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50LCBzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgICAgICB2YXIgd2lkdGggPSBlbmRQaXhlbFswXSAtIHN0YXJ0UGl4ZWxbMF07XG4gICAgICAgIHZhciBoZWlnaHQgPSBlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV07XG4gICAgICAgIHJldHVybiB3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0ID49IHRoaXMubWluQXJlYV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGdlb21ldHJ5IG9mIGxhc3QgZHJhd24gYm94LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJveF8uZ2V0R2VvbWV0cnkoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHRoaXMuYm94Xy5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgbWFwQnJvd3NlckV2ZW50LnBpeGVsKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hEUkFHLCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5ib3hfLnNldE1hcChudWxsKTtcbiAgICAgICAgaWYgKHRoaXMuYm94RW5kQ29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQsIHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCkpIHtcbiAgICAgICAgICAgIHRoaXMub25Cb3hFbmQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KERyYWdCb3hFdmVudFR5cGUuQk9YRU5ELCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICAgICAgICB0aGlzLmJveF8uc2V0TWFwKG1hcEJyb3dzZXJFdmVudC5tYXApO1xuICAgICAgICAgICAgdGhpcy5ib3hfLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCB0aGlzLnN0YXJ0UGl4ZWxfKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KERyYWdCb3hFdmVudFR5cGUuQk9YU1RBUlQsIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIGp1c3QgYmVmb3JlIGBvbmJveGVuZGAgaXMgZmlyZWRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5vbkJveEVuZCA9IGZ1bmN0aW9uIChldmVudCkgeyB9O1xuICAgIHJldHVybiBEcmFnQm94O1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdCb3g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnQm94LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdab29tXG4gKi9cbmltcG9ydCBEcmFnQm94IGZyb20gJy4vRHJhZ0JveC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlcywgZ2V0Qm90dG9tTGVmdCwgZ2V0Q2VudGVyLCBnZXRUb3BSaWdodCwgc2NhbGVGcm9tQ2VudGVyLCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7IHNoaWZ0S2V5T25seSB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtZHJhZ3pvb20nXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGVcbiAqIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufnNoaWZ0S2V5T25seX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTIwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW291dD1mYWxzZV0gVXNlIGludGVyYWN0aW9uIGZvciB6b29taW5nIG91dC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluQXJlYT02NF0gVGhlIG1pbmltdW0gYXJlYSBvZiB0aGUgYm94IGluIHBpeGVsLCB0aGlzIHZhbHVlIGlzIHVzZWQgYnkgdGhlIHBhcmVudCBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIGEga2V5LCBzaGlmdCBieSBkZWZhdWx0LCBpcyBoZWxkIGRvd24uXG4gKlxuICogVG8gY2hhbmdlIHRoZSBzdHlsZSBvZiB0aGUgYm94LCB1c2UgQ1NTIGFuZCB0aGUgYC5vbC1kcmFnem9vbWAgc2VsZWN0b3IsIG9yXG4gKiB5b3VyIGN1c3RvbSBvbmUgY29uZmlndXJlZCB3aXRoIGBjbGFzc05hbWVgLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1pvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogc2hpZnRLZXlPbmx5O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ3pvb20nLFxuICAgICAgICAgICAgbWluQXJlYTogb3B0aW9ucy5taW5BcmVhLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm91dF8gPSBvcHRpb25zLm91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vdXQgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIGp1c3QgYmVmb3JlIGBvbmJveGVuZGAgaXMgZmlyZWRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnWm9vbS5wcm90b3R5cGUub25Cb3hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHZhciB2aWV3ID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSAqLyAobWFwLmdldFZpZXcoKSk7XG4gICAgICAgIHZhciBzaXplID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSAqLyAobWFwLmdldFNpemUoKSk7XG4gICAgICAgIHZhciBleHRlbnQgPSB0aGlzLmdldEdlb21ldHJ5KCkuZ2V0RXh0ZW50KCk7XG4gICAgICAgIGlmICh0aGlzLm91dF8pIHtcbiAgICAgICAgICAgIHZhciBtYXBFeHRlbnQgPSB2aWV3LmNhbGN1bGF0ZUV4dGVudEludGVybmFsKHNpemUpO1xuICAgICAgICAgICAgdmFyIGJveFBpeGVsRXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZXMoW1xuICAgICAgICAgICAgICAgIG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwoZ2V0Qm90dG9tTGVmdChleHRlbnQpKSxcbiAgICAgICAgICAgICAgICBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKGdldFRvcFJpZ2h0KGV4dGVudCkpLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gdmlldy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwoYm94UGl4ZWxFeHRlbnQsIHNpemUpO1xuICAgICAgICAgICAgc2NhbGVGcm9tQ2VudGVyKG1hcEV4dGVudCwgMSAvIGZhY3Rvcik7XG4gICAgICAgICAgICBleHRlbnQgPSBtYXBFeHRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChleHRlbnQsIHNpemUpKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoZ2V0Q2VudGVyKGV4dGVudCksIHJlc29sdXRpb24pO1xuICAgICAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgY2VudGVyOiBjZW50ZXIsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIERyYWdab29tO1xufShEcmFnQm94KSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdab29tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgcGFuIH0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tICcuLi9ldmVudHMvS2V5Q29kZS5qcyc7XG5pbXBvcnQgeyBub01vZGlmaWVyS2V5cywgdGFyZ2V0Tm90RWRpdGFibGUgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7IHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlIH0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufm5vTW9kaWZpZXJLZXlzfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxEZWx0YT0xMjhdIFRoZSBhbW91bnQgb2YgcGl4ZWxzIHRvIHBhbiBvbiBlYWNoIGtleVxuICogcHJlc3MuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIHVzaW5nIGtleWJvYXJkIGFycm93cy5cbiAqIE5vdGUgdGhhdCwgYWx0aG91Z2ggdGhpcyBpbnRlcmFjdGlvbiBpcyBieSBkZWZhdWx0IGluY2x1ZGVkIGluIG1hcHMsXG4gKiB0aGUga2V5cyBjYW4gb25seSBiZSB1c2VkIHdoZW4gYnJvd3NlciBmb2N1cyBpcyBvbiB0aGUgZWxlbWVudCB0byB3aGljaFxuICogdGhlIGtleWJvYXJkIGV2ZW50cyBhcmUgYXR0YWNoZWQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIG1hcCBkaXYsXG4gKiB0aG91Z2ggeW91IGNhbiBjaGFuZ2UgdGhpcyB3aXRoIHRoZSBga2V5Ym9hcmRFdmVudFRhcmdldGAgaW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0uIGBkb2N1bWVudGAgbmV2ZXIgbG9zZXMgZm9jdXMgYnV0LCBmb3IgYW55IG90aGVyXG4gKiBlbGVtZW50LCBmb2N1cyB3aWxsIGhhdmUgdG8gYmUgb24sIGFuZCByZXR1cm5lZCB0bywgdGhpcyBlbGVtZW50IGlmIHRoZSBrZXlzXG4gKiBhcmUgdG8gZnVuY3Rpb24uXG4gKiBTZWUgYWxzbyB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219LlxuICogQGFwaVxuICovXG52YXIgS2V5Ym9hcmRQYW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEtleWJvYXJkUGFuLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2V5Ym9hcmRQYW4ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVmYXVsdENvbmRpdGlvbl8gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gKG5vTW9kaWZpZXJLZXlzKG1hcEJyb3dzZXJFdmVudCkgJiYgdGFyZ2V0Tm90RWRpdGFibGUobWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29uZGl0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgOiBfdGhpcy5kZWZhdWx0Q29uZGl0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsRGVsdGFfID1cbiAgICAgICAgICAgIG9wdGlvbnMucGl4ZWxEZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waXhlbERlbHRhIDogMTI4O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBpZiBpdCB3YXMgYVxuICAgICAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHRoZSBkaXJlY3Rpb24gdG8gcGFuIHRvIChpZiBhbiBhcnJvdyBrZXkgd2FzXG4gICAgICogcHJlc3NlZCkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAdGhpcyB7S2V5Ym9hcmRQYW59XG4gICAgICovXG4gICAgS2V5Ym9hcmRQYW4ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTikge1xuICAgICAgICAgICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdmFyIGtleUNvZGUgPSBrZXlFdmVudC5rZXlDb2RlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgICAgICAgICAgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCB8fFxuICAgICAgICAgICAgICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuVVApKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgICAgIHZhciBtYXBVbml0c0RlbHRhID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiB0aGlzLnBpeGVsRGVsdGFfO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YVggPSAwLCBkZWx0YVkgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChrZXlDb2RlID09IEtleUNvZGUuRE9XTikge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVkgPSAtbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLkxFRlQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFYID0gLW1hcFVuaXRzRGVsdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCkge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVggPSBtYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFZID0gbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gW2RlbHRhWCwgZGVsdGFZXTtcbiAgICAgICAgICAgICAgICByb3RhdGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgICAgIHBhbih2aWV3LCBkZWx0YSwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgICAgIG1hcEJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHN0b3BFdmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gS2V5Ym9hcmRQYW47XG59KEludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBLZXlib2FyZFBhbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleWJvYXJkUGFuLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvS2V5Q29kZVxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAY29uc3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIExFRlQ6IDM3LFxuICAgIFVQOiAzOCxcbiAgICBSSUdIVDogMzksXG4gICAgRE9XTjogNDAsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Q29kZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyB6b29tQnlEZWx0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IHsgdGFyZ2V0Tm90RWRpdGFibGUgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGxldmVsIGRlbHRhIG9uIGVhY2gga2V5IHByZXNzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgdXNpbmcga2V5Ym9hcmQgKyBhbmQgLS5cbiAqIE5vdGUgdGhhdCwgYWx0aG91Z2ggdGhpcyBpbnRlcmFjdGlvbiBpcyBieSBkZWZhdWx0IGluY2x1ZGVkIGluIG1hcHMsXG4gKiB0aGUga2V5cyBjYW4gb25seSBiZSB1c2VkIHdoZW4gYnJvd3NlciBmb2N1cyBpcyBvbiB0aGUgZWxlbWVudCB0byB3aGljaFxuICogdGhlIGtleWJvYXJkIGV2ZW50cyBhcmUgYXR0YWNoZWQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIG1hcCBkaXYsXG4gKiB0aG91Z2ggeW91IGNhbiBjaGFuZ2UgdGhpcyB3aXRoIHRoZSBga2V5Ym9hcmRFdmVudFRhcmdldGAgaW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0uIGBkb2N1bWVudGAgbmV2ZXIgbG9zZXMgZm9jdXMgYnV0LCBmb3IgYW55IG90aGVyXG4gKiBlbGVtZW50LCBmb2N1cyB3aWxsIGhhdmUgdG8gYmUgb24sIGFuZCByZXR1cm5lZCB0bywgdGhpcyBlbGVtZW50IGlmIHRoZSBrZXlzXG4gKiBhcmUgdG8gZnVuY3Rpb24uXG4gKiBTZWUgYWxzbyB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoS2V5Ym9hcmRab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2V5Ym9hcmRab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiB0YXJnZXROb3RFZGl0YWJsZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWx0YV8gPSBvcHRpb25zLmRlbHRhID8gb3B0aW9ucy5kZWx0YSA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAgICAgKiBgS2V5RXZlbnRgLCBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHpvb20gaW4gb3Igb3V0IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGVcbiAgICAgKiBrZXkgcHJlc3NlZCB3YXMgJysnIG9yICctJykuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAdGhpcyB7S2V5Ym9hcmRab29tfVxuICAgICAqL1xuICAgIEtleWJvYXJkWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOIHx8XG4gICAgICAgICAgICBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZUFJFU1MpIHtcbiAgICAgICAgICAgIHZhciBrZXlFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGtleUV2ZW50LmNoYXJDb2RlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgICAgICAgICAgKGNoYXJDb2RlID09ICcrJy5jaGFyQ29kZUF0KDApIHx8IGNoYXJDb2RlID09ICctJy5jaGFyQ29kZUF0KDApKSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGNoYXJDb2RlID09ICcrJy5jaGFyQ29kZUF0KDApID8gdGhpcy5kZWx0YV8gOiAtdGhpcy5kZWx0YV87XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgICAgICAgICBtYXBCcm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIEtleWJvYXJkWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleWJvYXJkWm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvS2luZXRpY1xuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudGF0aW9uIG9mIGluZXJ0aWFsIGRlY2VsZXJhdGlvbiBmb3IgbWFwIG1vdmVtZW50LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEtpbmV0aWMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlY2F5IFJhdGUgb2YgZGVjYXkgKG11c3QgYmUgbmVnYXRpdmUpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5WZWxvY2l0eSBNaW5pbXVtIHZlbG9jaXR5IChwaXhlbHMvbWlsbGlzZWNvbmQpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBEZWxheSB0byBjb25zaWRlciB0byBjYWxjdWxhdGUgdGhlIGtpbmV0aWNcbiAgICAgKiAgICAgaW5pdGlhbCB2YWx1ZXMgKG1pbGxpc2Vjb25kcykuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2luZXRpYyhkZWNheSwgbWluVmVsb2NpdHksIGRlbGF5KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWNheV8gPSBkZWNheTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblZlbG9jaXR5XyA9IG1pblZlbG9jaXR5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVsYXlfID0gZGVsYXk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9pbnRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW5nbGVfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb2ludHNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuYW5nbGVfID0gMDtcbiAgICAgICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB0aGlzLnBvaW50c18ucHVzaCh4LCB5LCBEYXRlLm5vdygpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgd2Ugc2hvdWxkIGRvIGtpbmV0aWMgYW5pbWF0aW9uLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9pbnRzXy5sZW5ndGggPCA2KSB7XG4gICAgICAgICAgICAvLyBhdCBsZWFzdCAyIHBvaW50cyBhcmUgcmVxdWlyZWQgKGkuZS4gdGhlcmUgbXVzdCBiZSBhdCBsZWFzdCA2IGVsZW1lbnRzXG4gICAgICAgICAgICAvLyBpbiB0aGUgYXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbGF5ID0gRGF0ZS5ub3coKSAtIHRoaXMuZGVsYXlfO1xuICAgICAgICB2YXIgbGFzdEluZGV4ID0gdGhpcy5wb2ludHNfLmxlbmd0aCAtIDM7XG4gICAgICAgIGlmICh0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMl0gPCBkZWxheSkge1xuICAgICAgICAgICAgLy8gdGhlIGxhc3QgdHJhY2tlZCBwb2ludCBpcyB0b28gb2xkLCB3aGljaCBtZWFucyB0aGF0IHRoZSB1c2VyIHN0b3BwZWRcbiAgICAgICAgICAgIC8vIHBhbm5pbmcgYmVmb3JlIHJlbGVhc2luZyB0aGUgbWFwXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2V0IHRoZSBmaXJzdCBwb2ludCB3aGljaCBzdGlsbCBmYWxscyBpbnRvIHRoZSBkZWxheSB0aW1lXG4gICAgICAgIHZhciBmaXJzdEluZGV4ID0gbGFzdEluZGV4IC0gMztcbiAgICAgICAgd2hpbGUgKGZpcnN0SW5kZXggPiAwICYmIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl0gPiBkZWxheSkge1xuICAgICAgICAgICAgZmlyc3RJbmRleCAtPSAzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl07XG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgYSBkdXJhdGlvbiBvZiAwIChkaXZpZGUgYnkgemVybylcbiAgICAgICAgLy8gd2UgYWxzbyBtYWtlIHN1cmUgdGhlIHVzZXIgcGFubmVkIGZvciBhIGR1cmF0aW9uIG9mIGF0IGxlYXN0IG9uZSBmcmFtZVxuICAgICAgICAvLyAoMS82MHMpIHRvIGNvbXB1dGUgc2FuZSBkaXNwbGFjZW1lbnQgdmFsdWVzXG4gICAgICAgIGlmIChkdXJhdGlvbiA8IDEwMDAgLyA2MCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkeCA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXhdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXhdO1xuICAgICAgICB2YXIgZHkgPSB0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMV0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDFdO1xuICAgICAgICB0aGlzLmFuZ2xlXyA9IE1hdGguYXRhbjIoZHksIGR4KTtcbiAgICAgICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAvIGR1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsVmVsb2NpdHlfID4gdGhpcy5taW5WZWxvY2l0eV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRvdGFsIGRpc3RhbmNlIHRyYXZlbGxlZCAocGl4ZWxzKS5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5nZXREaXN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblZlbG9jaXR5XyAtIHRoaXMuaW5pdGlhbFZlbG9jaXR5XykgLyB0aGlzLmRlY2F5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgb2YgdGhlIGtpbmV0aWMgcGFubmluZyBhbmltYXRpb24gKHJhZGlhbnMpLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmdldEFuZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmdsZV87XG4gICAgfTtcbiAgICByZXR1cm4gS2luZXRpYztcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBLaW5ldGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2luZXRpYy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7IHpvb21CeURlbHRhIH0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgeyBERVZJQ0VfUElYRUxfUkFUSU8sIEZJUkVGT1ggfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgYWxsLCBhbHdheXMsIGZvY3VzV2l0aFRhYmluZGV4IH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIE1vZGUgPSB7XG4gICAgVFJBQ0tQQUQ6ICd0cmFja3BhZCcsXG4gICAgV0hFRUw6ICd3aGVlbCcsXG59O1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5hbHdheXN9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIFdoZW4gdGhlIG1hcCdzIHRhcmdldCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBzZXQsXG4gKiB0aGUgaW50ZXJhY3Rpb24gd2lsbCBvbmx5IGhhbmRsZSBldmVudHMgd2hlbiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heERlbHRhPTFdIE1heGltdW0gbW91c2Ugd2hlZWwgZGVsdGEuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGltZW91dD04MF0gTW91c2Ugd2hlZWwgdGltZW91dCBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VBbmNob3I9dHJ1ZV0gRW5hYmxlIHpvb21pbmcgdXNpbmcgdGhlIG1vdXNlJ3NcbiAqIGxvY2F0aW9uIGFzIHRoZSBhbmNob3IuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIHpvb21pbmcgaW4gYW5kIG91dCB3aWxsIHpvb20gdG9cbiAqIHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbiBpbnN0ZWFkIG9mIHpvb21pbmcgb24gdGhlIG1vdXNlJ3MgbG9jYXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgbW91c2Ugd2hlZWwgem9vbVxuICogZXZlbnQgd2lsbCBhbHdheXMgYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uO1xuICogZmFsc2UgbWVhbnMgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgc2Nyb2xsaW5nIHRoZSBtb3VzZSB3aGVlbC5cbiAqIEBhcGlcbiAqL1xudmFyIE1vdXNlV2hlZWxab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNb3VzZVdoZWVsWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1vdXNlV2hlZWxab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vSW50ZXJhY3Rpb24uanNcIikuSW50ZXJhY3Rpb25PcHRpb25zfSAqLyAob3B0aW9ucykpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG90YWxEZWx0YV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3REZWx0YV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhXyA9IG9wdGlvbnMubWF4RGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4RGVsdGEgOiAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGltZW91dF8gPSBvcHRpb25zLnRpbWVvdXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGltZW91dCA6IDgwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51c2VBbmNob3JfID1cbiAgICAgICAgICAgIG9wdGlvbnMudXNlQW5jaG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnVzZUFuY2hvciA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnN0cmFpblJlc29sdXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb25cbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICB2YXIgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IGFsd2F5cztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLm9uRm9jdXNPbmx5XG4gICAgICAgICAgICA/IGFsbChmb2N1c1dpdGhUYWJpbmRleCwgY29uZGl0aW9uKVxuICAgICAgICAgICAgOiBjb25kaXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRUaW1lXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGltZW91dElkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtNb2RlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1vZGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2twYWQgZXZlbnRzIHNlcGFyYXRlZCBieSB0aGlzIGRlbGF5IHdpbGwgYmUgY29uc2lkZXJlZCBzZXBhcmF0ZVxuICAgICAgICAgKiBpbnRlcmFjdGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFja3BhZEV2ZW50R2FwXyA9IDQwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2twYWRUaW1lb3V0SWRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBkZWx0YSB2YWx1ZXMgcGVyIHpvb20gbGV2ZWxcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhUGVyWm9vbV8gPSAzMDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuZW5kSW50ZXJhY3Rpb25fID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRyYWNrcGFkVGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldE1hcCgpLmdldFZpZXcoKTtcbiAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih1bmRlZmluZWQsIHRoaXMubGFzdERlbHRhXyA/ICh0aGlzLmxhc3REZWx0YV8gPiAwID8gMSA6IC0xKSA6IDAsIHRoaXMubGFzdEFuY2hvcl8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYSBtb3VzZXdoZWVsLWV2ZW50KSBhbmQgZXZlbnR1YWxseVxuICAgICAqIHpvb21zIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0eXBlID0gbWFwQnJvd3NlckV2ZW50LnR5cGU7XG4gICAgICAgIGlmICh0eXBlICE9PSBFdmVudFR5cGUuV0hFRUwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHdoZWVsRXZlbnQgPSAvKiogQHR5cGUge1doZWVsRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgIGlmICh0aGlzLnVzZUFuY2hvcl8pIHtcbiAgICAgICAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWx0YSBub3JtYWxpc2F0aW9uIGluc3BpcmVkIGJ5XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2Jsb2IvMDAxYzdiOS9qcy91aS9oYW5kbGVyL3Njcm9sbF96b29tLmpzXG4gICAgICAgIHZhciBkZWx0YTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5XSEVFTCkge1xuICAgICAgICAgICAgZGVsdGEgPSB3aGVlbEV2ZW50LmRlbHRhWTtcbiAgICAgICAgICAgIGlmIChGSVJFRk9YICYmIHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9QSVhFTCkge1xuICAgICAgICAgICAgICAgIGRlbHRhIC89IERFVklDRV9QSVhFTF9SQVRJTztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aGVlbEV2ZW50LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfTElORSkge1xuICAgICAgICAgICAgICAgIGRlbHRhICo9IDQwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWx0YSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sYXN0RGVsdGFfID0gZGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0VGltZV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVfID0gbm93O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5tb2RlXyB8fCBub3cgLSB0aGlzLnN0YXJ0VGltZV8gPiB0aGlzLnRyYWNrcGFkRXZlbnRHYXBfKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVfID0gTWF0aC5hYnMoZGVsdGEpIDwgNCA/IE1vZGUuVFJBQ0tQQUQgOiBNb2RlLldIRUVMO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHRoaXMubW9kZV8gPT09IE1vZGUuVFJBQ0tQQUQgJiZcbiAgICAgICAgICAgICEodmlldy5nZXRDb25zdHJhaW5SZXNvbHV0aW9uKCkgfHwgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrcGFkVGltZW91dElkXykge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRyYWNrcGFkVGltZW91dElkXyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlldy5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyYWNrcGFkVGltZW91dElkXyA9IHNldFRpbWVvdXQodGhpcy5lbmRJbnRlcmFjdGlvbl8uYmluZCh0aGlzKSwgdGhpcy50aW1lb3V0Xyk7XG4gICAgICAgICAgICB2aWV3LmFkanVzdFpvb20oLWRlbHRhIC8gdGhpcy5kZWx0YVBlclpvb21fLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvdGFsRGVsdGFfICs9IGRlbHRhO1xuICAgICAgICB2YXIgdGltZUxlZnQgPSBNYXRoLm1heCh0aGlzLnRpbWVvdXRfIC0gKG5vdyAtIHRoaXMuc3RhcnRUaW1lXyksIDApO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWRfKTtcbiAgICAgICAgdGhpcy50aW1lb3V0SWRfID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZVdoZWVsWm9vbV8uYmluZCh0aGlzLCBtYXApLCB0aW1lTGVmdCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuaGFuZGxlV2hlZWxab29tXyA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbHRhID0gLWNsYW1wKHRoaXMudG90YWxEZWx0YV8sIC10aGlzLm1heERlbHRhXyAqIHRoaXMuZGVsdGFQZXJab29tXywgdGhpcy5tYXhEZWx0YV8gKiB0aGlzLmRlbHRhUGVyWm9vbV8pIC8gdGhpcy5kZWx0YVBlclpvb21fO1xuICAgICAgICBpZiAodmlldy5nZXRDb25zdHJhaW5SZXNvbHV0aW9uKCkgfHwgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXykge1xuICAgICAgICAgICAgLy8gdmlldyBoYXMgYSB6b29tIGNvbnN0cmFpbnQsIHpvb20gYnkgMVxuICAgICAgICAgICAgZGVsdGEgPSBkZWx0YSA/IChkZWx0YSA+IDAgPyAxIDogLTEpIDogMDtcbiAgICAgICAgfVxuICAgICAgICB6b29tQnlEZWx0YSh2aWV3LCBkZWx0YSwgdGhpcy5sYXN0QW5jaG9yXywgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICB0aGlzLm1vZGVfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRvdGFsRGVsdGFfID0gMDtcbiAgICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50aW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRW5hYmxlIG9yIGRpc2FibGUgdXNpbmcgdGhlIG1vdXNlJ3MgbG9jYXRpb24gYXMgYW4gYW5jaG9yIHdoZW4gem9vbWluZ1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlQW5jaG9yIHRydWUgdG8gem9vbSB0byB0aGUgbW91c2UncyBsb2NhdGlvbiwgZmFsc2VcbiAgICAgKiB0byB6b29tIHRvIHRoZSBjZW50ZXIgb2YgdGhlIG1hcFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuc2V0TW91c2VBbmNob3IgPSBmdW5jdGlvbiAodXNlQW5jaG9yKSB7XG4gICAgICAgIHRoaXMudXNlQW5jaG9yXyA9IHVzZUFuY2hvcjtcbiAgICAgICAgaWYgKCF1c2VBbmNob3IpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTW91c2VXaGVlbFpvb207XG59KEludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBNb3VzZVdoZWVsWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1vdXNlV2hlZWxab29tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHsgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsIH0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGRpc2FibGUgfSBmcm9tICcuLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW5cbiAqIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGhyZXNob2xkPTAuM10gTWluaW1hbCBhbmdsZSBpbiByYWRpYW5zIHRvIHN0YXJ0IGEgcm90YXRpb24uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IHR3aXN0aW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hSb3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBpbmNoUm90YXRlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGluY2hSb3RhdGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcbiAgICAgICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBvaW50ZXJPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yb3RhdGluZ18gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yb3RhdGlvbkRlbHRhXyA9IDAuMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aHJlc2hvbGRfID0gb3B0aW9ucy50aHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGhyZXNob2xkIDogMC4zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIFBpbmNoUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciByb3RhdGlvbkRlbHRhID0gMC4wO1xuICAgICAgICB2YXIgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICAgICAgdmFyIHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgICAgIC8vIGFuZ2xlIGJldHdlZW4gdG91Y2hlc1xuICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHRvdWNoMS5jbGllbnRZIC0gdG91Y2gwLmNsaWVudFksIHRvdWNoMS5jbGllbnRYIC0gdG91Y2gwLmNsaWVudFgpO1xuICAgICAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGFuZ2xlIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyArPSBkZWx0YTtcbiAgICAgICAgICAgIGlmICghdGhpcy5yb3RhdGluZ18gJiYgTWF0aC5hYnModGhpcy5yb3RhdGlvbkRlbHRhXykgPiB0aGlzLnRocmVzaG9sZF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3RhdGlvbkRlbHRhID0gZGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0QW5nbGVfID0gYW5nbGU7XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyByb3RhdGUgYW5jaG9yIHBvaW50LlxuICAgICAgICAvLyBGSVhNRTogc2hvdWxkIGJlIHRoZSBpbnRlcnNlY3Rpb24gcG9pbnQgYmV0d2VlbiB0aGUgbGluZXM6XG4gICAgICAgIC8vICAgICB0b3VjaDAsdG91Y2gxIGFuZCBwcmV2aW91c1RvdWNoMCxwcmV2aW91c1RvdWNoMVxuICAgICAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IG1hcC5nZXRWaWV3cG9ydCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKTtcbiAgICAgICAgY2VudHJvaWRbMF0gLT0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0O1xuICAgICAgICBjZW50cm9pZFsxXSAtPSB2aWV3cG9ydFBvc2l0aW9uLnRvcDtcbiAgICAgICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChjZW50cm9pZCk7XG4gICAgICAgIC8vIHJvdGF0ZVxuICAgICAgICBpZiAodGhpcy5yb3RhdGluZ18pIHtcbiAgICAgICAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgICAgICAgIHZpZXcuYWRqdXN0Um90YXRpb25JbnRlcm5hbChyb3RhdGlvbkRlbHRhLCB0aGlzLmFuY2hvcl8pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfID0gMC4wO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGluY2hSb3RhdGU7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgUGluY2hSb3RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QaW5jaFJvdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21cbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwgeyBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycywgfSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTQwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IHBpbmNoaW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQaW5jaFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQaW5jaFpvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcbiAgICAgICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBvaW50ZXJPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiA0MDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdFNjYWxlRGVsdGFfID0gMTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzY2FsZURlbHRhID0gMS4wO1xuICAgICAgICB2YXIgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICAgICAgdmFyIHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgICAgIHZhciBkeCA9IHRvdWNoMC5jbGllbnRYIC0gdG91Y2gxLmNsaWVudFg7XG4gICAgICAgIHZhciBkeSA9IHRvdWNoMC5jbGllbnRZIC0gdG91Y2gxLmNsaWVudFk7XG4gICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gdG91Y2hlc1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBpZiAodGhpcy5sYXN0RGlzdGFuY2VfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNjYWxlRGVsdGEgPSB0aGlzLmxhc3REaXN0YW5jZV8gLyBkaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSBkaXN0YW5jZTtcbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHNjYWxlRGVsdGEgIT0gMS4wKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IHNjYWxlRGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2NhbGUgYW5jaG9yIHBvaW50LlxuICAgICAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IG1hcC5nZXRWaWV3cG9ydCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKTtcbiAgICAgICAgY2VudHJvaWRbMF0gLT0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0O1xuICAgICAgICBjZW50cm9pZFsxXSAtPSB2aWV3cG9ydFBvc2l0aW9uLnRvcDtcbiAgICAgICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChjZW50cm9pZCk7XG4gICAgICAgIC8vIHNjYWxlLCBieXBhc3MgdGhlIHJlc29sdXRpb24gY29uc3RyYWludFxuICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgIHZpZXcuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsKHNjYWxlRGVsdGEsIHRoaXMuYW5jaG9yXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmxhc3RTY2FsZURlbHRhXyA+IDEgPyAxIDogLTE7XG4gICAgICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB0aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5sYXN0RGlzdGFuY2VfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGluY2hab29tO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IFBpbmNoWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBpbmNoWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9NYXBcbiAqL1xuaW1wb3J0IENvbXBvc2l0ZU1hcFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvQ29tcG9zaXRlLmpzJztcbmltcG9ydCBQbHVnZ2FibGVNYXAgZnJvbSAnLi9QbHVnZ2FibGVNYXAuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgZGVmYXVsdHMgYXMgZGVmYXVsdENvbnRyb2xzIH0gZnJvbSAnLi9jb250cm9sLmpzJztcbmltcG9ydCB7IGRlZmF1bHRzIGFzIGRlZmF1bHRJbnRlcmFjdGlvbnMgfSBmcm9tICcuL2ludGVyYWN0aW9uLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogVGhlIG1hcCBpcyB0aGUgY29yZSBjb21wb25lbnQgb2YgT3BlbkxheWVycy4gRm9yIGEgbWFwIHRvIHJlbmRlciwgYSB2aWV3LFxuICogb25lIG9yIG1vcmUgbGF5ZXJzLCBhbmQgYSB0YXJnZXQgY29udGFpbmVyIGFyZSBuZWVkZWQ6XG4gKlxuICogICAgIGltcG9ydCBNYXAgZnJvbSAnb2wvTWFwJztcbiAqICAgICBpbXBvcnQgVmlldyBmcm9tICdvbC9WaWV3JztcbiAqICAgICBpbXBvcnQgVGlsZUxheWVyIGZyb20gJ29sL2xheWVyL1RpbGUnO1xuICogICAgIGltcG9ydCBPU00gZnJvbSAnb2wvc291cmNlL09TTSc7XG4gKlxuICogICAgIHZhciBtYXAgPSBuZXcgTWFwKHtcbiAqICAgICAgIHZpZXc6IG5ldyBWaWV3KHtcbiAqICAgICAgICAgY2VudGVyOiBbMCwgMF0sXG4gKiAgICAgICAgIHpvb206IDFcbiAqICAgICAgIH0pLFxuICogICAgICAgbGF5ZXJzOiBbXG4gKiAgICAgICAgIG5ldyBUaWxlTGF5ZXIoe1xuICogICAgICAgICAgIHNvdXJjZTogbmV3IE9TTSgpXG4gKiAgICAgICAgIH0pXG4gKiAgICAgICBdLFxuICogICAgICAgdGFyZ2V0OiAnbWFwJ1xuICogICAgIH0pO1xuICpcbiAqIFRoZSBhYm92ZSBzbmlwcGV0IGNyZWF0ZXMgYSBtYXAgdXNpbmcgYSB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL1RpbGV9IHRvXG4gKiBkaXNwbGF5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL09TTX5PU019IE9TTSBkYXRhIGFuZCByZW5kZXIgaXQgdG8gYSBET01cbiAqIGVsZW1lbnQgd2l0aCB0aGUgaWQgYG1hcGAuXG4gKlxuICogVGhlIGNvbnN0cnVjdG9yIHBsYWNlcyBhIHZpZXdwb3J0IGNvbnRhaW5lciAod2l0aCBDU1MgY2xhc3MgbmFtZVxuICogYG9sLXZpZXdwb3J0YCkgaW4gdGhlIHRhcmdldCBlbGVtZW50IChzZWUgYGdldFZpZXdwb3J0KClgKSwgYW5kIHRoZW4gdHdvXG4gKiBmdXJ0aGVyIGVsZW1lbnRzIHdpdGhpbiB0aGUgdmlld3BvcnQ6IG9uZSB3aXRoIENTUyBjbGFzcyBuYW1lXG4gKiBgb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRgIGZvciBjb250cm9scyBhbmQgc29tZSBvdmVybGF5cywgYW5kIG9uZSB3aXRoXG4gKiBDU1MgY2xhc3MgbmFtZSBgb2wtb3ZlcmxheWNvbnRhaW5lcmAgZm9yIG90aGVyIG92ZXJsYXlzIChzZWUgdGhlIGBzdG9wRXZlbnRgXG4gKiBvcHRpb24gb2Yge0BsaW5rIG1vZHVsZTpvbC9PdmVybGF5fk92ZXJsYXl9IGZvciB0aGUgZGlmZmVyZW5jZSkuIFRoZSBtYXBcbiAqIGl0c2VsZiBpcyBwbGFjZWQgaW4gYSBmdXJ0aGVyIGVsZW1lbnQgd2l0aGluIHRoZSB2aWV3cG9ydC5cbiAqXG4gKiBMYXllcnMgYXJlIHN0b3JlZCBhcyBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpblxuICogbGF5ZXJHcm91cHMuIEEgdG9wLWxldmVsIGdyb3VwIGlzIHByb3ZpZGVkIGJ5IHRoZSBsaWJyYXJ5LiBUaGlzIGlzIHdoYXQgaXNcbiAqIGFjY2Vzc2VkIGJ5IGBnZXRMYXllckdyb3VwYCBhbmQgYHNldExheWVyR3JvdXBgLiBMYXllcnMgZW50ZXJlZCBpbiB0aGVcbiAqIG9wdGlvbnMgYXJlIGFkZGVkIHRvIHRoaXMgZ3JvdXAsIGFuZCBgYWRkTGF5ZXJgIGFuZCBgcmVtb3ZlTGF5ZXJgIGNoYW5nZSB0aGVcbiAqIGxheWVyIGNvbGxlY3Rpb24gaW4gdGhlIGdyb3VwLiBgZ2V0TGF5ZXJzYCBpcyBhIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvclxuICogYGdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKWAuIE5vdGUgdGhhdCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0dyb3Vwfkdyb3VwfVxuICogaXMgYSBzdWJjbGFzcyBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V9LCBzbyBsYXllcnMgZW50ZXJlZCBpbiB0aGVcbiAqIG9wdGlvbnMgb3IgYWRkZWQgd2l0aCBgYWRkTGF5ZXJgIGNhbiBiZSBncm91cHMsIHdoaWNoIGNhbiBjb250YWluIGZ1cnRoZXJcbiAqIGdyb3VwcywgYW5kIHNvIG9uLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIE1hcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuTWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLmNvbnRyb2xzKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNvbnRyb2xzID0gZGVmYXVsdENvbnRyb2xzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25zLmludGVyYWN0aW9ucykge1xuICAgICAgICAgICAgb3B0aW9ucy5pbnRlcmFjdGlvbnMgPSBkZWZhdWx0SW50ZXJhY3Rpb25zKHtcbiAgICAgICAgICAgICAgICBvbkZvY3VzT25seTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBNYXAucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvc2l0ZU1hcFJlbmRlcmVyKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcDtcbn0oUGx1Z2dhYmxlTWFwKSk7XG5leHBvcnQgZGVmYXVsdCBNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2xcbiAqL1xuaW1wb3J0IEF0dHJpYnV0aW9uIGZyb20gJy4vY29udHJvbC9BdHRyaWJ1dGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IFJvdGF0ZSBmcm9tICcuL2NvbnRyb2wvUm90YXRlLmpzJztcbmltcG9ydCBab29tIGZyb20gJy4vY29udHJvbC9ab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQXR0cmlidXRpb24gfSBmcm9tICcuL2NvbnRyb2wvQXR0cmlidXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBDb250cm9sIH0gZnJvbSAnLi9jb250cm9sL0NvbnRyb2wuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBGdWxsU2NyZWVuIH0gZnJvbSAnLi9jb250cm9sL0Z1bGxTY3JlZW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb3VzZVBvc2l0aW9uIH0gZnJvbSAnLi9jb250cm9sL01vdXNlUG9zaXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBPdmVydmlld01hcCB9IGZyb20gJy4vY29udHJvbC9PdmVydmlld01hcC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFJvdGF0ZSB9IGZyb20gJy4vY29udHJvbC9Sb3RhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTY2FsZUxpbmUgfSBmcm9tICcuL2NvbnRyb2wvU2NhbGVMaW5lLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbSB9IGZyb20gJy4vY29udHJvbC9ab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbVNsaWRlciB9IGZyb20gJy4vY29udHJvbC9ab29tU2xpZGVyLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbVRvRXh0ZW50IH0gZnJvbSAnLi9jb250cm9sL1pvb21Ub0V4dGVudC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlZmF1bHRzT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb249dHJ1ZV0gSW5jbHVkZVxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL0F0dHJpYnV0aW9uLmpzXCIpLk9wdGlvbnN9IFthdHRyaWJ1dGlvbk9wdGlvbnNdXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcm90YXRlPXRydWVdIEluY2x1ZGVcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL1JvdGF0ZS5qc1wiKS5PcHRpb25zfSBbcm90YXRlT3B0aW9uc10gT3B0aW9uc1xuICogZm9yIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3pvb21dIEluY2x1ZGUge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29udHJvbC9ab29tLmpzXCIpLk9wdGlvbnN9IFt6b29tT3B0aW9uc10gT3B0aW9ucyBmb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LlxuICogQGFwaVxuICovXG4vKipcbiAqIFNldCBvZiBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzIGJ5IGRlZmF1bHQuIFVubGVzcyBjb25maWd1cmVkIG90aGVyd2lzZSxcbiAqIHRoaXMgcmV0dXJucyBhIGNvbGxlY3Rpb24gY29udGFpbmluZyBhbiBpbnN0YW5jZSBvZiBlYWNoIG9mIHRoZSBmb2xsb3dpbmdcbiAqIGNvbnRyb2xzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zPX0gb3B0X29wdGlvbnNcbiAqIERlZmF1bHRzIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fVxuICogQ29udHJvbHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgIHZhciBjb250cm9scyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgdmFyIHpvb21Db250cm9sID0gb3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb20gOiB0cnVlO1xuICAgIGlmICh6b29tQ29udHJvbCkge1xuICAgICAgICBjb250cm9scy5wdXNoKG5ldyBab29tKG9wdGlvbnMuem9vbU9wdGlvbnMpKTtcbiAgICB9XG4gICAgdmFyIHJvdGF0ZUNvbnRyb2wgPSBvcHRpb25zLnJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGUgOiB0cnVlO1xuICAgIGlmIChyb3RhdGVDb250cm9sKSB7XG4gICAgICAgIGNvbnRyb2xzLnB1c2gobmV3IFJvdGF0ZShvcHRpb25zLnJvdGF0ZU9wdGlvbnMpKTtcbiAgICB9XG4gICAgdmFyIGF0dHJpYnV0aW9uQ29udHJvbCA9IG9wdGlvbnMuYXR0cmlidXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXR0cmlidXRpb24gOiB0cnVlO1xuICAgIGlmIChhdHRyaWJ1dGlvbkNvbnRyb2wpIHtcbiAgICAgICAgY29udHJvbHMucHVzaChuZXcgQXR0cmlidXRpb24ob3B0aW9ucy5hdHRyaWJ1dGlvbk9wdGlvbnMpKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRyb2xzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udHJvbC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBEb3VibGVDbGlja1pvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMnO1xuaW1wb3J0IERyYWdQYW4gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzJztcbmltcG9ydCBEcmFnUm90YXRlIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyc7XG5pbXBvcnQgRHJhZ1pvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnWm9vbS5qcyc7XG5pbXBvcnQgS2V5Ym9hcmRQYW4gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyc7XG5pbXBvcnQgS2V5Ym9hcmRab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzJztcbmltcG9ydCBLaW5ldGljIGZyb20gJy4vS2luZXRpYy5qcyc7XG5pbXBvcnQgTW91c2VXaGVlbFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyc7XG5pbXBvcnQgUGluY2hSb3RhdGUgZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyc7XG5pbXBvcnQgUGluY2hab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRG91YmxlQ2xpY2tab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnQW5kRHJvcCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ0FuZERyb3AuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnQm94IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQm94LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1BhbiB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdSb3RhdGUgfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnUm90YXRlQW5kWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmF3IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmF3LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRXh0ZW50IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9FeHRlbnQuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBJbnRlcmFjdGlvbiB9IGZyb20gJy4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBLZXlib2FyZFBhbiB9IGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBLZXlib2FyZFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vZGlmeSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vTW9kaWZ5LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW91c2VXaGVlbFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGluY2hSb3RhdGUgfSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGluY2hab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQb2ludGVyIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Qb2ludGVyLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgU2VsZWN0IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9TZWxlY3QuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTbmFwIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9TbmFwLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgVHJhbnNsYXRlIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9UcmFuc2xhdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZWZhdWx0c09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsdFNoaWZ0RHJhZ1JvdGF0ZT10cnVlXSBXaGV0aGVyIEFsdC1TaGlmdC1kcmFnIHJvdGF0ZSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29uRm9jdXNPbmx5PWZhbHNlXSBJbnRlcmFjdCBvbmx5IHdoZW4gdGhlIG1hcCBoYXMgdGhlXG4gKiBmb2N1cy4gVGhpcyBhZmZlY3RzIHRoZSBgTW91c2VXaGVlbFpvb21gIGFuZCBgRHJhZ1BhbmAgaW50ZXJhY3Rpb25zIGFuZCBpc1xuICogdXNlZnVsIHdoZW4gcGFnZSBzY3JvbGwgaXMgZGVzaXJlZCBmb3IgbWFwcyB0aGF0IGRvIG5vdCBoYXZlIHRoZSBicm93c2VyJ3NcbiAqIGZvY3VzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZG91YmxlQ2xpY2tab29tPXRydWVdIFdoZXRoZXIgZG91YmxlIGNsaWNrIHpvb20gaXNcbiAqIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtrZXlib2FyZD10cnVlXSBXaGV0aGVyIGtleWJvYXJkIGludGVyYWN0aW9uIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFttb3VzZVdoZWVsWm9vbT10cnVlXSBXaGV0aGVyIG1vdXNld2hlZWwgem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc2hpZnREcmFnWm9vbT10cnVlXSBXaGV0aGVyIFNoaWZ0LWRyYWcgem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZHJhZ1Bhbj10cnVlXSBXaGV0aGVyIGRyYWcgcGFuIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFJvdGF0ZT10cnVlXSBXaGV0aGVyIHBpbmNoIHJvdGF0ZSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcGluY2hab29tPXRydWVdIFdoZXRoZXIgcGluY2ggem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRGVsdGFdIFpvb20gbGV2ZWwgZGVsdGEgd2hlbiB1c2luZyBrZXlib2FyZCBvciBkb3VibGUgY2xpY2sgem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbUR1cmF0aW9uXSBEdXJhdGlvbiBvZiB0aGUgem9vbSBhbmltYXRpb24gaW5cbiAqIG1pbGxpc2Vjb25kcy5cbiAqL1xuLyoqXG4gKiBTZXQgb2YgaW50ZXJhY3Rpb25zIGluY2x1ZGVkIGluIG1hcHMgYnkgZGVmYXVsdC4gU3BlY2lmaWMgaW50ZXJhY3Rpb25zIGNhbiBiZVxuICogZXhjbHVkZWQgYnkgc2V0dGluZyB0aGUgYXBwcm9wcmlhdGUgb3B0aW9uIHRvIGZhbHNlIGluIHRoZSBjb25zdHJ1Y3RvclxuICogb3B0aW9ucywgYnV0IHRoZSBvcmRlciBvZiB0aGUgaW50ZXJhY3Rpb25zIGlzIGZpeGVkLiAgSWYgeW91IHdhbnQgdG8gc3BlY2lmeVxuICogYSBkaWZmZXJlbnQgb3JkZXIgZm9yIGludGVyYWN0aW9ucywgeW91IHdpbGwgbmVlZCB0byBjcmVhdGUgeW91ciBvd25cbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb259IGluc3RhbmNlcyBhbmQgaW5zZXJ0XG4gKiB0aGVtIGludG8gYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb259IGluIHRoZSBvcmRlciB5b3Ugd2FudFxuICogYmVmb3JlIGNyZWF0aW5nIHlvdXIge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBpbnN0YW5jZS4gQ2hhbmdpbmcgdGhlIG9yZGVyIGNhblxuICogYmUgb2YgaW50ZXJlc3QgaWYgdGhlIGV2ZW50IHByb3BhZ2F0aW9uIG5lZWRzIHRvIGJlIHN0b3BwZWQgYXQgYSBwb2ludC5cbiAqIFRoZSBkZWZhdWx0IHNldCBvZiBpbnRlcmFjdGlvbnMsIGluIHNlcXVlbmNlLCBpczpcbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlfkRyYWdSb3RhdGV9XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tfkRvdWJsZUNsaWNrWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUGFufkRyYWdQYW59XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGV+UGluY2hSb3RhdGV9XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vUGluY2hab29tflBpbmNoWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tfk1vdXNlV2hlZWxab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdab29tfkRyYWdab29tfVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zPX0gb3B0X29wdGlvbnMgRGVmYXVsdHMgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKiBBIGNvbGxlY3Rpb24gb2YgaW50ZXJhY3Rpb25zIHRvIGJlIHVzZWQgd2l0aCB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfVxuICogY29uc3RydWN0b3IncyBgaW50ZXJhY3Rpb25zYCBvcHRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgIHZhciBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbigpO1xuICAgIHZhciBraW5ldGljID0gbmV3IEtpbmV0aWMoLTAuMDA1LCAwLjA1LCAxMDApO1xuICAgIHZhciBhbHRTaGlmdERyYWdSb3RhdGUgPSBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5hbHRTaGlmdERyYWdSb3RhdGVcbiAgICAgICAgOiB0cnVlO1xuICAgIGlmIChhbHRTaGlmdERyYWdSb3RhdGUpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdSb3RhdGUoKSk7XG4gICAgfVxuICAgIHZhciBkb3VibGVDbGlja1pvb20gPSBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kb3VibGVDbGlja1pvb20gOiB0cnVlO1xuICAgIGlmIChkb3VibGVDbGlja1pvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERvdWJsZUNsaWNrWm9vbSh7XG4gICAgICAgICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIGRyYWdQYW4gPSBvcHRpb25zLmRyYWdQYW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHJhZ1BhbiA6IHRydWU7XG4gICAgaWYgKGRyYWdQYW4pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdQYW4oe1xuICAgICAgICAgICAgb25Gb2N1c09ubHk6IG9wdGlvbnMub25Gb2N1c09ubHksXG4gICAgICAgICAgICBraW5ldGljOiBraW5ldGljLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBwaW5jaFJvdGF0ZSA9IG9wdGlvbnMucGluY2hSb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGluY2hSb3RhdGUgOiB0cnVlO1xuICAgIGlmIChwaW5jaFJvdGF0ZSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hSb3RhdGUoKSk7XG4gICAgfVxuICAgIHZhciBwaW5jaFpvb20gPSBvcHRpb25zLnBpbmNoWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFpvb20gOiB0cnVlO1xuICAgIGlmIChwaW5jaFpvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IFBpbmNoWm9vbSh7XG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIGtleWJvYXJkID0gb3B0aW9ucy5rZXlib2FyZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlib2FyZCA6IHRydWU7XG4gICAgaWYgKGtleWJvYXJkKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBLZXlib2FyZFBhbigpKTtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkWm9vbSh7XG4gICAgICAgICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIG1vdXNlV2hlZWxab29tID0gb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSA6IHRydWU7XG4gICAgaWYgKG1vdXNlV2hlZWxab29tKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBNb3VzZVdoZWVsWm9vbSh7XG4gICAgICAgICAgICBvbkZvY3VzT25seTogb3B0aW9ucy5vbkZvY3VzT25seSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgc2hpZnREcmFnWm9vbSA9IG9wdGlvbnMuc2hpZnREcmFnWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaGlmdERyYWdab29tIDogdHJ1ZTtcbiAgICBpZiAoc2hpZnREcmFnWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1pvb20oe1xuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiBpbnRlcmFjdGlvbnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmFjdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1hZWlxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBUaWxlSW1hZ2UgZnJvbSAnLi9UaWxlSW1hZ2UuanMnO1xuaW1wb3J0IHsgY3JlYXRlWFlaLCBleHRlbnRGcm9tUHJvamVjdGlvbiB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ltYWdlU21vb3RoaW5nPXRydWVdIEVuYWJsZSBpbWFnZSBzbW9vdGhpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbT00Ml0gT3B0aW9uYWwgbWF4IHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gT3B0aW9uYWwgbWluIHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIE9wdGlvbmFsIHRpbGUgZ3JpZCByZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZSBncmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW89MV0gVGhlIHBpeGVsIHJhdGlvIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZSBzZXJ2aWNlIGFkdmVydGl6ZXMgMjU2cHggYnkgMjU2cHggdGlsZXMgYnV0IGFjdHVhbGx5IHNlbmRzIDUxMnB4XG4gKiBieSA1MTJweCBpbWFnZXMgKGZvciByZXRpbmEvaGlkcGkgZGV2aWNlcykgdGhlbiBgdGlsZVBpeGVsUmF0aW9gXG4gKiBzaG91bGQgYmUgc2V0IHRvIGAyYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplPVsyNTYsIDI1Nl1dIFRoZSB0aWxlIHNpemUgdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLlxuICogTm90IHVzZWQgaWYgYHRpbGVHcmlkYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0XG4gKiB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBSZXF1aXJlZCBpZiBgdXJsYCBvciBgdXJsc2AgYXJlIG5vdCBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLFxuICogYW5kIGB7en1gIHBsYWNlaG9sZGVycy4gQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCxcbiAqIG1heSBiZSB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekRpcmVjdGlvbj0wXSBJbmRpY2F0ZSB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3IHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMYXllciBzb3VyY2UgZm9yIHRpbGUgZGF0YSB3aXRoIFVSTHMgaW4gYSBzZXQgWFlaIGZvcm1hdCB0aGF0IGFyZVxuICogZGVmaW5lZCBpbiBhIFVSTCB0ZW1wbGF0ZS4gQnkgZGVmYXVsdCwgdGhpcyBmb2xsb3dzIHRoZSB3aWRlbHktdXNlZFxuICogR29vZ2xlIGdyaWQgd2hlcmUgYHhgIDAgYW5kIGB5YCAwIGFyZSBpbiB0aGUgdG9wIGxlZnQuIEdyaWRzIGxpa2VcbiAqIFRNUyB3aGVyZSBgeGAgMCBhbmQgYHlgIDAgYXJlIGluIHRoZSBib3R0b20gbGVmdCBjYW4gYmUgdXNlZCBieVxuICogdXNpbmcgdGhlIGB7LXl9YCBwbGFjZWhvbGRlciBpbiB0aGUgVVJMIHRlbXBsYXRlLCBzbyBsb25nIGFzIHRoZVxuICogc291cmNlIGRvZXMgbm90IGhhdmUgYSBjdXN0b20gdGlsZSBncmlkLiBJbiB0aGlzIGNhc2UsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlSW1hZ2V9IGNhbiBiZSB1c2VkIHdpdGggYSBgdGlsZVVybEZ1bmN0aW9uYFxuICogc3VjaCBhczpcbiAqXG4gKiAgdGlsZVVybEZ1bmN0aW9uOiBmdW5jdGlvbihjb29yZGluYXRlKSB7XG4gKiAgICByZXR1cm4gJ2h0dHA6Ly9tYXBzZXJ2ZXIuY29tLycgKyBjb29yZGluYXRlWzBdICsgJy8nICtcbiAqICAgICAgICBjb29yZGluYXRlWzFdICsgJy8nICsgY29vcmRpbmF0ZVsyXSArICcucG5nJztcbiAqICAgIH1cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBYWVogPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFhZWiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM9fSBvcHRfb3B0aW9ucyBYWVogb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBYWVoob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy50aWxlR3JpZFxuICAgICAgICAgICAgOiBjcmVhdGVYWVooe1xuICAgICAgICAgICAgICAgIGV4dGVudDogZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbiksXG4gICAgICAgICAgICAgICAgbWF4UmVzb2x1dGlvbjogb3B0aW9ucy5tYXhSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIG1heFpvb206IG9wdGlvbnMubWF4Wm9vbSxcbiAgICAgICAgICAgICAgICBtaW5ab29tOiBvcHRpb25zLm1pblpvb20sXG4gICAgICAgICAgICAgICAgdGlsZVNpemU6IG9wdGlvbnMudGlsZVNpemUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luOiBvcHRpb25zLmNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgaW1hZ2VTbW9vdGhpbmc6IG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbixcbiAgICAgICAgICAgIHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOiBvcHRpb25zLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLFxuICAgICAgICAgICAgdGlsZUdyaWQ6IHRpbGVHcmlkLFxuICAgICAgICAgICAgdGlsZUxvYWRGdW5jdGlvbjogb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uLFxuICAgICAgICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB0aWxlVXJsRnVuY3Rpb246IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLFxuICAgICAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgICAgICAgIHVybHM6IG9wdGlvbnMudXJscyxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlLFxuICAgICAgICAgICAgekRpcmVjdGlvbjogb3B0aW9ucy56RGlyZWN0aW9uLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBYWVo7XG59KFRpbGVJbWFnZSkpO1xuZXhwb3J0IGRlZmF1bHQgWFlaO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9WFlaLmpzLm1hcCIsImltcG9ydCAnb2wvb2wuY3NzJztcbmltcG9ydCBPTENlc2l1bSBmcm9tICdvbGNzL09MQ2VzaXVtJztcblxuaW1wb3J0IHtNYXAgYXMgT2xNYXAsIFZpZXcgYXMgT2xWaWV3fSBmcm9tICdvbCc7XG5pbXBvcnQge1RpbGUgYXMgVGlsZUxheWVyfSBmcm9tICdvbC9sYXllcic7XG5pbXBvcnQge09TTSBhcyBPU01Tb3VyY2UsIFhZWiBhcyBYWVpTb3VyY2V9IGZyb20gJ29sL3NvdXJjZSc7XG5pbXBvcnQge2Zyb21Mb25MYXR9IGZyb20gJ29sL3Byb2onXG5cbmxldCBzaG93M2QgPSBmYWxzZTtcbmxldCBhcHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyk7XG5hcHAuc3R5bGUuaGVpZ2h0ID0gJzEwMHZoJztcbmxldCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FudGknKTtcbmxldCB2aWV3ID0gbmV3IE9sVmlldyh7XG4gIGNlbnRlcjogZnJvbUxvbkxhdChbMTA2LjgyMDg4MjgsIC02LjYxNjkwMDNdKSxcbiAgem9vbTogMTIsXG5cbn0pO1xuXG5jb25zdCBiYXNlbWFwID0gbmV3IFRpbGVMYXllcih7XG4gIHNvdXJjZTogbmV3IFhZWlNvdXJjZSh7XG4gICAgdXJsOiAnaHR0cDovL210MC5nb29nbGUuY29tL3Z0L2x5cnM9bSZobD1lbiZ4PXt4fSZ5PXt5fSZ6PXt6fSdcbiAgfSlcbn0pXG5cbmxldCBtYXAgPSBuZXcgT2xNYXAoe1xuICB0YXJnZXQ6IGFwcCxcbiAgdmlldzogdmlldyxcbiAgbGF5ZXJzOiBbYmFzZW1hcF0sXG59KTtcblxuY29uc3Qgb2wzZCA9IG5ldyBPTENlc2l1bSh7bWFwOiBtYXB9KTtcbmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIGlmIChzaG93M2QpIHtcbiAgICBzaG93M2QgPSBmYWxzZTtcbiAgfWVsc2V7XG4gICAgc2hvdzNkID0gdHJ1ZVxuICB9XG4gIG9sM2Quc2V0RW5hYmxlZChzaG93M2QpO1xufSlcblxud2luZG93Lm9sM2QgPSBvbDNkO1xuXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=